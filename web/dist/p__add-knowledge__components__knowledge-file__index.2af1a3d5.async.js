"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[1505],{11218:function(e,n,t){t.d(n,{Z:function(){return P}});var r=t(15009),a=t.n(r),o=t(99289),i=t.n(o),s=t(5574),u=t.n(s),c=t(97857),l=t.n(c),d=t(19632),p=t.n(d),m=t(86968),f=t(64082),h=t(84553),g=t(38703),v=t(85576),x=t(86250),b=t(92783),k=t(84567),w=t(92398),y=t(67294),_="uploader___ezBcw",Z=t(85893),j=h.Z.Dragger,C=function(e){var n=e.directory,t=e.fileList,r=e.setFileList,a=e.uploadProgress,o=(0,m.qM)("fileManager").t,i={multiple:!0,onRemove:function(e){var n=t.indexOf(e),a=t.slice();a.splice(n,1),r(a)},beforeUpload:function(e){return r((function(n){return[].concat(p()(n),[e])})),!1},directory:n,fileList:t,progress:{strokeWidth:2}};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(g.Z,{percent:a,showInfo:!1}),(0,Z.jsxs)(j,l()(l()({},i),{},{className:_,children:[(0,Z.jsx)("p",{className:"ant-upload-drag-icon",children:(0,Z.jsx)(f.Z,{})}),(0,Z.jsx)("p",{className:"ant-upload-text",children:o("uploadTitle")}),(0,Z.jsx)("p",{className:"ant-upload-hint",children:o("uploadDescription")}),!1]}))]})},P=function(e){var n=e.visible,t=e.hideModal,r=e.loading,o=e.onOk,s=e.uploadFileList,c=e.setUploadFileList,l=e.uploadProgress,d=e.setUploadProgress,f=(0,m.qM)("fileManager").t,h=(0,y.useState)("local"),g=u()(h,2),_=g[0],j=g[1],P=(0,y.useState)(!1),M=u()(P,2),K=M[0],D=M[1],I=(0,y.useState)([]),O=u()(I,2),N=O[0],S=O[1],L=(0,y.useState)([]),F=u()(L,2),E=F[0],T=F[1],R=function(){var e=i()(a()().mark((function e(){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(100!==l){e.next=3;break}return null==t||t(),e.abrupt("return");case 3:return e.next=5,null==o?void 0:o(s?{parseOnCreation:K,directoryFileList:E}:[].concat(p()(N),p()(E)));case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=[{key:"1",label:f("file"),children:(0,Z.jsx)(C,{directory:!1,fileList:s||N,setFileList:c||S,uploadProgress:l})},{key:"2",label:f("directory"),children:(0,Z.jsx)(C,{directory:!0,fileList:E,setFileList:T,uploadProgress:l})}];return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(v.Z,{title:f("uploadFile"),open:n,onOk:R,onCancel:t,confirmLoading:r,afterClose:function(){c?(c([]),null==d||d(0)):S([]),T([])},children:(0,Z.jsxs)(x.Z,{gap:"large",vertical:!0,children:[(0,Z.jsx)(b.Z,{options:[{label:f("local"),value:"local"},{label:f("s3"),value:"s3"}],block:!0,value:_,onChange:j}),"local"===_?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(k.Z,{checked:K,onChange:function(e){return D(e.target.checked)},children:f("parseOnCreation")}),(0,Z.jsx)(w.Z,{defaultActiveKey:"1",items:A})]}):f("comingSoon",{keyPrefix:"common"})]})})})}},96330:function(e,n,t){t.d(n,{K1:function(){return p},Rx:function(){return o},S8:function(){return u},Vr:function(){return c},cG:function(){return i},ld:function(){return l},n_:function(){return d},oQ:function(){return s}});var r=t(9783),a=t.n(r),o=function(e){return e.Dataset="dataset",e.Testing="testing",e.Configuration="configuration",e.KnowledgeGraph="knowledgeGraph",e}({}),i=function(e){return e.UNSTART="0",e.RUNNING="1",e.CANCEL="2",e.DONE="3",e.FAIL="4",e}({}),s=function(e){return e.Improvise="Improvise",e.Precise="Precise",e.Balance="Balance",e}({}),u=a()(a()(a()({},s.Improvise,{temperature:.9,top_p:.9,frequency_penalty:.2,presence_penalty:.4,max_tokens:512}),s.Precise,{temperature:.1,top_p:.3,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),s.Balance,{temperature:.5,top_p:.5,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),c=function(e){return e.Embedding="embedding",e.Chat="chat",e.Image2text="image2text",e.Speech2text="speech2text",e.Rerank="rerank",e.TTS="tts",e}({}),l=function(e){return e.DocumentId="doc_id",e.KnowledgeId="id",e}({}),d=function(e){return e.Virtual="virtual",e.Visual="visual",e}({}),p=function(e){return e.Naive="naive",e.Qa="qa",e.Resume="resume",e.Manual="manual",e.Table="table",e.Paper="paper",e.Book="book",e.Laws="laws",e.Presentation="presentation",e.Picture="picture",e.One="one",e.Audio="audio",e.Email="email",e.Tag="tag",e.KnowledgeGraph="knowledge_graph",e}({})},93352:function(e,n,t){t.d(n,{A3:function(){return D},GH:function(){return I},Hy:function(){return U},Mc:function(){return G},QG:function(){return L},Yb:function(){return S},an:function(){return T},hf:function(){return F},jz:function(){return K},pC:function(){return C},tC:function(){return A},tl:function(){return P},ui:function(){return N},v3:function(){return M},wO:function(){return R},wk:function(){return O},x2:function(){return E}});var r=t(97857),a=t.n(r),o=t(15009),i=t.n(o),s=t(99289),u=t.n(s),c=t(5574),l=t.n(c),d=t(54707),p=t(53506),m=t(73955),f=t(60806),h=t(5089),g=t(78158),v=t(78551),x=t(30202),b=t(98029),k=t(45360),w=t(96486),y=t(67294),_=t(86004),Z=t(2938),j=t(96100),C=function(e){return(0,y.useCallback)((function(n){return"".concat(f.N,"/document/get/").concat(e||n)}),[e])},P=function(e){var n=(0,y.useState)({width:849,height:1200}),t=l()(n,2),r=t[0],a=t[1];return{highlights:(0,y.useMemo)((function(){return(0,h.q1)(e,r)}),[e,r]),setWidthAndHeight:function(e,n){a((function(t){return t.height!==n||t.width!==e?{height:n,width:e}:t}))}}},M=function(){var e,n=(0,j.pE)().knowledgeId,t=(0,Z.Qe)(),r=t.searchString,o=t.handleInputChange,s=(0,Z.ye)(),c=s.pagination,l=s.setPagination,d=(0,_.UO)().id,p=(0,v.a)({queryKey:["fetchDocumentList",r,c],initialData:{docs:[],total:0},refetchInterval:15e3,enabled:!!n||!!d,queryFn:(e=u()(i()().mark((function e(){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.get_document_list({kb_id:n||d,keywords:r,page_size:c.pageSize,page:c.current});case 2:if(0!==(t=e.sent).data.code){e.next=5;break}return e.abrupt("return",t.data.data);case 5:return e.abrupt("return",{docs:[],total:0});case 6:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}),f=p.data,h=p.isFetching,g=(0,y.useCallback)((function(e){l({page:1}),o(e)}),[o,l]);return{loading:h,searchString:r,documents:f.docs,pagination:a()(a()({},c),{},{total:null==f?void 0:f.total}),handleInputChange:g,setPagination:l}},K=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["updateDocumentStatus"],mutationFn:(e=u()(i()().mark((function e(t){var r,a,o,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.status,a=t.documentId,e.next=3,m.ZP.document_change_status({doc_id:a,status:Number(r)});case 3:return o=e.sent,0===(s=o.data).code&&(k.ZP.success(d.Z.t("message.modified")),n.invalidateQueries({queryKey:["fetchDocumentList"]})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}),r=t.data,a=t.isPending;return{setDocumentStatus:t.mutateAsync,data:r,loading:a}},D=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["saveDocumentName"],mutationFn:(e=u()(i()().mark((function e(t){var r,a,o,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.documentId,e.next=3,m.ZP.document_rename({doc_id:a,name:r});case 3:return o=e.sent,0===(s=o.data).code&&(k.ZP.success(d.Z.t("message.renamed")),n.invalidateQueries({queryKey:["fetchDocumentList"]})),e.abrupt("return",s.code);case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}),r=t.data;return{loading:t.isPending,saveName:t.mutateAsync,data:r}},I=function(){var e,n=(0,j.pE)().knowledgeId,t=(0,j.fz)(),r=t.setPaginationParams,a=t.page,o=(0,x.NL)(),s=(0,b.D)({mutationKey:["createDocument"],mutationFn:(e=u()(i()().mark((function e(t){var s,u;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.document_create({name:t,kb_id:n});case 2:return s=e.sent,0===(u=s.data).code&&(1===a?o.invalidateQueries({queryKey:["fetchDocumentList"]}):r(),k.ZP.success(d.Z.t("message.created"))),e.abrupt("return",u.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}),c=s.data,l=s.isPending;return{createDocument:s.mutateAsync,loading:l,data:c}},O=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["setDocumentParser"],mutationFn:(e=u()(i()().mark((function e(t){var r,a,o,s,u;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.parserId,a=t.documentId,o=t.parserConfig,e.next=3,m.ZP.document_change_parser({parser_id:r,doc_id:a,parser_config:o});case 3:return s=e.sent,0===(u=s.data).code&&(n.invalidateQueries({queryKey:["fetchDocumentList"]}),k.ZP.success(d.Z.t("message.modified"))),e.abrupt("return",u.code);case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}),r=t.data,a=t.isPending;return{setDocumentParser:t.mutateAsync,data:r,loading:a}},N=function(){var e,n=(0,x.NL)(),t=(0,j.pE)().knowledgeId,r=(0,b.D)({mutationKey:["uploadDocument"],mutationFn:(e=u()(i()().mark((function e(r){var a,o,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("kb_id",t),r.forEach((function(e){a.append("file",e)})),e.prev=3,e.next=6,m.ZP.document_upload(a);case 6:return o=e.sent,0!==(s=(0,w.get)(o,"data.code"))&&500!==s||n.invalidateQueries({queryKey:["fetchDocumentList"]}),e.abrupt("return",null==o?void 0:o.data);case 12:return e.prev=12,e.t0=e.catch(3),console.warn(e.t0),e.abrupt("return",{code:500,message:e.t0+""});case 16:case"end":return e.stop()}}),e,null,[[3,12]])}))),function(n){return e.apply(this,arguments)})}),a=r.data,o=r.isPending;return{uploadDocument:r.mutateAsync,loading:o,data:a}},S=function(){var e,n=(0,j.pE)().knowledgeId,t=(0,b.D)({mutationKey:["webCrawl"],mutationFn:(e=u()(i()().mark((function e(t){var r,a,o,s,u;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.url,(o=new FormData).append("name",r),o.append("url",a),o.append("kb_id",n),e.next=7,m.ZP.web_crawl(o);case 7:return s=e.sent,0===(u=(0,w.get)(s,"data.code"))&&k.ZP.success(d.Z.t("message.uploaded")),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:t.data,loading:t.isPending,webCrawl:t.mutateAsync}},L=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["runDocumentByIds"],mutationFn:(e=u()(i()().mark((function e(t){var r,a,o,s,u;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.documentIds,a=t.run,o=t.shouldDelete,e.next=3,m.ZP.document_run({doc_ids:r,run:a,delete:o});case 3:return s=e.sent,0===(u=(0,w.get)(s,"data.code"))&&(n.invalidateQueries({queryKey:["fetchDocumentList"]}),k.ZP.success(d.Z.t("message.operated"))),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}),r=t.data,a=t.isPending;return{runDocumentByIds:t.mutateAsync,loading:a,data:r}},F=function(){var e,n=(0,y.useState)([]),t=l()(n,2),r=t[0],a=t[1],o=(0,v.a)({queryKey:["fetchDocumentInfos",r],enabled:r.length>0,initialData:[],queryFn:(e=u()(i()().mark((function e(){var n,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.document_infos({doc_ids:r});case 2:if(n=e.sent,0!==(t=n.data).code){e.next=6;break}return e.abrupt("return",t.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:o.data,setDocumentIds:a}},E=function(){var e,n=(0,y.useState)([]),t=l()(n,2),r=t[0],a=t[1],o=(0,v.a)({queryKey:["fetchDocumentThumbnails",r],enabled:r.length>0,initialData:{},queryFn:(e=u()(i()().mark((function e(){var n,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.document_thumbnails({doc_ids:r});case 2:if(n=e.sent,0!==(t=n.data).code){e.next=6;break}return e.abrupt("return",t.data);case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:o.data,setDocumentIds:a}},T=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["removeDocument"],mutationFn:(e=u()(i()().mark((function e(t){var r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.document_rm({doc_id:t});case 2:return r=e.sent,0===(a=r.data).code&&(k.ZP.success(d.Z.t("message.deleted")),n.invalidateQueries({queryKey:["fetchDocumentList"]})),e.abrupt("return",a.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:t.data,loading:t.isPending,removeDocument:t.mutateAsync}},R=function(){var e,n=(0,b.D)({mutationKey:["deleteDocument"],mutationFn:(e=u()(i()().mark((function e(n){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.document_delete({doc_ids:n});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:n.data,loading:n.isPending,deleteDocument:n.mutateAsync}},A=function(e){var n,t=(0,b.D)({mutationKey:["uploadAndParseDocument"],mutationFn:(n=u()(i()().mark((function n(t){var r,a,o,s,u;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.conversationId,a=t.fileList,n.prev=1,(o=new FormData).append("conversation_id",r),a.forEach((function(e){o.append("file",e)})),"upload_and_parse"!==e){n.next=10;break}return n.next=8,m.ZP.upload_and_parse(o);case 8:return s=n.sent,n.abrupt("return",null==s?void 0:s.data);case 10:return n.next=12,p.Z.uploadAndParseExternal(o);case 12:return u=n.sent,n.abrupt("return",null==u?void 0:u.data);case 16:n.prev=16,n.t0=n.catch(1);case 18:case"end":return n.stop()}}),n,null,[[1,16]])}))),function(e){return n.apply(this,arguments)})});return{data:t.data,loading:t.isPending,uploadAndParseDocument:t.mutateAsync}},G=function(){var e,n=(0,b.D)({mutationKey:["parseDocument"],mutationFn:(e=u()(i()().mark((function e(n){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.v_)(f.Z.parse,{url:n});case 3:return 0===(null==(t=e.sent)?void 0:t.code)&&k.ZP.success(d.Z.t("message.uploaded")),e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),k.ZP.error("error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(n){return e.apply(this,arguments)})}),t=n.data,r=n.isPending;return{parseDocument:n.mutateAsync,data:t,loading:r}},U=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["setDocumentMeta"],mutationFn:(e=u()(i()().mark((function e(t){var r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.ZP.setMeta({meta:t.meta,doc_id:t.documentId});case 3:return r=e.sent,0===(null==(a=r.data)?void 0:a.code)&&(n.invalidateQueries({queryKey:["fetchDocumentList"]}),k.ZP.success(d.Z.t("message.modified"))),e.abrupt("return",null==a?void 0:a.code);case 9:e.prev=9,e.t0=e.catch(0),k.ZP.error("error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),function(n){return e.apply(this,arguments)})}),r=t.data,a=t.isPending;return{setDocumentMeta:t.mutateAsync,data:r,loading:a}}},2938:function(e,n,t){t.d(n,{H0:function(){return F},IV:function(){return L},NT:function(){return T},Qe:function(){return O},UL:function(){return N},Y2:function(){return V},c5:function(){return E},cE:function(){return I},ox:function(){return U},sO:function(){return z},vv:function(){return A},vy:function(){return G},y7:function(){return R},ye:function(){return S}});var r=t(19632),a=t.n(r),o=t(97857),i=t.n(o),s=t(9783),u=t.n(s),c=t(15009),l=t.n(c),d=t(99289),p=t.n(d),m=t(5574),f=t.n(m),h=t(39918),g=t(1079),v=t(40169),x=t(60806),b=t(61921),k=t(71250),w=t(45360),y=t(54683),_=t(24809),Z=t(96486),j=t(67294),C=t(67421),P=t(57632),M=t(86968),K=t(96100),D=t(39259),I=function(){var e=(0,j.useState)({}),n=f()(e,2),t=n[0],r=n[1];return{currentRecord:t,setRecord:function(e){r(e)}}},O=function(){var e=(0,j.useState)(""),n=f()(e,2),t=n[0],r=n[1];return{handleInputChange:(0,j.useCallback)((function(e){var n=e.target.value;r(n)}),[]),searchString:t}},N=function(){var e=(0,C.$G)().i18n,n=(0,D.WH)().saveSetting;return function(t){e.changeLanguage(v.Kj[t]),n({language:t})}},S=function(){var e=(0,M.qM)("common").t,n=(0,K.fz)(),t=n.setPaginationParams,r=n.page,a=n.size,o=(0,j.useCallback)((function(e,n){t(e,n)}),[t]),i=(0,j.useCallback)((function(e){t(e.page,e.pageSize)}),[t]);return{pagination:(0,j.useMemo)((function(){return{showQuickJumper:!0,total:0,showSizeChanger:!0,current:r,pageSize:a,pageSizeOptions:[1,2,10,20,50,100],onChange:o,showTotal:function(n){return"".concat(e("total")," ").concat(n)}}}),[e,o,r,a]),setPagination:i}},L=function(){var e=(0,j.useState)({}),n=f()(e,2),t=n[0],r=n[1],a=(0,j.useCallback)(p()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Z.get("/conf.json");case 2:n=e.sent,r(n.data);case 4:case"end":return e.stop()}}),e)}))),[]);return(0,j.useEffect)((function(){a()}),[a]),t},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.Z.completeConversation,n=(0,j.useState)({}),t=f()(n,2),r=t[0],a=t[1],o=(0,j.useState)(!0),s=f()(o,2),c=s[0],d=s[1],m=(0,j.useRef)(),g=(0,j.useCallback)((function(){m.current&&clearTimeout(m.current),m.current=setTimeout((function(){a({}),clearTimeout(m.current)}),1e3)}),[]),v=(0,j.useCallback)(function(){var n=p()(l()().mark((function n(t,r){var o,s,c,p,m,f,v,x,k;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(!1),n.next=4,fetch(e,{method:"POST",headers:u()(u()({},h._n,(0,b.cD)()),"Content-Type","application/json"),body:JSON.stringify(t),signal:null==r?void 0:r.signal});case 4:s=n.sent,c=s.clone().json(),p=null==s||null===(o=s.body)||void 0===o?void 0:o.pipeThrough(new TextDecoderStream).pipeThrough(new _.m).getReader();case 7:return n.next=10,null==p?void 0:p.read();case 10:if(!(m=n.sent)){n.next=18;break}if(f=m.done,v=m.value,!f){n.next=17;break}return console.info("done"),g(),n.abrupt("break",20);case 17:try{x=JSON.parse((null==v?void 0:v.data)||""),"boolean"!=typeof(k=null==x?void 0:x.data)&&(console.info("data:",k),a(i()(i()({},k),{},{conversationId:null==t?void 0:t.conversation_id})))}catch(e){console.warn(e)}case 18:n.next=7;break;case 20:return console.info("done?"),d(!0),g(),n.next=25,c;case 25:return n.t0=n.sent,n.t1=s,n.abrupt("return",{data:n.t0,response:n.t1});case 30:n.prev=30,n.t2=n.catch(0),d(!0),g(),console.warn(n.t2);case 35:case"end":return n.stop()}}),n,null,[[0,30]])})));return function(e,t){return n.apply(this,arguments)}}(),[e,g]);return{send:v,answer:r,done:c,setDone:d,resetAnswer:g}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.Z.tts,n=(0,j.useCallback)(function(){var n=p()(l()().mark((function n(t){var r,a;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:"POST",headers:u()(u()({},h._n,(0,b.cD)()),"Content-Type","application/json"),body:JSON.stringify(t)});case 2:return r=n.sent,n.prev=3,n.next=6,r.clone().json();case 6:0!==(null==(a=n.sent)?void 0:a.code)&&w.ZP.error(null==a?void 0:a.message),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.warn("ðŸš€ ~ error:",n.t0);case 13:return n.abrupt("return",r);case 14:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return{read:n}},T=function(){var e=(0,j.useState)(""),n=f()(e,2),t=n[0],r=n[1];return{handleInputChange:function(e){var n=e.target.value.replaceAll("\\n","\n").replaceAll("\\t","\t");r(n)},value:t,setValue:r}},R=function(){var e=(0,j.useState)([]),n=f()(e,2),t=n[0],r=n[1],o=function(e){var n=(0,j.useRef)(null),t=(0,j.useCallback)((function(){var t;e&&(null===(t=n.current)||void 0===t||t.scrollIntoView({behavior:"instant"}))}),[e]);return(0,j.useEffect)((function(){t()}),[t]),n}(t),s=(0,j.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r((function(t){return[].concat(a()(t),[i()(i()({},e),{},{id:(0,k.Kj)(e)}),{role:g.Cs.Assistant,content:n,id:(0,k.Kj)(i()(i()({},e),{},{role:g.Cs.Assistant}))}])}))}),[]),u=(0,j.useCallback)((function(e){r((function(n){var t;return[].concat(a()(null!==(t=null==n?void 0:n.slice(0,-1))&&void 0!==t?t:[]),[i()({role:g.Cs.Assistant,content:e.answer,reference:e.reference,id:(0,k.Kj)({id:e.id,role:g.Cs.Assistant}),prompt:e.prompt,audio_binary:e.audio_binary},(0,Z.omit)(e,"reference"))])}))}),[]),c=(0,j.useCallback)((function(){r((function(e){var n;return null!==(n=null==e?void 0:e.slice(0,-2))&&void 0!==n?n:[]}))}),[]),l=(0,j.useCallback)((function(e){r((function(n){var t;return null!==(t=null==n?void 0:n.filter((function(n){return n.id!==e})))&&void 0!==t?t:[]}))}),[r]),d=(0,j.useCallback)((function(e){r((function(n){var t=n.findIndex((function(n){return n.id===e}));if(-1!==t){var r,o=null!==(r=n.slice(0,t+2))&&void 0!==r?r:[],s=o.at(-1);return o=s?[].concat(a()(o.slice(0,-1)),[i()(i()({},s),{},{content:"",reference:void 0,prompt:void 0})]):o}return n}))}),[r]);return{ref:o,derivedMessages:t,setDerivedMessages:r,addNewestQuestion:s,addNewestAnswer:u,removeLatestMessage:c,removeMessageById:l,removeMessagesAfterCurrentMessage:d}},A=function(e){var n=e.removeMessagesAfterCurrentMessage,t=e.sendMessage,r=e.messages,a=(0,j.useCallback)(function(){var e=p()(l()().mark((function e(a){var o,s;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.id&&(n(a.id),-1!==(o=r.findIndex((function(e){return e.id===a.id})))&&(s=r.slice(0,o)),t({message:i()(i()({},a),{},{id:(0,P.Z)()}),messages:s}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,t,r]);return{regenerateMessage:a}},G=function(e){var n=(0,j.useState)(""),t=f()(n,2),r=t[0],a=t[1],o=(0,j.useCallback)((function(e){return function(){a(e)}}),[]);return(0,j.useEffect)((function(){e&&a(e)}),[e]),{selectedId:r,handleItemClick:o}},U=function(){var e,n=(0,D.fS)(!0).data;return null!==(e=null==n?void 0:n.llm_id)&&void 0!==e?e:""},q={naive:128,knowledge_graph:8192},z=function(e){return(0,j.useCallback)((function(n){n in q&&e.setFieldValue(["parser_config","chunk_token_num"],q[n])}),[e])},V=function(e){var n=e.form,t=e.visible,r=(0,j.useRef)();(0,j.useEffect)((function(){r.current=t}),[t]);var a=r.current;(0,j.useEffect)((function(){!t&&a&&n.resetFields()}),[n,a,t])}},96100:function(e,n,t){t.d(n,{HK:function(){return d},Uu:function(){return l},fz:function(){return h},nT:function(){return f},pE:function(){return p},wy:function(){return m}});var r=t(5574),a=t.n(r),o=t(96330),i=t(67294),s=t(86004),u=function(e){return e.Second="2",e.Third="3",e}({}),c=function(e){return(0,s.TH)().pathname.split("/")[e]||""},l=function(){return c(u.Second)},d=function(){return c(u.Third)},p=function(){var e=(0,s.lr)(),n=a()(e,1)[0];return{documentId:n.get(o.ld.DocumentId)||"",knowledgeId:n.get(o.ld.KnowledgeId)||""}},m=function(){var e=(0,s.s0)();return(0,i.useCallback)((function(n){e(n,{state:{from:n}})}),[e])},f=function(){var e=(0,s.s0)(),n=p().knowledgeId;return(0,i.useCallback)((function(){e("/knowledge/".concat(o.Rx.Dataset,"?id=").concat(n))}),[n,e])},h=function(){var e=(0,s.lr)(),n=a()(e,2),t=n[0],r=n[1],o=(0,i.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;t.set("page",e.toString()),n&&t.set("size",n.toString()),r(t)}),[r,t]);return{setPaginationParams:o,page:Number(t.get("page"))||1,size:Number(t.get("size"))||10}}},64910:function(e,n,t){t.r(n),t.d(n,{default:function(){return Fn}});var r=t(97857),a=t.n(r),o=t(13769),i=t.n(o),s=t(15009),u=t.n(s),c=t(99289),l=t.n(c),d=t(5574),p=t.n(d),m=t(77680),f=t(25035),h=t(3089),g=t(24969),v=t(22150),x=t(85576),b=t(42075),k=t(34041),w=t(96074),y=t(83062),_=t(24435),Z=t(77683),j=t(57557),C=t.n(j),P=t(67294),M=t(19632),K=t.n(M),D=t(96330),I=t(2938),O=t(39259),N=new Map([[["pdf"],[D.K1.Naive,D.K1.Resume,D.K1.Manual,D.K1.Paper,D.K1.Book,D.K1.Laws,D.K1.Presentation,D.K1.One,D.K1.Qa,D.K1.KnowledgeGraph]],[["doc","docx"],[D.K1.Naive,D.K1.Resume,D.K1.Book,D.K1.Laws,D.K1.One,D.K1.Qa,D.K1.Manual,D.K1.KnowledgeGraph]],[["xlsx","xls"],[D.K1.Naive,D.K1.Qa,D.K1.Table,D.K1.One,D.K1.KnowledgeGraph]],[["ppt","pptx"],[D.K1.Presentation]],[["jpg","jpeg","png","gif","bmp","tif","tiff","webp","svg","ico"],[D.K1.Picture]],[["txt"],[D.K1.Naive,D.K1.Resume,D.K1.Book,D.K1.Laws,D.K1.One,D.K1.Qa,D.K1.Table,D.K1.KnowledgeGraph]],[["csv"],[D.K1.Naive,D.K1.Resume,D.K1.Book,D.K1.Laws,D.K1.One,D.K1.Qa,D.K1.Table,D.K1.KnowledgeGraph]],[["md"],[D.K1.Naive,D.K1.Qa,D.K1.KnowledgeGraph]],[["json"],[D.K1.Naive,D.K1.KnowledgeGraph]],[["eml"],[D.K1.Email]]]),S=function(e,n){return n.filter((function(n){return null==e?void 0:e.some((function(e){return e===n.value}))}))},L=[D.K1.Qa,D.K1.Table,D.K1.Resume,D.K1.KnowledgeGraph,D.K1.Tag],F=t(86968),E=t(25170),T=t(38218),R=t(84782),A=t(50960),G=t(54140),U=t(78656),q=t(85885),z=t(72103),V="pageInputNumber___qm78X",Q="questionIcon___d34w8",B="chunkMethod___tcugG",W=t(85893),H=["key","name"],Y=[D.K1.Qa,D.K1.Table,D.K1.Picture,D.K1.Resume,D.K1.One,D.K1.KnowledgeGraph],$=function(e){var n=e.documentId,t=e.parserId,r=e.onOk,o=e.hideModal,s=e.visible,c=e.documentExtension,d=e.parserConfig,j=e.loading,M=v.Z.useForm(),$=p()(M,1)[0],J=function(e,n,t,r){var a=(0,P.useState)(),o=p()(a,2),i=o[0],s=o[1],u=(0,O.XH)(),c=(0,I.sO)(r),l=(0,P.useMemo)((function(){var e=K()(N.keys()).find((function(e){return e.some((function(e){return e===t}))}));if(e){var n=N.get(e);return S(null!=n?n:[],u)}return S([D.K1.Naive,D.K1.Resume,D.K1.Book,D.K1.Laws,D.K1.One,D.K1.Qa,D.K1.Table],u)}),[u,t]);return(0,P.useEffect)((function(){s(n)}),[n,e]),{parserList:l,handleChange:function(e){c(e),s(e)},selectedTag:i}}(n,t,c,$),X=J.parserList,ee=J.handleChange,ne=J.selectedTag,te=(0,F.qM)("knowledgeDetails").t,re=function(){var e=l()(u()().mark((function e(){var n,t,o,i;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.validateFields();case 2:o=e.sent,i=a()(a()({},o.parser_config),{},{pages:null!==(n=null===(t=o.pages)||void 0===t?void 0:t.map((function(e){return[e.from,e.to]})))&&void 0!==n?n:[]}),r(ne,i);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae="pdf"===c,oe=(0,P.useMemo)((function(){return ae&&Y.every((function(e){return e!==ne}))}),[ne,ae]),ie=(0,P.useMemo)((function(){return ae&&Y.filter((function(e){return e!==D.K1.One})).every((function(e){return e!==ne}))}),[ne,ae]),se=ne===D.K1.Naive||ne===D.K1.KnowledgeGraph,ue=ne===D.K1.KnowledgeGraph,ce=ne===D.K1.Naive&&"xlsx"===c,le=(0,P.useCallback)((function(e){return L.every((function(n){return e!==n}))}),[]);return(0,P.useEffect)((function(){if(s){var e,n,t=null!==(e=null==d||null===(n=d.pages)||void 0===n?void 0:n.map((function(e){return{from:e[0],to:e[1]}})))&&void 0!==e?e:[];$.setFieldsValue({pages:t.length>0?t:[{from:1,to:1024}],parser_config:C()(d,"pages")})}}),[$,d,s]),(0,W.jsxs)(x.Z,{title:te("chunkMethod"),open:s,onOk:re,onCancel:o,afterClose:function(){$.resetFields()},confirmLoading:j,width:700,children:[(0,W.jsx)(b.Z,{size:[0,8],wrap:!0,children:(0,W.jsx)(v.Z.Item,{label:te("chunkMethod"),className:B,children:(0,W.jsx)(k.Z,{style:{width:160},onChange:ee,value:ne,options:X})})}),(0,W.jsx)(w.Z,{}),(0,W.jsxs)(v.Z,{name:"dynamic_form_nest_item",autoComplete:"off",form:$,className:"space-y-4",children:[oe&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(b.Z,{children:[(0,W.jsxs)("p",{children:[te("pageRanges"),":"]}),(0,W.jsx)(y.Z,{title:te("pageRangesTip"),children:(0,W.jsx)(f.Z,{className:Q})})]}),(0,W.jsx)(v.Z.List,{name:"pages",children:function(e,n){var t=n.add,r=n.remove;return(0,W.jsxs)(W.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,o=i()(e,H);return(0,W.jsxs)(b.Z,{style:{display:"flex"},align:"baseline",children:[(0,W.jsx)(v.Z.Item,a()(a()({},o),{},{name:[t,"from"],dependencies:t>0?[t-1,"to"]:[],rules:[{required:!0,message:te("fromMessage")},function(e){var n=e.getFieldValue;return{validator:function(e,r){return 0===t||!r||n(["pages",t-1,"to"])<r?Promise.resolve():Promise.reject(new Error(te("greaterThanPrevious")))}}}],children:(0,W.jsx)(_.Z,{placeholder:te("fromPlaceholder"),min:0,precision:0,className:V})})),(0,W.jsx)(v.Z.Item,a()(a()({},o),{},{name:[t,"to"],dependencies:[t,"from"],rules:[{required:!0,message:te("toMessage")},function(e){var n=e.getFieldValue;return{validator:function(e,r){return!r||n(["pages",t,"from"])<r?Promise.resolve():Promise.reject(new Error(te("greaterThan")))}}}],children:(0,W.jsx)(_.Z,{placeholder:te("toPlaceholder"),min:0,precision:0,className:V})})),t>0&&(0,W.jsx)(h.Z,{onClick:function(){return r(t)}})]},n)})),(0,W.jsx)(v.Z.Item,{children:(0,W.jsx)(Z.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,W.jsx)(g.Z,{}),children:te("addPage")})})]})}})]}),oe&&(0,W.jsx)(v.Z.Item,{noStyle:!0,dependencies:[["parser_config","layout_recognize"]],children:function(e){return(0,e.getFieldValue)(["parser_config","layout_recognize"])&&(0,W.jsx)(v.Z.Item,{name:["parser_config","task_page_size"],label:te("taskPageSize"),tooltip:te("taskPageSizeTip"),initialValue:12,rules:[{required:!0,message:te("taskPageSizeMessage")}],children:(0,W.jsx)(_.Z,{min:1,max:128})})}}),(0,W.jsxs)(T.d,{show:ie||se,children:[ie&&(0,W.jsx)(U.Z,{}),se&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(m.Z,{max:ne===D.K1.KnowledgeGraph?16384:2048}),(0,W.jsx)(R.Z,{})]})]}),(0,W.jsxs)(T.d,{show:le(ne)||ce,children:[le(ne)&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(E.r,{}),(0,W.jsx)(E.w,{})]}),ce&&(0,W.jsx)(G.Z,{})]}),(0,q.J3)(ne)&&(0,W.jsx)(T.d,{children:(0,W.jsx)(q.ZP,{})}),(0,z.hc)(ne)&&(0,W.jsx)(z.ZP,{}),ue&&(0,W.jsx)(A.Z,{})]})]})},J=t(46693),X=t(93352),ee=t(5089),ne=t(25593),te=t(86250),re=t(72269),ae=t(70229),oe=t(67421),ie=t(38289),se=function(e){var n=e.visible,t=e.hideModal,r=e.onOk,a=v.Z.useForm(),o=p()(a,1)[0],i=function(){var e=l()(u()().mark((function e(){var n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:n=e.sent,r(n.name);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,W.jsx)(x.Z,{title:"File Name",open:n,onOk:i,onCancel:t,children:(0,W.jsx)(v.Z,{form:o,name:"validateOnly",labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:600},autoComplete:"off",children:(0,W.jsx)(v.Z.Item,{label:"File Name",name:"name",rules:[{required:!0,message:"Please input name!"}],children:(0,W.jsx)(ie.Z,{})})})})},ue=Object.defineProperty,ce=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,pe=(e,n,t)=>n in e?ue(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const me=e=>P.createElement("svg",((e,n)=>{for(var t in n||(n={}))le.call(n,t)&&pe(e,t,n[t]);if(ce)for(var t of ce(n))de.call(n,t)&&pe(e,t,n[t]);return e})({width:22,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),P.createElement("path",{d:"M.5 11C.5 5.201 5.201.5 11 .5S21.5 5.201 21.5 11 16.799 21.5 11 21.5.5 16.799.5 11Z",fill:"#FEF3F2"}),P.createElement("path",{d:"M.5 11C.5 5.201 5.201.5 11 .5S21.5 5.201 21.5 11 16.799 21.5 11 21.5.5 16.799.5 11Z",stroke:"#FECDCA"}),P.createElement("path",{d:"m14 8-6 6m0-6 6 6",stroke:"#F04438",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}));var fe=Object.defineProperty,he=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,xe=(e,n,t)=>n in e?fe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const be=e=>P.createElement("svg",((e,n)=>{for(var t in n||(n={}))ge.call(n,t)&&xe(e,t,n[t]);if(he)for(var t of he(n))ve.call(n,t)&&xe(e,t,n[t]);return e})({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),P.createElement("path",{d:"M13.333 5v-.667c0-.933 0-1.4-.181-1.756a1.667 1.667 0 0 0-.729-.729c-.356-.181-.823-.181-1.756-.181H9.333c-.933 0-1.4 0-1.756.181-.314.16-.569.415-.729.729-.181.356-.181.823-.181 1.756V5m1.666 4.583v4.167m3.334-4.167v4.167M2.5 5h15m-1.667 0v9.333c0 1.4 0 2.1-.272 2.635a2.5 2.5 0 0 1-1.093 1.093c-.534.272-1.235.272-2.635.272H8.167c-1.4 0-2.1 0-2.635-.272a2.5 2.5 0 0 1-1.093-1.093c-.272-.534-.272-1.235-.272-2.635V5",stroke:"#667085",strokeWidth:1.667,strokeLinecap:"round",strokeLinejoin:"round"}));var ke=Object.defineProperty,we=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,Ze=(e,n,t)=>n in e?ke(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const je=e=>P.createElement("svg",((e,n)=>{for(var t in n||(n={}))ye.call(n,t)&&Ze(e,t,n[t]);if(we)for(var t of we(n))_e.call(n,t)&&Ze(e,t,n[t]);return e})({className:"disable_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:22,height:22},e),P.createElement("path",{d:"M222.635 272.299A382.4 382.4 0 0 0 138.667 512c0 212.117 171.904 384 384 384 90.666 0 174.016-31.424 239.701-83.968L222.635 272.299zm60.33-60.331L822.7 751.701A382.4 382.4 0 0 0 906.667 512c0-212.117-171.904-384-384-384-90.667 0-174.016 31.424-239.702 83.968zM53.333 512c0-259.221 210.091-469.333 469.334-469.333C781.888 42.667 992 252.757 992 512c0 259.221-210.09 469.333-469.333 469.333-259.222 0-469.334-210.09-469.334-469.333z",fill:"#F04438"}));var Ce=Object.defineProperty,Pe=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable,De=(e,n,t)=>n in e?Ce(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Ie=e=>P.createElement("svg",((e,n)=>{for(var t in n||(n={}))Me.call(n,t)&&De(e,t,n[t]);if(Pe)for(var t of Pe(n))Ke.call(n,t)&&De(e,t,n[t]);return e})({className:"enable_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:22,height:22},e),P.createElement("path",{d:"M512 0a512 512 0 1 0 0 1024A512 512 0 0 0 512 0zm0 990.2a438.2 438.2 0 1 1 0-956.4 438.2 438.2 0 0 1 0 956.4z",fill:"#abefc6"}),P.createElement("path",{d:"M448.1 584.3 322.4 458.6l-78.9 78.9L449.1 743h.1l.5.5 325.9-325.9-80.4-80.4z",fill:"#17b26a"}));var Oe=Object.defineProperty,Ne=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,Fe=(e,n,t)=>n in e?Oe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Ee=e=>P.createElement("svg",((e,n)=>{for(var t in n||(n={}))Se.call(n,t)&&Fe(e,t,n[t]);if(Ne)for(var t of Ne(n))Le.call(n,t)&&Fe(e,t,n[t]);return e})({width:22,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),P.createElement("path",{d:"M11 21.5C5.201 21.5.5 16.799.5 11S5.201.5 11 .5 21.5 5.201 21.5 11 16.799 21.5 11 21.5Z",fill:"#ECFDF3"}),P.createElement("path",{d:"M11 21.5C5.201 21.5.5 16.799.5 11S5.201.5 11 .5 21.5 5.201 21.5 11 16.799 21.5 11 21.5Z",stroke:"#ABEFC6"}),P.createElement("path",{d:"M7.5 7.495c0-.486 0-.729.101-.862a.5.5 0 0 1 .37-.198c.167-.01.369.125.773.394l5.258 3.505c.333.223.5.334.558.475a.5.5 0 0 1 0 .383c-.058.14-.225.251-.559.474L8.745 15.17c-.404.27-.606.404-.774.394a.5.5 0 0 1-.369-.198c-.101-.133-.101-.376-.101-.862v-7.01Z",stroke:"#17B26A",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}));var Te=t(15360),Re=t(26911),Ae=t(80882),Ge=t(68795),Ue=t(85418),qe={datasetWrapper:"datasetWrapper___q27L3",filter:"filter___ETTRo",deleteIconWrapper:"deleteIconWrapper___DKg5C",img:"img___JlbZB",column:"column___fvjI4",toChunks:"toChunks___LX_Ow",pageInputNumber:"pageInputNumber___hsRez",questionIcon:"questionIcon___JX1Gh",nameText:"nameText___Fvf8C"},ze=function(e){var n=e.searchString,t=e.selectedRowKeys,r=e.showCreateModal,a=e.showDocumentUploadModal,o=e.handleInputChange,i=(0,F.qM)("knowledgeDetails").t,s=(0,X.an)().removeDocument,u=(0,F.I3)(),c=(0,X.QG)().runDocumentByIds,l=(0,X.jz)().setDocumentStatus,d=(0,P.useMemo)((function(){return[{key:"1",onClick:a,label:(0,W.jsx)("div",{children:(0,W.jsx)(Z.ZP,{type:"link",children:(0,W.jsxs)(b.Z,{children:[(0,W.jsx)(Te.Z,{}),i("localFiles")]})})})},{type:"divider"},{key:"3",onClick:r,label:(0,W.jsx)("div",{children:(0,W.jsxs)(Z.ZP,{type:"link",children:[(0,W.jsx)(Re.Z,{}),i("emptyFiles")]})})}]}),[a,r,i]),p=(0,P.useCallback)((function(){u({onOk:function(){s(t)}})}),[s,u,t]),m=(0,P.useCallback)((function(e){c({documentIds:t,run:e})}),[c,t]),f=(0,P.useCallback)((function(){m(1)}),[m]),h=(0,P.useCallback)((function(){m(2)}),[m]),v=(0,P.useCallback)((function(e){t.forEach((function(n){l({status:e,documentId:n})}))}),[t,l]),x=(0,P.useCallback)((function(){v(!0)}),[v]),k=(0,P.useCallback)((function(){v(!1)}),[v]),w=0===t.length,y=(0,P.useMemo)((function(){return[{key:"0",onClick:x,label:(0,W.jsxs)(te.Z,{gap:10,children:[(0,W.jsx)(Ie,{}),(0,W.jsx)("b",{children:i("enabled")})]})},{key:"1",onClick:k,label:(0,W.jsxs)(te.Z,{gap:10,children:[(0,W.jsx)(je,{}),(0,W.jsx)("b",{children:i("disabled")})]})},{type:"divider"},{key:"2",onClick:f,label:(0,W.jsxs)(te.Z,{gap:10,children:[(0,W.jsx)(Ee,{}),(0,W.jsx)("b",{children:i("run")})]})},{key:"3",onClick:h,label:(0,W.jsxs)(te.Z,{gap:10,children:[(0,W.jsx)(me,{}),(0,W.jsx)("b",{children:i("cancel")})]})},{type:"divider"},{key:"4",onClick:p,label:(0,W.jsxs)(te.Z,{gap:10,children:[(0,W.jsx)("span",{className:qe.deleteIconWrapper,children:(0,W.jsx)(be,{width:18})}),(0,W.jsx)("b",{children:i("delete",{keyPrefix:"common"})})]})}]}),[p,f,h,i,k,x]);return(0,W.jsxs)("div",{className:qe.filter,children:[(0,W.jsx)(Ue.Z,{menu:{items:y},placement:"bottom",arrow:!1,disabled:w,children:(0,W.jsx)(Z.ZP,{children:(0,W.jsxs)(b.Z,{children:[(0,W.jsxs)("b",{children:[" ",i("bulk")]}),(0,W.jsx)(Ae.Z,{})]})})}),(0,W.jsxs)(b.Z,{children:[(0,W.jsx)(ie.Z,{placeholder:i("searchFiles"),value:n,style:{width:220},allowClear:!0,onChange:o,prefix:(0,W.jsx)(Ge.Z,{})}),(0,W.jsx)(Ue.Z,{menu:{items:d},trigger:["click"],children:(0,W.jsx)(Z.ZP,{type:"primary",icon:(0,W.jsx)(g.Z,{}),children:i("addFile")})})]})]})},Ve=t(96100),Qe=t(86004),Be=t(9783),We=t.n(Be),He=We()(We()(We()(We()(We()({},D.cG.UNSTART,{label:"UNSTART",color:"cyan"}),D.cG.RUNNING,{label:"Parsing",color:"blue"}),D.cG.CANCEL,{label:"CANCEL",color:"orange"}),D.cG.DONE,{label:"SUCCESS",color:"geekblue"}),D.cG.FAIL,{label:"FAIL",color:"red"}),Ye=t(51331),$e=t(2830),Je=t(86548),Xe=t(48689),en=t(23430),nn=function(e){return e===D.cG.RUNNING},tn="iconButton___btHnB",rn=function(e){var n=e.record,t=e.setCurrentRecord,r=e.showRenameModal,a=e.showChangeParserModal,o=e.showSetMetaModal,i=n.id,s=nn(n.run),u=(0,F.qM)("knowledgeDetails").t,c=(0,X.an)().removeDocument,l=(0,F.I3)(),d=n.type===D.n_.Virtual,p=(0,P.useCallback)((function(){t(n)}),[n,t]),m=(0,P.useCallback)((function(){p(),o()}),[p,o]),f=[{key:"1",label:(0,W.jsx)("div",{className:"flex flex-col",children:(0,W.jsx)(Z.ZP,{type:"link",onClick:function(){p(),a()},children:u("chunkMethod")})})},{type:"divider"},{key:"2",label:(0,W.jsx)("div",{className:"flex flex-col",children:(0,W.jsx)(Z.ZP,{type:"link",onClick:m,children:u("setMetaData")})})}];return(0,W.jsxs)(b.Z,{size:0,children:[d||(0,W.jsx)(Ue.Z,{menu:{items:f},trigger:["click"],disabled:s||"tag"===n.parser_id,children:(0,W.jsx)(Z.ZP,{type:"text",className:tn,children:(0,W.jsx)($e.Z,{size:20})})}),(0,W.jsx)(y.Z,{title:u("rename",{keyPrefix:"common"}),children:(0,W.jsx)(Z.ZP,{type:"text",disabled:s,onClick:function(){p(),r()},className:tn,children:(0,W.jsx)(Je.Z,{size:20})})}),(0,W.jsx)(y.Z,{title:u("delete",{keyPrefix:"common"}),children:(0,W.jsx)(Z.ZP,{type:"text",disabled:s,onClick:function(){var e;s||l({onOk:function(){return c([i])},content:null!=n&&null!==(e=n.parser_config)&&void 0!==e&&null!==(e=e.graphrag)&&void 0!==e&&e.use_graphrag?u("deleteDocumentConfirmContent"):""})},className:tn,children:(0,W.jsx)(Xe.Z,{size:20})})}),d||(0,W.jsx)(y.Z,{title:u("download",{keyPrefix:"common"}),children:(0,W.jsx)(Z.ZP,{type:"text",disabled:s,onClick:function(){(0,Ye.AG)({id:i,filename:n.name})},className:tn,children:(0,W.jsx)(en.Z,{size:20})})})]})},an=Object.defineProperty,on=Object.getOwnPropertySymbols,sn=Object.prototype.hasOwnProperty,un=Object.prototype.propertyIsEnumerable,cn=(e,n,t)=>n in e?an(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const ln=e=>P.createElement("svg",((e,n)=>{for(var t in n||(n={}))sn.call(n,t)&&cn(e,t,n[t]);if(on)for(var t of on(n))un.call(n,t)&&cn(e,t,n[t]);return e})({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),P.createElement("path",{d:"M14.167 4.271A7.083 7.083 0 0 1 10 17.083h-.417m-3.75-1.354A7.083 7.083 0 0 1 10 2.917h.417m.416 15.75L9.167 17l1.666-1.667M9.167 4.667 10.833 3 9.167 1.333",stroke:"#17B26A",strokeWidth:1.667,strokeLinecap:"round",strokeLinejoin:"round"}));var dn=t(55241),pn=t(66309),mn=t(40411),fn=t(86738),hn=t(93967),gn=t.n(hn),vn=t(59632),xn=t.n(vn),bn="popoverContent___Y8ZAO",kn="popoverContentItem___Q3slq",wn="popoverContentText___nUr7b",yn="popoverContentErrorLabel___vthqR",_n="operationIcon___PnxaJ",Zn="operationIconSpin___Pf25W",jn=We()(We()(We()(We()(We()({},D.cG.UNSTART,Ee),D.cG.RUNNING,me),D.cG.CANCEL,ln),D.cG.DONE,ln),D.cG.FAIL,ln),Cn=function(e){var n,t,r=e.record,a=(0,F.qM)("knowledgeDetails").t,o=[{key:"process_begin_at",label:a("processBeginAt"),children:r.process_begin_at},{key:"process_duation",label:a("processDuration"),children:"".concat(r.process_duation.toFixed(2)," s")},{key:"progress_msg",label:a("progressMsg"),children:(n=r.progress_msg.trim(),t=n.replace(/(\n)\1+/g,"$1"),xn()(t,/(\[ERROR\].+\s)/g,(function(e,n){return(0,W.jsx)("span",{className:yn,children:e},n)})))}];return(0,W.jsx)(te.Z,{vertical:!0,className:bn,children:o.map((function(e,n){return(0,W.jsxs)("div",{className:n<2?kn:"",children:[(0,W.jsxs)("b",{children:[e.label,":"]}),(0,W.jsx)("div",{className:wn,children:e.children})]},e.key)}))})},Pn=function(e){var n=e.record,t=n.run,r=He[t],a=(0,oe.$G)().t,o=function(e){var n=(0,X.QG)(),t=n.runDocumentByIds,r=n.loading,a=(0,P.useState)(""),o=p()(a,2),i=o[0],s=o[1],c=r&&""!==i&&i===e,d=function(){var e=l()(u()().mark((function e(n,r){var a,o=arguments;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>2&&void 0!==o[2]&&o[2],!c){e.next=3;break}return e.abrupt("return");case 3:return s(n),e.prev=4,e.next=7,t({documentIds:[n],run:r?2:1,shouldDelete:a});case 7:s(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),s("");case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(n,t){return e.apply(this,arguments)}}();return{handleRunDocumentByIds:d,loading:c}}(n.id),i=o.handleRunDocumentByIds,s=o.loading,c=nn(t),d=jn[t],m=a("knowledgeDetails.runningStatus".concat(t)),f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(){i(n.id,c,e)}};return n.type===D.n_.Virtual?null:(0,W.jsxs)(te.Z,{justify:"space-between",align:"center",children:[(0,W.jsx)(dn.Z,{content:(0,W.jsx)(Cn,{record:n}),children:(0,W.jsx)(pn.Z,{color:r.color,children:c?(0,W.jsxs)(b.Z,{children:[(0,W.jsx)(mn.Z,{color:r.color}),m,(0,W.jsxs)("span",{children:[(100*n.progress).toFixed(2),"%"]})]}):m})}),(0,W.jsx)(fn.Z,{title:a("knowledgeDetails.redo",{chunkNum:n.chunk_num}),onConfirm:f(!0),onCancel:f(!1),disabled:0===n.chunk_num,okText:a("common.ok"),cancelText:a("common.cancel"),children:(0,W.jsx)("div",{className:gn()(_n,We()({},Zn,s)),onClick:0===n.chunk_num?f(!1):function(){},children:(0,W.jsx)(d,{})})})]})},Mn=function(e){var n=e.visible,t=e.onOk,r=e.loading,a=e.initialName,o=e.hideModal,i=v.Z.useForm(),s=p()(i,1)[0],c=(0,F.qM)("common").t,d=function(){var e=l()(u()().mark((function e(){var n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.validateFields();case 2:n=e.sent,t(n.name);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,P.useEffect)((function(){n&&s.setFieldValue("name",a)}),[a,s,n]),(0,W.jsx)(x.Z,{title:c("rename"),open:n,onOk:d,onCancel:o,okButtonProps:{loading:r},children:(0,W.jsx)(v.Z,{name:"basic",labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:600},onFinish:function(e){console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",form:s,children:(0,W.jsx)(v.Z.Item,{label:c("name"),name:"name",rules:[{required:!0,message:c("namePlaceholder")}],children:(0,W.jsx)(ie.Z,{})})})})},Kn=function(e){var n=e.visible,t=e.hideModal,r=e.onOk,a=v.Z.useForm(),o=p()(a,1)[0],i=(0,F.qM)("knowledgeDetails").t,s=function(){var e=l()(u()().mark((function e(){var n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:n=e.sent,r(n.name,n.url);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,W.jsx)(x.Z,{title:i("webCrawl"),open:n,onOk:s,onCancel:t,children:(0,W.jsxs)(v.Z,{form:o,name:"validateOnly",labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:600},autoComplete:"off",children:[(0,W.jsx)(v.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input name!"},{max:10,message:"The maximum length of name is 128 characters"}],children:(0,W.jsx)(ie.Z,{placeholder:"Document name"})}),(0,W.jsx)(v.Z.Item,{label:"URL",name:"url",rules:[{required:!0,message:"Please input url!"},{pattern:new RegExp("(https?|ftp|file)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]"),message:"Please enter a valid URL!"}],children:(0,W.jsx)(ie.Z,{placeholder:"https://www.baidu.com"})})]})})},Dn=t(11218),In=t(28382),On=t(63764),Nn=t(22424);function Sn(e){var n=e.visible,t=e.hideModal,r=e.onOk,a=e.initialMetaData,o=(0,oe.$G)().t,i=v.Z.useForm(),s=p()(i,1)[0],c=(0,P.useCallback)(l()(u()().mark((function e(){var n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.validateFields();case 2:n=e.sent,null==r||r(n.meta);case 4:case"end":return e.stop()}}),e)}))),[s,r]);return(0,P.useEffect)((function(){s.setFieldValue("meta",JSON.stringify(a,null,4))}),[s,a]),(0,W.jsx)(x.Z,{title:o("knowledgeDetails.setMetaData"),open:n,onOk:c,onCancel:t,children:(0,W.jsx)(v.Z,{name:"basic",initialValues:{remember:!0},autoComplete:"off",layout:"vertical",form:s,children:(0,W.jsx)(v.Z.Item,{label:o("knowledgeDetails.metaData"),name:"meta",rules:[{required:!0,validator:function(e,n){try{return JSON.parse(n),Promise.resolve()}catch(e){return Promise.reject(new Error(o("knowledgeDetails.pleaseInputJson")))}}}],tooltip:(0,W.jsx)("div",{dangerouslySetInnerHTML:{__html:Nn.Z.sanitize(o("knowledgeDetails.documentMetaTips"))}}),children:(0,W.jsx)(On.ZP,{height:200,defaultLanguage:"json",theme:"vs-dark"})})})})}On._m.config({paths:{vs:"/vs"}});var Ln=ne.Z.Text,Fn=function(){var e,n,t,r,o,i,s=(0,X.v3)(),c=s.searchString,d=s.documents,m=s.pagination,f=s.handleInputChange,h=(0,O.XH)(),g=(0,X.jz)().setDocumentStatus,v=(e=(0,Qe.s0)(),n=(0,Ve.pE)().knowledgeId,{linkToUploadPage:(0,P.useCallback)((function(){e("/knowledge/dataset/upload?id=".concat(n))}),[e,n]),toChunk:(0,P.useCallback)((function(t){e("/knowledge/".concat(D.Rx.Dataset,"/chunk?id=").concat(n,"&doc_id=").concat(t))}),[e,n])}).toChunk,x=(0,I.cE)(),b=x.currentRecord,k=x.setRecord,y=function(e){var n=(0,X.A3)(),t=n.saveName,r=n.loading,a=(0,F.pG)(),o=a.visible,i=a.hideModal,s=a.showModal,c=(0,P.useCallback)(function(){var n=l()(u()().mark((function n(r){return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({documentId:e,name:r});case 2:0===n.sent&&i();case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[i,t,e]);return{renameLoading:r,onRenameOk:c,renameVisible:o,hideRenameModal:i,showRenameModal:s}}(b.id),_=y.renameLoading,Z=y.onRenameOk,j=y.renameVisible,C=y.hideRenameModal,M=y.showRenameModal,K=function(){var e=(0,X.GH)(),n=e.createDocument,t=e.loading,r=(0,F.pG)(),a=r.visible,o=r.hideModal,i=r.showModal,s=(0,P.useCallback)(function(){var e=l()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:0===e.sent&&o();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[o,n]);return{createLoading:t,onCreateOk:s,createVisible:a,hideCreateModal:o,showCreateModal:i}}(),N=K.createLoading,S=K.onCreateOk,L=K.createVisible,E=K.hideCreateModal,T=K.showCreateModal,R=function(e){var n=(0,X.wk)(),t=n.setDocumentParser,r=n.loading,a=(0,F.pG)(),o=a.visible,i=a.hideModal,s=a.showModal,c=(0,P.useCallback)(function(){var n=l()(u()().mark((function n(r,a){return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({parserId:r,documentId:e,parserConfig:a});case 2:0===n.sent&&i();case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[i,t,e]);return{changeParserLoading:r,onChangeParserOk:c,changeParserVisible:o,hideChangeParserModal:i,showChangeParserModal:s}}(b.id),A=R.changeParserLoading,G=R.onChangeParserOk,U=R.changeParserVisible,q=R.hideChangeParserModal,z=R.showChangeParserModal,V=function(){var e=(0,F.pG)(),n=e.visible,t=e.hideModal,r=e.showModal,a=(0,P.useState)([]),o=p()(a,2),i=o[0],s=o[1],c=(0,P.useState)(0),d=p()(c,2),m=d[0],f=d[1],h=(0,X.ui)(),g=h.uploadDocument,v=h.loading,x=(0,X.QG)(),b=x.runDocumentByIds,k=(x.loading,(0,P.useCallback)(function(){var e=l()(u()().mark((function e(n){var r,a,o,c,d,p,m,h,v,x,k,w,y,_,Z,j,C;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.parseOnCreation,a=n.directoryFileList,o=function(){var e=l()(u()().mark((function e(n){var t,r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(i.map((function(e){if(!n.includes(e))return e;var t=e;return t.status="uploading",t.percent=1,t}))),e.next=3,g(n);case 3:return t=e.sent,r=(null==t?void 0:t.data)||[],a=r.map((function(e){return e.name})),s(i.map((function(e){if(!n.includes(e))return e;var r=e;return r.status=a.includes(e.name)?"done":"error",r.percent=100,r.response=t.message,r}))),e.abrupt("return",{code:null==t?void 0:t.code,fileIds:r.map((function(e){return e.id})),totalSuccess:a.length});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),c=i.length,!(a.length>0)){e.next=10;break}return e.next=6,g(a);case 6:if(0===(null==(d=e.sent)?void 0:d.code)&&t(),0!==c){e.next=10;break}return e.abrupt("return",0);case 10:if(0!==c){e.next=14;break}return console.log("No files to upload"),t(),e.abrupt("return",0);case 14:p=0,m=[],h=[],v=0;case 18:if(!(v<c)){e.next=33;break}return f(Math.floor(v/c*100)),x=i.slice(v,v+10),e.next=23,o(x);case 23:k=e.sent,w=k.code,y=k.totalSuccess,_=k.fileIds,m.push(w),p+=y,h=h.concat(_);case 30:v+=10,e.next=18;break;case 33:if(Z=m.every((function(e){return 0===e})),j=m.some((function(e){return 500===e})),C=500,(Z||j&&p===c)&&(C=0,t()),!r){e.next=40;break}return e.next=40,b({documentIds:h,run:1,shouldDelete:!1});case 40:return f(100),e.abrupt("return",C);case 42:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,g,t,b]));return{documentUploadLoading:v,onDocumentUploadOk:k,documentUploadVisible:n,hideDocumentUploadModal:t,showDocumentUploadModal:r,uploadFileList:i,setUploadFileList:s,uploadProgress:m,setUploadProgress:f}}(),Q=V.documentUploadVisible,B=V.hideDocumentUploadModal,H=V.showDocumentUploadModal,Y=V.onDocumentUploadOk,ne=V.documentUploadLoading,ie=V.uploadFileList,ue=V.setUploadFileList,ce=V.uploadProgress,le=V.setUploadProgress,de=function(){var e=(0,F.pG)(),n=e.visible,t=e.hideModal,r=e.showModal,a=(0,X.Yb)(),o=a.webCrawl,i=a.loading,s=(0,P.useCallback)(function(){var e=l()(u()().mark((function e(n,r){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({name:n,url:r});case 2:if(0!==e.sent){e.next=6;break}return t(),e.abrupt("return",0);case 6:return e.abrupt("return",-1);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[o,t]);return{webCrawlUploadLoading:i,onWebCrawlUploadOk:s,webCrawlUploadVisible:n,hideWebCrawlUploadModal:t,showWebCrawlUploadModal:r}}(),pe=de.webCrawlUploadVisible,me=de.hideWebCrawlUploadModal,fe=de.showWebCrawlUploadModal,he=de.onWebCrawlUploadOk,ge=de.webCrawlUploadLoading,ve=(0,oe.$G)("translation",{keyPrefix:"knowledgeDetails"}).t,xe=function(e){var n=(0,X.Hy)(),t=n.setDocumentMeta,r=n.loading,a=(0,F.pG)(),o=a.visible,i=a.hideModal,s=a.showModal,c=(0,P.useCallback)(function(){var n=l()(u()().mark((function n(r){return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({documentId:e,meta:r});case 2:0===n.sent&&i();case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e,i]);return{setMetaLoading:r,onSetMetaModalOk:c,setMetaVisible:o,hideSetMetaModal:i,showSetMetaModal:s}}(b.id),be=xe.showSetMetaModal,ke=xe.hideSetMetaModal,we=xe.setMetaVisible,ye=xe.setMetaLoading,_e=xe.onSetMetaModalOk,Ze=(t=(0,P.useState)([]),r=p()(t,2),o=r[0],i=r[1],{selectedRowKeys:o,onChange:function(e){i(e)}}),je=[{title:ve("name"),dataIndex:"name",key:"name",fixed:"left",render:function(e,n){var t=n.id,r=n.thumbnail,a=n.name;return(0,W.jsx)("div",{className:qe.toChunks,onClick:function(){return v(t)},children:(0,W.jsxs)(te.Z,{gap:10,align:"center",children:[r?(0,W.jsx)("img",{className:qe.img,src:r,alt:""}):(0,W.jsx)(J.Z,{name:"file-icon/".concat((0,ee.RT)(a)),width:24}),(0,W.jsx)(Ln,{ellipsis:{tooltip:e},className:qe.nameText,children:e})]})})}},{title:ve("chunkNumber"),dataIndex:"chunk_num",key:"chunk_num"},{title:ve("uploadDate"),dataIndex:"create_time",key:"create_time",render:function(e){return(0,In.p6)(e)}},{title:ve("chunkMethod"),dataIndex:"parser_id",key:"parser_id",render:function(e){var n;return null===(n=h.find((function(n){return n.value===e})))||void 0===n?void 0:n.label}},{title:ve("enabled"),key:"status",dataIndex:"status",render:function(e,n){var t=n.status,r=n.id;return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(re.Z,{checked:"1"===t,onChange:function(e){g({status:e,documentId:r})}})})}},{title:ve("parsingStatus"),dataIndex:"run",key:"run",render:function(e,n){return(0,W.jsx)(Pn,{record:n})}},{title:ve("action"),key:"action",render:function(e,n){return(0,W.jsx)(rn,{setCurrentRecord:k,showRenameModal:M,showChangeParserModal:z,showSetMetaModal:be,record:n})}}].map((function(e){return a()(a()({},e),{},{className:"".concat(qe.column)})}));return(0,W.jsxs)("div",{className:qe.datasetWrapper,children:[(0,W.jsx)("h3",{children:ve("dataset")}),(0,W.jsx)("p",{children:ve("datasetDescription")}),(0,W.jsx)(w.Z,{}),(0,W.jsx)(ze,{selectedRowKeys:Ze.selectedRowKeys,showCreateModal:T,showWebCrawlModal:fe,showDocumentUploadModal:H,searchString:c,handleInputChange:f}),(0,W.jsx)(ae.Z,{rowKey:"id",columns:je,dataSource:d,pagination:m,rowSelection:Ze,className:qe.documentTable,scroll:{scrollToFirstRowOnChange:!0,x:1300}}),(0,W.jsx)(se,{visible:L,hideModal:E,loading:N,onOk:S}),(0,W.jsx)($,{documentId:b.id,parserId:b.parser_id,parserConfig:b.parser_config,documentExtension:(0,ee.RT)(b.name),onOk:G,visible:U,hideModal:q,loading:A}),(0,W.jsx)(Mn,{visible:j,onOk:Z,loading:_,hideModal:C,initialName:b.name}),(0,W.jsx)(Dn.Z,{visible:Q,hideModal:B,loading:ne,onOk:Y,uploadFileList:ie,setUploadFileList:ue,uploadProgress:ce,setUploadProgress:le}),(0,W.jsx)(Kn,{visible:pe,hideModal:me,loading:ge,onOk:he}),we&&(0,W.jsx)(Sn,{visible:we,hideModal:ke,onOk:_e,loading:ye,initialMetaData:b.meta_fields})]})}},53506:function(e,n,t){var r=t(60806),a=t(66582),o=t(78158),i=r.Z.getDialog,s=r.Z.setDialog,u=r.Z.listDialog,c=r.Z.removeDialog,l=r.Z.getConversation,d=r.Z.getConversationSSE,p=r.Z.setConversation,m=r.Z.completeConversation,f={getDialog:{url:i,method:"get"},setDialog:{url:s,method:"post"},removeDialog:{url:c,method:"post"},listDialog:{url:u,method:"get"},listConversation:{url:r.Z.listConversation,method:"get"},getConversation:{url:l,method:"get"},getConversationSSE:{url:d,method:"get"},setConversation:{url:p,method:"post"},completeConversation:{url:m,method:"post"},removeConversation:{url:r.Z.removeConversation,method:"post"},createToken:{url:r.Z.createToken,method:"post"},listToken:{url:r.Z.listToken,method:"get"},removeToken:{url:r.Z.removeToken,method:"post"},getStats:{url:r.Z.getStats,method:"get"},createExternalConversation:{url:r.Z.createExternalConversation,method:"get"},getExternalConversation:{url:r.Z.getExternalConversation,method:"get"},completeExternalConversation:{url:r.Z.completeExternalConversation,method:"post"},uploadAndParseExternal:{url:r.Z.uploadAndParseExternal,method:"post"},deleteMessage:{url:r.Z.deleteMessage,method:"post"},thumbup:{url:r.Z.thumbup,method:"post"},tts:{url:r.Z.tts,method:"post"},ask:{url:r.Z.ask,method:"post"},getMindMap:{url:r.Z.mindmap,method:"post"},getRelatedQuestions:{url:r.Z.getRelatedQuestions,method:"post"}},h=(0,a.Z)(f,o.ZP);n.Z=h},73955:function(e,n,t){t.d(n,{$V:function(){return T},QL:function(){return L},Re:function(){return E},tc:function(){return F}});var r=t(60806),a=t(66582),o=t(78158),i=r.Z.create_kb,s=r.Z.update_kb,u=r.Z.rm_kb,c=r.Z.get_kb_detail,l=r.Z.kb_list,d=r.Z.get_document_list,p=r.Z.document_change_status,m=r.Z.document_rm,f=r.Z.document_delete,h=r.Z.document_create,g=r.Z.document_change_parser,v=r.Z.document_thumbnails,x=r.Z.chunk_list,b=r.Z.create_chunk,k=r.Z.set_chunk,w=r.Z.get_chunk,y=r.Z.switch_chunk,_=r.Z.rm_chunk,Z=r.Z.retrieval_test,j=r.Z.document_rename,C=r.Z.document_run,P=r.Z.document_upload,M=r.Z.web_crawl,K=r.Z.knowledge_graph,D=r.Z.document_infos,I=r.Z.upload_and_parse,O=r.Z.listTagByKnowledgeIds,N={createKb:{url:i,method:"post"},updateKb:{url:s,method:"post"},rmKb:{url:u,method:"post"},get_kb_detail:{url:c,method:"get"},getList:{url:l,method:"get"},get_document_list:{url:d,method:"get"},document_change_status:{url:p,method:"post"},document_rm:{url:m,method:"post"},document_rename:{url:j,method:"post"},document_create:{url:h,method:"post"},document_run:{url:C,method:"post"},document_change_parser:{url:g,method:"post"},document_thumbnails:{url:v,method:"get"},document_upload:{url:P,method:"post"},web_crawl:{url:M,method:"post"},document_infos:{url:D,method:"post"},setMeta:{url:r.Z.setMeta,method:"post"},chunk_list:{url:x,method:"post"},create_chunk:{url:b,method:"post"},set_chunk:{url:k,method:"post"},get_chunk:{url:w,method:"get"},switch_chunk:{url:y,method:"post"},rm_chunk:{url:_,method:"post"},retrieval_test:{url:Z,method:"post"},knowledge_graph:{url:K,method:"get"},document_delete:{url:f,method:"delete"},upload_and_parse:{url:I,method:"post"},listTagByKnowledgeIds:{url:O,method:"get"}},S=(0,a.Z)(N,o.ZP),L=function(e){return o.ZP.get(r.Z.listTag(e))},F=function(e,n){return(0,o.v_)(r.Z.removeTag(e),{tags:n})},E=function(e,n){var t=n.fromTag,a=n.toTag;return(0,o.v_)(r.Z.renameTag(e),{fromTag:t,toTag:a})};function T(e){return o.ZP.get(r.Z.getKnowledgeGraph(e))}n.ZP=S},71250:function(e,n,t){t.d(n,{Bl:function(){return l},CE:function(){return m},IC:function(){return u},Kj:function(){return c},hH:function(){return f},mN:function(){return p},mV:function(){return h},o_:function(){return d}});var r=t(97857),a=t.n(r),o=t(1079),i=t(96486),s=t(57632),u=function(e){return e!==o.Pc&&""!==e},c=function(e){return"id"in e&&e.id?e.id:(0,s.Z)()},l=function(e){var n;return null!==(n=null==e?void 0:e.map((function(e){return a()(a()({},(0,i.omit)(e,"reference")),{},{id:c(e)})})))&&void 0!==n?n:[]},d=function(){return(0,s.Z)().replace(/-/g,"")},p=function(e){return"".concat(e.role,"_").concat(e.id)},m=function(e){return e.replace(/\\\[([\s\S]*?)\\\]/g,(function(e,n){return"$$".concat(n,"$$")})).replace(/\\\(([\s\S]*?)\\\)/g,(function(e,n){return"$".concat(n,"$")}))};function f(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/<think>([\s\S]*?)<\/think>/g,'<section class="think">$1</section>')}function h(e){return e!==o.uY.MaxTokensEnabled}},28382:function(e,n,t){t.d(n,{Qc:function(){return s},mr:function(){return i},p6:function(){return o}});var r=t(27484),a=t.n(r);function o(e){return e?a()(e).format("DD/MM/YYYY HH:mm:ss"):""}function i(e){return e?a()(e).format("HH:mm:ss"):""}function s(e){return e?a()(e).format("DD/MM/YYYY"):""}},5089:function(e,n,t){t.d(n,{Ep:function(){return d},Or:function(){return p},RT:function(){return c},YC:function(){return l},q1:function(){return u}});var r=t(19632),a=t.n(r),o=t(40169),i=t(96486),s=t(57632),u=function(e,n){var t;return Array.isArray(null==e?void 0:e.positions)&&e.positions.every((function(e){return Array.isArray(e)}))?null==e||null===(t=e.positions)||void 0===t?void 0:t.map((function(t){var r={width:n.width,height:n.height,x1:t[1],x2:t[2],y1:t[3],y2:t[4]};return{id:(0,s.Z)(),comment:{text:"",emoji:""},content:{text:(0,i.get)(e,"content_with_weight")||(0,i.get)(e,"content","")},position:{boundingRect:r,rects:[r],pageNumber:t[0]}}})):[]},c=function(e){var n;return null!==(n=null==e?void 0:e.slice(e.lastIndexOf(".")+1).toLowerCase())&&void 0!==n?n:""},l=function(e){return e.split("\n").length},d=function(e){return o.ru.includes(e)},p=function(e){return[].concat(a()(o.rU),["svg"]).some((function(n){return n===e}))}}}]);
//# sourceMappingURL=p__add-knowledge__components__knowledge-file__index.2af1a3d5.async.js.map