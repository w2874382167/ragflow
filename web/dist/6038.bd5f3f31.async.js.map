{"version":3,"file":"6038.bd5f3f31.async.js","mappings":"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","sources":["webpack://web/./node_modules/@antv/g6/esm/constants/animation.js","webpack://web/./node_modules/@antv/g6/esm/constants/change.js","webpack://web/./node_modules/@antv/g6/esm/constants/events/animation.js","webpack://web/./node_modules/@antv/g6/esm/constants/events/canvas.js","webpack://web/./node_modules/@antv/g6/esm/constants/events/combo.js","webpack://web/./node_modules/@antv/g6/esm/constants/events/common.js","webpack://web/./node_modules/@antv/g6/esm/constants/events/container.js","webpack://web/./node_modules/@antv/g6/esm/constants/events/edge.js","webpack://web/./node_modules/@antv/g6/esm/constants/events/graph.js","webpack://web/./node_modules/@antv/g6/esm/constants/events/history.js","webpack://web/./node_modules/@antv/g6/esm/constants/events/node.js","webpack://web/./node_modules/@antv/g6/esm/constants/graphlib.js","webpack://web/./node_modules/@antv/g6/esm/constants/registry.js","webpack://web/./node_modules/@antv/g6/esm/registry/store.js","webpack://web/./node_modules/@antv/g6/esm/registry/get.js","webpack://web/./node_modules/@antv/g6/esm/utils/print.js","webpack://web/./node_modules/@antv/g6/esm/utils/theme.js","webpack://web/./node_modules/@antv/g6/esm/utils/animation.js","webpack://web/./node_modules/@antv/g6/esm/utils/transform.js","webpack://web/./node_modules/@antv/g6/esm/animations/executor.js","webpack://web/./node_modules/@antv/g6/esm/animations/index.js","webpack://web/./node_modules/@antv/util/esm/lodash/group-by.js","webpack://web/./node_modules/@antv/g6/esm/utils/is.js","webpack://web/./node_modules/@antv/g6/esm/utils/math.js","webpack://web/./node_modules/@antv/g6/esm/utils/padding.js","webpack://web/./node_modules/@antv/g6/esm/utils/bbox.js","webpack://web/./node_modules/@antv/algorithm/es/adjacent-matrix.js","webpack://web/./node_modules/@antv/algorithm/es/structs/linked-list.js","webpack://web/./node_modules/@antv/algorithm/es/util.js","webpack://web/./node_modules/@antv/algorithm/es/structs/queue.js","webpack://web/./node_modules/@antv/algorithm/es/degree.js","webpack://web/./node_modules/@antv/algorithm/es/detect-cycle.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/is-type.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/is-function.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/is-array.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/each.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/is-object.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/keys.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/find.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/pull.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/is-string.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/pull-at.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/group-by.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/parse-radius.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/is-number.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/values.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/is-integer.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/to-degree.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/to-radian.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/is-prototype.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/clone.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/is-empty.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/pick.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/memoize.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/measure-text-width.js","webpack://web/./node_modules/@antv/algorithm/node_modules/@antv/util/esm/cache.js","webpack://web/./node_modules/@antv/algorithm/es/dijkstra.js","webpack://web/./node_modules/@antv/algorithm/es/find-path.js","webpack://web/./node_modules/@antv/algorithm/es/types.js","webpack://web/./node_modules/@antv/algorithm/es/utils/vector.js","webpack://web/./node_modules/@antv/algorithm/es/structs/union-find.js","webpack://web/./node_modules/@antv/algorithm/es/utils/data-preprocessing.js","webpack://web/./node_modules/@antv/algorithm/es/structs/binary-heap.js","webpack://web/./node_modules/@antv/algorithm/es/pageRank.js","webpack://web/./node_modules/@antv/algorithm/es/gSpan/struct.js","webpack://web/./node_modules/@antv/algorithm/es/gSpan/gSpan.js","webpack://web/./node_modules/@antv/algorithm/es/structs/stack.js","webpack://web/./node_modules/@antv/g6/esm/utils/id.js","webpack://web/./node_modules/@antv/g6/esm/utils/centrality.js","webpack://web/./node_modules/@antv/g6/esm/utils/diff.js","webpack://web/./node_modules/@antv/g6/esm/utils/visibility.js","webpack://web/./node_modules/@antv/g6/esm/registry/extension/index.js","webpack://web/./node_modules/@antv/g6/esm/utils/extension.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/base-behavior.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/auto-adapt-label.js","webpack://web/./node_modules/@antv/g6/esm/utils/vector.js","webpack://web/./node_modules/@antv/g6/esm/utils/line.js","webpack://web/./node_modules/@antv/g6/esm/utils/placement.js","webpack://web/./node_modules/@antv/g6/esm/utils/position.js","webpack://web/./node_modules/@antv/g6/esm/utils/point.js","webpack://web/./node_modules/@antv/g6/esm/utils/pinch.js","webpack://web/./node_modules/@antv/g6/esm/utils/shortcut.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/brush-select.js","webpack://web/./node_modules/@antv/g6/esm/constants/element.js","webpack://web/./node_modules/@antv/g6/esm/utils/traverse.js","webpack://web/./node_modules/@antv/g6/esm/utils/relation.js","webpack://web/./node_modules/@antv/g6/esm/utils/state.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/click-select.js","webpack://web/./node_modules/@antv/g6/esm/utils/collapsibility.js","webpack://web/./node_modules/@antv/g6/esm/utils/prefix.js","webpack://web/./node_modules/@antv/g6/esm/utils/size.js","webpack://web/./node_modules/@antv/g6/esm/utils/style.js","webpack://web/./node_modules/@antv/g6/esm/utils/palette.js","webpack://web/./node_modules/@antv/g6/esm/utils/text.js","webpack://web/./node_modules/@antv/util/esm/lodash/get-type.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-prototype.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-empty.js","webpack://web/./node_modules/@antv/g6/esm/elements/shapes/base-shape.js","webpack://web/./node_modules/@antv/g6/esm/utils/element.js","webpack://web/./node_modules/@antv/g6/esm/elements/shapes/label.js","webpack://web/./node_modules/@antv/g6/esm/elements/shapes/badge.js","webpack://web/./node_modules/@antv/g6/esm/utils/path.js","webpack://web/./node_modules/@antv/g6/esm/utils/polygon.js","webpack://web/./node_modules/@antv/g6/esm/elements/shapes/contour.js","webpack://web/./node_modules/@antv/g6/esm/elements/shapes/image.js","webpack://web/./node_modules/@antv/g6/esm/utils/shape.js","webpack://web/./node_modules/@antv/g6/esm/elements/shapes/icon.js","webpack://web/./node_modules/@antv/g6/esm/elements/base-element.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/base-node.js","webpack://web/./node_modules/@antv/g6/esm/utils/node.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/circle.js","webpack://web/./node_modules/@antv/g6/esm/elements/shapes/polygon.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/donut.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/ellipse.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/html.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/image.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/triangle.js","webpack://web/./node_modules/@antv/g6/esm/elements/combos/base-combo.js","webpack://web/./node_modules/@antv/util/esm/lodash/contains.js","webpack://web/./node_modules/@antv/util/esm/lodash/difference.js","webpack://web/./node_modules/@antv/g6/esm/utils/router/orth.js","webpack://web/./node_modules/@antv/g6/esm/utils/edge.js","webpack://web/./node_modules/@antv/g6/esm/utils/symbol.js","webpack://web/./node_modules/@antv/g6/esm/elements/edges/base-edge.js","webpack://web/./node_modules/@antv/g6/esm/elements/edges/cubic.js","webpack://web/./node_modules/@antv/g6/esm/elements/edges/cubic-horizontal.js","webpack://web/./node_modules/@antv/g6/esm/elements/edges/cubic-radial.js","webpack://web/./node_modules/@antv/g6/esm/elements/edges/cubic-vertical.js","webpack://web/./node_modules/@antv/g6/esm/elements/edges/line.js","webpack://web/./node_modules/@antv/g6/esm/utils/router/shortest-path.js","webpack://web/./node_modules/@antv/g6/esm/elements/edges/polyline.js","webpack://web/./node_modules/@antv/g6/esm/elements/edges/quadratic.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/collapse-expand.js","webpack://web/./node_modules/@antv/util/esm/lodash/unique-id.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/create-edge.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/drag-canvas.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/drag-element.js","webpack://web/./node_modules/@antv/g6/esm/layouts/base-layout.js","webpack://web/./node_modules/@antv/g6/esm/utils/layout.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/drag-element-force.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/fix-element-size.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/focus-element.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/hover-activate.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/optimize-viewport-transform.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/scroll-canvas.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/zoom-canvas.js","webpack://web/./node_modules/@antv/g6/esm/layouts/fishbone.js","webpack://web/./node_modules/@antv/g6/esm/layouts/snake.js","webpack://web/./node_modules/@antv/g6/esm/plugins/base-plugin.js","webpack://web/./node_modules/@antv/g6/esm/plugins/utils/dom.js","webpack://web/./node_modules/@antv/g6/esm/plugins/background/index.js","webpack://web/./node_modules/bubblesets-js/build/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/bubble-sets.js","webpack://web/./node_modules/@antv/g6/esm/plugins/contextmenu/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/contextmenu/util.js","webpack://web/./node_modules/@antv/g6/esm/plugins/edge-bundling/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/edge-filter-lens/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/fisheye/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/fullscreen/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/grid-line.js","webpack://web/./node_modules/@antv/g6/esm/utils/change.js","webpack://web/./node_modules/@antv/g6/esm/plugins/history/util.js","webpack://web/./node_modules/@antv/g6/esm/plugins/history/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/format.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/grid_handle.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/two-product.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/two-sum.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/robust-scale.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/robust-subtract.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/robust-sum.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/robust-orientation.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/monotone-convex-hull-2d.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/robust-segment-intersect.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/hull/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/util.js","webpack://web/./node_modules/@antv/g6/esm/plugins/hull/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/utils/canvas.js","webpack://web/./node_modules/@antv/g6/esm/plugins/legend.js","webpack://web/./node_modules/@antv/g6/esm/plugins/minimap/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/snapline/index.js","webpack://web/./node_modules/@antv/component/esm/util/time.js","webpack://web/./node_modules/@antv/component/esm/ui/select/option.js","webpack://web/./node_modules/@antv/component/esm/ui/select/select.js","webpack://web/./node_modules/@antv/component/esm/ui/timebar/icons.js","webpack://web/./node_modules/@antv/component/esm/ui/timebar/controller.js","webpack://web/./node_modules/@antv/component/esm/ui/timebar/handle.js","webpack://web/./node_modules/@antv/component/esm/ui/timebar/utils.js","webpack://web/./node_modules/@antv/component/esm/ui/timebar/timebar.js","webpack://web/./node_modules/@antv/g6/esm/plugins/timebar.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-date.js","webpack://web/./node_modules/@antv/g6/esm/plugins/toolbar/index.js","webpack://web/./node_modules/@antv/g6/esm/plugins/toolbar/util.js","webpack://web/./node_modules/@antv/g6/esm/plugins/tooltip.js","webpack://web/./node_modules/@antv/g6/esm/plugins/watermark/util.js","webpack://web/./node_modules/@antv/g6/esm/plugins/watermark/index.js","webpack://web/./node_modules/@antv/g6/esm/themes/base.js","webpack://web/./node_modules/@antv/g6/esm/themes/dark.js","webpack://web/./node_modules/@antv/g6/esm/themes/light.js","webpack://web/./node_modules/@antv/g6/esm/transforms/base-transform.js","webpack://web/./node_modules/@antv/g6/esm/transforms/utils.js","webpack://web/./node_modules/@antv/g6/esm/transforms/collapse-expand-node.js","webpack://web/./node_modules/@antv/g6/esm/elements/effect.js","webpack://web/./node_modules/@antv/g6/esm/registry/register.js","webpack://web/./node_modules/@antv/g6/esm/runtime/canvas.js","webpack://web/./node_modules/@antv/g6/esm/utils/dom.js","webpack://web/./node_modules/@antv/g6/esm/utils/event/events.js","webpack://web/./node_modules/@antv/g6/esm/utils/event/index.js","webpack://web/./node_modules/@antv/g6/esm/utils/z-index.js","webpack://web/./node_modules/@antv/g6/esm/utils/cache.js","webpack://web/./node_modules/@antv/g6/esm/runtime/animation.js","webpack://web/./node_modules/@antv/g6/esm/runtime/batch.js","webpack://web/./node_modules/@antv/g6/esm/runtime/behavior.js","webpack://web/./node_modules/@antv/g6/esm/utils/data.js","webpack://web/./node_modules/@antv/g6/esm/utils/graphlib.js","webpack://web/./node_modules/@antv/g6/esm/runtime/data.js","webpack://web/./node_modules/@antv/util/esm/lodash/uniq.js","webpack://web/./node_modules/@antv/g6/esm/runtime/element.js","webpack://web/./node_modules/comlink/dist/esm/comlink.mjs","webpack://web/./node_modules/@antv/layout/lib/supervisor.js","webpack://web/./node_modules/@antv/g6/esm/runtime/layout.js","webpack://web/./node_modules/@antv/g6/esm/runtime/options.js","webpack://web/./node_modules/@antv/g6/esm/runtime/plugin.js","webpack://web/./node_modules/@antv/g6/esm/runtime/transform.js","webpack://web/./node_modules/@antv/g6/esm/runtime/viewport.js","webpack://web/./node_modules/@antv/g6/esm/runtime/graph.js","webpack://web/./node_modules/@antv/g6/esm/utils/tree.js","webpack://web/./node_modules/@antv/g6/esm/transforms/get-edge-actual-ends.js","webpack://web/./node_modules/@antv/g6/esm/transforms/map-node-size.js","webpack://web/./node_modules/@antv/g6/esm/utils/scale.js","webpack://web/./node_modules/@antv/g6/esm/transforms/place-radial-labels.js","webpack://web/./node_modules/@antv/g6/esm/transforms/process-parallel-edges.js","webpack://web/./node_modules/@antv/g6/esm/registry/build-in.js","webpack://web/./node_modules/@antv/g6/esm/behaviors/lasso-select.js","webpack://web/./node_modules/@antv/g6/esm/elements/combos/circle.js","webpack://web/./node_modules/@antv/g6/esm/elements/combos/rect.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/diamond.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/hexagon.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/rect.js","webpack://web/./node_modules/@antv/g6/esm/elements/nodes/star.js","webpack://web/./node_modules/@antv/g6/esm/palettes/index.js","webpack://web/./node_modules/@antv/g6/esm/transforms/arrange-draw-order.js","webpack://web/./node_modules/@antv/g6/esm/transforms/collapse-expand-combo.js","webpack://web/./node_modules/@antv/g6/esm/transforms/update-related-edge.js","webpack://web/./node_modules/@antv/hierarchy/build/hierarchy.js","webpack://web/./node_modules/lodash/get.js","webpack://web/./node_modules/lodash/isString.js","webpack://web/./node_modules/lodash/mapValues.js"],"sourcesContent":["export const DEFAULT_ANIMATION_OPTIONS = {\n    duration: 500,\n};\nexport const DEFAULT_ELEMENTS_ANIMATION_OPTIONS = {\n    duration: 1000,\n    easing: 'cubic-bezier(0.250, 0.460, 0.450, 0.940)',\n    iterations: 1,\n    fill: 'both',\n};\n//# sourceMappingURL=animation.js.map","export const ChangeEvent = {\n    /**\n     * <zh/> 数据变更\n     *\n     * <en/> Data changes\n     */\n    CHANGE: 'change',\n};\nexport var ChangeType;\n(function (ChangeType) {\n    /**\n     * <zh/> 节点添加\n     *\n     * <en/> Node added\n     */\n    ChangeType[\"NodeAdded\"] = \"NodeAdded\";\n    /**\n     * <zh/> 节点更新\n     *\n     * <en/> Node updated\n     */\n    ChangeType[\"NodeUpdated\"] = \"NodeUpdated\";\n    /**\n     * <zh/> 节点删除\n     *\n     * <en/> Node removed\n     */\n    ChangeType[\"NodeRemoved\"] = \"NodeRemoved\";\n    /**\n     * <zh/> 边添加\n     *\n     * <en/> Edge added\n     */\n    ChangeType[\"EdgeAdded\"] = \"EdgeAdded\";\n    /**\n     * <zh/> 边更新\n     *\n     * <en/> Edge updated\n     */\n    ChangeType[\"EdgeUpdated\"] = \"EdgeUpdated\";\n    /**\n     * <zh/> 边删除\n     *\n     * <en/> Edge removed\n     */\n    ChangeType[\"EdgeRemoved\"] = \"EdgeRemoved\";\n    /**\n     * <zh/> Combo添加\n     *\n     * <en/> Combo added\n     */\n    ChangeType[\"ComboAdded\"] = \"ComboAdded\";\n    /**\n     * <zh/> Combo更新\n     *\n     * <en/> Combo updated\n     */\n    ChangeType[\"ComboUpdated\"] = \"ComboUpdated\";\n    /**\n     * <zh/> Combo删除\n     *\n     * <en/> Combo removed\n     */\n    ChangeType[\"ComboRemoved\"] = \"ComboRemoved\";\n})(ChangeType || (ChangeType = {}));\n//# sourceMappingURL=change.js.map","export var AnimationType;\n(function (AnimationType) {\n    AnimationType[\"DRAW\"] = \"draw\";\n    AnimationType[\"COLLAPSE\"] = \"collapse\";\n    AnimationType[\"EXPAND\"] = \"expand\";\n    AnimationType[\"TRANSFORM\"] = \"transform\";\n})(AnimationType || (AnimationType = {}));\n//# sourceMappingURL=animation.js.map","/**\n * <zh/> 画布事件\n *\n * <en/> Canvas event\n */\nexport var CanvasEvent;\n(function (CanvasEvent) {\n    /**\n     * <zh/> 点击时触发\n     *\n     * <en/> Triggered when click\n     */\n    CanvasEvent[\"CLICK\"] = \"canvas:click\";\n    /**\n     * <zh/> 双击时触发\n     *\n     * <en/> Triggered when double click\n     */\n    CanvasEvent[\"DBLCLICK\"] = \"canvas:dblclick\";\n    /**\n     * <zh/> 指针移入时触发\n     *\n     * <en/> Triggered when the pointer enters\n     */\n    CanvasEvent[\"POINTER_OVER\"] = \"canvas:pointerover\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    CanvasEvent[\"POINTER_LEAVE\"] = \"canvas:pointerleave\";\n    /**\n     * <zh/> 指针移入时或移入子元素时触发（不会冒泡）\n     *\n     * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n     */\n    CanvasEvent[\"POINTER_ENTER\"] = \"canvas:pointerenter\";\n    /**\n     * <zh/> 指针移动时触发\n     *\n     * <en/> Triggered when the pointer moves\n     */\n    CanvasEvent[\"POINTER_MOVE\"] = \"canvas:pointermove\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    CanvasEvent[\"POINTER_OUT\"] = \"canvas:pointerout\";\n    /**\n     * <zh/> 指针按下时触发\n     *\n     * <en/> Triggered when the pointer is pressed\n     */\n    CanvasEvent[\"POINTER_DOWN\"] = \"canvas:pointerdown\";\n    /**\n     * <zh/> 指针抬起时触发\n     *\n     * <en/> Triggered when the pointer is lifted\n     */\n    CanvasEvent[\"POINTER_UP\"] = \"canvas:pointerup\";\n    /**\n     * <zh/> 打开上下文菜单时触发\n     *\n     * <en/> Triggered when the context menu is opened\n     */\n    CanvasEvent[\"CONTEXT_MENU\"] = \"canvas:contextmenu\";\n    /**\n     * <zh/> 开始拖拽时触发\n     *\n     * <en/> Triggered when dragging starts\n     */\n    CanvasEvent[\"DRAG_START\"] = \"canvas:dragstart\";\n    /**\n     * <zh/> 拖拽过程中触发\n     *\n     * <en/> Triggered when dragging\n     */\n    CanvasEvent[\"DRAG\"] = \"canvas:drag\";\n    /**\n     * <zh/> 拖拽结束时触发\n     *\n     * <en/> Triggered when dragging ends\n     */\n    CanvasEvent[\"DRAG_END\"] = \"canvas:dragend\";\n    /**\n     * <zh/> 拖拽进入时触发\n     *\n     * <en/> Triggered when dragging enters\n     */\n    CanvasEvent[\"DRAG_ENTER\"] = \"canvas:dragenter\";\n    /**\n     * <zh/> 拖拽经过时触发\n     *\n     * <en/> Triggered when dragging passes\n     */\n    CanvasEvent[\"DRAG_OVER\"] = \"canvas:dragover\";\n    /**\n     * <zh/> 拖拽离开时触发\n     *\n     * <en/> Triggered when dragging leaves\n     */\n    CanvasEvent[\"DRAG_LEAVE\"] = \"canvas:dragleave\";\n    /**\n     * <zh/> 拖拽放下时触发\n     *\n     * <en/> Triggered when dragging is dropped\n     */\n    CanvasEvent[\"DROP\"] = \"canvas:drop\";\n    /**\n     * <zh/> 滚动时触发\n     *\n     * <en/> Triggered when scrolling\n     */\n    CanvasEvent[\"WHEEL\"] = \"canvas:wheel\";\n})(CanvasEvent || (CanvasEvent = {}));\n//# sourceMappingURL=canvas.js.map","/**\n * <zh/> 组合事件\n *\n * <en/> Combo event\n */\nexport var ComboEvent;\n(function (ComboEvent) {\n    /**\n     * <zh/> 点击时触发\n     *\n     * <en/> Triggered when click\n     */\n    ComboEvent[\"CLICK\"] = \"combo:click\";\n    /**\n     * <zh/> 双击时触发\n     *\n     * <en/> Triggered when double click\n     */\n    ComboEvent[\"DBLCLICK\"] = \"combo:dblclick\";\n    /**\n     * <zh/> 指针移入时触发\n     *\n     * <en/> Triggered when the pointer enters\n     */\n    ComboEvent[\"POINTER_OVER\"] = \"combo:pointerover\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    ComboEvent[\"POINTER_LEAVE\"] = \"combo:pointerleave\";\n    /**\n     * <zh/> 指针移入时或移入子元素时触发（不会冒泡）\n     *\n     * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n     */\n    ComboEvent[\"POINTER_ENTER\"] = \"combo:pointerenter\";\n    /**\n     * <zh/> 指针移动时触发\n     *\n     * <en/> Triggered when the pointer moves\n     */\n    ComboEvent[\"POINTER_MOVE\"] = \"combo:pointermove\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    ComboEvent[\"POINTER_OUT\"] = \"combo:pointerout\";\n    /**\n     * <zh/> 指针按下时触发\n     *\n     * <en/> Triggered when the pointer is pressed\n     */\n    ComboEvent[\"POINTER_DOWN\"] = \"combo:pointerdown\";\n    /**\n     * <zh/> 指针抬起时触发\n     *\n     * <en/> Triggered when the pointer is lifted\n     */\n    ComboEvent[\"POINTER_UP\"] = \"combo:pointerup\";\n    /**\n     * <zh/> 打开上下文菜单时触发\n     *\n     * <en/> Triggered when the context menu is opened\n     */\n    ComboEvent[\"CONTEXT_MENU\"] = \"combo:contextmenu\";\n    /**\n     * <zh/> 开始拖拽时触发\n     *\n     * <en/> Triggered when dragging starts\n     */\n    ComboEvent[\"DRAG_START\"] = \"combo:dragstart\";\n    /**\n     * <zh/> 拖拽过程中触发\n     *\n     * <en/> Triggered when dragging\n     */\n    ComboEvent[\"DRAG\"] = \"combo:drag\";\n    /**\n     * <zh/> 拖拽结束时触发\n     *\n     * <en/> Triggered when dragging ends\n     */\n    ComboEvent[\"DRAG_END\"] = \"combo:dragend\";\n    /**\n     * <zh/> 拖拽进入时触发\n     *\n     * <en/> Triggered when dragging enters\n     */\n    ComboEvent[\"DRAG_ENTER\"] = \"combo:dragenter\";\n    /**\n     * <zh/> 拖拽经过时触发\n     *\n     * <en/> Triggered when dragging passes\n     */\n    ComboEvent[\"DRAG_OVER\"] = \"combo:dragover\";\n    /**\n     * <zh/> 拖拽离开时触发\n     *\n     * <en/> Triggered when dragging leaves\n     */\n    ComboEvent[\"DRAG_LEAVE\"] = \"combo:dragleave\";\n    /**\n     * <zh/> 拖拽放下时触发\n     *\n     * <en/> Triggered when dragging is dropped\n     */\n    ComboEvent[\"DROP\"] = \"combo:drop\";\n})(ComboEvent || (ComboEvent = {}));\n//# sourceMappingURL=combo.js.map","export var CommonEvent;\n(function (CommonEvent) {\n    /**\n     * <zh/> 点击时触发\n     *\n     * <en/> Triggered when click\n     */\n    CommonEvent[\"CLICK\"] = \"click\";\n    /**\n     * <zh/> 双击时触发\n     *\n     * <en/> Triggered when double click\n     */\n    CommonEvent[\"DBLCLICK\"] = \"dblclick\";\n    /**\n     * <zh/> 指针移入时触发\n     *\n     * <en/> Triggered when the pointer enters\n     */\n    CommonEvent[\"POINTER_OVER\"] = \"pointerover\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    CommonEvent[\"POINTER_LEAVE\"] = \"pointerleave\";\n    /**\n     * <zh/> 指针移入时或移入子元素时触发（不会冒泡）\n     *\n     * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n     */\n    CommonEvent[\"POINTER_ENTER\"] = \"pointerenter\";\n    /**\n     * <zh/> 指针移动时触发\n     *\n     * <en/> Triggered when the pointer moves\n     */\n    CommonEvent[\"POINTER_MOVE\"] = \"pointermove\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    CommonEvent[\"POINTER_OUT\"] = \"pointerout\";\n    /**\n     * <zh/> 指针按下时触发\n     *\n     * <en/> Triggered when the pointer is pressed\n     */\n    CommonEvent[\"POINTER_DOWN\"] = \"pointerdown\";\n    /**\n     * <zh/> 指针抬起时触发\n     *\n     * <en/> Triggered when the pointer is lifted\n     */\n    CommonEvent[\"POINTER_UP\"] = \"pointerup\";\n    /**\n     * <zh/> 打开上下文菜单时触发\n     *\n     * <en/> Triggered when the context menu is opened\n     */\n    CommonEvent[\"CONTEXT_MENU\"] = \"contextmenu\";\n    /**\n     * <zh/> 开始拖拽时触发\n     *\n     * <en/> Triggered when dragging starts\n     */\n    CommonEvent[\"DRAG_START\"] = \"dragstart\";\n    /**\n     * <zh/> 拖拽过程中触发\n     *\n     * <en/> Triggered when dragging\n     */\n    CommonEvent[\"DRAG\"] = \"drag\";\n    /**\n     * <zh/> 拖拽结束时触发\n     *\n     * <en/> Triggered when dragging ends\n     */\n    CommonEvent[\"DRAG_END\"] = \"dragend\";\n    /**\n     * <zh/> 拖拽进入时触发\n     *\n     * <en/> Triggered when dragging enters\n     */\n    CommonEvent[\"DRAG_ENTER\"] = \"dragenter\";\n    /**\n     * <zh/> 拖拽经过时触发\n     *\n     * <en/> Triggered when dragging passes\n     */\n    CommonEvent[\"DRAG_OVER\"] = \"dragover\";\n    /**\n     * <zh/> 拖拽离开时触发\n     *\n     * <en/> Triggered when dragging leaves\n     */\n    CommonEvent[\"DRAG_LEAVE\"] = \"dragleave\";\n    /**\n     * <zh/> 拖拽放下时触发\n     *\n     * <en/> Triggered when dragging is dropped\n     */\n    CommonEvent[\"DROP\"] = \"drop\";\n    /**\n     * <zh/> 按下键盘时触发\n     *\n     * <en/> Triggered when the keyboard is pressed\n     */\n    CommonEvent[\"KEY_DOWN\"] = \"keydown\";\n    /**\n     * <zh/> 抬起键盘时触发\n     *\n     * <en/> Triggered when the keyboard is lifted\n     */\n    CommonEvent[\"KEY_UP\"] = \"keyup\";\n    /**\n     * <zh/> 滚动时触发\n     *\n     * <en/> Triggered when scrolling\n     */\n    CommonEvent[\"WHEEL\"] = \"wheel\";\n    /**\n     * <zh/> 双指捏拢或张开时触发\n     *\n     * <en/> Triggered when pinch in and pinch out\n     */\n    CommonEvent[\"PINCH\"] = \"pinch\";\n})(CommonEvent || (CommonEvent = {}));\n//# sourceMappingURL=common.js.map","export var ContainerEvent;\n(function (ContainerEvent) {\n    /**\n     * <zh/> 按下键盘时触发\n     *\n     * <en/> Triggered when the keyboard is pressed\n     */\n    ContainerEvent[\"KEY_DOWN\"] = \"keydown\";\n    /**\n     * <zh/> 抬起键盘时触发\n     *\n     * <en/> Triggered when the keyboard is lifted\n     */\n    ContainerEvent[\"KEY_UP\"] = \"keyup\";\n})(ContainerEvent || (ContainerEvent = {}));\n//# sourceMappingURL=container.js.map","/**\n * <zh/> 边事件\n *\n * <en/> Edge event\n */\nexport var EdgeEvent;\n(function (EdgeEvent) {\n    /**\n     * <zh/> 点击时触发\n     *\n     * <en/> Triggered when click\n     */\n    EdgeEvent[\"CLICK\"] = \"edge:click\";\n    /**\n     * <zh/> 双击时触发\n     *\n     * <en/> Triggered when double click\n     */\n    EdgeEvent[\"DBLCLICK\"] = \"edge:dblclick\";\n    /**\n     * <zh/> 指针移入时触发\n     *\n     * <en/> Triggered when the pointer enters\n     */\n    EdgeEvent[\"POINTER_OVER\"] = \"edge:pointerover\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    EdgeEvent[\"POINTER_LEAVE\"] = \"edge:pointerleave\";\n    /**\n     * <zh/> 指针移入时或移入子元素时触发（不会冒泡）\n     *\n     * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n     */\n    EdgeEvent[\"POINTER_ENTER\"] = \"edge:pointerenter\";\n    /**\n     * <zh/> 指针移动时触发\n     *\n     * <en/> Triggered when the pointer moves\n     */\n    EdgeEvent[\"POINTER_MOVE\"] = \"edge:pointermove\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    EdgeEvent[\"POINTER_OUT\"] = \"edge:pointerout\";\n    /**\n     * <zh/> 指针按下时触发\n     *\n     * <en/> Triggered when the pointer is pressed\n     */\n    EdgeEvent[\"POINTER_DOWN\"] = \"edge:pointerdown\";\n    /**\n     * <zh/> 指针抬起时触发\n     *\n     * <en/> Triggered when the pointer is lifted\n     */\n    EdgeEvent[\"POINTER_UP\"] = \"edge:pointerup\";\n    /**\n     * <zh/> 打开上下文菜单时触发\n     *\n     * <en/> Triggered when the context menu is opened\n     */\n    EdgeEvent[\"CONTEXT_MENU\"] = \"edge:contextmenu\";\n    /**\n     * <zh/> 拖拽进入时触发\n     *\n     * <en/> Triggered when dragging enters\n     */\n    EdgeEvent[\"DRAG_ENTER\"] = \"edge:dragenter\";\n    /**\n     * <zh/> 拖拽经过时触发\n     *\n     * <en/> Triggered when dragging passes\n     */\n    EdgeEvent[\"DRAG_OVER\"] = \"edge:dragover\";\n    /**\n     * <zh/> 拖拽离开时触发\n     *\n     * <en/> Triggered when dragging leaves\n     */\n    EdgeEvent[\"DRAG_LEAVE\"] = \"edge:dragleave\";\n    /**\n     * <zh/> 拖拽放下时触发\n     *\n     * <en/> Triggered when dragging is dropped\n     */\n    EdgeEvent[\"DROP\"] = \"edge:drop\";\n})(EdgeEvent || (EdgeEvent = {}));\n//# sourceMappingURL=edge.js.map","export var GraphEvent;\n(function (GraphEvent) {\n    /**\n     * <zh/> 画布初始化之前\n     *\n     * <en/> Before the canvas is initialized\n     */\n    GraphEvent[\"BEFORE_CANVAS_INIT\"] = \"beforecanvasinit\";\n    /**\n     * <zh/> 画布初始化之后\n     *\n     * <en/> After the canvas is initialized\n     */\n    GraphEvent[\"AFTER_CANVAS_INIT\"] = \"aftercanvasinit\";\n    /**\n     * <zh/> 视口尺寸变更之前\n     *\n     * <en/> Before the viewport size changes\n     */\n    GraphEvent[\"BEFORE_SIZE_CHANGE\"] = \"beforesizechange\";\n    /**\n     * <zh/> 视口尺寸变更之后\n     *\n     * <en/> After the viewport size changes\n     */\n    GraphEvent[\"AFTER_SIZE_CHANGE\"] = \"aftersizechange\";\n    /**\n     * <zh/> 元素创建之前\n     *\n     * <en/> Before creating element\n     */\n    GraphEvent[\"BEFORE_ELEMENT_CREATE\"] = \"beforeelementcreate\";\n    /**\n     * <zh/> 元素创建之后\n     *\n     * <en/> After creating element\n     */\n    GraphEvent[\"AFTER_ELEMENT_CREATE\"] = \"afterelementcreate\";\n    /**\n     * <zh/> 元素更新之前\n     *\n     * <en/> Before updating element\n     */\n    GraphEvent[\"BEFORE_ELEMENT_UPDATE\"] = \"beforeelementupdate\";\n    /**\n     * <zh/> 元素更新之后\n     *\n     * <en/> After updating element\n     */\n    GraphEvent[\"AFTER_ELEMENT_UPDATE\"] = \"afterelementupdate\";\n    /**\n     * <zh/> 元素销毁之前\n     *\n     * <en/> Before destroying element\n     */\n    GraphEvent[\"BEFORE_ELEMENT_DESTROY\"] = \"beforeelementdestroy\";\n    /**\n     * <zh/> 元素销毁之后\n     *\n     * <en/> After destroying element\n     */\n    GraphEvent[\"AFTER_ELEMENT_DESTROY\"] = \"afterelementdestroy\";\n    /**\n     * <zh/> 元素平移之前\n     *\n     * <en/> Before element translation\n     */\n    GraphEvent[\"BEFORE_ELEMENT_TRANSLATE\"] = \"beforeelementtranslate\";\n    /**\n     * <zh/> 元素平移之后\n     *\n     * <en/> After element translation\n     */\n    GraphEvent[\"AFTER_ELEMENT_TRANSLATE\"] = \"afterelementtranslate\";\n    /**\n     * <zh/> 绘制开始之前\n     *\n     * <en/> Before drawing\n     */\n    GraphEvent[\"BEFORE_DRAW\"] = \"beforedraw\";\n    /**\n     * <zh/> 绘制结束之后\n     *\n     * <en/> After drawing\n     */\n    GraphEvent[\"AFTER_DRAW\"] = \"afterdraw\";\n    /**\n     * <zh/> 渲染开始之前\n     *\n     * <en/> Before rendering\n     */\n    GraphEvent[\"BEFORE_RENDER\"] = \"beforerender\";\n    /**\n     * <zh/> 渲染完成之后\n     *\n     * <en/> After rendering\n     */\n    GraphEvent[\"AFTER_RENDER\"] = \"afterrender\";\n    /**\n     * <zh/> 动画开始之前\n     *\n     * <en/> Before animation\n     */\n    GraphEvent[\"BEFORE_ANIMATE\"] = \"beforeanimate\";\n    /**\n     * <zh/> 动画结束之后\n     *\n     * <en/> After animation\n     */\n    GraphEvent[\"AFTER_ANIMATE\"] = \"afteranimate\";\n    /**\n     * <zh/> 布局开始之前\n     *\n     * <en/> Before layout\n     */\n    GraphEvent[\"BEFORE_LAYOUT\"] = \"beforelayout\";\n    /**\n     * <zh/> 布局结束之后\n     *\n     * <en/> After layout\n     */\n    GraphEvent[\"AFTER_LAYOUT\"] = \"afterlayout\";\n    /**\n     * <zh/> 布局过程之前，用于流水线布局过程获取当前执行的布局\n     *\n     * <en/> Before the layout process, used to get the current layout being executed in the pipeline layout process\n     */\n    GraphEvent[\"BEFORE_STAGE_LAYOUT\"] = \"beforestagelayout\";\n    /**\n     * <zh/> 布局过程之后，用于流水线布局过程获取当前执行的布局\n     *\n     * <en/> After the layout process, used to get the current layout being executed in the pipeline layout process\n     */\n    GraphEvent[\"AFTER_STAGE_LAYOUT\"] = \"afterstagelayout\";\n    /**\n     * <zh/> 可视区域变化之前\n     *\n     * <en/> Before the visible area changes\n     */\n    GraphEvent[\"BEFORE_TRANSFORM\"] = \"beforetransform\";\n    /**\n     * <zh/> 可视区域变化之后\n     *\n     * <en/> After the visible area changes\n     */\n    GraphEvent[\"AFTER_TRANSFORM\"] = \"aftertransform\";\n    /**\n     * <zh/> 批处理开始\n     *\n     * <en/> Batch processing starts\n     */\n    GraphEvent[\"BATCH_START\"] = \"batchstart\";\n    /**\n     * <zh/> 批处理结束\n     *\n     * <en/> Batch processing ends\n     */\n    GraphEvent[\"BATCH_END\"] = \"batchend\";\n    /**\n     * <zh/> 销毁开始之前\n     *\n     * <en/> Before destruction\n     */\n    GraphEvent[\"BEFORE_DESTROY\"] = \"beforedestroy\";\n    /**\n     * <zh/> 销毁结束之后\n     *\n     * <en/> After destruction\n     */\n    GraphEvent[\"AFTER_DESTROY\"] = \"afterdestroy\";\n    /**\n     * <zh/> 渲染器变更之前\n     *\n     * <en/> Before the renderer changes\n     */\n    GraphEvent[\"BEFORE_RENDERER_CHANGE\"] = \"beforerendererchange\";\n    /**\n     * <zh/> 渲染器变更之后\n     *\n     * <en/> After the renderer changes\n     */\n    GraphEvent[\"AFTER_RENDERER_CHANGE\"] = \"afterrendererchange\";\n})(GraphEvent || (GraphEvent = {}));\n//# sourceMappingURL=graph.js.map","export var HistoryEvent;\n(function (HistoryEvent) {\n    /**\n     * <zh/> 当命令被撤销时\n     *\n     * <en/> When the command is undone\n     */\n    HistoryEvent[\"UNDO\"] = \"undo\";\n    /**\n     * <zh/> 当命令被重做时\n     *\n     * <en/> When the command is redone\n     */\n    HistoryEvent[\"REDO\"] = \"redo\";\n    /**\n     * <zh/> 当命令被取消时\n     *\n     * <en/> When the command is canceled\n     */\n    HistoryEvent[\"CANCEL\"] = \"cancel\";\n    /**\n     *  <zh/> 当命令被添加到队列时\n     *\n     *  <en/> When the command is added\n     */\n    HistoryEvent[\"ADD\"] = \"add\";\n    /**\n     * <zh/> 当历史队列被清空时\n     *\n     *  <en/> When the command queue is cleared\n     */\n    HistoryEvent[\"CLEAR\"] = \"clear\";\n    /**\n     * <zh/> 当历史队列发生变化时\n     *\n     * <en/> When the command queue changes\n     */\n    HistoryEvent[\"CHANGE\"] = \"change\";\n})(HistoryEvent || (HistoryEvent = {}));\n//# sourceMappingURL=history.js.map","/**\n * <zh/> 节点事件\n *\n * <en/> Node event\n */\nexport var NodeEvent;\n(function (NodeEvent) {\n    /**\n     * <zh/> 点击时触发\n     *\n     * <en/> Triggered when click\n     */\n    NodeEvent[\"CLICK\"] = \"node:click\";\n    /**\n     * <zh/> 双击时触发\n     *\n     * <en/> Triggered when double click\n     */\n    NodeEvent[\"DBLCLICK\"] = \"node:dblclick\";\n    /**\n     * <zh/> 指针移入时触发\n     *\n     * <en/> Triggered when the pointer enters\n     */\n    NodeEvent[\"POINTER_OVER\"] = \"node:pointerover\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    NodeEvent[\"POINTER_LEAVE\"] = \"node:pointerleave\";\n    /**\n     * <zh/> 指针移入时或移入子元素时触发（不会冒泡）\n     *\n     * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n     */\n    NodeEvent[\"POINTER_ENTER\"] = \"node:pointerenter\";\n    /**\n     * <zh/> 指针移动时触发\n     *\n     * <en/> Triggered when the pointer moves\n     */\n    NodeEvent[\"POINTER_MOVE\"] = \"node:pointermove\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    NodeEvent[\"POINTER_OUT\"] = \"node:pointerout\";\n    /**\n     * <zh/> 指针按下时触发\n     *\n     * <en/> Triggered when the pointer is pressed\n     */\n    NodeEvent[\"POINTER_DOWN\"] = \"node:pointerdown\";\n    /**\n     * <zh/> 指针抬起时触发\n     *\n     * <en/> Triggered when the pointer is lifted\n     */\n    NodeEvent[\"POINTER_UP\"] = \"node:pointerup\";\n    /**\n     * <zh/> 打开上下文菜单时触发\n     *\n     * <en/> Triggered when the context menu is opened\n     */\n    NodeEvent[\"CONTEXT_MENU\"] = \"node:contextmenu\";\n    /**\n     * <zh/> 开始拖拽时触发\n     *\n     * <en/> Triggered when dragging starts\n     */\n    NodeEvent[\"DRAG_START\"] = \"node:dragstart\";\n    /**\n     * <zh/> 拖拽过程中触发\n     *\n     * <en/> Triggered when dragging\n     */\n    NodeEvent[\"DRAG\"] = \"node:drag\";\n    /**\n     * <zh/> 拖拽结束时触发\n     *\n     * <en/> Triggered when dragging ends\n     */\n    NodeEvent[\"DRAG_END\"] = \"node:dragend\";\n    /**\n     * <zh/> 拖拽进入时触发\n     *\n     * <en/> Triggered when dragging enters\n     */\n    NodeEvent[\"DRAG_ENTER\"] = \"node:dragenter\";\n    /**\n     * <zh/> 拖拽经过时触发\n     *\n     * <en/> Triggered when dragging passes\n     */\n    NodeEvent[\"DRAG_OVER\"] = \"node:dragover\";\n    /**\n     * <zh/> 拖拽离开时触发\n     *\n     * <en/> Triggered when dragging leaves\n     */\n    NodeEvent[\"DRAG_LEAVE\"] = \"node:dragleave\";\n    /**\n     * <zh/> 拖拽放下时触发\n     *\n     * <en/> Triggered when dragging is dropped\n     */\n    NodeEvent[\"DROP\"] = \"node:drop\";\n})(NodeEvent || (NodeEvent = {}));\n//# sourceMappingURL=node.js.map","export const COMBO_KEY = 'combo';\nexport const TREE_KEY = 'tree';\n//# sourceMappingURL=graphlib.js.map","export var ExtensionCategory;\n(function (ExtensionCategory) {\n    /**\n     * <zh/> 节点元素\n     *\n     * <en/> Node element\n     */\n    ExtensionCategory[\"NODE\"] = \"node\";\n    /**\n     * <zh/> 边元素\n     *\n     * <en/> Edge element\n     */\n    ExtensionCategory[\"EDGE\"] = \"edge\";\n    /**\n     * <zh/> 组合元素\n     *\n     * <en/> Combination element\n     */\n    ExtensionCategory[\"COMBO\"] = \"combo\";\n    /**\n     * <zh/> 主题\n     *\n     * <en/> Theme\n     */\n    ExtensionCategory[\"THEME\"] = \"theme\";\n    /**\n     * <zh/> 色板\n     *\n     * <en/> Palette\n     */\n    ExtensionCategory[\"PALETTE\"] = \"palette\";\n    /**\n     * <zh/> 布局\n     *\n     * <en/> Layout\n     */\n    ExtensionCategory[\"LAYOUT\"] = \"layout\";\n    /**\n     * <zh/> 交互\n     *\n     * <en/> Behavior\n     */\n    ExtensionCategory[\"BEHAVIOR\"] = \"behavior\";\n    /**\n     * <zh/> 插件\n     *\n     * <en/> Plugin\n     */\n    ExtensionCategory[\"PLUGIN\"] = \"plugin\";\n    /**\n     * <zh/> 动画\n     *\n     * <en/> Animation\n     */\n    ExtensionCategory[\"ANIMATION\"] = \"animation\";\n    /**\n     * <zh/> 数据转换\n     *\n     * <en/> Data transform\n     */\n    ExtensionCategory[\"TRANSFORM\"] = \"transform\";\n    /**\n     * <zh/> 图形\n     *\n     * <en/> Shape\n     */\n    ExtensionCategory[\"SHAPE\"] = \"shape\";\n})(ExtensionCategory || (ExtensionCategory = {}));\n//# sourceMappingURL=registry.js.map","/**\n * <zh/> 扩展注册表\n *\n * <en/> Extension registry\n */\nexport const EXTENSION_REGISTRY = {\n    animation: {},\n    behavior: {},\n    combo: {},\n    edge: {},\n    layout: {},\n    node: {},\n    palette: {},\n    theme: {},\n    plugin: {},\n    transform: {},\n    shape: {},\n};\n//# sourceMappingURL=store.js.map","import { EXTENSION_REGISTRY } from './store';\n/**\n * <zh/> 根据类别和类型获取扩展\n *\n * <en/> Get the extension by category and type\n * @param category - <zh/> 扩展类别 | <en/> Extension category\n * @param type - <zh/> 扩展类型 | <en/> Extension type\n * @returns <zh/> 注册的扩展 | <en/> Registered extension\n * @internal\n */\nexport function getExtension(category, type) {\n    var _a;\n    const extension = (_a = EXTENSION_REGISTRY[category]) === null || _a === void 0 ? void 0 : _a[type];\n    if (extension) {\n        return extension;\n    }\n    return undefined;\n}\n/**\n * <zh/> 根据类别获取扩展\n *\n * <en/> Get the extension by category and type\n * @param category - <zh/> 扩展类别 | <en/> Extension category\n * @returns <zh/> 注册的扩展 | <en/> Registered extension\n * @internal\n */\nexport function getExtensions(category) {\n    return EXTENSION_REGISTRY[category];\n}\n//# sourceMappingURL=get.js.map","/* global console */\n/* eslint no-console: \"off\" */\nimport { version } from '../version';\nconst BRAND = 'G6';\n/**\n * <zh/> 格式化打印\n *\n * <en/> Format print\n * @param message - <zh/> 消息 | <en/> Message\n * @returns <zh/> 格式化后的消息 | <en/> Formatted message\n */\nexport function format(message) {\n    return `[${BRAND} v${version}] ${message}`;\n}\nexport const print = {\n    mute: false,\n    debug: (message) => {\n        !print.mute && console.debug(format(message));\n    },\n    info: (message) => {\n        !print.mute && console.info(format(message));\n    },\n    warn: (message) => {\n        !print.mute && console.warn(format(message));\n    },\n    error: (message) => {\n        !print.mute && console.error(format(message));\n    },\n};\n//# sourceMappingURL=print.js.map","import { ExtensionCategory } from '../constants';\nimport { getExtension } from '../registry/get';\nimport { print } from './print';\n/**\n * <zh/> 获取主题配置\n *\n * <en/> Get theme options\n * @param options - <zh/> 图配置项 <en/> graph options\n * @returns <zh/> 主题配置 <en/> theme options\n */\nexport function themeOf(options) {\n    const { theme } = options;\n    if (!theme)\n        return {};\n    const themeOptions = getExtension(ExtensionCategory.THEME, theme);\n    if (themeOptions)\n        return themeOptions;\n    print.warn(`The theme of ${theme} is not registered.`);\n    return {};\n}\n//# sourceMappingURL=theme.js.map","import { isEqual, isNil, isObject } from '@antv/util';\nimport { DEFAULT_ANIMATION_OPTIONS, DEFAULT_ELEMENTS_ANIMATION_OPTIONS, ExtensionCategory } from '../constants';\nimport { getExtension } from '../registry/get';\nimport { print } from './print';\nimport { themeOf } from './theme';\n/**\n * <zh/> 创建动画代理，对一个动画实例的操作同步到多个动画实例上\n *\n * <en/> create animation proxy, synchronize animation to multiple animation instances\n * @param args1 - <zh/> 源动画实例 | <en/> source animation instance\n * @param args2 - <zh/> 目标动画实例 | <en/> target animation instance\n * @returns <zh/> 动画代理 | <en/> animation proxy\n */\nexport function createAnimationsProxy(args1, args2) {\n    if (Array.isArray(args1) && args1.length === 0)\n        return null;\n    const sourceAnimation = Array.isArray(args1) ? args1[0] : args1;\n    const targetAnimations = Array.isArray(args1) ? args1.slice(1) : args2 || [];\n    return new Proxy(sourceAnimation, {\n        get(target, propKey) {\n            if (typeof target[propKey] === 'function' && !['onframe', 'onfinish'].includes(propKey)) {\n                return (...args) => {\n                    target[propKey](...args);\n                    targetAnimations.forEach((animation) => { var _a; return (_a = animation[propKey]) === null || _a === void 0 ? void 0 : _a.call(animation, ...args); });\n                };\n            }\n            if (propKey === 'finished') {\n                return Promise.all([sourceAnimation.finished, ...targetAnimations.map((animation) => animation.finished)]);\n            }\n            return Reflect.get(target, propKey);\n        },\n        set(target, propKey, value) {\n            // onframe 和 onfinish 特殊处理，不用同步到所有动画实例上\n            // onframe and onfinish are specially processed and do not need to be synchronized to all animation instances\n            if (!['onframe', 'onfinish'].includes(propKey)) {\n                targetAnimations.forEach((animation) => {\n                    animation[propKey] = value;\n                });\n            }\n            return Reflect.set(target, propKey, value);\n        },\n    });\n}\n/**\n * <zh/> 预处理关键帧，过滤掉无用动画的属性\n *\n * <en/> Preprocess keyframes, filter out the properties of useless animations\n * @param keyframes - <zh/> 关键帧 | <en/> keyframes\n * @returns <zh/> 关键帧 | <en/> keyframes\n */\nexport function preprocessKeyframes(keyframes) {\n    // 转化为 PropertyIndexedKeyframes 格式方便后续处理\n    // convert to PropertyIndexedKeyframes format for subsequent processing\n    const propertyIndexedKeyframes = keyframes.reduce((acc, kf) => {\n        Object.entries(kf).forEach(([key, value]) => {\n            if (acc[key] === undefined)\n                acc[key] = [value];\n            else\n                acc[key].push(value);\n        });\n        return acc;\n    }, {});\n    // 过滤掉无用动画的属性（属性值为 undefined、或者值完全一致）\n    // filter out useless animation properties (property value is undefined, or value is exactly the same)\n    Object.entries(propertyIndexedKeyframes).forEach(([key, values]) => {\n        if (\n        // 属性值必须在每一帧都存在 / property value must exist in every frame\n        values.length !== keyframes.length ||\n            // 属性值不能为空 / property value cannot be empty\n            values.some((value) => isNil(value)) ||\n            // 属性值必须不完全一致 / property value must not be exactly the same\n            // 属性值可以是保留属性 / property value can be the reserved property\n            values.every((value) => !['sourceNode', 'targetNode', 'childrenNode'].includes(key) && isEqual(value, values[0]))) {\n            delete propertyIndexedKeyframes[key];\n        }\n    });\n    // 将 PropertyIndexedKeyframes 转化为 Keyframe 格式\n    // convert PropertyIndexedKeyframes to Keyframe format\n    const output = Object.entries(propertyIndexedKeyframes).reduce((acc, [key, values]) => {\n        values.forEach((value, index) => {\n            if (!acc[index])\n                acc[index] = { [key]: value };\n            else\n                acc[index][key] = value;\n        });\n        return acc;\n    }, []);\n    // 如果处理后所有的属性都被过滤掉，则添加一个没有实际作用的属性用于触发动画\n    // If all properties are filtered out after processing, add a property that has no actual effect to trigger the animation\n    if (keyframes.length !== 0 && output.length === 0)\n        output.push(...[{ _: 0 }, { _: 0 }]);\n    return output;\n}\n/**\n * <zh/> 获取属性的默认值\n *\n * <en/> Get default value of attribute\n * @param name - <zh/> 属性名 | <en/> Attribute name\n * @returns <zh/> 属性默认值 | <en/> Attribute default value\n * @remarks\n * <zh/> 执行动画过程中，一些属性没有显式指定属性值，但实际上在 G 中存在属性值，因此通过该方法获取其实际默认值\n *\n * <en/> During the animation, some attributes do not explicitly specify the attribute value, but in fact there is an attribute value in G, so use this method to get the actual default value\n */\nexport function inferDefaultValue(name) {\n    switch (name) {\n        case 'opacity':\n            return 1;\n        case 'x':\n        case 'y':\n        case 'z':\n        case 'zIndex':\n            return 0;\n        case 'visibility':\n            return 'visible';\n        case 'collapsed':\n            return false;\n        case 'states':\n            return [];\n        default:\n            return undefined;\n    }\n}\n/**\n * <zh/> 获取动画配置\n *\n * <en/> Get global animation configuration\n * @param options - <zh/> G6 配置项（用于获取全局动画配置） | <en/> G6 configuration(used to get global animation configuration)\n * @param localAnimation - <zh/> 局部动画配置 | <en/> local animation configuration\n * @returns <zh/> 动画配置 | <en/> animation configuration\n */\nexport function getAnimationOptions(options, localAnimation) {\n    const { animation } = options;\n    if (animation === false || localAnimation === false)\n        return false;\n    const effectTiming = Object.assign({}, DEFAULT_ANIMATION_OPTIONS);\n    if (isObject(animation))\n        Object.assign(effectTiming, animation);\n    if (isObject(localAnimation))\n        Object.assign(effectTiming, localAnimation);\n    return effectTiming;\n}\n/**\n * <zh/> 获取动画配置\n *\n * <en/> Get animation configuration\n * @param options - <zh/> 动画配置项 | <en/> animation configuration\n * @returns <zh/> 动画配置 | <en/> animation configuration\n */\nfunction animationOf(options) {\n    if (typeof options === 'string') {\n        const animation = getExtension(ExtensionCategory.ANIMATION, options);\n        if (animation)\n            return animation;\n        print.warn(`The animation of ${options} is not registered.`);\n        return [];\n    }\n    return options;\n}\n/**\n * <zh/> 获取元素的动画\n *\n * <en/> Get element animation\n * @param options - <zh/> G6 配置项 | <en/> G6 configuration\n * @param elementType - <zh/> 元素类型 | <en/> element type\n * @param stage - <zh/> 动画阶段 | <en/> animation stage\n * @param localAnimation - <zh/> 局部动画配置 | <en/> local animation configuration\n * @returns <zh/> 动画时序配置 | <en/> animation timing configuration\n */\nexport function getElementAnimationOptions(options, elementType, stage, localAnimation) {\n    var _a, _b;\n    const { animation: globalAnimation } = options;\n    if (globalAnimation === false || localAnimation === false)\n        return [];\n    const userElementAnimation = (_a = options === null || options === void 0 ? void 0 : options[elementType]) === null || _a === void 0 ? void 0 : _a.animation;\n    if (userElementAnimation === false)\n        return [];\n    const useElementStageAnimation = userElementAnimation === null || userElementAnimation === void 0 ? void 0 : userElementAnimation[stage];\n    if (useElementStageAnimation === false)\n        return [];\n    // 优先级：用户局部动画配置 > 用户动画配置 > 全局动画配置 > 主题动画配置 > 默认动画配置\n    // Priority: user local animation configuration > user animation configuration > global animation configuration > theme animation configuration > default animation configuration\n    const themeElementAnimation = (_b = themeOf(options)[elementType]) === null || _b === void 0 ? void 0 : _b.animation;\n    const combine = (_ = []) => animationOf(_).map((animation) => (Object.assign(Object.assign(Object.assign(Object.assign({}, DEFAULT_ELEMENTS_ANIMATION_OPTIONS), (isObject(globalAnimation) && globalAnimation)), animation), (isObject(localAnimation) && localAnimation))));\n    if (useElementStageAnimation)\n        return combine(useElementStageAnimation);\n    if (!themeElementAnimation)\n        return [];\n    // 此时取决于主题动画配置\n    // At this time, it depends on the theme animation configuration\n    const themeElementStageAnimation = themeElementAnimation[stage];\n    if (themeElementStageAnimation === false)\n        return [];\n    return combine(themeElementStageAnimation);\n}\n//# sourceMappingURL=animation.js.map","import { isNumber } from '@antv/util';\n/**\n * <zh/> 从 transform 字符串中替换 translate 部分\n *\n * <en/> replace the translate part from the transform string\n * @param x - <zh/> x | <en/> x\n * @param y - <zh/> y | <en/> y\n * @param z - <zh/> z | <en/> z\n * @param transform - <zh/> transform 字符串 | <en/> transform string\n * @returns <zh/> 替换后的 transform 字符串，返回 null 表示无需替换 | <en/> the replaced transform string, return null means no need to replace\n */\nexport function replaceTranslateInTransform(x, y, z, transform = []) {\n    if (!transform && x === 0 && y === 0 && z === 0)\n        return null;\n    if (Array.isArray(transform)) {\n        let translateIndex = -1;\n        const newTransform = [];\n        for (let i = 0; i < transform.length; i++) {\n            const t = transform[i];\n            if (t[0] === 'translate') {\n                if (t[1] === x && t[2] === y)\n                    return null;\n                translateIndex = i;\n                newTransform.push(['translate', x, y]);\n            }\n            else if (t[0] === 'translate3d') {\n                if (t[1] === x && t[2] === y && t[3] === z)\n                    return null;\n                translateIndex = i;\n                newTransform.push(['translate3d', x, y, z !== null && z !== void 0 ? z : 0]);\n            }\n            else {\n                newTransform.push(t);\n            }\n        }\n        if (translateIndex === -1) {\n            newTransform.splice(0, 0, isNumber(z) ? ['translate3d', x, y, z !== null && z !== void 0 ? z : 0] : ['translate', x, y]);\n        }\n        if (newTransform.length === 0)\n            return null;\n        return newTransform;\n    }\n    const removedTranslate = transform ? transform.replace(/translate(3d)?\\([^)]*\\)/g, '') : '';\n    if (z === 0) {\n        return `translate(${x}, ${y})${removedTranslate}`;\n    }\n    else {\n        return `translate3d(${x}, ${y}, ${z})${removedTranslate}`;\n    }\n}\n//# sourceMappingURL=transform.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { upperFirst } from '@antv/util';\nimport { createAnimationsProxy, inferDefaultValue, preprocessKeyframes } from '../utils/animation';\nimport { replaceTranslateInTransform } from '../utils/transform';\n/**\n * <zh/> 动画语法执行器\n *\n * <en/> Animation syntax executor\n * @param element - <zh/> 要执行动画的图形 | <en/> shape to execute animation\n * @param keyframes - <zh/> 动画关键帧 | <en/> animation keyframes\n * @param options - <zh/> 动画语法 | <en/> animation syntax\n * @returns <zh/> 动画实例 | <en/> animation instance\n */\nexport const executor = (element, keyframes, options) => {\n    if (!options.length)\n        return null;\n    const [originalStyle, modifiedStyle] = keyframes;\n    /**\n     * <zh/> 获取图形关键帧样式\n     *\n     * <en/> Get the keyframe style of the shape\n     * @param shapeID - <zh/> 图形 ID | <en/> shape ID\n     * @returns <zh/> 图形关键帧样式 | <en/> keyframe style of the shape\n     */\n    const getKeyframeStyle = (shapeID) => {\n        var _a;\n        if (shapeID) {\n            const shape = element.getShape(shapeID);\n            if (!shape)\n                return null;\n            const name = `get${upperFirst(shapeID)}Style`;\n            const styler = ((_a = element === null || element === void 0 ? void 0 : element[name]) === null || _a === void 0 ? void 0 : _a.bind(element)) || ((attrs) => attrs);\n            const fromStyle = (styler === null || styler === void 0 ? void 0 : styler(originalStyle)) || {};\n            const toStyle = (styler === null || styler === void 0 ? void 0 : styler(modifiedStyle)) || {};\n            return { shape, fromStyle, toStyle };\n        }\n        else {\n            const shape = element;\n            return { shape, fromStyle: originalStyle, toStyle: modifiedStyle };\n        }\n    };\n    let mainResult;\n    const subResults = options\n        .map((_a) => {\n        var { fields, shape: shapeID, states: enabledStates } = _a, effectTiming = __rest(_a, [\"fields\", \"shape\", \"states\"]);\n        const keyframeStyle = getKeyframeStyle(shapeID);\n        if (!keyframeStyle)\n            return null;\n        const { shape, fromStyle, toStyle } = keyframeStyle;\n        const keyframes = [{}, {}];\n        fields.forEach((attr) => {\n            var _a, _b;\n            Object.assign(keyframes[0], { [attr]: (_a = fromStyle[attr]) !== null && _a !== void 0 ? _a : inferDefaultValue(attr) });\n            Object.assign(keyframes[1], { [attr]: (_b = toStyle[attr]) !== null && _b !== void 0 ? _b : inferDefaultValue(attr) });\n        });\n        // x/y -> translate\n        if (keyframes.some((keyframe) => Object.keys(keyframe).some((attr) => ['x', 'y', 'z'].includes(attr)))) {\n            const { x = 0, y = 0, z, transform = '' } = shape.attributes || {};\n            keyframes.forEach((keyframe) => {\n                var _a, _b, _c;\n                // @ts-expect-error ignore type error\n                keyframe.transform = replaceTranslateInTransform((_a = keyframe.x) !== null && _a !== void 0 ? _a : x, (_b = keyframe.y) !== null && _b !== void 0 ? _b : y, (_c = keyframe.z) !== null && _c !== void 0 ? _c : z, transform);\n            });\n        }\n        const result = shape.animate(preprocessKeyframes(keyframes), effectTiming);\n        if (shapeID === undefined)\n            mainResult = result;\n        return result;\n    })\n        .filter(Boolean);\n    const result = mainResult || (subResults === null || subResults === void 0 ? void 0 : subResults[0]);\n    if (!result)\n        return null;\n    return createAnimationsProxy(result, subResults.filter((result) => result !== result));\n};\n//# sourceMappingURL=executor.js.map","/**\n * <zh/> 内置的动画元素。\n * <en/> Built-in animations.\n */\nexport { executor } from './executor';\nexport const Fade = [{ fields: ['opacity'] }];\nexport const Translate = [{ fields: ['x', 'y'] }];\nexport const NodeCollapse = [{ fields: ['x', 'y'] }];\nexport const NodeExpand = NodeCollapse;\nexport const PathIn = [{ fields: ['sourceNode', 'targetNode'] }];\nexport const PathOut = PathIn;\nexport const ComboCollapse = [{ fields: ['childrenNode', 'x', 'y'] }];\nexport const ComboExpand = ComboCollapse;\nexport const ComboCollapseExpand = [{ fields: ['childrenNode', 'x', 'y'] }];\n//# sourceMappingURL=index.js.map","import isArray from './is-array';\nimport isFunction from './is-function';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction groupBy(data, condition) {\n    if (!condition || !isArray(data)) {\n        return {};\n    }\n    var result = {};\n    // 兼容方法和 字符串的写法\n    var predicate = isFunction(condition) ? condition : function (item) { return item[condition]; };\n    var key;\n    for (var i = 0; i < data.length; i++) {\n        var item = data[i];\n        key = predicate(item);\n        if (hasOwnProperty.call(result, key)) {\n            result[key].push(item);\n        }\n        else {\n            result[key] = [item];\n        }\n    }\n    return result;\n}\nexport default groupBy;\n//# sourceMappingURL=group-by.js.map","/**\n * <zh/> 判断是否为边数据\n *\n * <en/> judge whether the data is edge data\n * @param data - <zh/> 元素数据 | <en/> element data\n * @returns - <zh/> 是否为边数据 | <en/> whether the data is edge data\n */\nexport function isEdgeData(data) {\n    if ('source' in data && 'target' in data)\n        return true;\n    return false;\n}\n/**\n * <zh/> 判断是否为二维向量\n *\n * <en/> Judge whether the vector is 2d\n * @param vector - <zh/> 向量 | <en/> vector\n * @returns <zh/> 是否为二维向量 | <en/> whether the vector is 2d\n */\nexport function isVector2(vector) {\n    return vector.length === 2;\n}\n/**\n * <zh/> 判断是否为三维向量\n *\n * <en/> Judge whether the vector is 3d\n * @param vector - <zh/> 向量 | <en/> vector\n * @returns <zh/> 是否为三维向量 | <en/> whether the vector is 3d\n */\nexport function isVector3(vector) {\n    return vector.length === 3;\n}\n/**\n * <zh/> 判断是否为点\n *\n * <en/> Judge whether the point is valid\n * @param p - <zh/> 点 | <en/> point\n * @returns <zh/> 是否为点 | <en/> whether the point is valid\n */\nexport function isPoint(p) {\n    if (p instanceof Float32Array)\n        return true;\n    if (Array.isArray(p) && (p.length === 2 || p.length === 3)) {\n        return p.every((elem) => typeof elem === 'number');\n    }\n    return false;\n}\n//# sourceMappingURL=is.js.map","/**\n * <zh/> 判断值是否在区间内\n *\n * <en/> Judge whether the value is in the interval\n * @param value - <zh/> 值 | <en/> value\n * @param min - <zh/> 最小值 | <en/> minimum value\n * @param max - <zh/> 最大值 | <en/> maximum value\n * @returns <zh/> 是否在区间内 | <en/> whether in the interval\n */\nexport function isBetween(value, min, max) {\n    return value >= min && value <= max;\n}\n//# sourceMappingURL=math.js.map","/**\n * <zh/> 解析 padding\n *\n * <en/> parse padding\n * @param padding - <zh/> padding | <en/> padding\n * @returns <zh/> 标准 padding | <en/> standard padding\n */\nexport function parsePadding(padding = 0) {\n    if (Array.isArray(padding)) {\n        const [top = 0, right = top, bottom = top, left = right] = padding;\n        return [top, right, bottom, left];\n    }\n    return [padding, padding, padding, padding];\n}\n/**\n * <zh/> 获取在垂直方向上的 padding\n *\n * <en/> get vertical padding\n * @param padding - <zh/> padding | <en/> padding\n * @returns <zh/> 垂直方向上的 padding | <en/> vertical padding\n */\nexport function getVerticalPadding(padding = 0) {\n    const parsedPadding = parsePadding(padding);\n    return parsedPadding[0] + parsedPadding[2];\n}\n/**\n * <zh/> 获取在水平方向上的 padding\n *\n * <en/> get horizontal padding\n * @param padding - <zh/> padding | <en/> padding\n * @returns <zh/> 水平方向上的 padding | <en/> horizontal padding\n */\nexport function getHorizontalPadding(padding = 0) {\n    const parsedPadding = parsePadding(padding);\n    return parsedPadding[1] + parsedPadding[3];\n}\n//# sourceMappingURL=padding.js.map","import { AABB } from '@antv/g';\nimport { clone } from '@antv/util';\nimport { isPoint } from './is';\nimport { isBetween } from './math';\nimport { parsePadding } from './padding';\n/**\n * <zh/> 获取包围盒的宽度\n *\n * <en/> Retrieves the width of a bounding box\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns <zh/> 包围盒的宽度 | <en/> Width of box\n */\nexport function getBBoxWidth(bbox) {\n    return bbox.max[0] - bbox.min[0];\n}\n/**\n * <zh/> 获取包围盒的高度\n *\n * <en/> Retrieve the height of a bounding box\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns <zh/> 包围盒的高度 | <en/> Height of box\n */\nexport function getBBoxHeight(bbox) {\n    return bbox.max[1] - bbox.min[1];\n}\n/**\n * <zh/> 获取包围盒的尺寸\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns <zh/> 包围盒的尺寸 | <en/> Size of box\n */\nexport function getBBoxSize(bbox) {\n    return [getBBoxWidth(bbox), getBBoxHeight(bbox)];\n}\n/**\n * <zh/> 获取节点的包围盒，兼容节点为点的情况\n *\n * <en/> Get the bounding box of the node, compatible with the case where the node is a point\n * @param node - <zh/> 节点或者点 | <en/> node or point\n * @param padding - <zh/> 内边距 | <en/> padding\n * @returns <zh/> 包围盒 | <en/> bounding box\n */\nexport function getNodeBBox(node, padding) {\n    const bbox = isPoint(node) ? getPointBBox(node) : node.getShape('key').getBounds();\n    return padding ? getExpandedBBox(bbox, padding) : bbox;\n}\n/**\n * <zh/> 获取单点的包围盒\n *\n * <en/> Get the bounding box of a single point\n * @param point - <zh/> 点 | <en/> Point\n * @returns <zh/> 包围盒 | <en/> Bounding box\n */\nexport function getPointBBox(point) {\n    const [x, y, z = 0] = point;\n    const bbox = new AABB();\n    bbox.setMinMax([x, y, z], [x, y, z]);\n    return bbox;\n}\n/**\n * <zh/> 获取扩大后的包围盒\n *\n * <en/> Get the expanded bounding box\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @returns <zh/> 扩大后的包围盒 | <en/> The expanded bounding box\n */\nexport function getExpandedBBox(bbox, padding) {\n    const [top, right, bottom, left] = parsePadding(padding);\n    const [minX, minY, minZ] = bbox.min;\n    const [maxX, maxY, maxZ] = bbox.max;\n    const eBbox = new AABB();\n    eBbox.setMinMax([minX - left, minY - top, minZ], [maxX + right, maxY + bottom, maxZ]);\n    return eBbox;\n}\n/**\n * <zh/> 计算整体包围盒\n *\n * <en/> Calculate the overall bounding box\n * @param bboxes - <zh/> 包围盒列表 | <en/> List of bounding boxes\n * @returns <zh/> 整体包围盒 | <en/> Overall bounding box\n */\nexport function getCombinedBBox(bboxes) {\n    if (bboxes.length === 0)\n        return new AABB();\n    if (bboxes.length === 1)\n        return bboxes[0];\n    const bbox = new AABB();\n    bbox.setMinMax(bboxes[0].min, bboxes[0].max);\n    for (let i = 1; i < bboxes.length; i++) {\n        const b2 = bboxes[i];\n        bbox.setMinMax([Math.min(bbox.min[0], b2.min[0]), Math.min(bbox.min[1], b2.min[1]), Math.min(bbox.min[2], b2.min[2])], [Math.max(bbox.max[0], b2.max[0]), Math.max(bbox.max[1], b2.max[1]), Math.max(bbox.max[2], b2.max[2])]);\n    }\n    return bbox;\n}\n/**\n * <zh/> 判断 bbox1 是否完全包含在 bbox2 内\n *\n * <en/> Determine whether bbox1 is completely contained in bbox2\n * @param bbox1 - <zh/> 目标包围盒 | <en/> Target bounding box\n * @param bbox2 - <zh/> 参考包围盒 | <en/> Reference bounding box\n * @returns <zh/> 如果 bbox1 完全包含在 bbox2 内返回 true，否则返回 false | <en/> Returns true if bbox1 is completely contained in bbox2, false otherwise\n */\nexport function isBBoxInside(bbox1, bbox2) {\n    const [minX1, minY1] = bbox1.min;\n    const [maxX1, maxY1] = bbox1.max;\n    const [minX2, minY2] = bbox2.min;\n    const [maxX2, maxY2] = bbox2.max;\n    return minX1 >= minX2 && maxX1 <= maxX2 && minY1 >= minY2 && maxY1 <= maxY2;\n}\n/**\n * <zh/> 判断点是否在给定的包围盒内\n *\n * <en/> Whether the point is contained in the given box\n * @param point - <zh/> 点 | <en/> Point\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns  <zh/> 如果点在包围盒内返回 true，否则返回 false | <en/> Returns true if the point is inside the bounding box, false otherwise\n */\nexport function isPointInBBox(point, bbox) {\n    return isBetween(point[0], bbox.min[0], bbox.max[0]) && isBetween(point[1], bbox.min[1], bbox.max[1]);\n}\n/**\n * <zh/> 判断点是否在给定的包围盒的边界或边界的延长线上\n *\n * <en/> Whether the point is on the boundary or extension line of the given box\n * @param point - <zh/> 点 | <en/> Point\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @param extended - <zh/> 是否判断边界的延长线 | <en/> Whether to judge the extension line of the boundary\n * @returns <zh/> 如果点在包围盒的边界或边界的延长线上返回 true，否则返回 false | <en/> Returns true if the point is on the boundary or extension line of the bounding box, false otherwise\n */\nexport function isPointOnBBoxBoundary(point, bbox, extended = false) {\n    const { min: [minX, minY], max: [maxX, maxY], } = bbox;\n    const onTopOrBottomLine = (point[1] === minY || point[1] === maxY) && (extended || isBetween(point[0], minX, maxX));\n    const onLeftOrRightLine = (point[0] === minX || point[0] === maxX) && (extended || isBetween(point[1], minY, maxY));\n    return onTopOrBottomLine || onLeftOrRightLine;\n}\n/**\n * <zh/> 判断点是否在给定的包围盒外\n *\n * <en/> Whether the point is outside the given box\n * @param point - <zh/> 点 | <en/> Point\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns <zh/> 如果点在包围盒外返回 true，否则返回 false | <en/> Returns true if the point is outside the bounding box, false otherwise\n */\nexport function isPointOutsideBBox(point, bbox) {\n    return !isPointInBBox(point, bbox);\n}\n/**\n * <zh/> 判断点是否位于包围盒中心\n *\n * <en/> When the point is at the center of the bounding box\n * @param point - <zh/> 点 | <en/> Point\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns <zh/> 如果点在包围盒中心返回 true，否则返回 false | <en/> Returns true if the point is at the center of the bounding box, false otherwise\n */\nexport function isPointBBoxCenter(point, bbox) {\n    const { center } = bbox;\n    return point[0] === center[0] && point[1] === center[1];\n}\n/**\n * <zh/> 获取包围盒上离点 `p` 最近的边\n *\n * <en/> Get a side of the boundary which is nearest to the point `p`\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @param p - <zh/> 点 | <en/> Point\n * @returns <zh/> 离点 `p` 最近的边 | <en/> The side nearest to the point `p`\n */\nexport function getNearestBoundarySide(p, bbox) {\n    const [x, y] = p;\n    const [minX, minY] = bbox.min;\n    const [maxX, maxY] = bbox.max;\n    const left = x - minX;\n    const right = maxX - x;\n    const top = y - minY;\n    const bottom = maxY - y;\n    const min = Math.min(left, right, top, bottom);\n    return min === left ? 'left' : min === right ? 'right' : min === top ? 'top' : min === bottom ? 'bottom' : 'left';\n}\n/**\n * <zh/> 获取包围盒上离点 `p` 最近的边界点\n *\n * <en/> Get a point on the boundary nearest to the point `p`\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @param p - <zh/> 点 | <en/> Point\n * @returns <zh/> 离点 `p` 最近的点 | <en/> The point nearest to the point `p`\n */\nexport function getNearestBoundaryPoint(p, bbox) {\n    const ref = clone(p);\n    if (isPointInBBox(p, bbox)) {\n        const side = getNearestBoundarySide(p, bbox);\n        switch (side) {\n            case 'left':\n                ref[0] = bbox.min[0];\n                break;\n            case 'right':\n                ref[0] = bbox.max[0];\n                break;\n            case 'top':\n                ref[1] = bbox.min[1];\n                break;\n            case 'bottom':\n                ref[1] = bbox.max[1];\n                break;\n        }\n    }\n    else {\n        const [x, y] = p;\n        const [minX, minY] = bbox.min;\n        const [maxX, maxY] = bbox.max;\n        ref[0] = isBetween(x, minX, maxX) ? x : x < minX ? minX : maxX;\n        ref[1] = isBetween(y, minY, maxY) ? y : y < minY ? minY : maxY;\n    }\n    return ref;\n}\n/**\n * The triangle center point of the bounding box\n * @param bbox - bounding box\n * @param direction - direction\n * @returns Point\n */\nexport function getTriangleCenter(bbox, direction) {\n    // todo 算法只对矩形有效\n    const { center } = bbox;\n    const [width, height] = getBBoxSize(bbox);\n    const x = direction === 'up' || direction === 'down'\n        ? center[0]\n        : direction === 'right'\n            ? center[0] - width / 6\n            : center[0] + width / 6;\n    const y = direction === 'left' || direction === 'right'\n        ? center[1]\n        : direction === 'down'\n            ? center[1] - height / 6\n            : center[1] + height / 6;\n    return [x, y];\n}\n/**\n * Get incircle radius\n * @param bbox - bounding box\n * @param direction - direction\n * @returns number\n */\nexport function getIncircleRadius(bbox, direction) {\n    let [w, h] = getBBoxSize(bbox);\n    [w, h] = direction === 'up' || direction === 'down' ? [w, h] : [h, w];\n    // 三角形的内切圆半径\n    return (Math.pow(h, 2) - Math.pow((Math.sqrt(Math.pow((w / 2), 2) + Math.pow(h, 2)) - w / 2), 2)) / (2 * h);\n}\n/**\n * <zh/> 获取包围盒的四条边，顺序依次为上、右、下、左\n *\n * <en/> Get the four segments of the bounding box, in order from top, right, bottom, left\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns <zh/> 包围盒的四条边 | <en/> The four segments of the bounding box\n */\nexport function getBBoxSegments(bbox) {\n    const { min: [minX, minY], max: [maxX, maxY], } = bbox;\n    const topLeftCorner = [minX, maxY];\n    const topRightCorner = [maxX, maxY];\n    const bottomRightCorner = [maxX, minY];\n    const bottomLeftCorner = [minX, minY];\n    const top = [topLeftCorner, topRightCorner];\n    const right = [topRightCorner, bottomRightCorner];\n    const bottom = [bottomRightCorner, bottomLeftCorner];\n    const left = [bottomLeftCorner, topLeftCorner];\n    return [top, right, bottom, left];\n}\n//# sourceMappingURL=bbox.js.map","var adjMatrix = function adjMatrix(graphData, directed) {\n  var nodes = graphData.nodes,\n    edges = graphData.edges;\n  var matrix = [];\n  // map node with index in data.nodes\n  var nodeMap = {};\n  if (!nodes) {\n    throw new Error(\"invalid nodes data!\");\n  }\n  if (nodes) {\n    nodes.forEach(function (node, i) {\n      nodeMap[node.id] = i;\n      var row = [];\n      matrix.push(row);\n    });\n  }\n  if (edges) {\n    edges.forEach(function (edge) {\n      var source = edge.source,\n        target = edge.target;\n      var sIndex = nodeMap[source];\n      var tIndex = nodeMap[target];\n      if (!sIndex && sIndex !== 0 || !tIndex && tIndex !== 0) return;\n      matrix[sIndex][tIndex] = 1;\n      if (!directed) {\n        matrix[tIndex][sIndex] = 1;\n      }\n    });\n  }\n  return matrix;\n};\nexport default adjMatrix;","var defaultComparator = function defaultComparator(a, b) {\n  if (a === b) {\n    return true;\n  }\n  return false;\n};\n/**\n * 链表中单个元素节点\n */\nvar LinkedListNode = /** @class */function () {\n  function LinkedListNode(value, next) {\n    if (next === void 0) {\n      next = null;\n    }\n    this.value = value;\n    this.next = next;\n  }\n  LinkedListNode.prototype.toString = function (callback) {\n    return callback ? callback(this.value) : \"\".concat(this.value);\n  };\n  return LinkedListNode;\n}();\nexport { LinkedListNode };\nvar LinkedList = /** @class */function () {\n  function LinkedList(comparator) {\n    if (comparator === void 0) {\n      comparator = defaultComparator;\n    }\n    this.head = null;\n    this.tail = null;\n    this.compare = comparator;\n  }\n  /**\n   * 将指定元素添加到链表头部\n   * @param value\n   */\n  LinkedList.prototype.prepend = function (value) {\n    // 在头部添加一个节点\n    var newNode = new LinkedListNode(value, this.head);\n    this.head = newNode;\n    if (!this.tail) {\n      this.tail = newNode;\n    }\n    return this;\n  };\n  /**\n   * 将指定元素添加到链表中\n   * @param value\n   */\n  LinkedList.prototype.append = function (value) {\n    var newNode = new LinkedListNode(value);\n    // 如果不存在头节点，则将创建的新节点作为头节点\n    if (!this.head) {\n      this.head = newNode;\n      this.tail = newNode;\n      return this;\n    }\n    // 将新节点附加到链表末尾\n    this.tail.next = newNode;\n    this.tail = newNode;\n    return this;\n  };\n  /**\n   * 删除指定元素\n   * @param value 要删除的元素\n   */\n  LinkedList.prototype.delete = function (value) {\n    if (!this.head) {\n      return null;\n    }\n    var deleteNode = null;\n    // 如果删除的是头部元素，则将next作为头元素\n    while (this.head && this.compare(this.head.value, value)) {\n      deleteNode = this.head;\n      this.head = this.head.next;\n    }\n    var currentNode = this.head;\n    if (currentNode !== null) {\n      // 如果删除了节点以后，将next节点前移\n      while (currentNode.next) {\n        if (this.compare(currentNode.next.value, value)) {\n          deleteNode = currentNode.next;\n          currentNode.next = currentNode.next.next;\n        } else {\n          currentNode = currentNode.next;\n        }\n      }\n    }\n    // 检查尾部节点是否被删除\n    if (this.compare(this.tail.value, value)) {\n      this.tail = currentNode;\n    }\n    return deleteNode;\n  };\n  /**\n   * 查找指定的元素\n   * @param param0\n   */\n  LinkedList.prototype.find = function (_a) {\n    var _b = _a.value,\n      value = _b === void 0 ? undefined : _b,\n      _c = _a.callback,\n      callback = _c === void 0 ? undefined : _c;\n    if (!this.head) {\n      return null;\n    }\n    var currentNode = this.head;\n    while (currentNode) {\n      // 如果指定了 callback，则按指定的 callback 查找\n      if (callback && callback(currentNode.value)) {\n        return currentNode;\n      }\n      // 如果指定了 value，则按 value 查找\n      if (value !== undefined && this.compare(currentNode.value, value)) {\n        return currentNode;\n      }\n      currentNode = currentNode.next;\n    }\n    return null;\n  };\n  /**\n   * 删除尾部节点\n   */\n  LinkedList.prototype.deleteTail = function () {\n    var deletedTail = this.tail;\n    if (this.head === this.tail) {\n      // 链表中只有一个元素\n      this.head = null;\n      this.tail = null;\n      return deletedTail;\n    }\n    var currentNode = this.head;\n    while (currentNode.next) {\n      if (!currentNode.next.next) {\n        currentNode.next = null;\n      } else {\n        currentNode = currentNode.next;\n      }\n    }\n    this.tail = currentNode;\n    return deletedTail;\n  };\n  /**\n   * 删除头部节点\n   */\n  LinkedList.prototype.deleteHead = function () {\n    if (!this.head) {\n      return null;\n    }\n    var deletedHead = this.head;\n    if (this.head.next) {\n      this.head = this.head.next;\n    } else {\n      this.head = null;\n      this.tail = null;\n    }\n    return deletedHead;\n  };\n  /**\n   * 将一组元素转成链表中的节点\n   * @param values 链表中的元素\n   */\n  LinkedList.prototype.fromArray = function (values) {\n    var _this = this;\n    values.forEach(function (value) {\n      return _this.append(value);\n    });\n    return this;\n  };\n  /**\n   * 将链表中的节点转成数组元素\n   */\n  LinkedList.prototype.toArray = function () {\n    var nodes = [];\n    var currentNode = this.head;\n    while (currentNode) {\n      nodes.push(currentNode);\n      currentNode = currentNode.next;\n    }\n    return nodes;\n  };\n  /**\n   * 反转链表中的元素节点\n   */\n  LinkedList.prototype.reverse = function () {\n    var currentNode = this.head;\n    var prevNode = null;\n    var nextNode = null;\n    while (currentNode) {\n      // 存储下一个元素节点\n      nextNode = currentNode.next;\n      // 更改当前节点的下一个节点，以便将它连接到上一个节点上\n      currentNode.next = prevNode;\n      // 将 prevNode 和 currentNode 向前移动一步\n      prevNode = currentNode;\n      currentNode = nextNode;\n    }\n    this.tail = this.head;\n    this.head = prevNode;\n  };\n  LinkedList.prototype.toString = function (callback) {\n    if (callback === void 0) {\n      callback = undefined;\n    }\n    return this.toArray().map(function (node) {\n      return node.toString(callback);\n    }).toString();\n  };\n  return LinkedList;\n}();\nexport default LinkedList;","/**\n * 获取指定节点的所有邻居\n * @param nodeId 节点 ID\n * @param edges 图中的所有边数据\n * @param type 邻居类型\n */\nexport var getNeighbors = function getNeighbors(nodeId, edges, type) {\n  if (edges === void 0) {\n    edges = [];\n  }\n  var currentEdges = edges.filter(function (edge) {\n    return edge.source === nodeId || edge.target === nodeId;\n  });\n  if (type === 'target') {\n    // 当前节点为 source，它所指向的目标节点\n    var neighhborsConverter_1 = function neighhborsConverter_1(edge) {\n      return edge.source === nodeId;\n    };\n    return currentEdges.filter(neighhborsConverter_1).map(function (edge) {\n      return edge.target;\n    });\n  }\n  if (type === 'source') {\n    // 当前节点为 target，它所指向的源节点\n    var neighhborsConverter_2 = function neighhborsConverter_2(edge) {\n      return edge.target === nodeId;\n    };\n    return currentEdges.filter(neighhborsConverter_2).map(function (edge) {\n      return edge.source;\n    });\n  }\n  // 若未指定 type ，则返回所有邻居\n  var neighhborsConverter = function neighhborsConverter(edge) {\n    return edge.source === nodeId ? edge.target : edge.source;\n  };\n  return currentEdges.map(neighhborsConverter);\n};\n/**\n * 获取指定节点的出边\n * @param nodeId 节点 ID\n * @param edges 图中的所有边数据\n */\nexport var getOutEdgesNodeId = function getOutEdgesNodeId(nodeId, edges) {\n  return edges.filter(function (edge) {\n    return edge.source === nodeId;\n  });\n};\n/**\n * 获取指定节点的边，包括出边和入边\n * @param nodeId 节点 ID\n * @param edges 图中的所有边数据\n */\nexport var getEdgesByNodeId = function getEdgesByNodeId(nodeId, edges) {\n  return edges.filter(function (edge) {\n    return edge.source === nodeId || edge.target === nodeId;\n  });\n};\n/**\n * 生成唯一的 ID，规则是序号 + 时间戳\n * @param index 序号\n */\nexport var uniqueId = function uniqueId(index) {\n  if (index === void 0) {\n    index = 0;\n  }\n  var random1 = \"\".concat(Math.random()).split('.')[1].substr(0, 5);\n  var random2 = \"\".concat(Math.random()).split('.')[1].substr(0, 5);\n  return \"\".concat(index, \"-\").concat(random1).concat(random2);\n};","import LinkedList from './linked-list';\nvar Queue = /** @class */function () {\n  function Queue() {\n    this.linkedList = new LinkedList();\n  }\n  /**\n   * 队列是否为空\n   */\n  Queue.prototype.isEmpty = function () {\n    return !this.linkedList.head;\n  };\n  /**\n   * 读取队列头部的元素， 不删除队列中的元素\n   */\n  Queue.prototype.peek = function () {\n    if (!this.linkedList.head) {\n      return null;\n    }\n    return this.linkedList.head.value;\n  };\n  /**\n   * 在队列的尾部新增一个元素\n   * @param value\n   */\n  Queue.prototype.enqueue = function (value) {\n    this.linkedList.append(value);\n  };\n  /**\n   * 删除队列中的头部元素，如果队列为空，则返回 null\n   */\n  Queue.prototype.dequeue = function () {\n    var removeHead = this.linkedList.deleteHead();\n    return removeHead ? removeHead.value : null;\n  };\n  Queue.prototype.toString = function (callback) {\n    return this.linkedList.toString(callback);\n  };\n  return Queue;\n}();\nexport default Queue;","var degree = function degree(graphData) {\n  var degrees = {};\n  var _a = graphData.nodes,\n    nodes = _a === void 0 ? [] : _a,\n    _b = graphData.edges,\n    edges = _b === void 0 ? [] : _b;\n  nodes.forEach(function (node) {\n    degrees[node.id] = {\n      degree: 0,\n      inDegree: 0,\n      outDegree: 0\n    };\n  });\n  edges.forEach(function (edge) {\n    degrees[edge.source].degree++;\n    degrees[edge.source].outDegree++;\n    degrees[edge.target].degree++;\n    degrees[edge.target].inDegree++;\n  });\n  return degrees;\n};\nexport default degree;\n/**\n * 获取指定节点的入度\n * @param graphData 图数据\n * @param nodeId 节点ID\n */\nexport var getInDegree = function getInDegree(graphData, nodeId) {\n  var nodeDegree = degree(graphData);\n  if (nodeDegree[nodeId]) {\n    return degree(graphData)[nodeId].inDegree;\n  }\n  return 0;\n};\n/**\n * 获取指定节点的出度\n * @param graphData 图数据\n * @param nodeId 节点ID\n */\nexport var getOutDegree = function getOutDegree(graphData, nodeId) {\n  var nodeDegree = degree(graphData);\n  if (nodeDegree[nodeId]) {\n    return degree(graphData)[nodeId].outDegree;\n  }\n  return 0;\n};","import dfs from './dfs';\nimport getConnectedComponents, { detectStrongConnectComponents } from './connected-component';\nimport { getNeighbors } from './util';\nvar detectDirectedCycle = function detectDirectedCycle(graphData) {\n  var cycle = null;\n  var _a = graphData.nodes,\n    nodes = _a === void 0 ? [] : _a;\n  var dfsParentMap = {};\n  // 所有没有被访问的节点集合\n  var unvisitedSet = {};\n  // 正在被访问的节点集合\n  var visitingSet = {};\n  // 所有已经被访问过的节点集合\n  var visitedSet = {};\n  // 初始化 unvisitedSet\n  nodes.forEach(function (node) {\n    unvisitedSet[node.id] = node;\n  });\n  var callbacks = {\n    enter: function enter(_a) {\n      var currentNode = _a.current,\n        previousNode = _a.previous;\n      if (visitingSet[currentNode]) {\n        // 如果当前节点正在访问中，则说明检测到环路了\n        cycle = {};\n        var currentCycleNode = currentNode;\n        var previousCycleNode = previousNode;\n        while (previousCycleNode !== currentNode) {\n          cycle[currentCycleNode] = previousCycleNode;\n          currentCycleNode = previousCycleNode;\n          previousCycleNode = dfsParentMap[previousCycleNode];\n        }\n        cycle[currentCycleNode] = previousCycleNode;\n      } else {\n        // 如果不存在正在访问集合中，则将其放入正在访问集合，并从未访问集合中删除\n        visitingSet[currentNode] = currentNode;\n        delete unvisitedSet[currentNode];\n        // 更新 DSF parents 列表\n        dfsParentMap[currentNode] = previousNode;\n      }\n    },\n    leave: function leave(_a) {\n      var currentNode = _a.current;\n      // 如果所有的节点的子节点都已经访问过了，则从正在访问集合中删除掉，并将其移入到已访问集合中，\n      // 同时也意味着当前节点的所有邻居节点都被访问过了\n      visitedSet[currentNode] = currentNode;\n      delete visitingSet[currentNode];\n    },\n    allowTraversal: function allowTraversal(_a) {\n      var nextNode = _a.next;\n      // 如果检测到环路则需要终止所有进一步的遍历，否则会导致无限循环遍历\n      if (cycle) {\n        return false;\n      }\n      // 仅允许遍历没有访问的节点，visitedSet 中的都已经访问过了\n      return !visitedSet[nextNode];\n    }\n  };\n  // 开始遍历节点\n  while (Object.keys(unvisitedSet).length) {\n    // 从第一个节点开始进行 DFS 遍历\n    var firsetUnVisitedKey = Object.keys(unvisitedSet)[0];\n    dfs(graphData, firsetUnVisitedKey, callbacks);\n  }\n  return cycle;\n};\n/**\n * 检测无向图中的所有Base cycles\n * refer: https://www.codeproject.com/Articles/1158232/Enumerating-All-Cycles-in-an-Undirected-Graph\n * @param graph\n * @param nodeIds 节点 ID 的数组\n * @param include 包含或排除指定的节点\n * @return [{[key: string]: INode}] 返回一组base cycles\n */\nexport var detectAllUndirectedCycle = function detectAllUndirectedCycle(graphData, nodeIds, include) {\n  var _a, _b;\n  if (include === void 0) {\n    include = true;\n  }\n  var allCycles = [];\n  var components = getConnectedComponents(graphData, false);\n  // loop through all connected components\n  for (var _i = 0, components_1 = components; _i < components_1.length; _i++) {\n    var component = components_1[_i];\n    if (!component.length) continue;\n    var root = component[0];\n    var rootId = root.id;\n    var stack = [root];\n    var parent_1 = (_a = {}, _a[rootId] = root, _a);\n    var used = (_b = {}, _b[rootId] = new Set(), _b);\n    // walk a spanning tree to find cycles\n    while (stack.length > 0) {\n      var curNode = stack.pop();\n      var curNodeId = curNode.id;\n      var neighbors = getNeighbors(curNodeId, graphData.edges);\n      var _loop_1 = function _loop_1(i) {\n        var _c;\n        var neighborId = neighbors[i];\n        var neighbor = graphData.nodes.find(function (node) {\n          return node.id === neighborId;\n        });\n        // const neighborId = neighbor.get('id');\n        if (neighborId === curNodeId) {\n          // 自环\n          allCycles.push((_c = {}, _c[neighborId] = curNode, _c));\n        } else if (!(neighborId in used)) {\n          // visit a new node\n          parent_1[neighborId] = curNode;\n          stack.push(neighbor);\n          used[neighborId] = new Set([curNode]);\n        } else if (!used[curNodeId].has(neighbor)) {\n          // a cycle found\n          var cycleValid = true;\n          var cyclePath = [neighbor, curNode];\n          var p = parent_1[curNodeId];\n          while (used[neighborId].size && !used[neighborId].has(p)) {\n            cyclePath.push(p);\n            if (p === parent_1[p.id]) break;else p = parent_1[p.id];\n          }\n          cyclePath.push(p);\n          if (nodeIds && include) {\n            // 如果有指定包含的节点\n            cycleValid = false;\n            if (cyclePath.findIndex(function (node) {\n              return nodeIds.indexOf(node.id) > -1;\n            }) > -1) {\n              cycleValid = true;\n            }\n          } else if (nodeIds && !include) {\n            // 如果有指定不包含的节点\n            if (cyclePath.findIndex(function (node) {\n              return nodeIds.indexOf(node.id) > -1;\n            }) > -1) {\n              cycleValid = false;\n            }\n          }\n          // 把 node list 形式转换为 cycle 的格式\n          if (cycleValid) {\n            var cycle = {};\n            for (var index = 1; index < cyclePath.length; index += 1) {\n              cycle[cyclePath[index - 1].id] = cyclePath[index];\n            }\n            if (cyclePath.length) {\n              cycle[cyclePath[cyclePath.length - 1].id] = cyclePath[0];\n            }\n            allCycles.push(cycle);\n          }\n          used[neighborId].add(curNode);\n        }\n      };\n      for (var i = 0; i < neighbors.length; i += 1) {\n        _loop_1(i);\n      }\n    }\n  }\n  return allCycles;\n};\n/**\n * Johnson's algorithm, 时间复杂度 O((V + E)(C + 1))$ and space bounded by O(V + E)\n * refer: https://www.cs.tufts.edu/comp/150GA/homeworks/hw1/Johnson%2075.PDF\n * refer: https://networkx.github.io/documentation/stable/_modules/networkx/algorithms/cycles.html#simple_cycles\n * @param graph\n * @param nodeIds 节点 ID 的数组\n * @param include 包含或排除指定的节点\n * @return [{[key: string]: INode}] 返回所有的 simple cycles\n */\nexport var detectAllDirectedCycle = function detectAllDirectedCycle(graphData, nodeIds, include) {\n  if (include === void 0) {\n    include = true;\n  }\n  var path = []; // stack of nodes in current path\n  var blocked = new Set();\n  var B = []; // remember portions of the graph that yield no elementary circuit\n  var allCycles = [];\n  var idx2Node = {};\n  var node2Idx = {};\n  // 辅助函数： unblock all blocked nodes\n  var unblock = function unblock(thisNode) {\n    var stack = [thisNode];\n    while (stack.length > 0) {\n      var node = stack.pop();\n      if (blocked.has(node)) {\n        blocked.delete(node);\n        B[node.id].forEach(function (n) {\n          stack.push(n);\n        });\n        B[node.id].clear();\n      }\n    }\n  };\n  var circuit = function circuit(node, start, adjList) {\n    var closed = false; // whether a path is closed\n    if (nodeIds && include === false && nodeIds.indexOf(node.id) > -1) return closed;\n    path.push(node);\n    blocked.add(node);\n    var neighbors = adjList[node.id];\n    for (var i = 0; i < neighbors.length; i += 1) {\n      var neighbor = idx2Node[neighbors[i]];\n      if (neighbor === start) {\n        var cycle = {};\n        for (var index = 1; index < path.length; index += 1) {\n          cycle[path[index - 1].id] = path[index];\n        }\n        if (path.length) {\n          cycle[path[path.length - 1].id] = path[0];\n        }\n        allCycles.push(cycle);\n        closed = true;\n      } else if (!blocked.has(neighbor)) {\n        if (circuit(neighbor, start, adjList)) {\n          closed = true;\n        }\n      }\n    }\n    if (closed) {\n      unblock(node);\n    } else {\n      for (var i = 0; i < neighbors.length; i += 1) {\n        var neighbor = idx2Node[neighbors[i]];\n        if (!B[neighbor.id].has(node)) {\n          B[neighbor.id].add(node);\n        }\n      }\n    }\n    path.pop();\n    return closed;\n  };\n  var _a = graphData.nodes,\n    nodes = _a === void 0 ? [] : _a;\n  // Johnson's algorithm 要求给节点赋顺序，先按节点在数组中的顺序\n  for (var i = 0; i < nodes.length; i += 1) {\n    var node = nodes[i];\n    var nodeId = node.id;\n    node2Idx[nodeId] = i;\n    idx2Node[i] = node;\n  }\n  // 如果有指定包含的节点，则把指定节点排序在前，以便提早结束搜索\n  if (nodeIds && include) {\n    var _loop_2 = function _loop_2(i) {\n      var nodeId = nodeIds[i];\n      node2Idx[nodes[i].id] = node2Idx[nodeId];\n      node2Idx[nodeId] = 0;\n      idx2Node[0] = nodes.find(function (node) {\n        return node.id === nodeId;\n      });\n      idx2Node[node2Idx[nodes[i].id]] = nodes[i];\n    };\n    for (var i = 0; i < nodeIds.length; i++) {\n      _loop_2(i);\n    }\n  }\n  // 返回 节点顺序 >= nodeOrder 的强连通分量的adjList\n  var getMinComponentAdj = function getMinComponentAdj(components) {\n    var _a;\n    var minCompIdx;\n    var minIdx = Infinity;\n    // Find least component and the lowest node\n    for (var i = 0; i < components.length; i += 1) {\n      var comp = components[i];\n      for (var j = 0; j < comp.length; j++) {\n        var nodeIdx_1 = node2Idx[comp[j].id];\n        if (nodeIdx_1 < minIdx) {\n          minIdx = nodeIdx_1;\n          minCompIdx = i;\n        }\n      }\n    }\n    var component = components[minCompIdx];\n    var adjList = [];\n    for (var i = 0; i < component.length; i += 1) {\n      var node = component[i];\n      adjList[node.id] = [];\n      for (var _i = 0, _b = getNeighbors(node.id, graphData.edges, 'target').filter(function (n) {\n          return component.map(function (c) {\n            return c.id;\n          }).indexOf(n) > -1;\n        }); _i < _b.length; _i++) {\n        var neighbor = _b[_i];\n        // 对自环情况 (点连向自身) 特殊处理：记录自环，但不加入adjList\n        if (neighbor === node.id && !(include === false && nodeIds.indexOf(node.id) > -1)) {\n          allCycles.push((_a = {}, _a[node.id] = node, _a));\n        } else {\n          adjList[node.id].push(node2Idx[neighbor]);\n        }\n      }\n    }\n    return {\n      component: component,\n      adjList: adjList,\n      minIdx: minIdx\n    };\n  };\n  var nodeIdx = 0;\n  while (nodeIdx < nodes.length) {\n    var subgraphNodes = nodes.filter(function (n) {\n      return node2Idx[n.id] >= nodeIdx;\n    });\n    var sccs = detectStrongConnectComponents({\n      nodes: subgraphNodes,\n      edges: graphData.edges\n    }).filter(function (component) {\n      return component.length > 1;\n    });\n    if (sccs.length === 0) break;\n    var scc = getMinComponentAdj(sccs);\n    var minIdx = scc.minIdx,\n      adjList = scc.adjList,\n      component = scc.component;\n    if (component.length > 1) {\n      component.forEach(function (node) {\n        B[node.id] = new Set();\n      });\n      var startNode = idx2Node[minIdx];\n      // startNode 不在指定要包含的节点中，提前结束搜索\n      if (nodeIds && include && nodeIds.indexOf(startNode.id) === -1) return allCycles;\n      circuit(startNode, startNode, adjList);\n      nodeIdx = minIdx + 1;\n    } else {\n      break;\n    }\n  }\n  return allCycles;\n};\n/**\n * 查找图中所有满足要求的圈\n * @param graph\n * @param directed 是否为有向图\n * @param nodeIds 节点 ID 的数组，若不指定，则返回图中所有的圈\n * @param include 包含或排除指定的节点\n * @return [{[key: string]: Node}] 包含所有环的数组，每个环用一个Object表示，其中key为节点id，value为该节点在环中指向的下一个节点\n */\nexport var detectAllCycles = function detectAllCycles(graphData, directed, nodeIds, include) {\n  if (include === void 0) {\n    include = true;\n  }\n  if (directed) return detectAllDirectedCycle(graphData, nodeIds, include);\n  return detectAllUndirectedCycle(graphData, nodeIds, include);\n};\nexport default detectDirectedCycle;","var toString = {}.toString;\nvar isType = function (value, type) { return toString.call(value) === '[object ' + type + ']'; };\nexport default isType;\n//# sourceMappingURL=is-type.js.map","/**\n * 是否为函数\n * @param  {*} fn 对象\n * @return {Boolean}  是否函数\n */\nimport isType from './is-type';\nexport default (function (value) {\n    return isType(value, 'Function');\n});\n//# sourceMappingURL=is-function.js.map","import isType from './is-type';\nexport default (function (value) {\n    return Array.isArray ?\n        Array.isArray(value) :\n        isType(value, 'Array');\n});\n//# sourceMappingURL=is-array.js.map","import isArray from './is-array';\nimport isObject from './is-object';\nfunction each(elements, func) {\n    if (!elements) {\n        return;\n    }\n    var rst;\n    if (isArray(elements)) {\n        for (var i = 0, len = elements.length; i < len; i++) {\n            rst = func(elements[i], i);\n            if (rst === false) {\n                break;\n            }\n        }\n    }\n    else if (isObject(elements)) {\n        for (var k in elements) {\n            if (elements.hasOwnProperty(k)) {\n                rst = func(elements[k], k);\n                if (rst === false) {\n                    break;\n                }\n            }\n        }\n    }\n}\nexport default each;\n//# sourceMappingURL=each.js.map","export default (function (value) {\n    /**\n     * isObject({}) => true\n     * isObject([1, 2, 3]) => true\n     * isObject(Function) => true\n     * isObject(null) => false\n     */\n    var type = typeof value;\n    return value !== null && type === 'object' || type === 'function';\n});\n//# sourceMappingURL=is-object.js.map","import each from './each';\nimport isFunction from './is-function';\nvar keys = Object.keys ? function (obj) { return Object.keys(obj); } : function (obj) {\n    var result = [];\n    each(obj, function (value, key) {\n        if (!(isFunction(obj) && key === 'prototype')) {\n            result.push(key);\n        }\n    });\n    return result;\n};\nexport default keys;\n//# sourceMappingURL=keys.js.map","import isFunction from './is-function';\nimport isMatch from './is-match';\nimport isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nfunction find(arr, predicate) {\n    if (!isArray(arr))\n        return null;\n    var _predicate;\n    if (isFunction(predicate)) {\n        _predicate = predicate;\n    }\n    if (isPlainObject(predicate)) {\n        _predicate = function (a) { return isMatch(a, predicate); };\n    }\n    if (_predicate) {\n        for (var i = 0; i < arr.length; i += 1) {\n            if (_predicate(arr[i])) {\n                return arr[i];\n            }\n        }\n    }\n    return null;\n}\nexport default find;\n//# sourceMappingURL=find.js.map","var arrPrototype = Array.prototype;\nvar splice = arrPrototype.splice;\nvar indexOf = arrPrototype.indexOf;\nvar pull = function (arr) {\n    var values = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        values[_i - 1] = arguments[_i];\n    }\n    for (var i = 0; i < values.length; i++) {\n        var value = values[i];\n        var fromIndex = -1;\n        while ((fromIndex = indexOf.call(arr, value)) > -1) {\n            splice.call(arr, fromIndex, 1);\n        }\n    }\n    return arr;\n};\nexport default pull;\n//# sourceMappingURL=pull.js.map","import isType from './is-type';\nexport default (function (str) {\n    return isType(str, 'String');\n});\n//# sourceMappingURL=is-string.js.map","import isArrayLike from './is-array-like';\nvar splice = Array.prototype.splice;\nvar pullAt = function pullAt(arr, indexes) {\n    if (!isArrayLike(arr)) {\n        return [];\n    }\n    var length = arr ? indexes.length : 0;\n    var last = length - 1;\n    while (length--) {\n        var previous = void 0;\n        var index = indexes[length];\n        if (length === last || index !== previous) {\n            previous = index;\n            splice.call(arr, index, 1);\n        }\n    }\n    return arr;\n};\nexport default pullAt;\n//# sourceMappingURL=pull-at.js.map","import isArray from './is-array';\nimport isFunction from './is-function';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction groupBy(data, condition) {\n    if (!condition || !isArray(data)) {\n        return {};\n    }\n    var result = {};\n    // 兼容方法和 字符串的写法\n    var predicate = isFunction(condition) ? condition : function (item) { return item[condition]; };\n    var key;\n    for (var i = 0; i < data.length; i++) {\n        var item = data[i];\n        key = predicate(item);\n        if (hasOwnProperty.call(result, key)) {\n            result[key].push(item);\n        }\n        else {\n            result[key] = [item];\n        }\n    }\n    return result;\n}\nexport default groupBy;\n//# sourceMappingURL=group-by.js.map","import isArray from './is-array';\nfunction parseRadius(radius) {\n    var r1 = 0, r2 = 0, r3 = 0, r4 = 0;\n    if (isArray(radius)) {\n        if (radius.length === 1) {\n            r1 = r2 = r3 = r4 = radius[0];\n        }\n        else if (radius.length === 2) {\n            r1 = r3 = radius[0];\n            r2 = r4 = radius[1];\n        }\n        else if (radius.length === 3) {\n            r1 = radius[0];\n            r2 = r4 = radius[1];\n            r3 = radius[2];\n        }\n        else {\n            r1 = radius[0];\n            r2 = radius[1];\n            r3 = radius[2];\n            r4 = radius[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = radius;\n    }\n    return {\n        r1: r1,\n        r2: r2,\n        r3: r3,\n        r4: r4\n    };\n}\nexport default parseRadius;\n//# sourceMappingURL=parse-radius.js.map","/**\n * 判断是否数字\n * @return {Boolean} 是否数字\n */\nimport isType from './is-type';\nvar isNumber = function (value) {\n    return isType(value, 'Number');\n};\nexport default isNumber;\n//# sourceMappingURL=is-number.js.map","import each from './each';\nimport isFunction from './is-function';\n// @ts-ignore\nvar values = Object.values ? function (obj) { return Object.values(obj); } : function (obj) {\n    var result = [];\n    each(obj, function (value, key) {\n        if (!(isFunction(obj) && key === 'prototype')) {\n            result.push(value);\n        }\n    });\n    return result;\n};\nexport default values;\n//# sourceMappingURL=values.js.map","import isNumber from './is-number';\nvar isInteger = Number.isInteger ? Number.isInteger : function (num) {\n    return isNumber(num) && num % 1 === 0;\n};\nexport default isInteger;\n//# sourceMappingURL=is-integer.js.map","var DEGREE = 180 / Math.PI;\nvar toDegree = function (radian) {\n    return DEGREE * radian;\n};\nexport default toDegree;\n//# sourceMappingURL=to-degree.js.map","var RADIAN = Math.PI / 180;\nvar toRadian = function (degree) {\n    return RADIAN * degree;\n};\nexport default toRadian;\n//# sourceMappingURL=to-radian.js.map","var objectProto = Object.prototype;\nvar isPrototype = function (value) {\n    var Ctor = value && value.constructor;\n    var proto = (typeof Ctor === 'function' && Ctor.prototype) || objectProto;\n    return value === proto;\n};\nexport default isPrototype;\n//# sourceMappingURL=is-prototype.js.map","import isArray from './is-array';\nvar clone = function (obj) {\n    if (typeof obj !== 'object' || obj === null) {\n        return obj;\n    }\n    var rst;\n    if (isArray(obj)) {\n        rst = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n            if (typeof obj[i] === 'object' && obj[i] != null) {\n                rst[i] = clone(obj[i]);\n            }\n            else {\n                rst[i] = obj[i];\n            }\n        }\n    }\n    else {\n        rst = {};\n        for (var k in obj) {\n            if (typeof obj[k] === 'object' && obj[k] != null) {\n                rst[k] = clone(obj[k]);\n            }\n            else {\n                rst[k] = obj[k];\n            }\n        }\n    }\n    return rst;\n};\nexport default clone;\n//# sourceMappingURL=clone.js.map","import isNil from './is-nil';\nimport isArrayLike from './is-array-like';\nimport getType from './get-type';\nimport isPrototype from './is-prototype';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction isEmpty(value) {\n    /**\n     * isEmpty(null) => true\n     * isEmpty() => true\n     * isEmpty(true) => true\n     * isEmpty(1) => true\n     * isEmpty([1, 2, 3]) => false\n     * isEmpty('abc') => false\n     * isEmpty({ a: 1 }) => false\n     */\n    if (isNil(value)) {\n        return true;\n    }\n    if (isArrayLike(value)) {\n        return !value.length;\n    }\n    var type = getType(value);\n    if (type === 'Map' || type === 'Set') {\n        return !value.size;\n    }\n    if (isPrototype(value)) {\n        return !Object.keys(value).length;\n    }\n    for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n            return false;\n        }\n    }\n    return true;\n}\nexport default isEmpty;\n//# sourceMappingURL=is-empty.js.map","import each from './each';\nimport isPlainObject from './is-plain-object';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nexport default (function (object, keys) {\n    if (object === null || !isPlainObject(object)) {\n        return {};\n    }\n    var result = {};\n    each(keys, function (key) {\n        if (hasOwnProperty.call(object, key)) {\n            result[key] = object[key];\n        }\n    });\n    return result;\n});\n//# sourceMappingURL=pick.js.map","import isFunction from './is-function';\n/**\n * _.memoize(calColor);\n * _.memoize(calColor, (...args) => args[0]);\n * @param f\n * @param resolver\n */\nexport default (function (f, resolver) {\n    if (!isFunction(f)) {\n        throw new TypeError('Expected a function');\n    }\n    var memoized = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        // 使用方法构造 key，如果不存在 resolver，则直接取第一个参数作为 key\n        var key = resolver ? resolver.apply(this, args) : args[0];\n        var cache = memoized.cache;\n        if (cache.has(key)) {\n            return cache.get(key);\n        }\n        var result = f.apply(this, args);\n        // 缓存起来\n        cache.set(key, result);\n        return result;\n    };\n    memoized.cache = new Map();\n    return memoized;\n});\n//# sourceMappingURL=memoize.js.map","import { __spreadArrays } from \"tslib\";\nimport values from './values';\nimport memoize from './memoize';\nimport isString from './is-string';\nvar ctx;\n/**\n * 计算文本的宽度\n */\nexport default memoize(function (text, font) {\n    if (font === void 0) { font = {}; }\n    var fontSize = font.fontSize, fontFamily = font.fontFamily, fontWeight = font.fontWeight, fontStyle = font.fontStyle, fontVariant = font.fontVariant;\n    if (!ctx) {\n        ctx = document.createElement('canvas').getContext('2d');\n    }\n    ctx.font = [fontStyle, fontVariant, fontWeight, fontSize + \"px\", fontFamily].join(' ');\n    return ctx.measureText(isString(text) ? text : '').width;\n}, function (text, font) {\n    if (font === void 0) { font = {}; }\n    return __spreadArrays([text], values(font)).join('');\n});\n//# sourceMappingURL=measure-text-width.js.map","/**\n * k-v 存储\n */\nvar default_1 = /** @class */ (function () {\n    function default_1() {\n        this.map = {};\n    }\n    default_1.prototype.has = function (key) {\n        return this.map[key] !== undefined;\n    };\n    default_1.prototype.get = function (key, def) {\n        var v = this.map[key];\n        return v === undefined ? def : v;\n    };\n    default_1.prototype.set = function (key, value) {\n        this.map[key] = value;\n    };\n    default_1.prototype.clear = function () {\n        this.map = {};\n    };\n    default_1.prototype.delete = function (key) {\n        delete this.map[key];\n    };\n    default_1.prototype.size = function () {\n        return Object.keys(this.map).length;\n    };\n    return default_1;\n}());\nexport default default_1;\n//# sourceMappingURL=cache.js.map","import { __spreadArray } from \"tslib\";\nimport { isArray } from '@antv/util';\nimport { getOutEdgesNodeId, getEdgesByNodeId } from './util';\nvar minVertex = function minVertex(D, nodes, marks) {\n  // 找出最小的点\n  var minDis = Infinity;\n  var minNode;\n  for (var i = 0; i < nodes.length; i++) {\n    var nodeId = nodes[i].id;\n    if (!marks[nodeId] && D[nodeId] <= minDis) {\n      minDis = D[nodeId];\n      minNode = nodes[i];\n    }\n  }\n  return minNode;\n};\nvar dijkstra = function dijkstra(graphData, source, directed, weightPropertyName) {\n  var _a = graphData.nodes,\n    nodes = _a === void 0 ? [] : _a,\n    _b = graphData.edges,\n    edges = _b === void 0 ? [] : _b;\n  var nodeIds = [];\n  var marks = {};\n  var D = {};\n  var prevs = {}; // key: 顶点, value: 顶点的前驱点数组（可能有多条等长的最短路径）\n  nodes.forEach(function (node, i) {\n    var id = node.id;\n    nodeIds.push(id);\n    D[id] = Infinity;\n    if (id === source) D[id] = 0;\n  });\n  var nodeNum = nodes.length;\n  var _loop_1 = function _loop_1(i) {\n    // Process the vertices\n    var minNode = minVertex(D, nodes, marks);\n    var minNodeId = minNode.id;\n    marks[minNodeId] = true;\n    if (D[minNodeId] === Infinity) return \"continue\"; // Unreachable vertices cannot be the intermediate point\n    var relatedEdges = [];\n    if (directed) relatedEdges = getOutEdgesNodeId(minNodeId, edges);else relatedEdges = getEdgesByNodeId(minNodeId, edges);\n    relatedEdges.forEach(function (edge) {\n      var edgeTarget = edge.target;\n      var edgeSource = edge.source;\n      var w = edgeTarget === minNodeId ? edgeSource : edgeTarget;\n      var weight = weightPropertyName && edge[weightPropertyName] ? edge[weightPropertyName] : 1;\n      if (D[w] > D[minNode.id] + weight) {\n        D[w] = D[minNode.id] + weight;\n        prevs[w] = [minNode.id];\n      } else if (D[w] === D[minNode.id] + weight) {\n        prevs[w].push(minNode.id);\n      }\n    });\n  };\n  for (var i = 0; i < nodeNum; i++) {\n    _loop_1(i);\n  }\n  prevs[source] = [source];\n  // 每个节点存可能存在多条最短路径\n  var paths = {};\n  for (var target in D) {\n    if (D[target] !== Infinity) {\n      findAllPaths(source, target, prevs, paths);\n    }\n  }\n  // 兼容之前单路径\n  var path = {};\n  for (var target in paths) {\n    path[target] = paths[target][0];\n  }\n  return {\n    length: D,\n    path: path,\n    allPath: paths\n  };\n};\nexport default dijkstra;\nfunction findAllPaths(source, target, prevs, foundPaths) {\n  if (source === target) {\n    return [source];\n  }\n  if (foundPaths[target]) {\n    return foundPaths[target];\n  }\n  var paths = [];\n  for (var _i = 0, _a = prevs[target]; _i < _a.length; _i++) {\n    var prev = _a[_i];\n    var prevPaths = findAllPaths(source, prev, prevs, foundPaths);\n    if (!prevPaths) return;\n    for (var _b = 0, prevPaths_1 = prevPaths; _b < prevPaths_1.length; _b++) {\n      var prePath = prevPaths_1[_b];\n      if (isArray(prePath)) paths.push(__spreadArray(__spreadArray([], prePath, true), [target], false));else paths.push([prePath, target]);\n    }\n  }\n  foundPaths[target] = paths;\n  return foundPaths[target];\n}","import dijkstra from './dijkstra';\nimport { getNeighbors } from './util';\nexport var findShortestPath = function findShortestPath(graphData, start, end, directed, weightPropertyName) {\n  var _a = dijkstra(graphData, start, directed, weightPropertyName),\n    length = _a.length,\n    path = _a.path,\n    allPath = _a.allPath;\n  return {\n    length: length[end],\n    path: path[end],\n    allPath: allPath[end]\n  };\n};\nexport var findAllPath = function findAllPath(graphData, start, end, directed) {\n  var _a;\n  if (start === end) return [[start]];\n  var _b = graphData.edges,\n    edges = _b === void 0 ? [] : _b;\n  var visited = [start];\n  var isVisited = (_a = {}, _a[start] = true, _a);\n  var stack = []; // 辅助栈，用于存储访问过的节点的邻居节点\n  var allPath = [];\n  var neighbors = directed ? getNeighbors(start, edges, 'target') : getNeighbors(start, edges);\n  stack.push(neighbors);\n  while (visited.length > 0 && stack.length > 0) {\n    var children = stack[stack.length - 1];\n    if (children.length) {\n      var child = children.shift();\n      if (child) {\n        visited.push(child);\n        isVisited[child] = true;\n        neighbors = directed ? getNeighbors(child, edges, 'target') : getNeighbors(child, edges);\n        stack.push(neighbors.filter(function (neighbor) {\n          return !isVisited[neighbor];\n        }));\n      }\n    } else {\n      var node = visited.pop();\n      isVisited[node] = false;\n      stack.pop();\n      continue;\n    }\n    if (visited[visited.length - 1] === end) {\n      var path = visited.map(function (node) {\n        return node;\n      });\n      allPath.push(path);\n      var node = visited.pop();\n      isVisited[node] = false;\n      stack.pop();\n    }\n  }\n  return allPath;\n};","export var DistanceType;\n(function (DistanceType) {\n  DistanceType[\"EuclideanDistance\"] = \"euclideanDistance\";\n})(DistanceType || (DistanceType = {}));","/**\n * 向量运算\n */\nimport { clone } from '@antv/util';\nvar Vector = /** @class */function () {\n  function Vector(arr) {\n    this.arr = arr;\n  }\n  Vector.prototype.getArr = function () {\n    return this.arr || [];\n  };\n  Vector.prototype.add = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length)) {\n      return new Vector(otherArr);\n    }\n    if (!(otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return new Vector(this.arr);\n    }\n    if (this.arr.length === otherArr.length) {\n      var res = [];\n      for (var index in this.arr) {\n        res[index] = this.arr[index] + otherArr[index];\n      }\n      return new Vector(res);\n    }\n  };\n  Vector.prototype.subtract = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length)) {\n      return new Vector(otherArr);\n    }\n    if (!(otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return new Vector(this.arr);\n    }\n    if (this.arr.length === otherArr.length) {\n      var res = [];\n      for (var index in this.arr) {\n        res[index] = this.arr[index] - otherArr[index];\n      }\n      return new Vector(res);\n    }\n  };\n  Vector.prototype.avg = function (length) {\n    var res = [];\n    if (length !== 0) {\n      for (var index in this.arr) {\n        res[index] = this.arr[index] / length;\n      }\n    }\n    return new Vector(res);\n  };\n  Vector.prototype.negate = function () {\n    var res = [];\n    for (var index in this.arr) {\n      res[index] = -this.arr[index];\n    }\n    return new Vector(res);\n  };\n  // 平方欧式距离\n  Vector.prototype.squareEuclideanDistance = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length) || !(otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return 0;\n    }\n    if (this.arr.length === otherArr.length) {\n      var res = 0;\n      for (var index in this.arr) {\n        res += Math.pow(this.arr[index] - otherVector.arr[index], 2);\n      }\n      return res;\n    }\n  };\n  // 欧式距离\n  Vector.prototype.euclideanDistance = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length) || !(otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return 0;\n    }\n    if (this.arr.length === otherArr.length) {\n      var res = 0;\n      for (var index in this.arr) {\n        res += Math.pow(this.arr[index] - otherVector.arr[index], 2);\n      }\n      return Math.sqrt(res);\n    } else {\n      console.error('The two vectors are unequal in length.');\n    }\n  };\n  // 归一化处理\n  Vector.prototype.normalize = function () {\n    var res = [];\n    var cloneArr = clone(this.arr);\n    cloneArr.sort(function (a, b) {\n      return a - b;\n    });\n    var max = cloneArr[cloneArr.length - 1];\n    var min = cloneArr[0];\n    for (var index in this.arr) {\n      res[index] = (this.arr[index] - min) / (max - min);\n    }\n    return new Vector(res);\n  };\n  // 2范数 or 模长\n  Vector.prototype.norm2 = function () {\n    var _a;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length)) {\n      return 0;\n    }\n    var res = 0;\n    for (var index in this.arr) {\n      res += Math.pow(this.arr[index], 2);\n    }\n    return Math.sqrt(res);\n  };\n  // 两个向量的点积\n  Vector.prototype.dot = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length) || !(otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return 0;\n    }\n    if (this.arr.length === otherArr.length) {\n      var res = 0;\n      for (var index in this.arr) {\n        res += this.arr[index] * otherVector.arr[index];\n      }\n      return res;\n    } else {\n      console.error('The two vectors are unequal in length.');\n    }\n  };\n  // 两个向量比较\n  Vector.prototype.equal = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length) !== (otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return false;\n    }\n    for (var index in this.arr) {\n      if (this.arr[index] !== otherArr[index]) {\n        return false;\n      }\n    }\n    return true;\n  };\n  return Vector;\n}();\nexport default Vector;","/**\n * 并查集 Disjoint set to support quick union\n */\nvar UnionFind = /** @class */function () {\n  function UnionFind(items) {\n    this.count = items.length;\n    this.parent = {};\n    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n      var i = items_1[_i];\n      this.parent[i] = i;\n    }\n  }\n  // find the root of the item\n  UnionFind.prototype.find = function (item) {\n    while (this.parent[item] !== item) {\n      item = this.parent[item];\n    }\n    return item;\n  };\n  UnionFind.prototype.union = function (a, b) {\n    var rootA = this.find(a);\n    var rootB = this.find(b);\n    if (rootA === rootB) return;\n    // make the element with smaller root the parent\n    if (rootA < rootB) {\n      if (this.parent[b] !== b) this.union(this.parent[b], a);\n      this.parent[b] = this.parent[a];\n    } else {\n      if (this.parent[a] !== a) this.union(this.parent[a], b);\n      this.parent[a] = this.parent[b];\n    }\n  };\n  // whether a and b are connected, i.e. a and b have the same root\n  UnionFind.prototype.connected = function (a, b) {\n    return this.find(a) === this.find(b);\n  };\n  return UnionFind;\n}();\nexport default UnionFind;","import { uniq } from '@antv/util';\nimport { DistanceType } from '../types';\nimport Vector from './vector';\n/**\n * 获取数据中所有的属性及其对应的值\n * @param dataList 数据集\n * @param involvedKeys 参与计算的key集合\n * @param uninvolvedKeys 不参与计算的key集合\n */\nexport var getAllKeyValueMap = function getAllKeyValueMap(dataList, involvedKeys, uninvolvedKeys) {\n  var keys = [];\n  // 指定了参与计算的keys时，使用指定的keys\n  if (involvedKeys === null || involvedKeys === void 0 ? void 0 : involvedKeys.length) {\n    keys = involvedKeys;\n  } else {\n    // 未指定抽取的keys时，提取数据中所有的key\n    dataList.forEach(function (data) {\n      keys = keys.concat(Object.keys(data));\n    });\n    keys = uniq(keys);\n  }\n  // 获取所有值非空的key的value数组\n  var allKeyValueMap = {};\n  keys.forEach(function (key) {\n    var value = [];\n    dataList.forEach(function (data) {\n      if (data[key] !== undefined && data[key] !== '') {\n        value.push(data[key]);\n      }\n    });\n    if (value.length && !(uninvolvedKeys === null || uninvolvedKeys === void 0 ? void 0 : uninvolvedKeys.includes(key))) {\n      allKeyValueMap[key] = uniq(value);\n    }\n  });\n  return allKeyValueMap;\n};\n/**\n * one-hot编码：数据特征提取\n * @param dataList 数据集\n * @param involvedKeys 参与计算的的key集合\n * @param uninvolvedKeys 不参与计算的key集合\n */\nexport var oneHot = function oneHot(dataList, involvedKeys, uninvolvedKeys) {\n  // 获取数据中所有的属性/特征及其对应的值\n  var allKeyValueMap = getAllKeyValueMap(dataList, involvedKeys, uninvolvedKeys);\n  var oneHotCode = [];\n  if (!Object.keys(allKeyValueMap).length) {\n    return oneHotCode;\n  }\n  // 获取所有的属性/特征值\n  var allValue = Object.values(allKeyValueMap);\n  // 是否所有属性/特征的值都是数值型\n  var isAllNumber = allValue.every(function (value) {\n    return value.every(function (item) {\n      return typeof item === 'number';\n    });\n  });\n  // 对数据进行one-hot编码\n  dataList.forEach(function (data, index) {\n    var code = [];\n    Object.keys(allKeyValueMap).forEach(function (key) {\n      var keyValue = data[key];\n      var allKeyValue = allKeyValueMap[key];\n      var valueIndex = allKeyValue.findIndex(function (value) {\n        return keyValue === value;\n      });\n      var subCode = [];\n      // 如果属性/特征所有的值都能转成数值型，不满足分箱，则直接用值（todo: 为了收敛更快，需做归一化处理）\n      if (isAllNumber) {\n        subCode.push(keyValue);\n      } else {\n        // 进行one-hot编码\n        for (var i = 0; i < allKeyValue.length; i++) {\n          if (i === valueIndex) {\n            subCode.push(1);\n          } else {\n            subCode.push(0);\n          }\n        }\n      }\n      code = code.concat(subCode);\n    });\n    oneHotCode[index] = code;\n  });\n  return oneHotCode;\n};\n/**\n * getDistance：获取两个元素之间的距离\n * @param item\n * @param otherItem\n * @param distanceType 距离类型\n * @param graphData 图数据\n */\nexport var getDistance = function getDistance(item, otherItem, distanceType, graphData) {\n  if (distanceType === void 0) {\n    distanceType = DistanceType.EuclideanDistance;\n  }\n  var distance = 0;\n  switch (distanceType) {\n    case DistanceType.EuclideanDistance:\n      distance = new Vector(item).euclideanDistance(new Vector(otherItem));\n      break;\n    default:\n      break;\n  }\n  return distance;\n};\nexport default {\n  getAllKeyValueMap: getAllKeyValueMap,\n  oneHot: oneHot,\n  getDistance: getDistance\n};","var defaultCompare = function defaultCompare(a, b) {\n  return a - b;\n};\nvar MinBinaryHeap = /** @class */function () {\n  function MinBinaryHeap(compareFn) {\n    if (compareFn === void 0) {\n      compareFn = defaultCompare;\n    }\n    this.compareFn = compareFn;\n    this.list = [];\n  }\n  MinBinaryHeap.prototype.getLeft = function (index) {\n    return 2 * index + 1;\n  };\n  MinBinaryHeap.prototype.getRight = function (index) {\n    return 2 * index + 2;\n  };\n  MinBinaryHeap.prototype.getParent = function (index) {\n    if (index === 0) {\n      return null;\n    }\n    return Math.floor((index - 1) / 2);\n  };\n  MinBinaryHeap.prototype.isEmpty = function () {\n    return this.list.length <= 0;\n  };\n  MinBinaryHeap.prototype.top = function () {\n    return this.isEmpty() ? undefined : this.list[0];\n  };\n  MinBinaryHeap.prototype.delMin = function () {\n    var top = this.top();\n    var bottom = this.list.pop();\n    if (this.list.length > 0) {\n      this.list[0] = bottom;\n      this.moveDown(0);\n    }\n    return top;\n  };\n  MinBinaryHeap.prototype.insert = function (value) {\n    if (value !== null) {\n      this.list.push(value);\n      var index = this.list.length - 1;\n      this.moveUp(index);\n      return true;\n    }\n    return false;\n  };\n  MinBinaryHeap.prototype.moveUp = function (index) {\n    var parent = this.getParent(index);\n    while (index && index > 0 && this.compareFn(this.list[parent], this.list[index]) > 0) {\n      // swap\n      var tmp = this.list[parent];\n      this.list[parent] = this.list[index];\n      this.list[index] = tmp;\n      // [this.list[index], this.list[parent]] = [this.list[parent], this.list[index]]\n      index = parent;\n      parent = this.getParent(index);\n    }\n  };\n  MinBinaryHeap.prototype.moveDown = function (index) {\n    var _a;\n    var element = index;\n    var left = this.getLeft(index);\n    var right = this.getRight(index);\n    var size = this.list.length;\n    if (left !== null && left < size && this.compareFn(this.list[element], this.list[left]) > 0) {\n      element = left;\n    } else if (right !== null && right < size && this.compareFn(this.list[element], this.list[right]) > 0) {\n      element = right;\n    }\n    if (index !== element) {\n      _a = [this.list[element], this.list[index]], this.list[index] = _a[0], this.list[element] = _a[1];\n      this.moveDown(element);\n    }\n  };\n  return MinBinaryHeap;\n}();\nexport default MinBinaryHeap;","import degree from './degree';\nimport { getNeighbors } from \"./util\";\n/**\n * PageRank https://en.wikipedia.org/wiki/PageRank\n * refer: https://github.com/anvaka/ngraph.pagerank\n * @param graph\n * @param epsilon 判断是否收敛的精度值，默认 0.000001\n * @param linkProb 阻尼系数（dumping factor），指任意时刻，用户访问到某节点后继续访问该节点链接的下一个节点的概率，经验值 0.85\n */\nvar pageRank = function pageRank(graphData, epsilon, linkProb) {\n  if (typeof epsilon !== 'number') epsilon = 0.000001;\n  if (typeof linkProb !== 'number') linkProb = 0.85;\n  var distance = 1;\n  var leakedRank = 0;\n  var maxIterations = 1000;\n  var _a = graphData.nodes,\n    nodes = _a === void 0 ? [] : _a,\n    _b = graphData.edges,\n    edges = _b === void 0 ? [] : _b;\n  var nodesCount = nodes.length;\n  var currentRank;\n  var curRanks = {};\n  var prevRanks = {};\n  // Initialize pageranks 初始化\n  for (var j = 0; j < nodesCount; ++j) {\n    var node = nodes[j];\n    var nodeId = node.id;\n    curRanks[nodeId] = 1 / nodesCount;\n    prevRanks[nodeId] = 1 / nodesCount;\n  }\n  var nodeDegree = degree(graphData);\n  while (maxIterations > 0 && distance > epsilon) {\n    leakedRank = 0;\n    for (var j = 0; j < nodesCount; ++j) {\n      var node = nodes[j];\n      var nodeId = node.id;\n      currentRank = 0;\n      if (nodeDegree[node.id].inDegree === 0) {\n        curRanks[nodeId] = 0;\n      } else {\n        var neighbors = getNeighbors(nodeId, edges, 'source');\n        for (var i = 0; i < neighbors.length; ++i) {\n          var neighbor = neighbors[i];\n          var outDegree = nodeDegree[neighbor].outDegree;\n          if (outDegree > 0) currentRank += prevRanks[neighbor] / outDegree;\n        }\n        curRanks[nodeId] = linkProb * currentRank;\n        leakedRank += curRanks[nodeId];\n      }\n    }\n    leakedRank = (1 - leakedRank) / nodesCount;\n    distance = 0;\n    for (var j = 0; j < nodesCount; ++j) {\n      var node = nodes[j];\n      var nodeId = node.id;\n      currentRank = curRanks[nodeId] + leakedRank;\n      distance += Math.abs(currentRank - prevRanks[nodeId]);\n      prevRanks[nodeId] = currentRank;\n    }\n    maxIterations -= 1;\n  }\n  return prevRanks;\n};\nexport default pageRank;","export var VACANT_EDGE_ID = -1;\nexport var VACANT_NODE_ID = -1;\nexport var VACANT_EDGE_LABEL = \"-1\";\nexport var VACANT_NODE_LABEL = \"-1\";\nexport var VACANT_GRAPH_ID = -1;\nexport var AUTO_EDGE_ID = \"-1\";\nvar Edge = /** @class */function () {\n  function Edge(id, from, to, label) {\n    if (id === void 0) {\n      id = VACANT_EDGE_ID;\n    }\n    if (from === void 0) {\n      from = VACANT_NODE_ID;\n    }\n    if (to === void 0) {\n      to = VACANT_NODE_ID;\n    }\n    if (label === void 0) {\n      label = VACANT_EDGE_LABEL;\n    }\n    this.id = id;\n    this.from = from;\n    this.to = to;\n    this.label = label;\n  }\n  return Edge;\n}();\nexport { Edge };\nvar Node = /** @class */function () {\n  function Node(id, label) {\n    if (id === void 0) {\n      id = VACANT_NODE_ID;\n    }\n    if (label === void 0) {\n      label = VACANT_NODE_LABEL;\n    }\n    this.id = id;\n    this.label = label;\n    this.edges = [];\n    this.edgeMap = {};\n  }\n  Node.prototype.addEdge = function (edge) {\n    this.edges.push(edge);\n    this.edgeMap[edge.id] = edge;\n  };\n  return Node;\n}();\nexport { Node };\nvar Graph = /** @class */function () {\n  function Graph(id, edgeIdAutoIncrease, directed) {\n    if (id === void 0) {\n      id = VACANT_NODE_ID;\n    }\n    if (edgeIdAutoIncrease === void 0) {\n      edgeIdAutoIncrease = true;\n    }\n    if (directed === void 0) {\n      directed = false;\n    }\n    this.id = id;\n    this.edgeIdAutoIncrease = edgeIdAutoIncrease;\n    this.edges = [];\n    this.nodes = [];\n    this.nodeMap = {};\n    this.edgeMap = {};\n    this.nodeLabelMap = {};\n    this.edgeLabelMap = {};\n    this.counter = 0;\n    this.directed = directed;\n  }\n  Graph.prototype.getNodeNum = function () {\n    return this.nodes.length;\n  };\n  Graph.prototype.addNode = function (id, label) {\n    if (this.nodeMap[id]) return;\n    var node = new Node(id, label);\n    this.nodes.push(node);\n    this.nodeMap[id] = node;\n    if (!this.nodeLabelMap[label]) this.nodeLabelMap[label] = [];\n    this.nodeLabelMap[label].push(id);\n  };\n  Graph.prototype.addEdge = function (id, from, to, label) {\n    if (this.edgeIdAutoIncrease || id === undefined) id = this.counter++;\n    if (this.nodeMap[from] && this.nodeMap[to] && this.nodeMap[to].edgeMap[id]) return;\n    var edge = new Edge(id, from, to, label);\n    this.edges.push(edge);\n    this.edgeMap[id] = edge;\n    this.nodeMap[from].addEdge(edge);\n    if (!this.edgeLabelMap[label]) this.edgeLabelMap[label] = [];\n    this.edgeLabelMap[label].push(edge);\n    if (!this.directed) {\n      var rEdge = new Edge(id, to, from, label);\n      this.nodeMap[to].addEdge(rEdge);\n      this.edgeLabelMap[label].push(rEdge);\n    }\n  };\n  return Graph;\n}();\nexport { Graph };","import { clone } from \"@antv/util\";\nimport { Graph, VACANT_NODE_LABEL, VACANT_GRAPH_ID, VACANT_EDGE_LABEL } from \"./struct\";\nvar DFSedge = /** @class */function () {\n  function DFSedge(fromNode, toNode, fromNodeLabel, edgeLabel, toNodeLabel) {\n    this.fromNode = fromNode;\n    this.toNode = toNode;\n    this.nodeEdgeNodeLabel = {\n      nodeLabel1: fromNodeLabel || VACANT_NODE_LABEL,\n      edgeLabel: edgeLabel || VACANT_EDGE_LABEL,\n      nodeLabel2: toNodeLabel || VACANT_NODE_LABEL\n    };\n  }\n  DFSedge.prototype.equalTo = function (other) {\n    return this.fromNode === other.formNode && this.toNode === other.toNode && this.nodeEdgeNodeLabel === other.nodeEdgeNodeLabel;\n  };\n  DFSedge.prototype.notEqualTo = function (other) {\n    return !this.equalTo(other);\n  };\n  return DFSedge;\n}();\n// DFScode 是 DESedge 的数组\nvar DFScode = /** @class */function () {\n  function DFScode() {\n    this.rmpath = [];\n    this.dfsEdgeList = [];\n  }\n  DFScode.prototype.equalTo = function (other) {\n    var aLength = this.dfsEdgeList.length;\n    var bLength = other.length;\n    if (aLength !== bLength) return false;\n    for (var i = 0; i < aLength; i++) {\n      if (this.dfsEdgeList[i] !== other[i]) return false;\n    }\n    return true;\n  };\n  DFScode.prototype.notEqualTo = function (other) {\n    return !this.equalTo(other);\n  };\n  /** 增加一条 edge 到 DFScode */\n  DFScode.prototype.pushBack = function (fromNode, toNode, fromNodeLabel, edgeLabel, toNodeLabel) {\n    this.dfsEdgeList.push(new DFSedge(fromNode, toNode, fromNodeLabel, edgeLabel, toNodeLabel));\n    return this.dfsEdgeList;\n  };\n  /** 根据 dfs 构建图 */\n  DFScode.prototype.toGraph = function (graphId, directed) {\n    if (graphId === void 0) {\n      graphId = VACANT_GRAPH_ID;\n    }\n    if (directed === void 0) {\n      directed = false;\n    }\n    var graph = new Graph(graphId, true, directed);\n    this.dfsEdgeList.forEach(function (dfsEdge) {\n      var fromNodeId = dfsEdge.fromNode;\n      var toNodeId = dfsEdge.toNode;\n      var _a = dfsEdge.nodeEdgeNodeLabel,\n        nodeLabel1 = _a.nodeLabel1,\n        edgeLabel = _a.edgeLabel,\n        nodeLabel2 = _a.nodeLabel2;\n      if (nodeLabel1 !== VACANT_NODE_LABEL) graph.addNode(fromNodeId, nodeLabel1);\n      if (nodeLabel2 !== VACANT_NODE_LABEL) graph.addNode(toNodeId, nodeLabel2);\n      if (nodeLabel1 !== VACANT_NODE_LABEL && nodeLabel2 !== nodeLabel1) graph.addEdge(undefined, fromNodeId, toNodeId, edgeLabel);\n    });\n    return graph;\n  };\n  // 建立 rightmost path\n  DFScode.prototype.buildRmpath = function () {\n    this.rmpath = [];\n    var oldFrom = undefined;\n    var selfLength = this.dfsEdgeList.length;\n    for (var i = selfLength - 1; i >= 0; i--) {\n      var dfsEdge = this.dfsEdgeList[i];\n      var fromNodeIdx = dfsEdge.fromNode;\n      var toNodeIdx = dfsEdge.toNode;\n      if (fromNodeIdx < toNodeIdx && (oldFrom === undefined || toNodeIdx === oldFrom)) {\n        this.rmpath.push(i);\n        oldFrom = fromNodeIdx;\n      }\n    }\n    return this.rmpath;\n  };\n  DFScode.prototype.getNodeNum = function () {\n    var nodeMap = {};\n    this.dfsEdgeList.forEach(function (dfsEdge) {\n      if (!nodeMap[dfsEdge.fromNode]) nodeMap[dfsEdge.fromNode] = true;\n      if (!nodeMap[dfsEdge.toNode]) nodeMap[dfsEdge.toNode] = true;\n    });\n    return Object.keys(nodeMap).length;\n  };\n  return DFScode;\n}();\nvar History = /** @class */function () {\n  function History(pdfs) {\n    this.his = {};\n    this.nodesUsed = {};\n    this.edgesUsed = {};\n    this.edges = [];\n    if (!pdfs) return;\n    while (pdfs) {\n      var e = pdfs.edge;\n      this.edges.push(e);\n      this.nodesUsed[e.from] = 1;\n      this.nodesUsed[e.to] = 1;\n      this.edgesUsed[e.id] = 1;\n      pdfs = pdfs.preNode;\n    }\n    // 倒序\n    this.edges = this.edges.reverse();\n  }\n  History.prototype.hasNode = function (node) {\n    return this.nodesUsed[node.id] === 1;\n  };\n  History.prototype.hasEdge = function (edge) {\n    return this.edgesUsed[edge.id] === 1;\n  };\n  return History;\n}();\nvar GSpan = /** @class */function () {\n  function GSpan(_a) {\n    var graphs = _a.graphs,\n      _b = _a.minSupport,\n      minSupport = _b === void 0 ? 2 : _b,\n      _c = _a.minNodeNum,\n      minNodeNum = _c === void 0 ? 1 : _c,\n      _d = _a.maxNodeNum,\n      maxNodeNum = _d === void 0 ? 4 : _d,\n      _e = _a.top,\n      top = _e === void 0 ? 10 : _e,\n      _f = _a.directed,\n      directed = _f === void 0 ? false : _f,\n      _g = _a.verbose,\n      verbose = _g === void 0 ? false : _g;\n    // -------- 第零步，初始化-------\n    this.graphs = graphs;\n    this.dfsCode = new DFScode();\n    this.support = 0;\n    this.frequentSize1Subgraphs = [];\n    this.frequentSubgraphs = [];\n    this.minSupport = minSupport;\n    this.top = top;\n    this.directed = directed;\n    this.counter = 0;\n    // TODO? timestamp = {}\n    this.maxNodeNum = maxNodeNum;\n    this.minNodeNum = minNodeNum;\n    this.verbose = verbose;\n    if (this.maxNodeNum < this.minNodeNum) this.maxNodeNum = this.minNodeNum;\n    this.reportDF = []; // matrix\n  }\n  // Line 352\n  GSpan.prototype.findForwardRootEdges = function (graph, fromNode) {\n    var _this = this;\n    var result = [];\n    var nodeMap = graph.nodeMap;\n    fromNode.edges.forEach(function (edge) {\n      if (_this.directed || fromNode.label <= nodeMap[edge.to].label) result.push(edge);\n    });\n    return result;\n  };\n  GSpan.prototype.findBackwardEdge = function (graph, edge1, edge2, history) {\n    if (!this.directed && edge1 === edge2) return null;\n    var nodeMap = graph.nodeMap;\n    var edge2To = nodeMap[edge2.to];\n    var edge2ToEdges = edge2To.edges;\n    var edgeLength = edge2ToEdges.length;\n    for (var i = 0; i < edgeLength; i++) {\n      var edge = edge2ToEdges[i];\n      if (history.hasEdge(edge) || edge.to !== edge1.from) continue;\n      if (!this.directed) {\n        if (edge1.label < edge.label || edge1.label === edge.label && nodeMap[edge1.to].label <= nodeMap[edge2.to].label) {\n          return edge;\n        }\n      } else {\n        if (nodeMap[edge1.from].label < nodeMap[edge2.to].label || nodeMap[edge1.from].label === nodeMap[edge2.to].label && edge1.label <= edge.label) {\n          return edge;\n        }\n      }\n    }\n    return null;\n  };\n  GSpan.prototype.findForwardPureEdges = function (graph, rightmostEdge, minNodeLabel, history) {\n    var result = [];\n    var rightmostEdgeToId = rightmostEdge.to;\n    var edges = graph.nodeMap[rightmostEdgeToId].edges;\n    var edgeLength = edges.length;\n    for (var i = 0; i < edgeLength; i++) {\n      var edge = edges[i];\n      var toNode = graph.nodeMap[edge.to];\n      if (minNodeLabel <= toNode.label && !history.hasNode(toNode)) {\n        result.push(edge);\n      }\n    }\n    return result;\n  };\n  GSpan.prototype.findForwardRmpathEdges = function (graph, rightmostEdge, minNodeLabel, history) {\n    var result = [];\n    var nodeMap = graph.nodeMap;\n    var toNodeLabel = nodeMap[rightmostEdge.to].label;\n    var fromNode = nodeMap[rightmostEdge.from];\n    var edges = fromNode.edges;\n    var edgeLength = edges.length;\n    for (var i = 0; i < edgeLength; i++) {\n      var edge = edges[i];\n      var newToNodeLabel = nodeMap[edge.to].label;\n      if (rightmostEdge.to === edge.to || minNodeLabel > newToNodeLabel || history.hasNode(nodeMap[edge.to])) {\n        continue;\n      }\n      if (rightmostEdge.label < edge.label || rightmostEdge.label === edge.label && toNodeLabel <= newToNodeLabel) {\n        result.push(edge);\n      }\n    }\n    return result;\n  };\n  GSpan.prototype.getSupport = function (projected) {\n    var graphMap = {};\n    projected.forEach(function (pro) {\n      if (!graphMap[pro.graphId]) graphMap[pro.graphId] = true;\n    });\n    return Object.keys(graphMap).length;\n  };\n  GSpan.prototype.findMinLabel = function (obj) {\n    var minLabel = undefined;\n    Object.keys(obj).forEach(function (nodeEdgeNodeLabel) {\n      var _a = obj[nodeEdgeNodeLabel],\n        nodeLabel1 = _a.nodeLabel1,\n        edgeLabel = _a.edgeLabel,\n        nodeLabel2 = _a.nodeLabel2;\n      if (!minLabel) {\n        minLabel = {\n          nodeLabel1: nodeLabel1,\n          edgeLabel: edgeLabel,\n          nodeLabel2: nodeLabel2\n        };\n        return;\n      }\n      if (nodeLabel1 < minLabel.nodeLabel1 || nodeLabel1 === minLabel.nodeLabel1 && edgeLabel < minLabel.edgeLabel || nodeLabel1 === minLabel.nodeLabel1 && edgeLabel === minLabel.edgeLabel && nodeLabel2 < minLabel.nodeLabel2) {\n        minLabel = {\n          nodeLabel1: nodeLabel1,\n          edgeLabel: edgeLabel,\n          nodeLabel2: nodeLabel2\n        };\n      }\n    });\n    return minLabel;\n  };\n  GSpan.prototype.isMin = function () {\n    var _this = this;\n    var dfsCode = this.dfsCode;\n    if (this.verbose) console.log(\"isMin checking\", dfsCode);\n    if (dfsCode.dfsEdgeList.length === 1) return true;\n    var directed = this.directed;\n    var graph = dfsCode.toGraph(VACANT_GRAPH_ID, directed);\n    var nodeMap = graph.nodeMap;\n    var dfsCodeMin = new DFScode();\n    var root = {};\n    graph.nodes.forEach(function (node) {\n      var forwardEdges = _this.findForwardRootEdges(graph, node);\n      forwardEdges.forEach(function (edge) {\n        var otherNode = nodeMap[edge.to];\n        var nodeEdgeNodeLabel = \"\".concat(node.label, \"-\").concat(edge.label, \"-\").concat(otherNode.label);\n        if (!root[nodeEdgeNodeLabel]) root[nodeEdgeNodeLabel] = {\n          projected: [],\n          nodeLabel1: node.label,\n          edgeLabel: edge.label,\n          nodeLabel2: otherNode.label\n        };\n        var pdfs = {\n          graphId: graph.id,\n          edge: edge,\n          preNode: null\n        };\n        root[nodeEdgeNodeLabel].projected.push(pdfs);\n      });\n    });\n    // 比较 root 中每一项的 nodeEdgeNodeLabel 大小，按照 nodeLabel1、edgeLabe、nodeLabel2 的顺序比较\n    var minLabel = this.findMinLabel(root); // line 419\n    if (!minLabel) return;\n    dfsCodeMin.dfsEdgeList.push(new DFSedge(0, 1, minLabel.nodeLabel1, minLabel.edgeLabel, minLabel.nodeLabel2));\n    // line 423\n    var projectIsMin = function projectIsMin(projected) {\n      // right most path\n      var rmpath = dfsCodeMin.buildRmpath();\n      var minNodeLabel = dfsCodeMin.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1;\n      var maxToC = dfsCodeMin.dfsEdgeList[rmpath[0]].toNode; // node id\n      var backwardRoot = {};\n      var flag = false,\n        newTo = 0;\n      var end = directed ? -1 : 0; // 遍历到 1 还是到 0\n      var _loop_1 = function _loop_1(i) {\n        if (flag) return \"break\";\n        // line 435\n        projected.forEach(function (p) {\n          var history = new History(p);\n          var backwardEdge = _this.findBackwardEdge(graph, history.edges[rmpath[i]], history.edges[rmpath[0]], history);\n          if (backwardEdge) {\n            // Line 441\n            if (!backwardRoot[backwardEdge.label]) {\n              backwardRoot[backwardEdge.label] = {\n                projected: [],\n                edgeLabel: backwardEdge.label\n              };\n            }\n            backwardRoot[backwardEdge.label].projected.push({\n              graphId: graph.id,\n              edge: backwardRoot,\n              preNode: p\n            });\n            newTo = dfsCodeMin.dfsEdgeList[rmpath[i]].fromNode;\n            flag = true;\n          }\n        });\n      };\n      for (var i = rmpath.length - 1; i > end; i--) {\n        var state_1 = _loop_1(i);\n        if (state_1 === \"break\") break;\n      }\n      if (flag) {\n        var minBackwardEdgeLabel = _this.findMinLabel(backwardRoot);\n        dfsCodeMin.dfsEdgeList.push(new DFSedge(maxToC, newTo, VACANT_NODE_LABEL, minBackwardEdgeLabel.edgeLabel, VACANT_NODE_LABEL));\n        var idx_1 = dfsCodeMin.dfsEdgeList.length - 1;\n        if (_this.dfsCode.dfsEdgeList[idx_1] !== dfsCodeMin.dfsEdgeList[idx_1]) return false;\n        return projectIsMin(backwardRoot[minBackwardEdgeLabel.edgeLabel].projected);\n      }\n      var forwardRoot = {};\n      flag = false;\n      var newFrom = 0;\n      projected.forEach(function (p) {\n        var history = new History(p);\n        var forwardPureEdges = _this.findForwardPureEdges(graph, history.edges[rmpath[0]], minNodeLabel, history);\n        if (forwardPureEdges.length > 0) {\n          flag = true;\n          newFrom = maxToC;\n          forwardPureEdges.forEach(function (edge) {\n            var key = \"\".concat(edge.label, \"-\").concat(nodeMap[edge.to].label);\n            if (!forwardRoot[key]) forwardRoot[key] = {\n              projected: [],\n              edgeLabel: edge.label,\n              nodeLabel2: nodeMap[edge.to].label\n            };\n            forwardRoot[key].projected.push({\n              graphId: graph.id,\n              edge: edge,\n              preNode: p\n            });\n          });\n        }\n      });\n      var pathLength = rmpath.length;\n      var _loop_2 = function _loop_2(i) {\n        if (flag) return \"break\";\n        var value = rmpath[i];\n        projected.forEach(function (p) {\n          var history = new History(p);\n          var forwardRmpathEdges = _this.findForwardRmpathEdges(graph, history.edges[value], minNodeLabel, history);\n          if (forwardRmpathEdges.length > 0) {\n            flag = true;\n            newFrom = dfsCodeMin.dfsEdgeList[value].fromNode;\n            forwardRmpathEdges.forEach(function (edge) {\n              var key = \"\".concat(edge.label, \"-\").concat(nodeMap[edge.to].label);\n              if (!forwardRoot[key]) forwardRoot[key] = {\n                projected: [],\n                edgeLabel: edge.label,\n                nodeLabel2: nodeMap[edge.to].label\n              };\n              forwardRoot[key].projected.push({\n                graphId: graph.id,\n                edge: edge,\n                preNode: p\n              });\n            });\n          }\n        });\n      };\n      for (var i = 0; i < pathLength; i++) {\n        var state_2 = _loop_2(i);\n        if (state_2 === \"break\") break;\n      }\n      if (!flag) return true;\n      var forwardMinEdgeNodeLabel = _this.findMinLabel(forwardRoot);\n      dfsCodeMin.dfsEdgeList.push(new DFSedge(newFrom, maxToC + 1, VACANT_NODE_LABEL, forwardMinEdgeNodeLabel.edgeLabel, forwardMinEdgeNodeLabel.nodeLabel2));\n      var idx = dfsCodeMin.dfsEdgeList.length - 1;\n      if (dfsCode.dfsEdgeList[idx] !== dfsCodeMin.dfsEdgeList[idx]) return false;\n      return projectIsMin(forwardRoot[\"\".concat(forwardMinEdgeNodeLabel.edgeLabel, \"-\").concat(forwardMinEdgeNodeLabel.nodeLabel2)].projected);\n    };\n    var key = \"\".concat(minLabel.nodeLabel1, \"-\").concat(minLabel.edgeLabel, \"-\").concat(minLabel.nodeLabel2);\n    return projectIsMin(root[key].projected);\n  };\n  GSpan.prototype.report = function () {\n    if (this.dfsCode.getNodeNum() < this.minNodeNum) return;\n    this.counter++;\n    var graph = this.dfsCode.toGraph(this.counter, this.directed);\n    this.frequentSubgraphs.push(clone(graph));\n  };\n  GSpan.prototype.subGraphMining = function (projected) {\n    var _this = this;\n    var support = this.getSupport(projected);\n    if (support < this.minSupport) return;\n    if (!this.isMin()) return;\n    this.report();\n    var nodeNum = this.dfsCode.getNodeNum();\n    var rmpath = this.dfsCode.buildRmpath();\n    var maxToC = this.dfsCode.dfsEdgeList[rmpath[0]].toNode;\n    var minNodeLabel = this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1;\n    var forwardRoot = {};\n    var backwardRoot = {};\n    projected.forEach(function (p) {\n      var graph = _this.graphs[p.graphId];\n      var nodeMap = graph.nodeMap;\n      var history = new History(p);\n      // backward Line 526\n      for (var i = rmpath.length - 1; i >= 0; i--) {\n        var backwardEdge = _this.findBackwardEdge(graph, history.edges[rmpath[i]], history.edges[rmpath[0]], history);\n        if (backwardEdge) {\n          var key = \"\".concat(_this.dfsCode.dfsEdgeList[rmpath[i]].fromNode, \"-\").concat(backwardEdge.label);\n          if (!backwardRoot[key]) backwardRoot[key] = {\n            projected: [],\n            toNodeId: _this.dfsCode.dfsEdgeList[rmpath[i]].fromNode,\n            edgeLabel: backwardEdge.label\n          };\n          backwardRoot[key].projected.push({\n            graphId: p.graphId,\n            edge: backwardEdge,\n            preNode: p\n          });\n        }\n      }\n      // pure forward\n      if (nodeNum >= _this.maxNodeNum) return;\n      var forwardPureEdges = _this.findForwardPureEdges(graph, history.edges[rmpath[0]], minNodeLabel, history);\n      forwardPureEdges.forEach(function (edge) {\n        var key = \"\".concat(maxToC, \"-\").concat(edge.label, \"-\").concat(nodeMap[edge.to].label);\n        if (!forwardRoot[key]) forwardRoot[key] = {\n          projected: [],\n          fromNodeId: maxToC,\n          edgeLabel: edge.label,\n          nodeLabel2: nodeMap[edge.to].label\n        };\n        forwardRoot[key].projected.push({\n          graphId: p.graphId,\n          edge: edge,\n          preNode: p\n        });\n      });\n      var _loop_3 = function _loop_3(i) {\n        var forwardRmpathEdges = _this.findForwardRmpathEdges(graph, history.edges[rmpath[i]], minNodeLabel, history);\n        forwardRmpathEdges.forEach(function (edge) {\n          var key = \"\".concat(_this.dfsCode.dfsEdgeList[rmpath[i]].fromNode, \"-\").concat(edge.label, \"-\").concat(nodeMap[edge.to].label);\n          if (!forwardRoot[key]) forwardRoot[key] = {\n            projected: [],\n            fromNodeId: _this.dfsCode.dfsEdgeList[rmpath[i]].fromNode,\n            edgeLabel: edge.label,\n            nodeLabel2: nodeMap[edge.to].label\n          };\n          forwardRoot[key].projected.push({\n            graphId: p.graphId,\n            edge: edge,\n            preNode: p\n          });\n        });\n      };\n      // rmpath forward\n      for (var i = 0; i < rmpath.length; i++) {\n        _loop_3(i);\n      }\n    });\n    // backward\n    Object.keys(backwardRoot).forEach(function (key) {\n      var _a = backwardRoot[key],\n        toNodeId = _a.toNodeId,\n        edgeLabel = _a.edgeLabel;\n      _this.dfsCode.dfsEdgeList.push(new DFSedge(maxToC, toNodeId, \"-1\", edgeLabel, \"-1\"));\n      _this.subGraphMining(backwardRoot[key].projected);\n      _this.dfsCode.dfsEdgeList.pop();\n    });\n    // forward\n    Object.keys(forwardRoot).forEach(function (key) {\n      var _a = forwardRoot[key],\n        fromNodeId = _a.fromNodeId,\n        edgeLabel = _a.edgeLabel,\n        nodeLabel2 = _a.nodeLabel2;\n      _this.dfsCode.dfsEdgeList.push(new DFSedge(fromNodeId, maxToC + 1, VACANT_NODE_LABEL, edgeLabel, nodeLabel2));\n      _this.subGraphMining(forwardRoot[key].projected);\n      _this.dfsCode.dfsEdgeList.pop();\n    });\n  };\n  GSpan.prototype.generate1EdgeFrequentSubGraphs = function () {\n    var graphs = this.graphs;\n    var directed = this.directed;\n    var minSupport = this.minSupport;\n    var frequentSize1Subgraphs = this.frequentSize1Subgraphs;\n    var nodeLabelCounter = {},\n      nodeEdgeNodeCounter = {};\n    // 保存各个图和各自节点的关系 map，key 格式为 graphKey-node类型\n    var nodeLableCounted = {};\n    // 保存各个图和各自边的关系 map，key 格式为 graphKey-fromNode类型-edge类型-toNode类型\n    var nodeEdgeNodeLabelCounted = {};\n    Object.keys(graphs).forEach(function (key) {\n      // Line 271\n      var graph = graphs[key];\n      var nodeMap = graph.nodeMap;\n      // 遍历节点，记录对应图 与 每个节点的 label 到 nodeLableCounted\n      graph.nodes.forEach(function (node, i) {\n        // Line 272\n        var nodeLabel = node.label;\n        var graphNodeKey = \"\".concat(key, \"-\").concat(nodeLabel);\n        if (!nodeLableCounted[graphNodeKey]) {\n          var counter = nodeLabelCounter[nodeLabel] || 0;\n          counter++;\n          nodeLabelCounter[nodeLabel] = counter;\n        }\n        nodeLableCounted[graphNodeKey] = {\n          graphKey: key,\n          label: nodeLabel\n        };\n        // 遍历该节点的所有边，记录各个图和各自边的关系到 nodeEdgeNodeLabelCounted. Line 276\n        node.edges.forEach(function (edge) {\n          var nodeLabel1 = nodeLabel;\n          var nodeLabel2 = nodeMap[edge.to].label;\n          if (!directed && nodeLabel1 > nodeLabel2) {\n            var tmp = nodeLabel2;\n            nodeLabel2 = nodeLabel1;\n            nodeLabel1 = tmp;\n          }\n          var edgeLabel = edge.label;\n          var graphNodeEdgeNodeKey = \"\".concat(key, \"-\").concat(nodeLabel1, \"-\").concat(edgeLabel, \"-\").concat(nodeLabel2);\n          var nodeEdgeNodeKey = \"\".concat(nodeLabel1, \"-\").concat(edgeLabel, \"-\").concat(nodeLabel2);\n          if (!nodeEdgeNodeCounter[nodeEdgeNodeKey]) {\n            var counter = nodeEdgeNodeCounter[nodeEdgeNodeKey] || 0;\n            counter++;\n            nodeEdgeNodeCounter[nodeEdgeNodeKey] = counter; // Line281\n          }\n\n          nodeEdgeNodeLabelCounted[graphNodeEdgeNodeKey] = {\n            graphId: key,\n            nodeLabel1: nodeLabel1,\n            edgeLabel: edgeLabel,\n            nodeLabel2: nodeLabel2\n          };\n        });\n      });\n    });\n    // 计算频繁的节点\n    Object.keys(nodeLabelCounter).forEach(function (label) {\n      var count = nodeLabelCounter[label];\n      if (count < minSupport) return;\n      var g = {\n        nodes: [],\n        edges: []\n      };\n      g.nodes.push({\n        id: \"0\",\n        label: label\n      });\n      frequentSize1Subgraphs.push(g);\n      // if (minNodeNum <= 1) reportSize1 TODO\n    });\n\n    return frequentSize1Subgraphs;\n  };\n  GSpan.prototype.run = function () {\n    var _this = this;\n    // -------- 第一步, _generate_1edge_frequent_subgraphs：频繁的单个节点-------\n    this.frequentSize1Subgraphs = this.generate1EdgeFrequentSubGraphs();\n    if (this.maxNodeNum < 2) return;\n    var graphs = this.graphs;\n    var directed = this.directed;\n    // PDFS 数组的 map Line 304\n    var root = {};\n    Object.keys(graphs).forEach(function (graphId) {\n      var graph = graphs[graphId];\n      var nodeMap = graph.nodeMap;\n      // Line 306\n      graph.nodes.forEach(function (node) {\n        var forwardRootEdges = _this.findForwardRootEdges(graph, node);\n        // Line 308\n        forwardRootEdges.forEach(function (edge) {\n          var toNode = nodeMap[edge.to];\n          var nodeEdgeNodeLabel = \"\".concat(node.label, \"-\").concat(edge.label, \"-\").concat(toNode.label);\n          if (!root[nodeEdgeNodeLabel]) root[nodeEdgeNodeLabel] = {\n            projected: [],\n            nodeLabel1: node.label,\n            edgeLabel: edge.label,\n            nodeLabel2: toNode.label\n          };\n          var pdfs = {\n            graphId: graphId,\n            edge: edge,\n            preNode: null\n          };\n          root[nodeEdgeNodeLabel].projected.push(pdfs);\n        });\n      });\n    });\n    // Line 313\n    Object.keys(root).forEach(function (nodeEdgeNodeLabel) {\n      var _a = root[nodeEdgeNodeLabel],\n        projected = _a.projected,\n        nodeLabel1 = _a.nodeLabel1,\n        edgeLabel = _a.edgeLabel,\n        nodeLabel2 = _a.nodeLabel2;\n      _this.dfsCode.dfsEdgeList.push(new DFSedge(0, 1, nodeLabel1, edgeLabel, nodeLabel2));\n      _this.subGraphMining(projected);\n      _this.dfsCode.dfsEdgeList.pop();\n    });\n  };\n  return GSpan;\n}();\nvar formatGraphs = function formatGraphs(graphs, directed, nodeLabelProp, edgeLabelProp) {\n  var result = {};\n  Object.keys(graphs).forEach(function (key, i) {\n    var graph = graphs[key];\n    var fGraph = new Graph(i, true, directed);\n    var nodeIdxMap = {};\n    graph.nodes.forEach(function (node, j) {\n      fGraph.addNode(j, node[nodeLabelProp]);\n      nodeIdxMap[node.id] = j;\n    });\n    graph.edges.forEach(function (edge, k) {\n      var sourceIdx = nodeIdxMap[edge.source];\n      var targetIdx = nodeIdxMap[edge.target];\n      fGraph.addEdge(-1, sourceIdx, targetIdx, edge[edgeLabelProp]);\n    });\n    if (fGraph && fGraph.getNodeNum()) result[fGraph.id] = fGraph;\n  });\n  return result;\n};\nvar toGraphDatas = function toGraphDatas(graphs, nodeLabelProp, edgeLabelProp) {\n  var result = [];\n  graphs.forEach(function (graph) {\n    var graphData = {\n      nodes: [],\n      edges: []\n    };\n    graph.nodes.forEach(function (node) {\n      var _a;\n      graphData.nodes.push((_a = {\n        id: \"\".concat(node.id)\n      }, _a[nodeLabelProp] = node.label, _a));\n    });\n    graph.edges.forEach(function (edge) {\n      var _a;\n      graphData.edges.push((_a = {\n        source: \"\".concat(edge.from),\n        target: \"\".concat(edge.to)\n      }, _a[edgeLabelProp] = edge.label, _a));\n    });\n    result.push(graphData);\n  });\n  return result;\n};\nvar DEFAULT_LABEL_NAME = \"cluster\";\n/**\n * gSpan 频繁子图计算算法（frequent graph mining）\n * @param params 参数\n */\nvar gSpan = function gSpan(params) {\n  // ------- 将图数据 GraphData 的 map 转换为格式 -------\n  var graphs = params.graphs,\n    _a = params.directed,\n    directed = _a === void 0 ? false : _a,\n    _b = params.nodeLabelProp,\n    nodeLabelProp = _b === void 0 ? DEFAULT_LABEL_NAME : _b,\n    _c = params.edgeLabelProp,\n    edgeLabelProp = _c === void 0 ? DEFAULT_LABEL_NAME : _c;\n  var formattedGraphs = formatGraphs(graphs, directed, nodeLabelProp, edgeLabelProp);\n  var minSupport = params.minSupport,\n    maxNodeNum = params.maxNodeNum,\n    minNodeNum = params.minNodeNum,\n    verbose = params.verbose,\n    top = params.top;\n  // ------- 初始化与执行算法 -------\n  var algoParams = {\n    graphs: formattedGraphs,\n    minSupport: minSupport,\n    maxNodeNum: maxNodeNum,\n    minNodeNum: minNodeNum,\n    top: top,\n    verbose: verbose,\n    directed: directed\n  };\n  var calculator = new GSpan(algoParams);\n  calculator.run();\n  var result = toGraphDatas(calculator.frequentSubgraphs, nodeLabelProp, edgeLabelProp);\n  return result;\n};\nexport default gSpan;","import LinkedList from './linked-list';\nvar Stack = /** @class */function () {\n  function Stack(maxStep) {\n    if (maxStep === void 0) {\n      maxStep = 10;\n    }\n    this.linkedList = new LinkedList();\n    this.maxStep = maxStep;\n  }\n  Object.defineProperty(Stack.prototype, \"length\", {\n    get: function get() {\n      return this.linkedList.toArray().length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * 判断栈是否为空，如果链表中没有头部元素，则栈为空\n   */\n  Stack.prototype.isEmpty = function () {\n    return !this.linkedList.head;\n  };\n  /**\n   * 是否到定义的栈的最大长度，如果达到最大长度后，不再允许入栈\n   */\n  Stack.prototype.isMaxStack = function () {\n    return this.toArray().length >= this.maxStep;\n  };\n  /**\n   * 访问顶端元素\n   */\n  Stack.prototype.peek = function () {\n    if (this.isEmpty()) {\n      return null;\n    }\n    // 返回头部元素，不删除元素\n    return this.linkedList.head.value;\n  };\n  Stack.prototype.push = function (value) {\n    this.linkedList.prepend(value);\n    if (this.length > this.maxStep) {\n      this.linkedList.deleteTail();\n    }\n  };\n  Stack.prototype.pop = function () {\n    var removeHead = this.linkedList.deleteHead();\n    return removeHead ? removeHead.value : null;\n  };\n  Stack.prototype.toArray = function () {\n    return this.linkedList.toArray().map(function (node) {\n      return node.value;\n    });\n  };\n  Stack.prototype.clear = function () {\n    while (!this.isEmpty()) {\n      this.pop();\n    }\n  };\n  return Stack;\n}();\nexport default Stack;","import { format } from './print';\n/**\n * <zh/> 获取节点/边/Combo 的 ID\n *\n * <en/> get the id of node/edge/combo\n * @param data - <zh/> 节点/边/Combo 的数据 | <en/> data of node/edge/combo\n * @returns <zh/> 节点/边/Combo 的 ID | <en/> ID of node/edge/combo\n */\nexport function idOf(data) {\n    if (data.id !== undefined)\n        return data.id;\n    if (data.source !== undefined && data.target !== undefined)\n        return `${data.source}-${data.target}`;\n    throw new Error(format('The datum does not have available id.'));\n}\n/**\n * <zh/> 获取节点/Combo 的父节点 ID\n *\n * <en/> get the parent id of node/combo\n * @param data - <zh/> 节点/Combo 的数据 | <en/> data of node/combo\n * @returns <zh/> 节点/Combo 的父节点 ID | <en/> parent id of node/combo\n */\nexport function parentIdOf(data) {\n    return data.combo;\n}\n/**\n * <zh/> 获取图数据中所有节点/边/Combo 的 ID\n *\n * <en/> Get the IDs of all nodes/edges/combos in the graph data\n * @param data - <zh/> 图数据 | <en/> graph data\n * @param flat - <zh/> 是否扁平化返回 | <en/> Whether to return flat\n * @returns - <zh/> 返回元素 ID 数组 | <en/> Returns an array of element IDs\n */\nexport function idsOf(data, flat) {\n    const ids = {\n        nodes: (data.nodes || []).map(idOf),\n        edges: (data.edges || []).map(idOf),\n        combos: (data.combos || []).map(idOf),\n    };\n    return flat ? Object.values(ids).flat() : ids;\n}\n//# sourceMappingURL=id.js.map","import { findShortestPath, pageRank } from '@antv/algorithm';\nimport { idOf } from './id';\nexport const getNodeCentralities = (graphData, getRelatedEdgesData, centrality) => {\n    var _a;\n    switch (centrality.type) {\n        case 'degree': {\n            const centralityResult = new Map();\n            (_a = graphData.nodes) === null || _a === void 0 ? void 0 : _a.forEach((node) => {\n                const degree = getRelatedEdgesData(idOf(node), centrality.direction).length;\n                centralityResult.set(idOf(node), degree);\n            });\n            return centralityResult;\n        }\n        case 'betweenness':\n            return computeNodeBetweennessCentrality(graphData, centrality.directed, centrality.weightPropertyName);\n        case 'closeness':\n            return computeNodeClosenessCentrality(graphData, centrality.directed, centrality.weightPropertyName);\n        case 'eigenvector':\n            return computeNodeEigenvectorCentrality(graphData, centrality.directed);\n        case 'pagerank':\n            return computeNodePageRankCentrality(graphData, centrality.epsilon, centrality.linkProb);\n        default:\n            return initCentralityResult(graphData);\n    }\n};\nexport const initCentralityResult = (graphData) => {\n    var _a;\n    const centralityResult = new Map();\n    (_a = graphData.nodes) === null || _a === void 0 ? void 0 : _a.forEach((node) => {\n        centralityResult.set(idOf(node), 0);\n    });\n    return centralityResult;\n};\n/**\n * <zh/> 计算图中每个节点的中介中心性\n *\n * <en/> Calculate the betweenness centrality for each node in the graph\n * @param graphData - <zh/> 图数据 | <en/>Graph data\n * @param directed - <zh/> 是否为有向图 | <en/>Whether the graph is directed\n * @param weightPropertyName - <zh/> 边的权重属性名 | <en/>The weight property name of the edge\n * @returns <zh/> 每个节点的中介中心性值 | <en/>The betweenness centrality for each node\n */\nexport const computeNodeBetweennessCentrality = (graphData, directed, weightPropertyName) => {\n    const centralityResult = initCentralityResult(graphData);\n    const { nodes = [] } = graphData;\n    nodes.forEach((source) => {\n        nodes.forEach((target) => {\n            if (source !== target) {\n                const { allPath } = findShortestPath(graphData, idOf(source), idOf(target), directed, weightPropertyName);\n                const pathCount = allPath.length;\n                allPath.flat().forEach((nodeId) => {\n                    if (nodeId !== idOf(source) && nodeId !== idOf(target)) {\n                        centralityResult.set(nodeId, centralityResult.get(nodeId) + 1 / pathCount);\n                    }\n                });\n            }\n        });\n    });\n    return centralityResult;\n};\n/**\n * <zh/> 计算图中每个节点的接近中心性\n *\n * <en/> Calculate the closeness centrality for each node in the graph\n * @param graphData - <zh/> 图数据 | <en/>Graph data\n * @param directed - <zh/> 是否为有向图 | <en/>Whether the graph is directed\n * @param weightPropertyName - <zh/> 边的权重属性名 | <en/>The weight property name of the edge\n * @returns <zh/> 每个节点的接近中心性值 | <en/>The closeness centrality for each node\n */\nexport const computeNodeClosenessCentrality = (graphData, directed, weightPropertyName) => {\n    const centralityResult = new Map();\n    const { nodes = [] } = graphData;\n    nodes.forEach((source) => {\n        const totalLength = nodes.reduce((acc, target) => {\n            if (source !== target) {\n                const { length } = findShortestPath(graphData, idOf(source), idOf(target), directed, weightPropertyName);\n                acc += length;\n            }\n            return acc;\n        }, 0);\n        centralityResult.set(idOf(source), 1 / totalLength);\n    });\n    return centralityResult;\n};\n/**\n * <zh/> 计算图中每个节点的 PageRank 中心性\n *\n * <en/> Calculate the PageRank centrality for each node in the graph\n * @param graphData - <zh/> 图数据 | <en/>Graph data\n * @param epsilon - <zh/> PageRank 算法的收敛容差 | <en/>The convergence tolerance of the PageRank algorithm\n * @param linkProb - <zh/> PageRank 算法的阻尼系数，指任意时刻，用户访问到某节点后继续访问该节点链接的下一个节点的概率，经验值 0.85 | <en/>The damping factor of the PageRank algorithm, which refers to the probability that a user will continue to visit the next node linked to a node at any time, with an empirical value of 0.85\n * @returns <zh/> 每个节点的 PageRank 中心性值 | <en/>The PageRank centrality for each node\n */\nexport const computeNodePageRankCentrality = (graphData, epsilon, linkProb) => {\n    var _a;\n    const centralityResult = new Map();\n    const data = pageRank(graphData, epsilon, linkProb);\n    (_a = graphData.nodes) === null || _a === void 0 ? void 0 : _a.forEach((node) => {\n        centralityResult.set(idOf(node), data[idOf(node)]);\n    });\n    return centralityResult;\n};\n/**\n * <zh/> 计算图中每个节点的特征向量中心性\n *\n * <en/> Calculate the eigenvector centrality for each node in the graph.\n * @param graphData - <zh/> 图数据 | <en/>Graph data\n * @param directed - <zh/> 是否为有向图 | <en/>Whether the graph is directed\n * @returns 每个节点的特征向量中心性值 The eigenvector centrality for each node.\n */\nexport const computeNodeEigenvectorCentrality = (graphData, directed) => {\n    const { nodes = [] } = graphData;\n    const adjacencyMatrix = createAdjacencyMatrix(graphData, directed);\n    const eigenvector = powerIteration(adjacencyMatrix, nodes.length);\n    const centralityResult = new Map();\n    nodes.forEach((node, index) => {\n        centralityResult.set(idOf(node), eigenvector[index]);\n    });\n    return centralityResult;\n};\n/**\n * <zh/> 创建图的邻接矩阵\n *\n * <en/> Create the adjacency matrix for the graph.\n * @param graphData - <zh/> 图数据 | <en/>Graph data\n * @param directed - <zh/> 是否为有向图 | <en/>Whether the graph is directed\n * @returns <zh/> 邻接矩阵 | <en/>The adjacency matrix\n */\nexport const createAdjacencyMatrix = (graphData, directed) => {\n    const { nodes = [], edges = [] } = graphData;\n    const matrix = Array(nodes.length)\n        .fill(null)\n        .map(() => Array(nodes.length).fill(0));\n    edges.forEach(({ source, target }) => {\n        const uIndex = nodes.findIndex((node) => idOf(node) === source);\n        const vIndex = nodes.findIndex((node) => idOf(node) === target);\n        if (directed) {\n            matrix[uIndex][vIndex] = 1;\n        }\n        else {\n            matrix[uIndex][vIndex] = 1;\n            matrix[vIndex][uIndex] = 1;\n        }\n    });\n    return matrix;\n};\n/**\n * <zh/> 使用幂迭代法计算主特征向量\n *\n * <en/> Calculate the principal eigenvector using the power iteration method\n * @see https://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors\n * @param matrix - <zh/> 邻接矩阵 | <en/> The adjacency matrix\n * @param numNodes - <zh/> 节点数量 | <en/> The number of nodes\n * @param maxIterations - <zh/> 最大迭代次数 | <en/> The maximum number of iterations\n * @param tolerance - <zh/> 收敛容差 | <en/> The convergence tolerance\n * @returns <zh/> 主特征向量 | <en/> The principal eigenvector\n */\nconst powerIteration = (matrix, numNodes, maxIterations = 100, tolerance = 1e-6) => {\n    let eigenvector = Array(numNodes).fill(1);\n    let diff = Infinity;\n    for (let iter = 0; iter < maxIterations && diff > tolerance; iter++) {\n        const newEigenvector = Array(numNodes).fill(0);\n        for (let i = 0; i < numNodes; i++) {\n            for (let j = 0; j < numNodes; j++) {\n                newEigenvector[i] += matrix[i][j] * eigenvector[j];\n            }\n        }\n        const norm = Math.sqrt(newEigenvector.reduce((sum, val) => sum + val * val, 0));\n        for (let i = 0; i < numNodes; i++) {\n            newEigenvector[i] /= norm;\n        }\n        diff = Math.sqrt(newEigenvector.reduce((sum, val, index) => sum + (val - eigenvector[index]) * val, 0));\n        eigenvector = newEigenvector;\n    }\n    return eigenvector;\n};\n//# sourceMappingURL=centrality.js.map","import { isEqual } from '@antv/util';\n/**\n * <zh/> 比较两个数组的差异\n *\n * <en/> compare the difference between two arrays\n * @param original - <zh/> 原始数组 | <en/> original array\n * @param modified - <zh/> 修改后的数组 | <en/> modified array\n * @param key - <zh/> 比较的 key | <en/> key to compare\n * @param comparator - <zh/> 比较函数 | <en/> compare function\n * @returns <zh/> 数组差异 | <en/> array diff\n */\nexport function arrayDiff(original, modified, key, comparator = isEqual) {\n    const originalMap = new Map(original.map((d) => [key(d), d]));\n    const modifiedMap = new Map(modified.map((d) => [key(d), d]));\n    const originalSet = new Set(originalMap.keys());\n    const modifiedSet = new Set(modifiedMap.keys());\n    const enter = [];\n    const update = [];\n    const exit = [];\n    const keep = [];\n    modifiedSet.forEach((key) => {\n        if (originalSet.has(key)) {\n            if (!comparator(originalMap.get(key), modifiedMap.get(key))) {\n                update.push(modifiedMap.get(key));\n            }\n            else {\n                keep.push(modifiedMap.get(key));\n            }\n        }\n        else {\n            enter.push(modifiedMap.get(key));\n        }\n    });\n    originalSet.forEach((key) => {\n        if (!modifiedSet.has(key)) {\n            exit.push(originalMap.get(key));\n        }\n    });\n    return { enter, exit, keep, update };\n}\n//# sourceMappingURL=diff.js.map","/**\n * <zh/> 设置图形实例的可见性\n *\n * <en/> Set the visibility of the shape instance\n * @param shape - <zh/> 图形实例 | <en/> shape instance\n * @param value - <zh/> 可见性 | <en/> visibility\n * @param filter - <zh/> 筛选出需要设置可见性的图形 | <en/> Filter out the shapes that need to set visibility\n * @remarks\n * <zh/> 在设置 enableCSSParsing 为 false 的情况下，复合图形无法继承父属性，因此需要对所有子图形应用相同的可见性\n *\n * <en/> After setting enableCSSParsing to false, the compound shape cannot inherit the parent attribute, so the same visibility needs to be applied to all child shapes\n */\nexport function setVisibility(shape, value, filter) {\n    const callback = (node) => {\n        if (filter && !filter(node))\n            return;\n        node.style.visibility = value;\n    };\n    shape.forEach((node) => {\n        callback(node);\n    });\n}\n//# sourceMappingURL=visibility.js.map","import { arrayDiff } from '../../utils/diff';\nimport { parseExtensions } from '../../utils/extension';\nimport { print } from '../../utils/print';\nimport { getExtension } from '../get';\nexport class ExtensionController {\n    constructor(context) {\n        this.extensions = [];\n        this.extensionMap = {};\n        this.context = context;\n    }\n    setExtensions(extensions) {\n        const stdExtensions = parseExtensions(this.context.graph, this.category, extensions);\n        const { enter, update, exit, keep } = arrayDiff(this.extensions, stdExtensions, (extension) => extension.key);\n        this.createExtensions(enter);\n        this.updateExtensions([...update, ...keep]);\n        this.destroyExtensions(exit);\n        this.extensions = stdExtensions;\n    }\n    createExtension(extension) {\n        const { category } = this;\n        const { key, type } = extension;\n        const Ctor = getExtension(category, type);\n        if (!Ctor)\n            return print.warn(`The extension ${type} of ${category} is not registered.`);\n        const instance = new Ctor(this.context, extension);\n        this.extensionMap[key] = instance;\n    }\n    createExtensions(extensions) {\n        extensions.forEach((extension) => this.createExtension(extension));\n    }\n    updateExtension(extension) {\n        const { key } = extension;\n        const instance = this.extensionMap[key];\n        if (instance) {\n            instance.update(extension);\n        }\n    }\n    updateExtensions(extensions) {\n        extensions.forEach((extension) => this.updateExtension(extension));\n    }\n    destroyExtension(key) {\n        const instance = this.extensionMap[key];\n        if (instance) {\n            instance.destroy();\n            delete this.extensionMap[key];\n        }\n    }\n    destroyExtensions(extensions) {\n        extensions.forEach(({ key }) => this.destroyExtension(key));\n    }\n    destroy() {\n        Object.values(this.extensionMap).forEach((extension) => extension.destroy());\n        // @ts-expect-error force delete\n        this.context = {};\n        this.extensions = [];\n        this.extensionMap = {};\n    }\n}\n/**\n * <zh/> 模块实例基类\n *\n * <en/> Base class for extension instance\n */\nexport class BaseExtension {\n    constructor(context, options) {\n        this.events = [];\n        this.destroyed = false;\n        this.context = context;\n        this.options = options;\n    }\n    update(options) {\n        this.options = Object.assign(this.options, options);\n    }\n    destroy() {\n        // @ts-expect-error force delete\n        this.context = {};\n        // @ts-expect-error force delete\n        this.options = {};\n        this.destroyed = true;\n    }\n}\n//# sourceMappingURL=index.js.map","/**\n * <zh/> 将模块配置项转换为标准模块格式\n *\n * <en/> Convert extension options to standard format\n * @param graph - <zh/> 图实例 <en/> graph instance\n * @param category - <zh/> 模块类型 <en/> extension type\n * @param extensions - <zh/> 模块配置项 <en/> extension options\n * @returns <zh/> 标准模块配置项 <en/> Standard extension options\n */\nexport function parseExtensions(graph, category, extensions) {\n    const counter = {};\n    const getKey = (type) => {\n        if (!(type in counter))\n            counter[type] = 0;\n        return `${category}-${type}-${counter[type]++}`;\n    };\n    return extensions.map((extension) => {\n        if (typeof extension === 'string') {\n            return { type: extension, key: getKey(extension) };\n        }\n        if (typeof extension === 'function') {\n            return extension.call(graph);\n        }\n        if (extension.key)\n            return extension;\n        return Object.assign(Object.assign({}, extension), { key: getKey(extension.type) });\n    });\n}\n//# sourceMappingURL=extension.js.map","import { BaseExtension } from '../registry/extension';\n/**\n * <zh/> 交互的基类\n *\n * <en/> Base class for behaviors\n */\nexport class BaseBehavior extends BaseExtension {\n}\n//# sourceMappingURL=base-behavior.js.map","import { groupBy, isFunction, throttle } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport { getExpandedBBox } from '../utils/bbox';\nimport { getNodeCentralities } from '../utils/centrality';\nimport { arrayDiff } from '../utils/diff';\nimport { setVisibility } from '../utils/visibility';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 标签自适应显示\n *\n * <en/> Auto Adapt Label\n * @remarks\n * <zh/> 标签自适应显示是一种动态标签管理策略，旨在根据当前可视范围的空间分配、节点重要性等因素，智能调整哪些标签应显示或隐藏。通过对可视区域的实时分析，确保用户在不同的交互场景下获得最相关最清晰的信息展示，同时避免视觉过载和信息冗余。\n *\n * <en/ >Label Adaptive Display is a dynamic label management strategy designed to intelligently adjust which labels should be shown or hidden based on factors such as the spatial allocation of the current viewport and node importance. By analyzing the visible area in real-time, it ensures that users receive the most relevant and clear information display in various interactive scenarios, while avoiding visual overload and information redundancy.\n */\nexport class AutoAdaptLabel extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, AutoAdaptLabel.defaultOptions, options));\n        /**\n         * <zh/> 检查当前包围盒是否有足够的空间进行展示；如果与已经展示的包围盒有重叠，则不会展示\n         *\n         * <en/> Check whether the current bounding box has enough space to display; if it overlaps with the displayed bounding box, it will not be displayed\n         * @param bbox - bbox\n         * @param bboxes - occupied bboxes which are already shown\n         * @returns whether the bbox is overlapping with the bboxes or outside the viewpointBounds\n         */\n        this.isOverlapping = (bbox, bboxes) => {\n            return bboxes.some((b) => bbox.intersects(b));\n        };\n        this.occupiedBounds = [];\n        this.detectLabelCollision = (elements) => {\n            const viewport = this.context.viewport;\n            const res = { show: [], hide: [] };\n            this.occupiedBounds = [];\n            elements.forEach((element) => {\n                const labelBounds = element.getShape('label').getRenderBounds();\n                if (viewport.isInViewport(labelBounds, true) && !this.isOverlapping(labelBounds, this.occupiedBounds)) {\n                    res.show.push(element);\n                    this.occupiedBounds.push(getExpandedBBox(labelBounds, this.options.padding));\n                }\n                else {\n                    res.hide.push(element);\n                }\n            });\n            return res;\n        };\n        this.hideLabelIfExceedViewport = (prevElementsInView, currentElementsInView) => {\n            const { exit } = arrayDiff(prevElementsInView, currentElementsInView, (d) => d.id);\n            exit === null || exit === void 0 ? void 0 : exit.forEach(this.hideLabel);\n        };\n        this.nodeCentralities = new Map();\n        this.sortNodesByCentrality = (nodes, centrality) => {\n            const { model } = this.context;\n            const graphData = model.getData();\n            const getRelatedEdgesData = model.getRelatedEdgesData.bind(model);\n            const nodesWithCentrality = nodes.map((node) => {\n                if (!this.nodeCentralities.has(node.id)) {\n                    this.nodeCentralities = getNodeCentralities(graphData, getRelatedEdgesData, centrality);\n                }\n                return { node, centrality: this.nodeCentralities.get(node.id) };\n            });\n            return nodesWithCentrality.sort((a, b) => b.centrality - a.centrality).map((item) => item.node);\n        };\n        this.sortLabelElementsInView = (labelElements) => {\n            const { sort, sortNode, sortCombo, sortEdge } = this.options;\n            const { model } = this.context;\n            if (isFunction(sort))\n                return labelElements.sort((a, b) => sort(model.getElementDataById(a.id), model.getElementDataById(b.id)));\n            const { node: nodes = [], edge: edges = [], combo: combos = [] } = groupBy(labelElements, (el) => el.type);\n            const sortedCombos = isFunction(sortCombo)\n                ? combos.sort((a, b) => sortCombo(...model.getComboData([a.id, b.id])))\n                : combos;\n            const sortedNodes = isFunction(sortNode)\n                ? nodes.sort((a, b) => sortNode(...model.getNodeData([a.id, b.id])))\n                : this.sortNodesByCentrality(nodes, sortNode);\n            const sortedEdges = isFunction(sortEdge)\n                ? edges.sort((a, b) => sortEdge(...model.getEdgeData([a.id, b.id])))\n                : edges;\n            return [...sortedCombos, ...sortedNodes, ...sortedEdges];\n        };\n        this.labelElementsInView = [];\n        this.isFirstRender = true;\n        this.onToggleVisibility = (event) => {\n            var _a;\n            // @ts-expect-error missing type\n            if (((_a = event.data) === null || _a === void 0 ? void 0 : _a.stage) === 'zIndex')\n                return;\n            if (!this.validate(event)) {\n                if (this.hiddenElements.size > 0) {\n                    this.hiddenElements.forEach(this.showLabel);\n                    this.hiddenElements.clear();\n                }\n                return;\n            }\n            const labelElementsInView = this.isFirstRender ? this.getLabelElements() : this.getLabelElementsInView();\n            this.hideLabelIfExceedViewport(this.labelElementsInView, labelElementsInView);\n            this.labelElementsInView = labelElementsInView;\n            // 根据元素的重要性从高到低排序，重要性越高的元素其标签显示优先级越高；通常 combo > node > edge\n            // Sort elements by their importance in descending order; elements with higher importance have higher label display priority; usually combo > node > edge\n            const sortedElements = this.sortLabelElementsInView(this.labelElementsInView);\n            const { show, hide } = this.detectLabelCollision(sortedElements);\n            for (let i = show.length - 1; i >= 0; i--) {\n                this.showLabel(show[i]);\n            }\n            hide.forEach(this.hideLabel);\n        };\n        this.hiddenElements = new Map();\n        this.hideLabel = (element) => {\n            const label = element.getShape('label');\n            if (label)\n                setVisibility(label, 'hidden');\n            this.hiddenElements.set(element.id, element);\n        };\n        this.showLabel = (element) => {\n            const label = element.getShape('label');\n            if (label)\n                setVisibility(label, 'visible');\n            element.toFront();\n            this.hiddenElements.delete(element.id);\n        };\n        this.onTransform = throttle(this.onToggleVisibility, this.options.throttle, { leading: true });\n        this.enableToggle = true;\n        this.toggle = (event) => {\n            if (!this.enableToggle)\n                return;\n            this.onToggleVisibility(event);\n        };\n        this.onBeforeRender = () => {\n            this.enableToggle = false;\n        };\n        this.onAfterRender = (event) => {\n            this.onToggleVisibility(event);\n            this.enableToggle = true;\n        };\n        this.bindEvents();\n    }\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n        this.onToggleVisibility({});\n    }\n    getLabelElements() {\n        // @ts-expect-error access private property\n        const { elementMap } = this.context.element;\n        const elements = [];\n        for (const key in elementMap) {\n            const element = elementMap[key];\n            if (element.isVisible() && element.getShape('label')) {\n                elements.push(element);\n            }\n        }\n        return elements;\n    }\n    getLabelElementsInView() {\n        const viewport = this.context.viewport;\n        return this.getLabelElements().filter((node) => viewport.isInViewport(node.getShape('key').getRenderBounds()));\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        graph.on(GraphEvent.BEFORE_RENDER, this.onBeforeRender);\n        graph.on(GraphEvent.AFTER_RENDER, this.onAfterRender);\n        graph.on(GraphEvent.AFTER_DRAW, this.toggle);\n        graph.on(GraphEvent.AFTER_LAYOUT, this.toggle);\n        graph.on(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(GraphEvent.BEFORE_RENDER, this.onBeforeRender);\n        graph.off(GraphEvent.AFTER_RENDER, this.onAfterRender);\n        graph.off(GraphEvent.AFTER_DRAW, this.toggle);\n        graph.off(GraphEvent.AFTER_LAYOUT, this.toggle);\n        graph.off(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nAutoAdaptLabel.defaultOptions = {\n    enable: true,\n    throttle: 100,\n    padding: 0,\n    sortNode: { type: 'degree' },\n};\n//# sourceMappingURL=auto-adapt-label.js.map","import { isVector2 } from './is';\nconst VECTOR_ZERO = [0, 0, 0];\n/**\n * <zh/> 两个向量求和\n *\n * <en/> Adds two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量的和 | <en/> The sum of the two vectors\n */\nexport function add(a, b) {\n    return a.map((v, i) => v + b[i]);\n}\n/**\n * <zh/> 两个向量求差\n *\n * <en/> Subtracts two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量的差 | <en/> The difference of the two vectors\n */\nexport function subtract(a, b) {\n    return a.map((v, i) => v - b[i]);\n}\n/**\n * <zh/> 两个向量求积或者向量和标量求积\n *\n * <en/> Multiplies two vectors or a vector and a scalar\n * @param a - <zh/> 向量 | <en/> The vector\n * @param b - <zh/> 向量或者标量 | <en/> The vector or scalar\n * @returns <zh/> 两个向量的积或者向量和标量的积 | <en/> The product of the two vectors or the product of the vector and scalar\n */\nexport function multiply(a, b) {\n    if (typeof b === 'number')\n        return a.map((v) => v * b);\n    return a.map((v, i) => v * b[i]);\n}\n/**\n * <zh/> 两个向量求商或者向量和标量求商\n *\n * <en/> Divides two vectors or a vector and a scalar\n * @param a - <zh/> 向量 | <en/> The vector\n * @param b - <zh/> 向量或者标量 | <en/> The vector or scalar\n * @returns <zh/> 两个向量的商或者向量和标量的商 | <en/> The quotient of the two vectors or the quotient of the vector and scalar\n */\nexport function divide(a, b) {\n    if (typeof b === 'number')\n        return a.map((v) => v / b);\n    return a.map((v, i) => v / b[i]);\n}\n/**\n * <zh/> 两个向量求点积\n *\n * <en/> Calculates the dot product of two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量的点积 | <en/> The dot product of the two vectors\n */\nexport function dot(a, b) {\n    return a.reduce((sum, v, i) => sum + v * b[i], 0);\n}\n/**\n * <zh/> 两个二维向量求叉积\n *\n * <en/> Calculates the cross product of two vectors in three-dimensional Euclidean space\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量的叉积 | <en/> The cross product of the two vectors\n */\nexport function cross(a, b) {\n    const a2 = toVector3(a);\n    const b2 = toVector3(b);\n    return [a2[1] * b2[2] - a2[2] * b2[1], a2[2] * b2[0] - a2[0] * b2[2], a2[0] * b2[1] - a2[1] * b2[0]];\n}\n/**\n * <zh/> 向量缩放\n *\n * <en/> Scales a vector by a scalar number\n * @param a  - <zh/> 向量 | <en/> The vector to scale\n * @param s - <zh/> 缩放系数 | <en/> Scale factor\n * @returns <zh/> 缩放后的向量 | <en/> The scaled vector\n */\nexport function scale(a, s) {\n    return a.map((v) => v * s);\n}\n/**\n * <zh/> 计算两个向量间的欧几里得距离\n *\n * <en/> Calculates the Euclidean distance between two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量间的距离 | <en/> The distance between the two vectors\n */\nexport function distance(a, b) {\n    return Math.sqrt(a.reduce((sum, v, i) => sum + Math.pow((v - b[i] || 0), 2), 0));\n}\n/**\n * <zh/> 计算两个向量间的曼哈顿距离\n *\n * <en/> Calculates the Manhattan distance between two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量间的距离 | <en/> The distance between the two vectors\n */\nexport function manhattanDistance(a, b) {\n    return a.reduce((sum, v, i) => sum + Math.abs(v - b[i]), 0);\n}\n/**\n * <zh/> 标准化向量（使长度为 1）\n *\n * <en/> Normalizes a vector (making its length 1)\n * @param a - <zh/> 要标准化的向量 | <en/> The vector to normalize\n * @returns <zh/> 标准化后的向量 | <en/> The normalized vector\n */\nexport function normalize(a) {\n    const length = a.reduce((sum, v) => sum + Math.pow(v, 2), 0);\n    return a.map((v) => v / Math.sqrt(length));\n}\n/**\n * <zh/> 计算两个向量间的夹角，输出为锐角余弦值\n *\n * <en/> Get the angle between two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @param clockwise - <zh/> 是否顺时针 | <en/> Whether to calculate the angle in a clockwise direction\n * @returns  <zh/> 弧度值 | <en/> The angle in radians\n */\nexport function angle(a, b, clockwise = false) {\n    const determinant = a[0] * b[1] - a[1] * b[0];\n    let angle = Math.acos(multiply(a, b).reduce((sum, v) => sum + v, 0) /\n        (distance(a, VECTOR_ZERO) * distance(b, VECTOR_ZERO)));\n    // If clockwise is true and determinant is negative, adjust the angle\n    if (clockwise && determinant < 0) {\n        angle = 2 * Math.PI - angle;\n    }\n    return angle;\n}\n/**\n * <zh/> 判断两个向量是否完全相等（使用 === 比较）\n *\n * <en/> Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns  - <zh/> 是否相等 | <en/> Whether or not the vectors are equal\n */\nexport function exactEquals(a, b) {\n    return a.every((v, i) => v === b[i]);\n}\n/**\n * <zh/> 计算向量的垂直向量\n *\n * <en/> Calculates the perpendicular vector to a given vector\n * @param a - <zh/> 原始向量 | <en/> The original vector\n * @param clockwise - <zh/> 是否顺时针 | <en/> Whether to calculate the perpendicular vector in a clockwise direction\n * @returns <zh/> 原始向量的垂直向量 | <en/> The perpendicular vector to the original vector\n */\nexport function perpendicular(a, clockwise = true) {\n    return clockwise ? [-a[1], a[0]] : [a[1], -a[0]];\n}\n/**\n * <zh/> 计算向量的模\n *\n * <en/> Calculates the modulus of a vector\n * @param a - <zh/> 原始向量 | <en/> The original vector\n * @param b - <zh/> 模 | <en/> The modulus\n * @returns - <zh/> 向量的模 | <en/> The modulus of the vector\n */\nexport function mod(a, b) {\n    return a.map((v) => v % b);\n}\n/**\n * <zh/> 向量强制转换为二维向量\n *\n * <en/> Force vector to be two-dimensional\n * @param a - <zh/> 原始向量 | <en/> The original vector\n * @returns <zh/> 二维向量 | <en/> Two-dimensional vector\n */\nexport function toVector2(a) {\n    return [a[0], a[1]];\n}\n/**\n * <zh/> 向量强制转换为三维向量\n *\n * <en/> Force vector to be three-dimensional\n * @param a - <zh/> 原始向量 | <en/> The original vector\n * @returns  - <zh/> 三维向量 | <en/> Three-dimensional vector\n */\nexport function toVector3(a) {\n    return isVector2(a) ? [a[0], a[1], 0] : a;\n}\n/**\n * <zh/> 计算向量与 x 轴正方向的夹角（弧度制）\n *\n * <en/> The angle between the vector and the positive direction of the x-axis (radians)\n * @param a - <zh/> 向量 | <en/> The vector\n * @returns <zh/> 弧度值 | <en/> The angle in radians\n */\nexport function rad(a) {\n    const [x, y] = a;\n    if (!x && !y)\n        return 0;\n    return Math.atan2(y, x);\n}\n//# sourceMappingURL=vector.js.map","import { isBetween } from './math';\nimport { cross, subtract } from './vector';\n/**\n * <zh/> 判断两条线段是否平行\n *\n * <en/> Judge whether two line segments are parallel\n * @param l1 - <zh/> 第一条线段 | <en/> the first line segment\n * @param l2 - <zh/> 第二条线段 | <en/> the second line segment\n * @returns <zh/> 是否平行 | <en/> whether parallel or not\n */\nexport function isLinesParallel(l1, l2) {\n    const [p1, p2] = l1;\n    const [p3, p4] = l2;\n    const v1 = subtract(p1, p2);\n    const v2 = subtract(p3, p4);\n    return cross(v1, v2).every((v) => v === 0);\n}\n/**\n * <zh/> 获取两条线段的交点\n *\n * <en/> Get the intersection of two line segments\n * @param l1 - <zh/> 第一条线段 | <en/> the first line segment\n * @param l2 - <zh/> 第二条线段 | <en/> the second line segment\n * @param extended - <zh/> 是否包含延长线上的交点 | <en/> whether to include the intersection on the extension line\n * @returns <zh/> 交点 | <en/> intersection\n */\nexport function getLinesIntersection(l1, l2, extended = false) {\n    if (isLinesParallel(l1, l2))\n        return undefined;\n    const [p1, p2] = l1;\n    const [p3, p4] = l2;\n    const t = ((p1[0] - p3[0]) * (p3[1] - p4[1]) - (p1[1] - p3[1]) * (p3[0] - p4[0])) /\n        ((p1[0] - p2[0]) * (p3[1] - p4[1]) - (p1[1] - p2[1]) * (p3[0] - p4[0]));\n    const u = p4[0] - p3[0]\n        ? (p1[0] - p3[0] + t * (p2[0] - p1[0])) / (p4[0] - p3[0])\n        : (p1[1] - p3[1] + t * (p2[1] - p1[1])) / (p4[1] - p3[1]);\n    if (!extended && (!isBetween(t, 0, 1) || !isBetween(u, 0, 1)))\n        return undefined;\n    return [p1[0] + t * (p2[0] - p1[0]), p1[1] + t * (p2[1] - p1[1])];\n}\n//# sourceMappingURL=line.js.map","import { isBetween } from './math';\n/**\n * <zh/> 解析位置\n *\n * <en/> Parse position\n * @param placement - <zh/> 位置 | <en/> placement\n * @returns <zh/> 相对位置 | <en/> relative placement\n */\nexport function parsePlacement(placement) {\n    if (Array.isArray(placement)) {\n        return isBetween(placement[0], 0, 1) && isBetween(placement[1], 0, 1) ? placement : [0.5, 0.5];\n    }\n    const direction = placement.split('-');\n    const x = direction.includes('left') ? 0 : direction.includes('right') ? 1 : 0.5;\n    const y = direction.includes('top') ? 0 : direction.includes('bottom') ? 1 : 0.5;\n    return [x, y];\n}\n//# sourceMappingURL=placement.js.map","import { parseAnchor } from './anchor';\nimport { parsePlacement } from './placement';\n/**\n * <zh/> 获取节点/ combo 的位置坐标\n *\n * <en/> Get the position of node/combo\n * @param datum - <zh/> 节点/ combo 的数据 | <en/> data of node/combo\n * @returns - <zh/> 坐标 | <en/> position\n */\nexport function positionOf(datum) {\n    const { x = 0, y = 0, z = 0 } = datum.style || {};\n    return [+x, +y, +z];\n}\n/**\n * <zh/> 检查数据是否有位置坐标\n *\n * <en/> Check if the data has a position coordinate\n * @param datum - <zh/> 节点/ combo 的数据 | <en/> data of node/combo\n * @returns - <zh/> 是否有位置坐标 | <en/> Whether there is a position coordinate\n */\nexport function hasPosition(datum) {\n    const { x, y, z } = datum.style || {};\n    return x !== undefined || y !== undefined || z !== undefined;\n}\n/**\n * <zh/> 获取相对位置坐标\n *\n * <en/> Get position by relative placement\n * @param bbox - <zh/> 元素包围盒 | <en/> element bounding box\n * @param placement - <zh/> 相对于元素的位置 | <en/> Point relative to element\n * @returns - <zh/> 坐标 | <en/> position\n */\nexport function getXYByRelativePlacement(bbox, placement) {\n    const [x, y] = placement;\n    const { min, max } = bbox;\n    return [min[0] + x * (max[0] - min[0]), min[1] + y * (max[1] - min[1])];\n}\n/**\n * <zh/> 获取位置坐标\n *\n * <en/> Get position by placement\n * @param bbox - <zh/> 元素包围盒 | <en/> element bounding box\n * @param placement - <zh/> 相对于元素的位置 | <en/> Point relative to element\n * @returns - <zh/> 坐标 | <en/> position\n */\nexport function getXYByPlacement(bbox, placement = 'center') {\n    const relativePlacement = parsePlacement(placement);\n    return getXYByRelativePlacement(bbox, relativePlacement);\n}\n/**\n * <zh/> 获取锚点坐标\n *\n * <en/> Get anchor position\n * @param bbox - <zh/> 元素包围盒 | <en/> element bounding box\n * @param anchor - <zh/> 锚点位置 | <en/> Anchor\n * @returns - <zh/> 坐标 | <en/> position\n */\nexport function getXYByAnchor(bbox, anchor) {\n    const parsedAnchor = parseAnchor(anchor);\n    return getXYByRelativePlacement(bbox, parsedAnchor);\n}\n/**\n * <zh/> 通过 rect points 路径点获取 position 方位配置.\n *\n * <en/> The rect points command is used to obtain the position and orientation configuration.\n * @param points Points\n * @returns `{ left: number; right: number; top: number; bottom: number }`\n */\nexport const getPositionByRectPoints = (points) => {\n    const [p1, p2] = points;\n    return {\n        left: Math.min(p1[0], p2[0]),\n        right: Math.max(p1[0], p2[0]),\n        top: Math.min(p1[1], p2[1]),\n        bottom: Math.max(p1[1], p2[1]),\n    };\n};\n//# sourceMappingURL=position.js.map","import { isEqual } from '@antv/util';\nimport { getBBoxHeight, getBBoxWidth } from './bbox';\nimport { getLinesIntersection, isLinesParallel } from './line';\nimport { getXYByPlacement } from './position';\nimport { add, distance, divide, normalize, subtract, toVector2 } from './vector';\n/**\n * <zh/> 将对象坐标转换为数组坐标\n * <en/> Convert object coordinates to array coordinates\n * @param point - <zh/> 对象坐标 | <en/> object coordinates\n * @returns <zh/> 数组坐标 | <en/> array coordinates\n */\nexport function parsePoint(point) {\n    var _a;\n    return [point.x, point.y, (_a = point.z) !== null && _a !== void 0 ? _a : 0];\n}\n/**\n * <zh/> 将数组坐标转换为对象坐标\n *\n * <en/> Convert array coordinates to object coordinates\n * @param point - <zh/> 数组坐标 | <en/> array coordinates\n * @returns <zh/> 对象坐标 | <en/> object coordinates\n */\nexport function toPointObject(point) {\n    var _a;\n    return { x: point[0], y: point[1], z: (_a = point[2]) !== null && _a !== void 0 ? _a : 0 };\n}\n/**\n * <zh/> 根据 X 轴坐标排序\n * <en/> Sort by X-axis coordinates\n * @param points - <zh/> 点集 | <en/> point set\n * @returns <zh/> 排序后的点集 | <en/> sorted point set\n */\nexport function sortByX(points) {\n    return points.sort((a, b) => a[0] - b[0] || a[1] - b[1]);\n}\n/**\n * <zh/> 点集去重\n *\n * <en/> Deduplicate point set\n * @param points - <zh/> 点集 | <en/> pointset\n * @returns <zh/> 去重后的点集 | <en/> deduplicated pointset\n */\nexport function deduplicate(points) {\n    const set = new Set();\n    return points.filter((p) => {\n        const key = p.join(',');\n        if (set.has(key))\n            return false;\n        set.add(key);\n        return true;\n    });\n}\n/**\n * <zh/> 对点格式化，精确到 `digits` 位的数字\n *\n * <en/> Round the point to the given precision\n * @param point - <zh/> 要舍入的点 | <en/> the point to round\n * @param digits - <zh/> 小数点后的位数 | <en/> the number of digits after the decimal point\n * @returns <zh/> 舍入后的点 | <en/> the rounded point\n */\nexport function round(point, digits = 0) {\n    return point.map((p) => parseFloat(p.toFixed(digits)));\n}\n/**\n * <zh/> 移动点，将点朝向参考点移动一定的距离\n *\n * <en/> Move `p` point along the line starting from `ref` to this point by a certain `distance`\n * @param p - <zh/> 要移动的点 | <en/> the point to move\n * @param ref - <zh/> 参考点 | <en/> the reference point\n * @param distance - <zh/> 移动的距离 | <en/> the distance to move\n * @param reverse\n * @returns <zh/> 移动后的点 | <en/> the moved point\n */\nexport function moveTo(p, ref, distance, reverse = false) {\n    if (isEqual(p, ref))\n        return p;\n    const direction = reverse ? subtract(p, ref) : subtract(ref, p);\n    const normalizedDirection = normalize(direction);\n    const moveVector = [normalizedDirection[0] * distance, normalizedDirection[1] * distance];\n    return add(toVector2(p), moveVector);\n}\n/**\n * <zh/> 判断两个点是否在同一水平线上\n *\n * <en/> whether two points are on the same horizontal line\n * @param p1 - <zh/> 第一个点 | <en/> the first point\n * @param p2 - <zh/> 第二个点 | <en/> the second point\n * @returns <zh/> 返回两个点是否在同一水平线上 | <en/> is horizontal or not\n */\nexport function isHorizontal(p1, p2) {\n    return p1[1] === p2[1];\n}\n/**\n * <zh/> 判断两个点是否在同一垂直线上\n *\n * <en/> whether two points are on the same vertical line\n * @param p1 - <zh/> 第一个点 | <en/> the first point\n * @param p2 - <zh/> 第二个点 | <en/> the second point\n * @returns <zh/> 返回两个点是否在同一垂直线上 | <en/> is vertical or not\n */\nexport function isVertical(p1, p2) {\n    return p1[0] === p2[0];\n}\n/**\n * <zh/> 判断两个点是否正交，即是否在同一水平线或垂直线上\n *\n * <en/> Judges whether two points are orthogonal, that is, whether they are on the same horizontal or vertical line\n * @param p1 - <zh/> 第一个点 | <en/> the first point\n * @param p2 - <zh/> 第二个点 | <en/> the second point\n * @returns <zh/> 是否正交 | <en/> whether orthogonal or not\n */\nexport function isOrthogonal(p1, p2) {\n    return isHorizontal(p1, p2) || isVertical(p1, p2);\n}\n/**\n * <zh/> 判断是否三点共线\n *\n * <en/> Judge whether three points are collinear\n * @param p1 - <zh/> 第一个点 | <en/> the first point\n * @param p2 - <zh/> 第二个点 | <en/> the second point\n * @param p3 - <zh/> 第三个点 | <en/> the third point\n * @returns <zh/> 是否三点共线 | <en/> whether three points are collinear\n */\nexport function isCollinear(p1, p2, p3) {\n    return isLinesParallel([p1, p2], [p2, p3]);\n}\n/**\n * <zh/> 计算一个点相对于另一个点的中心对称点\n *\n * <en/> Calculate the center symmetric point of a point relative to another point\n * @param p - <zh/> 要计算的点 | <en/> the point to calculate\n * @param center - <zh/> 中心点 | <en/> the center point\n * @returns <zh/> 中心对称点 | <en/> the center symmetric point\n */\nexport function getSymmetricPoint(p, center) {\n    return [2 * center[0] - p[0], 2 * center[1] - p[1]];\n}\n/**\n * <zh/> 获取从多边形中心到给定点的连线与多边形边缘的交点\n *\n * <en/> Gets the intersection point between the line from the center of a polygon to a given point and the polygon's edge\n * @param p - <zh/> 从多边形中心到多边形边缘的连线的外部点 | <en/> The point outside the polygon from which the line to the polygon's center is drawn\n * @param center - <zh/> 多边形中心 | <en/> the center of the polygon\n * @param points - <zh/> 多边形顶点 | <en/> the vertices of the polygon\n * @param isRelativePos - <zh/> 顶点坐标是否相对中心点 | <en/> whether the vertex coordinates are relative to the center point\n * @param useExtendedLine - <zh/> 是否使用延长线 | <en/> whether to use the extended line\n * @returns <zh/> 交点与相交线段 | <en/> intersection and intersecting line segment\n */\nexport function getPolygonIntersectPoint(p, center, points, isRelativePos = true, useExtendedLine = false) {\n    for (let i = 0; i < points.length; i++) {\n        let start = points[i];\n        let end = points[(i + 1) % points.length];\n        if (isRelativePos) {\n            start = add(center, start);\n            end = add(center, end);\n        }\n        const refP = useExtendedLine ? getSymmetricPoint(p, center) : p;\n        const intersect = getLinesIntersection([center, refP], [start, end]);\n        if (intersect) {\n            return {\n                point: intersect,\n                line: [start, end],\n            };\n        }\n    }\n    return {\n        point: center,\n        line: undefined,\n    };\n}\n/**\n * <zh/> 判断点是否在多边形内部\n *\n * <en/> Whether point is inside the polygon (ray algo)\n * @param point - <zh/> 点 | <en/> point\n * @param points - <zh/> 多边形顶点 | <en/> polygon vertices\n * @param start - <zh/> 起始索引 | <en/> start index\n * @param end - <zh/> 结束索引 | <en/> end index\n * @returns <zh/> 是否在多边形内部 | <en/> whether inside the polygon\n */\nexport function isPointInPolygon(point, points, start, end) {\n    const x = point[0];\n    const y = point[1];\n    let inside = false;\n    if (start === undefined)\n        start = 0;\n    if (end === undefined)\n        end = points.length;\n    const len = end - start;\n    for (let i = 0, j = len - 1; i < len; j = i++) {\n        const xi = points[i + start][0];\n        const yi = points[i + start][1];\n        const xj = points[j + start][0];\n        const yj = points[j + start][1];\n        const intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n        if (intersect)\n            inside = !inside;\n    }\n    return inside;\n}\n/**\n * <zh/> 获取给定点到矩形中心的连线与矩形边缘的交点\n *\n * <en/> Gets the intersection point between the line from the center of a rectangle to a given point and the rectangle's edge\n * @param p - <zh/> 从矩形中心到矩形边缘的连线的外部点 | <en/> The point outside the rectangle from which the line to the rectangle's center is drawn\n * @param bbox - <zh/> 矩形包围盒 | <en/> the bounding box of the rectangle\n * @param useExtendedLine - <zh/> 是否使用延长线 | <en/> whether to use the extended line\n * @returns <zh/> 交点 | <en/> intersection\n */\nexport function getRectIntersectPoint(p, bbox, useExtendedLine = false) {\n    const center = getXYByPlacement(bbox, 'center');\n    const corners = [\n        getXYByPlacement(bbox, 'left-top'),\n        getXYByPlacement(bbox, 'right-top'),\n        getXYByPlacement(bbox, 'right-bottom'),\n        getXYByPlacement(bbox, 'left-bottom'),\n    ];\n    return getPolygonIntersectPoint(p, center, corners, false, useExtendedLine).point;\n}\n/**\n * <zh/> 获取给定点到椭圆中心的连线与椭圆边缘的交点\n *\n * <en/> Gets the intersection point between the line from the center of an ellipse to a given point and the ellipse's edge\n * @param p - <zh/> 从椭圆中心到椭圆边缘的连线的外部点 | <en/> The point outside the ellipse from which the line to the ellipse's center is drawn\n * The point outside the ellipse from which the line to the ellipse's center is drawn.\n * @param bbox - <zh/> 椭圆包围盒 | <en/> the bounding box of the ellipse\n * @param useExtendedLine - <zh/> 是否使用延长线 | <en/> whether to use the extended line\n * @returns <zh/> 交点 | <en/> intersection\n */\nexport function getEllipseIntersectPoint(p, bbox, useExtendedLine = false) {\n    const center = bbox.center;\n    const refP = useExtendedLine ? getSymmetricPoint(p, center) : p;\n    const vec = subtract(refP, bbox.center);\n    const angle = Math.atan2(vec[1], vec[0]);\n    if (isNaN(angle))\n        return center;\n    const rx = getBBoxWidth(bbox) / 2;\n    const ry = getBBoxHeight(bbox) / 2;\n    const intersectX = center[0] + rx * Math.cos(angle);\n    const intersectY = center[1] + ry * Math.sin(angle);\n    return [intersectX, intersectY];\n}\n/**\n * <zh/> 从两组点中找到距离最近的两个点\n * @param group1 - <zh/> 第一组点 | <en/> the first group of points\n * @param group2 - <zh/> 第二组点 | <en/> the second group of points\n * @returns <zh/> 距离最近的两个点 | <en/> the nearest two points\n */\nexport function findNearestPoints(group1, group2) {\n    let minDistance = Infinity;\n    let nearestPoints = [group1[0], group2[0]];\n    group1.forEach((p1) => {\n        group2.forEach((p2) => {\n            const dist = distance(p1, p2);\n            if (dist < minDistance) {\n                minDistance = dist;\n                nearestPoints = [p1, p2];\n            }\n        });\n    });\n    return nearestPoints;\n}\n/**\n * <zh/> 从一组线段中找到距离给定点最近的线段\n *\n * <en/> Find the line segment closest to the given point from a group of line segments\n * @param point - <zh/> 给定点 | <en/> the given point\n * @param lines - <zh/> 一组线段 | <en/> a group of line segments\n * @returns <zh/> 距离最近的线段 | <en/> the nearest line segment\n */\nexport function findNearestLine(point, lines) {\n    let minDistance = Infinity;\n    let nearestLine = [\n        [0, 0],\n        [0, 0],\n    ];\n    lines.forEach((line) => {\n        const distance = getDistanceToLine(point, line);\n        if (distance < minDistance) {\n            minDistance = distance;\n            nearestLine = line;\n        }\n    });\n    return nearestLine;\n}\n/**\n * <zh/> 获取点到线段的距离\n *\n * <en/> Get the distance from a point to a line segment\n * @param point - <zh/> 点 | <en/> the point\n * @param line - <zh/> 线段 | <en/> the line segment\n * @returns <zh/> 点到线段的距离 | <en/> the distance from the point to the line segment\n */\nexport function getDistanceToLine(point, line) {\n    const nearestPoint = findNearestPointOnLine(point, line);\n    return distance(point, nearestPoint);\n}\n/**\n * <zh/> 获取线段上距离给定点最近的点\n *\n * <en/> Get the point on the line segment closest to the given point\n * @param point - <zh/> 给定点 | <en/> the given point\n * @param line - <zh/> 线段 | <en/> the line segment\n * @returns <zh/> 线段上距离给定点最近的点 | <en/> the point on the line segment closest to the given point\n */\nexport function findNearestPointOnLine(point, line) {\n    const [x1, y1] = line[0];\n    const [x2, y2] = line[1];\n    const [x3, y3] = point;\n    const px = x2 - x1;\n    const py = y2 - y1;\n    // 若线段实际上是一个点 | If the line segment is actually a point\n    if (px === 0 && py === 0) {\n        return [x1, y1];\n    }\n    let u = ((x3 - x1) * px + (y3 - y1) * py) / (px * px + py * py);\n    if (u > 1) {\n        u = 1;\n    }\n    else if (u < 0) {\n        u = 0;\n    }\n    const x = x1 + u * px;\n    const y = y1 + u * py;\n    return [x, y];\n}\n/**\n * <zh/> 获取点集的中心点\n *\n * <en/> Get the center point of a set of points\n * @param points - <zh/> 点集 | <en/> point set\n * @returns <zh/> 中心点 | <en/> center point\n */\nexport function centerOf(points) {\n    const totalPosition = points.reduce((acc, p) => add(acc, p), [0, 0]);\n    return divide(totalPosition, points.length);\n}\n/**\n * <zh/> 按顺时针或逆时针方向对点集排序\n *\n * <en/> Sort the point set in a clockwise or counterclockwise direction\n * @param points - <zh/> 点集 | <en/> point set\n * @param clockwise - <zh/> 是否顺时针 | <en/> whether clockwise\n * @returns <zh/> 排序后的点集 | <en/> sorted point set\n */\nexport function sortByClockwise(points, clockwise = true) {\n    const center = centerOf(points);\n    return points.sort(([x1, y1], [x2, y2]) => {\n        const angle1 = Math.atan2(y1 - center[1], x1 - center[0]);\n        const angle2 = Math.atan2(y2 - center[1], x2 - center[0]);\n        return clockwise ? angle2 - angle1 : angle1 - angle2;\n    });\n}\n/**\n * <zh/> 给定的起点和终点，返回一个由这两个点和它们的对角点组成的数组\n * @param start - <zh/> 起点 | <en/> start point\n * @param end - <zh/> 终点 | <en/> end point\n * @returns <zh/> 由这两个点和它们的对角点组成的数组 | <en/> an array consisting of these two points and their diagonal points\n */\nexport function getBoundingPoints(start, end) {\n    return [start, [start[0], end[1]], end, [end[0], start[1]]];\n}\n//# sourceMappingURL=point.js.map","import { CommonEvent } from '../constants';\n/**\n * <zh/> 捏合手势处理器\n *\n * <en/> Pinch gesture handler\n * @remarks\n * <zh/> 处理双指触摸事件，计算缩放比例并触发回调。通过跟踪两个触摸点的位置变化，计算两点间距离变化率来确定缩放比例。\n *\n * <en/> Handles two-finger touch events, calculates zoom ratio and triggers callbacks. Tracks position changes of two touch points to determine zoom ratio based on distance variation.\n */\nexport class PinchHandler {\n    constructor(emitter, phase, callback) {\n        this.phase = phase;\n        /**\n         * <zh/> 当前跟踪的触摸点集合\n         *\n         * <en/> Currently tracked touch points collection\n         */\n        this.pointerByTouch = [];\n        /**\n         * <zh/> 初始两点间距离\n         *\n         * <en/> Initial distance between two points\n         */\n        this.initialDistance = null;\n        this.emitter = emitter;\n        if (PinchHandler.instance) {\n            PinchHandler.callbacks[this.phase].push(callback);\n            return PinchHandler.instance;\n        }\n        this.onPointerDown = this.onPointerDown.bind(this);\n        this.onPointerMove = this.onPointerMove.bind(this);\n        this.onPointerUp = this.onPointerUp.bind(this);\n        this.bindEvents();\n        PinchHandler.instance = this;\n        PinchHandler.callbacks[this.phase].push(callback);\n    }\n    bindEvents() {\n        const { emitter } = this;\n        emitter.on(CommonEvent.POINTER_DOWN, this.onPointerDown);\n        emitter.on(CommonEvent.POINTER_MOVE, this.onPointerMove);\n        emitter.on(CommonEvent.POINTER_UP, this.onPointerUp);\n    }\n    /**\n     * <zh/> 更新指定指针的位置\n     *\n     * <en/> Update position of specified pointer\n     * @param pointerId - <zh/> 指针唯一标识符 | <en/> Pointer unique identifier<sup>1</sup>\n     * @param x - <zh/> 新的X坐标 | <en/> New X coordinate\n     * @param y - <zh/> 新的Y坐标 | <en/> New Y coordinate\n     */\n    updatePointerPosition(pointerId, x, y) {\n        const index = this.pointerByTouch.findIndex((p) => p.pointerId === pointerId);\n        if (index >= 0) {\n            this.pointerByTouch[index] = { x, y, pointerId };\n        }\n    }\n    /**\n     * <zh/> 处理指针按下事件\n     *\n     * <en/> Handle pointer down event\n     * @param event - <zh/> 指针事件对象 | <en/> Pointer event object\n     * @remarks\n     * <zh/> 当检测到两个触摸点时记录初始距离\n     *\n     * <en/> Record initial distance when detecting two touch points\n     */\n    onPointerDown(event) {\n        const { x, y } = event.client || {};\n        if (x === undefined || y === undefined)\n            return;\n        this.pointerByTouch.push({ x, y, pointerId: event.pointerId });\n        if (event.pointerType === 'touch' && this.pointerByTouch.length === 2) {\n            PinchHandler.isPinching = true;\n            const dx = this.pointerByTouch[0].x - this.pointerByTouch[1].x;\n            const dy = this.pointerByTouch[0].y - this.pointerByTouch[1].y;\n            this.initialDistance = Math.sqrt(dx * dx + dy * dy);\n            PinchHandler.callbacks.pinchstart.forEach((cb) => cb(event, { scale: 0 }));\n        }\n    }\n    /**\n     * <zh/> 处理指针移动事件\n     *\n     * <en/> Handle pointer move event\n     * @param event - <zh/> 指针事件对象 | <en/> Pointer event object\n     * @remarks\n     * <zh/> 当存在两个有效触摸点时计算缩放比例\n     *\n     * <en/> Calculate zoom ratio when two valid touch points exist\n     */\n    onPointerMove(event) {\n        if (this.pointerByTouch.length !== 2 || this.initialDistance === null)\n            return;\n        const { x, y } = event.client || {};\n        if (x === undefined || y === undefined)\n            return;\n        this.updatePointerPosition(event.pointerId, x, y);\n        const dx = this.pointerByTouch[0].x - this.pointerByTouch[1].x;\n        const dy = this.pointerByTouch[0].y - this.pointerByTouch[1].y;\n        const currentDistance = Math.sqrt(dx * dx + dy * dy);\n        const ratio = currentDistance / this.initialDistance;\n        PinchHandler.callbacks.pinchmove.forEach((cb) => cb(event, { scale: (ratio - 1) * 5 }));\n    }\n    /**\n     * <zh/> 处理指针抬起事件\n     *\n     * <en/> Handle pointer up event\n     * @param event\n     * @remarks\n     * <zh/> 重置触摸状态和初始距离\n     *\n     * <en/> Reset touch state and initial distance\n     */\n    onPointerUp(event) {\n        var _a;\n        PinchHandler.callbacks.pinchend.forEach((cb) => cb(event, { scale: 0 }));\n        PinchHandler.isPinching = false;\n        this.initialDistance = null;\n        this.pointerByTouch = [];\n        (_a = PinchHandler.instance) === null || _a === void 0 ? void 0 : _a.tryDestroy();\n    }\n    /**\n     * <zh/> 销毁捏合手势相关监听\n     *\n     * <en/> Destroy pinch gesture listeners\n     * @remarks\n     * <zh/> 移除指针按下、移动、抬起事件的监听\n     *\n     * <en/> Remove listeners for pointer down, move, and up events\n     */\n    destroy() {\n        this.emitter.off(CommonEvent.POINTER_DOWN, this.onPointerDown);\n        this.emitter.off(CommonEvent.POINTER_MOVE, this.onPointerMove);\n        this.emitter.off(CommonEvent.POINTER_UP, this.onPointerUp);\n        PinchHandler.instance = null;\n    }\n    /**\n     * <zh/> 解绑指定阶段的手势回调\n     * <en/> Unregister gesture callback for specific phase\n     * @param phase - <zh/> 手势阶段：开始(pinchstart)/移动(pinchmove)/结束(pinchend) | <en/> Gesture phase: start/move/end\n     * @param callback - <zh/> 要解绑的回调函数 | <en/> Callback function to unregister\n     * @remarks\n     * <zh/> 从指定阶段的回调列表中移除特定回调，当所有回调都解绑后自动销毁事件监听\n     * <en/> Remove specific callback from the phase's callback list, auto-destroy event listeners when all callbacks are unregistered\n     */\n    off(phase, callback) {\n        const index = PinchHandler.callbacks[phase].indexOf(callback);\n        if (index > -1)\n            PinchHandler.callbacks[phase].splice(index, 1);\n        this.tryDestroy();\n    }\n    /**\n     * <zh/> 尝试销毁手势处理器\n     * <en/> Attempt to destroy the gesture handler\n     * @remarks\n     * <zh/> 当所有阶段（开始/移动/结束）的回调列表都为空时，执行实际销毁操作\n     * <en/> Perform actual destruction when all phase (pinchstart/pinchmove/pinchend) callback lists are empty\n     * <zh/> 自动解除事件监听并重置单例实例\n     * <en/> Automatically remove event listeners and reset singleton instance\n     */\n    tryDestroy() {\n        if (Object.values(PinchHandler.callbacks).every((arr) => arr.length === 0)) {\n            this.destroy();\n        }\n    }\n}\n/**\n * <zh/> 是否处于 Pinch 阶段\n *\n * <en/> Whether it is in the Pinch stage\n */\nPinchHandler.isPinching = false;\nPinchHandler.instance = null;\nPinchHandler.callbacks = { pinchstart: [], pinchmove: [], pinchend: [] };\n//# sourceMappingURL=pinch.js.map","import { isEqual, isString } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { PinchHandler } from './pinch';\nconst lowerCaseKeys = (keys) => keys.map((key) => (isString(key) ? key.toLocaleLowerCase() : key));\nexport class Shortcut {\n    constructor(emitter) {\n        this.map = new Map();\n        this.boundHandlePinch = () => { };\n        this.recordKey = new Set();\n        this.onKeyDown = (event) => {\n            if (!(event === null || event === void 0 ? void 0 : event.key))\n                return;\n            this.recordKey.add(event.key);\n            this.trigger(event);\n        };\n        this.onKeyUp = (event) => {\n            if (!(event === null || event === void 0 ? void 0 : event.key))\n                return;\n            this.recordKey.delete(event.key);\n        };\n        this.onWheel = (event) => {\n            this.triggerExtendKey(CommonEvent.WHEEL, event);\n        };\n        this.onDrag = (event) => {\n            this.triggerExtendKey(CommonEvent.DRAG, event);\n        };\n        this.handlePinch = (event, options) => {\n            this.triggerExtendKey(CommonEvent.PINCH, Object.assign(Object.assign({}, event), options));\n        };\n        this.onFocus = () => {\n            this.recordKey.clear();\n        };\n        this.emitter = emitter;\n        this.bindEvents();\n    }\n    bind(key, handler) {\n        if (key.length === 0)\n            return;\n        if (key.includes(CommonEvent.PINCH) && !this.pinchHandler) {\n            this.boundHandlePinch = this.handlePinch.bind(this);\n            this.pinchHandler = new PinchHandler(this.emitter, 'pinchmove', this.boundHandlePinch);\n        }\n        this.map.set(key, handler);\n    }\n    unbind(key, handler) {\n        this.map.forEach((h, k) => {\n            if (isEqual(k, key)) {\n                if (!handler || handler === h)\n                    this.map.delete(k);\n            }\n        });\n    }\n    unbindAll() {\n        this.map.clear();\n    }\n    match(key) {\n        // 排序\n        const recordKeyList = lowerCaseKeys(Array.from(this.recordKey)).sort();\n        const keyList = lowerCaseKeys(key).sort();\n        return isEqual(recordKeyList, keyList);\n    }\n    bindEvents() {\n        var _a;\n        const { emitter } = this;\n        emitter.on(CommonEvent.KEY_DOWN, this.onKeyDown);\n        emitter.on(CommonEvent.KEY_UP, this.onKeyUp);\n        emitter.on(CommonEvent.WHEEL, this.onWheel);\n        emitter.on(CommonEvent.DRAG, this.onDrag);\n        // 窗口重新获得焦点后清空按键，避免按键状态异常\n        // Clear the keys when the window regains focus to avoid abnormal key states\n        (_a = globalThis.addEventListener) === null || _a === void 0 ? void 0 : _a.call(globalThis, 'focus', this.onFocus);\n    }\n    trigger(event) {\n        this.map.forEach((handler, key) => {\n            if (this.match(key))\n                handler(event);\n        });\n    }\n    /**\n     * <zh/> 扩展 wheel, drag 操作\n     *\n     * <en/> Extend wheel, drag operations\n     * @param eventType - event name\n     * @param event - event\n     */\n    triggerExtendKey(eventType, event) {\n        this.map.forEach((handler, key) => {\n            if (key.includes(eventType)) {\n                if (isEqual(Array.from(this.recordKey), key.filter((k) => k !== eventType))) {\n                    handler(event);\n                }\n            }\n        });\n    }\n    destroy() {\n        var _a, _b;\n        this.unbindAll();\n        this.emitter.off(CommonEvent.KEY_DOWN, this.onKeyDown);\n        this.emitter.off(CommonEvent.KEY_UP, this.onKeyUp);\n        this.emitter.off(CommonEvent.WHEEL, this.onWheel);\n        this.emitter.off(CommonEvent.DRAG, this.onDrag);\n        (_a = this.pinchHandler) === null || _a === void 0 ? void 0 : _a.off('pinchmove', this.boundHandlePinch);\n        (_b = globalThis.removeEventListener) === null || _b === void 0 ? void 0 : _b.call(globalThis, 'blur', this.onFocus);\n    }\n}\n//# sourceMappingURL=shortcut.js.map","import { Rect } from '@antv/g';\nimport { deepMix, isFunction } from '@antv/util';\nimport { CanvasEvent, CommonEvent } from '../constants';\nimport { idOf } from '../utils/id';\nimport { getBoundingPoints, isPointInPolygon } from '../utils/point';\nimport { Shortcut } from '../utils/shortcut';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 框选一组元素\n *\n * <en/> Brush select elements\n */\nexport class BrushSelect extends BaseBehavior {\n    constructor(context, options) {\n        super(context, deepMix({}, BrushSelect.defaultOptions, options));\n        this.shortcut = new Shortcut(context.graph);\n        this.onPointerDown = this.onPointerDown.bind(this);\n        this.onPointerMove = this.onPointerMove.bind(this);\n        this.onPointerUp = this.onPointerUp.bind(this);\n        this.clearStates = this.clearStates.bind(this);\n        this.bindEvents();\n    }\n    /**\n     * Triggered when the pointer is pressed\n     * @param event - Pointer event\n     * @internal\n     */\n    onPointerDown(event) {\n        if (!this.validate(event) || !this.isKeydown() || this.startPoint)\n            return;\n        const { canvas, graph } = this.context;\n        const style = Object.assign({}, this.options.style);\n        // 根据缩放比例调整 lineWidth\n        // Adjust lineWidth according to the zoom ratio\n        if (this.options.style.lineWidth) {\n            style.lineWidth = +this.options.style.lineWidth / graph.getZoom();\n        }\n        this.rectShape = new Rect({ id: 'g6-brush-select', style });\n        canvas.appendChild(this.rectShape);\n        this.startPoint = [event.canvas.x, event.canvas.y];\n    }\n    /**\n     * Triggered when the pointer is moved\n     * @param event - Pointer event\n     * @internal\n     */\n    onPointerMove(event) {\n        var _a;\n        if (!this.startPoint)\n            return;\n        const { immediately, mode } = this.options;\n        this.endPoint = getCursorPoint(event);\n        (_a = this.rectShape) === null || _a === void 0 ? void 0 : _a.attr({\n            x: Math.min(this.endPoint[0], this.startPoint[0]),\n            y: Math.min(this.endPoint[1], this.startPoint[1]),\n            width: Math.abs(this.endPoint[0] - this.startPoint[0]),\n            height: Math.abs(this.endPoint[1] - this.startPoint[1]),\n        });\n        if (immediately && mode === 'default')\n            this.updateElementsStates(getBoundingPoints(this.startPoint, this.endPoint));\n    }\n    /**\n     * Triggered when the pointer is released\n     * @param event - Pointer event\n     * @internal\n     */\n    onPointerUp(event) {\n        if (!this.startPoint)\n            return;\n        if (!this.endPoint) {\n            this.clearBrush();\n            return;\n        }\n        this.endPoint = getCursorPoint(event);\n        this.updateElementsStates(getBoundingPoints(this.startPoint, this.endPoint));\n        this.clearBrush();\n    }\n    /**\n     * <zh/> 清除状态\n     *\n     * <en/> Clear state\n     * @internal\n     */\n    clearStates() {\n        if (this.endPoint)\n            return;\n        this.clearElementsStates();\n    }\n    /**\n     * <zh/> 清除画布上所有元素的状态\n     *\n     * <en/> Clear the state of all elements on the canvas\n     * @internal\n     */\n    clearElementsStates() {\n        const { graph } = this.context;\n        const states = Object.values(graph.getData()).reduce((acc, data) => {\n            return Object.assign({}, acc, data.reduce((acc, datum) => {\n                acc[idOf(datum)] = [];\n                return acc;\n            }, {}));\n        }, {});\n        graph.setElementState(states, this.options.animation);\n    }\n    /**\n     * <zh/> 更新选中的元素状态\n     *\n     * <en/> Update the state of the selected elements\n     * @param points - <zh/> 框选区域的顶点 | <en/> The vertex of the selection area\n     * @internal\n     */\n    updateElementsStates(points) {\n        const { graph } = this.context;\n        const { enableElements, state, mode, onSelect } = this.options;\n        const selectedIds = this.selector(graph, points, enableElements);\n        let states = {};\n        switch (mode) {\n            case 'union':\n                selectedIds.forEach((id) => {\n                    states[id] = [...graph.getElementState(id), state];\n                });\n                break;\n            case 'diff':\n                selectedIds.forEach((id) => {\n                    const prevStates = graph.getElementState(id);\n                    states[id] = prevStates.includes(state) ? prevStates.filter((s) => s !== state) : [...prevStates, state];\n                });\n                break;\n            case 'intersect':\n                selectedIds.forEach((id) => {\n                    const prevStates = graph.getElementState(id);\n                    states[id] = prevStates.includes(state) ? [state] : [];\n                });\n                break;\n            case 'default':\n            default:\n                selectedIds.forEach((id) => {\n                    states[id] = [state];\n                });\n                break;\n        }\n        if (isFunction(onSelect))\n            states = onSelect(states);\n        graph.setElementState(states, this.options.animation);\n    }\n    /**\n     * <zh/> 查找画布上在指定区域内显示的元素。当节点的包围盒中心在矩形内时，节点被选中；当边的两端节点在矩形内时，边被选中；当 combo 的包围盒中心在矩形内时，combo 被选中。\n     *\n     * <en/> Find the elements displayed in the specified area on the canvas. A node is selected if the center of its bbox is inside the rect; An edge is selected if both end nodes are inside the rect ;A combo is selected if the center of its bbox is inside the rect.\n     * @param graph - <zh/> 图实例 | <en/> Graph instance\n     * @param points - <zh/> 框选区域的顶点 | <en/> The vertex of the selection area\n     * @param itemTypes - <zh/> 元素类型 | <en/> Element type\n     * @returns <zh/> 选中的元素 ID 数组 | <en/> Selected element ID array\n     * @internal\n     */\n    selector(graph, points, itemTypes) {\n        if (!itemTypes || itemTypes.length === 0)\n            return [];\n        const elements = [];\n        const graphData = graph.getData();\n        itemTypes.forEach((itemType) => {\n            graphData[`${itemType}s`].forEach((datum) => {\n                const id = idOf(datum);\n                if (graph.getElementVisibility(id) !== 'hidden' && isPointInPolygon(graph.getElementPosition(id), points)) {\n                    elements.push(id);\n                }\n            });\n        });\n        // 如果边的两端节点都在框选范围内，则边也被选中 | If source node and target node are within the selection range, that edge is also selected\n        if (itemTypes.includes('edge')) {\n            const edges = graphData.edges;\n            edges === null || edges === void 0 ? void 0 : edges.forEach((edge) => {\n                const { source, target } = edge;\n                if (elements.includes(source) && elements.includes(target)) {\n                    elements.push(idOf(edge));\n                }\n            });\n        }\n        return elements;\n    }\n    clearBrush() {\n        var _a;\n        (_a = this.rectShape) === null || _a === void 0 ? void 0 : _a.remove();\n        this.rectShape = undefined;\n        this.startPoint = undefined;\n        this.endPoint = undefined;\n    }\n    /**\n     * <zh/> 当前按键是否和 trigger 配置一致\n     *\n     * <en/> Is the current key consistent with the trigger configuration\n     * @returns <zh/> 是否一致 | <en/> Is consistent\n     * @internal\n     */\n    isKeydown() {\n        const { trigger } = this.options;\n        const keys = (Array.isArray(trigger) ? trigger : [trigger]);\n        return this.shortcut.match(keys.filter((key) => key !== 'drag'));\n    }\n    /**\n     * <zh/> 验证是否启用框选\n     *\n     * <en/> Verify whether brush select is enabled\n     * @param event - <zh/> 事件 | <en/> Event\n     * @returns <zh/> 是否启用 | <en/> Whether to enable\n     * @internal\n     */\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        graph.on(CommonEvent.POINTER_DOWN, this.onPointerDown);\n        graph.on(CommonEvent.POINTER_MOVE, this.onPointerMove);\n        graph.on(CommonEvent.POINTER_UP, this.onPointerUp);\n        graph.on(CanvasEvent.CLICK, this.clearStates);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(CommonEvent.POINTER_DOWN, this.onPointerDown);\n        graph.off(CommonEvent.POINTER_MOVE, this.onPointerMove);\n        graph.off(CommonEvent.POINTER_UP, this.onPointerUp);\n        graph.off(CanvasEvent.CLICK, this.clearStates);\n    }\n    /**\n     * <zh/> 更新配置项\n     *\n     * <en/> Update configuration\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        this.unbindEvents();\n        this.options = deepMix(this.options, options);\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 销毁\n     *\n     * <en/> Destroy\n     * @internal\n     */\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nBrushSelect.defaultOptions = {\n    animation: false,\n    enable: true,\n    enableElements: ['node', 'combo', 'edge'],\n    immediately: false,\n    mode: 'default',\n    state: 'selected',\n    trigger: ['shift'],\n    style: {\n        width: 0,\n        height: 0,\n        lineWidth: 1,\n        fill: '#1677FF',\n        stroke: '#1677FF',\n        fillOpacity: 0.1,\n        zIndex: 2,\n        pointerEvents: 'none',\n    },\n};\nexport const getCursorPoint = (event) => {\n    return [event.canvas.x, event.canvas.y];\n};\n//# sourceMappingURL=brush-select.js.map","/**\n * <zh/> 根据不同的 node，自动计算 icon 的大小之后，乘以一下缩放系数，防止贴的太紧密\n *\n * <en/> According to the different nodes, the size of the icon is automatically calculated, and then multiplied by the following scaling factor to prevent it from being too close\n */\nexport const ICON_SIZE_RATIO = 0.8;\nexport const ELEMENT_TYPES = ['node', 'edge', 'combo'];\n//# sourceMappingURL=element.js.map","/**\n * <zh/> 执行深度优先遍历\n *\n * <en/> perform depth first traversal\n * @param node - <zh/> 起始节点 | <en/> start node\n * @param visitor - <zh/> 访问节点函数 | <en/> visitor function\n * @param navigator - <zh/> 获取子节点函数 | <en/> get children function\n * @param mode - <zh/> 访问模式，BT: 自底向上访问，TB: 自顶向下访问 | <en/> traverse mode, BT: bottom to top, TB: top to bottom\n * @param depth - <zh/> 当前深度 | <en/> current depth\n */\nexport function dfs(node, visitor, navigator, mode, depth = 0) {\n    if (mode === 'TB')\n        visitor(node, depth);\n    const children = navigator(node);\n    if (children) {\n        for (const child of children) {\n            dfs(child, visitor, navigator, mode, depth + 1);\n        }\n    }\n    if (mode === 'BT')\n        visitor(node, depth);\n}\n/**\n * <zh/> 执行广度优先遍历\n *\n * <en/> perform breadth first traversal\n * @param node - <zh/> 起始节点 | <en/> start node\n * @param visitor - <zh/> 访问节点函数 | <en/> visitor function\n * @param navigator - <zh/> 获取子节点函数 | <en/> get children function\n */\nexport function bfs(node, visitor, navigator) {\n    const queue = [[node, 0]];\n    while (queue.length) {\n        const [current, depth] = queue.shift();\n        visitor(current, depth);\n        const children = navigator(current);\n        if (children) {\n            for (const child of children) {\n                queue.push([child, depth + 1]);\n            }\n        }\n    }\n}\n//# sourceMappingURL=traverse.js.map","import { idOf } from './id';\nimport { bfs } from './traverse';\n/**\n * <zh/> 获取指定元素在 n 度关系内的所有元素的 ID\n *\n * <en/> Get the IDs of all elements within an n-degree relationship from the specified element\n * @remarks\n * <zh/> 对于节点，0 度关系是节点本身，1 度关系包括节点的直接相邻节点和边，以此类推。\n * 对于边，0 度关系是边本身，1 度关系包括边本身及其两个端点，以此类推。\n *\n * <en/> For a node, 0-degree relationship includes the node itself; 1-degree relationship includes the node's direct neighbors and their connecting edges, etc.\n * For an edge, 0-degree relationship includes the edge itself; 1-degree relationship includes the edge and its two endpoints, etc\n * @param graph - <zh/> 图实例 | <en/> graph instance\n * @param elementType - <zh/> 元素类型 | <en/> element type\n * @param elementId - <zh/> 起始元素的 ID | <en/> start element ID\n * @param degree - <zh/> 指定的度数 | <en/> the specified degree\n * @param direction - <zh/> 边的方向 | <en/> edge direction\n * @returns - <zh/> 返回节点和边的 ID 数组 | <en/> Returns an array of node and edge IDs\n */\nexport function getElementNthDegreeIds(graph, elementType, elementId, degree, direction = 'both') {\n    if (elementType === 'combo' || elementType === 'node') {\n        return getNodeNthDegreeIds(graph, elementId, degree, direction);\n    }\n    const edgeData = graph.getEdgeData(elementId);\n    if (!edgeData)\n        return [];\n    const sourceRelations = getNodeNthDegreeIds(graph, edgeData.source, degree - 1, direction);\n    const targetRelations = getNodeNthDegreeIds(graph, edgeData.target, degree - 1, direction);\n    return Array.from(new Set([...sourceRelations, ...targetRelations, elementId]));\n}\n/**\n * <zh/> 获取指定节点在 n 度关系内的所有元素的 ID\n *\n * <en/> Get all elements IDs within n-degree relationship of the specified node\n * @remarks\n * <zh/> 节点的 0 度关系是节点本身，1 度关系是节点的直接相邻节点和边，以此类推\n * @param direction\n * <en/> 0-degree relationship of a node is the node itself; 1-degree relationship is the node's neighboring nodes and related edges, etc\n * @param graph - <zh/> 图实例 | <en/> graph instance\n * @param startNodeId - <zh/> 起始节点的 ID | <en/> The ID of the starting node\n * @param degree - <zh/> 指定的度数 | <en/> The specified degree\n * @param direction - <zh/> 边的方向 | <en/> The direction of the edge\n * @returns - <zh/> 返回节点和边的 ID 数组 | <en/> Returns an array of node and edge IDs\n */\nexport function getNodeNthDegreeIds(graph, startNodeId, degree, direction = 'both') {\n    const visitedNodes = new Set();\n    const visitedEdges = new Set();\n    const relations = new Set();\n    bfs(startNodeId, (nodeId, depth) => {\n        if (depth > degree)\n            return;\n        relations.add(nodeId);\n        graph.getRelatedEdgesData(nodeId, direction).forEach((edge) => {\n            const edgeId = idOf(edge);\n            if (!visitedEdges.has(edgeId) && depth < degree) {\n                relations.add(edgeId);\n                visitedEdges.add(edgeId);\n            }\n        });\n    }, (nodeId) => {\n        return graph\n            .getRelatedEdgesData(nodeId, direction)\n            .map((edge) => (edge.source === nodeId ? edge.target : edge.source))\n            .filter((neighborNodeId) => {\n            if (!visitedNodes.has(neighborNodeId)) {\n                visitedNodes.add(neighborNodeId);\n                return true;\n            }\n            return false;\n        });\n    });\n    return Array.from(relations);\n}\n//# sourceMappingURL=relation.js.map","/**\n * <zh/> 获取元素的状态\n *\n * <en/> Get the state of the element\n * @param datum - <zh/> 元素数据 <en/> Element data\n * @returns <zh/> 状态列表 <en/> State list\n */\nexport function statesOf(datum) {\n    return datum.states || [];\n}\n//# sourceMappingURL=state.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isFunction } from '@antv/util';\nimport { CanvasEvent, CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport { idOf } from '../utils/id';\nimport { getElementNthDegreeIds } from '../utils/relation';\nimport { Shortcut } from '../utils/shortcut';\nimport { statesOf } from '../utils/state';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 点击元素\n *\n * <en/> Click Element\n * @remarks\n * <zh/> 当鼠标点击元素时，可以激活元素的状态，例如选中节点或边。当 degree 设置为 `1` 时，点击节点会高亮当前节点及其直接相邻的节点和边。\n *\n * <en/> When the mouse clicks on an element, you can activate the state of the element, such as selecting nodes or edges. When the degree is 1, clicking on a node will highlight the current node and its directly adjacent nodes and edges.\n */\nexport class ClickSelect extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, ClickSelect.defaultOptions, options));\n        this.onClickSelect = (event) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            if (!this.validate(event))\n                return;\n            yield this.updateState(event);\n            (_b = (_a = this.options).onClick) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n        });\n        this.onClickCanvas = (event) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            if (!this.validate(event))\n                return;\n            yield this.clearState();\n            (_b = (_a = this.options).onClick) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n        });\n        this.shortcut = new Shortcut(context.graph);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        this.unbindEvents();\n        ELEMENT_TYPES.forEach((type) => {\n            graph.on(`${type}:${CommonEvent.CLICK}`, this.onClickSelect);\n        });\n        graph.on(CanvasEvent.CLICK, this.onClickCanvas);\n    }\n    get isMultipleSelect() {\n        const { multiple, trigger } = this.options;\n        return multiple && this.shortcut.match(trigger);\n    }\n    getNeighborIds(event) {\n        const { target, targetType } = event;\n        const { graph } = this.context;\n        const { degree } = this.options;\n        return getElementNthDegreeIds(graph, targetType, target.id, typeof degree === 'function' ? degree(event) : degree).filter((id) => id !== target.id);\n    }\n    updateState(event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { state: selectState, unselectedState, neighborState, animation } = this.options;\n            if (!selectState && !neighborState && !unselectedState)\n                return;\n            const { target } = event;\n            const { graph } = this.context;\n            const datum = graph.getElementData(target.id);\n            const type = statesOf(datum).includes(selectState) ? 'unselect' : 'select';\n            const states = {};\n            const isMultipleSelect = this.isMultipleSelect;\n            const click = [target.id];\n            const neighbor = this.getNeighborIds(event);\n            if (!isMultipleSelect) {\n                if (type === 'select') {\n                    Object.assign(states, this.getClearStates(!!unselectedState));\n                    const addState = (list, state) => {\n                        list.forEach((id) => {\n                            if (!states[id])\n                                states[id] = graph.getElementState(id);\n                            states[id].push(state);\n                        });\n                    };\n                    addState(click, selectState);\n                    addState(neighbor, neighborState);\n                    if (unselectedState) {\n                        Object.keys(states).forEach((id) => {\n                            if (!click.includes(id) && !neighbor.includes(id))\n                                states[id].push(unselectedState);\n                        });\n                    }\n                }\n                else\n                    Object.assign(states, this.getClearStates());\n            }\n            else {\n                Object.assign(states, this.getDataStates());\n                if (type === 'select') {\n                    const addState = (list, state) => {\n                        list.forEach((id) => {\n                            const dataStatesSet = new Set(graph.getElementState(id));\n                            dataStatesSet.add(state);\n                            dataStatesSet.delete(unselectedState);\n                            states[id] = Array.from(dataStatesSet);\n                        });\n                    };\n                    addState(click, selectState);\n                    addState(neighbor, neighborState);\n                    if (unselectedState) {\n                        Object.keys(states).forEach((id) => {\n                            const _states = states[id];\n                            if (!_states.includes(selectState) &&\n                                !_states.includes(neighborState) &&\n                                !_states.includes(unselectedState)) {\n                                states[id].push(unselectedState);\n                            }\n                        });\n                    }\n                }\n                else {\n                    const targetState = states[target.id];\n                    states[target.id] = targetState.filter((s) => s !== selectState && s !== neighborState);\n                    if (!targetState.includes(unselectedState))\n                        states[target.id].push(unselectedState);\n                    neighbor.forEach((id) => {\n                        states[id] = states[id].filter((s) => s !== neighborState);\n                        if (!states[id].includes(selectState))\n                            states[id].push(unselectedState);\n                    });\n                }\n            }\n            yield graph.setElementState(states, animation);\n        });\n    }\n    getDataStates() {\n        const { graph } = this.context;\n        const { nodes, edges, combos } = graph.getData();\n        const states = {};\n        [...nodes, ...edges, ...combos].forEach((data) => {\n            states[idOf(data)] = statesOf(data);\n        });\n        return states;\n    }\n    /**\n     * <zh/> 获取需要清除的状态\n     *\n     * <en/> Get the states that need to be cleared\n     * @param complete - <zh/> 是否返回所有状态 | <en/> Whether to return all states\n     * @returns - <zh/> 需要清除的状态 | <en/> States that need to be cleared\n     */\n    getClearStates(complete = false) {\n        const { graph } = this.context;\n        const { state, unselectedState, neighborState } = this.options;\n        const statesToClear = new Set([state, unselectedState, neighborState]);\n        const { nodes, edges, combos } = graph.getData();\n        const states = {};\n        [...nodes, ...edges, ...combos].forEach((data) => {\n            const datumStates = statesOf(data);\n            const newStates = datumStates.filter((s) => !statesToClear.has(s));\n            if (complete)\n                states[idOf(data)] = newStates;\n            else if (newStates.length !== datumStates.length)\n                states[idOf(data)] = newStates;\n        });\n        return states;\n    }\n    clearState() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { graph } = this.context;\n            yield graph.setElementState(this.getClearStates(), this.options.animation);\n        });\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        ELEMENT_TYPES.forEach((type) => {\n            graph.off(`${type}:${CommonEvent.CLICK}`, this.onClickSelect);\n        });\n        graph.off(CanvasEvent.CLICK, this.onClickCanvas);\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nClickSelect.defaultOptions = {\n    animation: true,\n    enable: true,\n    multiple: false,\n    trigger: ['shift'],\n    state: 'selected',\n    neighborState: 'selected',\n    unselectedState: undefined,\n    degree: 0,\n};\n//# sourceMappingURL=click-select.js.map","/**\n * <zh/> 判断节点/组合是否收起\n *\n * <en/> Determine whether the node/combo is collapsed\n * @param nodeLike - <zh/>节点/组合数据 | <en/>Node/Combo data\n * @returns <zh/>是否收起 | <en/>Whether it is collapsed\n */\nexport function isCollapsed(nodeLike) {\n    var _a;\n    return !!((_a = nodeLike.style) === null || _a === void 0 ? void 0 : _a.collapsed);\n}\n//# sourceMappingURL=collapsibility.js.map","import { lowerFirst, upperFirst } from '@antv/util';\n/**\n * <zh/> 是否以某个前缀开头\n *\n * <en/> Whether starts with prefix\n * @param str - <zh/> 字符串 | <en/> string\n * @param prefix - <zh/> 前缀 | <en/> prefix\n * @returns <zh/> 是否以某个前缀开头 | <en/> whether starts with prefix\n */\nexport function startsWith(str, prefix) {\n    if (!str.startsWith(prefix))\n        return false;\n    const nextChart = str[prefix.length];\n    return nextChart >= 'A' && nextChart <= 'Z';\n}\n/**\n * <zh/> 添加前缀\n *\n * <en/> Add prefix\n * @param str - <zh/> 字符串 | <en/> string\n * @param prefix - <zh/> 前缀 | <en/> prefix\n * @returns <zh/> 添加前缀后的字符串 | <en/> string with prefix\n */\nexport function addPrefix(str, prefix) {\n    return `${prefix}${upperFirst(str)}`;\n}\n/**\n * <zh/> 移除前缀\n *\n * <en/> Remove prefix\n * @param string - <zh/> 字符串 | <en/> string\n * @param prefix - <zh/> 前缀 | <en/> prefix\n * @param lowercaseFirstLetter - <zh/> 是否小写首字母 | <en/> whether lowercase first letter\n * @returns <zh/> 移除前缀后的字符串 | <en/> string without prefix\n */\nexport function removePrefix(string, prefix, lowercaseFirstLetter = true) {\n    if (!prefix)\n        return string;\n    if (!startsWith(string, prefix))\n        return string;\n    const str = string.slice(prefix.length);\n    return lowercaseFirstLetter ? lowerFirst(str) : str;\n}\n/**\n * <zh/> 从样式中提取子样式\n *\n * <en/> Extract sub style from style\n * @param style - <zh/> 样式 | <en/> style\n * @param prefix - <zh/> 子样式前缀 | <en/> sub style prefix\n * @returns <zh/> 子样式 | <en/> sub style\n */\nexport function subStyleProps(style, prefix) {\n    const subStyle = Object.entries(style).reduce((acc, [key, value]) => {\n        if (key === 'className' || key === 'class')\n            return acc;\n        if (startsWith(key, prefix)) {\n            Object.assign(acc, { [removePrefix(key, prefix)]: value });\n        }\n        return acc;\n    }, {});\n    // 向下传递透明度，但避免覆盖子样式中的透明度属性\n    // Pass down opacity, but avoid overwriting the opacity property in the sub-style\n    if ('opacity' in style) {\n        const subOpacityKey = addPrefix('opacity', prefix);\n        const opacity = style.opacity;\n        if (subOpacityKey in style) {\n            const subOpacity = style[subOpacityKey];\n            Object.assign(subStyle, { opacity: opacity * subOpacity });\n        }\n        else\n            Object.assign(subStyle, { opacity });\n    }\n    return subStyle;\n}\n/**\n * <zh/> 从对象中提取指定前缀的属性，并移除前缀\n *\n * <en/> Extract properties with the specified prefix from the object and remove the prefix\n * @param obj - <zh/> 对象 | <en/> object\n * @param prefix - <zh/> 前缀 | <en/> prefix\n * @returns <zh/> 新对象 | <en/> new object\n */\nexport function subObject(obj, prefix) {\n    const prefixLength = prefix.length;\n    return Object.keys(obj).reduce((acc, key) => {\n        if (key.startsWith(prefix)) {\n            const newKey = key.slice(prefixLength);\n            acc[newKey] = obj[key];\n        }\n        return acc;\n    }, {});\n}\n/**\n * <zh/> 从样式中排除子样式\n *\n * <en/> Omit sub style from style\n * @param style - <zh/> 样式 | <en/> style\n * @param prefix - <zh/> 子样式前缀 | <en/> sub style prefix\n * @returns <zh/> 排除子样式后的样式 | <en/> style without sub style\n */\nexport function omitStyleProps(style, prefix) {\n    const prefixArray = typeof prefix === 'string' ? [prefix] : prefix;\n    const omitStyle = {};\n    Object.keys(style).forEach((key) => {\n        if (!prefixArray.find((p) => key.startsWith(p))) {\n            omitStyle[key] = style[key];\n        }\n    });\n    return omitStyle;\n}\n/**\n * <zh/> 替换前缀\n *\n * <en/> Replace prefix\n * @param style - <zh/> 样式 | <en/> style\n * @param oldPrefix - <zh/> 旧前缀 | <en/> old prefix\n * @param newPrefix - <zh/> 新前缀 | <en/> new prefix\n * @returns <zh/> 替换前缀后的样式 | <en/> style with replaced prefix\n */\nexport function replacePrefix(style, oldPrefix, newPrefix) {\n    return Object.entries(style).reduce((acc, [key, value]) => {\n        if (startsWith(key, oldPrefix)) {\n            acc[addPrefix(removePrefix(key, oldPrefix, false), newPrefix)] = value;\n        }\n        else {\n            acc[key] = value;\n        }\n        return acc;\n    }, {});\n}\n//# sourceMappingURL=prefix.js.map","/**\n * <zh/> 解析尺寸配置\n *\n * <en/> Parse size configuration\n * @param size - <zh/> 尺寸配置 | <en/> size configuration\n * @returns <zh/> 标准尺寸格式 | <en/> standard size format\n */\nexport function parseSize(size = 0) {\n    if (typeof size === 'number')\n        return [size, size, size];\n    const [x, y = x, z = x] = size;\n    return [x, y, z];\n}\n//# sourceMappingURL=size.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/**\n * <zh/> 计算支持回调的动态样式\n *\n * <en/> compute dynamic style that supports callback\n * @param callableStyle - <zh/> 动态样式 | <en/> dynamic style\n * @param context - <zh/> 样式计算迭代上下文 | <en/> style iteration context\n * @returns <zh/> 静态样式 | <en/> static style\n */\nexport function computeElementCallbackStyle(callableStyle, context) {\n    const { datum, graph } = context;\n    if (typeof callableStyle === 'function')\n        return callableStyle.call(graph, datum);\n    return Object.fromEntries(Object.entries(callableStyle).map(([key, style]) => {\n        if (typeof style === 'function')\n            return [key, style.call(graph, datum)];\n        return [key, style];\n    }));\n}\n/**\n * <zh/> 合并图形配置项\n *\n * <en/> Merge shape configuration\n * @param defaultOptions - <zh/> 配置项1 | <en/> configuration 1\n * @param modifiedOptions - <zh/> 配置项2 | <en/> configuration 2\n * @returns <zh/> 合并后的配置项 | <en/> merged configuration\n */\nexport function mergeOptions(defaultOptions, modifiedOptions) {\n    const s1 = (defaultOptions === null || defaultOptions === void 0 ? void 0 : defaultOptions.style) || {};\n    const s2 = (modifiedOptions === null || modifiedOptions === void 0 ? void 0 : modifiedOptions.style) || {};\n    for (const key in s1) {\n        if (!(key in s2))\n            s2[key] = s1[key];\n    }\n    return Object.assign({}, defaultOptions, modifiedOptions, {\n        style: s2,\n    });\n}\n/**\n * <zh/> 获取图形子图形样式\n *\n * <en/> Get the style of the sub-shape of the shape\n * @param style - <zh/> 图形样式 | <en/> shape style\n * @returns <zh/> 子图形样式 | <en/> sub-shape style\n * @remarks\n * <zh/> 从给定的属性对象中提取图形样式属性。删除特定的属性，如位置、变换和类名\n *\n * <en/> Extracts the shape styles from a given attribute object.\n * Removes specific styles like position, transformation, and class name.\n */\nexport function getSubShapeStyle(style) {\n    const { x, y, z, class: cls, className, transform, transformOrigin, zIndex, visibility } = style, rest = __rest(style, [\"x\", \"y\", \"z\", \"class\", \"className\", \"transform\", \"transformOrigin\", \"zIndex\", \"visibility\"]);\n    return rest;\n}\n//# sourceMappingURL=style.js.map","import { groupBy } from '@antv/util';\nimport { getExtension } from '../registry/get';\nimport { idOf } from './id';\nimport { format } from './print';\n/**\n * <zh/> 解析色板配置\n *\n * <en/> Parse palette options\n * @param palette - <zh/> 色板配置 | <en/> PaletteOptions options\n * @returns <zh/> 标准色板配置 | <en/> Standard palette options\n */\nexport function parsePalette(palette) {\n    if (!palette)\n        return undefined;\n    if (\n    // 色板名 palette name\n    typeof palette === 'string' ||\n        // 插值函数 interpolate function\n        typeof palette === 'function' ||\n        // 颜色数组 color array\n        Array.isArray(palette)) {\n        // 默认为离散色板\n        // Default to discrete palette, default group field is id\n        return {\n            type: 'group',\n            field: (d) => d.id,\n            color: palette,\n            invert: false,\n        };\n    }\n    return palette;\n}\n/**\n * <zh/> 根据色板分配颜色\n *\n * <en/> Assign colors according to the palette\n * @param data - <zh/> 元素数据 | <en/> Element data\n * @param palette - <zh/> 色板配置 | <en/> PaletteOptions options\n * @returns <zh/> 元素颜色 | <en/> Element color\n * @remarks\n * <zh/> 返回值结果是一个以元素 id 为 key，颜色值为 value 的对象\n *\n * <en/> The return value is an object with element id as key and color value as value\n */\nexport function assignColorByPalette(data, palette) {\n    if (!palette)\n        return {};\n    const { type, color: colorPalette, field, invert } = palette;\n    const assignColor = (args) => {\n        const palette = typeof colorPalette === 'string' ? getExtension('palette', colorPalette) : colorPalette;\n        if (typeof palette === 'function') {\n            // assign by continuous\n            const result = {};\n            args.forEach(([id, value]) => {\n                result[id] = palette(invert ? 1 - value : value);\n            });\n            return result;\n        }\n        else if (Array.isArray(palette)) {\n            // assign by discrete\n            const colors = invert ? [...palette].reverse() : palette;\n            const result = {};\n            args.forEach(([id, index]) => {\n                result[id] = colors[index % palette.length];\n            });\n            return result;\n        }\n        return {};\n    };\n    const parseField = (field, datum) => { var _a; return typeof field === 'string' ? (_a = datum.data) === null || _a === void 0 ? void 0 : _a[field] : field === null || field === void 0 ? void 0 : field(datum); };\n    if (type === 'group') {\n        const groupData = groupBy(data, (datum) => {\n            if (!field)\n                return 'default';\n            const key = parseField(field, datum);\n            return key ? String(key) : 'default';\n        });\n        const groupKeys = Object.keys(groupData);\n        const assignResult = assignColor(groupKeys.map((key, index) => [key, index]));\n        const result = {};\n        Object.entries(groupData).forEach(([groupKey, groupData]) => {\n            groupData.forEach((datum) => {\n                result[idOf(datum)] = assignResult[groupKey];\n            });\n        });\n        return result;\n    }\n    else if (type === 'value') {\n        const [min, max] = data.reduce(([min, max], datum) => {\n            const value = parseField(field, datum);\n            if (typeof value !== 'number')\n                throw new Error(format(`Palette field ${field} is not a number`));\n            return [Math.min(min, value), Math.max(max, value)];\n        }, [Infinity, -Infinity]);\n        const range = max - min;\n        return assignColor(data.map((datum) => [datum.id, (parseField(field, datum) - min) / range]));\n    }\n}\n/**\n * <zh/> 获取离散色板配色\n *\n * <en/> Get discrete palette colors\n * @param colorPalette - <zh/> 色板名或着颜色数组 | <en/> Palette name or color array\n * @returns <zh/> 色板上具体颜色 | <en/> Specific color on the palette\n */\nexport function getPaletteColors(colorPalette) {\n    const palette = typeof colorPalette === 'string' ? getExtension('palette', colorPalette) : colorPalette;\n    if (typeof palette === 'function')\n        return undefined;\n    return palette;\n}\n//# sourceMappingURL=palette.js.map","import { distance } from './vector';\n/**\n * Get WordWrapWidth for a text according the the length of the label and 'maxWidth'.\n * @param length  - length\n * @param maxWidth - maxWidth\n * @returns wordWrapWidth\n */\nexport function getWordWrapWidthWithBase(length, maxWidth) {\n    let wordWrapWidth = 2 * length;\n    if (typeof maxWidth === 'string') {\n        wordWrapWidth = (length * Number(maxWidth.replace('%', ''))) / 100;\n    }\n    else if (typeof maxWidth === 'number') {\n        wordWrapWidth = maxWidth;\n    }\n    if (isNaN(wordWrapWidth))\n        wordWrapWidth = 2 * length;\n    return wordWrapWidth;\n}\n/**\n * Get the proper wordWrapWidth for a labelShape according the the 'maxWidth' of keyShape.\n * @param keyShapeBox - keyShapeBox\n * @param maxWidth - maxWidth\n * @param zoom - zoom\n * @param enableBalanceShape - enableBalanceShape\n * @returns Get WordWrapWidth by bbox\n */\nexport function getWordWrapWidthByBox(keyShapeBox, maxWidth, zoom = 1, enableBalanceShape = false) {\n    const balanceZoom = enableBalanceShape ? zoom : 1;\n    const keyShapeWidth = (keyShapeBox.max[0] - keyShapeBox.min[0]) * balanceZoom;\n    return getWordWrapWidthWithBase(keyShapeWidth, maxWidth);\n}\n/**\n * Get the proper wordWrapWidth for a labelShape according the the distance between two end points and 'maxWidth'.\n * @param points - points\n * @param maxWidth - maxWidth\n * @param zoom - zoom\n * @returns - wordWrapWidth for text\n */\nexport function getWordWrapWidthByEnds(points, maxWidth, zoom = 1) {\n    const dist = distance(points[0], points[1]) * zoom;\n    return getWordWrapWidthWithBase(dist, maxWidth);\n}\n//# sourceMappingURL=text.js.map","var toString = {}.toString;\nvar getType = function (value) {\n    return toString\n        .call(value)\n        .replace(/^\\[object /, '')\n        .replace(/]$/, '');\n};\nexport default getType;\n//# sourceMappingURL=get-type.js.map","var objectProto = Object.prototype;\nvar isPrototype = function (value) {\n    var Ctor = value && value.constructor;\n    var proto = (typeof Ctor === 'function' && Ctor.prototype) || objectProto;\n    return value === proto;\n};\nexport default isPrototype;\n//# sourceMappingURL=is-prototype.js.map","import isNil from './is-nil';\nimport isArrayLike from './is-array-like';\nimport getType from './get-type';\nimport isPrototype from './is-prototype';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction isEmpty(value) {\n    /**\n     * isEmpty(null) => true\n     * isEmpty() => true\n     * isEmpty(true) => true\n     * isEmpty(1) => true\n     * isEmpty([1, 2, 3]) => false\n     * isEmpty('abc') => false\n     * isEmpty({ a: 1 }) => false\n     */\n    if (isNil(value)) {\n        return true;\n    }\n    if (isArrayLike(value)) {\n        return !value.length;\n    }\n    var type = getType(value);\n    if (type === 'Map' || type === 'Set') {\n        return !value.size;\n    }\n    if (isPrototype(value)) {\n        return !Object.keys(value).length;\n    }\n    for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n            return false;\n        }\n    }\n    return true;\n}\nexport default isEmpty;\n//# sourceMappingURL=is-empty.js.map","import { CustomElement } from '@antv/g';\nimport { isEmpty, isFunction, upperFirst } from '@antv/util';\nimport { ExtensionCategory } from '../../constants';\nimport { createAnimationsProxy, preprocessKeyframes } from '../../utils/animation';\nimport { setAttributes, updateStyle } from '../../utils/element';\nimport { subObject } from '../../utils/prefix';\nimport { format } from '../../utils/print';\nimport { getSubShapeStyle } from '../../utils/style';\nimport { replaceTranslateInTransform } from '../../utils/transform';\nimport { setVisibility } from '../../utils/visibility';\nimport { getExtension } from './../../registry/get';\n/**\n * <zh/> 图形基类\n *\n * <en/> Base class for shapes\n */\nexport class BaseShape extends CustomElement {\n    constructor(options) {\n        applyTransform(options.style);\n        super(options);\n        /**\n         * <zh/> 图形实例映射表\n         *\n         * <en/> shape instance map\n         * @internal\n         */\n        this.shapeMap = {};\n        /**\n         * <zh/> 动画实例映射表\n         *\n         * <en/> animation instance map\n         * @internal\n         */\n        this.animateMap = {};\n        this.render(this.attributes, this);\n        this.setVisibility();\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 解析后的属性\n     *\n     * <en/> parsed attributes\n     * @returns <zh/> 解析后的属性 | <en/> parsed attributes\n     * @internal\n     */\n    get parsedAttributes() {\n        return this.attributes;\n    }\n    /**\n     * <zh/> 创建、更新或删除图形\n     *\n     * <en/> create, update or remove shape\n     * @param className - <zh/> 图形名称 | <en/> shape name\n     * @param Ctor - <zh/> 图形类型 | <en/> shape type\n     * @param style - <zh/> 图形样式。若要删除图形，传入 false | <en/> shape style. Pass false to remove the shape\n     * @param container - <zh/> 容器 | <en/> container\n     * @param hooks - <zh/> 钩子函数 | <en/> hooks\n     * @returns <zh/> 图形实例 | <en/> shape instance\n     */\n    upsert(className, Ctor, style, container, hooks) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const target = this.shapeMap[className];\n        // remove\n        // 如果 style 为 false，则删除图形 / remove shape if style is false\n        if (style === false) {\n            if (target) {\n                (_a = hooks === null || hooks === void 0 ? void 0 : hooks.beforeDestroy) === null || _a === void 0 ? void 0 : _a.call(hooks, target);\n                container.removeChild(target);\n                delete this.shapeMap[className];\n                (_b = hooks === null || hooks === void 0 ? void 0 : hooks.afterDestroy) === null || _b === void 0 ? void 0 : _b.call(hooks, target);\n            }\n            return;\n        }\n        const _Ctor = typeof Ctor === 'string' ? getExtension(ExtensionCategory.SHAPE, Ctor) : Ctor;\n        if (!_Ctor) {\n            throw new Error(format(`Shape ${Ctor} not found`));\n        }\n        // create\n        if (!target || target.destroyed || !(target instanceof _Ctor)) {\n            if (target) {\n                (_c = hooks === null || hooks === void 0 ? void 0 : hooks.beforeDestroy) === null || _c === void 0 ? void 0 : _c.call(hooks, target);\n                target === null || target === void 0 ? void 0 : target.destroy();\n                (_d = hooks === null || hooks === void 0 ? void 0 : hooks.afterDestroy) === null || _d === void 0 ? void 0 : _d.call(hooks, target);\n            }\n            (_e = hooks === null || hooks === void 0 ? void 0 : hooks.beforeCreate) === null || _e === void 0 ? void 0 : _e.call(hooks);\n            const instance = new _Ctor({ className, style });\n            container.appendChild(instance);\n            this.shapeMap[className] = instance;\n            (_f = hooks === null || hooks === void 0 ? void 0 : hooks.afterCreate) === null || _f === void 0 ? void 0 : _f.call(hooks, instance);\n            return instance;\n        }\n        // update\n        (_g = hooks === null || hooks === void 0 ? void 0 : hooks.beforeUpdate) === null || _g === void 0 ? void 0 : _g.call(hooks, target);\n        updateStyle(target, style);\n        (_h = hooks === null || hooks === void 0 ? void 0 : hooks.afterUpdate) === null || _h === void 0 ? void 0 : _h.call(hooks, target);\n        return target;\n    }\n    update(attr = {}) {\n        const attributes = Object.assign({}, this.attributes, attr);\n        applyTransform(attributes);\n        setAttributes(this, attributes);\n        this.render(attributes, this);\n        this.setVisibility();\n    }\n    bindEvents() { }\n    /**\n     * <zh/> 从给定的属性对象中提取图形样式属性。删除特定的属性，如位置、变换和类名\n     *\n     * <en/> Extracts the shape styles from a given attribute object.\n     * Removes specific styles like position, transformation, and class name.\n     * @param style - <zh/> 属性对象 | <en/> attribute object\n     * @returns <zh/> 仅包含样式属性的对象 | <en/> An object containing only the style properties.\n     */\n    getGraphicStyle(style) {\n        return getSubShapeStyle(style);\n    }\n    /**\n     * Get the prefix pairs for composite shapes used to handle animation\n     * @returns tuples array where each tuple contains a key corresponding to a method `get${key}Style` and its shape prefix\n     * @internal\n     */\n    get compositeShapes() {\n        return [\n            ['badges', 'badge-'],\n            ['ports', 'port-'],\n        ];\n    }\n    animate(keyframes, options) {\n        if (keyframes.length === 0)\n            return null;\n        const animationMap = [];\n        // 如果 keyframes 中存在 x/y/z ，替换为 transform\n        // if x/y/z exists in keyframes, replace them with transform\n        if (keyframes[0].x !== undefined || keyframes[0].y !== undefined || keyframes[0].z !== undefined) {\n            const { x: _x = 0, y: _y = 0, z: _z = 0 } = this.attributes;\n            keyframes.forEach((keyframe) => {\n                const { x = _x, y = _y, z = _z } = keyframe;\n                Object.assign(keyframe, { transform: z ? [['translate3d', x, y, z]] : [['translate', x, y]] });\n            });\n        }\n        const result = super.animate(keyframes, options);\n        if (result) {\n            releaseAnimation(this, result);\n            animationMap.push(result);\n        }\n        if (Array.isArray(keyframes) && keyframes.length > 0) {\n            // 如果 keyframes 中仅存在 skippedAttrs 中的属性，则仅更新父元素属性（跳过子图形）\n            // if only skippedAttrs exist in keyframes, only update parent element attributes (skip child shapes)\n            const skippedAttrs = ['transform', 'transformOrigin', 'x', 'y', 'z', 'zIndex'];\n            if (Object.keys(keyframes[0]).some((attr) => !skippedAttrs.includes(attr))) {\n                Object.entries(this.shapeMap).forEach(([key, shape]) => {\n                    // 如果存在方法名为 `get${key}Style` 的方法，则使用该方法获取样式，并自动为该图形实例创建动画\n                    // if there is a method named `get${key}Style`, use this method to get style and automatically create animation for the shape instance\n                    const methodName = `get${upperFirst(key)}Style`;\n                    const method = this[methodName];\n                    if (isFunction(method)) {\n                        const subKeyframes = keyframes.map((style) => method.call(this, Object.assign(Object.assign({}, this.attributes), style)));\n                        const result = shape.animate(preprocessKeyframes(subKeyframes), options);\n                        if (result) {\n                            releaseAnimation(shape, result);\n                            animationMap.push(result);\n                        }\n                    }\n                });\n                const handleCompositeShapeAnimation = (shapeSet, name) => {\n                    if (!isEmpty(shapeSet)) {\n                        const methodName = `get${upperFirst(name)}Style`;\n                        const method = this[methodName];\n                        if (isFunction(method)) {\n                            const itemsKeyframes = keyframes.map((style) => method.call(this, Object.assign(Object.assign({}, this.attributes), style)));\n                            Object.entries(itemsKeyframes[0]).map(([key]) => {\n                                const subKeyframes = itemsKeyframes.map((styles) => styles[key]);\n                                const shape = shapeSet[key];\n                                if (shape) {\n                                    const result = shape.animate(preprocessKeyframes(subKeyframes), options);\n                                    if (result) {\n                                        releaseAnimation(shape, result);\n                                        animationMap.push(result);\n                                    }\n                                }\n                            });\n                        }\n                    }\n                };\n                this.compositeShapes.forEach(([key, prefix]) => {\n                    const shapeSet = subObject(this.shapeMap, prefix);\n                    handleCompositeShapeAnimation(shapeSet, key);\n                });\n            }\n        }\n        return createAnimationsProxy(animationMap);\n    }\n    getShape(name) {\n        return this.shapeMap[name];\n    }\n    setVisibility() {\n        const { visibility } = this.attributes;\n        setVisibility(this, visibility);\n    }\n    destroy() {\n        this.shapeMap = {};\n        this.animateMap = {};\n        super.destroy();\n    }\n}\n/**\n * <zh/> 释放动画\n *\n * <en/> Release animation\n * @param target - <zh/> 目标对象 | <en/> target object\n * @param animation - <zh/> 动画实例 | <en/> animation instance\n * @description see: https://github.com/antvis/G/issues/1731\n */\nfunction releaseAnimation(target, animation) {\n    animation === null || animation === void 0 ? void 0 : animation.finished.then(() => {\n        // @ts-expect-error private property\n        const index = target.activeAnimations.findIndex((_) => _ === animation);\n        // @ts-expect-error private property\n        if (index > -1)\n            target.activeAnimations.splice(index, 1);\n    });\n}\n/**\n * <zh/> 应用 transform\n *\n * <en/> Apply transform\n * @param style - <zh/> 样式 | <en/> style\n * @returns <zh/> 样式 | <en/> style\n */\nfunction applyTransform(style) {\n    if (!style)\n        return {};\n    if ('x' in style || 'y' in style || 'z' in style) {\n        const { x = 0, y = 0, z, transform } = style;\n        const newTransform = replaceTranslateInTransform(x, y, z, transform);\n        if (newTransform)\n            style.transform = newTransform;\n    }\n    return style;\n}\n//# sourceMappingURL=base-shape.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { get, isNumber, isString, set } from '@antv/util';\nimport { BaseCombo, BaseEdge, BaseNode } from '../elements';\nimport { getBBoxHeight, getBBoxWidth } from './bbox';\nimport { isPoint } from './is';\nimport { findNearestPoints, getEllipseIntersectPoint } from './point';\nimport { getXYByPlacement } from './position';\n/**\n * <zh/> 判断是否是 Node 的实例\n *\n * <en/> Judge whether the instance is Node\n * @param shape - <zh/> 实例 | <en/> instance\n * @returns <zh/> 是否是 Node 的实例 | <en/> whether the instance is Node\n */\nexport function isNode(shape) {\n    return shape instanceof BaseNode && shape.type === 'node';\n}\n/**\n * <zh/> 判断是否是 Edge 的实例\n *\n * <en/> Judge whether the instance is Edge\n * @param shape - <zh/> 实例 | <en/> instance\n * @returns <zh/> 是否是 Edge 的实例 | <en/> whether the instance is Edge\n */\nexport function isEdge(shape) {\n    return shape instanceof BaseEdge;\n}\n/**\n * <zh/> 判断是否是 Combo 的实例\n *\n * <en/> Judge whether the instance is Combo\n * @param shape - <zh/> 实例 | <en/> instance\n * @returns <zh/> 是否是 Combo 的实例 | <en/> whether the instance is Combo\n */\nexport function isCombo(shape) {\n    return shape instanceof BaseCombo;\n}\n/**\n * <zh/> 判断是否是 Element 的实例\n *\n * <en/> Judge whether the instance is Element\n * @param shape - <zh/> 实例 | <en/> instance\n * @returns <zh/> 是否是 Element 的实例 | <en/> whether the instance is Element\n */\nexport function isElement(shape) {\n    return isNode(shape) || isEdge(shape) || isCombo(shape);\n}\n/**\n * <zh/> 判断两个节点是否相同\n *\n * <en/> Whether the two nodes are the same\n * @param node1 - <zh/> 节点1 | <en/> Node1\n * @param node2 - <zh/> 节点2 | <en/> Node2\n * @returns <zh/> 是否相同 | <en/> Whether the same\n */\nexport function isSameNode(node1, node2) {\n    if (!node1 || !node2)\n        return false;\n    return node1 === node2;\n}\nconst PORT_MAP = {\n    top: [0.5, 0],\n    right: [1, 0.5],\n    bottom: [0.5, 1],\n    left: [0, 0.5],\n    'left-top': [0, 0],\n    'top-left': [0, 0],\n    'left-bottom': [0, 1],\n    'bottom-left': [0, 1],\n    'right-top': [1, 0],\n    'top-right': [1, 0],\n    'right-bottom': [1, 1],\n    'bottom-right': [1, 1],\n    default: [0.5, 0.5],\n};\n/**\n * Get the Port x, y by `position`.\n * @param bbox - BBox of element.\n * @param placement - The position relative with element.\n * @param portMap - The map of position.\n * @param isRelative - Whether the position in MAP is relative.\n * @returns [x, y]\n */\nexport function getPortXYByPlacement(bbox, placement, portMap = PORT_MAP, isRelative = true) {\n    const DEFAULT = [0.5, 0.5];\n    const p = isString(placement) ? get(portMap, placement.toLocaleLowerCase(), DEFAULT) : placement;\n    if (!isRelative && isString(placement))\n        return p;\n    const [x, y] = p || DEFAULT;\n    return [bbox.min[0] + getBBoxWidth(bbox) * x, bbox.min[1] + getBBoxHeight(bbox) * y];\n}\n/**\n * <zh/> 获取节点上的所有连接桩\n *\n * <en/> Get all ports\n * @param node - <zh/> 节点 | <en/> Node\n * @returns <zh/> 所有连接桩 | <en/> All Ports\n */\nexport function getAllPorts(node) {\n    if (!node)\n        return {};\n    // 1. 需要绘制的连接桩 | Get the ports that need to be drawn\n    const ports = node.getPorts();\n    // 2. 不需要额外绘制的连接桩 | Get the ports that do not need to be drawn\n    const portsStyle = node.attributes.ports || [];\n    portsStyle.forEach((portStyle, i) => {\n        var _a;\n        const { key, placement } = portStyle;\n        if (isSimplePort(portStyle)) {\n            ports[_a = key || i] || (ports[_a] = getXYByPlacement(node.getShape('key').getBounds(), placement));\n        }\n    });\n    return ports;\n}\n/**\n * <zh/> 是否为简单连接桩，如果是则不会额外绘制图形\n *\n * <en/> Whether it is a simple port, which will not draw additional graphics\n * @param portStyle - <zh/> 连接桩样式 | <en/> Port Style\n * @returns <zh/> 是否是简单连接桩 | <en/> Whether it is a simple port\n */\nexport function isSimplePort(portStyle) {\n    const { r } = portStyle;\n    return !r || Number(r) === 0;\n}\n/**\n * <zh/> 获取连接桩的位置\n *\n * <en/> Get the position of the port\n * @param port - <zh/> 连接桩 | <en/> Port\n * @returns <zh/> 连接桩的位置 | <en/> Port Position\n */\nexport function getPortPosition(port) {\n    return isPoint(port) ? port : port.getPosition();\n}\n/**\n * <zh/> 查找起始连接桩和目标连接桩\n *\n * <en/> Find the source port and target port\n * @param sourceNode - <zh/> 起始节点 | <en/> Source Node\n * @param targetNode - <zh/> 目标节点 | <en/> Target Node\n * @param sourcePortKey - <zh/> 起始连接桩的 key | <en/> Source Port Key\n * @param targetPortKey - <zh/> 目标连接桩的 key | <en/> Target Port Key\n * @returns <zh/> 起始连接桩和目标连接桩 | <en/> Source Port and Target Port\n */\nexport function findPorts(sourceNode, targetNode, sourcePortKey, targetPortKey) {\n    const sourcePort = findPort(sourceNode, targetNode, sourcePortKey, targetPortKey);\n    const targetPort = findPort(targetNode, sourceNode, targetPortKey, sourcePortKey);\n    return [sourcePort, targetPort];\n}\n/**\n * <zh/> 查找节点上的最有可能连接的连接桩\n *\n * <en/> Find the most likely connected port on the node\n * @remarks\n * 1. If `portKey` is specified, return the port.\n * 2. If `portKey` is not specified, return the port closest to the opposite connection points.\n * 3. If the node has no ports, return undefined.\n * @param node - <zh/> 节点 | <en/> Node\n * @param oppositeNode - <zh/> 对端节点 | <en/> Opposite Node\n * @param portKey - <zh/> 连接桩的键值（key） | <en/> Port Key\n * @param oppositePortKey - <zh/> 对端连接桩的 key | <en/> Opposite Port Key\n * @returns <zh/> 连接桩 | <en/> Port\n */\nexport function findPort(node, oppositeNode, portKey, oppositePortKey) {\n    const portsMap = getAllPorts(node);\n    if (portKey)\n        return portsMap[portKey];\n    const ports = Object.values(portsMap);\n    if (ports.length === 0)\n        return undefined;\n    const positions = ports.map((port) => getPortPosition(port));\n    const oppositePositions = findConnectionPoints(oppositeNode, oppositePortKey);\n    const [nearestPosition] = findNearestPoints(positions, oppositePositions);\n    return ports.find((port) => getPortPosition(port) === nearestPosition);\n}\n/**\n * <zh/> 寻找节点上所有可能的连接点\n *\n * <en/> Find all possible connection points on the node\n * @remarks\n * 1. If `portKey` is specified, return the position of the port.\n * 2. If `portKey` is not specified, return positions of all ports.\n * 3. If the node has no ports, return the center of the node.\n * @param node - <zh/> 节点 | <en/> Node\n * @param portKey - <zh/> 连接桩的键值（key），如不指定则返回所有 | <en/> Port Key, return all if not specified\n * @returns <zh/> 连接点 | <en/> Connection Point\n */\nfunction findConnectionPoints(node, portKey) {\n    const allPortsMap = getAllPorts(node);\n    if (portKey)\n        return [getPortPosition(allPortsMap[portKey])];\n    const oppositePorts = Object.values(allPortsMap);\n    return oppositePorts.length > 0 ? oppositePorts.map((port) => getPortPosition(port)) : [node.getCenter()];\n}\n/**\n * <zh/> 获取连接点, 即从节点或连接桩中心到另一端的连线在节点或连接桩边界上的交点\n *\n * <en/> Get the connection point\n * @param node - <zh/> 节点或连接桩 | <en/> Node or Port\n * @param opposite - <zh/> 对端的具体点或节点 | <en/> Opposite Point or Node\n * @returns <zh/> 连接点 | <en/> Connection Point\n */\nexport function getConnectionPoint(node, opposite) {\n    return isCombo(node) || isNode(node)\n        ? getNodeConnectionPoint(node, opposite)\n        : getPortConnectionPoint(node, opposite);\n}\n/**\n * <zh/> 获取连接桩的连接点，即从连接桩中心到另一端的连线在连接桩边界上的交点\n *\n * <en/> Get the connection point of the port\n * @param port - <zh/> 连接桩 | <en/> Port\n * @param opposite - <zh/> 对端的具体点或节点 | <en/> Opposite Point or Node\n * // @param oppositePort - <zh/> 对端连接桩 | <en/> Opposite Port\n * @returns <zh/> 连接桩的连接点 | <en/> Port Point\n */\nexport function getPortConnectionPoint(port, opposite) {\n    if (!port || !opposite)\n        return [0, 0, 0];\n    if (isPoint(port))\n        return port;\n    // 1. linkToCenter 为 true，则返回连接桩的中心 | If linkToCenter is true, return the center of the port\n    if (port.attributes.linkToCenter)\n        return port.getPosition();\n    // 2. 推导对端的具体点：如果是连接桩或节点，则返回它的中心；如果是具体点，则直接返回\n    // 2. Get a specific opposite point: if it is a port or a node, return its center; if it is a specific point, return directly\n    const oppositePosition = isPoint(opposite)\n        ? opposite\n        : isNode(opposite)\n            ? opposite.getCenter()\n            : opposite.getPosition();\n    // 3. 返回连接桩边界上的交点 | Return the intersection point on the port boundary\n    return getEllipseIntersectPoint(oppositePosition, port.getBounds());\n}\n/**\n * <zh/> 获取节点的连接点\n *\n * <en/> Get the Node Connection Point\n * @param nodeLike - <zh/> 节点或组合 | <en/> Node or Combo\n * @param opposite - <zh/> 对端的具体点或节点 | <en/> Opposite Point or Node\n * // @param oppositePort - <zh/> 对端连接桩 | <en/> Opposite Port\n * @returns <zh/> 节点的连接点 | <en/> Node Point\n */\nexport function getNodeConnectionPoint(nodeLike, opposite) {\n    if (!nodeLike || !opposite)\n        return [0, 0, 0];\n    const oppositePosition = isPoint(opposite)\n        ? opposite\n        : isNode(opposite)\n            ? opposite.getCenter()\n            : opposite.getPosition();\n    return nodeLike.getIntersectPoint(oppositePosition) || nodeLike.getCenter();\n}\n/**\n * Get the Text style by `position`.\n * @param bbox - BBox of element.\n * @param placement - The position relative with element.\n * @param offsetX - The offset x.\n * @param offsetY - The offset y.\n * @param isReverseBaseline - Whether reverse the baseline.\n * @returns Partial<TextStyleProps>\n */\nexport function getTextStyleByPlacement(bbox, placement = 'bottom', offsetX = 0, offsetY = 0, isReverseBaseline = false) {\n    const direction = placement.split('-');\n    const [x, y] = getXYByPlacement(bbox, placement);\n    const [top, bottom] = isReverseBaseline ? ['bottom', 'top'] : ['top', 'bottom'];\n    const textBaseline = direction.includes('top')\n        ? bottom\n        : direction.includes('bottom')\n            ? top\n            : 'middle';\n    const textAlign = direction.includes('left')\n        ? 'right'\n        : direction.includes('right')\n            ? 'left'\n            : 'center';\n    return {\n        transform: [['translate', x + offsetX, y + offsetY]],\n        textBaseline,\n        textAlign,\n    };\n}\n/**\n * <zh/> 获取五角星的顶点\n *\n * <en/> Get Star Points\n * @param outerR - <zh/> 外半径 | <en/> outer radius\n * @param innerR - <zh/> 内半径 | <en/> inner radius\n * @returns <zh/> 五角星的顶点 | <en/> Star Points\n */\nexport function getStarPoints(outerR, innerR) {\n    return [\n        [0, -outerR],\n        [innerR * Math.cos((3 * Math.PI) / 10), -innerR * Math.sin((3 * Math.PI) / 10)],\n        [outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)],\n        [innerR * Math.cos(Math.PI / 10), innerR * Math.sin(Math.PI / 10)],\n        [outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)],\n        [0, innerR],\n        [-outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)],\n        [-innerR * Math.cos(Math.PI / 10), innerR * Math.sin(Math.PI / 10)],\n        [-outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)],\n        [-innerR * Math.cos((3 * Math.PI) / 10), -innerR * Math.sin((3 * Math.PI) / 10)],\n    ];\n}\n/**\n * Get Star Port Point.\n * @param outerR - outer radius\n * @param innerR - inner radius\n * @returns Port points for Star.\n */\nexport function getStarPorts(outerR, innerR) {\n    const r = {};\n    r['top'] = [0, -outerR];\n    r['left'] = [-outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)];\n    r['left-bottom'] = [-outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)];\n    r['bottom'] = [0, innerR];\n    r['right-bottom'] = [outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)];\n    r['right'] = r['default'] = [outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)];\n    return r;\n}\n/**\n * <zh/> 获取三角形的顶点\n *\n * <en/> Get the points of a triangle\n * @param width - <zh/> 宽度 | <en/> width\n * @param height - <zh/> 高度 | <en/> height\n * @param direction - <zh/> 三角形的方向 | <en/> The direction of the triangle\n * @returns <zh/> 矩形的顶点 | <en/> The points of a rectangle\n */\nexport function getTrianglePoints(width, height, direction) {\n    const halfHeight = height / 2;\n    const halfWidth = width / 2;\n    const MAP = {\n        up: [\n            [-halfWidth, halfHeight],\n            [halfWidth, halfHeight],\n            [0, -halfHeight],\n        ],\n        left: [\n            [-halfWidth, 0],\n            [halfWidth, halfHeight],\n            [halfWidth, -halfHeight],\n        ],\n        right: [\n            [-halfWidth, halfHeight],\n            [-halfWidth, -halfHeight],\n            [halfWidth, 0],\n        ],\n        down: [\n            [-halfWidth, -halfHeight],\n            [halfWidth, -halfHeight],\n            [0, halfHeight],\n        ],\n    };\n    return MAP[direction] || MAP['up'];\n}\n/**\n * <zh/> 获取三角形的连接桩\n *\n * <en/> Get the Ports of Triangle.\n * @param width - <zh/> 宽度 | <en/> width\n * @param height - <zh/> 高度 | <en/> height\n * @param direction - <zh/> 三角形的方向 | <en/> The direction of the triangle\n * @returns <zh/> 三角形的连接桩 | <en/> The Ports of Triangle\n */\nexport function getTrianglePorts(width, height, direction) {\n    const halfHeight = height / 2;\n    const halfWidth = width / 2;\n    const ports = {};\n    if (direction === 'down') {\n        ports['bottom'] = ports['default'] = [0, halfHeight];\n        ports['right'] = [halfWidth, -halfHeight];\n        ports['left'] = [-halfWidth, -halfHeight];\n    }\n    else if (direction === 'left') {\n        ports['top'] = [halfWidth, -halfHeight];\n        ports['bottom'] = [halfWidth, halfHeight];\n        ports['left'] = ports['default'] = [-halfWidth, 0];\n    }\n    else if (direction === 'right') {\n        ports['top'] = [-halfWidth, -halfHeight];\n        ports['bottom'] = [-halfWidth, halfHeight];\n        ports['right'] = ports['default'] = [halfWidth, 0];\n    }\n    else {\n        //up\n        ports['left'] = [-halfWidth, halfHeight];\n        ports['top'] = ports['default'] = [0, -halfHeight];\n        ports['right'] = [halfWidth, halfHeight];\n    }\n    return ports;\n}\n/**\n * <zh/> 获取矩形的顶点\n *\n * <en/> Get the points of a rectangle\n * @param width - <zh/> 宽度 | <en/> width\n * @param height - <zh/> 高度 | <en/> height\n * @returns <zh/> 矩形的顶点 | <en/> The points of a rectangle\n */\nexport function getBoundingPoints(width, height) {\n    return [\n        [width / 2, -height / 2],\n        [width / 2, height / 2],\n        [-width / 2, height / 2],\n        [-width / 2, -height / 2],\n    ];\n}\n/**\n * Get Diamond PathArray.\n * @param width - diamond width\n * @param height - diamond height\n * @returns The PathArray for G\n */\nexport function getDiamondPoints(width, height) {\n    return [\n        [0, -height / 2],\n        [width / 2, 0],\n        [0, height / 2],\n        [-width / 2, 0],\n    ];\n}\n/**\n * <zh/> 元素是否可见\n *\n * <en/> Whether the element is visible\n * @param element - <zh/> 元素 | <en/> element\n * @returns <zh/> 是否可见 | <en/> whether the element is visible\n */\nexport function isVisible(element) {\n    return get(element, ['style', 'visibility']) !== 'hidden';\n}\n/**\n * <zh/> 设置元素属性（优化性能）\n *\n * <en/> Set element attributes (optimize performance)\n * @param element - <zh/> 元素 | <en/> element\n * @param style - <zh/> 样式 | <en/> style\n */\nexport function setAttributes(element, style) {\n    const { zIndex, transform, transformOrigin, visibility, cursor, clipPath, component } = style, rest = __rest(style, [\"zIndex\", \"transform\", \"transformOrigin\", \"visibility\", \"cursor\", \"clipPath\", \"component\"]);\n    Object.assign(element.attributes, rest);\n    if (transform)\n        element.setAttribute('transform', transform);\n    if (isNumber(zIndex))\n        element.setAttribute('zIndex', zIndex);\n    if (transformOrigin)\n        element.setAttribute('transformOrigin', transformOrigin);\n    if (visibility)\n        element.setAttribute('visibility', visibility);\n    if (cursor)\n        element.setAttribute('cursor', cursor);\n    if (clipPath)\n        element.setAttribute('clipPath', clipPath);\n    if (component)\n        element.setAttribute('component', component);\n}\n/**\n * <zh/> 更新图形样式\n *\n * <en/> Update shape style\n * @param shape - <zh/> 图形 | <en/> shape\n * @param style - <zh/> 样式 | <en/> style\n */\nexport function updateStyle(shape, style) {\n    if ('update' in shape)\n        shape.update(style);\n    else\n        shape.attr(style);\n}\n/**\n * Get Hexagon PathArray\n * @param outerR - <zh/> 外接圆半径 | <en/> the  radius of circumscribed circle\n *  @returns The PathArray for G\n */\nexport function getHexagonPoints(outerR) {\n    return [\n        [0, outerR],\n        [(outerR * Math.sqrt(3)) / 2, outerR / 2],\n        [(outerR * Math.sqrt(3)) / 2, -outerR / 2],\n        [0, -outerR],\n        [(-outerR * Math.sqrt(3)) / 2, -outerR / 2],\n        [(-outerR * Math.sqrt(3)) / 2, outerR / 2],\n    ];\n}\n/**\n * <zh/> 将图形标记为即将销毁，用于在 element controller 中识别要销毁的元素\n *\n * <en/> Mark the element as to be destroyed, used to identify the element to be destroyed in the element controller\n * @param element - <zh/> 图形 | <en/> element\n */\nexport function markToBeDestroyed(element) {\n    set(element, '__to_be_destroyed__', true);\n}\n/**\n * <zh/> 判断图形是否即将销毁\n *\n * <en/> Determine whether the element is to be destroyed\n * @param element - <zh/> 图形 | <en/> element\n * @returns <zh/> 是否即将销毁 | <en/> whether the element is to be destroyed\n */\nexport function isToBeDestroyed(element) {\n    return get(element, '__to_be_destroyed__', false);\n}\n//# sourceMappingURL=element.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Rect, Text } from '@antv/g';\nimport { parsePadding } from '../../utils/padding';\nimport { omitStyleProps, startsWith, subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseShape } from './base-shape';\n/**\n * <zh/> 标签\n *\n * <en/> Label\n * @remarks\n * <zh/> 标签是一种具有背景的文本图形。\n *\n * <en/> Label is a text shape with background.\n */\nexport class Label extends BaseShape {\n    constructor(options) {\n        super(mergeOptions({ style: Label.defaultStyleProps }, options));\n    }\n    isTextStyle(key) {\n        return startsWith(key, 'label');\n    }\n    isBackgroundStyle(key) {\n        return startsWith(key, 'background');\n    }\n    getTextStyle(attributes) {\n        const _a = this.getGraphicStyle(attributes), { padding } = _a, style = __rest(_a, [\"padding\"]);\n        return omitStyleProps(style, 'background');\n    }\n    getBackgroundStyle(attributes) {\n        if (attributes.background === false)\n            return false;\n        const style = this.getGraphicStyle(attributes);\n        const { wordWrap, wordWrapWidth, padding } = style;\n        const backgroundStyle = subStyleProps(style, 'background');\n        const { min: [minX, minY], center: [centerX, centerY], halfExtents: [halfWidth, halfHeight], } = this.shapeMap.text.getGeometryBounds();\n        const [top, right, bottom, left] = parsePadding(padding);\n        const totalWidth = halfWidth * 2 + left + right;\n        const { width, height } = backgroundStyle;\n        if (width && height) {\n            Object.assign(backgroundStyle, { x: centerX - Number(width) / 2, y: centerY - Number(height) / 2 });\n        }\n        else {\n            Object.assign(backgroundStyle, {\n                x: minX - left,\n                y: minY - top,\n                width: wordWrap ? Math.min(totalWidth, wordWrapWidth + left + right) : totalWidth,\n                height: halfHeight * 2 + top + bottom,\n            });\n        }\n        // parse percentage radius\n        const { radius } = backgroundStyle;\n        // if radius look like '10%', convert it to number\n        if (typeof radius === 'string' && radius.endsWith('%')) {\n            const percentage = Number(radius.replace('%', '')) / 100;\n            backgroundStyle.radius = Math.min(+backgroundStyle.width, +backgroundStyle.height) * percentage;\n        }\n        return backgroundStyle;\n    }\n    render(attributes = this.parsedAttributes, container = this) {\n        this.upsert('text', Text, this.getTextStyle(attributes), container);\n        this.upsert('background', Rect, this.getBackgroundStyle(attributes), container);\n    }\n    getGeometryBounds() {\n        const shape = this.getShape('background') || this.getShape('text');\n        return shape.getGeometryBounds();\n    }\n}\nLabel.defaultStyleProps = {\n    padding: 0,\n    fontSize: 12,\n    fontFamily: 'system-ui, sans-serif',\n    wordWrap: true,\n    maxLines: 1,\n    wordWrapWidth: 128,\n    textOverflow: '...',\n    textBaseline: 'middle',\n    backgroundOpacity: 0.75,\n    backgroundZIndex: -1,\n    backgroundLineWidth: 0,\n};\n//# sourceMappingURL=label.js.map","import { mergeOptions } from '../../utils/style';\nimport { BaseShape } from './base-shape';\nimport { Label } from './label';\n/**\n * <zh/> 徽标\n *\n * <en/> Badge\n * @remarks\n * <zh/> 徽标是一种特殊的标签，通常用于展示数量或状态信息。\n *\n * <en/> Badge is a special label, usually used to display quantity or status information.\n */\nexport class Badge extends BaseShape {\n    constructor(options) {\n        super(mergeOptions({ style: Badge.defaultStyleProps }, options));\n    }\n    getBadgeStyle(attributes) {\n        return this.getGraphicStyle(attributes);\n    }\n    render(attributes = this.parsedAttributes, container = this) {\n        this.upsert('label', Label, this.getBadgeStyle(attributes), container);\n    }\n    getGeometryBounds() {\n        const labelShape = this.getShape('label');\n        const shape = labelShape.getShape('background') || labelShape.getShape('text');\n        return shape.getGeometryBounds();\n    }\n}\nBadge.defaultStyleProps = {\n    padding: [2, 4, 2, 4],\n    fontSize: 10,\n    wordWrap: false,\n    backgroundRadius: '50%',\n    backgroundOpacity: 1,\n};\n//# sourceMappingURL=badge.js.map","/**\n * <zh/> points 转化为 path 路径\n *\n * <en/> points transform path.\n * @param points Point[]\n * @param isClose boolean\n * @returns path string[][]\n */\nexport function pointsToPath(points, isClose = true) {\n    const path = [];\n    points.forEach((point, index) => {\n        path.push([index === 0 ? 'M' : 'L', ...point]);\n    });\n    if (isClose) {\n        path.push(['Z']);\n    }\n    return path;\n}\nconst PATH_COMMANDS = {\n    M: ['x', 'y'],\n    m: ['dx', 'dy'],\n    H: ['x'],\n    h: ['dx'],\n    V: ['y'],\n    v: ['dy'],\n    L: ['x', 'y'],\n    l: ['dx', 'dy'],\n    Z: [],\n    z: [],\n    C: ['x1', 'y1', 'x2', 'y2', 'x', 'y'],\n    c: ['dx1', 'dy1', 'dx2', 'dy2', 'dx', 'dy'],\n    S: ['x2', 'y2', 'x', 'y'],\n    s: ['dx2', 'dy2', 'dx', 'dy'],\n    Q: ['x1', 'y1', 'x', 'y'],\n    q: ['dx1', 'dy1', 'dx', 'dy'],\n    T: ['x', 'y'],\n    t: ['dx', 'dy'],\n    A: ['rx', 'ry', 'rotation', 'large-arc', 'sweep', 'x', 'y'],\n    a: ['rx', 'ry', 'rotation', 'large-arc', 'sweep', 'dx', 'dy'],\n};\n/**\n * <zh/> 将路径字符串转换为路径段数组\n *\n * <en/> Convert a path string to an array of path segments.\n * @param path - <zh/> 路径字符串 | <en/> path string\n * @returns <zh/> 路径段数组 | <en/> path segment array\n */\nexport function parsePath(path) {\n    const items = path\n        .replace(/[\\n\\r]/g, '')\n        .replace(/-/g, ' -')\n        .replace(/(\\d*\\.)(\\d+)(?=\\.)/g, '$1$2 ')\n        .trim()\n        .split(/\\s*,|\\s+/);\n    const segments = [];\n    let currentCommand = '';\n    let currentElement = {};\n    while (items.length > 0) {\n        let it = items.shift();\n        if (it in PATH_COMMANDS) {\n            currentCommand = it;\n        }\n        else {\n            items.unshift(it);\n        }\n        currentElement = { type: currentCommand };\n        PATH_COMMANDS[currentCommand].forEach((prop) => {\n            it = items.shift(); // TODO sanity check\n            currentElement[prop] = it;\n        });\n        if (currentCommand === 'M') {\n            currentCommand = 'L';\n        }\n        else if (currentCommand === 'm') {\n            currentCommand = 'l';\n        }\n        const [type, ...values] = Object.values(currentElement);\n        segments.push([type, ...values.map(Number)]);\n    }\n    return segments;\n}\n/**\n * <zh/> 将路径转换为点数组\n *\n * <en/> Convert path to points array\n * @param path - <zh/> 路径数组 <en/> path array\n * @returns\n */\nexport function pathToPoints(path) {\n    const points = [];\n    const segments = typeof path === 'string' ? parsePath(path) : path;\n    segments.forEach((seg) => {\n        const command = seg[0];\n        if (command === 'Z') {\n            points.push(points[0]);\n            return;\n        }\n        if (command !== 'A') {\n            for (let i = 1; i < seg.length; i = i + 2) {\n                points.push([seg[i], seg[i + 1], 0]);\n            }\n        }\n        else {\n            const length = seg.length;\n            points.push([seg[length - 2], seg[length - 1], 0]);\n        }\n    });\n    return points;\n}\n/**\n * <zh/> 生成平滑闭合曲线\n *\n * <en/> Generate smooth closed curves\n * @param points - <zh/> 点集 | <en/> points\n * @returns <zh/> 平滑闭合曲线 | <en/> smooth closed curves\n */\nexport const getClosedSpline = (points) => {\n    if (points.length < 2)\n        return [\n            ['M', 0, 0],\n            ['L', 0, 0],\n        ];\n    const first = points[0];\n    const second = points[1];\n    const last = points[points.length - 1];\n    const lastSecond = points[points.length - 2];\n    points.unshift(lastSecond, last);\n    points.push(first, second);\n    const closedPath = [['M', last[0], last[1]]];\n    for (let i = 1; i < points.length - 2; i += 1) {\n        const [x0, y0] = points[i - 1];\n        const [x1, y1] = points[i];\n        const [x2, y2] = points[i + 1];\n        const [x3, y3] = i !== points.length - 2 ? points[i + 2] : [x2, y2];\n        const cp1x = x1 + (x2 - x0) / 6;\n        const cp1y = y1 + (y2 - y0) / 6;\n        const cp2x = x2 - (x3 - x1) / 6;\n        const cp2y = y2 - (y3 - y1) / 6;\n        closedPath.push(['C', cp1x, cp1y, cp2x, cp2y, x2, y2]);\n    }\n    return closedPath;\n};\n//# sourceMappingURL=path.js.map","import { isEqual } from '@antv/util';\nimport { pathToPoints } from './path';\nimport { findNearestLine, findNearestPointOnLine } from './point';\nimport { getXYByPlacement } from './position';\n/**\n * <zh/> 计算文本位置样式\n *\n * <en/> Calculate text position style\n * @param bounds - <zh/> 外包围盒 | <en/> contour bounds\n * @param placement - <zh/> 位置 | <en/> placement\n * @param offsetX - <zh/> x轴偏移 | <en/> x-axis offset\n * @param offsetY - <zh/> y轴偏移 | <en/> y-axis offset\n * @param closeToContour - <zh/> 标签位置是否贴合轮廓 | <en/> whether the label position is close to the contour\n * @param path - <zh/> 路径 | <en/> path\n * @param autoRotate - <zh/> 是否跟随轮廓旋转 | <en/> whether to rotate with the contour\n * @returns <zh/> 文本样式 | <en/> text style\n */\nexport function getPolygonTextStyleByPlacement(bounds, placement, offsetX, offsetY, closeToContour, path, autoRotate) {\n    const [x, y] = getXYByPlacement(bounds, placement);\n    const style = {\n        textAlign: placement === 'left' ? 'right' : placement === 'right' ? 'left' : 'center',\n        textBaseline: placement === 'top' ? 'bottom' : placement === 'bottom' ? 'top' : 'middle',\n        transform: [['translate', x + offsetX, y + offsetY]],\n    };\n    if (placement === 'center' || !closeToContour)\n        return style;\n    const points = pathToPoints(path);\n    if (!points || points.length <= 3)\n        return style;\n    const lines = points\n        .map((point, index) => {\n        const p1 = point;\n        const p2 = points[(index + 1) % points.length];\n        if (isEqual(p1, p2))\n            return null;\n        return [p1, p2];\n    })\n        .filter(Boolean);\n    const line = findNearestLine([x, y], lines);\n    const intersection = findNearestPointOnLine([x, y], line);\n    if (intersection && line) {\n        style.transform = [['translate', intersection[0] + offsetX, intersection[1] + offsetY]];\n        if (autoRotate) {\n            const angle = Math.atan((line[0][1] - line[1][1]) / (line[0][0] - line[1][0]));\n            style.transform.push(['rotate', (angle / Math.PI) * 180]);\n            style.textAlign = 'center';\n            if (placement === 'right' || placement === 'left') {\n                if (angle > 0) {\n                    style.textBaseline = placement === 'right' ? 'bottom' : 'top';\n                }\n                else {\n                    style.textBaseline = placement === 'right' ? 'top' : 'bottom';\n                }\n            }\n        }\n    }\n    return style;\n}\n//# sourceMappingURL=polygon.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/g';\nimport { getPolygonTextStyleByPlacement } from '../../utils/polygon';\nimport { subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { getWordWrapWidthByBox } from '../../utils/text';\nimport { BaseShape } from './base-shape';\nimport { Label } from './label';\nexport class Contour extends BaseShape {\n    constructor(options) {\n        super(mergeOptions({ style: Contour.defaultStyleProps }, options));\n    }\n    getLabelStyle(attributes) {\n        if (!attributes.label || !attributes.d || attributes.d.length === 0)\n            return false;\n        const _a = subStyleProps(this.getGraphicStyle(attributes), 'label'), { maxWidth, offsetX, offsetY, autoRotate, placement, closeToPath } = _a, labelStyle = __rest(_a, [\"maxWidth\", \"offsetX\", \"offsetY\", \"autoRotate\", \"placement\", \"closeToPath\"]);\n        const key = this.shapeMap.key;\n        const keyBounds = key === null || key === void 0 ? void 0 : key.getRenderBounds();\n        return Object.assign(getPolygonTextStyleByPlacement(keyBounds, placement, offsetX, offsetY, closeToPath, attributes.d, autoRotate), { wordWrapWidth: getWordWrapWidthByBox(keyBounds, maxWidth) }, labelStyle);\n    }\n    getKeyStyle(attributes) {\n        return this.getGraphicStyle(attributes);\n    }\n    render(attributes, container) {\n        this.upsert('key', Path, this.getKeyStyle(attributes), container);\n        this.upsert('label', Label, this.getLabelStyle(attributes), container);\n    }\n}\nContour.defaultStyleProps = {\n    label: true,\n    labelPlacement: 'bottom',\n    labelCloseToPath: true,\n    labelAutoRotate: true,\n    labelOffsetX: 0,\n    labelOffsetY: 0,\n};\n//# sourceMappingURL=contour.js.map","import { ElementEvent, Image as GImage, Rect as GRect } from '@antv/g';\nimport { getAncestorShapes } from '../../utils/shape';\nexport class Image extends GImage {\n    constructor(options) {\n        super(options);\n        this.onMounted = () => {\n            this.handleRadius();\n        };\n        this.onAttrModified = () => {\n            this.handleRadius();\n        };\n        current = this;\n        this.isMutationObserved = true;\n        this.addEventListener(ElementEvent.MOUNTED, this.onMounted);\n        this.addEventListener(ElementEvent.ATTR_MODIFIED, this.onAttrModified);\n    }\n    handleRadius() {\n        const { radius, clipPath, width = 0, height = 0 } = this.attributes;\n        if (radius && width && height) {\n            const [x, y] = this.getBounds().min;\n            const clipPathStyle = { x, y, radius, width, height };\n            if (clipPath) {\n                Object.assign(this.parsedStyle.clipPath.style, clipPathStyle);\n            }\n            else {\n                const rect = new GRect({ style: clipPathStyle });\n                this.style.clipPath = rect;\n            }\n        }\n        else {\n            if (clipPath)\n                this.style.clipPath = null;\n        }\n    }\n}\nconst ImagesWeakMap = new WeakMap();\nlet current = null;\n/**\n * <zh/> 由于 g clipPath 不支持相对位置，因此当作用的元素发生位置变化时，需要通知 Image 更新 clipPath。\n *\n * 通过 connectImage 创建图形与图片的关联，并结合 dispatchPositionChange 方法触发更新\n *\n * ⚠️ 这是一种临时的、黑盒的解决方案，如果后续 g 支持相对位置，会移除该方法。\n *\n * <en/> Since g clipPath does not support relative positions, when the position of the affected element changes, the Image needs to be notified to update the clipPath.\n *\n * Use connectImage to create an association between the shape and the image, and combine it with the dispatchPositionChange method to trigger the update.\n *\n * ⚠️ This is a temporary, black-box solution, and if g supports relative positions in the future, this method will be removed.\n * @param target - <zh/> 目标元素 <en/> Target element\n */\nexport const connectImage = (target) => {\n    if (current && getAncestorShapes(current).includes(target)) {\n        const images = ImagesWeakMap.get(target);\n        if (images) {\n            if (!images.includes(current))\n                images.push(current);\n        }\n        else\n            ImagesWeakMap.set(target, [current]);\n    }\n};\n/**\n * <zh/> 触发关联的图片更新位置\n *\n * <en/> Trigger the associated image to update its position\n * @param target - <zh/> 目标元素 <en/> Target element\n */\nexport const dispatchPositionChange = (target) => {\n    const image = ImagesWeakMap.get(target);\n    if (image) {\n        image.forEach((i) => i.handleRadius());\n    }\n};\n//# sourceMappingURL=image.js.map","/**\n * <zh/> 获取图形的所有子元素\n *\n * <en/> Get all the child elements of the shape\n * @param shape - <zh/> 图形元素 | <en/> shape\n * @returns <zh/> 子元素数组 | <en/> child elements array\n */\nexport function getDescendantShapes(shape) {\n    const succeeds = [];\n    // 遍历所有子元素，并将子元素的子元素加入到数组中\n    const traverse = (shape) => {\n        if (shape === null || shape === void 0 ? void 0 : shape.children.length) {\n            shape.children.forEach((child) => {\n                succeeds.push(child);\n                traverse(child);\n            });\n        }\n    };\n    traverse(shape);\n    return succeeds;\n}\n/**\n * <zh/> 获取图形的所有祖先元素\n *\n * <en/> Get all the ancestor elements of the shape\n * @param shape - <zh/> 图形元素 | <en/> shape\n * @returns <zh/> 祖先元素数组 | <en/> ancestor elements array\n */\nexport function getAncestorShapes(shape) {\n    const ancestors = [];\n    let currentNode = shape.parentNode;\n    while (currentNode) {\n        ancestors.push(currentNode);\n        currentNode = currentNode.parentNode;\n    }\n    return ancestors;\n}\n//# sourceMappingURL=shape.js.map","import { Text as GText } from '@antv/g';\nimport { BaseShape } from './base-shape';\nimport { Image as GImage } from './image';\n/**\n * <zh/> 图标\n *\n * <en/> Icon\n * @remarks\n * <zh/> 图标是一种特殊的图形，可以是图片或者文字。传入 src 属性时，会渲染图片；传入 text 属性时，会渲染文字。\n *\n * <en/> Icon is a special shape, which can be an image or text. When the src attribute is passed in, an image will be rendered; when the text attribute is passed in, text will be rendered.\n */\nexport class Icon extends BaseShape {\n    constructor(options) {\n        super(options);\n    }\n    isImage() {\n        const { src } = this.attributes;\n        return !!src;\n    }\n    getIconStyle(attributes = this.attributes) {\n        const { width = 0, height = 0 } = attributes;\n        const style = this.getGraphicStyle(attributes);\n        if (this.isImage()) {\n            return Object.assign({ x: -width / 2, y: -height / 2 }, style);\n        }\n        return Object.assign({ textBaseline: 'middle', textAlign: 'center' }, style);\n    }\n    render(attributes = this.attributes, container = this) {\n        this.upsert('icon', (this.isImage() ? GImage : GText), this.getIconStyle(attributes), container);\n    }\n}\n//# sourceMappingURL=icon.js.map","import { BaseShape } from './shapes';\nexport class BaseElement extends BaseShape {\n    get context() {\n        // @ts-expect-error skip type-check\n        return this.config.context;\n    }\n    get parsedAttributes() {\n        return this.attributes;\n    }\n    /**\n     * <zh/> 动画帧执行函数\n     *\n     * <en/> Animation frame execution function\n     */\n    onframe() { }\n    animate(keyframes, options) {\n        const animation = super.animate(keyframes, options);\n        if (animation) {\n            animation.onframe = () => this.onframe();\n            animation.finished.then(() => this.onframe());\n        }\n        return animation;\n    }\n}\n//# sourceMappingURL=base-element.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Circle as GCircle } from '@antv/g';\nimport { getPortXYByPlacement, getTextStyleByPlacement, isSimplePort } from '../../utils/element';\nimport { inferIconStyle } from '../../utils/node';\nimport { getPaletteColors } from '../../utils/palette';\nimport { getRectIntersectPoint } from '../../utils/point';\nimport { omitStyleProps, subObject, subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport { getWordWrapWidthByBox } from '../../utils/text';\nimport { setVisibility } from '../../utils/visibility';\nimport { BaseElement } from '../base-element';\nimport { Badge, Icon, Label } from '../shapes';\nimport { connectImage, dispatchPositionChange } from '../shapes/image';\n/**\n * <zh/> 节点元素的基类\n *\n * <en/> Base node class\n * @remarks\n * <zh/> 自定义节点时，建议将此类作为基类。这样，你只需要关注如何实现 keyShape 的绘制逻辑\n *\n * <zh/> 设计文档：https://www.yuque.com/antv/g6/gl1iof1xpzg6ed98\n *\n * <en/> When customizing a node, it is recommended to use this class as the base class. This way, you can directly focus on how to implement the drawing logic of keyShape\n *\n * <en/> Design document: https://www.yuque.com/antv/g6/gl1iof1xpzg6ed98\n */\nexport class BaseNode extends BaseElement {\n    constructor(options) {\n        super(mergeOptions({ style: BaseNode.defaultStyleProps }, options));\n        this.type = 'node';\n    }\n    getSize(attributes = this.attributes) {\n        const { size } = attributes;\n        return parseSize(size);\n    }\n    getKeyStyle(attributes) {\n        const style = this.getGraphicStyle(attributes);\n        return Object.assign(omitStyleProps(style, ['label', 'halo', 'icon', 'badge', 'port']));\n    }\n    getLabelStyle(attributes) {\n        if (attributes.label === false || !attributes.labelText)\n            return false;\n        const _a = subStyleProps(this.getGraphicStyle(attributes), 'label'), { placement, maxWidth, offsetX, offsetY } = _a, labelStyle = __rest(_a, [\"placement\", \"maxWidth\", \"offsetX\", \"offsetY\"]);\n        const keyBounds = this.getShape('key').getLocalBounds();\n        return Object.assign(getTextStyleByPlacement(keyBounds, placement, offsetX, offsetY), { wordWrapWidth: getWordWrapWidthByBox(keyBounds, maxWidth) }, labelStyle);\n    }\n    getHaloStyle(attributes) {\n        if (attributes.halo === false)\n            return false;\n        const _a = this.getKeyStyle(attributes), { fill } = _a, keyStyle = __rest(_a, [\"fill\"]);\n        const haloStyle = subStyleProps(this.getGraphicStyle(attributes), 'halo');\n        return Object.assign(Object.assign(Object.assign({}, keyStyle), { stroke: fill }), haloStyle);\n    }\n    getIconStyle(attributes) {\n        if (attributes.icon === false || (!attributes.iconText && !attributes.iconSrc))\n            return false;\n        const iconStyle = subStyleProps(this.getGraphicStyle(attributes), 'icon');\n        return Object.assign(inferIconStyle(attributes.size, iconStyle), iconStyle);\n    }\n    getBadgesStyle(attributes) {\n        var _a;\n        const badges = subObject(this.shapeMap, 'badge-');\n        const badgesShapeStyle = {};\n        Object.keys(badges).forEach((key) => {\n            badgesShapeStyle[key] = false;\n        });\n        if (attributes.badge === false || !((_a = attributes.badges) === null || _a === void 0 ? void 0 : _a.length))\n            return badgesShapeStyle;\n        const { badges: badgeOptions = [], badgePalette, opacity = 1 } = attributes, restAttributes = __rest(attributes, [\"badges\", \"badgePalette\", \"opacity\"]);\n        const colors = getPaletteColors(badgePalette);\n        const badgeStyle = subStyleProps(this.getGraphicStyle(restAttributes), 'badge');\n        badgeOptions.forEach((option, i) => {\n            badgesShapeStyle[i] = Object.assign(Object.assign({ backgroundFill: colors ? colors[i % (colors === null || colors === void 0 ? void 0 : colors.length)] : undefined, opacity }, badgeStyle), this.getBadgeStyle(option));\n        });\n        return badgesShapeStyle;\n    }\n    getBadgeStyle(style) {\n        const keyShape = this.getShape('key');\n        const { placement = 'top', offsetX, offsetY } = style, restStyle = __rest(style, [\"placement\", \"offsetX\", \"offsetY\"]);\n        const textStyle = getTextStyleByPlacement(keyShape.getLocalBounds(), placement, offsetX, offsetY, true);\n        return Object.assign(Object.assign({}, textStyle), restStyle);\n    }\n    getPortsStyle(attributes) {\n        var _a;\n        const ports = this.getPorts();\n        const portsShapeStyle = {};\n        Object.keys(ports).forEach((key) => {\n            portsShapeStyle[key] = false;\n        });\n        if (attributes.port === false || !((_a = attributes.ports) === null || _a === void 0 ? void 0 : _a.length))\n            return portsShapeStyle;\n        const portStyle = subStyleProps(this.getGraphicStyle(attributes), 'port');\n        const { ports: portOptions = [] } = attributes;\n        portOptions.forEach((option, index) => {\n            const key = option.key || index;\n            const mergedStyle = Object.assign(Object.assign({}, portStyle), option);\n            if (isSimplePort(mergedStyle)) {\n                portsShapeStyle[key] = false;\n            }\n            else {\n                const [x, y] = this.getPortXY(attributes, option);\n                portsShapeStyle[key] = Object.assign({ transform: [['translate', x, y]] }, mergedStyle);\n            }\n        });\n        return portsShapeStyle;\n    }\n    getPortXY(attributes, style) {\n        const { placement = 'left' } = style;\n        const keyShape = this.getShape('key');\n        return getPortXYByPlacement(getBoundsInOffscreen(this.context, keyShape), placement);\n    }\n    /**\n     * Get the ports for the node.\n     * @returns Ports shape map.\n     */\n    getPorts() {\n        return subObject(this.shapeMap, 'port-');\n    }\n    /**\n     * Get the center point of the node.\n     * @returns The center point of the node.\n     */\n    getCenter() {\n        return this.getShape('key').getBounds().center;\n    }\n    /**\n     * Get the point on the outer contour of the node that is the intersection with a line starting in the center the ending in the point `p`.\n     * @param point - The point to intersect with the node.\n     * @param useExtendedLine - Whether to use the extended line.\n     * @returns The intersection point.\n     */\n    getIntersectPoint(point, useExtendedLine = false) {\n        const keyShapeBounds = this.getShape('key').getBounds();\n        return getRectIntersectPoint(point, keyShapeBounds, useExtendedLine);\n    }\n    drawHaloShape(attributes, container) {\n        const style = this.getHaloStyle(attributes);\n        const keyShape = this.getShape('key');\n        this.upsert('halo', keyShape.constructor, style, container);\n    }\n    drawIconShape(attributes, container) {\n        const style = this.getIconStyle(attributes);\n        this.upsert('icon', Icon, style, container);\n        connectImage(this);\n    }\n    drawBadgeShapes(attributes, container) {\n        const badgesStyle = this.getBadgesStyle(attributes);\n        Object.keys(badgesStyle).forEach((key) => {\n            const style = badgesStyle[key];\n            this.upsert(`badge-${key}`, Badge, style, container);\n        });\n    }\n    drawPortShapes(attributes, container) {\n        const portsStyle = this.getPortsStyle(attributes);\n        Object.keys(portsStyle).forEach((key) => {\n            const style = portsStyle[key];\n            const shapeKey = `port-${key}`;\n            this.upsert(shapeKey, GCircle, style, container);\n        });\n    }\n    drawLabelShape(attributes, container) {\n        const style = this.getLabelStyle(attributes);\n        this.upsert('label', Label, style, container);\n    }\n    // 用于装饰抽象方法 / Used to decorate abstract methods\n    _drawKeyShape(attributes, container) {\n        return this.drawKeyShape(attributes, container);\n    }\n    render(attributes = this.parsedAttributes, container = this) {\n        // 1. key shape\n        this._drawKeyShape(attributes, container);\n        if (!this.getShape('key'))\n            return;\n        // 2. halo, use shape same with keyShape\n        this.drawHaloShape(attributes, container);\n        // 3. icon\n        this.drawIconShape(attributes, container);\n        // 4. badges\n        this.drawBadgeShapes(attributes, container);\n        // 5. label\n        this.drawLabelShape(attributes, container);\n        // 6. ports\n        this.drawPortShapes(attributes, container);\n    }\n    update(attr) {\n        super.update(attr);\n        if (attr && ('x' in attr || 'y' in attr || 'z' in attr)) {\n            dispatchPositionChange(this);\n        }\n    }\n    onframe() {\n        this.drawBadgeShapes(this.parsedAttributes, this);\n        this.drawLabelShape(this.parsedAttributes, this);\n    }\n}\nBaseNode.defaultStyleProps = {\n    x: 0,\n    y: 0,\n    size: 32,\n    droppable: true,\n    draggable: true,\n    port: true,\n    ports: [],\n    portZIndex: 2,\n    portLinkToCenter: false,\n    badge: true,\n    badges: [],\n    badgeZIndex: 3,\n    halo: false,\n    haloDroppable: false,\n    haloLineDash: 0,\n    haloLineWidth: 12,\n    haloStrokeOpacity: 0.25,\n    haloPointerEvents: 'none',\n    haloZIndex: -1,\n    icon: true,\n    iconZIndex: 1,\n    label: true,\n    labelIsBillboard: true,\n    labelMaxWidth: '200%',\n    labelPlacement: 'bottom',\n    labelWordWrap: false,\n    labelZIndex: 0,\n};\n/**\n * <zh/> 在离屏画布中获取图形包围盒\n *\n * <en/> Get the bounding box of the shape in the off-screen canvas\n * @param context - <zh/> 运行时上下文 <en/> Runtime context\n * @param shape - <zh/> 图形实例 <en/> Graphic instance\n * @returns <zh/> 图形包围盒 <en/> Graphic bounding box\n */\nfunction getBoundsInOffscreen(context, shape) {\n    if (!context)\n        return shape.getLocalBounds();\n    // 将主图形靠背至全局空间，避免受到父级 transform 的影响\n    // 合理的操作应该是拷贝至离屏画布，但目前 G 有点问题\n    // Move the main shape to the global space to avoid being affected by the parent transform\n    // The reasonable operation should be moved to the off-screen canvas, but there is a problem with G at present\n    const canvas = context.canvas.getLayer();\n    const substitute = shape.cloneNode();\n    setVisibility(substitute, 'hidden');\n    canvas.appendChild(substitute);\n    const bounds = substitute.getLocalBounds();\n    substitute.destroy();\n    return bounds;\n}\n//# sourceMappingURL=base-node.js.map","import { parseSize } from './size';\n/**\n * <zh/> 如果没有手动指定图标大小，则根据主图形尺寸自动推断\n *\n * <en/> Infer the icon size according to key size if icon size is not manually specified\n * @param size - <zh/> 主图形尺寸 | <en/> Key size\n * @param iconStyle - <zh/> 图标样式 | <en/> Icon style\n * @returns <zh/> 图标样式 | <en/> Icon style\n */\nexport function inferIconStyle(size, iconStyle) {\n    const stdSize = parseSize(size);\n    let style = {};\n    if (iconStyle.text && !iconStyle.fontSize)\n        style = { fontSize: Math.min(...stdSize) * 0.5 };\n    if (iconStyle.src && (!iconStyle.width || !iconStyle.height))\n        style = { width: stdSize[0] * 0.5, height: stdSize[1] * 0.5 };\n    return style;\n}\n//# sourceMappingURL=node.js.map","import { Circle as GCircle } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { getEllipseIntersectPoint } from '../../utils/point';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseNode } from './base-node';\n/**\n * <zh/> 圆形节点\n *\n * <en/> Circle node\n */\nexport class Circle extends BaseNode {\n    constructor(options) {\n        super(mergeOptions({ style: Circle.defaultStyleProps }, options));\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GCircle, this.getKeyStyle(attributes), container);\n    }\n    getKeyStyle(attributes) {\n        const keyStyle = super.getKeyStyle(attributes);\n        return Object.assign(Object.assign({}, keyStyle), { r: Math.min(...this.getSize(attributes)) / 2 });\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const { r } = this.getShape('key').attributes;\n        const size = r * 2 * ICON_SIZE_RATIO;\n        return style ? Object.assign({ width: size, height: size }, style) : false;\n    }\n    getIntersectPoint(point, useExtendedLine = false) {\n        const keyShapeBounds = this.getShape('key').getBounds();\n        return getEllipseIntersectPoint(point, keyShapeBounds, useExtendedLine);\n    }\n}\nCircle.defaultStyleProps = {\n    size: 32,\n};\n//# sourceMappingURL=circle.js.map","import { Polygon as GPolygon } from '@antv/g';\nimport { getPolygonIntersectPoint } from '../../utils/point';\nimport { BaseNode } from '../nodes/base-node';\n/**\n * Abstract class for polygon nodes,i.e triangle, diamond, hexagon, etc.\n */\nexport class Polygon extends BaseNode {\n    constructor(options) {\n        super(options);\n    }\n    get parsedAttributes() {\n        return this.attributes;\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GPolygon, this.getKeyStyle(attributes), container);\n    }\n    getKeyStyle(attributes) {\n        const keyStyle = super.getKeyStyle(attributes);\n        return Object.assign(Object.assign({}, keyStyle), { points: this.getPoints(attributes) });\n    }\n    getIntersectPoint(point, useExtendedLine = false) {\n        var _a, _b;\n        const { points } = this.getShape('key').attributes;\n        const center = [+(((_a = this.attributes) === null || _a === void 0 ? void 0 : _a.x) || 0), +(((_b = this.attributes) === null || _b === void 0 ? void 0 : _b.y) || 0)];\n        return getPolygonIntersectPoint(point, center, points, true, useExtendedLine).point;\n    }\n}\n//# sourceMappingURL=polygon.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/g';\nimport { isNumber, isString } from '@antv/util';\nimport { getPaletteColors } from '../../utils/palette';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport { Circle } from './circle';\n/**\n * <zh/> 甜甜圈节点\n *\n * <en/> Donut node\n */\nexport class Donut extends Circle {\n    constructor(options) {\n        super(mergeOptions({ style: Donut.defaultStyleProps }, options));\n    }\n    parseOuterR() {\n        const { size } = this.parsedAttributes;\n        return Math.min(...parseSize(size)) / 2;\n    }\n    parseInnerR() {\n        const { innerR } = this.parsedAttributes;\n        return isString(innerR) ? (parseInt(innerR) / 100) * this.parseOuterR() : innerR;\n    }\n    drawDonutShape(attributes, container) {\n        const { donuts } = attributes;\n        if (!(donuts === null || donuts === void 0 ? void 0 : donuts.length))\n            return;\n        const parsedDonuts = donuts.map((round) => (isNumber(round) ? { value: round } : round));\n        const style = subStyleProps(this.getGraphicStyle(attributes), 'donut');\n        const colors = getPaletteColors(attributes.donutPalette);\n        if (!colors)\n            return;\n        const sum = parsedDonuts.reduce((acc, cur) => { var _a; return acc + ((_a = cur.value) !== null && _a !== void 0 ? _a : 0); }, 0);\n        const outerR = this.parseOuterR();\n        const innerR = this.parseInnerR();\n        let start = 0;\n        parsedDonuts.forEach((round, index) => {\n            const { value = 0, color = colors[index % colors.length] } = round, roundStyle = __rest(round, [\"value\", \"color\"]);\n            const angle = (sum === 0 ? 1 / parsedDonuts.length : value / sum) * 360;\n            this.upsert(`round${index}`, Path, Object.assign(Object.assign(Object.assign({}, style), { d: arc(outerR, innerR, start, start + angle), fill: color }), roundStyle), container);\n            start += angle;\n        });\n    }\n    render(attributes, container = this) {\n        super.render(attributes, container);\n        this.drawDonutShape(attributes, container);\n    }\n}\nDonut.defaultStyleProps = {\n    innerR: '50%',\n    donuts: [],\n    donutPalette: 'tableau',\n};\nconst point = (x, y, r, angel) => [x + Math.sin(angel) * r, y - Math.cos(angel) * r];\nconst full = (x, y, R, r) => {\n    if (r <= 0 || R <= r) {\n        return [['M', x - R, y], ['A', R, R, 0, 1, 1, x + R, y], ['A', R, R, 0, 1, 1, x - R, y], ['Z']];\n    }\n    return [\n        ['M', x - R, y],\n        ['A', R, R, 0, 1, 1, x + R, y],\n        ['A', R, R, 0, 1, 1, x - R, y],\n        ['Z'],\n        ['M', x + r, y],\n        ['A', r, r, 0, 1, 0, x - r, y],\n        ['A', r, r, 0, 1, 0, x + r, y],\n        ['Z'],\n    ];\n};\nconst part = (x, y, R, r, start, end) => {\n    const [s, e] = [(start / 360) * 2 * Math.PI, (end / 360) * 2 * Math.PI];\n    const P = [point(x, y, r, s), point(x, y, R, s), point(x, y, R, e), point(x, y, r, e)];\n    const flag = e - s > Math.PI ? 1 : 0;\n    return [\n        ['M', P[0][0], P[0][1]],\n        ['L', P[1][0], P[1][1]],\n        ['A', R, R, 0, flag, 1, P[2][0], P[2][1]],\n        ['L', P[3][0], P[3][1]],\n        ['A', r, r, 0, flag, 0, P[0][0], P[0][1]],\n        ['Z'],\n    ];\n};\nconst arc = (R = 0, r = 0, start, end) => {\n    const [x, y] = [0, 0];\n    if (Math.abs(start - end) % 360 < 0.000001)\n        return full(x, y, R, r);\n    return part(x, y, R, r, start, end);\n};\n//# sourceMappingURL=donut.js.map","import { Ellipse as GEllipse } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { getEllipseIntersectPoint } from '../../utils/point';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseNode } from './base-node';\n/**\n * <zh/> 椭圆节点\n *\n * <en/> Ellipse node\n */\nexport class Ellipse extends BaseNode {\n    constructor(options) {\n        super(mergeOptions({ style: Ellipse.defaultStyleProps }, options));\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GEllipse, this.getKeyStyle(attributes), container);\n    }\n    getKeyStyle(attributes) {\n        const keyStyle = super.getKeyStyle(attributes);\n        const [majorAxis, minorAxis] = this.getSize(attributes);\n        return Object.assign(Object.assign({}, keyStyle), { rx: majorAxis / 2, ry: minorAxis / 2 });\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const { rx, ry } = this.getShape('key').attributes;\n        const size = Math.min(+rx, +ry) * 2 * ICON_SIZE_RATIO;\n        return style ? Object.assign({ width: size, height: size }, style) : false;\n    }\n    getIntersectPoint(point, useExtendedLine = false) {\n        const keyShapeBounds = this.getShape('key').getBounds();\n        return getEllipseIntersectPoint(point, keyShapeBounds, useExtendedLine);\n    }\n}\nEllipse.defaultStyleProps = {\n    size: [45, 35],\n};\n//# sourceMappingURL=ellipse.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { FederatedPointerEvent, HTML as GHTML, Rect, } from '@antv/g';\nimport { Renderer } from '@antv/g-canvas';\nimport { isNil, isUndefined, pick, set } from '@antv/util';\nimport { CommonEvent } from '../../constants';\nimport { BaseNode } from './base-node';\n/**\n * <zh/> HTML 节点\n *\n * <en/> HTML node\n * @see https://github.com/antvis/G/blob/next/packages/g/src/plugins/EventPlugin.ts\n */\nexport class HTML extends BaseNode {\n    constructor(options) {\n        super(Object.assign(Object.assign({}, options), { style: Object.assign({}, HTML.defaultStyleProps, options.style) }));\n        this.rootPointerEvent = new FederatedPointerEvent(null);\n        this.forwardEvents = (nativeEvent) => {\n            const canvas = this.context.canvas;\n            const iCanvas = canvas.context.renderingContext.root.ownerDocument.defaultView;\n            const normalizedEvents = this.normalizeToPointerEvent(nativeEvent, iCanvas);\n            normalizedEvents.forEach((normalizedEvent) => {\n                const event = this.bootstrapEvent(this.rootPointerEvent, normalizedEvent, iCanvas, nativeEvent);\n                // 当点击到 html 元素时，避免触发 pointerupoutside 事件\n                // When clicking on the html element, avoid triggering the pointerupoutside event\n                set(canvas.context.eventService, 'mappingTable.pointerupoutside', []);\n                canvas.context.eventService.mapEvent(event);\n            });\n        };\n    }\n    get eventService() {\n        return this.context.canvas.context.eventService;\n    }\n    get events() {\n        return [\n            CommonEvent.CLICK,\n            CommonEvent.POINTER_DOWN,\n            CommonEvent.POINTER_MOVE,\n            CommonEvent.POINTER_UP,\n            CommonEvent.POINTER_OVER,\n            CommonEvent.POINTER_LEAVE,\n        ];\n    }\n    getDomElement() {\n        return this.getShape('key').getDomElement();\n    }\n    /**\n     * @override\n     */\n    render(attributes = this.parsedAttributes, container = this) {\n        this.drawKeyShape(attributes, container);\n        this.drawPortShapes(attributes, container);\n    }\n    getKeyStyle(attributes) {\n        const _a = pick(attributes, ['dx', 'dy', 'innerHTML', 'pointerEvents', 'cursor']), { dx = 0, dy = 0 } = _a, style = __rest(_a, [\"dx\", \"dy\"]);\n        const [width, height] = this.getSize(attributes);\n        return Object.assign(Object.assign({ x: dx, y: dy }, style), { width, height });\n    }\n    drawKeyShape(attributes, container) {\n        const style = this.getKeyStyle(attributes);\n        const { x, y, width = 0, height = 0 } = style;\n        const bounds = this.upsert('key-container', Rect, { x, y, width, height, opacity: 0 }, container);\n        return this.upsert('key', GHTML, style, bounds);\n    }\n    connectedCallback() {\n        // only enable in canvas renderer\n        const renderer = this.context.canvas.getRenderer('main');\n        const isCanvasRenderer = renderer instanceof Renderer;\n        if (!isCanvasRenderer)\n            return;\n        const element = this.getDomElement();\n        this.events.forEach((eventName) => {\n            // @ts-expect-error assert event is PointerEvent\n            element.addEventListener(eventName, this.forwardEvents);\n        });\n    }\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (name === 'zIndex' && oldValue !== newValue) {\n            this.getDomElement().style.zIndex = newValue;\n        }\n    }\n    destroy() {\n        const element = this.getDomElement();\n        this.events.forEach((eventName) => {\n            // @ts-expect-error assert event is PointerEvent\n            element.removeEventListener(eventName, this.forwardEvents);\n        });\n        super.destroy();\n    }\n    normalizeToPointerEvent(event, canvas) {\n        const normalizedEvents = [];\n        if (canvas.isTouchEvent(event)) {\n            for (let i = 0; i < event.changedTouches.length; i++) {\n                const touch = event.changedTouches[i];\n                // use changedTouches instead of touches since touchend has no touches\n                // @see https://stackoverflow.com/a/10079076\n                if (isUndefined(touch.button))\n                    touch.button = 0;\n                if (isUndefined(touch.buttons))\n                    touch.buttons = 1;\n                if (isUndefined(touch.isPrimary)) {\n                    touch.isPrimary = event.touches.length === 1 && event.type === 'touchstart';\n                }\n                if (isUndefined(touch.width))\n                    touch.width = touch.radiusX || 1;\n                if (isUndefined(touch.height))\n                    touch.height = touch.radiusY || 1;\n                if (isUndefined(touch.tiltX))\n                    touch.tiltX = 0;\n                if (isUndefined(touch.tiltY))\n                    touch.tiltY = 0;\n                if (isUndefined(touch.pointerType))\n                    touch.pointerType = 'touch';\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Touch/identifier\n                if (isUndefined(touch.pointerId))\n                    touch.pointerId = touch.identifier || 0;\n                if (isUndefined(touch.pressure))\n                    touch.pressure = touch.force || 0.5;\n                if (isUndefined(touch.twist))\n                    touch.twist = 0;\n                if (isUndefined(touch.tangentialPressure))\n                    touch.tangentialPressure = 0;\n                touch.isNormalized = true;\n                touch.type = event.type;\n                normalizedEvents.push(touch);\n            }\n        }\n        else if (canvas.isMouseEvent(event)) {\n            const tempEvent = event;\n            if (isUndefined(tempEvent.isPrimary))\n                tempEvent.isPrimary = true;\n            if (isUndefined(tempEvent.width))\n                tempEvent.width = 1;\n            if (isUndefined(tempEvent.height))\n                tempEvent.height = 1;\n            if (isUndefined(tempEvent.tiltX))\n                tempEvent.tiltX = 0;\n            if (isUndefined(tempEvent.tiltY))\n                tempEvent.tiltY = 0;\n            if (isUndefined(tempEvent.pointerType))\n                tempEvent.pointerType = 'mouse';\n            if (isUndefined(tempEvent.pointerId))\n                tempEvent.pointerId = 1;\n            if (isUndefined(tempEvent.pressure))\n                tempEvent.pressure = 0.5;\n            if (isUndefined(tempEvent.twist))\n                tempEvent.twist = 0;\n            if (isUndefined(tempEvent.tangentialPressure))\n                tempEvent.tangentialPressure = 0;\n            tempEvent.isNormalized = true;\n            normalizedEvents.push(tempEvent);\n        }\n        else {\n            normalizedEvents.push(event);\n        }\n        return normalizedEvents;\n    }\n    transferMouseData(event, nativeEvent) {\n        event.isTrusted = nativeEvent.isTrusted;\n        event.srcElement = nativeEvent.srcElement;\n        event.timeStamp = performance.now();\n        event.type = nativeEvent.type;\n        event.altKey = nativeEvent.altKey;\n        event.metaKey = nativeEvent.metaKey;\n        event.shiftKey = nativeEvent.shiftKey;\n        event.ctrlKey = nativeEvent.ctrlKey;\n        event.button = nativeEvent.button;\n        event.buttons = nativeEvent.buttons;\n        event.client.x = nativeEvent.clientX;\n        event.client.y = nativeEvent.clientY;\n        event.movement.x = nativeEvent.movementX;\n        event.movement.y = nativeEvent.movementY;\n        event.page.x = nativeEvent.pageX;\n        event.page.y = nativeEvent.pageY;\n        event.screen.x = nativeEvent.screenX;\n        event.screen.y = nativeEvent.screenY;\n        event.relatedTarget = null;\n    }\n    bootstrapEvent(event, normalizedEvent, view, nativeEvent) {\n        event.view = view;\n        // @ts-ignore\n        event.originalEvent = null;\n        event.nativeEvent = nativeEvent;\n        event.pointerId = normalizedEvent.pointerId;\n        event.width = normalizedEvent.width;\n        event.height = normalizedEvent.height;\n        event.isPrimary = normalizedEvent.isPrimary;\n        event.pointerType = normalizedEvent.pointerType;\n        event.pressure = normalizedEvent.pressure;\n        event.tangentialPressure = normalizedEvent.tangentialPressure;\n        event.tiltX = normalizedEvent.tiltX;\n        event.tiltY = normalizedEvent.tiltY;\n        event.twist = normalizedEvent.twist;\n        this.transferMouseData(event, normalizedEvent);\n        const { x, y } = this.getViewportXY(normalizedEvent);\n        event.viewport.x = x;\n        event.viewport.y = y;\n        const [canvasX, canvasY] = this.context.canvas.getCanvasByViewport([x, y]);\n        event.canvas.x = canvasX;\n        event.canvas.y = canvasY;\n        event.global.copyFrom(event.canvas);\n        event.offset.copyFrom(event.canvas);\n        event.isTrusted = nativeEvent.isTrusted;\n        if (event.type === 'pointerleave') {\n            event.type = 'pointerout';\n        }\n        return event;\n    }\n    getViewportXY(nativeEvent) {\n        let x;\n        let y;\n        const { offsetX, offsetY, clientX, clientY } = nativeEvent;\n        if (!isNil(offsetX) && !isNil(offsetY)) {\n            x = offsetX;\n            y = offsetY;\n        }\n        else {\n            const point = this.eventService.client2Viewport({ x: clientX, y: clientY });\n            x = point.x;\n            y = point.y;\n        }\n        return { x, y };\n    }\n    onframe() {\n        super.onframe();\n        // sync opacity\n        const { opacity } = this.attributes;\n        this.getDomElement().style.opacity = `${opacity}`;\n    }\n}\nHTML.defaultStyleProps = {\n    size: [160, 80],\n    halo: false,\n    icon: false,\n    label: false,\n    pointerEvents: 'auto',\n};\n//# sourceMappingURL=html.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Rect as GRect } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { add } from '../../utils/vector';\nimport { Image as ImageShape } from '../shapes';\nimport { connectImage, dispatchPositionChange } from '../shapes/image';\nimport { BaseNode } from './base-node';\n/**\n * <zh/> 图片节点\n *\n * <en/> Image node\n */\nexport class Image extends BaseNode {\n    constructor(options) {\n        super(mergeOptions({ style: Image.defaultStyleProps }, options));\n    }\n    getKeyStyle(attributes) {\n        const [width, height] = this.getSize(attributes);\n        const _a = super.getKeyStyle(attributes), { fillOpacity, opacity = fillOpacity } = _a, keyStyle = __rest(_a, [\"fillOpacity\", \"opacity\"]);\n        return Object.assign(Object.assign({ opacity }, keyStyle), { width,\n            height, x: -width / 2, y: -height / 2 });\n    }\n    getHaloStyle(attributes) {\n        if (attributes.halo === false)\n            return false;\n        const _a = this.getShape('key').attributes, { fill: keyStyleFill, stroke: keyStyleStroke } = _a, keyStyle = __rest(_a, [\"fill\", \"stroke\"]);\n        const haloStyle = subStyleProps(this.getGraphicStyle(attributes), 'halo');\n        const haloLineWidth = Number(haloStyle.lineWidth);\n        const [width, height] = add(this.getSize(attributes), [haloLineWidth, haloLineWidth]);\n        const fill = 'transparent';\n        return Object.assign(Object.assign({}, haloStyle), { width, height, fill, x: -width / 2, y: -height / 2 });\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const [width, height] = this.getSize(attributes);\n        return style\n            ? Object.assign({ width: width * ICON_SIZE_RATIO, height: height * ICON_SIZE_RATIO }, style)\n            : false;\n    }\n    drawKeyShape(attributes, container) {\n        const image = this.upsert('key', ImageShape, this.getKeyStyle(attributes), container);\n        connectImage(this);\n        return image;\n    }\n    drawHaloShape(attributes, container) {\n        this.upsert('halo', GRect, this.getHaloStyle(attributes), container);\n    }\n    update(attr) {\n        super.update(attr);\n        if (attr && ('x' in attr || 'y' in attr || 'z' in attr)) {\n            dispatchPositionChange(this);\n        }\n    }\n}\nImage.defaultStyleProps = {\n    size: 32,\n};\n//# sourceMappingURL=image.js.map","import { isEmpty } from '@antv/util';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { getIncircleRadius, getTriangleCenter } from '../../utils/bbox';\nimport { getPortXYByPlacement, getTrianglePoints, getTrianglePorts } from '../../utils/element';\nimport { subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { Polygon } from '../shapes/polygon';\n/**\n * <zh/> 三角形节点\n *\n * <en/> Triangle node\n */\nexport class Triangle extends Polygon {\n    constructor(options) {\n        super(mergeOptions({ style: Triangle.defaultStyleProps }, options));\n    }\n    getPoints(attributes) {\n        const { direction } = attributes;\n        const [width, height] = this.getSize(attributes);\n        return getTrianglePoints(width, height, direction);\n    }\n    getPortXY(attributes, style) {\n        const { direction } = attributes;\n        const { placement = 'top' } = style;\n        const bbox = this.getShape('key').getLocalBounds();\n        const [width, height] = this.getSize(attributes);\n        const ports = getTrianglePorts(width, height, direction);\n        return getPortXYByPlacement(bbox, placement, ports, false);\n    }\n    // icon 处于内切三角形的重心\n    // icon is at the centroid of the triangle\n    getIconStyle(attributes) {\n        const { icon, iconText, iconSrc, direction } = attributes;\n        if (icon === false || isEmpty(iconText || iconSrc))\n            return false;\n        const iconStyle = subStyleProps(this.getGraphicStyle(attributes), 'icon');\n        const bbox = this.getShape('key').getLocalBounds();\n        const [x, y] = getTriangleCenter(bbox, direction);\n        const size = getIncircleRadius(bbox, direction) * 2 * ICON_SIZE_RATIO;\n        return Object.assign({ x,\n            y, width: size, height: size }, iconStyle);\n    }\n}\nTriangle.defaultStyleProps = {\n    size: 40,\n    direction: 'up',\n};\n//# sourceMappingURL=triangle.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { AABB } from '@antv/g';\nimport { isFunction } from '@antv/util';\nimport { getBBoxHeight, getBBoxWidth, getCombinedBBox, getExpandedBBox } from '../../utils/bbox';\nimport { idOf } from '../../utils/id';\nimport { parsePadding } from '../../utils/padding';\nimport { getXYByPlacement, hasPosition, positionOf } from '../../utils/position';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport { add, divide } from '../../utils/vector';\nimport { BaseNode } from '../nodes';\nimport { Icon } from '../shapes';\nimport { connectImage, dispatchPositionChange } from '../shapes/image';\n/**\n * <zh/> 组合元素的基类\n *\n * <en/> Base class of combo\n * @remarks\n * <zh/> 自定义组合时，推荐使用这个类作为基类。这样，用户只需要专注于实现 keyShape 的绘制逻辑\n *\n * <en/> When customizing a combo, it is recommended to use this class as the base class. In this way, users only need to focus on the logic of drawing keyShape\n */\nexport class BaseCombo extends BaseNode {\n    constructor(options) {\n        super(mergeOptions({ style: BaseCombo.defaultStyleProps }, options));\n        this.type = 'combo';\n        this.updateComboPosition(this.parsedAttributes);\n    }\n    getKeySize(attributes) {\n        const { collapsed, childrenNode = [] } = attributes;\n        if (childrenNode.length === 0)\n            return this.getEmptyKeySize(attributes);\n        return collapsed ? this.getCollapsedKeySize(attributes) : this.getExpandedKeySize(attributes);\n    }\n    getEmptyKeySize(attributes) {\n        const { padding, collapsedSize } = attributes;\n        const [top, right, bottom, left] = parsePadding(padding);\n        return add(parseSize(collapsedSize), [left + right, top + bottom, 0]);\n    }\n    getCollapsedKeySize(attributes) {\n        return parseSize(attributes.collapsedSize);\n    }\n    getExpandedKeySize(attributes) {\n        const contentBBox = this.getContentBBox(attributes);\n        return [getBBoxWidth(contentBBox), getBBoxHeight(contentBBox), 0];\n    }\n    getContentBBox(attributes) {\n        const { childrenNode = [], padding } = attributes;\n        const children = childrenNode.map((id) => this.context.element.getElement(id)).filter(Boolean);\n        if (children.length === 0) {\n            const bbox = new AABB();\n            const { x = 0, y = 0, size } = attributes;\n            const [width, height] = parseSize(size);\n            bbox.setMinMax([x - width / 2, y - height / 2, 0], [x + width / 2, y + height / 2, 0]);\n            return bbox;\n        }\n        const childrenBBox = getCombinedBBox(children.map((child) => child.getBounds()));\n        if (!padding)\n            return childrenBBox;\n        return getExpandedBBox(childrenBBox, padding);\n    }\n    drawCollapsedMarkerShape(attributes, container) {\n        const style = this.getCollapsedMarkerStyle(attributes);\n        this.upsert('collapsed-marker', Icon, style, container);\n        connectImage(this);\n    }\n    getCollapsedMarkerStyle(attributes) {\n        if (!attributes.collapsed || !attributes.collapsedMarker)\n            return false;\n        const _a = subStyleProps(this.getGraphicStyle(attributes), 'collapsedMarker'), { type } = _a, collapsedMarkerStyle = __rest(_a, [\"type\"]);\n        const keyShape = this.getShape('key');\n        const [x, y] = getXYByPlacement(keyShape.getLocalBounds(), 'center');\n        const style = Object.assign(Object.assign({}, collapsedMarkerStyle), { x, y });\n        if (type) {\n            const text = this.getCollapsedMarkerText(type, attributes);\n            Object.assign(style, { text });\n        }\n        return style;\n    }\n    getCollapsedMarkerText(type, attributes) {\n        const { childrenData = [] } = attributes;\n        const { model } = this.context;\n        if (type === 'descendant-count')\n            return model.getDescendantsData(this.id).length.toString();\n        if (type === 'child-count')\n            return childrenData.length.toString();\n        if (type === 'node-count')\n            return model\n                .getDescendantsData(this.id)\n                .filter((datum) => model.getElementType(idOf(datum)) === 'node')\n                .length.toString();\n        if (isFunction(type))\n            return type(childrenData);\n        return '';\n    }\n    getComboPosition(attributes) {\n        const { x = 0, y = 0, collapsed, childrenData = [] } = attributes;\n        if (childrenData.length === 0)\n            return [+x, +y, 0];\n        if (collapsed) {\n            const { model } = this.context;\n            const descendants = model.getDescendantsData(this.id).filter((datum) => !model.isCombo(idOf(datum)));\n            if (descendants.length > 0 && descendants.some(hasPosition)) {\n                // combo 被收起，返回平均中心位置 / combo is collapsed, return the average center position\n                const totalPosition = descendants.reduce((acc, datum) => add(acc, positionOf(datum)), [0, 0, 0]);\n                return divide(totalPosition, descendants.length);\n            }\n            // empty combo\n            return [+x, +y, 0];\n        }\n        return this.getContentBBox(attributes).center;\n    }\n    getComboStyle(attributes) {\n        const [x, y] = this.getComboPosition(attributes);\n        // x/y will be used to calculate position later.\n        return { x, y, transform: [['translate', x, y]] };\n    }\n    updateComboPosition(attributes) {\n        const comboStyle = this.getComboStyle(attributes);\n        Object.assign(this.style, comboStyle);\n        // Sync combo position to model\n        const { x, y } = comboStyle;\n        this.context.model.syncNodeLikeDatum({ id: this.id, style: { x, y } });\n        dispatchPositionChange(this);\n    }\n    render(attributes, container = this) {\n        super.render(attributes, container);\n        // collapsed marker\n        this.drawCollapsedMarkerShape(attributes, container);\n    }\n    update(attr = {}) {\n        super.update(attr);\n        this.updateComboPosition(this.parsedAttributes);\n    }\n    onframe() {\n        super.onframe();\n        // 收起状态下，通过动画来更新位置\n        // Update position through animation in collapsed state\n        if (!this.attributes.collapsed)\n            this.updateComboPosition(this.parsedAttributes);\n        this.drawKeyShape(this.parsedAttributes, this);\n    }\n    animate(keyframes, options) {\n        const animation = super.animate(this.attributes.collapsed\n            ? keyframes\n            : // 如果当前 combo 是展开状态，则动画不受 x, y, z, transform 影响，仅由子元素决定位置\n                // If the current combo is in the expanded state, the animation is not affected by x, y, z, transform, and the position is determined only by the child elements\n                keyframes.map((_a) => {\n                    var { x, y, z, transform } = _a, keyframe = __rest(_a, [\"x\", \"y\", \"z\", \"transform\"]);\n                    return keyframe;\n                }), options);\n        if (!animation)\n            return animation;\n        return new Proxy(animation, {\n            set: (target, propKey, value) => {\n                if (propKey === 'currentTime')\n                    Promise.resolve().then(() => this.onframe());\n                return Reflect.set(target, propKey, value);\n            },\n        });\n    }\n}\nBaseCombo.defaultStyleProps = {\n    childrenNode: [],\n    droppable: true,\n    draggable: true,\n    collapsed: false,\n    collapsedSize: 32,\n    collapsedMarker: true,\n    collapsedMarkerZIndex: 1,\n    collapsedMarkerFontSize: 12,\n    collapsedMarkerTextAlign: 'center',\n    collapsedMarkerTextBaseline: 'middle',\n    collapsedMarkerType: 'child-count',\n};\n//# sourceMappingURL=base-combo.js.map","import isArrayLike from './is-array-like';\nvar contains = function (arr, value) {\n    if (!isArrayLike(arr)) {\n        return false;\n    }\n    return arr.indexOf(value) > -1;\n};\nexport default contains;\n//# sourceMappingURL=contains.js.map","import filter from './filter';\nimport contains from './contains';\n/**\n * Flattens `array` a single level deep.\n *\n * @param {Array} arr The array to inspect.\n * @param {Array} values The values to exclude.\n * @return {Array} Returns the new array of filtered values.\n * @example\n * difference([2, 1], [2, 3]);  // => [1]\n */\nvar difference = function (arr, values) {\n    if (values === void 0) { values = []; }\n    return filter(arr, function (value) { return !contains(values, value); });\n};\nexport default difference;\n//# sourceMappingURL=difference.js.map","import { difference, isEqual } from '@antv/util';\nimport { getBBoxHeight, getBBoxWidth, getCombinedBBox, getNearestBoundaryPoint, getNearestBoundarySide, getNodeBBox, isPointBBoxCenter, isPointInBBox, isPointOnBBoxBoundary, isPointOutsideBBox, } from '../bbox';\nimport { isOrthogonal, moveTo, round } from '../point';\nimport { angle, distance, subtract, toVector2, toVector3 } from '../vector';\nconst defaultOptions = {\n    padding: 10,\n};\n/**\n * <zh/> 获取两点之间的正交线段路径\n *\n * <en/> Get orthogonal line segments between two points\n * @param sourcePoint - <zh/> 起始点 | <en/> start point\n * @param targetPoint - <zh/> 终止点 | <en/> end point\n * @param sourceNode - <zh/> 起始节点 | <en/> source node\n * @param targetNode - <zh/> 终止节点 | <en/> target node\n * @param controlPoints - <zh/> 控制点 | <en/> control points\n * @param options - <zh/> 配置项 | <en/> options\n * @returns <zh/> 路径点集 | <en/> vertices\n */\nexport function orth(sourcePoint, targetPoint, sourceNode, targetNode, controlPoints, options) {\n    const { padding } = Object.assign(defaultOptions, options);\n    const sourceBBox = getNodeBBox(sourceNode, padding);\n    const targetBBox = getNodeBBox(targetNode, padding);\n    const points = [sourcePoint, ...controlPoints, targetPoint];\n    // direction of previous route segment\n    let direction = null;\n    const result = [];\n    for (let fromIdx = 0, len = points.length; fromIdx < len - 1; fromIdx++) {\n        const toIdx = fromIdx + 1;\n        const from = points[fromIdx];\n        const to = points[toIdx];\n        const isOrth = isOrthogonal(from, to);\n        let route = null;\n        if (fromIdx === 0) {\n            if (toIdx === len - 1) {\n                // source -> target\n                if (sourceBBox.intersects(targetBBox)) {\n                    route = insideNode(from, to, sourceBBox, targetBBox);\n                }\n                else if (!isPointBBoxCenter(from, sourceBBox) && !isPointBBoxCenter(to, targetBBox)) {\n                    const fromWithPadding = getNearestBoundaryPoint(from, sourceBBox);\n                    const toWithPadding = getNearestBoundaryPoint(to, targetBBox);\n                    route = pointToPoint(fromWithPadding, toWithPadding, getDirection(fromWithPadding, toWithPadding));\n                    route.points.unshift(fromWithPadding);\n                    route.points.push(toWithPadding);\n                }\n                else if (!isOrth) {\n                    route = nodeToNode(from, to, sourceBBox, targetBBox);\n                }\n            }\n            else {\n                // source -> point\n                if (isPointInBBox(to, sourceBBox)) {\n                    route = insideNode(from, to, sourceBBox, getNodeBBox(to, padding), direction);\n                }\n                else if (!isOrth) {\n                    route = nodeToPoint(from, to, sourceBBox);\n                }\n            }\n        }\n        else if (toIdx === len - 1) {\n            // point -> target\n            if (isPointInBBox(from, targetBBox)) {\n                route = insideNode(from, to, getNodeBBox(from, padding), targetBBox, direction);\n            }\n            else if (!isOrth) {\n                route = pointToNode(from, to, targetBBox, direction);\n            }\n        }\n        else if (!isOrth) {\n            // point -> point\n            route = pointToPoint(from, to, direction);\n        }\n        // set direction for next iteration\n        if (route) {\n            result.push(...route.points);\n            direction = route.direction;\n        }\n        else {\n            // orthogonal route and not looped\n            direction = getDirection(from, to);\n        }\n        if (toIdx < len - 1)\n            result.push(to);\n    }\n    return result.map(toVector2);\n}\n/**\n * Direction to opposites direction map\n */\nconst opposites = {\n    N: 'S',\n    S: 'N',\n    W: 'E',\n    E: 'W',\n};\n/**\n * Direction to radians map\n */\nconst radians = {\n    N: -Math.PI / 2,\n    S: Math.PI / 2,\n    E: 0,\n    W: Math.PI,\n};\n/**\n * <zh/> 获取两点之间的方向，从 `from` 到 `to` 的方向\n *\n * <en/> Get the direction between two points, the direction from `from` to `to`\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @returns <zh/> 方向 | <en/> direction\n */\nexport function getDirection(from, to) {\n    const [fx, fy] = from;\n    const [tx, ty] = to;\n    if (fx === tx) {\n        return fy > ty ? 'N' : 'S';\n    }\n    if (fy === ty) {\n        return fx > tx ? 'W' : 'E';\n    }\n    return null;\n}\n/**\n * <zh/> 获取包围盒的尺寸，根据方向返回宽度或者高度\n *\n * <en/> Get the size of the bounding box, return the width or height according to the direction\n * @param bbox - <zh/> 包围盒 | <en/> bounding box\n * @param direction - <zh/> 方向 | <en/> direction\n * @returns <zh/> 尺寸 | <en/> size\n */\nexport function getBBoxSize(bbox, direction) {\n    return direction === 'N' || direction === 'S' ? getBBoxHeight(bbox) : getBBoxWidth(bbox);\n}\n/**\n * <zh/> 从一个点到另一个点计算正交路由\n *\n * <en/> Calculate orthogonal route from one point to another\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @param direction - <zh/> 前一条线段的方向 | <en/> direction of the previous segment\n * @returns <zh/> 正交路由 | <en/> orthogonal route\n */\nexport function pointToPoint(from, to, direction) {\n    const p1 = [from[0], to[1]];\n    const p2 = [to[0], from[1]];\n    const d1 = getDirection(from, p1);\n    const d2 = getDirection(from, p2);\n    const opposite = direction ? opposites[direction] : null;\n    const p = d1 === direction || (d1 !== opposite && d2 !== direction) ? p1 : p2;\n    return { points: [p], direction: getDirection(p, to) };\n}\n/**\n * <zh/> 从节点到点计算正交路由\n *\n * <en/> Calculate orthogonal route from node to point\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @param fromBBox - <zh/> 起始节点的包围盒 | <en/> bounding box of the start node\n * @returns <zh/> 正交路由 | <en/> orthogonal route\n */\nexport function nodeToPoint(from, to, fromBBox) {\n    if (isPointBBoxCenter(from, fromBBox)) {\n        const p = freeJoin(from, to, fromBBox);\n        return { points: [p], direction: getDirection(p, to) };\n    }\n    else {\n        const fromWithPadding = getNearestBoundaryPoint(from, fromBBox);\n        const isHorizontal = ['left', 'right'].includes(getNearestBoundarySide(from, fromBBox));\n        const p = isHorizontal ? [to[0], fromWithPadding[1]] : [fromWithPadding[0], to[1]];\n        return { points: [p], direction: getDirection(p, to) };\n    }\n}\n/**\n * <zh/> 从点到节点计算正交路由\n *\n * <en/> Calculate orthogonal route from point to node\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @param toBBox - <zh/> 终止节点的包围盒 | <en/> bounding box of the end node\n * @param direction - <zh/> 前一条线段的方向 | <en/> direction of the previous segment\n * @returns <zh/> 正交路由 | <en/> orthogonal route\n */\nexport function pointToNode(from, to, toBBox, direction) {\n    const toWithPadding = isPointBBoxCenter(to, toBBox) ? to : getNearestBoundaryPoint(to, toBBox);\n    const points = [\n        [toWithPadding[0], from[1]],\n        [from[0], toWithPadding[1]],\n    ];\n    const freePoints = points.filter((p) => isPointOutsideBBox(p, toBBox) && !isPointOnBBoxBoundary(p, toBBox, true));\n    const freeDirectionPoints = freePoints.filter((p) => getDirection(p, from) !== direction);\n    if (freeDirectionPoints.length > 0) {\n        // Pick a point which bears the same direction as the previous segment.\n        const p = freeDirectionPoints.find((p) => getDirection(from, p) === direction) || freeDirectionPoints[0];\n        return {\n            points: [p],\n            direction: getDirection(p, to),\n        };\n    }\n    else {\n        // Here we found only points which are either contained in the element or they would create\n        // a link segment going in opposites direction from the previous one.\n        // We take the point inside element and move it outside the element in the direction the\n        // route is going. Now we can join this point with the current end (using freeJoin).\n        const p = difference(points, freePoints)[0];\n        const p2 = moveTo(to, p, getBBoxSize(toBBox, direction) / 2);\n        const p1 = freeJoin(p2, from, toBBox);\n        return {\n            points: [p1, p2],\n            direction: getDirection(p2, to),\n        };\n    }\n}\n/**\n * <zh/> 从节点到节点计算正交路由\n *\n * <en/> Calculate orthogonal route from node to node\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @param fromBBox - <zh/> 起始节点的包围盒 | <en/> bounding box of the start node\n * @param toBBox - <zh/> 终止节点的包围盒 | <en/> bounding box of the end node\n * @returns <zh/> 正交路由 | <en/> orthogonal route\n */\nexport function nodeToNode(from, to, fromBBox, toBBox) {\n    let route = nodeToPoint(from, to, fromBBox);\n    const p1 = toVector3(route.points[0]);\n    if (isPointInBBox(p1, toBBox)) {\n        route = nodeToPoint(to, from, toBBox);\n        const p2 = toVector3(route.points[0]);\n        if (isPointInBBox(p2, fromBBox)) {\n            const fromBorder = moveTo(from, p1, getBBoxSize(fromBBox, getDirection(from, p1)) / 2);\n            const toBorder = moveTo(to, p2, getBBoxSize(toBBox, getDirection(to, p2)) / 2);\n            const midPoint = [(fromBorder[0] + toBorder[0]) / 2, (fromBorder[1] + toBorder[1]) / 2];\n            const startRoute = nodeToPoint(from, midPoint, fromBBox);\n            const endRoute = pointToNode(midPoint, to, toBBox, startRoute.direction);\n            route.points = [startRoute.points[0], endRoute.points[0]];\n            route.direction = endRoute.direction;\n        }\n    }\n    return route;\n}\n/**\n * <zh/> 在两个节点内部计算路由\n *\n * <en/> Calculate route inside two nodes\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @param fromBBox - <zh/> 起始节点的包围盒 | <en/> bounding box of the start node\n * @param toBBox - <zh/> 终止节点的包围盒 | <en/> bounding box of the end node\n * @param direction - <zh/> 方向 | <en/> direction\n * @returns <zh/> 正交路由 | <en/> orthogonal route\n */\nexport function insideNode(from, to, fromBBox, toBBox, direction) {\n    const DEFAULT_OFFSET = 0.01;\n    const boundary = getCombinedBBox([fromBBox, toBBox]);\n    const reversed = distance(to, boundary.center) > distance(from, boundary.center);\n    const [start, end] = reversed ? [to, from] : [from, to];\n    const halfPerimeter = getBBoxHeight(boundary) + getBBoxWidth(boundary);\n    let p1;\n    if (direction) {\n        const ref = [\n            start[0] + halfPerimeter * Math.cos(radians[direction]),\n            start[1] + halfPerimeter * Math.sin(radians[direction]),\n        ];\n        // `getNearestBoundaryPoint` returns a point on the boundary, so we need to move it a bit to ensure it's outside the element and then get the correct `p2` via `freeJoin`.\n        p1 = moveTo(getNearestBoundaryPoint(ref, boundary), ref, DEFAULT_OFFSET);\n    }\n    else {\n        p1 = moveTo(getNearestBoundaryPoint(start, boundary), start, -DEFAULT_OFFSET);\n    }\n    let p2 = freeJoin(p1, end, boundary);\n    let points = [round(p1, 2), round(p2, 2)];\n    if (isEqual(round(p1), round(p2))) {\n        const rad = angle(subtract(p1, start), [1, 0, 0]) + Math.PI / 2;\n        p2 = [end[0] + halfPerimeter * Math.cos(rad), end[1] + halfPerimeter * Math.sin(rad), 0];\n        p2 = round(moveTo(getNearestBoundaryPoint(p2, boundary), end, -DEFAULT_OFFSET), 2);\n        const p3 = freeJoin(p1, p2, boundary);\n        points = [p1, p3, p2];\n    }\n    return {\n        points: reversed ? points.reverse() : points,\n        direction: reversed ? getDirection(p1, to) : getDirection(p2, to),\n    };\n}\n/**\n * <zh/> 返回一个点 `p`，使得线段 p,p1 和 p,p2 互相垂直，p 尽可能不在给定的包围盒内\n *\n * <en/> Returns a point `p` where lines p,p1 and p,p2 are perpendicular and p is not contained in the given box\n * @param p1 - <zh/> 点 | <en/> point\n * @param p2 - <zh/> 点 | <en/> point\n * @param bbox - <zh/> 包围盒 | <en/> bounding box\n * @returns <zh/> 点 | <en/> point\n */\nexport function freeJoin(p1, p2, bbox) {\n    let p = [p1[0], p2[1]];\n    if (isPointInBBox(p, bbox)) {\n        p = [p2[0], p1[1]];\n    }\n    return p;\n}\n//# sourceMappingURL=orth.js.map","import { isEqual, isNumber } from '@antv/util';\nimport { getBBoxHeight, getBBoxSize, getBBoxWidth, getNearestBoundarySide, getNodeBBox } from './bbox';\nimport { isCollapsed } from './collapsibility';\nimport { getAllPorts, getNodeConnectionPoint, getPortConnectionPoint, getPortPosition } from './element';\nimport { idOf } from './id';\nimport { isCollinear, isHorizontal, moveTo, parsePoint } from './point';\nimport { freeJoin } from './router/orth';\nimport { add, distance, manhattanDistance, multiply, normalize, perpendicular, subtract } from './vector';\n/**\n * <zh/> 获取标签的位置样式\n *\n * <en/> Get the style of the label's position\n * @param key - <zh/> 边对象 | <en/> The edge object\n * @param placement - <zh/> 标签位置 | <en/> Position of the label\n * @param autoRotate - <zh/> 是否自动旋转 | <en/> Whether to auto-rotate\n * @param offsetX - <zh/> 标签相对于边的水平偏移量 | <en/> Horizontal offset of the label relative to the edge\n * @param offsetY - <zh/> 标签相对于边的垂直偏移量 | <en/> Vertical offset of the label relative to the edge\n * @returns <zh/> 标签的位置样式 | <en/> Returns the style of the label's position\n */\nexport function getLabelPositionStyle(key, placement, autoRotate, offsetX, offsetY) {\n    const START_RATIO = 0;\n    const MIDDLE_RATIO = 0.5;\n    const END_RATIO = 0.99;\n    let ratio = typeof placement === 'number' ? placement : MIDDLE_RATIO;\n    if (placement === 'start')\n        ratio = START_RATIO;\n    if (placement === 'end')\n        ratio = END_RATIO;\n    const point = parsePoint(key.getPoint(ratio));\n    const pointOffset = parsePoint(key.getPoint(ratio + 0.01));\n    let textAlign = placement === 'start' ? 'left' : placement === 'end' ? 'right' : 'center';\n    if (isHorizontal(point, pointOffset) || !autoRotate) {\n        const [x, y] = getXYByPlacement(key, ratio, offsetX, offsetY);\n        return { transform: [['translate', x, y]], textAlign };\n    }\n    let angle = Math.atan2(pointOffset[1] - point[1], pointOffset[0] - point[0]);\n    const isRevert = pointOffset[0] < point[0];\n    if (isRevert) {\n        textAlign = textAlign === 'center' ? textAlign : textAlign === 'left' ? 'right' : 'left';\n        offsetX *= -1;\n        angle += Math.PI;\n    }\n    const [x, y] = getXYByPlacement(key, ratio, offsetX, offsetY, angle);\n    const transform = [\n        ['translate', x, y],\n        ['rotate', (angle / Math.PI) * 180],\n    ];\n    return {\n        textAlign,\n        transform,\n    };\n}\n/**\n * <zh/> 获取边上徽标的位置样式\n *\n * <en/> Get the position style of the badge on the edge\n * @param shapeMap - <zh/> 边上的图形映射 | <en/> Shape map on the edge\n * @param placement - <zh/> 徽标位置 | <en/> Badge position\n * @param labelPlacement - <zh/> 标签位置 | <en/> Label position\n * @param offsetX - <zh/> 水平偏移量 | <en/> Horizontal offset\n * @param offsetY - <zh/> 垂直偏移量 | <en/> Vertical offset\n * @returns <zh/> 徽标的位置样式 | <en/> Position style of the badge\n */\nexport function getBadgePositionStyle(shapeMap, placement, labelPlacement, offsetX, offsetY) {\n    var _a, _b;\n    const badgeWidth = ((_a = shapeMap.badge) === null || _a === void 0 ? void 0 : _a.getGeometryBounds().halfExtents[0]) * 2 || 0;\n    const labelWidth = ((_b = shapeMap.label) === null || _b === void 0 ? void 0 : _b.getGeometryBounds().halfExtents[0]) * 2 || 0;\n    return getLabelPositionStyle(shapeMap.key, labelPlacement, true, (labelWidth ? (labelWidth / 2 + badgeWidth / 2) * (placement === 'suffix' ? 1 : -1) : 0) + offsetX, offsetY);\n}\n/**\n * <zh/> 获取给定边上的指定位置的坐标\n *\n * <en/> Get the coordinates at the specified position on the given edge\n * @param key - <zh/> 边实例 | <en/> Edge instance\n * @param ratio - <zh/> 位置比率 | <en/> Position ratio\n * @param offsetX - <zh/> 水平偏移量 | <en/> Horizontal offset\n * @param offsetY - <zh/> 垂直偏移量 | <en/> Vertical offset\n * @param angle - <zh/> 旋转角度 | <en/> Rotation angle\n * @returns <zh/> 坐标 | <en/> Coordinates\n */\nfunction getXYByPlacement(key, ratio, offsetX, offsetY, angle) {\n    const [pointX, pointY] = parsePoint(key.getPoint(ratio));\n    let actualOffsetX = offsetX;\n    let actualOffsetY = offsetY;\n    if (angle) {\n        actualOffsetX = offsetX * Math.cos(angle) - offsetY * Math.sin(angle);\n        actualOffsetY = offsetX * Math.sin(angle) + offsetY * Math.cos(angle);\n    }\n    return [pointX + actualOffsetX, pointY + actualOffsetY];\n}\n/** ==================== Curve Edge =========================== */\n/**\n * <zh/> 计算曲线的控制点\n *\n * <en/> Calculate the control point of the curve\n * @param sourcePoint - <zh/> 起点 | <en/> Source point\n * @param targetPoint - <zh/> 终点 | <en/> Target point\n * @param curvePosition - <zh/> 控制点在连线上的相对位置（取值范围为 0-1） | <en/> The relative position of the control point on the line (value range from 0 to 1)\n * @param curveOffset - <zh/> 控制点距离两端点连线的距离 | <en/> The distance between the control point and the line\n * @returns <zh/> 控制点 | <en/> Control points\n */\nexport function getCurveControlPoint(sourcePoint, targetPoint, curvePosition, curveOffset) {\n    if (isEqual(sourcePoint, targetPoint))\n        return sourcePoint;\n    const lineVector = subtract(targetPoint, sourcePoint);\n    const controlPoint = [\n        sourcePoint[0] + curvePosition * lineVector[0],\n        sourcePoint[1] + curvePosition * lineVector[1],\n    ];\n    const perpVector = normalize(perpendicular(lineVector, false));\n    controlPoint[0] += curveOffset * perpVector[0];\n    controlPoint[1] += curveOffset * perpVector[1];\n    return controlPoint;\n}\n/**\n * <zh/> 解析控制点距离两端点连线的距离 `curveOffset`\n *\n * <en/> parse the distance of the control point from the line `curveOffset`\n * @param curveOffset - <zh/> curveOffset | <en/> curveOffset\n * @returns <zh/> 标准 curveOffset | <en/> standard curveOffset\n */\nexport function parseCurveOffset(curveOffset) {\n    if (isNumber(curveOffset))\n        return [curveOffset, -curveOffset];\n    return curveOffset;\n}\n/**\n * <zh/> 解析控制点在两端点连线上的相对位置 `curvePosition`，范围为`0-1`\n *\n * <en/> parse the relative position of the control point on the line `curvePosition`\n * @param curvePosition - <zh/> curvePosition | <en/> curvePosition\n * @returns <zh/> 标准 curvePosition | <en/> standard curvePosition\n */\nexport function parseCurvePosition(curvePosition) {\n    if (isNumber(curvePosition))\n        return [curvePosition, 1 - curvePosition];\n    return curvePosition;\n}\n/**\n * <zh/> 获取二次贝塞尔曲线绘制路径\n *\n * <en/> Calculate the path for drawing a quadratic Bessel curve\n * @param sourcePoint - <zh/> 边的起点 | <en/> Source point\n * @param targetPoint - <zh/> 边的终点 | <en/> Target point\n * @param controlPoint - <zh/> 控制点 | <en/> Control point\n * @returns <zh/> 返回绘制曲线的路径 | <en/> Returns curve path\n */\nexport function getQuadraticPath(sourcePoint, targetPoint, controlPoint) {\n    return [\n        ['M', sourcePoint[0], sourcePoint[1]],\n        ['Q', controlPoint[0], controlPoint[1], targetPoint[0], targetPoint[1]],\n    ];\n}\n/**\n * <zh/> 获取三次贝塞尔曲线绘制路径\n *\n * <en/> Calculate the path for drawing a cubic Bessel curve\n * @param sourcePoint - <zh/> 边的起点 | <en/> Source point\n * @param targetPoint - <zh/> 边的终点 | <en/> Target point\n * @param controlPoints - <zh/> 控制点 | <en/> Control point\n * @returns <zh/> 返回绘制曲线的路径 | <en/> Returns curve path\n */\nexport function getCubicPath(sourcePoint, targetPoint, controlPoints) {\n    return [\n        ['M', sourcePoint[0], sourcePoint[1]],\n        [\n            'C',\n            controlPoints[0][0],\n            controlPoints[0][1],\n            controlPoints[1][0],\n            controlPoints[1][1],\n            targetPoint[0],\n            targetPoint[1],\n        ],\n    ];\n}\n/** ==================== Polyline Edge =========================== */\n/**\n * <zh/> 获取折线的绘制路径\n *\n * <en/> Calculates the path for drawing a polyline\n * @param points - <zh/> 折线的顶点 | <en/> The vertices of the polyline\n * @param radius - <zh/> 圆角半径 | <en/> Radius of the rounded corner\n * @param z - <zh/> 路径是否闭合 | <en/> Whether the path is closed\n * @returns <zh/> 返回绘制折线的路径 | <en/> Returns the path for drawing a polyline\n */\nexport function getPolylinePath(points, radius = 0, z = false) {\n    const targetIndex = points.length - 1;\n    const sourcePoint = points[0];\n    const targetPoint = points[targetIndex];\n    const controlPoints = points.slice(1, targetIndex);\n    const pathArray = [['M', sourcePoint[0], sourcePoint[1]]];\n    controlPoints.forEach((midPoint, i) => {\n        const prevPoint = controlPoints[i - 1] || sourcePoint;\n        const nextPoint = controlPoints[i + 1] || targetPoint;\n        if (!isCollinear(prevPoint, midPoint, nextPoint) && radius) {\n            const [ps, pt] = getBorderRadiusPoints(prevPoint, midPoint, nextPoint, radius);\n            pathArray.push(['L', ps[0], ps[1]], ['Q', midPoint[0], midPoint[1], pt[0], pt[1]], ['L', pt[0], pt[1]]);\n        }\n        else {\n            pathArray.push(['L', midPoint[0], midPoint[1]]);\n        }\n    });\n    pathArray.push(['L', targetPoint[0], targetPoint[1]]);\n    if (z)\n        pathArray.push(['Z']);\n    return pathArray;\n}\n/**\n * <zh/> 根据给定的半径计算出不共线的三点生成贝塞尔曲线的控制点，以模拟接近圆弧\n *\n * <en/> Calculates the control points of the Bezier curve generated by three non-collinear points according to the given radius to simulate an arc\n * @param prevPoint - <zh/> 前一个点 | <en/> Previous point\n * @param midPoint - <zh/> 中间点 | <en/> Middle point\n * @param nextPoint - <zh/> 后一个点 | <en/> Next point\n * @param radius - <zh/> 圆角半径 | <en/> Radius of the rounded corner\n * @returns <zh/> 返回控制点 | <en/> Returns control points\n */\nexport function getBorderRadiusPoints(prevPoint, midPoint, nextPoint, radius) {\n    const d0 = manhattanDistance(prevPoint, midPoint);\n    const d1 = manhattanDistance(nextPoint, midPoint);\n    // 取给定的半径和最小半径之间的较小值 | use the smaller value between the given radius and the minimum radius\n    const r = Math.min(radius, Math.min(d0, d1) / 2);\n    const ps = [\n        midPoint[0] - (r / d0) * (midPoint[0] - prevPoint[0]),\n        midPoint[1] - (r / d0) * (midPoint[1] - prevPoint[1]),\n    ];\n    const pt = [\n        midPoint[0] - (r / d1) * (midPoint[0] - nextPoint[0]),\n        midPoint[1] - (r / d1) * (midPoint[1] - nextPoint[1]),\n    ];\n    return [ps, pt];\n}\n/** ==================== Loop Edge =========================== */\nexport const getRadians = (bbox) => {\n    const halfPI = Math.PI / 2;\n    const halfHeight = getBBoxHeight(bbox) / 2;\n    const halfWidth = getBBoxWidth(bbox) / 2;\n    const angleWithX = Math.atan2(halfHeight, halfWidth) / 2;\n    const angleWithY = Math.atan2(halfWidth, halfHeight) / 2;\n    return {\n        top: [-halfPI - angleWithY, -halfPI + angleWithY],\n        'top-right': [-halfPI + angleWithY, -angleWithX],\n        'right-top': [-halfPI + angleWithY, -angleWithX],\n        right: [-angleWithX, angleWithX],\n        'bottom-right': [angleWithX, halfPI - angleWithY],\n        'right-bottom': [angleWithX, halfPI - angleWithY],\n        bottom: [halfPI - angleWithY, halfPI + angleWithY],\n        'bottom-left': [halfPI + angleWithY, Math.PI - angleWithX],\n        'left-bottom': [halfPI + angleWithY, Math.PI - angleWithX],\n        left: [Math.PI - angleWithX, Math.PI + angleWithX],\n        'top-left': [Math.PI + angleWithX, -halfPI - angleWithY],\n        'left-top': [Math.PI + angleWithX, -halfPI - angleWithY],\n    };\n};\n/**\n * <zh/> 获取环形边的起点和终点\n *\n * <en/> Get the start and end points of the loop edge\n * @param node - <zh/> 节点实例 | <en/> Node instance\n * @param placement - <zh/> 环形边相对于节点位置 | <en/> Loop position relative to the node\n * @param clockwise - <zh/> 是否顺时针 | <en/> Whether to draw the loop clockwise\n * @param sourcePort - <zh/> 起点连接桩 | <en/> Source port\n * @param targetPort - <zh/> 终点连接桩 | <en/> Target port\n * @returns <zh/> 起点和终点 | <en/> Start and end points\n */\nexport function getLoopEndpoints(node, placement, clockwise, sourcePort, targetPort) {\n    const bbox = getNodeBBox(node);\n    const center = node.getCenter();\n    let sourcePoint = sourcePort && getPortPosition(sourcePort);\n    let targetPoint = targetPort && getPortPosition(targetPort);\n    if (!sourcePoint || !targetPoint) {\n        const radians = getRadians(bbox);\n        const angle1 = radians[placement][0];\n        const angle2 = radians[placement][1];\n        const [width, height] = getBBoxSize(bbox);\n        const r = Math.max(width, height);\n        const point1 = add(center, [r * Math.cos(angle1), r * Math.sin(angle1), 0]);\n        const point2 = add(center, [r * Math.cos(angle2), r * Math.sin(angle2), 0]);\n        sourcePoint = getNodeConnectionPoint(node, point1);\n        targetPoint = getNodeConnectionPoint(node, point2);\n        if (!clockwise) {\n            [sourcePoint, targetPoint] = [targetPoint, sourcePoint];\n        }\n    }\n    return [sourcePoint, targetPoint];\n}\n/**\n * <zh/> 获取环形边的绘制路径\n *\n * <en/> Get the path of the loop edge\n * @param node - <zh/> 节点实例 | <en/> Node instance\n * @param placement - <zh/> 环形边相对于节点位置 | <en/> Loop position relative to the node\n * @param clockwise - <zh/> 是否顺时针 | <en/> Whether to draw the loop clockwise\n * @param dist - <zh/> 从节点 keyShape 边缘到自环顶部的距离 | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @param sourcePortKey - <zh/> 起点连接桩 key | <en/> Source port key\n * @param targetPortKey - <zh/> 终点连接桩 key | <en/> Target port key\n * @returns <zh/> 返回绘制环形边的路径 | <en/> Returns the path of the loop edge\n */\nexport function getCubicLoopPath(node, placement, clockwise, dist, sourcePortKey, targetPortKey) {\n    const sourcePort = node.getPorts()[(sourcePortKey || targetPortKey)];\n    const targetPort = node.getPorts()[(targetPortKey || sourcePortKey)];\n    // 1. 获取起点和终点 | Get the start and end points\n    let [sourcePoint, targetPoint] = getLoopEndpoints(node, placement, clockwise, sourcePort, targetPort);\n    // 2. 获取控制点 | Get the control points\n    const controlPoints = getCubicLoopControlPoints(node, sourcePoint, targetPoint, dist);\n    // 3. 如果定义了连接桩，调整端点以与连接桩边界相交 | If the port is defined, adjust the endpoint to intersect with the port boundary\n    if (sourcePort)\n        sourcePoint = getPortConnectionPoint(sourcePort, controlPoints[0]);\n    if (targetPort)\n        targetPoint = getPortConnectionPoint(targetPort, controlPoints.at(-1));\n    return getCubicPath(sourcePoint, targetPoint, controlPoints);\n}\n/**\n * <zh/> 获取环形边的控制点\n *\n * <en/> Get the control points of the loop edge\n * @param node - <zh/> 节点实例 | <en/> Node instance\n * @param sourcePoint - <zh/> 起点 | <en/> Source point\n * @param targetPoint - <zh/> 终点 | <en/> Target point\n * @param dist - <zh/> 从节点 keyShape 边缘到自环顶部的距离 | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @returns <zh/> 控制点 | <en/> Control points\n */\nexport function getCubicLoopControlPoints(node, sourcePoint, targetPoint, dist) {\n    const center = node.getCenter();\n    if (isEqual(sourcePoint, targetPoint)) {\n        const direction = subtract(sourcePoint, center);\n        const adjustment = [\n            dist * Math.sign(direction[0]) || dist / 2,\n            dist * Math.sign(direction[1]) || -dist / 2,\n            0,\n        ];\n        return [add(sourcePoint, adjustment), add(targetPoint, multiply(adjustment, [1, -1, 1]))];\n    }\n    return [\n        moveTo(center, sourcePoint, distance(center, sourcePoint) + dist),\n        moveTo(center, targetPoint, distance(center, targetPoint) + dist),\n    ];\n}\n/**\n * <zh/> 获取环形折线边的绘制路径\n *\n * <en/> Get the path of the loop polyline edge\n * @param node - <zh/> 节点实例 | <en/> Node instance\n * @param radius - <zh/> 圆角半径 | <en/> Radius of the rounded corner\n * @param placement - <zh/> 环形边相对于节点位置 | <en/> Loop position relative to the node\n * @param clockwise - <zh/> 是否顺时针 | <en/> Whether to draw the loop clockwise\n * @param dist - <zh/> 从节点 keyShape 边缘到自环顶部的距离 | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @param sourcePortKey - <zh/> 起点连接桩 key | <en/> Source port key\n * @param targetPortKey - <zh/> 终点连接桩 key | <en/> Target port key\n * @returns <zh/> 返回绘制环形折线边的路径 | <en/> Returns the path of the loop polyline edge\n */\nexport function getPolylineLoopPath(node, radius, placement, clockwise, dist, sourcePortKey, targetPortKey) {\n    const allPortsMap = getAllPorts(node);\n    const sourcePort = allPortsMap[(sourcePortKey || targetPortKey)];\n    const targetPort = allPortsMap[(targetPortKey || sourcePortKey)];\n    // 1. 获取起点和终点 | Get the start and end points\n    let [sourcePoint, targetPoint] = getLoopEndpoints(node, placement, clockwise, sourcePort, targetPort);\n    // 2. 获取控制点 | Get the control points\n    const controlPoints = getPolylineLoopControlPoints(node, sourcePoint, targetPoint, dist);\n    // 3. 如果定义了连接桩，调整端点以与连接桩边界相交 | If the port is defined, adjust the endpoint to intersect with the port boundary\n    if (sourcePort)\n        sourcePoint = getPortConnectionPoint(sourcePort, controlPoints[0]);\n    if (targetPort)\n        targetPoint = getPortConnectionPoint(targetPort, controlPoints.at(-1));\n    return getPolylinePath([sourcePoint, ...controlPoints, targetPoint], radius);\n}\n/**\n * <zh/> 获取环形折线边的控制点\n *\n * <en/> Get the control points of the loop polyline edge\n * @param node - <zh/> 节点实例 | <en/> Node instance\n * @param sourcePoint - <zh/> 起点 | <en/> Source point\n * @param targetPoint - <zh/> 终点 | <en/> Target point\n * @param dist - <zh/> 从节点 keyShape 边缘到自环顶部的距离 | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @returns <zh/> 控制点 | <en/> Control points\n */\nexport function getPolylineLoopControlPoints(node, sourcePoint, targetPoint, dist) {\n    const controlPoints = [];\n    const bbox = getNodeBBox(node);\n    // 1. 起点和终点相同 | The start and end points are the same\n    if (isEqual(sourcePoint, targetPoint)) {\n        const side = getNearestBoundarySide(sourcePoint, bbox);\n        switch (side) {\n            case 'left':\n                controlPoints.push([sourcePoint[0] - dist, sourcePoint[1]]);\n                controlPoints.push([sourcePoint[0] - dist, sourcePoint[1] + dist]);\n                controlPoints.push([sourcePoint[0], sourcePoint[1] + dist]);\n                break;\n            case 'right':\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1]]);\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1] + dist]);\n                controlPoints.push([sourcePoint[0], sourcePoint[1] + dist]);\n                break;\n            case 'top':\n                controlPoints.push([sourcePoint[0], sourcePoint[1] - dist]);\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1] - dist]);\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1]]);\n                break;\n            case 'bottom':\n                controlPoints.push([sourcePoint[0], sourcePoint[1] + dist]);\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1] + dist]);\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1]]);\n                break;\n        }\n    }\n    else {\n        const sourceSide = getNearestBoundarySide(sourcePoint, bbox);\n        const targetSide = getNearestBoundarySide(targetPoint, bbox);\n        // 2. 起点与终点同边 | The start and end points are on the same side\n        if (sourceSide === targetSide) {\n            const side = sourceSide;\n            let x, y;\n            switch (side) {\n                case 'left':\n                    x = Math.min(sourcePoint[0], targetPoint[0]) - dist;\n                    controlPoints.push([x, sourcePoint[1]]);\n                    controlPoints.push([x, targetPoint[1]]);\n                    break;\n                case 'right':\n                    x = Math.max(sourcePoint[0], targetPoint[0]) + dist;\n                    controlPoints.push([x, sourcePoint[1]]);\n                    controlPoints.push([x, targetPoint[1]]);\n                    break;\n                case 'top':\n                    y = Math.min(sourcePoint[1], targetPoint[1]) - dist;\n                    controlPoints.push([sourcePoint[0], y]);\n                    controlPoints.push([targetPoint[0], y]);\n                    break;\n                case 'bottom':\n                    y = Math.max(sourcePoint[1], targetPoint[1]) + dist;\n                    controlPoints.push([sourcePoint[0], y]);\n                    controlPoints.push([targetPoint[0], y]);\n                    break;\n            }\n        }\n        else {\n            // 3. 起点与终点不同边 | The start and end points are on different sides\n            const getPointOffSide = (side, point) => {\n                return {\n                    left: [point[0] - dist, point[1]],\n                    right: [point[0] + dist, point[1]],\n                    top: [point[0], point[1] - dist],\n                    bottom: [point[0], point[1] + dist],\n                }[side];\n            };\n            const p1 = getPointOffSide(sourceSide, sourcePoint);\n            const p2 = getPointOffSide(targetSide, targetPoint);\n            const p3 = freeJoin(p1, p2, bbox);\n            controlPoints.push(p1, p3, p2);\n        }\n    }\n    return controlPoints;\n}\n/**\n * <zh/> 获取子图内的所有边，并按照内部边和外部边分组\n *\n * <en/> Get all the edges in the subgraph and group them into internal and external edges\n * @param ids - <zh/> 节点 ID 数组 | <en/> Node ID array\n * @param getRelatedEdges - <zh/> 获取节点邻边 | <en/> Get node edges\n * @returns <zh/> 子图边 | <en/> Subgraph edges\n */\nexport function getSubgraphRelatedEdges(ids, getRelatedEdges) {\n    const edges = new Set();\n    const internal = new Set();\n    const external = new Set();\n    ids.forEach((id) => {\n        const relatedEdges = getRelatedEdges(id);\n        relatedEdges.forEach((edge) => {\n            edges.add(edge);\n            if (ids.includes(edge.source) && ids.includes(edge.target))\n                internal.add(edge);\n            else\n                external.add(edge);\n        });\n    });\n    return { edges: Array.from(edges), internal: Array.from(internal), external: Array.from(external) };\n}\n/**\n * <zh/> 获取边的实际连接节点\n *\n * <en/> Get the actual connected object of the edge\n * @param node - <zh/> 逻辑连接节点数据 | <en/> Logical connection node data\n * @param getParentData - <zh/> 获取父节点数据 | <en/> Get parent node data\n * @returns <zh/> 实际连接节点数据 | <en/> Actual connected node data\n */\nexport function findActualConnectNodeData(node, getParentData) {\n    const path = [];\n    let current = node;\n    while (current) {\n        path.push(current);\n        const parent = getParentData(idOf(current));\n        if (parent)\n            current = parent;\n        else\n            break;\n    }\n    if (path.some((n) => { var _a; return (_a = n.style) === null || _a === void 0 ? void 0 : _a.collapsed; })) {\n        const index = path.reverse().findIndex(isCollapsed);\n        return path[index] || path.at(-1);\n    }\n    return node;\n}\n/**\n * <zh/> 获取箭头大小，若用户未指定，则根据线宽自动计算\n *\n * <en/> Get the size of the arrow\n * @param lineWidth - <zh/> 箭头所在边的线宽 | <en/> The line width of the edge where the arrow is located\n * @param size - <zh/> 自定义箭头大小 | <en/> Custom arrow size\n * @returns <zh/> 箭头大小 | <en/> Arrow size\n */\nexport function getArrowSize(lineWidth, size) {\n    if (size)\n        return size;\n    if (lineWidth < 4)\n        return 10;\n    if (lineWidth === 4)\n        return 12;\n    return lineWidth * 2.5;\n}\n//# sourceMappingURL=edge.js.map","/**\n * ○\n */\nexport const circle = (width, height) => {\n    const r = Math.max(width, height) / 2;\n    return [['M', -width / 2, 0], ['A', r, r, 0, 1, 0, 2 * r - width / 2, 0], ['A', r, r, 0, 1, 0, -width / 2, 0], ['Z']];\n};\n/**\n * ▷\n */\nexport const triangle = (width, height) => {\n    return [['M', -width / 2, 0], ['L', width / 2, -height / 2], ['L', width / 2, height / 2], ['Z']];\n};\n/**\n * ◇\n */\nexport const diamond = (width, height) => {\n    return [['M', -width / 2, 0], ['L', 0, -height / 2], ['L', width / 2, 0], ['L', 0, height / 2], ['Z']];\n};\n/**\n * >>\n */\nexport const vee = (width, height) => {\n    return [\n        ['M', -width / 2, 0],\n        ['L', width / 2, -height / 2],\n        ['L', (4 * width) / 5 - width / 2, 0],\n        ['L', width / 2, height / 2],\n        ['Z'],\n    ];\n};\n/**\n * □\n */\nexport const rect = (width, height) => {\n    return [\n        ['M', -width / 2, -height / 2],\n        ['L', width / 2, -height / 2],\n        ['L', width / 2, height / 2],\n        ['L', -width / 2, height / 2],\n        ['Z'],\n    ];\n};\n/**\n * □▷\n */\nexport const triangleRect = (width, height) => {\n    const tWidth = width / 2;\n    const rWidth = width / 7;\n    const rBeginX = width - rWidth;\n    return [\n        ['M', -tWidth, 0],\n        ['L', 0, -height / 2],\n        ['L', 0, height / 2],\n        ['Z'],\n        ['M', rBeginX - tWidth, -height / 2],\n        ['L', rBeginX + rWidth - tWidth, -height / 2],\n        ['L', rBeginX + rWidth - tWidth, height / 2],\n        ['L', rBeginX - tWidth, height / 2],\n        ['Z'],\n    ];\n};\n/**\n * >\n */\nexport const simple = (width, height) => {\n    return [\n        ['M', width / 2, -height / 2],\n        ['L', -width / 2, 0],\n        ['L', width / 2, 0],\n        ['L', -width / 2, 0],\n        ['L', width / 2, height / 2],\n    ];\n};\n//# sourceMappingURL=symbol.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Image, Path } from '@antv/g';\nimport { isFunction, pick } from '@antv/util';\nimport { getBBoxHeight, getBBoxWidth, getNodeBBox } from '../../utils/bbox';\nimport { getArrowSize, getBadgePositionStyle, getCubicLoopPath, getLabelPositionStyle } from '../../utils/edge';\nimport { findPorts, getConnectionPoint, getPortPosition, isSameNode } from '../../utils/element';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport * as Symbol from '../../utils/symbol';\nimport { getWordWrapWidthByEnds } from '../../utils/text';\nimport { BaseElement } from '../base-element';\nimport { Badge, Label } from '../shapes';\n/**\n * <zh/> 边元素基类\n *\n * <en/> Base class of the edge\n */\nexport class BaseEdge extends BaseElement {\n    constructor(options) {\n        super(mergeOptions({ style: BaseEdge.defaultStyleProps }, options));\n        this.type = 'edge';\n    }\n    get sourceNode() {\n        const { sourceNode: source } = this.parsedAttributes;\n        return this.context.element.getElement(source);\n    }\n    get targetNode() {\n        const { targetNode: target } = this.parsedAttributes;\n        return this.context.element.getElement(target);\n    }\n    getKeyStyle(attributes) {\n        const _a = this.getGraphicStyle(attributes), { loop } = _a, style = __rest(_a, [\"loop\"]);\n        const { sourceNode, targetNode } = this;\n        const d = loop && isSameNode(sourceNode, targetNode) ? this.getLoopPath(attributes) : this.getKeyPath(attributes);\n        const keyStyle = { d };\n        Path.PARSED_STYLE_LIST.forEach((key) => {\n            // @ts-expect-error skip type error\n            if (key in style)\n                keyStyle[key] = style[key];\n        });\n        return keyStyle;\n    }\n    getLoopPath(attributes) {\n        const { sourcePort, targetPort } = attributes;\n        const node = this.sourceNode;\n        const bbox = getNodeBBox(node);\n        const defaultDist = Math.max(getBBoxWidth(bbox), getBBoxHeight(bbox));\n        const { placement, clockwise, dist = defaultDist, } = subStyleProps(this.getGraphicStyle(attributes), 'loop');\n        return getCubicLoopPath(node, placement, clockwise, dist, sourcePort, targetPort);\n    }\n    getEndpoints(attributes, optimize = true, controlPoints = []) {\n        const { sourcePort: sourcePortKey, targetPort: targetPortKey } = attributes;\n        const { sourceNode, targetNode } = this;\n        const [sourcePort, targetPort] = findPorts(sourceNode, targetNode, sourcePortKey, targetPortKey);\n        if (!optimize) {\n            const sourcePoint = sourcePort ? getPortPosition(sourcePort) : sourceNode.getCenter();\n            const targetPoint = targetPort ? getPortPosition(targetPort) : targetNode.getCenter();\n            return [sourcePoint, targetPoint];\n        }\n        const _controlPoints = typeof controlPoints === 'function' ? controlPoints() : controlPoints;\n        const sourcePoint = getConnectionPoint(sourcePort || sourceNode, _controlPoints[0] || targetPort || targetNode);\n        const targetPoint = getConnectionPoint(targetPort || targetNode, _controlPoints[_controlPoints.length - 1] || sourcePort || sourceNode);\n        return [sourcePoint, targetPoint];\n    }\n    getHaloStyle(attributes) {\n        if (attributes.halo === false)\n            return false;\n        const keyStyle = this.getKeyStyle(attributes);\n        const haloStyle = subStyleProps(this.getGraphicStyle(attributes), 'halo');\n        return Object.assign(Object.assign({}, keyStyle), haloStyle);\n    }\n    getLabelStyle(attributes) {\n        if (attributes.label === false || !attributes.labelText)\n            return false;\n        const labelStyle = subStyleProps(this.getGraphicStyle(attributes), 'label');\n        const { placement, offsetX, offsetY, autoRotate, maxWidth } = labelStyle, restStyle = __rest(labelStyle, [\"placement\", \"offsetX\", \"offsetY\", \"autoRotate\", \"maxWidth\"]);\n        const labelPositionStyle = getLabelPositionStyle(this.shapeMap.key, placement, autoRotate, offsetX, offsetY);\n        const bbox = this.shapeMap.key.getLocalBounds();\n        const wordWrapWidth = getWordWrapWidthByEnds([bbox.min, bbox.max], maxWidth);\n        return Object.assign({ wordWrapWidth }, labelPositionStyle, restStyle);\n    }\n    getBadgeStyle(attributes) {\n        if (attributes.badge === false || !attributes.badgeText)\n            return false;\n        const _a = subStyleProps(attributes, 'badge'), { offsetX, offsetY, placement } = _a, badgeStyle = __rest(_a, [\"offsetX\", \"offsetY\", \"placement\"]);\n        return Object.assign(badgeStyle, getBadgePositionStyle(this.shapeMap, placement, attributes.labelPlacement, offsetX, offsetY));\n    }\n    drawArrow(attributes, type) {\n        var _a;\n        const isStart = type === 'start';\n        const arrowType = type === 'start' ? 'startArrow' : 'endArrow';\n        const enable = attributes[arrowType];\n        const keyShape = this.shapeMap.key;\n        if (enable) {\n            const arrowStyle = this.getArrowStyle(attributes, isStart);\n            const [marker, markerOffset, arrowOffset] = isStart\n                ? ['markerStart', 'markerStartOffset', 'startArrowOffset']\n                : ['markerEnd', 'markerEndOffset', 'endArrowOffset'];\n            const arrow = keyShape.parsedStyle[marker];\n            // update\n            if (arrow)\n                arrow.attr(arrowStyle);\n            // create\n            else {\n                const Ctor = arrowStyle.src ? Image : Path;\n                const arrowShape = new Ctor({ style: arrowStyle });\n                keyShape.style[marker] = arrowShape;\n            }\n            keyShape.style[markerOffset] = attributes[arrowOffset] || arrowStyle.width / 2 + +arrowStyle.lineWidth;\n        }\n        else {\n            // destroy\n            const marker = isStart ? 'markerStart' : 'markerEnd';\n            (_a = keyShape.style[marker]) === null || _a === void 0 ? void 0 : _a.destroy();\n            keyShape.style[marker] = null;\n        }\n    }\n    getArrowStyle(attributes, isStart) {\n        const keyStyle = this.getShape('key').attributes;\n        const arrowType = isStart ? 'startArrow' : 'endArrow';\n        const _a = subStyleProps(this.getGraphicStyle(attributes), arrowType), { size, type } = _a, arrowStyle = __rest(_a, [\"size\", \"type\"]);\n        const [width, height] = parseSize(getArrowSize(keyStyle.lineWidth, size));\n        const arrowFn = isFunction(type) ? type : Symbol[type] || Symbol.triangle;\n        const d = arrowFn(width, height);\n        return Object.assign(pick(keyStyle, ['stroke', 'strokeOpacity', 'fillOpacity']), { width, height }, Object.assign({}, (d && { d, fill: type === 'simple' ? '' : keyStyle.stroke })), arrowStyle);\n    }\n    drawLabelShape(attributes, container) {\n        const style = this.getLabelStyle(attributes);\n        this.upsert('label', Label, style, container);\n    }\n    drawHaloShape(attributes, container) {\n        const style = this.getHaloStyle(attributes);\n        this.upsert('halo', Path, style, container);\n    }\n    drawBadgeShape(attributes, container) {\n        const style = this.getBadgeStyle(attributes);\n        this.upsert('badge', Badge, style, container);\n    }\n    drawSourceArrow(attributes) {\n        this.drawArrow(attributes, 'start');\n    }\n    drawTargetArrow(attributes) {\n        this.drawArrow(attributes, 'end');\n    }\n    drawKeyShape(attributes, container) {\n        const style = this.getKeyStyle(attributes);\n        return this.upsert('key', Path, style, container);\n    }\n    render(attributes = this.parsedAttributes, container = this) {\n        // 1. key shape\n        this.drawKeyShape(attributes, container);\n        if (!this.getShape('key'))\n            return;\n        // 2. arrows\n        this.drawSourceArrow(attributes);\n        this.drawTargetArrow(attributes);\n        // 3. label\n        this.drawLabelShape(attributes, container);\n        // 4. halo\n        this.drawHaloShape(attributes, container);\n        // 5. badges\n        this.drawBadgeShape(attributes, container);\n    }\n    onframe() {\n        this.drawKeyShape(this.parsedAttributes, this);\n        this.drawSourceArrow(this.parsedAttributes);\n        this.drawTargetArrow(this.parsedAttributes);\n        this.drawHaloShape(this.parsedAttributes, this);\n        this.drawLabelShape(this.parsedAttributes, this);\n        this.drawBadgeShape(this.parsedAttributes, this);\n    }\n    animate(keyframes, options) {\n        const animation = super.animate(keyframes, options);\n        if (!animation)\n            return animation;\n        // 设置 currentTime 时触发更新\n        // Trigger update when setting currentTime\n        return new Proxy(animation, {\n            set: (target, propKey, value) => {\n                // 需要推迟 onframe 调用时机，等待节点位置更新完成\n                // Need to delay the timing of the onframe call, wait for the node position update to complete\n                if (propKey === 'currentTime')\n                    Promise.resolve().then(() => this.onframe());\n                return Reflect.set(target, propKey, value);\n            },\n        });\n    }\n}\nBaseEdge.defaultStyleProps = {\n    badge: true,\n    badgeOffsetX: 0,\n    badgeOffsetY: 0,\n    badgePlacement: 'suffix',\n    isBillboard: true,\n    label: true,\n    labelAutoRotate: true,\n    labelIsBillboard: true,\n    labelMaxWidth: '80%',\n    labelOffsetX: 4,\n    labelOffsetY: 0,\n    labelPlacement: 'center',\n    labelTextBaseline: 'middle',\n    labelWordWrap: false,\n    halo: false,\n    haloDroppable: false,\n    haloLineDash: 0,\n    haloLineWidth: 12,\n    haloPointerEvents: 'none',\n    haloStrokeOpacity: 0.25,\n    haloZIndex: -1,\n    loop: true,\n    startArrow: false,\n    startArrowLineDash: 0,\n    startArrowLineJoin: 'round',\n    startArrowLineWidth: 1,\n    startArrowTransformOrigin: 'center',\n    startArrowType: 'vee',\n    endArrow: false,\n    endArrowLineDash: 0,\n    endArrowLineJoin: 'round',\n    endArrowLineWidth: 1,\n    endArrowTransformOrigin: 'center',\n    endArrowType: 'vee',\n    loopPlacement: 'top',\n    loopClockwise: true,\n};\n//# sourceMappingURL=base-edge.js.map","import { getCubicPath, getCurveControlPoint, parseCurveOffset, parseCurvePosition } from '../../utils/edge';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseEdge } from './base-edge';\n/**\n * <zh/> 三次贝塞尔曲线\n *\n * <en/> Cubic Bezier curve\n */\nexport class Cubic extends BaseEdge {\n    constructor(options) {\n        super(mergeOptions({ style: Cubic.defaultStyleProps }, options));\n    }\n    /**\n     * @inheritdoc\n     */\n    getKeyPath(attributes) {\n        const [sourcePoint, targetPoint] = this.getEndpoints(attributes);\n        const { controlPoints, curvePosition, curveOffset } = attributes;\n        const actualControlPoints = this.getControlPoints(sourcePoint, targetPoint, parseCurvePosition(curvePosition), parseCurveOffset(curveOffset), controlPoints);\n        return getCubicPath(sourcePoint, targetPoint, actualControlPoints);\n    }\n    getControlPoints(sourcePoint, targetPoint, curvePosition, curveOffset, controlPoints) {\n        return (controlPoints === null || controlPoints === void 0 ? void 0 : controlPoints.length) === 2\n            ? controlPoints\n            : [\n                getCurveControlPoint(sourcePoint, targetPoint, curvePosition[0], curveOffset[0]),\n                getCurveControlPoint(sourcePoint, targetPoint, curvePosition[1], curveOffset[1]),\n            ];\n    }\n}\nCubic.defaultStyleProps = {\n    curvePosition: 0.5,\n    curveOffset: 20,\n};\n//# sourceMappingURL=cubic.js.map","import { mergeOptions } from '../../utils/style';\nimport { Cubic } from './cubic';\n/**\n * <zh/> 水平方向的三次贝塞尔曲线\n *\n * <en/> Cubic Bezier curve in horizontal direction\n * @remarks\n * <zh/> 特别注意，计算控制点时主要考虑 x 轴上的距离，忽略 y 轴的变化\n *\n * <en/> Please note that when calculating the control points, the distance on the x-axis is mainly considered, and the change on the y-axis is ignored\n */\nexport class CubicHorizontal extends Cubic {\n    constructor(options) {\n        super(mergeOptions({ style: CubicHorizontal.defaultStyleProps }, options));\n    }\n    getControlPoints(sourcePoint, targetPoint, curvePosition, curveOffset) {\n        const xDist = targetPoint[0] - sourcePoint[0];\n        return [\n            [sourcePoint[0] + xDist * curvePosition[0] + curveOffset[0], sourcePoint[1]],\n            [targetPoint[0] - xDist * curvePosition[1] + curveOffset[1], targetPoint[1]],\n        ];\n    }\n}\nCubicHorizontal.defaultStyleProps = {\n    curvePosition: [0.5, 0.5],\n    curveOffset: [0, 0],\n};\n//# sourceMappingURL=cubic-horizontal.js.map","import { positionOf } from '../../utils/position';\nimport { mergeOptions } from '../../utils/style';\nimport { distance, rad, subtract } from '../../utils/vector';\nimport { Cubic } from './cubic';\n/**\n * <zh/> 径向贝塞尔曲线\n *\n * <en/> Radial cubic edge\n */\nexport class CubicRadial extends Cubic {\n    constructor(options) {\n        super(mergeOptions({ style: CubicRadial.defaultStyleProps }, options));\n    }\n    get ref() {\n        return this.context.model.getRootsData()[0];\n    }\n    getEndpoints(attributes) {\n        if (this.sourceNode.id === this.ref.id) {\n            return super.getEndpoints(attributes);\n        }\n        const refPoint = positionOf(this.ref);\n        const sourcePoint = this.sourceNode.getIntersectPoint(refPoint, true);\n        const targetPoint = this.targetNode.getIntersectPoint(refPoint);\n        return [sourcePoint, targetPoint];\n    }\n    toRadialCoordinate(p) {\n        const refPoint = positionOf(this.ref);\n        const r = distance(p, refPoint);\n        const radian = rad(subtract(p, refPoint));\n        return [r, radian];\n    }\n    getControlPoints(sourcePoint, targetPoint, curvePosition, curveOffset) {\n        const [r1, rad1] = this.toRadialCoordinate(sourcePoint);\n        const [r2] = this.toRadialCoordinate(targetPoint);\n        const rDist = r2 - r1;\n        return [\n            [\n                sourcePoint[0] + (rDist * curvePosition[0] + curveOffset[0]) * Math.cos(rad1),\n                sourcePoint[1] + (rDist * curvePosition[0] + curveOffset[0]) * Math.sin(rad1),\n            ],\n            [\n                targetPoint[0] - (rDist * curvePosition[1] - curveOffset[0]) * Math.cos(rad1),\n                targetPoint[1] - (rDist * curvePosition[1] - curveOffset[0]) * Math.sin(rad1),\n            ],\n        ];\n    }\n}\nCubicRadial.defaultStyleProps = {\n    curvePosition: 0.5,\n    curveOffset: 20,\n};\n//# sourceMappingURL=cubic-radial.js.map","import { mergeOptions } from '../../utils/style';\nimport { Cubic } from './cubic';\n/**\n * <zh/> 垂直方向的三次贝塞尔曲线\n *\n * <en/> Cubic Bezier curve in vertical direction\n * @remarks\n * <zh/> 特别注意，计算控制点时主要考虑 y 轴上的距离，忽略 x 轴的变化\n *\n * <en/> Please note that when calculating the control points, the distance on the y-axis is mainly considered, and the change on the x-axis is ignored\n */\nexport class CubicVertical extends Cubic {\n    constructor(options) {\n        super(mergeOptions({ style: CubicVertical.defaultStyleProps }, options));\n    }\n    getControlPoints(sourcePoint, targetPoint, curvePosition, curveOffset) {\n        const yDist = targetPoint[1] - sourcePoint[1];\n        return [\n            [sourcePoint[0], sourcePoint[1] + yDist * curvePosition[0] + curveOffset[0]],\n            [targetPoint[0], targetPoint[1] - yDist * curvePosition[1] + curveOffset[1]],\n        ];\n    }\n}\nCubicVertical.defaultStyleProps = {\n    curvePosition: [0.5, 0.5],\n    curveOffset: [0, 0],\n};\n//# sourceMappingURL=cubic-vertical.js.map","import { mergeOptions } from '../../utils/style';\nimport { BaseEdge } from './base-edge';\n/**\n * <zh/> 直线\n *\n * <en/> Line\n */\nexport class Line extends BaseEdge {\n    constructor(options) {\n        super(mergeOptions({ style: Line.defaultStyleProps }, options));\n    }\n    getKeyPath(attributes) {\n        const [sourcePoint, targetPoint] = this.getEndpoints(attributes);\n        return [\n            ['M', sourcePoint[0], sourcePoint[1]],\n            ['L', targetPoint[0], targetPoint[1]],\n        ];\n    }\n}\nLine.defaultStyleProps = {};\n//# sourceMappingURL=line.js.map","import { isNumber } from '@antv/util';\nimport { getBBoxSegments, getBBoxSize, getExpandedBBox, isPointInBBox, isPointOnBBoxBoundary } from '../bbox';\nimport { getLinesIntersection } from '../line';\nimport { add, manhattanDistance, toVector2 } from '../vector';\nconst defaultCfg = {\n    enableObstacleAvoidance: false,\n    offset: 10,\n    maxAllowedDirectionChange: Math.PI / 2,\n    maximumLoops: 3000,\n    gridSize: 5,\n    startDirections: ['top', 'right', 'bottom', 'left'],\n    endDirections: ['top', 'right', 'bottom', 'left'],\n    directionMap: {\n        right: { stepX: 1, stepY: 0 },\n        left: { stepX: -1, stepY: 0 },\n        bottom: { stepX: 0, stepY: 1 },\n        top: { stepX: 0, stepY: -1 },\n    },\n    penalties: { 0: 0, 90: 0 },\n    distFunc: manhattanDistance,\n};\nconst keyOf = (point) => `${Math.round(point[0])}|||${Math.round(point[1])}`;\n/**\n * <zh/> 将坐标对齐到网格\n *\n * <en/> Align to the grid\n * @param p - <zh/> 坐标 | <en/> point\n * @param gridSize - <zh/> 网格大小 | <en/> grid size\n * @returns <zh/> 对齐后的坐标 | <en/> aligned point\n */\nfunction alignToGrid(p, gridSize) {\n    const align = (value) => Math.round(value / gridSize);\n    if (isNumber(p))\n        return align(p);\n    return p.map(align);\n}\n/**\n * <zh/> 获取两个角度的变化方向，并确保小于 180 度\n *\n * <en/ >Get changed direction angle and make sure less than 180 degrees\n * @param angle1 - <zh/> 第一个角度 | <en/> the first angle\n * @param angle2 - <zh/> 第二个角度 | <en/> the second angle\n * @returns <zh/> 两个角度的变化方向 | <en/> changed direction angle\n */\nfunction getAngleDiff(angle1, angle2) {\n    const directionChange = Math.abs(angle1 - angle2);\n    return directionChange > Math.PI ? 2 * Math.PI - directionChange : directionChange;\n}\n/**\n * <zh/> 获取从 p1 指向 p2 的向量与 x 轴正方向之间的夹角，单位为弧度\n *\n * <en/> Get the angle between the vector from p1 to p2 and the positive direction of the x-axis, in radians\n * @param p1 - <zh/> 点 p1 | <en/> point p1\n * @param p2 - <zh/> 点 p2 | <en/> point p2\n * @returns <zh/> 夹角 | <en/> angle\n */\nfunction getDirectionAngle(p1, p2) {\n    const deltaX = p2[0] - p1[0];\n    const deltaY = p2[1] - p1[1];\n    if (!deltaX && !deltaY)\n        return 0;\n    return Math.atan2(deltaY, deltaX);\n}\n/**\n * <zh/> 获取两个点之间的方向变化\n *\n * <en/> Get direction change between two points\n * @param current - <zh/> 当前点 | <en/> current point\n * @param neighbor - <zh/> 邻居点 | <en/> neighbor point\n * @param cameFrom - <zh/> 来源点 | <en/> source point\n * @param scaleStartPoint - <zh/> 缩放后的起点 | <en/> scaled start point\n * @returns <zh/> 方向变化 | <en/> direction change\n */\nfunction getDirectionChange(current, neighbor, cameFrom, scaleStartPoint) {\n    const directionAngle = getDirectionAngle(current, neighbor);\n    const currentCameFrom = cameFrom[keyOf(current)];\n    const prev = !currentCameFrom ? scaleStartPoint : currentCameFrom;\n    const prevDirectionAngle = getDirectionAngle(prev, current);\n    return getAngleDiff(prevDirectionAngle, directionAngle);\n}\n/**\n * <zh/> 获取障碍物地图\n *\n * <en/> Get obstacle map\n * @param nodes - <zh/> 图上所有节点 | <en/> all nodes on the graph\n * @param options - <zh/> 路由配置 | <en/> router options\n * @returns <zh/> 障碍物地图 | <en/> obstacle map\n */\nconst getObstacleMap = (nodes, options) => {\n    const { offset, gridSize } = options;\n    const obstacleMap = {};\n    nodes.forEach((item) => {\n        if (!item || item.destroyed || !item.isVisible())\n            return;\n        const bbox = getExpandedBBox(item.getRenderBounds(), offset);\n        for (let x = alignToGrid(bbox.min[0], gridSize); x <= alignToGrid(bbox.max[0], gridSize); x += 1) {\n            for (let y = alignToGrid(bbox.min[1], gridSize); y <= alignToGrid(bbox.max[1], gridSize); y += 1) {\n                obstacleMap[`${x}|||${y}`] = true;\n            }\n        }\n    });\n    return obstacleMap;\n};\n/**\n * <zh/> 估算从起点到多个锚点的最小代价\n *\n * <en/> Estimate minimum cost from the starting point to multiple anchor points\n * @param from - <zh/> 起点 | <en/> source point\n * @param anchors - <zh/> 锚点 | <en/> anchor points\n * @param distFunc - <zh/> 距离函数 | <en/> distance function\n * @returns <zh/> 最小成本 | <en/> minimum cost\n */\nexport function estimateCost(from, anchors, distFunc) {\n    return Math.min(...anchors.map((anchor) => distFunc(from, anchor)));\n}\n/**\n * <zh/> 已知一个点集与一个参考点，从点集中找到距离参考点最近的点\n *\n * <en/> Given a set of points and a reference point, find the point closest to the reference point from the set of points\n * @param points - <zh/> 点集 | <en/> set of points\n * @param refPoint - <zh/> 参考点 | <en/> reference point\n * @param distFunc - <zh/> 距离函数 | <en/> distance function\n * @returns <zh/> 最近的点 | <en/> nearest point\n */\nexport function getNearestPoint(points, refPoint, distFunc) {\n    let nearestPoint = points[0];\n    let minDistance = distFunc(points[0], refPoint);\n    for (let i = 0; i < points.length; i++) {\n        const point = points[i];\n        const dis = distFunc(point, refPoint);\n        if (dis < minDistance) {\n            nearestPoint = point;\n            minDistance = dis;\n        }\n    }\n    return nearestPoint;\n}\n/**\n * Calculate the connection points on the expanded BBox\n * @param point\n * @param node\n * @param directions\n * @param options\n */\nconst getBoxPoints = (point, node, directions, options) => {\n    // create-edge 生成边的过程中，endNode 为 null\n    if (!node)\n        return [point];\n    const { directionMap, offset } = options;\n    const expandedBBox = getExpandedBBox(node.getRenderBounds(), offset);\n    const points = Object.keys(directionMap).reduce((res, directionKey) => {\n        if (directions.includes(directionKey)) {\n            const direction = directionMap[directionKey];\n            const [width, height] = getBBoxSize(expandedBBox);\n            const otherPoint = [point[0] + direction.stepX * width, point[1] + direction.stepY * height];\n            const segments = getBBoxSegments(expandedBBox);\n            for (let i = 0; i < segments.length; i++) {\n                const intersectP = getLinesIntersection([point, otherPoint], segments[i]);\n                if (intersectP && isPointOnBBoxBoundary(intersectP, expandedBBox)) {\n                    res.push(intersectP);\n                }\n            }\n        }\n        return res;\n    }, []);\n    if (!isPointInBBox(point, expandedBBox)) {\n        points.push(point);\n    }\n    return points.map((point) => alignToGrid(point, options.gridSize));\n};\nconst getControlPoints = (current, cameFrom, scaleStartPoint, endPoint, startPoints, scaleEndPoint, gridSize) => {\n    const controlPoints = [];\n    // append endPoint\n    let pointZero = [\n        scaleEndPoint[0] === endPoint[0] ? endPoint[0] : current[0] * gridSize,\n        scaleEndPoint[1] === endPoint[1] ? endPoint[1] : current[1] * gridSize,\n    ];\n    controlPoints.unshift(pointZero);\n    let _current = current;\n    let _currentCameFrom = cameFrom[keyOf(_current)];\n    while (_currentCameFrom) {\n        const prePoint = _currentCameFrom;\n        const point = _current;\n        const directionChange = getDirectionChange(prePoint, point, cameFrom, scaleStartPoint);\n        if (directionChange) {\n            pointZero = [\n                prePoint[0] === point[0] ? pointZero[0] : prePoint[0] * gridSize,\n                prePoint[1] === point[1] ? pointZero[1] : prePoint[1] * gridSize,\n            ];\n            controlPoints.unshift(pointZero);\n        }\n        _currentCameFrom = cameFrom[keyOf(prePoint)];\n        _current = prePoint;\n    }\n    // append startPoint\n    const realStartPoints = startPoints.map((point) => [point[0] * gridSize, point[1] * gridSize]);\n    const startPoint = getNearestPoint(realStartPoints, pointZero, manhattanDistance);\n    controlPoints.unshift(startPoint);\n    return controlPoints;\n};\n/**\n * Find the shortest path between a given source node to a destination node according to A* Search Algorithm：https://www.geeksforgeeks.org/a-search-algorithm/\n * @param sourceNode - <zh/> 源节点 | <en/> source node\n * @param targetNode - <zh/> 目标节点 | <en/> target node\n * @param nodes - <zh/> 图上所有节点 | <en/> all nodes on the graph\n * @param config - <zh/> 路由配置 | <en/> router options\n * @returns <zh/> 控制点数组 | <en/> control point array\n */\nexport function aStarSearch(sourceNode, targetNode, nodes, config) {\n    const startPoint = toVector2(sourceNode.getCenter());\n    const endPoint = toVector2(targetNode.getCenter());\n    const options = Object.assign(defaultCfg, config);\n    const { gridSize } = options;\n    const obstacles = options.enableObstacleAvoidance ? nodes : [sourceNode, targetNode];\n    const obstacleMap = getObstacleMap(obstacles, options);\n    const scaleStartPoint = alignToGrid(startPoint, gridSize);\n    const scaleEndPoint = alignToGrid(endPoint, gridSize);\n    const startPoints = getBoxPoints(startPoint, sourceNode, options.startDirections, options);\n    const endPoints = getBoxPoints(endPoint, targetNode, options.endDirections, options);\n    startPoints.forEach((point) => delete obstacleMap[keyOf(point)]);\n    endPoints.forEach((point) => delete obstacleMap[keyOf(point)]);\n    const openList = {};\n    const closedList = {};\n    const cameFrom = {};\n    // The movement cost to move from the starting point to the current point on the grid.\n    const gScore = {};\n    // The estimated movement cost to move from the starting point to the end point after passing through the current point.\n    // f = g + h\n    const fScore = {};\n    const sortedOpenSet = new SortedArray();\n    for (let i = 0; i < startPoints.length; i++) {\n        const firstStep = startPoints[i];\n        const key = keyOf(firstStep);\n        openList[key] = firstStep;\n        gScore[key] = 0;\n        fScore[key] = estimateCost(firstStep, endPoints, options.distFunc);\n        // Push start point to sortedOpenSet\n        sortedOpenSet.add({\n            id: key,\n            value: fScore[key],\n        });\n    }\n    const endPointsKeys = endPoints.map((point) => keyOf(point));\n    let remainLoops = options.maximumLoops;\n    let current;\n    let curCost = Infinity;\n    for (const [id, value] of Object.entries(openList)) {\n        if (fScore[id] <= curCost) {\n            curCost = fScore[id];\n            current = value;\n        }\n    }\n    while (Object.keys(openList).length > 0 && remainLoops > 0) {\n        const minId = sortedOpenSet.minId(false);\n        if (minId) {\n            current = openList[minId];\n        }\n        else {\n            break;\n        }\n        const key = keyOf(current);\n        // If currentNode is final, return the successful path\n        if (endPointsKeys.includes(key)) {\n            return getControlPoints(current, cameFrom, scaleStartPoint, endPoint, startPoints, scaleEndPoint, gridSize);\n        }\n        // Set currentNode as closed\n        delete openList[key];\n        sortedOpenSet.remove(key);\n        closedList[key] = true;\n        // Get the neighbor points of the next step\n        for (const dir of Object.values(options.directionMap)) {\n            const neighbor = add(current, [dir.stepX, dir.stepY]);\n            const neighborId = keyOf(neighbor);\n            if (closedList[neighborId])\n                continue;\n            const directionChange = getDirectionChange(current, neighbor, cameFrom, scaleStartPoint);\n            if (directionChange > options.maxAllowedDirectionChange)\n                continue;\n            if (obstacleMap[neighborId])\n                continue; // skip if intersects\n            // Add neighbor points to openList, and calculate the cost of each neighbor point\n            if (!openList[neighborId]) {\n                openList[neighborId] = neighbor;\n            }\n            const directionPenalties = options.penalties[directionChange];\n            const neighborCost = options.distFunc(current, neighbor) + (isNaN(directionPenalties) ? gridSize : directionPenalties);\n            const costFromStart = gScore[key] + neighborCost;\n            const neighborGScore = gScore[neighborId];\n            if (neighborGScore && costFromStart >= neighborGScore)\n                continue;\n            cameFrom[neighborId] = current;\n            gScore[neighborId] = costFromStart;\n            fScore[neighborId] = costFromStart + estimateCost(neighbor, endPoints, options.distFunc);\n            sortedOpenSet.add({\n                id: neighborId,\n                value: fScore[neighborId],\n            });\n        }\n        remainLoops -= 1;\n    }\n    return [];\n}\n/**\n * <zh/> 有序数组，按升序排列\n *\n * <en/> Sorted array, sorted in ascending order\n */\nexport class SortedArray {\n    constructor() {\n        this.arr = [];\n        this.map = {};\n        this.arr = [];\n        this.map = {};\n    }\n    _innerAdd(item, length) {\n        let low = 0, high = length - 1;\n        while (high - low > 1) {\n            const mid = Math.floor((low + high) / 2);\n            if (this.arr[mid].value > item.value) {\n                high = mid;\n            }\n            else if (this.arr[mid].value < item.value) {\n                low = mid;\n            }\n            else {\n                this.arr.splice(mid, 0, item);\n                this.map[item.id] = true;\n                return;\n            }\n        }\n        this.arr.splice(high, 0, item);\n        this.map[item.id] = true;\n    }\n    /**\n     * <zh/> 将新项添加到适当的索引位置\n     *\n     * <en/> Add the new item to the appropriate index\n     * @param item - <zh/> 新项 | <en/> new item\n     */\n    add(item) {\n        // 已经存在，先移除\n        // If exists, remove it\n        delete this.map[item.id];\n        const length = this.arr.length;\n        // 如果为空或者最后一个元素小于当前元素，直接添加到最后\n        // If empty or the last element is less than the current element, add to the end\n        if (!length || this.arr[length - 1].value < item.value) {\n            this.arr.push(item);\n            this.map[item.id] = true;\n            return;\n        }\n        // 按照升序排列，找到合适的位置插入\n        // Find the appropriate position to insert in ascending order\n        this._innerAdd(item, length);\n    }\n    remove(id) {\n        if (!this.map[id])\n            return;\n        delete this.map[id];\n    }\n    _clearAndGetMinId() {\n        let res;\n        for (let i = this.arr.length - 1; i >= 0; i--) {\n            if (this.map[this.arr[i].id])\n                res = this.arr[i].id;\n            else\n                this.arr.splice(i, 1);\n        }\n        return res;\n    }\n    _findFirstId() {\n        while (this.arr.length) {\n            const first = this.arr.shift();\n            if (this.map[first.id])\n                return first.id;\n        }\n    }\n    minId(clear) {\n        if (clear) {\n            return this._clearAndGetMinId();\n        }\n        else {\n            return this._findFirstId();\n        }\n    }\n}\n//# sourceMappingURL=shortest-path.js.map","import { getBBoxHeight, getBBoxWidth, getNodeBBox } from '../../utils/bbox';\nimport { getPolylineLoopPath, getPolylinePath } from '../../utils/edge';\nimport { subStyleProps } from '../../utils/prefix';\nimport { orth } from '../../utils/router/orth';\nimport { aStarSearch } from '../../utils/router/shortest-path';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseEdge } from './base-edge';\n/**\n * <zh/> 折线\n *\n * <en/> Polyline\n */\nexport class Polyline extends BaseEdge {\n    constructor(options) {\n        super(mergeOptions({ style: Polyline.defaultStyleProps }, options));\n    }\n    getControlPoints(attributes) {\n        const { router } = attributes;\n        const { sourceNode, targetNode } = this;\n        const [sourcePoint, targetPoint] = this.getEndpoints(attributes, false);\n        let controlPoints = [];\n        if (!router) {\n            controlPoints = attributes.controlPoints;\n        }\n        else {\n            if (router.type === 'shortest-path') {\n                const nodes = this.context.element.getNodes();\n                controlPoints = aStarSearch(sourceNode, targetNode, nodes, router);\n                if (!controlPoints.length) {\n                    controlPoints = orth(sourcePoint, targetPoint, sourceNode, targetNode, attributes.controlPoints, {\n                        padding: router.offset,\n                    });\n                }\n            }\n            else if (router.type === 'orth') {\n                controlPoints = orth(sourcePoint, targetPoint, sourceNode, targetNode, attributes.controlPoints, router);\n            }\n        }\n        return controlPoints;\n    }\n    getPoints(attributes) {\n        const controlPoints = this.getControlPoints(attributes);\n        const [newSourcePoint, newTargetPoint] = this.getEndpoints(attributes, true, controlPoints);\n        return [newSourcePoint, ...controlPoints, newTargetPoint];\n    }\n    getKeyPath(attributes) {\n        const points = this.getPoints(attributes);\n        return getPolylinePath(points, attributes.radius);\n    }\n    getLoopPath(attributes) {\n        const { sourcePort: sourcePortKey, targetPort: targetPortKey, radius } = attributes;\n        const node = this.sourceNode;\n        const bbox = getNodeBBox(node);\n        // 默认转折点距离为 bbox 的最大宽高的 1/4\n        // Default distance of the turning point is 1/4 of the maximum width and height of the bbox\n        const defaultDist = Math.max(getBBoxWidth(bbox), getBBoxHeight(bbox)) / 4;\n        const { placement, clockwise, dist = defaultDist, } = subStyleProps(this.getGraphicStyle(attributes), 'loop');\n        return getPolylineLoopPath(node, radius, placement, clockwise, dist, sourcePortKey, targetPortKey);\n    }\n}\nPolyline.defaultStyleProps = {\n    radius: 0,\n    controlPoints: [],\n    router: false,\n};\n//# sourceMappingURL=polyline.js.map","import { getCurveControlPoint, getQuadraticPath } from '../../utils/edge';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseEdge } from './base-edge';\n/**\n * <zh/> 二次贝塞尔曲线\n *\n * <en/> Quadratic Bezier curve\n */\nexport class Quadratic extends BaseEdge {\n    constructor(options) {\n        super(mergeOptions({ style: Quadratic.defaultStyleProps }, options));\n    }\n    getKeyPath(attributes) {\n        const { curvePosition, curveOffset } = attributes;\n        const [sourcePoint, targetPoint] = this.getEndpoints(attributes);\n        const controlPoint = attributes.controlPoint || getCurveControlPoint(sourcePoint, targetPoint, curvePosition, curveOffset);\n        return getQuadraticPath(sourcePoint, targetPoint, controlPoint);\n    }\n}\nQuadratic.defaultStyleProps = {\n    curvePosition: 0.5,\n    curveOffset: 30,\n};\n//# sourceMappingURL=quadratic.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { isElement } from '../utils/element';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 展开/收起元素交互\n *\n * <en/> Collapse/Expand Element behavior\n * @remarks\n * <zh/> 通过操作展开/收起元素。\n *\n * <en/> Expand/collapse elements by operation.\n */\nexport class CollapseExpand extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, CollapseExpand.defaultOptions, options));\n        this.onCollapseExpand = (event) => __awaiter(this, void 0, void 0, function* () {\n            if (!this.validate(event))\n                return;\n            const { target } = event;\n            if (!isElement(target))\n                return;\n            const id = target.id;\n            const { model, graph } = this.context;\n            const data = model.getElementDataById(id);\n            if (!data)\n                return false;\n            const { onCollapse, onExpand, animation, align } = this.options;\n            if (isCollapsed(data)) {\n                yield graph.expandElement(id, { animation, align });\n                onExpand === null || onExpand === void 0 ? void 0 : onExpand(id);\n            }\n            else {\n                yield graph.collapseElement(id, { animation, align });\n                onCollapse === null || onCollapse === void 0 ? void 0 : onCollapse(id);\n            }\n        });\n        this.bindEvents();\n    }\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        const { trigger } = this.options;\n        graph.on(`node:${trigger}`, this.onCollapseExpand);\n        graph.on(`combo:${trigger}`, this.onCollapseExpand);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        const { trigger } = this.options;\n        graph.off(`node:${trigger}`, this.onCollapseExpand);\n        graph.off(`combo:${trigger}`, this.onCollapseExpand);\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nCollapseExpand.defaultOptions = {\n    enable: true,\n    animation: true,\n    trigger: CommonEvent.DBLCLICK,\n    align: true,\n};\n//# sourceMappingURL=collapse-expand.js.map","var map = {};\nexport default (function (prefix) {\n    prefix = prefix || 'g';\n    if (!map[prefix]) {\n        map[prefix] = 1;\n    }\n    else {\n        map[prefix] += 1;\n    }\n    return prefix + map[prefix];\n});\n//# sourceMappingURL=unique-id.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isFunction, uniqueId } from '@antv/util';\nimport { CanvasEvent, ComboEvent, CommonEvent, EdgeEvent, NodeEvent } from '../constants';\nimport { BaseBehavior } from './base-behavior';\nconst ASSIST_EDGE_ID = 'g6-create-edge-assist-edge-id';\nconst ASSIST_NODE_ID = 'g6-create-edge-assist-node-id';\n/**\n * <zh/> 创建边交互\n *\n * <en/> Create edge behavior\n * @remarks\n * <zh/> 通过拖拽或点击节点创建边，支持自定义边样式。\n *\n * <en/> Create edges by dragging or clicking nodes, and support custom edge styles.\n */\nexport class CreateEdge extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, CreateEdge.defaultOptions, options));\n        this.drop = (event) => __awaiter(this, void 0, void 0, function* () {\n            const { targetType } = event;\n            if (['combo', 'node'].includes(targetType) && this.source) {\n                yield this.handleCreateEdge(event);\n            }\n            else {\n                yield this.cancelEdge();\n            }\n        });\n        this.handleCreateEdge = (event) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c;\n            if (!this.validate(event))\n                return;\n            const { graph, canvas, batch, element } = this.context;\n            const { style } = this.options;\n            if (this.source) {\n                this.createEdge(event);\n                yield this.cancelEdge();\n                return;\n            }\n            batch.startBatch();\n            canvas.setCursor('crosshair');\n            this.source = this.getSelectedNodeIDs([event.target.id])[0];\n            const sourceNode = graph.getElementData(this.source);\n            graph.addNodeData([\n                {\n                    id: ASSIST_NODE_ID,\n                    style: {\n                        visibility: 'hidden',\n                        ports: [{ key: 'port-1', placement: [0.5, 0.5] }],\n                        x: (_a = sourceNode.style) === null || _a === void 0 ? void 0 : _a.x,\n                        y: (_b = sourceNode.style) === null || _b === void 0 ? void 0 : _b.y,\n                    },\n                },\n            ]);\n            graph.addEdgeData([\n                {\n                    id: ASSIST_EDGE_ID,\n                    source: this.source,\n                    target: ASSIST_NODE_ID,\n                    style: Object.assign({ pointerEvents: 'none' }, style),\n                },\n            ]);\n            yield ((_c = element.draw({ animation: false })) === null || _c === void 0 ? void 0 : _c.finished);\n        });\n        this.updateAssistEdge = (event) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!this.source)\n                return;\n            const { model, element } = this.context;\n            model.translateNodeTo(ASSIST_NODE_ID, [event.canvas.x, event.canvas.y]);\n            yield ((_a = element.draw({ animation: false, silence: true })) === null || _a === void 0 ? void 0 : _a.finished);\n        });\n        this.createEdge = (event) => {\n            var _a, _b;\n            const { graph } = this.context;\n            const { style, onFinish, onCreate } = this.options;\n            const targetId = (_a = event.target) === null || _a === void 0 ? void 0 : _a.id;\n            if (targetId === undefined || this.source === undefined)\n                return;\n            const target = (_b = this.getSelectedNodeIDs([event.target.id])) === null || _b === void 0 ? void 0 : _b[0];\n            const id = `${this.source}-${target}-${uniqueId()}`;\n            const edgeData = onCreate({ id, source: this.source, target, style });\n            graph.addEdgeData([edgeData]);\n            onFinish(edgeData);\n        };\n        this.cancelEdge = () => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!this.source)\n                return;\n            const { graph, element, batch } = this.context;\n            graph.removeNodeData([ASSIST_NODE_ID]);\n            this.source = undefined;\n            yield ((_a = element.draw({ animation: false })) === null || _a === void 0 ? void 0 : _a.finished);\n            batch.endBatch();\n        });\n        this.bindEvents();\n    }\n    /**\n     * Update options\n     * @param options - The options to update\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        const { trigger } = this.options;\n        this.unbindEvents();\n        if (trigger === 'click') {\n            graph.on(NodeEvent.CLICK, this.handleCreateEdge);\n            graph.on(ComboEvent.CLICK, this.handleCreateEdge);\n            graph.on(CanvasEvent.CLICK, this.cancelEdge);\n            graph.on(EdgeEvent.CLICK, this.cancelEdge);\n        }\n        else {\n            graph.on(NodeEvent.DRAG_START, this.handleCreateEdge);\n            graph.on(ComboEvent.DRAG_START, this.handleCreateEdge);\n            graph.on(CommonEvent.POINTER_UP, this.drop);\n        }\n        graph.on(CommonEvent.POINTER_MOVE, this.updateAssistEdge);\n    }\n    getSelectedNodeIDs(currTarget) {\n        return Array.from(new Set(this.context.graph\n            .getElementDataByState('node', this.options.state)\n            .map((node) => node.id)\n            .concat(currTarget)));\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(NodeEvent.CLICK, this.handleCreateEdge);\n        graph.off(ComboEvent.CLICK, this.handleCreateEdge);\n        graph.off(CanvasEvent.CLICK, this.cancelEdge);\n        graph.off(EdgeEvent.CLICK, this.cancelEdge);\n        graph.off(NodeEvent.DRAG_START, this.handleCreateEdge);\n        graph.off(ComboEvent.DRAG_START, this.handleCreateEdge);\n        graph.off(CommonEvent.POINTER_UP, this.drop);\n        graph.off(CommonEvent.POINTER_MOVE, this.updateAssistEdge);\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nCreateEdge.defaultOptions = {\n    animation: true,\n    enable: true,\n    style: {},\n    trigger: 'drag',\n    onCreate: (data) => data,\n    onFinish: () => { },\n};\n//# sourceMappingURL=create-edge.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { debounce, isObject } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { getExpandedBBox, getPointBBox, isPointInBBox } from '../utils/bbox';\nimport { parsePadding } from '../utils/padding';\nimport { PinchHandler } from '../utils/pinch';\nimport { Shortcut } from '../utils/shortcut';\nimport { multiply, subtract } from '../utils/vector';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 拖拽画布交互\n *\n * <en/> Drag canvas behavior\n */\nexport class DragCanvas extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, DragCanvas.defaultOptions, options));\n        this.isDragging = false;\n        this.onDragStart = (event) => {\n            if (!this.validate(event))\n                return;\n            this.isDragging = true;\n            this.context.canvas.setCursor('grabbing');\n        };\n        this.onDrag = (event) => {\n            var _a, _b, _c, _d;\n            if (!this.isDragging || PinchHandler.isPinching)\n                return;\n            const x = (_b = (_a = event.movement) === null || _a === void 0 ? void 0 : _a.x) !== null && _b !== void 0 ? _b : event.dx;\n            const y = (_d = (_c = event.movement) === null || _c === void 0 ? void 0 : _c.y) !== null && _d !== void 0 ? _d : event.dy;\n            if ((x | y) !== 0) {\n                this.translate([x, y], false);\n            }\n        };\n        this.onDragEnd = () => {\n            var _a, _b;\n            this.isDragging = false;\n            this.context.canvas.setCursor(this.defaultCursor);\n            (_b = (_a = this.options).onFinish) === null || _b === void 0 ? void 0 : _b.call(_a);\n        };\n        this.invokeOnFinish = debounce(() => {\n            var _a, _b;\n            (_b = (_a = this.options).onFinish) === null || _b === void 0 ? void 0 : _b.call(_a);\n        }, 300);\n        this.shortcut = new Shortcut(context.graph);\n        this.bindEvents();\n        this.defaultCursor = this.context.canvas.getConfig().cursor || 'default';\n    }\n    /**\n     * <zh/> 更新配置\n     *\n     * <en/> Update options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { trigger } = this.options;\n        if (isObject(trigger)) {\n            const { up = [], down = [], left = [], right = [] } = trigger;\n            this.shortcut.bind(up, (event) => this.onTranslate([0, 1], event));\n            this.shortcut.bind(down, (event) => this.onTranslate([0, -1], event));\n            this.shortcut.bind(left, (event) => this.onTranslate([1, 0], event));\n            this.shortcut.bind(right, (event) => this.onTranslate([-1, 0], event));\n        }\n        else {\n            const { graph } = this.context;\n            graph.on(CommonEvent.DRAG_START, this.onDragStart);\n            graph.on(CommonEvent.DRAG, this.onDrag);\n            graph.on(CommonEvent.DRAG_END, this.onDragEnd);\n        }\n    }\n    onTranslate(value, event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.validate(event))\n                return;\n            const { sensitivity } = this.options;\n            const delta = sensitivity * -1;\n            yield this.translate(multiply(value, delta), this.options.animation);\n            this.invokeOnFinish();\n        });\n    }\n    /**\n     * <zh/> 平移画布\n     *\n     * <en/> Translate canvas\n     * @param offset - <zh/> 平移距离 | <en/> Translation distance\n     * @param animation - <zh/> 动画配置 | <en/> Animation configuration\n     * @internal\n     */\n    translate(offset, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            offset = this.clampByDirection(offset);\n            offset = this.clampByRange(offset);\n            yield this.context.graph.translateBy(offset, animation);\n        });\n    }\n    clampByDirection([dx, dy]) {\n        const { direction } = this.options;\n        if (direction === 'x') {\n            dy = 0;\n        }\n        else if (direction === 'y') {\n            dx = 0;\n        }\n        return [dx, dy];\n    }\n    clampByRange([dx, dy]) {\n        const { viewport, canvas } = this.context;\n        const [canvasWidth, canvasHeight] = canvas.getSize();\n        const [top, right, bottom, left] = parsePadding(this.options.range);\n        const range = [canvasHeight * top, canvasWidth * right, canvasHeight * bottom, canvasWidth * left];\n        const draggableArea = getExpandedBBox(getPointBBox(viewport.getCanvasCenter()), range);\n        const nextViewportCenter = subtract(viewport.getViewportCenter(), [dx, dy, 0]);\n        if (!isPointInBBox(nextViewportCenter, draggableArea)) {\n            const { min: [minX, minY], max: [maxX, maxY], } = draggableArea;\n            if ((nextViewportCenter[0] < minX && dx > 0) || (nextViewportCenter[0] > maxX && dx < 0)) {\n                dx = 0;\n            }\n            if ((nextViewportCenter[1] < minY && dy > 0) || (nextViewportCenter[1] > maxY && dy < 0)) {\n                dy = 0;\n            }\n        }\n        return [dx, dy];\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (typeof enable === 'function')\n            return enable(event);\n        return !!enable;\n    }\n    unbindEvents() {\n        this.shortcut.unbindAll();\n        const { graph } = this.context;\n        graph.off(CommonEvent.DRAG_START, this.onDragStart);\n        graph.off(CommonEvent.DRAG, this.onDrag);\n        graph.off(CommonEvent.DRAG_END, this.onDragEnd);\n    }\n    destroy() {\n        this.shortcut.destroy();\n        this.unbindEvents();\n        this.context.canvas.setCursor(this.defaultCursor);\n        super.destroy();\n    }\n}\nDragCanvas.defaultOptions = {\n    enable: (event) => {\n        if ('targetType' in event)\n            return event.targetType === 'canvas';\n        return true;\n    },\n    sensitivity: 10,\n    direction: 'both',\n    range: Infinity,\n};\n//# sourceMappingURL=drag-canvas.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Rect } from '@antv/g';\nimport { isFunction } from '@antv/util';\nimport { COMBO_KEY, CanvasEvent, ComboEvent, CommonEvent } from '../constants';\nimport { getBBoxSize, getCombinedBBox } from '../utils/bbox';\nimport { idOf } from '../utils/id';\nimport { subStyleProps } from '../utils/prefix';\nimport { divide, subtract } from '../utils/vector';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 拖拽元素交互\n *\n * <en/> Drag element behavior\n */\nexport class DragElement extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, DragElement.defaultOptions, options));\n        this.enable = false;\n        this.enableElements = ['node', 'combo'];\n        this.target = [];\n        this.shadowOrigin = [0, 0];\n        this.hiddenEdges = [];\n        this.isDragging = false;\n        /**\n         * <zh/> 拖拽放下的回调\n         *\n         * <en/> Callback when dragging is released\n         * @param event - <zh/> 拖拽事件对象 | <en/> drag event object\n         */\n        this.onDrop = (event) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (this.options.dropEffect !== 'link')\n                return;\n            const { model, element } = this.context;\n            const modifiedParentId = event.target.id;\n            this.target.forEach((id) => {\n                const originalParent = model.getParentData(id, COMBO_KEY);\n                // 如果是在原父 combo 内部拖拽，需要刷新 combo 数据\n                // If it is a drag and drop within the original parent combo, you need to refresh the combo data\n                if (originalParent && idOf(originalParent) === modifiedParentId) {\n                    model.refreshComboData(modifiedParentId);\n                }\n                model.setParent(id, modifiedParentId, COMBO_KEY);\n            });\n            yield ((_a = element === null || element === void 0 ? void 0 : element.draw({ animation: true })) === null || _a === void 0 ? void 0 : _a.finished);\n        });\n        this.setCursor = (event) => {\n            if (this.isDragging)\n                return;\n            const { type } = event;\n            const { canvas } = this.context;\n            const { cursor } = this.options;\n            if (type === CommonEvent.POINTER_ENTER)\n                canvas.setCursor((cursor === null || cursor === void 0 ? void 0 : cursor.grab) || 'grab');\n            else\n                canvas.setCursor((cursor === null || cursor === void 0 ? void 0 : cursor.default) || 'default');\n        };\n        this.onDragStart = this.onDragStart.bind(this);\n        this.onDrag = this.onDrag.bind(this);\n        this.onDragEnd = this.onDragEnd.bind(this);\n        this.onDrop = this.onDrop.bind(this);\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 更新元素拖拽配置\n     *\n     * <en/> Update the element dragging configuration\n     * @param options - <zh/> 配置项 | <en/> options\n     * @internal\n     */\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph, canvas } = this.context;\n        // @ts-expect-error internal property\n        const $canvas = canvas.getLayer().getContextService().$canvas;\n        if ($canvas) {\n            $canvas.addEventListener('blur', this.onDragEnd);\n            $canvas.addEventListener('contextmenu', this.onDragEnd);\n        }\n        this.enableElements.forEach((type) => {\n            graph.on(`${type}:${CommonEvent.DRAG_START}`, this.onDragStart);\n            graph.on(`${type}:${CommonEvent.DRAG}`, this.onDrag);\n            graph.on(`${type}:${CommonEvent.DRAG_END}`, this.onDragEnd);\n            graph.on(`${type}:${CommonEvent.POINTER_ENTER}`, this.setCursor);\n            graph.on(`${type}:${CommonEvent.POINTER_LEAVE}`, this.setCursor);\n        });\n        if (['link'].includes(this.options.dropEffect)) {\n            graph.on(ComboEvent.DROP, this.onDrop);\n            graph.on(CanvasEvent.DROP, this.onDrop);\n        }\n    }\n    /**\n     * <zh/> 获取当前选中的节点 id 集合\n     *\n     * <en/> Get the id collection of the currently selected node\n     * @param currTarget - <zh/> 当前拖拽目标元素 id 集合 | <en/> The id collection of the current drag target element\n     * @returns <zh/> 当前选中的节点 id 集合 | <en/> The id collection of the currently selected node\n     * @internal\n     */\n    getSelectedNodeIDs(currTarget) {\n        return Array.from(new Set(this.context.graph\n            .getElementDataByState('node', this.options.state)\n            .map((node) => node.id)\n            .concat(currTarget)));\n    }\n    /**\n     * Get the delta of the drag\n     * @param event - drag event object\n     * @returns delta\n     * @internal\n     */\n    getDelta(event) {\n        const zoom = this.context.graph.getZoom();\n        return divide([event.dx, event.dy], zoom);\n    }\n    /**\n     * <zh/> 拖拽开始时的回调\n     *\n     * <en/> Callback when dragging starts\n     * @param event - <zh/> 拖拽事件对象 | <en/> drag event object\n     * @internal\n     */\n    onDragStart(event) {\n        var _a;\n        this.enable = this.validate(event);\n        if (!this.enable)\n            return;\n        const { batch, canvas, graph } = this.context;\n        canvas.setCursor(((_a = this.options.cursor) === null || _a === void 0 ? void 0 : _a.grabbing) || 'grabbing');\n        this.isDragging = true;\n        batch.startBatch();\n        // 如果当前节点是选中状态，则查询出画布中所有选中的节点，否则只拖拽当前节点\n        // If the current node is selected, query all selected nodes in the canvas, otherwise only drag the current node\n        const id = event.target.id;\n        const states = graph.getElementState(id);\n        if (states.includes(this.options.state))\n            this.target = this.getSelectedNodeIDs([id]);\n        else\n            this.target = [id];\n        this.hideEdge();\n        this.context.graph.frontElement(this.target);\n        if (this.options.shadow)\n            this.createShadow(this.target);\n    }\n    /**\n     * <zh/> 拖拽过程中的回调\n     *\n     * <en/> Callback when dragging\n     * @param event - <zh/> 拖拽事件对象 | <en/> drag event object\n     * @internal\n     */\n    onDrag(event) {\n        if (!this.enable)\n            return;\n        const delta = this.getDelta(event);\n        if (this.options.shadow)\n            this.moveShadow(delta);\n        else\n            this.moveElement(this.target, delta);\n    }\n    /**\n     * <zh/> 元素拖拽结束的回调\n     *\n     * <en/> Callback when dragging ends\n     * @internal\n     */\n    onDragEnd() {\n        var _a, _b, _c;\n        this.enable = false;\n        if (this.options.shadow) {\n            if (!this.shadow)\n                return;\n            this.shadow.style.visibility = 'hidden';\n            const { x = 0, y = 0 } = this.shadow.attributes;\n            const [dx, dy] = subtract([+x, +y], this.shadowOrigin);\n            this.moveElement(this.target, [dx, dy]);\n        }\n        this.showEdges();\n        (_b = (_a = this.options).onFinish) === null || _b === void 0 ? void 0 : _b.call(_a, this.target);\n        const { batch, canvas } = this.context;\n        batch.endBatch();\n        canvas.setCursor(((_c = this.options.cursor) === null || _c === void 0 ? void 0 : _c.grab) || 'grab');\n        this.isDragging = false;\n        this.target = [];\n    }\n    /**\n     * <zh/> 验证元素是否允许拖拽\n     *\n     * <en/> Verify if the element is allowed to be dragged\n     * @param event - <zh/> 拖拽事件对象 | <en/> drag event object\n     * @returns <zh/> 是否允许拖拽 | <en/> Whether to allow dragging\n     * @internal\n     */\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    /**\n     * <zh/> 移动元素\n     *\n     * <en/> Move the element\n     * @param ids - <zh/> 元素 id 集合 | <en/> element id collection\n     * @param offset <zh/> 偏移量 | <en/> offset\n     * @internal\n     */\n    moveElement(ids, offset) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { graph, model } = this.context;\n            const { dropEffect } = this.options;\n            if (dropEffect === 'move')\n                ids.forEach((id) => model.refreshComboData(id));\n            graph.translateElementBy(Object.fromEntries(ids.map((id) => [id, offset])), false);\n        });\n    }\n    moveShadow(offset) {\n        if (!this.shadow)\n            return;\n        const { x = 0, y = 0 } = this.shadow.attributes;\n        const [dx, dy] = offset;\n        this.shadow.attr({ x: +x + dx, y: +y + dy });\n    }\n    createShadow(target) {\n        const shadowStyle = subStyleProps(this.options, 'shadow');\n        const bbox = getCombinedBBox(target.map((id) => this.context.element.getElement(id).getBounds()));\n        const [x, y] = bbox.min;\n        this.shadowOrigin = [x, y];\n        const [width, height] = getBBoxSize(bbox);\n        const positionStyle = { width, height, x, y };\n        if (this.shadow) {\n            this.shadow.attr(Object.assign(Object.assign(Object.assign({}, shadowStyle), positionStyle), { visibility: 'visible' }));\n        }\n        else {\n            this.shadow = new Rect({\n                style: Object.assign(Object.assign(Object.assign({ \n                    // @ts-ignore $layer is not in the type definition\n                    $layer: 'transient' }, shadowStyle), positionStyle), { pointerEvents: 'none' }),\n            });\n            this.context.canvas.appendChild(this.shadow);\n        }\n    }\n    showEdges() {\n        if (this.options.shadow || this.hiddenEdges.length === 0)\n            return;\n        this.context.graph.showElement(this.hiddenEdges);\n        this.hiddenEdges = [];\n    }\n    /**\n     * Hide the edge\n     * @internal\n     */\n    hideEdge() {\n        const { hideEdge, shadow } = this.options;\n        if (hideEdge === 'none' || shadow)\n            return;\n        const { graph } = this.context;\n        if (hideEdge === 'all')\n            this.hiddenEdges = graph.getEdgeData().map(idOf);\n        else {\n            this.hiddenEdges = Array.from(new Set(this.target.map((id) => graph.getRelatedEdgesData(id, hideEdge).map(idOf)).flat()));\n        }\n        graph.hideElement(this.hiddenEdges);\n    }\n    unbindEvents() {\n        const { graph, canvas } = this.context;\n        // @ts-expect-error internal property\n        const $canvas = canvas.getLayer().getContextService().$canvas;\n        if ($canvas) {\n            $canvas.removeEventListener('blur', this.onDragEnd);\n            $canvas.removeEventListener('contextmenu', this.onDragEnd);\n        }\n        this.enableElements.forEach((type) => {\n            graph.off(`${type}:${CommonEvent.DRAG_START}`, this.onDragStart);\n            graph.off(`${type}:${CommonEvent.DRAG}`, this.onDrag);\n            graph.off(`${type}:${CommonEvent.DRAG_END}`, this.onDragEnd);\n            graph.off(`${type}:${CommonEvent.POINTER_ENTER}`, this.setCursor);\n            graph.off(`${type}:${CommonEvent.POINTER_LEAVE}`, this.setCursor);\n        });\n        graph.off(`combo:${CommonEvent.DROP}`, this.onDrop);\n        graph.off(`canvas:${CommonEvent.DROP}`, this.onDrop);\n    }\n    destroy() {\n        var _a;\n        this.unbindEvents();\n        (_a = this.shadow) === null || _a === void 0 ? void 0 : _a.destroy();\n        super.destroy();\n    }\n}\nDragElement.defaultOptions = {\n    animation: true,\n    enable: (event) => ['node', 'combo'].includes(event.targetType),\n    dropEffect: 'move',\n    state: 'selected',\n    hideEdge: 'none',\n    shadow: false,\n    shadowZIndex: 100,\n    shadowFill: '#F3F9FF',\n    shadowFillOpacity: 0.5,\n    shadowStroke: '#1890FF',\n    shadowStrokeOpacity: 0.9,\n    shadowLineDash: [5, 5],\n    cursor: {\n        default: 'default',\n        grab: 'grab',\n        grabbing: 'grabbing',\n    },\n};\n//# sourceMappingURL=drag-element.js.map","/**\n * <zh/> 布局的基类\n *\n * <en/> Base class for layout\n */\nexport class BaseLayout {\n    constructor(context, options) {\n        this.context = context;\n        this.options = options || {};\n    }\n}\n//# sourceMappingURL=base-layout.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Graph as Graphlib } from '@antv/graphlib';\nimport { deepMix, isNumber } from '@antv/util';\nimport { COMBO_KEY } from '../constants';\nimport { BaseLayout } from '../layouts/base-layout';\nimport { idOf } from './id';\nimport { parsePoint } from './point';\n/**\n * <zh/> 判断是否是 combo 布局\n *\n * <en/> Determine if it is a combo layout\n * @param options - <zh/> 布局配置项 | <en/> Layout options\n * @returns <zh/> 是否是 combo 布局 | <en/> Whether it is a combo layout\n */\nexport function isComboLayout(options) {\n    const { type } = options;\n    if (['comboCombined', 'comboForce'].includes(type))\n        return true;\n    if (type === 'antv-dagre' && options.sortByCombo)\n        return true;\n    return false;\n}\n/**\n * <zh/> 判断是否是树图布局\n *\n * <en/> Determine if it is a tree layout\n * @param options - <zh/> 布局配置项 | <en/> Layout options\n * @returns <zh/> 是否是树图布局 | <en/> Whether it is a tree layout\n */\nexport function isTreeLayout(options) {\n    const { type } = options;\n    return ['compact-box', 'mindmap', 'dendrogram', 'indented'].includes(type);\n}\n/**\n * <zh/> 数据中是否指定了位置\n *\n * <en/> Is the position specified in the data\n * @param data - <zh/> 数据 | <en/> Data\n * @returns <zh/> 是否指定了位置 | <en/> Is the position specified\n */\nexport function isPositionSpecified(data) {\n    return isNumber(data.x) && isNumber(data.y);\n}\n/**\n * <zh/> 是否是前布局\n *\n * <en/> Is pre-layout\n * @remarks\n * <zh/> 前布局是指在初始化元素前计算布局，适用于一些布局需要提前计算位置的场景。\n *\n * <en/> Pre-layout refers to calculating the layout before initializing the elements, which is suitable for some layouts that need to calculate the position in advance.\n * @param options - <zh/> 布局配置项 | <en/> Layout options\n * @returns <zh/> 是否是前布局 | <en/> Is it a pre-layout\n */\nexport function isPreLayout(options) {\n    return !Array.isArray(options) && (options === null || options === void 0 ? void 0 : options.preLayout);\n}\n/**\n * <zh/> 将图布局结果转换为 G6 数据\n *\n * <en/> Convert the layout result to G6 data\n * @param layoutMapping - <zh/> 布局映射 | <en/> Layout mapping\n * @returns <zh/> G6 数据 | <en/> G6 data\n */\nexport function layoutMapping2GraphData(layoutMapping) {\n    const { nodes, edges } = layoutMapping;\n    const data = { nodes: [], edges: [], combos: [] };\n    nodes.forEach((nodeLike) => {\n        const target = nodeLike.data._isCombo ? data.combos : data.nodes;\n        const { x, y, z = 0 } = nodeLike.data;\n        target === null || target === void 0 ? void 0 : target.push({\n            id: nodeLike.id,\n            style: { x, y, z },\n        });\n    });\n    edges.forEach((edge) => {\n        const { id, source, target, data: { points = [], controlPoints = points.slice(1, points.length - 1) }, } = edge;\n        data.edges.push({\n            id: id,\n            source: source,\n            target: target,\n            style: Object.assign({}, ((controlPoints === null || controlPoints === void 0 ? void 0 : controlPoints.length) ? { controlPoints: controlPoints.map(parsePoint) } : {})),\n        });\n    });\n    return data;\n}\n/**\n * <zh/> 将 @antv/layout 布局适配为 G6 布局\n *\n * <en/> Adapt @antv/layout layout to G6 layout\n * @param Ctor - <zh/> 布局类 | <en/> Layout class\n * @param context - <zh/> 运行时上下文 | <en/> Runtime context\n * @returns <zh/> G6 布局类 | <en/> G6 layout class\n */\nexport function layoutAdapter(Ctor, context) {\n    class AdaptLayout extends BaseLayout {\n        constructor(context, options) {\n            super(context, options);\n            this.instance = new Ctor({});\n            this.id = this.instance.id;\n            if ('stop' in this.instance && 'tick' in this.instance) {\n                const instance = this.instance;\n                this.stop = instance.stop.bind(instance);\n                this.tick = (iterations) => {\n                    const tickResult = instance.tick(iterations);\n                    return layoutMapping2GraphData(tickResult);\n                };\n            }\n        }\n        execute(model, options) {\n            return __awaiter(this, void 0, void 0, function* () {\n                return layoutMapping2GraphData(yield this.instance.execute(this.graphData2LayoutModel(model), this.transformOptions(deepMix({}, this.options, options))));\n            });\n        }\n        transformOptions(options) {\n            const { onTick } = options;\n            if (!onTick)\n                return options;\n            options.onTick = (data) => onTick(layoutMapping2GraphData(data));\n            return options;\n        }\n        graphData2LayoutModel(data) {\n            const { nodes = [], edges = [], combos = [] } = data;\n            const nodesToLayout = nodes.map((datum) => {\n                const id = idOf(datum);\n                const { data, style, combo } = datum, rest = __rest(datum, [\"data\", \"style\", \"combo\"]);\n                const result = {\n                    id,\n                    data: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, data), { data }), (combo ? { parentId: combo } : {})), { style }), rest),\n                };\n                // 一些布局会从 data 中读取位置信息\n                if (style === null || style === void 0 ? void 0 : style.x)\n                    Object.assign(result.data, { x: style.x });\n                if (style === null || style === void 0 ? void 0 : style.y)\n                    Object.assign(result.data, { y: style.y });\n                if (style === null || style === void 0 ? void 0 : style.z)\n                    Object.assign(result.data, { z: style.z });\n                return result;\n            });\n            const nodesIdMap = new Map(nodesToLayout.map((node) => [node.id, node]));\n            const edgesToLayout = edges\n                .filter((edge) => {\n                const { source, target } = edge;\n                return nodesIdMap.has(source) && nodesIdMap.has(target);\n            })\n                .map((edge) => {\n                const { source, target, data, style } = edge;\n                return { id: idOf(edge), source, target, data: Object.assign({}, data), style: Object.assign({}, style) };\n            });\n            const combosToLayout = combos.map((combo) => {\n                return { id: idOf(combo), data: Object.assign({ _isCombo: true }, combo.data), style: Object.assign({}, combo.style) };\n            });\n            const layoutModel = new Graphlib({\n                nodes: [...nodesToLayout, ...combosToLayout],\n                edges: edgesToLayout,\n            });\n            if (context.model.model.hasTreeStructure(COMBO_KEY)) {\n                layoutModel.attachTreeStructure(COMBO_KEY);\n                // 同步层级关系 / Synchronize hierarchical relationships\n                nodesToLayout.forEach((node) => {\n                    const parent = context.model.model.getParent(node.id, COMBO_KEY);\n                    if (parent && layoutModel.hasNode(parent.id)) {\n                        layoutModel.setParent(node.id, parent.id, COMBO_KEY);\n                    }\n                });\n            }\n            return layoutModel;\n        }\n    }\n    return AdaptLayout;\n}\n/**\n * <zh/> 调用布局成员方法\n *\n * <en/> Call layout member methods\n * @remarks\n * <zh/> 提供一种通用的调用方式来调用 G6 布局和 \\@antv/layout 布局上的方法\n *\n * <en/> Provide a common way to call methods on G6 layout and \\@antv/layout layout\n * @param layout - <zh/> 布局实例 | <en/> Layout instance\n * @param method - <zh/> 方法名 | <en/> Method name\n * @param args - <zh/> 参数 | <en/> Arguments\n * @returns <zh/> 返回值 | <en/> Return value\n */\nexport function invokeLayoutMethod(layout, method, ...args) {\n    if (method in layout) {\n        return layout[method](...args);\n    }\n    // invoke AdaptLayout method\n    if ('instance' in layout) {\n        const instance = layout.instance;\n        if (method in instance)\n            return instance[method](...args);\n    }\n    return null;\n}\n/**\n * <zh/> 获取布局成员属性\n *\n * <en/> Get layout member properties\n * @param layout - <zh/> 布局实例 | <en/> Layout instance\n * @param name - <zh/> 属性名 | <en/> Property name\n * @returns <zh/> 返回值 | <en/> Return value\n */\nexport function getLayoutProperty(layout, name) {\n    if (name in layout)\n        return layout[name];\n    if ('instance' in layout) {\n        const instance = layout.instance;\n        if (name in instance)\n            return instance[name];\n    }\n    return null;\n}\n//# sourceMappingURL=layout.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { idOf } from '../utils/id';\nimport { getLayoutProperty, invokeLayoutMethod } from '../utils/layout';\nimport { print } from '../utils/print';\nimport { add } from '../utils/vector';\nimport { DragElement } from './drag-element';\n/**\n * <zh/> 调用力导布局拖拽元素的交互\n *\n * <en/> Call d3-force layout to drag element behavior\n * @remarks\n * <zh/> 只能在使用 d3-force 布局时使用该交互，在拖拽过程中会实时重新计算布局。\n *\n * <en/> This behavior can only be used with d3-force layout. The layout will be recalculated in real time during dragging.\n */\nexport class DragElementForce extends DragElement {\n    get forceLayoutInstance() {\n        return this.context.layout.getLayoutInstance().find((layout) => ['d3-force', 'd3-force-3d'].includes(layout === null || layout === void 0 ? void 0 : layout.id));\n    }\n    /**\n     * Whether the behavior is enabled\n     * @param event - The event object\n     * @returns Is the behavior enabled\n     * @internal\n     */\n    validate(event) {\n        if (!this.context.layout)\n            return false;\n        // 未使用力导布局 / The force layout is not used\n        if (!this.forceLayoutInstance) {\n            print.warn('DragElementForce only works with d3-force or d3-force-3d layout');\n            return false;\n        }\n        return super.validate(event);\n    }\n    /**\n     * Move selected elements by offset\n     * @param ids - The selected element IDs\n     * @param offset - The offset to move\n     * @internal\n     */\n    moveElement(ids, offset) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const layout = this.forceLayoutInstance;\n            this.context.graph.getNodeData(ids).forEach((element, index) => {\n                const { x = 0, y = 0 } = element.style || {};\n                if (layout)\n                    invokeLayoutMethod(layout, 'setFixedPosition', ids[index], [...add([+x, +y], offset)]);\n            });\n        });\n    }\n    /**\n     * Triggered when the drag starts\n     * @param event - The event object\n     * @internal\n     */\n    onDragStart(event) {\n        this.enable = this.validate(event);\n        if (!this.enable)\n            return;\n        this.target = this.getSelectedNodeIDs([event.target.id]);\n        this.hideEdge();\n        this.context.graph.frontElement(this.target);\n        const layout = this.forceLayoutInstance;\n        if (layout)\n            getLayoutProperty(layout, 'simulation').alphaTarget(0.3).restart();\n        this.context.graph.getNodeData(this.target).forEach((element) => {\n            const { x = 0, y = 0 } = element.style || {};\n            if (layout)\n                invokeLayoutMethod(layout, 'setFixedPosition', idOf(element), [+x, +y]);\n        });\n    }\n    /**\n     * Triggered when dragging\n     * @param event - The event object\n     * @internal\n     */\n    onDrag(event) {\n        if (!this.enable)\n            return;\n        const delta = this.getDelta(event);\n        this.moveElement(this.target, delta);\n    }\n    /**\n     * Triggered when the drag ends\n     * @internal\n     */\n    onDragEnd() {\n        const layout = this.forceLayoutInstance;\n        if (layout)\n            getLayoutProperty(layout, 'simulation').alphaTarget(0);\n        if (this.options.fixed)\n            return;\n        this.context.graph.getNodeData(this.target).forEach((element) => {\n            if (layout)\n                invokeLayoutMethod(layout, 'setFixedPosition', idOf(element), [null, null, null]);\n        });\n    }\n}\n//# sourceMappingURL=drag-element-force.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isEmpty, isFunction, isNumber } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport { idOf } from '../utils/id';\nimport { getDescendantShapes } from '../utils/shape';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 缩放画布过程中固定元素大小\n *\n * <en/> Fix element size while zooming\n */\nexport class FixElementSize extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, FixElementSize.defaultOptions, options));\n        this.isZoomEvent = (event) => Boolean(event.data && 'scale' in event.data);\n        this.relatedEdgeToUpdate = new Set();\n        this.zoom = this.context.graph.getZoom();\n        this.fixElementSize = (event) => __awaiter(this, void 0, void 0, function* () {\n            if (!this.validate(event))\n                return;\n            const { graph } = this.context;\n            const { state, nodeFilter, edgeFilter, comboFilter } = this.options;\n            const nodeData = (state ? graph.getElementDataByState('node', state) : graph.getNodeData()).filter(nodeFilter);\n            const edgeData = (state ? graph.getElementDataByState('edge', state) : graph.getEdgeData()).filter(edgeFilter);\n            const comboData = (state ? graph.getElementDataByState('combo', state) : graph.getComboData()).filter(comboFilter);\n            // 设置阈值防止过大或过小时抖动 | Set the threshold to prevent jitter when too large or too small\n            const currentScale = this.isZoomEvent(event)\n                ? (this.zoom = Math.max(0.01, Math.min(event.data.scale, 10)))\n                : this.zoom;\n            const nodeLikeData = [...nodeData, ...comboData];\n            if (nodeLikeData.length > 0) {\n                nodeLikeData.forEach((datum) => this.fixNodeLike(datum, currentScale));\n            }\n            this.updateRelatedEdges();\n            if (edgeData.length > 0) {\n                edgeData.forEach((datum) => this.fixEdge(datum, currentScale));\n            }\n        });\n        this.cachedStyles = new Map();\n        this.getOriginalFieldValue = (id, shape, field) => {\n            var _a;\n            const shapesStyle = this.cachedStyles.get(id) || [];\n            const shapeStyle = ((_a = shapesStyle.find((style) => style.shape === shape)) === null || _a === void 0 ? void 0 : _a.style) || {};\n            if (!(field in shapeStyle)) {\n                shapeStyle[field] = shape.attributes[field];\n                this.cachedStyles.set(id, [\n                    ...shapesStyle.filter((style) => style.shape !== shape),\n                    { shape, style: shapeStyle },\n                ]);\n            }\n            return shapeStyle[field];\n        };\n        this.scaleEntireElement = (id, el, currentScale) => {\n            el.setLocalScale(1 / currentScale);\n            const shapesStyle = this.cachedStyles.get(id) || [];\n            shapesStyle.push({ shape: el });\n            this.cachedStyles.set(id, shapesStyle);\n        };\n        this.scaleSpecificShapes = (el, currentScale, config) => {\n            const descendantShapes = getDescendantShapes(el);\n            const configs = Array.isArray(config) ? config : [config];\n            configs.forEach((config) => {\n                const { shape: shapeFilter, fields } = config;\n                const shape = typeof shapeFilter === 'function' ? shapeFilter(descendantShapes) : el.getShape(shapeFilter);\n                if (!shape)\n                    return;\n                if (!fields) {\n                    this.scaleEntireElement(el.id, shape, currentScale);\n                    return;\n                }\n                fields.forEach((field) => {\n                    const oriFieldValue = this.getOriginalFieldValue(el.id, shape, field);\n                    if (!isNumber(oriFieldValue))\n                        return;\n                    shape.style[field] = oriFieldValue / currentScale;\n                });\n            });\n        };\n        this.skipIfExceedViewport = (el) => {\n            const { viewport } = this.context;\n            return !(viewport === null || viewport === void 0 ? void 0 : viewport.isInViewport(el.getRenderBounds(), false, 30));\n        };\n        this.fixNodeLike = (datum, currentScale) => {\n            const id = idOf(datum);\n            const { element, model } = this.context;\n            const el = element.getElement(id);\n            if (!el || this.skipIfExceedViewport(el))\n                return;\n            const edges = model.getRelatedEdgesData(id);\n            edges.forEach((edge) => this.relatedEdgeToUpdate.add(idOf(edge)));\n            const config = this.options[el.type];\n            if (!config) {\n                this.scaleEntireElement(id, el, currentScale);\n                return;\n            }\n            this.scaleSpecificShapes(el, currentScale, config);\n        };\n        this.fixEdge = (datum, currentScale) => {\n            const id = idOf(datum);\n            const el = this.context.element.getElement(id);\n            if (!el || this.skipIfExceedViewport(el))\n                return;\n            const config = this.options.edge;\n            if (!config) {\n                el.style.transformOrigin = 'center';\n                this.scaleEntireElement(id, el, currentScale);\n                return;\n            }\n            this.scaleSpecificShapes(el, currentScale, config);\n        };\n        this.updateRelatedEdges = () => {\n            const { element } = this.context;\n            if (this.relatedEdgeToUpdate.size > 0) {\n                this.relatedEdgeToUpdate.forEach((id) => {\n                    const edge = element.getElement(id);\n                    edge === null || edge === void 0 ? void 0 : edge.update({});\n                });\n            }\n            this.relatedEdgeToUpdate.clear();\n        };\n        this.resetTransform = (event) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            // 首屏渲染时跳过 | Skip when rendering the first screen\n            if ((_a = event.data) === null || _a === void 0 ? void 0 : _a.firstRender)\n                return;\n            if (this.options.reset) {\n                this.restoreCachedStyles();\n            }\n            else {\n                this.fixElementSize({ data: { scale: this.zoom } });\n            }\n        });\n        this.bindEvents();\n    }\n    restoreCachedStyles() {\n        if (this.cachedStyles.size > 0) {\n            this.cachedStyles.forEach((shapesStyle) => {\n                shapesStyle.forEach(({ shape, style }) => {\n                    if (isEmpty(style)) {\n                        shape.setLocalScale(1);\n                    }\n                    else {\n                        if (this.options.state)\n                            return;\n                        Object.entries(style).forEach(([field, value]) => (shape.style[field] = value));\n                    }\n                });\n            });\n            const { graph, element } = this.context;\n            const nodeIds = Object.keys(Object.fromEntries(this.cachedStyles)).filter((id) => id && graph.getElementType(id) === 'node');\n            if (nodeIds.length > 0) {\n                const edgeIds = new Set();\n                nodeIds.forEach((id) => {\n                    graph.getRelatedEdgesData(id).forEach((edge) => edgeIds.add(idOf(edge)));\n                });\n                edgeIds.forEach((id) => {\n                    const edge = element === null || element === void 0 ? void 0 : element.getElement(id);\n                    edge === null || edge === void 0 ? void 0 : edge.update({});\n                });\n            }\n        }\n        // this.cachedStyles.clear();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        graph.on(GraphEvent.AFTER_DRAW, this.resetTransform);\n        graph.on(GraphEvent.AFTER_TRANSFORM, this.fixElementSize);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(GraphEvent.AFTER_DRAW, this.resetTransform);\n        graph.off(GraphEvent.AFTER_TRANSFORM, this.fixElementSize);\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nFixElementSize.defaultOptions = {\n    enable: (event) => event.data.scale < 1,\n    nodeFilter: () => true,\n    edgeFilter: () => true,\n    comboFilter: () => true,\n    edge: [{ shape: 'key', fields: ['lineWidth'] }, { shape: 'halo', fields: ['lineWidth'] }, { shape: 'label' }],\n    reset: false,\n};\n//# sourceMappingURL=fix-element-size.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 聚焦元素交互行为\n *\n * <en/> Focus element behavior\n * @remarks\n * <zh/> 点击元素时，将元素聚焦到视图中心。\n *\n * <en/> When an element is clicked, the element is focused to the center of the view.\n */\nexport class FocusElement extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, FocusElement.defaultOptions, options));\n        this.focus = (event) => __awaiter(this, void 0, void 0, function* () {\n            if (!this.validate(event))\n                return;\n            const { graph } = this.context;\n            yield graph.focusElement(event.target.id, this.options.animation);\n        });\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        this.unbindEvents();\n        ELEMENT_TYPES.forEach((type) => {\n            graph.on(`${type}:${CommonEvent.CLICK}`, this.focus);\n        });\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        ELEMENT_TYPES.forEach((type) => {\n            graph.off(`${type}:${CommonEvent.CLICK}`, this.focus);\n        });\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nFocusElement.defaultOptions = {\n    animation: {\n        easing: 'ease-in',\n        duration: 500,\n    },\n    enable: true,\n};\n//# sourceMappingURL=focus-element.js.map","import { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport { isToBeDestroyed } from '../utils/element';\nimport { idsOf } from '../utils/id';\nimport { getElementNthDegreeIds } from '../utils/relation';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 悬浮元素交互\n *\n * <en/> Hover element behavior\n * @remarks\n * <zh/> 当鼠标悬停在元素上时，可以激活元素的状态，例如高亮节点或边。\n *\n * <en/> When the mouse hovers over an element, you can activate the state of the element, such as highlighting nodes or edges.\n */\nexport class HoverActivate extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, HoverActivate.defaultOptions, options));\n        this.isFrozen = false;\n        this.toggleFrozen = (e) => {\n            this.isFrozen = e.type === 'dragstart';\n        };\n        this.hoverElement = (event) => {\n            if (!this.validate(event))\n                return;\n            const isEnter = event.type === CommonEvent.POINTER_ENTER;\n            this.updateElementsState(event, isEnter);\n            const { onHover, onHoverEnd } = this.options;\n            if (isEnter)\n                onHover === null || onHover === void 0 ? void 0 : onHover(event);\n            else\n                onHoverEnd === null || onHoverEnd === void 0 ? void 0 : onHoverEnd(event);\n        };\n        this.updateElementsState = (event, add) => {\n            if (!this.options.state && !this.options.inactiveState)\n                return;\n            const { graph } = this.context;\n            const { state, animation, inactiveState } = this.options;\n            const activeIds = this.getActiveIds(event);\n            const states = {};\n            if (state) {\n                Object.assign(states, this.getElementsState(activeIds, state, add));\n            }\n            if (inactiveState) {\n                const inactiveIds = idsOf(graph.getData(), true).filter((id) => !activeIds.includes(id));\n                Object.assign(states, this.getElementsState(inactiveIds, inactiveState, add));\n            }\n            graph.setElementState(states, animation);\n        };\n        this.getElementsState = (ids, state, add) => {\n            const { graph } = this.context;\n            const states = {};\n            ids.forEach((id) => {\n                const currentState = graph.getElementState(id);\n                if (add) {\n                    states[id] = currentState.includes(state) ? currentState : [...currentState, state];\n                }\n                else {\n                    states[id] = currentState.filter((s) => s !== state);\n                }\n            });\n            return states;\n        };\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        this.unbindEvents();\n        ELEMENT_TYPES.forEach((type) => {\n            graph.on(`${type}:${CommonEvent.POINTER_ENTER}`, this.hoverElement);\n            graph.on(`${type}:${CommonEvent.POINTER_LEAVE}`, this.hoverElement);\n        });\n        const canvas = this.context.canvas.document;\n        canvas.addEventListener(`${CommonEvent.DRAG_START}`, this.toggleFrozen);\n        canvas.addEventListener(`${CommonEvent.DRAG_END}`, this.toggleFrozen);\n    }\n    getActiveIds(event) {\n        const { graph } = this.context;\n        const { degree, direction } = this.options;\n        const elementId = event.target.id;\n        return degree\n            ? getElementNthDegreeIds(graph, event.targetType, elementId, typeof degree === 'function' ? degree(event) : degree, direction)\n            : [elementId];\n    }\n    validate(event) {\n        if (this.destroyed ||\n            this.isFrozen ||\n            isToBeDestroyed(event.target) ||\n            // @ts-expect-error private property\n            // 避免动画冲突，在combo折叠展开过程中不触发悬停事件 | To prevent animation conflicts, hover events are disabled during combo expand/collapse actions\n            this.context.graph.isCollapsingExpanding)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        ELEMENT_TYPES.forEach((type) => {\n            graph.off(`${type}:${CommonEvent.POINTER_ENTER}`, this.hoverElement);\n            graph.off(`${type}:${CommonEvent.POINTER_LEAVE}`, this.hoverElement);\n        });\n        const canvas = this.context.canvas.document;\n        canvas.removeEventListener(`${CommonEvent.DRAG_START}`, this.toggleFrozen);\n        canvas.removeEventListener(`${CommonEvent.DRAG_END}`, this.toggleFrozen);\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nHoverActivate.defaultOptions = {\n    animation: false,\n    enable: true,\n    degree: 0,\n    direction: 'both',\n    state: 'active',\n    inactiveState: undefined,\n};\n//# sourceMappingURL=hover-activate.js.map","import { debounce, isFunction } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport { setVisibility } from '../utils/visibility';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 操作画布过程中隐藏元素\n *\n * <en/> Hide elements during canvas operations (dragging, zooming, scrolling)\n */\nexport class OptimizeViewportTransform extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, OptimizeViewportTransform.defaultOptions, options));\n        this.hiddenShapes = [];\n        this.isVisible = true;\n        this.setElementsVisibility = (elements, visibility, filter) => {\n            elements.filter(Boolean).forEach((element) => {\n                if (visibility === 'hidden' && !element.isVisible()) {\n                    this.hiddenShapes.push(element);\n                }\n                else if (visibility === 'visible' && this.hiddenShapes.includes(element)) {\n                    this.hiddenShapes.splice(this.hiddenShapes.indexOf(element), 1);\n                }\n                else {\n                    setVisibility(element, visibility, filter);\n                }\n            });\n        };\n        this.filterShapes = (type, filter) => {\n            if (isFunction(filter))\n                return (shape) => !filter(type, shape);\n            const includesClassnames = filter === null || filter === void 0 ? void 0 : filter[type];\n            return (shape) => {\n                if (!shape.className)\n                    return true;\n                return !(includesClassnames === null || includesClassnames === void 0 ? void 0 : includesClassnames.includes(shape.className));\n            };\n        };\n        this.hideShapes = (event) => {\n            if (!this.validate(event) || !this.isVisible)\n                return;\n            const { element } = this.context;\n            const { shapes = {} } = this.options;\n            this.setElementsVisibility(element.getNodes(), 'hidden', this.filterShapes('node', shapes));\n            this.setElementsVisibility(element.getEdges(), 'hidden', this.filterShapes('edge', shapes));\n            this.setElementsVisibility(element.getCombos(), 'hidden', this.filterShapes('combo', shapes));\n            this.isVisible = false;\n        };\n        this.showShapes = debounce((event) => {\n            if (!this.validate(event) || this.isVisible)\n                return;\n            const { element } = this.context;\n            this.setElementsVisibility(element.getNodes(), 'visible');\n            this.setElementsVisibility(element.getEdges(), 'visible');\n            this.setElementsVisibility(element.getCombos(), 'visible');\n            this.isVisible = true;\n        }, this.options.debounce);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        graph.on(GraphEvent.BEFORE_TRANSFORM, this.hideShapes);\n        graph.on(GraphEvent.AFTER_TRANSFORM, this.showShapes);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(GraphEvent.BEFORE_TRANSFORM, this.hideShapes);\n        graph.off(GraphEvent.AFTER_TRANSFORM, this.showShapes);\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nOptimizeViewportTransform.defaultOptions = {\n    enable: true,\n    debounce: 200,\n    shapes: (type) => type === 'node',\n};\n//# sourceMappingURL=optimize-viewport-transform.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isFunction, isObject } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { getExpandedBBox, getPointBBox, isPointInBBox } from '../utils/bbox';\nimport { parsePadding } from '../utils/padding';\nimport { Shortcut } from '../utils/shortcut';\nimport { multiply, subtract } from '../utils/vector';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 滚动画布交互\n *\n * <en/> Scroll canvas behavior\n */\nexport class ScrollCanvas extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, ScrollCanvas.defaultOptions, options));\n        this.onWheel = (event) => __awaiter(this, void 0, void 0, function* () {\n            if (this.options.preventDefault)\n                event.preventDefault();\n            const diffX = event.deltaX;\n            const diffY = event.deltaY;\n            yield this.scroll([-diffX, -diffY], event);\n        });\n        this.shortcut = new Shortcut(context.graph);\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 更新配置\n     *\n     * <en/> Update options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        var _a, _b;\n        const { trigger } = this.options;\n        this.shortcut.unbindAll();\n        if (isObject(trigger)) {\n            (_a = this.graphDom) === null || _a === void 0 ? void 0 : _a.removeEventListener(CommonEvent.WHEEL, this.onWheel);\n            const { up = [], down = [], left = [], right = [] } = trigger;\n            this.shortcut.bind(up, (event) => this.scroll([0, -10], event));\n            this.shortcut.bind(down, (event) => this.scroll([0, 10], event));\n            this.shortcut.bind(left, (event) => this.scroll([-10, 0], event));\n            this.shortcut.bind(right, (event) => this.scroll([10, 0], event));\n        }\n        else {\n            /**\n             * 这里必需在原生canvas上绑定wheel事件，参考：\n             * https://g.antv.antgroup.com/api/event/faq#%E5%9C%A8-chrome-%E4%B8%AD%E7%A6%81%E6%AD%A2%E9%A1%B5%E9%9D%A2%E9%BB%98%E8%AE%A4%E6%BB%9A%E5%8A%A8%E8%A1%8C%E4%B8%BA\n             */\n            (_b = this.graphDom) === null || _b === void 0 ? void 0 : _b.addEventListener(CommonEvent.WHEEL, this.onWheel, { passive: false });\n        }\n    }\n    get graphDom() {\n        return this.context.graph.getCanvas().getContextService().getDomElement();\n    }\n    formatDisplacement(d) {\n        const { sensitivity } = this.options;\n        d = multiply(d, sensitivity);\n        d = this.clampByDirection(d);\n        d = this.clampByRange(d);\n        return d;\n    }\n    clampByDirection([dx, dy]) {\n        const { direction } = this.options;\n        if (direction === 'x') {\n            dy = 0;\n        }\n        else if (direction === 'y') {\n            dx = 0;\n        }\n        return [dx, dy];\n    }\n    clampByRange([dx, dy]) {\n        const { viewport, canvas } = this.context;\n        const [canvasWidth, canvasHeight] = canvas.getSize();\n        const [top, right, bottom, left] = parsePadding(this.options.range);\n        const range = [canvasHeight * top, canvasWidth * right, canvasHeight * bottom, canvasWidth * left];\n        const scrollableArea = getExpandedBBox(getPointBBox(viewport.getCanvasCenter()), range);\n        const nextViewportCenter = subtract(viewport.getViewportCenter(), [dx, dy, 0]);\n        if (!isPointInBBox(nextViewportCenter, scrollableArea)) {\n            const { min: [minX, minY], max: [maxX, maxY], } = scrollableArea;\n            if ((nextViewportCenter[0] < minX && dx > 0) || (nextViewportCenter[0] > maxX && dx < 0)) {\n                dx = 0;\n            }\n            if ((nextViewportCenter[1] < minY && dy > 0) || (nextViewportCenter[1] > maxY && dy < 0)) {\n                dy = 0;\n            }\n        }\n        return [dx, dy];\n    }\n    scroll(value, event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.validate(event))\n                return;\n            const { onFinish } = this.options;\n            const graph = this.context.graph;\n            const formattedValue = this.formatDisplacement(value);\n            yield graph.translateBy(formattedValue, false);\n            onFinish === null || onFinish === void 0 ? void 0 : onFinish();\n        });\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    /**\n     * <zh/> 销毁画布滚动\n     *\n     * <en/> Destroy the canvas scrolling\n     */\n    destroy() {\n        var _a;\n        this.shortcut.destroy();\n        (_a = this.graphDom) === null || _a === void 0 ? void 0 : _a.removeEventListener(CommonEvent.WHEEL, this.onWheel);\n        super.destroy();\n    }\n}\nScrollCanvas.defaultOptions = {\n    enable: true,\n    sensitivity: 1,\n    preventDefault: true,\n    range: Infinity,\n};\n//# sourceMappingURL=scroll-canvas.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { clamp, isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { parsePoint } from '../utils/point';\nimport { Shortcut } from '../utils/shortcut';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 缩放画布交互\n *\n * <en/> Zoom canvas behavior\n */\nexport class ZoomCanvas extends BaseBehavior {\n    constructor(context, options) {\n        super(context, Object.assign({}, ZoomCanvas.defaultOptions, options));\n        /**\n         * <zh/> 缩放画布\n         *\n         * <en/> Zoom canvas\n         * @param value - <zh/> 缩放值， > 0 放大， < 0 缩小 | <en/> Zoom value, > 0 zoom in, < 0 zoom out\n         * @param event - <zh/> 事件对象 | <en/> Event object\n         * @param animation - <zh/> 缩放动画配置 | <en/> Zoom animation configuration\n         */\n        this.zoom = (value, event, animation) => __awaiter(this, void 0, void 0, function* () {\n            if (!this.validate(event))\n                return;\n            const { graph } = this.context;\n            let origin;\n            if ('viewport' in event) {\n                origin = parsePoint(event.viewport);\n            }\n            const { sensitivity, onFinish } = this.options;\n            const ratio = 1 + (clamp(value, -50, 50) * sensitivity) / 100;\n            const zoom = graph.getZoom();\n            yield graph.zoomTo(zoom * ratio, animation, origin);\n            onFinish === null || onFinish === void 0 ? void 0 : onFinish();\n        });\n        this.onReset = () => __awaiter(this, void 0, void 0, function* () {\n            yield this.context.graph.zoomTo(1, this.options.animation);\n        });\n        this.preventDefault = (event) => {\n            if (this.options.preventDefault)\n                event.preventDefault();\n        };\n        this.shortcut = new Shortcut(context.graph);\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 更新配置\n     *\n     * <en/> Update options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { trigger } = this.options;\n        this.shortcut.unbindAll();\n        if (Array.isArray(trigger)) {\n            if (trigger.includes(CommonEvent.PINCH)) {\n                this.shortcut.bind([CommonEvent.PINCH], (event) => {\n                    this.zoom(event.scale, event, false);\n                });\n            }\n            else {\n                const container = this.context.canvas.getContainer();\n                container === null || container === void 0 ? void 0 : container.addEventListener(CommonEvent.WHEEL, this.preventDefault);\n                this.shortcut.bind([...trigger, CommonEvent.WHEEL], (event) => {\n                    const { deltaX, deltaY } = event;\n                    this.zoom(-(deltaY !== null && deltaY !== void 0 ? deltaY : deltaX), event, false);\n                });\n            }\n        }\n        if (typeof trigger === 'object') {\n            const { zoomIn = [], zoomOut = [], reset = [], } = trigger;\n            this.shortcut.bind(zoomIn, (event) => this.zoom(10, event, this.options.animation));\n            this.shortcut.bind(zoomOut, (event) => this.zoom(-10, event, this.options.animation));\n            this.shortcut.bind(reset, this.onReset);\n        }\n    }\n    /**\n     * <zh/> 验证是否可以缩放\n     *\n     * <en/> Verify whether it can be zoomed\n     * @param event - <zh/> 事件对象 | <en/> Event object\n     * @returns <zh/> 是否可以缩放 | <en/> Whether it can be zoomed\n     * @internal\n     */\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    /**\n     * <zh/> 销毁缩放画布\n     *\n     * <en/> Destroy zoom canvas\n     */\n    destroy() {\n        var _a;\n        this.shortcut.destroy();\n        (_a = this.context.canvas.getContainer()) === null || _a === void 0 ? void 0 : _a.removeEventListener(CommonEvent.WHEEL, this.preventDefault);\n        super.destroy();\n    }\n}\nZoomCanvas.defaultOptions = {\n    animation: { duration: 200 },\n    enable: true,\n    sensitivity: 1,\n    trigger: [],\n    preventDefault: true,\n};\n//# sourceMappingURL=zoom-canvas.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isEmpty, memoize } from '@antv/util';\nimport { idOf } from '../utils/id';\nimport { parseSize } from '../utils/size';\nimport { BaseLayout } from './base-layout';\n/**\n * <zh/> 鱼骨图布局\n *\n * <en/> Fishbone layout\n * @remarks\n * <zh/> [鱼骨图布局](https://en.wikipedia.org/wiki/Ishikawa_diagram)是一种专门用于表示层次结构数据的图形布局方式。它通过模拟鱼骨的形状，将数据节点按照层次结构排列，使得数据的层次关系更加清晰直观。鱼骨图布局特别适用于需要展示因果关系、层次结构或分类信息的数据集。\n *\n * <en/> [Fishbone layout](https://en.wikipedia.org/wiki/Ishikawa_diagram) is a graphical layout method specifically designed to represent hierarchical data. By simulating the shape of a fishbone, it arranges data nodes according to their hierarchical structure, making the hierarchical relationships of the data clearer and more intuitive. The fishbone diagram layout is particularly suitable for datasets that need to display causal relationships, hierarchical structures, or classification information.\n */\nexport class FishboneLayout extends BaseLayout {\n    constructor() {\n        super(...arguments);\n        this.id = 'fishbone';\n    }\n    getRoot() {\n        const roots = this.context.model.getRootsData();\n        if (isEmpty(roots) || roots.length > 2)\n            return;\n        return roots[0];\n    }\n    formatSize(nodeSize) {\n        const nodeSizeFunc = typeof nodeSize === 'function' ? nodeSize : () => nodeSize;\n        return (node) => parseSize(nodeSizeFunc(node));\n    }\n    doLayout(root, options) {\n        const { hGap, getRibSep, vGap, nodeSize, height } = options;\n        const { model } = this.context;\n        const getSize = this.formatSize(nodeSize);\n        let ribX = getSize(root)[0] + getRibSep(root);\n        const getHorizontalOffset = (node, result = 0) => {\n            var _a;\n            result += hGap * ((node.children || []).length + 1);\n            (_a = node.children) === null || _a === void 0 ? void 0 : _a.forEach((childId) => {\n                var _a;\n                const child = model.getNodeLikeDatum(childId);\n                (_a = child.children) === null || _a === void 0 ? void 0 : _a.forEach((grandChildId) => {\n                    const grandChild = model.getNodeLikeDatum(grandChildId);\n                    result = getHorizontalOffset(grandChild, result);\n                });\n            });\n            return result;\n        };\n        const getAuxiliaryPoint = (node) => {\n            if (node.depth === 1)\n                return ribX;\n            const parent = model.getParentData(node.id, 'tree');\n            if (isAtEvenDepth(node)) {\n                const ancestor = model.getParentData(parent.id, 'tree');\n                const deltaY = calculateY(node) - calculateY(ancestor);\n                return getAuxiliaryPoint(parent) + (deltaY * hGap) / vGap;\n            }\n            else {\n                const nodeIndex = (parent.children || []).indexOf(node.id);\n                const followingSiblingsIncludeSelf = model.getNodeData((parent.children || []).slice(nodeIndex));\n                return (calculateX(parent) -\n                    followingSiblingsIncludeSelf.reduce((acc, sibling) => acc + getHorizontalOffset(sibling), 0) -\n                    getSize(parent)[0] / 2);\n            }\n        };\n        const calculateX = memoize((node) => {\n            if (isRoot(node))\n                return getSize(node)[0] / 2;\n            const parent = model.getParentData(node.id, 'tree');\n            if (isAtEvenDepth(node)) {\n                return getAuxiliaryPoint(node) + getHorizontalOffset(node) + getSize(node)[0] / 2;\n            }\n            else {\n                const deltaY = calculateY(node) - calculateY(parent);\n                const ratio = hGap / vGap;\n                return getAuxiliaryPoint(node) + deltaY * ratio;\n            }\n        }, (node) => node.id);\n        const getParentY = (nodeId) => calculateY(model.getParentData(nodeId, 'tree'));\n        const calculateY = memoize((node) => {\n            if (isRoot(node))\n                return height / 2;\n            if (!isAtEvenDepth(node)) {\n                // If the node has no children, calculate Y based on the parent\n                if (isEmpty(node.children))\n                    return getParentY(node.id) + vGap;\n                // If the last child has no children, calculate Y based on the last child\n                const lastChild = model.getNodeLikeDatum(node.children.slice(-1)[0]);\n                if (isEmpty(lastChild.children))\n                    return calculateY(lastChild) + vGap;\n                // If the last child has children, calculate Y based on the last descendant of the last child\n                const lastDescendant = model.getDescendantsData(node.id).slice(-1)[0];\n                return (isAtEvenDepth(lastDescendant) ? getParentY(lastDescendant.id) : calculateY(lastDescendant)) + vGap;\n            }\n            else {\n                // depth > 0 && isAtEvenDepth(node)\n                const parent = model.getParentData(node.id, 'tree');\n                const nodeIndex = parent.children.indexOf(node.id);\n                // If the node is the first sibling, return Y based on parent\n                if (nodeIndex === 0)\n                    return getParentY(parent.id) + vGap;\n                // If the previous sibling has no children, calculate Y based on the previous sibling\n                const prevSibling = model.getNodeLikeDatum(parent.children[nodeIndex - 1]);\n                if (isEmpty(prevSibling.children))\n                    return calculateY(prevSibling) + vGap;\n                // If the previous sibling has children, calculate Y based on the last descendant of the previous sibling\n                const descendants = model.getDescendantsData(prevSibling.id);\n                return (Math.max(...descendants.map((descendant) => isAtEvenDepth(descendant) ? getParentY(descendant.id) : calculateY(descendant))) + vGap);\n            }\n        }, (node) => node.id);\n        let tmpRibX = 0;\n        const result = { nodes: [], edges: [] };\n        const layout = (node) => {\n            var _a;\n            (_a = node.children) === null || _a === void 0 ? void 0 : _a.forEach((childId) => layout(model.getNodeLikeDatum(childId)));\n            const y = calculateY(node);\n            const x = calculateX(node);\n            result.nodes.push({ id: node.id, x, y });\n            if (isRoot(node))\n                return;\n            const edge = model.getRelatedEdgesData(node.id, 'in')[0];\n            const controlPoint = [getAuxiliaryPoint(node), isAtEvenDepth(node) ? y : getParentY(node.id)];\n            result.edges.push({ id: idOf(edge), controlPoints: [controlPoint], relatedNodeId: node.id });\n            tmpRibX = Math.max(tmpRibX, x + getRibSep(node));\n            if (node.depth === 1)\n                ribX = tmpRibX;\n        };\n        layout(root);\n        return result;\n    }\n    placeAlterative(result, root) {\n        const oddIndexedRibs = (root.children || []).filter((_, index) => index % 2 !== 0);\n        if (oddIndexedRibs.length === 0)\n            return result;\n        const { model } = this.context;\n        const rootY = result.nodes.find((node) => node.id === root.id).y;\n        const shouldFlip = (nodeId) => {\n            const ancestors = model.getAncestorsData(nodeId, 'tree');\n            if (isEmpty(ancestors))\n                return false;\n            const ribId = ancestors.length === 1 ? nodeId : ancestors[ancestors.length - 2].id;\n            return oddIndexedRibs.includes(ribId);\n        };\n        result.nodes.forEach((node) => {\n            if (shouldFlip(node.id))\n                node.y = 2 * rootY - node.y;\n        });\n        result.edges.forEach((edge) => {\n            if (shouldFlip(edge.relatedNodeId)) {\n                edge.controlPoints = edge.controlPoints.map((point) => [point[0], 2 * rootY - point[1]]);\n            }\n        });\n    }\n    rightToLeft(result, options) {\n        result.nodes.forEach((node) => (node.x = options.width - node.x));\n        result.edges.forEach((edge) => {\n            edge.controlPoints = edge.controlPoints.map((point) => [options.width - point[0], point[1]]);\n        });\n        return result;\n    }\n    execute(data, propOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const options = Object.assign(Object.assign(Object.assign({}, FishboneLayout.defaultOptions), this.options), propOptions);\n            const { direction, nodeSize } = options;\n            const root = this.getRoot();\n            if (!root)\n                return data;\n            const getSize = this.formatSize(nodeSize);\n            options.vGap || (options.vGap = Math.max(...(data.nodes || []).map((node) => getSize(node)[1])));\n            options.hGap || (options.hGap = Math.max(...(data.nodes || []).map((node) => getSize(node)[0])));\n            let result = this.doLayout(root, options);\n            this.placeAlterative(result, root);\n            if (direction === 'RL') {\n                result = this.rightToLeft(result, options);\n            }\n            const { model } = this.context;\n            const nodes = [];\n            const edges = [];\n            result.nodes.forEach((node) => {\n                const { id, x, y } = node;\n                const nodeData = model.getNodeLikeDatum(id);\n                nodes.push(assignElementStyle(nodeData, { x, y }));\n            });\n            result.edges.forEach((edge) => {\n                const { id, controlPoints } = edge;\n                const edgeData = model.getEdgeDatum(id);\n                edges.push(assignElementStyle(edgeData, { controlPoints }));\n            });\n            return { nodes, edges };\n        });\n    }\n}\nFishboneLayout.defaultOptions = {\n    direction: 'RL',\n    getRibSep: () => 60,\n};\nconst assignElementStyle = (element, style) => {\n    return Object.assign(Object.assign({}, element), { style: Object.assign(Object.assign({}, (element.style || {})), style) });\n};\nconst isRoot = (node) => node.depth === 0;\nconst isAtEvenDepth = (node) => (node.depth || (node.depth = 0)) % 2 === 0;\n//# sourceMappingURL=fishbone.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { parsePadding } from '../utils/padding';\nimport { parseSize } from '../utils/size';\nimport { BaseLayout } from './base-layout';\n/**\n * <zh/> 蛇形布局\n *\n * <en/> Snake layout\n * @remarks\n * <zh/> 蛇形布局（Snake Layout）是一种特殊的图形布局方式，能够在较小的空间内更有效地展示长链结构。需要注意的是，其图数据需要确保节点按照从源节点到汇节点的顺序进行线性排列，形成一条明确的路径。\n *\n * <zh/> 节点按 S 字型排列，第一个节点位于第一行的起始位置，接下来的节点在第一行向右排列，直到行末尾。到达行末尾后，下一行的节点从右向左反向排列。这个过程重复进行，直到所有节点排列完毕。\n *\n * <en/> The Snake layout is a special way of graph layout that can more effectively display long chain structures in a smaller space. Note that the graph data needs to ensure that the nodes are linearly arranged in the order from the source node to the sink node to form a clear path.\n *\n * <en/> The nodes are arranged in an S-shaped pattern, with the first node at the beginning of the first row, and the following nodes arranged to the right until the end of the row. After reaching the end of the row, the nodes in the next row are arranged in reverse from right to left. This process is repeated until all nodes are arranged.\n */\nexport class SnakeLayout extends BaseLayout {\n    constructor() {\n        super(...arguments);\n        this.id = 'snake';\n    }\n    formatSize(nodes, size) {\n        const sizeFn = typeof size === 'function' ? size : (() => size);\n        return nodes.reduce((acc, node) => {\n            const [w, h] = parseSize(sizeFn(node)) || [0, 0];\n            return [Math.max(acc[0], w), Math.max(acc[1], h)];\n        }, [0, 0]);\n    }\n    /**\n     * Validates the graph data to ensure it meets the requirements for linear arrangement.\n     * @param data - Graph data\n     * @returns false if the graph is not connected, has more than one source or sink node, or contains cycles.\n     */\n    validate(data) {\n        const { nodes = [], edges = [] } = data;\n        const inDegree = {};\n        const outDegree = {};\n        const adjList = {};\n        nodes.forEach((node) => {\n            inDegree[node.id] = 0;\n            outDegree[node.id] = 0;\n            adjList[node.id] = [];\n        });\n        edges.forEach((edge) => {\n            inDegree[edge.target]++;\n            outDegree[edge.source]++;\n            adjList[edge.source].push(edge.target);\n        });\n        // 检查图是否连通\n        // Check if the graph is connected\n        const visited = new Set();\n        const dfs = (nodeId) => {\n            if (visited.has(nodeId))\n                return;\n            visited.add(nodeId);\n            adjList[nodeId].forEach(dfs);\n        };\n        dfs(nodes[0].id);\n        if (visited.size !== nodes.length)\n            return false;\n        // 检查是否有且仅有一个源节点和一个汇节点\n        // Check if there is exactly one source node and one sink node\n        const sourceNodes = nodes.filter((node) => inDegree[node.id] === 0);\n        const sinkNodes = nodes.filter((node) => outDegree[node.id] === 0);\n        if (sourceNodes.length !== 1 || sinkNodes.length !== 1)\n            return false;\n        // 检查中间节点是否只有一个前驱和一个后继\n        // Check if the middle nodes have only one predecessor and one successor\n        const middleNodes = nodes.filter((node) => inDegree[node.id] === 1 && outDegree[node.id] === 1);\n        if (middleNodes.length !== nodes.length - 2)\n            return false;\n        return true;\n    }\n    execute(model, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!this.validate(model))\n                return model;\n            const { nodeSize: propNodeSize, padding: propPadding, sortBy, cols, colGap: propColSep, rowGap: propRowSep, clockwise, width, height, } = Object.assign({}, SnakeLayout.defaultOptions, this.options, options);\n            const [top, right, bottom, left] = parsePadding(propPadding);\n            const nodeSize = this.formatSize(model.nodes || [], propNodeSize);\n            const rows = Math.ceil((model.nodes || []).length / cols);\n            let colSep = propColSep ? propColSep : (width - left - right - cols * nodeSize[0]) / (cols - 1);\n            let rowSep = propRowSep ? propRowSep : (height - top - bottom - rows * nodeSize[1]) / (rows - 1);\n            if (rowSep === Infinity || rowSep < 0)\n                rowSep = 0;\n            if (colSep === Infinity || colSep < 0)\n                colSep = 0;\n            const sortedNodes = sortBy ? (_a = model.nodes) === null || _a === void 0 ? void 0 : _a.sort(sortBy) : topologicalSort(model);\n            const nodes = (sortedNodes || []).map((node, index) => {\n                const rowIndex = Math.floor(index / cols);\n                const colIndex = index % cols;\n                const actualColIndex = clockwise\n                    ? rowIndex % 2 === 0\n                        ? colIndex\n                        : cols - 1 - colIndex\n                    : rowIndex % 2 === 0\n                        ? cols - 1 - colIndex\n                        : colIndex;\n                const x = left + actualColIndex * (nodeSize[0] + colSep) + nodeSize[0] / 2;\n                const y = top + rowIndex * (nodeSize[1] + rowSep) + nodeSize[1] / 2;\n                return {\n                    id: node.id,\n                    style: { x, y },\n                };\n            });\n            return { nodes };\n        });\n    }\n}\nSnakeLayout.defaultOptions = {\n    padding: 0,\n    cols: 5,\n    clockwise: true,\n};\n/**\n * Topological sorting. The nodes are sorted according to the order of the paths(from the start node to the end node).\n * @param data - Graph data\n * @returns Sorted nodes\n */\nfunction topologicalSort(data) {\n    const { nodes = [], edges = [] } = data;\n    const inDegree = {};\n    const adjList = {};\n    nodes.forEach((node) => {\n        inDegree[node.id] = 0;\n        adjList[node.id] = [];\n    });\n    edges.forEach((edge) => {\n        inDegree[edge.target]++;\n        adjList[edge.source].push(edge.target);\n    });\n    const queue = [];\n    const sortedNodes = [];\n    nodes.forEach((node) => {\n        if (inDegree[node.id] === 0) {\n            queue.push(node.id);\n        }\n    });\n    while (queue.length > 0) {\n        const nodeId = queue.shift();\n        const node = nodes.find((n) => n.id === nodeId);\n        sortedNodes.push(node);\n        adjList[nodeId].forEach((neighbor) => {\n            inDegree[neighbor]--;\n            if (inDegree[neighbor] === 0) {\n                queue.push(neighbor);\n            }\n        });\n    }\n    return sortedNodes;\n}\n//# sourceMappingURL=snake.js.map","import { BaseExtension } from '../registry/extension';\n/**\n * <zh/> 插件的基类\n *\n * <en/> Base class for plugins\n */\nexport class BasePlugin extends BaseExtension {\n}\n//# sourceMappingURL=base-plugin.js.map","/**\n * <zh/> 创建插件容器\n *\n * <en/> Create a plugin container\n * @param type - <zh/> 插件类型 | <en/> plugin type\n * @param cover - <zh/> 容器是否覆盖整个画布 | <en/> Whether the container covers the entire canvas\n * @param style - <zh/> 额外样式 | <en/> Additional style\n * @returns <zh/> 插件容器 | <en/> plugin container\n */\nexport function createPluginContainer(type, cover = true, style) {\n    const container = document.createElement('div');\n    container.setAttribute('class', `g6-${type}`);\n    Object.assign(container.style, {\n        position: 'absolute',\n        display: 'block',\n    });\n    if (cover) {\n        Object.assign(container.style, {\n            position: 'unset',\n            gridArea: '1 / 1 / 2 / 2',\n            inset: '0px',\n            height: '100%',\n            width: '100%',\n            overflow: 'hidden',\n            pointerEvents: 'none',\n        });\n    }\n    if (style)\n        Object.assign(container.style, style);\n    return container;\n}\n/**\n * <zh/> 创建 DOM 元素，如果存在则删除，再创建一个新的\n *\n * <en/> Create a DOM element, if exists, remove it and create a new one.\n * @param id - <zh/> id | <en/> id\n * @param tag - <zh/> 标签 | <en/> tag\n * @param style - <zh/> 样式 | <en/> style\n * @param innerHTML - <zh/> 内容 | <en/> innerHTML\n * @param container - <zh/> 容器 | <en/> container\n * @returns <zh/> 创建的 DOM 元素 | <en/> created DOM element\n */\nexport function insertDOM(id, tag = 'div', style = {}, innerHTML = '', container = document.body) {\n    const dom = document.getElementById(id);\n    if (dom)\n        dom.remove();\n    const div = document.createElement(tag);\n    div.innerHTML = innerHTML;\n    div.id = id;\n    Object.assign(div.style, style);\n    container.appendChild(div);\n    return div;\n}\n//# sourceMappingURL=dom.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { omit } from '@antv/util';\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginContainer } from '../utils/dom';\n/**\n * <zh/> 背景图\n *\n * <en/> Background image\n * @remarks\n * <zh/> 支持为图画布设置一个背景图片，让画布更有层次感、叙事性。\n *\n * <en/> Support setting a background image for the canvas to make the canvas more hierarchical and narrative.\n */\nexport class Background extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Background.defaultOptions, options));\n        this.$element = createPluginContainer('background');\n        const $container = this.context.canvas.getContainer();\n        $container.prepend(this.$element);\n        this.update(options);\n    }\n    /**\n     * <zh/> 更新背景图配置\n     *\n     * <en/> Update the background image configuration\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        const _super = Object.create(null, {\n            update: { get: () => super.update }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            _super.update.call(this, options);\n            // Set the background style.\n            Object.assign(this.$element.style, omit(this.options, ['key', 'type']));\n        });\n    }\n    /**\n     * <zh/> 销毁背景图\n     *\n     * <en/> Destroy the background image\n     * @internal\n     */\n    destroy() {\n        super.destroy();\n        // Remove the background dom.\n        this.$element.remove();\n    }\n}\nBackground.defaultOptions = {\n    transition: 'background 0.5s',\n    backgroundSize: 'cover',\n    zIndex: '-1', // aviod to cover the other plugin's dom, eg: grid-line.\n};\n//# sourceMappingURL=index.js.map","/**\n * bubblesets-js\n * https://github.com/upsetjs/bubblesets-js\n *\n * Copyright (c) 2021-2022 Samuel Gratzl <sam@sgratzl.com>\n */\n\nfunction linePtSegDistSq(lx1, ly1, lx2, ly2, x, y) {\n    const x1 = lx1;\n    const y1 = ly1;\n    const x2 = lx2 - x1;\n    const y2 = ly2 - y1;\n    let px = x - x1;\n    let py = y - y1;\n    let dotprod = px * x2 + py * y2;\n    let projlenSq = 0;\n    if (dotprod <= 0) {\n        projlenSq = 0;\n    }\n    else {\n        px = x2 - px;\n        py = y2 - py;\n        dotprod = px * x2 + py * y2;\n        if (dotprod <= 0) {\n            projlenSq = 0;\n        }\n        else {\n            projlenSq = (dotprod * dotprod) / (x2 * x2 + y2 * y2);\n        }\n    }\n    const lenSq = px * px + py * py - projlenSq;\n    if (lenSq < 0) {\n        return 0;\n    }\n    return lenSq;\n}\nfunction ptsDistanceSq(x1, y1, x2, y2) {\n    return (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n}\nfunction doublePointsEqual(x1, y1, x2, y2, delta) {\n    return ptsDistanceSq(x1, y1, x2, y2) < delta * delta;\n}\nfunction round(digits) {\n    if (!Number.isFinite(digits)) {\n        return (v) => v;\n    }\n    if (digits === 0) {\n        return Math.round;\n    }\n    const factor = Math.pow(10, digits);\n    return (v) => Math.round(v * factor) / factor;\n}\n\nfunction lineBoundingBox(line) {\n    const minX = Math.min(line.x1, line.x2);\n    const maxX = Math.max(line.x1, line.x2);\n    const minY = Math.min(line.y1, line.y2);\n    const maxY = Math.max(line.y1, line.y2);\n    return {\n        x: minX,\n        y: minY,\n        x2: maxX,\n        y2: maxY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nclass Line {\n    constructor(x1, y1, x2, y2) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n    }\n    equals(that) {\n        return this.x1 === that.x1 && this.y1 === that.y1 && this.x2 === that.x2 && this.y2 === that.y2;\n    }\n    draw(ctx) {\n        ctx.moveTo(this.x1, this.y1);\n        ctx.lineTo(this.x2, this.y2);\n    }\n    toString() {\n        return `Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`;\n    }\n    static from(l) {\n        return new Line(l.x1, l.y1, l.x2, l.y2);\n    }\n    cuts(px, py) {\n        if (this.y1 === this.y2) {\n            return false;\n        }\n        if ((py < this.y1 && py <= this.y2) || (py > this.y1 && py >= this.y2)) {\n            return false;\n        }\n        if (px > this.x1 && px >= this.x2) {\n            return false;\n        }\n        if (px < this.x1 && px <= this.x2) {\n            return true;\n        }\n        const cross = this.x1 + ((py - this.y1) * (this.x2 - this.x1)) / (this.y2 - this.y1);\n        return px <= cross;\n    }\n    distSquare(x, y) {\n        return linePtSegDistSq(this.x1, this.y1, this.x2, this.y2, x, y);\n    }\n    ptClose(x, y, r) {\n        if (this.x1 < this.x2) {\n            if (x < this.x1 - r || x > this.x2 + r) {\n                return false;\n            }\n        }\n        else {\n            if (x < this.x2 - r || x > this.x1 + r) {\n                return false;\n            }\n        }\n        if (this.y1 < this.y2) {\n            if (y < this.y1 - r || y > this.y2 + r) {\n                return false;\n            }\n        }\n        else {\n            if (y < this.y2 - r || y > this.y1 + r) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\nvar EState;\n(function (EState) {\n    EState[EState[\"POINT\"] = 1] = \"POINT\";\n    EState[EState[\"PARALLEL\"] = 2] = \"PARALLEL\";\n    EState[EState[\"COINCIDENT\"] = 3] = \"COINCIDENT\";\n    EState[EState[\"NONE\"] = 4] = \"NONE\";\n})(EState || (EState = {}));\nclass Intersection {\n    constructor(state, x = 0, y = 0) {\n        this.state = state;\n        this.x = x;\n        this.y = y;\n    }\n}\nfunction intersectLineLine(la, lb) {\n    const uaT = (lb.x2 - lb.x1) * (la.y1 - lb.y1) - (lb.y2 - lb.y1) * (la.x1 - lb.x1);\n    const ubT = (la.x2 - la.x1) * (la.y1 - lb.y1) - (la.y2 - la.y1) * (la.x1 - lb.x1);\n    const uB = (lb.y2 - lb.y1) * (la.x2 - la.x1) - (lb.x2 - lb.x1) * (la.y2 - la.y1);\n    if (uB) {\n        const ua = uaT / uB;\n        const ub = ubT / uB;\n        if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n            return new Intersection(EState.POINT, la.x1 + ua * (la.x2 - la.x1), la.y1 + ua * (la.y2 - la.y1));\n        }\n        return new Intersection(EState.NONE);\n    }\n    return new Intersection(uaT === 0 || ubT === 0 ? EState.COINCIDENT : EState.PARALLEL);\n}\nfunction fractionAlongLineA(la, lb) {\n    const uaT = (lb.x2 - lb.x1) * (la.y1 - lb.y1) - (lb.y2 - lb.y1) * (la.x1 - lb.x1);\n    const ubT = (la.x2 - la.x1) * (la.y1 - lb.y1) - (la.y2 - la.y1) * (la.x1 - lb.x1);\n    const uB = (lb.y2 - lb.y1) * (la.x2 - la.x1) - (lb.x2 - lb.x1) * (la.y2 - la.y1);\n    if (uB) {\n        const ua = uaT / uB;\n        const ub = ubT / uB;\n        if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n            return ua;\n        }\n    }\n    return Number.POSITIVE_INFINITY;\n}\nfunction hasFractionToLineCenter(bounds, line) {\n    function testLine(xa, ya, xb, yb) {\n        let testDistance = fractionAlongLineA(line, new Line(xa, ya, xb, yb));\n        testDistance = Math.abs(testDistance - 0.5);\n        if (testDistance >= 0 && testDistance <= 1) {\n            return 1;\n        }\n        return 0;\n    }\n    let countIntersections = testLine(bounds.x, bounds.y, bounds.x2, bounds.y);\n    countIntersections += testLine(bounds.x, bounds.y, bounds.x, bounds.y2);\n    if (countIntersections > 1) {\n        return true;\n    }\n    countIntersections += testLine(bounds.x, bounds.y2, bounds.x2, bounds.y2);\n    if (countIntersections > 1) {\n        return true;\n    }\n    countIntersections += testLine(bounds.x2, bounds.y, bounds.x2, bounds.y2);\n    return countIntersections > 0;\n}\nvar OutCode;\n(function (OutCode) {\n    OutCode[OutCode[\"LEFT\"] = 0] = \"LEFT\";\n    OutCode[OutCode[\"TOP\"] = 1] = \"TOP\";\n    OutCode[OutCode[\"RIGHT\"] = 2] = \"RIGHT\";\n    OutCode[OutCode[\"BOTTOM\"] = 3] = \"BOTTOM\";\n})(OutCode || (OutCode = {}));\nfunction outcode(bounds, px, py) {\n    const out = new Set();\n    if (bounds.width <= 0) {\n        out.add(OutCode.LEFT);\n        out.add(OutCode.RIGHT);\n    }\n    else if (px < bounds.x) {\n        out.add(OutCode.LEFT);\n    }\n    else if (px > bounds.x + bounds.width) {\n        out.add(OutCode.RIGHT);\n    }\n    if (bounds.height <= 0) {\n        out.add(OutCode.TOP);\n        out.add(OutCode.BOTTOM);\n    }\n    else if (py < bounds.y) {\n        out.add(OutCode.TOP);\n    }\n    else if (py > bounds.y + bounds.height) {\n        out.add(OutCode.BOTTOM);\n    }\n    return out;\n}\nfunction intersectsLine(bounds, line) {\n    let x1 = line.x1;\n    let y1 = line.y1;\n    const x2 = line.x2;\n    const y2 = line.y2;\n    const out2 = Array.from(outcode(bounds, x2, y2));\n    if (out2.length === 0) {\n        return true;\n    }\n    let out1 = outcode(bounds, x1, y1);\n    while (out1.size !== 0) {\n        for (const a of out2) {\n            if (out1.has(a)) {\n                return false;\n            }\n        }\n        if (out1.has(OutCode.RIGHT) || out1.has(OutCode.LEFT)) {\n            let x = bounds.x;\n            if (out1.has(OutCode.RIGHT)) {\n                x += bounds.width;\n            }\n            y1 = y1 + ((x - x1) * (y2 - y1)) / (x2 - x1);\n            x1 = x;\n        }\n        else {\n            let y = bounds.y;\n            if (out1.has(OutCode.BOTTOM)) {\n                y += bounds.height;\n            }\n            x1 = x1 + ((y - y1) * (x2 - x1)) / (y2 - y1);\n            y1 = y;\n        }\n        out1 = outcode(bounds, x1, y1);\n    }\n    return true;\n}\nfunction fractionToLineCenter(bounds, line) {\n    let minDistance = Number.POSITIVE_INFINITY;\n    let countIntersections = 0;\n    function testLine(xa, ya, xb, yb) {\n        let testDistance = fractionAlongLineA(line, new Line(xa, ya, xb, yb));\n        testDistance = Math.abs(testDistance - 0.5);\n        if (testDistance >= 0 && testDistance <= 1) {\n            countIntersections++;\n            if (testDistance < minDistance) {\n                minDistance = testDistance;\n            }\n        }\n    }\n    testLine(bounds.x, bounds.y, bounds.x2, bounds.y);\n    testLine(bounds.x, bounds.y, bounds.x, bounds.y2);\n    if (countIntersections > 1) {\n        return minDistance;\n    }\n    testLine(bounds.x, bounds.y2, bounds.x2, bounds.y2);\n    if (countIntersections > 1) {\n        return minDistance;\n    }\n    testLine(bounds.x2, bounds.y, bounds.x2, bounds.y2);\n    if (countIntersections === 0) {\n        return -1;\n    }\n    return minDistance;\n}\nfunction testIntersection(line, bounds) {\n    let count = 0;\n    const top = intersectLineLine(line, new Line(bounds.x, bounds.y, bounds.x2, bounds.y));\n    count += top.state === EState.POINT ? 1 : 0;\n    const left = intersectLineLine(line, new Line(bounds.x, bounds.y, bounds.x, bounds.y2));\n    count += left.state === EState.POINT ? 1 : 0;\n    const bottom = intersectLineLine(line, new Line(bounds.x, bounds.y2, bounds.x2, bounds.y2));\n    count += bottom.state === EState.POINT ? 1 : 0;\n    const right = intersectLineLine(line, new Line(bounds.x2, bounds.y, bounds.x2, bounds.y2));\n    count += right.state === EState.POINT ? 1 : 0;\n    return { top, left, bottom, right, count };\n}\n\nclass Rectangle {\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    get x2() {\n        return this.x + this.width;\n    }\n    get y2() {\n        return this.y + this.height;\n    }\n    get cx() {\n        return this.x + this.width / 2;\n    }\n    get cy() {\n        return this.y + this.height / 2;\n    }\n    get radius() {\n        return Math.max(this.width, this.height) / 2;\n    }\n    static from(r) {\n        return new Rectangle(r.x, r.y, r.width, r.height);\n    }\n    equals(that) {\n        return this.x === that.x && this.y === that.y && this.width === that.width && this.height === that.height;\n    }\n    clone() {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    }\n    add(that) {\n        const x = Math.min(this.x, that.x);\n        const y = Math.min(this.y, that.y);\n        const x2 = Math.max(this.x2, that.x + that.width);\n        const y2 = Math.max(this.y2, that.y + that.height);\n        this.x = x;\n        this.y = y;\n        this.width = x2 - x;\n        this.height = y2 - y;\n    }\n    addPoint(p) {\n        const x = Math.min(this.x, p.x);\n        const y = Math.min(this.y, p.y);\n        const x2 = Math.max(this.x2, p.x);\n        const y2 = Math.max(this.y2, p.y);\n        this.x = x;\n        this.y = y;\n        this.width = x2 - x;\n        this.height = y2 - y;\n    }\n    toString() {\n        return `Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`;\n    }\n    draw(ctx) {\n        ctx.rect(this.x, this.y, this.width, this.height);\n    }\n    containsPt(px, py) {\n        return px >= this.x && px <= this.x2 && py >= this.y && py <= this.y2;\n    }\n    get area() {\n        return this.width * this.height;\n    }\n    intersects(that) {\n        if (this.area <= 0 || that.width <= 0 || that.height <= 0) {\n            return false;\n        }\n        return that.x + that.width > this.x && that.y + that.height > this.y && that.x < this.x2 && that.y < this.y2;\n    }\n    distSquare(tempX, tempY) {\n        if (this.containsPt(tempX, tempY)) {\n            return 0;\n        }\n        const code = outcode(this, tempX, tempY);\n        if (code.has(OutCode.TOP)) {\n            if (code.has(OutCode.LEFT)) {\n                return ptsDistanceSq(tempX, tempY, this.x, this.y);\n            }\n            if (code.has(OutCode.RIGHT)) {\n                return ptsDistanceSq(tempX, tempY, this.x2, this.y);\n            }\n            return (this.y - tempY) * (this.y - tempY);\n        }\n        if (code.has(OutCode.BOTTOM)) {\n            if (code.has(OutCode.LEFT)) {\n                return ptsDistanceSq(tempX, tempY, this.x, this.y2);\n            }\n            if (code.has(OutCode.RIGHT)) {\n                return ptsDistanceSq(tempX, tempY, this.x2, this.y2);\n            }\n            return (tempY - this.y2) * (tempY - this.y2);\n        }\n        if (code.has(OutCode.LEFT)) {\n            return (this.x - tempX) * (this.x - tempX);\n        }\n        if (code.has(OutCode.RIGHT)) {\n            return (tempX - this.x2) * (tempX - this.x2);\n        }\n        return 0;\n    }\n}\nfunction boundingBox(path) {\n    if (path.length === 0) {\n        return null;\n    }\n    const first = path[0];\n    const bb = new Rectangle(first.x, first.y, 0, 0);\n    for (const point of path) {\n        bb.addPoint(point);\n    }\n    return bb;\n}\n\nclass Circle {\n    constructor(cx, cy, radius) {\n        this.cx = cx;\n        this.cy = cy;\n        this.radius = radius;\n    }\n    get x() {\n        return this.cx - this.radius;\n    }\n    get x2() {\n        return this.cx + this.radius;\n    }\n    get width() {\n        return this.radius * 2;\n    }\n    get y() {\n        return this.cy - this.radius;\n    }\n    get y2() {\n        return this.cy + this.radius;\n    }\n    get height() {\n        return this.radius * 2;\n    }\n    static from(r) {\n        return new Circle(r.cx, r.cy, r.radius);\n    }\n    containsPt(x, y) {\n        return ptsDistanceSq(this.cx, this.cy, x, y) < this.radius * this.radius;\n    }\n    distSquare(tempX, tempY) {\n        const dist = ptsDistanceSq(this.cx, this.cy, tempX, tempY);\n        if (dist < this.radius * this.radius) {\n            return 0;\n        }\n        const offset = Math.sqrt(dist) - this.radius;\n        return offset * offset;\n    }\n    draw(ctx) {\n        ctx.ellipse(this.cx, this.cy, this.radius, this.radius, 0, 0, Math.PI * 2);\n    }\n}\n\nclass Area {\n    constructor(pixelGroup, i = 0, j = 0, pixelX = 0, pixelY = 0, width = 10, height = 10, pixels = new Float32Array(Math.max(0, width * height)).fill(0)) {\n        this.pixelGroup = pixelGroup;\n        this.i = i;\n        this.j = j;\n        this.pixelX = pixelX;\n        this.pixelY = pixelY;\n        this.width = width;\n        this.height = height;\n        this.area = pixels;\n    }\n    createSub(rect, pixelPos) {\n        return new Area(this.pixelGroup, rect.x, rect.y, pixelPos.x, pixelPos.y, rect.width, rect.height);\n    }\n    static fromPixelRegion(pixelRect, pixelGroup) {\n        return new Area(pixelGroup, 0, 0, pixelRect.x, pixelRect.y, Math.ceil(pixelRect.width / pixelGroup), Math.ceil(pixelRect.height / pixelGroup));\n    }\n    copy(sub, pixelPoint) {\n        return new Area(this.pixelGroup, this.scaleX(pixelPoint.x), this.scaleY(pixelPoint.y), pixelPoint.x, pixelPoint.y, sub.width, sub.height, sub.area);\n    }\n    boundX(pos) {\n        if (pos < this.i) {\n            return this.i;\n        }\n        if (pos >= this.width) {\n            return this.width - 1;\n        }\n        return pos;\n    }\n    boundY(pos) {\n        if (pos < this.j) {\n            return this.j;\n        }\n        if (pos >= this.height) {\n            return this.height - 1;\n        }\n        return pos;\n    }\n    scaleX(pixel) {\n        return this.boundX(Math.floor((pixel - this.pixelX) / this.pixelGroup));\n    }\n    scaleY(pixel) {\n        return this.boundY(Math.floor((pixel - this.pixelY) / this.pixelGroup));\n    }\n    scale(pixelRect) {\n        const x = this.scaleX(pixelRect.x);\n        const y = this.scaleY(pixelRect.y);\n        const x2 = this.boundX(Math.ceil((pixelRect.x + pixelRect.width - this.pixelX) / this.pixelGroup));\n        const y2 = this.boundY(Math.ceil((pixelRect.y + pixelRect.height - this.pixelY) / this.pixelGroup));\n        const width = x2 - x;\n        const height = y2 - y;\n        return new Rectangle(x, y, width, height);\n    }\n    invertScaleX(v) {\n        return Math.round(v * this.pixelGroup + this.pixelX);\n    }\n    invertScaleY(v) {\n        return Math.round(v * this.pixelGroup + this.pixelY);\n    }\n    addPadding(rect, pixelPadding) {\n        const padding = Math.ceil(pixelPadding / this.pixelGroup);\n        const x = this.boundX(rect.x - padding);\n        const y = this.boundY(rect.y - padding);\n        const x2 = this.boundX(rect.x2 + padding);\n        const y2 = this.boundY(rect.y2 + padding);\n        const width = x2 - x;\n        const height = y2 - y;\n        return new Rectangle(x, y, width, height);\n    }\n    get(i, j) {\n        if (i < 0 || j < 0 || i >= this.width || j >= this.height) {\n            return Number.NaN;\n        }\n        return this.area[i + j * this.width];\n    }\n    inc(i, j, v) {\n        if (i < 0 || j < 0 || i >= this.width || j >= this.height) {\n            return;\n        }\n        this.area[i + j * this.width] += v;\n    }\n    set(i, j, v) {\n        if (i < 0 || j < 0 || i >= this.width || j >= this.height) {\n            return;\n        }\n        this.area[i + j * this.width] = v;\n    }\n    incArea(sub, factor) {\n        if (sub.width <= 0 || sub.height <= 0 || factor === 0) {\n            return;\n        }\n        const w = this.width;\n        const aw = sub.width;\n        const i1 = Math.max(0, sub.i);\n        const j1 = Math.max(0, sub.j);\n        const i2 = Math.min(sub.i + sub.width, w);\n        const j2 = Math.min(sub.j + sub.height, this.height);\n        if (j2 <= 0 || i2 <= 0 || i1 >= w || j2 >= this.height) {\n            return;\n        }\n        for (let j = j1; j < j2; j++) {\n            const subRow = (j - sub.j) * aw;\n            const row = j * w;\n            for (let i = i1; i < i2; i++) {\n                const v = sub.area[i - sub.i + subRow];\n                if (v === 0) {\n                    continue;\n                }\n                this.area[i + row] += factor * v;\n            }\n        }\n    }\n    fill(value) {\n        this.area.fill(value);\n    }\n    fillArea(rect, value) {\n        const offset = rect.x + rect.y * this.width;\n        for (let j = 0; j < rect.height; j++) {\n            const pos = offset + j * this.width;\n            this.area.fill(value, pos, pos + rect.width);\n        }\n    }\n    fillHorizontalLine(i, j, width, value) {\n        const offset = i + j * this.width;\n        this.area.fill(value, offset, offset + width);\n    }\n    fillVerticalLine(i, j, height, value) {\n        const offset = i + j * this.width;\n        for (let k = 0; k < height; k++) {\n            this.area[offset + k * this.width] = value;\n        }\n    }\n    clear() {\n        this.area.fill(0);\n    }\n    toString() {\n        let r = '';\n        for (let j = 0; j < this.height; j++) {\n            const row = j * this.width;\n            for (let i = 0; i < this.width; i++) {\n                const v = this.area[row + i];\n                r += v.toFixed(1).padStart(6);\n                r += ' ';\n            }\n            r += '\\n';\n        }\n        return r;\n    }\n    draw(ctx, offset = true) {\n        if (this.width <= 0 || this.height <= 0) {\n            return;\n        }\n        ctx.save();\n        if (offset) {\n            ctx.translate(this.pixelX, this.pixelY);\n        }\n        const min = this.area.reduce((acc, v) => Math.min(acc, v), Number.POSITIVE_INFINITY);\n        const max = this.area.reduce((acc, v) => Math.max(acc, v), Number.NEGATIVE_INFINITY);\n        const scale = (v) => (v - min) / (max - min);\n        ctx.scale(this.pixelGroup, this.pixelGroup);\n        for (let i = 0; i < this.width; i++) {\n            for (let j = 0; j < this.height; j++) {\n                const v = this.area[i + j * this.width];\n                ctx.fillStyle = `rgba(0, 0, 0, ${scale(v)})`;\n                ctx.fillRect(i, j, 1, 1);\n            }\n        }\n        ctx.restore();\n    }\n    drawThreshold(ctx, threshold, offset = true) {\n        if (this.width <= 0 || this.height <= 0) {\n            return;\n        }\n        ctx.save();\n        if (offset) {\n            ctx.translate(this.pixelX, this.pixelY);\n        }\n        ctx.scale(this.pixelGroup, this.pixelGroup);\n        for (let i = 0; i < this.width; i++) {\n            for (let j = 0; j < this.height; j++) {\n                const v = this.area[i + j * this.width];\n                ctx.fillStyle = v > threshold ? 'black' : 'white';\n                ctx.fillRect(i, j, 1, 1);\n            }\n        }\n        ctx.restore();\n    }\n}\n\nfunction addPadding(rect, padding) {\n    const map = (r) => ({\n        x: r.x - padding,\n        y: r.y - padding,\n        width: r.width + 2 * padding,\n        height: r.height + 2 * padding,\n    });\n    if (Array.isArray(rect)) {\n        return rect.map(map);\n    }\n    return map(rect);\n}\n\nfunction createLineInfluenceArea(line, potentialArea, padding) {\n    return createGenericInfluenceArea(Object.assign(lineBoundingBox(line), {\n        distSquare: (x, y) => linePtSegDistSq(line.x1, line.y1, line.x2, line.y2, x, y),\n    }), potentialArea, padding);\n}\nfunction createGenericInfluenceArea(shape, potentialArea, padding) {\n    const lr = addPadding(shape, padding);\n    const scaled = potentialArea.scale(lr);\n    const area = potentialArea.createSub(scaled, lr);\n    sample(area, potentialArea, padding, (x, y) => shape.distSquare(x, y));\n    return area;\n}\nfunction sample(area, potentialArea, padding, distanceFunction) {\n    const padding2 = padding * padding;\n    for (let y = 0; y < area.height; y++) {\n        for (let x = 0; x < area.width; x++) {\n            const tempX = potentialArea.invertScaleX(area.i + x);\n            const tempY = potentialArea.invertScaleY(area.j + y);\n            const distanceSq = distanceFunction(tempX, tempY);\n            if (distanceSq === 0) {\n                area.set(x, y, padding2);\n                continue;\n            }\n            if (distanceSq < padding2) {\n                const dr = padding - Math.sqrt(distanceSq);\n                area.set(x, y, dr * dr);\n            }\n        }\n    }\n    return area;\n}\nfunction createRectangleInfluenceArea(rect, potentialArea, padding) {\n    const scaled = potentialArea.scale(rect);\n    const padded = potentialArea.addPadding(scaled, padding);\n    const area = potentialArea.createSub(padded, { x: rect.x - padding, y: rect.y - padding });\n    const paddingLeft = scaled.x - padded.x;\n    const paddingTop = scaled.y - padded.y;\n    const paddingRight = padded.x2 - scaled.x2;\n    const paddingBottom = padded.y2 - scaled.y2;\n    const innerWidth = padded.width - paddingLeft - paddingRight;\n    const innerHeight = padded.height - paddingTop - paddingBottom;\n    const padding2 = padding * padding;\n    area.fillArea({\n        x: paddingLeft,\n        y: paddingTop,\n        width: innerWidth + 1,\n        height: innerHeight + 1,\n    }, padding2);\n    const straightDistances = [0];\n    const maxPadding = Math.max(paddingTop, paddingLeft, paddingRight, paddingBottom);\n    {\n        const tempX = potentialArea.invertScaleX(scaled.x + scaled.width / 2);\n        for (let i = 1; i < maxPadding; i++) {\n            const tempY = potentialArea.invertScaleY(scaled.y - i);\n            const distanceSq = rect.distSquare(tempX, tempY);\n            if (distanceSq < padding2) {\n                const dr = padding - Math.sqrt(distanceSq);\n                straightDistances.push(dr * dr);\n            }\n            else {\n                break;\n            }\n        }\n    }\n    const cornerDistances = [];\n    const maxHorizontalPadding = Math.max(paddingLeft, paddingRight);\n    const maxVerticalPadding = Math.max(paddingTop, paddingRight);\n    for (let i = 1; i < maxHorizontalPadding; i++) {\n        const tempX = potentialArea.invertScaleX(scaled.x - i);\n        const row = [];\n        for (let j = 1; j < maxVerticalPadding; j++) {\n            const tempY = potentialArea.invertScaleY(scaled.y - j);\n            const distanceSq = rect.distSquare(tempX, tempY);\n            if (distanceSq < padding2) {\n                const dr = padding - Math.sqrt(distanceSq);\n                row.push(dr * dr);\n            }\n            else {\n                row.push(0);\n            }\n        }\n        cornerDistances.push(row);\n    }\n    for (let y = 1; y < Math.min(paddingTop, straightDistances.length); y++) {\n        const value = straightDistances[y];\n        area.fillHorizontalLine(paddingLeft, paddingTop - y, innerWidth + 1, value);\n    }\n    for (let y = 1; y < Math.min(paddingBottom, straightDistances.length); y++) {\n        const value = straightDistances[y];\n        area.fillHorizontalLine(paddingLeft, paddingTop + innerHeight + y, innerWidth + 1, value);\n    }\n    for (let x = 1; x < Math.min(paddingLeft, straightDistances.length); x++) {\n        const value = straightDistances[x];\n        area.fillVerticalLine(paddingLeft - x, paddingTop, innerHeight + 1, value);\n    }\n    for (let x = 1; x < Math.min(paddingBottom, straightDistances.length); x++) {\n        const value = straightDistances[x];\n        area.fillVerticalLine(paddingLeft + innerWidth + x, paddingTop, innerHeight + 1, value);\n    }\n    for (let i = 1; i < paddingLeft; i++) {\n        const row = cornerDistances[i - 1];\n        const ii = paddingLeft - i;\n        for (let j = 1; j < paddingTop; j++) {\n            area.set(ii, paddingTop - j, row[j - 1]);\n        }\n        for (let j = 1; j < paddingBottom; j++) {\n            area.set(ii, paddingTop + innerHeight + j, row[j - 1]);\n        }\n    }\n    for (let i = 1; i < paddingRight; i++) {\n        const row = cornerDistances[i - 1];\n        const ii = paddingLeft + innerWidth + i;\n        for (let j = 1; j < paddingTop; j++) {\n            area.set(ii, paddingTop - j, row[j - 1]);\n        }\n        for (let j = 1; j < paddingBottom; j++) {\n            area.set(ii, paddingTop + innerHeight + j, row[j - 1]);\n        }\n    }\n    return area;\n}\n\nfunction rect(x, y, width, height) {\n    return { x, y, width, height };\n}\nfunction circle(cx, cy, radius) {\n    return { cx, cy, radius };\n}\nfunction line(x1, y1, x2, y2) {\n    return { x1, y1, x2, y2 };\n}\nfunction point(x, y) {\n    return { x, y };\n}\n\nfunction calculateVirtualEdges(items, nonMembers, maxRoutingIterations, morphBuffer) {\n    if (items.length === 0) {\n        return [];\n    }\n    const sorted = sortByDistanceToCentroid(items);\n    return sorted\n        .map((d, i) => {\n        const visited = sorted.slice(0, i);\n        return connectItem(nonMembers, d, visited, maxRoutingIterations, morphBuffer);\n    })\n        .flat();\n}\nfunction connectItem(nonMembers, item, visited, maxRoutingIterations, morphBuffer) {\n    const itemCenter = point(item.cx, item.cy);\n    const closestNeighbor = calculateClosestNeighbor(itemCenter, visited, nonMembers);\n    if (closestNeighbor == null) {\n        return [];\n    }\n    const directLine = new Line(itemCenter.x, itemCenter.y, closestNeighbor.cx, closestNeighbor.cy);\n    const scannedLines = computeRoute(directLine, nonMembers, maxRoutingIterations, morphBuffer);\n    return mergeLines(scannedLines, nonMembers);\n}\nfunction computeRoute(directLine, nonMembers, maxRoutingIterations, morphBuffer) {\n    const scannedLines = [];\n    const linesToCheck = [];\n    linesToCheck.push(directLine);\n    let hasIntersection = true;\n    for (let iterations = 0; iterations < maxRoutingIterations && hasIntersection; iterations++) {\n        hasIntersection = false;\n        while (!hasIntersection && linesToCheck.length > 0) {\n            const line = linesToCheck.pop();\n            const closestItem = getCenterItem(nonMembers, line);\n            const intersections = closestItem ? testIntersection(line, closestItem) : null;\n            if (!closestItem || !intersections || intersections.count !== 2) {\n                if (!hasIntersection) {\n                    scannedLines.push(line);\n                }\n                continue;\n            }\n            let tempMorphBuffer = morphBuffer;\n            let movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, true);\n            let foundFirst = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n            let pointInside = isPointInRectangles(movePoint, nonMembers);\n            while (!foundFirst && pointInside && tempMorphBuffer >= 1) {\n                tempMorphBuffer /= 1.5;\n                movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, true);\n                foundFirst = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n                pointInside = isPointInRectangles(movePoint, nonMembers);\n            }\n            if (movePoint && !foundFirst && !pointInside) {\n                linesToCheck.push(new Line(line.x1, line.y1, movePoint.x, movePoint.y));\n                linesToCheck.push(new Line(movePoint.x, movePoint.y, line.x2, line.y2));\n                hasIntersection = true;\n            }\n            if (hasIntersection) {\n                continue;\n            }\n            tempMorphBuffer = morphBuffer;\n            movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, false);\n            let foundSecond = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n            pointInside = isPointInRectangles(movePoint, nonMembers);\n            while (!foundSecond && pointInside && tempMorphBuffer >= 1) {\n                tempMorphBuffer /= 1.5;\n                movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, false);\n                foundSecond = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n                pointInside = isPointInRectangles(movePoint, nonMembers);\n            }\n            if (movePoint && !foundSecond) {\n                linesToCheck.push(new Line(line.x1, line.y1, movePoint.x, movePoint.y));\n                linesToCheck.push(new Line(movePoint.x, movePoint.y, line.x2, line.y2));\n                hasIntersection = true;\n            }\n            if (!hasIntersection) {\n                scannedLines.push(line);\n            }\n        }\n    }\n    while (linesToCheck.length > 0) {\n        scannedLines.push(linesToCheck.pop());\n    }\n    return scannedLines;\n}\nfunction mergeLines(scannedLines, nonMembers) {\n    const finalRoute = [];\n    while (scannedLines.length > 0) {\n        const line1 = scannedLines.pop();\n        if (scannedLines.length === 0) {\n            finalRoute.push(line1);\n            break;\n        }\n        const line2 = scannedLines.pop();\n        const mergeLine = new Line(line1.x1, line1.y1, line2.x2, line2.y2);\n        const closestItem = getCenterItem(nonMembers, mergeLine);\n        if (!closestItem) {\n            scannedLines.push(mergeLine);\n        }\n        else {\n            finalRoute.push(line1);\n            scannedLines.push(line2);\n        }\n    }\n    return finalRoute;\n}\nfunction calculateClosestNeighbor(itemCenter, visited, nonMembers) {\n    let minLengthSq = Number.POSITIVE_INFINITY;\n    return visited.reduce((closestNeighbor, neighborItem) => {\n        const distanceSq = ptsDistanceSq(itemCenter.x, itemCenter.y, neighborItem.cx, neighborItem.cy);\n        if (distanceSq > minLengthSq) {\n            return closestNeighbor;\n        }\n        const directLine = new Line(itemCenter.x, itemCenter.y, neighborItem.cx, neighborItem.cy);\n        const numberInterferenceItems = itemsCuttingLine(nonMembers, directLine);\n        if (distanceSq * (numberInterferenceItems + 1) * (numberInterferenceItems + 1) < minLengthSq) {\n            closestNeighbor = neighborItem;\n            minLengthSq = distanceSq * (numberInterferenceItems + 1) * (numberInterferenceItems + 1);\n        }\n        return closestNeighbor;\n    }, null);\n}\nfunction sortByDistanceToCentroid(items) {\n    if (items.length < 2) {\n        return items;\n    }\n    let totalX = 0;\n    let totalY = 0;\n    items.forEach((item) => {\n        totalX += item.cx;\n        totalY += item.cy;\n    });\n    totalX /= items.length;\n    totalY /= items.length;\n    return items\n        .map((item) => {\n        const diffX = totalX - item.cx;\n        const diffY = totalY - item.cy;\n        const dist = diffX * diffX + diffY * diffY;\n        return [item, dist];\n    })\n        .sort((a, b) => a[1] - b[1])\n        .map((d) => d[0]);\n}\nfunction isPointInRectangles(p, rects) {\n    return rects.some((r) => r.containsPt(p.x, p.y));\n}\nfunction pointExists(pointToCheck, lines) {\n    return lines.some((checkEndPointsLine) => {\n        if (doublePointsEqual(checkEndPointsLine.x1, checkEndPointsLine.y1, pointToCheck.x, pointToCheck.y, 1e-3)) {\n            return true;\n        }\n        if (doublePointsEqual(checkEndPointsLine.x2, checkEndPointsLine.y2, pointToCheck.x, pointToCheck.y, 1e-3)) {\n            return true;\n        }\n        return false;\n    });\n}\nfunction getCenterItem(items, testLine) {\n    let minDistance = Number.POSITIVE_INFINITY;\n    let closestItem = null;\n    for (const item of items) {\n        if (!intersectsLine(item, testLine)) {\n            continue;\n        }\n        const distance = fractionToLineCenter(item, testLine);\n        if (distance >= 0 && distance < minDistance) {\n            closestItem = item;\n            minDistance = distance;\n        }\n    }\n    return closestItem;\n}\nfunction itemsCuttingLine(items, testLine) {\n    return items.reduce((count, item) => {\n        if (intersectsLine(item, testLine) && hasFractionToLineCenter(item, testLine)) {\n            return count + 1;\n        }\n        return count;\n    }, 0);\n}\nfunction rerouteLine(item, rerouteBuffer, intersections, wrapNormal) {\n    const topIntersect = intersections.top;\n    const leftIntersect = intersections.left;\n    const bottomIntersect = intersections.bottom;\n    const rightIntersect = intersections.right;\n    if (wrapNormal) {\n        if (leftIntersect.state === EState.POINT) {\n            if (topIntersect.state === EState.POINT)\n                return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n            if (bottomIntersect.state === EState.POINT)\n                return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n            const totalArea = item.width * item.height;\n            const topArea = item.width * ((leftIntersect.y - item.y + (rightIntersect.y - item.y)) * 0.5);\n            if (topArea < totalArea * 0.5) {\n                if (leftIntersect.y > rightIntersect.y)\n                    return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n                return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n            }\n            if (leftIntersect.y < rightIntersect.y)\n                return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n            return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n        }\n        if (rightIntersect.state === EState.POINT) {\n            if (topIntersect.state === EState.POINT)\n                return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n            if (bottomIntersect.state === EState.POINT)\n                return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n        }\n        const totalArea = item.height * item.width;\n        const leftArea = item.height * ((topIntersect.x - item.x + (rightIntersect.x - item.x)) * 0.5);\n        if (leftArea < totalArea * 0.5) {\n            if (topIntersect.x > bottomIntersect.x)\n                return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n            return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n        }\n        if (topIntersect.x < bottomIntersect.x)\n            return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n        return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n    }\n    if (leftIntersect.state === EState.POINT) {\n        if (topIntersect.state === EState.POINT)\n            return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n        if (bottomIntersect.state === EState.POINT)\n            return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n        const totalArea = item.height * item.width;\n        const topArea = item.width * ((leftIntersect.y - item.y + (rightIntersect.y - item.y)) * 0.5);\n        if (topArea < totalArea * 0.5) {\n            if (leftIntersect.y > rightIntersect.y)\n                return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n            return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n        }\n        if (leftIntersect.y < rightIntersect.y)\n            return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n        return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n    }\n    if (rightIntersect.state === EState.POINT) {\n        if (topIntersect.state === EState.POINT)\n            return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n        if (bottomIntersect.state === EState.POINT)\n            return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n    }\n    const totalArea = item.height * item.width;\n    const leftArea = item.height * ((topIntersect.x - item.x + (rightIntersect.x - item.x)) * 0.5);\n    if (leftArea < totalArea * 0.5) {\n        if (topIntersect.x > bottomIntersect.x)\n            return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n        return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n    }\n    if (topIntersect.x < bottomIntersect.x)\n        return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n    return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n}\n\nfunction canTakeNext(path, start, end, toleranceSquared) {\n    const validEnd = path.closed ? end < path.length : end < path.length - 1;\n    if (!validEnd) {\n        return false;\n    }\n    const s = path.get(start);\n    const e = path.get(end + 1);\n    for (let index = start + 1; index <= end; index++) {\n        const p = path.get(index);\n        const len = linePtSegDistSq(s.x, s.y, e.x, e.y, p.x, p.y);\n        if (len > toleranceSquared) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction shapeSimplifier(tolerance = 0.0) {\n    return (path) => {\n        if (tolerance < 0 || path.length < 3) {\n            return path;\n        }\n        const points = [];\n        let start = 0;\n        const toleranceSquared = tolerance * tolerance;\n        while (start < path.length) {\n            let end = start + 1;\n            while (canTakeNext(path, start, end, toleranceSquared)) {\n                end++;\n            }\n            points.push(path.get(start));\n            start = end;\n        }\n        return new PointPath(points);\n    };\n}\n\nfunction basicFunction(i, t) {\n    switch (i) {\n        case -2:\n            return (((-t + 3.0) * t - 3.0) * t + 1.0) / 6.0;\n        case -1:\n            return ((3.0 * t - 6.0) * t * t + 4.0) / 6.0;\n        case 0:\n            return (((-3.0 * t + 3.0) * t + 3.0) * t + 1.0) / 6.0;\n        case 1:\n            return (t * t * t) / 6.0;\n        default:\n            throw new Error('unknown error');\n    }\n}\nfunction bSplineShapeGenerator(granularity = 6.0) {\n    const ORDER = 3;\n    const START_INDEX = ORDER - 1;\n    const REL_END = 1;\n    const REL_START = REL_END - ORDER;\n    function calcPoint(path, i, t) {\n        let px = 0.0;\n        let py = 0.0;\n        for (let j = REL_START; j <= REL_END; j++) {\n            const p = path.get(i + j);\n            const bf = basicFunction(j, t);\n            px += bf * p.x;\n            py += bf * p.y;\n        }\n        return { x: px, y: py };\n    }\n    return (path) => {\n        if (path.length < 3) {\n            return path;\n        }\n        const res = [];\n        const closed = path.closed;\n        const count = path.length + ORDER - 1 + (closed ? 0 : 2);\n        res.push(calcPoint(path, START_INDEX - (closed ? 0 : 2), 0));\n        for (let ix = START_INDEX - (closed ? 0 : 2); ix < count; ix++) {\n            for (let k = 1; k <= granularity; k++) {\n                res.push(calcPoint(path, ix, k / granularity));\n            }\n        }\n        return new PointPath(res);\n    };\n}\n\nfunction samplePath(skip = 8) {\n    return (path) => {\n        let actSkip = skip;\n        let size = path.length;\n        if (actSkip > 1) {\n            size = Math.floor(path.length / actSkip);\n            while (size < 3 && actSkip > 1) {\n                actSkip -= 1;\n                size = Math.floor(path.length / actSkip);\n            }\n        }\n        const finalHull = [];\n        for (let i = 0, j = 0; j < size; j++, i += actSkip) {\n            finalHull.push(path.get(i));\n        }\n        return new PointPath(finalHull);\n    };\n}\n\nclass PointPath {\n    constructor(points = [], closed = true) {\n        this.points = points;\n        this.closed = closed;\n    }\n    get(index) {\n        const i = index;\n        const l = this.points.length;\n        if (index < 0) {\n            return this.closed ? this.get(index + l) : this.points[0];\n        }\n        else if (index >= l) {\n            return this.closed ? this.get(index - l) : this.points[l - 1];\n        }\n        return this.points[i];\n    }\n    get length() {\n        return this.points.length;\n    }\n    toString(roundToDigits = Infinity) {\n        const points = this.points;\n        if (points.length === 0) {\n            return '';\n        }\n        const rounder = typeof roundToDigits === 'function' ? roundToDigits : round(roundToDigits);\n        let r = 'M';\n        for (const p of points) {\n            r += `${rounder(p.x)},${rounder(p.y)} L`;\n        }\n        r = r.slice(0, -1);\n        if (this.closed) {\n            r += ' Z';\n        }\n        return r;\n    }\n    draw(ctx) {\n        const points = this.points;\n        if (points.length === 0) {\n            return;\n        }\n        ctx.beginPath();\n        ctx.moveTo(points[0].x, points[0].y);\n        for (const p of points) {\n            ctx.lineTo(p.x, p.y);\n        }\n        if (this.closed) {\n            ctx.closePath();\n        }\n    }\n    sample(skip) {\n        return samplePath(skip)(this);\n    }\n    simplify(tolerance) {\n        return shapeSimplifier(tolerance)(this);\n    }\n    bSplines(granularity) {\n        return bSplineShapeGenerator(granularity)(this);\n    }\n    apply(transformer) {\n        return transformer(this);\n    }\n    containsElements(members) {\n        const bb = boundingBox(this.points);\n        if (!bb) {\n            return false;\n        }\n        return members.every((member) => {\n            return bb.containsPt(member.cx, member.cy) && this.withinArea(member.cx, member.cy);\n        });\n    }\n    withinArea(px, py) {\n        if (this.length === 0) {\n            return false;\n        }\n        let crossings = 0;\n        const first = this.points[0];\n        const line = new Line(first.x, first.y, first.x, first.y);\n        for (let i = 1; i < this.points.length; i++) {\n            const cur = this.points[i];\n            line.x1 = line.x2;\n            line.y1 = line.y2;\n            line.x2 = cur.x;\n            line.y2 = cur.y;\n            if (line.cuts(px, py)) {\n                crossings++;\n            }\n        }\n        line.x1 = line.x2;\n        line.y1 = line.y2;\n        line.x2 = first.x;\n        line.y2 = first.y;\n        if (line.cuts(px, py)) {\n            crossings++;\n        }\n        return crossings % 2 === 1;\n    }\n}\n\nclass PointList {\n    constructor(size = 0) {\n        this.count = 0;\n        this.arr = [];\n        this.set = new Set();\n        this.arr.length = size;\n    }\n    add(p) {\n        this.set.add(`${p.x}x${p.y}`);\n        this.arr[this.count++] = p;\n    }\n    contains(p) {\n        return this.set.has(`${p.x}x${p.y}`);\n    }\n    isFirst(p) {\n        if (this.count === 0) {\n            return false;\n        }\n        const o = this.arr[0];\n        return o != null && o.x === p.x && o.y === p.y;\n    }\n    path() {\n        return new PointPath(this.arr.slice(0, this.count));\n    }\n    clear() {\n        this.set.clear();\n        this.count = 0;\n    }\n    get(ix) {\n        return this.arr[ix];\n    }\n    get length() {\n        return this.count;\n    }\n}\n\nconst N = 0;\nconst S = 1;\nconst E = 2;\nconst W = 3;\nfunction marchingSquares(potentialArea, threshold) {\n    const estLength = (Math.floor(potentialArea.width) + Math.floor(potentialArea.height)) * 2;\n    const contour = new PointList(estLength);\n    function updateDir(x, y, dir, res) {\n        const v = potentialArea.get(x, y);\n        if (Number.isNaN(v)) {\n            return Number.NaN;\n        }\n        if (v > threshold) {\n            return dir + res;\n        }\n        return dir;\n    }\n    function getState(x, y) {\n        let dir = N;\n        dir = updateDir(x, y, dir, 1);\n        dir = updateDir(x + 1, y, dir, 2);\n        dir = updateDir(x, y + 1, dir, 4);\n        dir = updateDir(x + 1, y + 1, dir, 8);\n        if (Number.isNaN(dir)) {\n            return -1;\n        }\n        return dir;\n    }\n    let direction = S;\n    function doMarch(xPos, yPos) {\n        let x = xPos;\n        let y = yPos;\n        let xPixel = potentialArea.invertScaleX(x);\n        let yPixel = potentialArea.invertScaleY(y);\n        for (let i = 0; i < potentialArea.width * potentialArea.height; i++) {\n            const p = { x: xPixel, y: yPixel };\n            if (contour.contains(p)) {\n                if (!contour.isFirst(p)) ;\n                else {\n                    return true;\n                }\n            }\n            else {\n                contour.add(p);\n            }\n            const state = getState(x, y);\n            switch (state) {\n                case -1:\n                    return true;\n                case 0:\n                case 3:\n                case 2:\n                case 7:\n                    direction = E;\n                    break;\n                case 12:\n                case 14:\n                case 4:\n                    direction = W;\n                    break;\n                case 6:\n                    direction = direction === N ? W : E;\n                    break;\n                case 1:\n                case 13:\n                case 5:\n                    direction = N;\n                    break;\n                case 9:\n                    direction = direction === E ? N : S;\n                    break;\n                case 10:\n                case 8:\n                case 11:\n                    direction = S;\n                    break;\n                default:\n                    console.warn('Marching squares invalid state: ' + state);\n                    return true;\n            }\n            switch (direction) {\n                case N:\n                    y--;\n                    yPixel -= potentialArea.pixelGroup;\n                    break;\n                case S:\n                    y++;\n                    yPixel += potentialArea.pixelGroup;\n                    break;\n                case W:\n                    x--;\n                    xPixel -= potentialArea.pixelGroup;\n                    break;\n                case E:\n                    x++;\n                    xPixel += potentialArea.pixelGroup;\n                    break;\n                default:\n                    console.warn('Marching squares invalid state: ' + state);\n                    return true;\n            }\n        }\n        return true;\n    }\n    for (let x = 0; x < potentialArea.width; x++) {\n        for (let y = 0; y < potentialArea.height; y++) {\n            if (potentialArea.get(x, y) <= threshold) {\n                continue;\n            }\n            const state = getState(x, y);\n            if (state < 0 || state === 15) {\n                continue;\n            }\n            if (doMarch(x, y)) {\n                return contour.path();\n            }\n        }\n    }\n    return null;\n}\n\nconst defaultOptions = {\n    maxRoutingIterations: 100,\n    maxMarchingIterations: 20,\n    pixelGroup: 4,\n    edgeR0: 10,\n    edgeR1: 20,\n    nodeR0: 15,\n    nodeR1: 50,\n    morphBuffer: 10,\n    threshold: 1,\n    memberInfluenceFactor: 1,\n    edgeInfluenceFactor: 1,\n    nonMemberInfluenceFactor: -0.8,\n    virtualEdges: true,\n};\nfunction isCircle(v) {\n    return v != null && typeof v.radius === 'number';\n}\nfunction isEqual(a, b) {\n    if (isCircle(a) !== isCircle(b)) {\n        return false;\n    }\n    if (isCircle(a)) {\n        const bc = b;\n        return a.cx === bc.cx && a.cy === bc.cy && a.radius === bc.radius;\n    }\n    const br = b;\n    return a.x === br.x && a.y === br.y && a.width === br.width && a.height === br.height;\n}\nvar EDirty;\n(function (EDirty) {\n    EDirty[EDirty[\"MEMBERS\"] = 0] = \"MEMBERS\";\n    EDirty[EDirty[\"NON_MEMBERS\"] = 1] = \"NON_MEMBERS\";\n    EDirty[EDirty[\"EDGES\"] = 2] = \"EDGES\";\n})(EDirty || (EDirty = {}));\nclass BubbleSets {\n    constructor(options = {}) {\n        this.dirty = new Set();\n        this.members = [];\n        this.nonMembers = [];\n        this.virtualEdges = [];\n        this.edges = [];\n        this.activeRegion = new Rectangle(0, 0, 0, 0);\n        this.potentialArea = new Area(1, 0, 0, 0, 0, 0, 0);\n        this.o = Object.assign({}, defaultOptions, options);\n    }\n    pushMember(...members) {\n        if (members.length === 0) {\n            return;\n        }\n        this.dirty.add(EDirty.MEMBERS);\n        for (const v of members) {\n            this.members.push({\n                raw: v,\n                obj: isCircle(v) ? Circle.from(v) : Rectangle.from(v),\n                area: null,\n            });\n        }\n    }\n    removeMember(member) {\n        const index = this.members.findIndex((d) => isEqual(d.raw, member));\n        if (index < 0) {\n            return false;\n        }\n        this.members.splice(index, 1);\n        this.dirty.add(EDirty.MEMBERS);\n        return true;\n    }\n    removeNonMember(nonMember) {\n        const index = this.nonMembers.findIndex((d) => isEqual(d.raw, nonMember));\n        if (index < 0) {\n            return false;\n        }\n        this.nonMembers.splice(index, 1);\n        this.dirty.add(EDirty.NON_MEMBERS);\n        return true;\n    }\n    removeEdge(edge) {\n        const index = this.edges.findIndex((d) => d.obj.equals(edge));\n        if (index < 0) {\n            return false;\n        }\n        this.edges.splice(index, 1);\n        this.dirty.add(EDirty.NON_MEMBERS);\n        return true;\n    }\n    pushNonMember(...nonMembers) {\n        if (nonMembers.length === 0) {\n            return;\n        }\n        this.dirty.add(EDirty.NON_MEMBERS);\n        for (const v of nonMembers) {\n            this.nonMembers.push({\n                raw: v,\n                obj: isCircle(v) ? Circle.from(v) : Rectangle.from(v),\n                area: null,\n            });\n        }\n    }\n    pushEdge(...edges) {\n        if (edges.length === 0) {\n            return;\n        }\n        this.dirty.add(EDirty.EDGES);\n        for (const v of edges) {\n            this.edges.push({\n                raw: v,\n                obj: Line.from(v),\n                area: null,\n            });\n        }\n    }\n    update() {\n        const dirtyMembers = this.dirty.has(EDirty.MEMBERS);\n        const dirtyNonMembers = this.dirty.has(EDirty.NON_MEMBERS);\n        let dirtyEdges = this.dirty.has(EDirty.EDGES);\n        this.dirty.clear();\n        const memberObjs = this.members.map((d) => d.obj);\n        if (this.o.virtualEdges && (dirtyMembers || dirtyNonMembers)) {\n            const nonMembersAsRects = this.nonMembers.map((d) => d.obj);\n            const virtualEdges = calculateVirtualEdges(memberObjs, nonMembersAsRects, this.o.maxRoutingIterations, this.o.morphBuffer);\n            const old = new Map(this.virtualEdges.map((e) => [e.obj.toString(), e.area]));\n            this.virtualEdges = virtualEdges.map((e) => {\n                var _a;\n                return ({\n                    raw: e,\n                    obj: e,\n                    area: (_a = old.get(e.toString())) !== null && _a !== void 0 ? _a : null,\n                });\n            });\n            dirtyEdges = true;\n        }\n        let activeRegionDirty = false;\n        if (dirtyMembers || dirtyEdges) {\n            const edgesObj = this.virtualEdges.concat(this.edges).map((e) => e.obj);\n            const bb = unionBoundingBox(memberObjs, edgesObj);\n            const padding = Math.max(this.o.edgeR1, this.o.nodeR1) + this.o.morphBuffer;\n            const activeRegion = Rectangle.from(addPadding(bb, padding));\n            if (!activeRegion.equals(this.activeRegion)) {\n                activeRegionDirty = true;\n                this.activeRegion = activeRegion;\n            }\n        }\n        if (activeRegionDirty) {\n            const potentialWidth = Math.ceil(this.activeRegion.width / this.o.pixelGroup);\n            const potentialHeight = Math.ceil(this.activeRegion.height / this.o.pixelGroup);\n            if (this.activeRegion.x !== this.potentialArea.pixelX || this.activeRegion.y !== this.potentialArea.pixelY) {\n                this.potentialArea = Area.fromPixelRegion(this.activeRegion, this.o.pixelGroup);\n                this.members.forEach((m) => (m.area = null));\n                this.nonMembers.forEach((m) => (m.area = null));\n                this.edges.forEach((m) => (m.area = null));\n                this.virtualEdges.forEach((m) => (m.area = null));\n            }\n            else if (potentialWidth !== this.potentialArea.width || potentialHeight !== this.potentialArea.height) {\n                this.potentialArea = Area.fromPixelRegion(this.activeRegion, this.o.pixelGroup);\n            }\n        }\n        const existing = new Map();\n        const addCache = (m) => {\n            if (m.area) {\n                const key = `${m.obj.width}x${m.obj.height}x${m.obj instanceof Rectangle ? 'R' : 'C'}`;\n                existing.set(key, m.area);\n            }\n        };\n        const createOrAddCache = (m) => {\n            if (m.area) {\n                return;\n            }\n            const key = `${m.obj.width}x${m.obj.height}x${m.obj instanceof Rectangle ? 'R' : 'C'}`;\n            if (existing.has(key)) {\n                const r = existing.get(key);\n                m.area = this.potentialArea.copy(r, { x: m.obj.x - this.o.nodeR1, y: m.obj.y - this.o.nodeR1 });\n                return;\n            }\n            const r = m.obj instanceof Rectangle\n                ? createRectangleInfluenceArea(m.obj, this.potentialArea, this.o.nodeR1)\n                : createGenericInfluenceArea(m.obj, this.potentialArea, this.o.nodeR1);\n            m.area = r;\n            existing.set(key, r);\n        };\n        this.members.forEach(addCache);\n        this.nonMembers.forEach(addCache);\n        this.members.forEach(createOrAddCache);\n        this.nonMembers.forEach((m) => {\n            if (!this.activeRegion.intersects(m.obj)) {\n                m.area = null;\n            }\n            else {\n                createOrAddCache(m);\n            }\n        });\n        this.edges.forEach((edge) => {\n            if (!edge.area) {\n                edge.area = createLineInfluenceArea(edge.obj, this.potentialArea, this.o.edgeR1);\n            }\n        });\n        this.virtualEdges.forEach((edge) => {\n            if (!edge.area) {\n                edge.area = createLineInfluenceArea(edge.obj, this.potentialArea, this.o.edgeR1);\n            }\n        });\n    }\n    drawMembers(ctx) {\n        for (const member of this.members) {\n            member.obj.draw(ctx);\n        }\n    }\n    drawNonMembers(ctx) {\n        for (const member of this.nonMembers) {\n            member.obj.draw(ctx);\n        }\n    }\n    drawEdges(ctx) {\n        for (const edge of this.edges) {\n            edge.obj.draw(ctx);\n        }\n    }\n    drawPotentialArea(ctx, offset = true) {\n        this.potentialArea.draw(ctx, offset);\n    }\n    compute() {\n        if (this.members.length === 0) {\n            return new PointPath([]);\n        }\n        if (this.dirty.size > 0) {\n            this.update();\n        }\n        const { o, potentialArea } = this;\n        const members = this.members.map((m) => m.area);\n        const edges = this.virtualEdges.concat(this.edges).map((d) => d.area);\n        const nonMembers = this.nonMembers.filter((d) => d.area != null).map((d) => d.area);\n        const memberObjs = this.members.map((m) => m.obj);\n        return calculatePotentialOutline(potentialArea, members, edges, nonMembers, (p) => p.containsElements(memberObjs), o);\n    }\n}\nfunction calculatePotentialOutline(potentialArea, members, edges, nonMembers, validPath, options = {}) {\n    const o = Object.assign({}, defaultOptions, options);\n    let threshold = o.threshold;\n    let memberInfluenceFactor = o.memberInfluenceFactor;\n    let edgeInfluenceFactor = o.edgeInfluenceFactor;\n    let nonMemberInfluenceFactor = o.nonMemberInfluenceFactor;\n    const nodeInfA = (o.nodeR0 - o.nodeR1) * (o.nodeR0 - o.nodeR1);\n    const edgeInfA = (o.edgeR0 - o.edgeR1) * (o.edgeR0 - o.edgeR1);\n    for (let iterations = 0; iterations < o.maxMarchingIterations; iterations++) {\n        potentialArea.clear();\n        if (memberInfluenceFactor !== 0) {\n            const f = memberInfluenceFactor / nodeInfA;\n            for (const item of members) {\n                potentialArea.incArea(item, f);\n            }\n        }\n        if (edgeInfluenceFactor !== 0) {\n            const f = edgeInfluenceFactor / edgeInfA;\n            for (const area of edges) {\n                potentialArea.incArea(area, f);\n            }\n        }\n        if (nonMemberInfluenceFactor !== 0) {\n            const f = nonMemberInfluenceFactor / nodeInfA;\n            for (const area of nonMembers) {\n                potentialArea.incArea(area, f);\n            }\n        }\n        const contour = marchingSquares(potentialArea, threshold);\n        if (contour && validPath(contour)) {\n            return contour;\n        }\n        threshold *= 0.95;\n        if (iterations <= o.maxMarchingIterations * 0.5) {\n            memberInfluenceFactor *= 1.2;\n            edgeInfluenceFactor *= 1.2;\n        }\n        else if (nonMemberInfluenceFactor !== 0 && nonMembers.length > 0) {\n            nonMemberInfluenceFactor *= 0.8;\n        }\n        else {\n            break;\n        }\n    }\n    return new PointPath([]);\n}\nfunction unionBoundingBox(memberItems, edgeItems) {\n    if (memberItems.length === 0) {\n        return new Rectangle(0, 0, 0, 0);\n    }\n    const activeRegion = Rectangle.from(memberItems[0]);\n    for (const m of memberItems) {\n        activeRegion.add(m);\n    }\n    for (const l of edgeItems) {\n        activeRegion.add(lineBoundingBox(l));\n    }\n    return activeRegion;\n}\nfunction createOutline(members, nonMembers = [], edges = [], options = {}) {\n    if (members.length === 0) {\n        return new PointPath([]);\n    }\n    const bb = new BubbleSets(options);\n    bb.pushMember(...members);\n    bb.pushNonMember(...nonMembers);\n    bb.pushEdge(...edges);\n    return bb.compute();\n}\n\nexport { Area, BubbleSets, Circle, Line, PointPath, Rectangle, addPadding, boundingBox, calculatePotentialOutline, calculateVirtualEdges, circle, createGenericInfluenceArea, createLineInfluenceArea, createOutline, createRectangleInfluenceArea, BubbleSets as default, defaultOptions, line, lineBoundingBox, point, rect, unionBoundingBox };\n//# sourceMappingURL=index.js.map\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { deepMix, isEqual, isFunction } from '@antv/util';\nimport { BubbleSets as BubbleSetsJS, Line, Rectangle, defaultOptions } from 'bubblesets-js';\nimport { GraphEvent } from '../constants';\nimport { Contour } from '../elements/shapes';\nimport { getBBoxHeight, getBBoxWidth } from '../utils/bbox';\nimport { arrayDiff } from '../utils/diff';\nimport { idOf } from '../utils/id';\nimport { getClosedSpline } from '../utils/path';\nimport { parsePoint } from '../utils/point';\nimport { BasePlugin } from './base-plugin';\n/**\n * <zh/> 气泡集\n *\n * <en/> BubbleSets\n * @remarks\n * <zh/> BubbleSets 最初由 Christopher Collins 在 2009 年的论文 \"Bubble Sets: Revealing Set Relations with Isocontours over Existing Visualizations\" 中提出。\n *\n * <zh/> 实现原理是通过创建一种类似于气泡的形状来表示集合。每个集合都被表示为一个独特的 \"气泡\"，集合中的元素被包含在这个气泡内部。如果两个集合有交集，那么这两个气泡会有重叠的部分，这个重叠的部分就表示这两个集合的交集。\n *\n * <en/> BubbleSets was originally proposed by Christopher Collins in the 2009 paper \"Bubble Sets: Revealing Set Relations with Isocontours over Existing Visualizations\".\n *\n * <en/> The principle is to represent sets by creating a shape similar to a bubble. Each set is represented by a unique \"bubble\", and the elements in the set are contained within this bubble. If two sets have an intersection, then the two bubbles will have an overlapping part, which represents the intersection of the two sets.\n */\nexport class BubbleSets extends BasePlugin {\n    constructor(context, options) {\n        super(context, deepMix({}, BubbleSets.defaultOptions, options));\n        this.members = new Map();\n        this.avoidMembers = new Map();\n        this.bubbleSetOptions = {};\n        this.drawBubbleSets = () => {\n            const { style, bubbleSetOptions } = this.parseOptions();\n            if (!isEqual(this.bubbleSetOptions, bubbleSetOptions))\n                this.init();\n            this.bubbleSetOptions = Object.assign({}, bubbleSetOptions);\n            const finalStyle = Object.assign(Object.assign({}, style), { d: this.getPath() });\n            if (!this.shape) {\n                this.shape = new Contour({ style: finalStyle });\n                this.context.canvas.appendChild(this.shape);\n            }\n            else {\n                this.shape.update(finalStyle);\n            }\n        };\n        this.updateBubbleSetsPath = (event) => {\n            if (!this.shape)\n                return;\n            const id = idOf(event.data);\n            if (![...this.options.members, ...this.options.avoidMembers].includes(id))\n                return;\n            this.shape.update(Object.assign(Object.assign({}, this.parseOptions().style), { d: this.getPath(id) }));\n        };\n        this.getPath = (forceUpdateId) => {\n            const { graph } = this.context;\n            const currMembers = this.options.members;\n            const prevMembers = [...this.members.keys()];\n            const currAvoidMembers = this.options.avoidMembers;\n            const prevAvoidMembers = [...this.avoidMembers.keys()];\n            if (!forceUpdateId && isEqual(currMembers, prevMembers) && isEqual(currAvoidMembers, prevAvoidMembers))\n                return this.path;\n            const { enter: membersToEnter = [], exit: membersToExit = [] } = arrayDiff(prevMembers, currMembers, (d) => d);\n            const { enter: avoidMembersToEnter = [], exit: avoidMembersToExit = [] } = arrayDiff(prevAvoidMembers, currAvoidMembers, (d) => d);\n            if (forceUpdateId) {\n                membersToExit.push(forceUpdateId);\n                membersToEnter.push(forceUpdateId);\n            }\n            const updateBubbleSets = (ids, isEntering, isMember) => {\n                ids.forEach((id) => {\n                    const members = isMember ? this.members : this.avoidMembers;\n                    const pushMember = isMember ? 'pushMember' : 'pushNonMember';\n                    const removeMember = isMember ? 'removeMember' : 'removeNonMember';\n                    if (isEntering) {\n                        let area;\n                        if (graph.getElementType(id) === 'edge') {\n                            [area] = convertToLine(graph, id);\n                            this.bubbleSets.pushEdge(area);\n                        }\n                        else {\n                            [area] = convertToRectangle(graph, id);\n                            this.bubbleSets[pushMember](area);\n                        }\n                        members.set(id, area);\n                    }\n                    else {\n                        const area = members.get(id);\n                        if (area) {\n                            if (graph.getElementType(id) === 'edge') {\n                                this.bubbleSets.removeEdge(area);\n                            }\n                            else {\n                                this.bubbleSets[removeMember](area);\n                            }\n                            members.delete(id);\n                        }\n                    }\n                });\n            };\n            updateBubbleSets(membersToExit, false, true);\n            updateBubbleSets(membersToEnter, true, true);\n            updateBubbleSets(avoidMembersToExit, false, false);\n            updateBubbleSets(avoidMembersToEnter, true, false);\n            const pointPath = this.bubbleSets.compute();\n            const cleanPath = pointPath.sample(8).simplify(0).bSplines().simplify(0);\n            this.path = getClosedSpline(cleanPath.points.map(parsePoint));\n            return this.path;\n        };\n        this.bindEvents();\n        this.bubbleSets = new BubbleSetsJS(this.options);\n    }\n    bindEvents() {\n        this.context.graph.on(GraphEvent.AFTER_RENDER, this.drawBubbleSets);\n        this.context.graph.on(GraphEvent.AFTER_ELEMENT_UPDATE, this.updateBubbleSetsPath);\n    }\n    init() {\n        this.bubbleSets = new BubbleSetsJS(this.options);\n        this.members = new Map();\n        this.avoidMembers = new Map();\n    }\n    parseOptions() {\n        const _a = this.options, { type, key, members, avoidMembers } = _a, rest = __rest(_a, [\"type\", \"key\", \"members\", \"avoidMembers\"]);\n        const res = Object.keys(rest).reduce((acc, key) => {\n            if (key in defaultOptions) {\n                acc.bubbleSetOptions[key] = rest[key];\n            }\n            else {\n                acc.style[key] = rest[key];\n            }\n            return acc;\n        }, { style: {}, bubbleSetOptions: {} });\n        return Object.assign({ type, key, members, avoidMembers }, res);\n    }\n    /**\n     * <zh/> 添加成员元素\n     *\n     * <en/> Add member elements\n     * @param members - <zh/> 单个或多个 | <en/> single or multiple\n     */\n    addMember(members) {\n        const membersToAdd = Array.isArray(members) ? members : [members];\n        if (membersToAdd.some((member) => this.options.avoidMembers.includes(member))) {\n            this.options.avoidMembers = this.options.avoidMembers.filter((id) => !membersToAdd.includes(id));\n        }\n        this.options.members = [...new Set([...this.options.members, ...membersToAdd])];\n        this.drawBubbleSets();\n    }\n    /**\n     * <zh/> 移除成员元素\n     *\n     * <en/> Remove member elements\n     * @param members - <zh/> 单个或多个 | <en/> single or multiple\n     */\n    removeMember(members) {\n        const membersToRemove = Array.isArray(members) ? members : [members];\n        this.options.members = this.options.members.filter((id) => !membersToRemove.includes(id));\n        this.drawBubbleSets();\n    }\n    /**\n     * <zh/> 更新成员元素\n     *\n     * <en/> Update member elements\n     * @param members - <zh/> 值或者回调函数 | <en/> value or callback function\n     */\n    updateMember(members) {\n        this.options.members = isFunction(members) ? members(this.options.members) : members;\n        this.drawBubbleSets();\n    }\n    /**\n     * <zh/> 获取成员元素\n     *\n     * <en/> Get member elements\n     * @returns <zh/> 成员元素数组 | <en/> member elements array\n     */\n    getMember() {\n        return this.options.members;\n    }\n    /**\n     * <zh/> 添加需要避开的元素\n     *\n     * <en/> Add elements to avoid\n     * @param avoidMembers - <zh/> 单个或多个 | <en/> single or multiple\n     */\n    addAvoidMember(avoidMembers) {\n        const avoidMembersToAdd = Array.isArray(avoidMembers) ? avoidMembers : [avoidMembers];\n        if (avoidMembersToAdd.some((AvoidMember) => this.options.members.includes(AvoidMember))) {\n            this.options.members = this.options.members.filter((id) => !avoidMembersToAdd.includes(id));\n        }\n        this.options.avoidMembers = [...new Set([...this.options.avoidMembers, ...avoidMembersToAdd])];\n        this.drawBubbleSets();\n    }\n    /**\n     * <zh/> 移除需要避开的元素\n     *\n     * <en/> Remove elements to avoid\n     * @param avoidMembers - <zh/> 单个或多个 | <en/> single or multiple\n     */\n    removeAvoidMember(avoidMembers) {\n        const avoidMembersToRemove = Array.isArray(avoidMembers) ? avoidMembers : [avoidMembers];\n        if (this.options.avoidMembers.some((member) => avoidMembersToRemove.includes(member))) {\n            this.options.avoidMembers = this.options.avoidMembers.filter((id) => !avoidMembersToRemove.includes(id));\n            this.drawBubbleSets();\n        }\n    }\n    /**\n     * <zh/> 更新需要避开的元素\n     *\n     * <en/> Update elements to avoid\n     * @param avoidMembers - <zh/> 单个或多个 | <en/> single or multiple\n     */\n    updateAvoidMember(avoidMembers) {\n        this.options.avoidMembers = Array.isArray(avoidMembers) ? avoidMembers : [avoidMembers];\n        this.drawBubbleSets();\n    }\n    /**\n     * <zh/> 获取需要避开的元素\n     *\n     * <en/> Get elements to avoid\n     * @returns avoidMembers <zh/> 成员元素数组 | <en/> member elements array\n     */\n    getAvoidMember() {\n        return this.options.avoidMembers;\n    }\n    /**\n     * <zh/> 销毁\n     *\n     * <en/> Destroy\n     * @internal\n     */\n    destroy() {\n        this.context.graph.off(GraphEvent.AFTER_RENDER, this.drawBubbleSets);\n        this.context.graph.off(GraphEvent.AFTER_ELEMENT_UPDATE, this.updateBubbleSetsPath);\n        this.shape.destroy();\n        super.destroy();\n    }\n}\nBubbleSets.defaultOptions = Object.assign({ members: [], avoidMembers: [], \n    /** shape style */\n    fill: 'lightblue', fillOpacity: 0.2, stroke: 'blue', strokeOpacity: 0.2 }, defaultOptions);\n/**\n * <zh/> 将节点转换为 BubbleSetJS 支持的矩形\n *\n * <en/> Convert nodes to rectangles supported by BubbleSetJS\n * @param graph - <zh/> 图实例 | <en/> graph instance\n * @param ids - <zh/> 元素 ID 数组 | <en/> element ID array\n * @returns <zh/> 矩形数组 | <en/> rectangle array\n */\nconst convertToRectangle = (graph, ids) => {\n    const idArr = Array.isArray(ids) ? ids : [ids];\n    return idArr.map((id) => {\n        const bbox = graph.getElementRenderBounds(id);\n        return new Rectangle(bbox.min[0], bbox.min[1], getBBoxWidth(bbox), getBBoxHeight(bbox));\n    });\n};\n/**\n * <zh/> 将边转换为 BubbleSetJS 支持的线\n *\n * <en/> Convert edges to lines supported by BubbleSetJS\n * @param graph - <zh/> 图实例 | <en/> graph instance\n * @param ids - <zh/> 元素 ID 数组 | <en/> element ID array\n * @returns <zh/> 线数组 | <en/> line array\n */\nconst convertToLine = (graph, ids) => {\n    const idArr = Array.isArray(ids) ? ids : [ids];\n    return idArr.map((id) => {\n        const data = graph.getEdgeData(id);\n        const source = graph.getElementPosition(data.source);\n        const target = graph.getElementPosition(data.target);\n        return Line.from({ x1: source[0], y1: source[1], x2: target[0], y2: target[1] });\n    });\n};\n//# sourceMappingURL=bubble-sets.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginContainer, insertDOM } from '../utils/dom';\nimport { CONTEXTMENU_CSS, getContentFromItems } from './util';\n/**\n * <zh/> 上下文菜单\n *\n * <en/> Contextmenu\n * @remarks\n * <zh/> 上下文菜单，也被称为右键菜单，是当用户在某个特定区域上点击后出现的一个菜单。支持在点击前后，触发自定义事件。\n *\n * <en/> Contextmenu, also known as the right-click menu , is a menu that appears when a user clicks on a specific area. Supports triggering custom events before and after clicking.\n */\nexport class Contextmenu extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Contextmenu.defaultOptions, options));\n        this.targetElement = null;\n        this.onTriggerEvent = (event) => {\n            var _a;\n            // `contextmenu` 事件默认会触发浏览器的右键菜单，需要阻止默认事件\n            // `click` 事件不需要阻止默认事件\n            (_a = event.preventDefault) === null || _a === void 0 ? void 0 : _a.call(event);\n            this.show(event);\n        };\n        this.onMenuItemClick = (event) => {\n            const { onClick, trigger } = this.options;\n            if (event.target instanceof HTMLElement) {\n                if (event.target.className.includes('g6-contextmenu-li')) {\n                    const value = event.target.getAttribute('value');\n                    onClick === null || onClick === void 0 ? void 0 : onClick(value, event.target, this.targetElement);\n                    this.hide();\n                }\n            }\n            if (trigger !== 'click')\n                this.hide();\n        };\n        this.initElement();\n        this.update(options);\n    }\n    initElement() {\n        this.$element = createPluginContainer('contextmenu', false, { zIndex: '99' });\n        const { className } = this.options;\n        if (className)\n            this.$element.classList.add(className);\n        const $container = this.context.canvas.getContainer();\n        $container.appendChild(this.$element);\n        insertDOM('g6-contextmenu-css', 'style', {}, CONTEXTMENU_CSS, document.head);\n    }\n    /**\n     * <zh/> 显示上下文菜单\n     *\n     * <en/> Show the contextmenu\n     * @param event - <zh/> 元素指针事件 | <en/> Element pointer event\n     * @internal\n     */\n    show(event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { enable, offset } = this.options;\n            if ((typeof enable === 'function' && !enable(event)) || !enable) {\n                this.hide();\n                return;\n            }\n            const content = yield this.getDOMContent(event);\n            if (content instanceof HTMLElement) {\n                this.$element.innerHTML = '';\n                this.$element.appendChild(content);\n            }\n            else {\n                this.$element.innerHTML = content;\n            }\n            // NOTICE: 为什么事件中的 client 是相对浏览器，而不是画布容器？\n            const clientRect = this.context.graph.getCanvas().getContainer().getBoundingClientRect();\n            this.$element.style.left = `${event.client.x - clientRect.left + offset[0]}px`;\n            this.$element.style.top = `${event.client.y - clientRect.top + offset[1]}px`;\n            this.$element.style.display = 'block';\n            this.targetElement = event.target;\n        });\n    }\n    /**\n     * <zh/> 隐藏上下文菜单\n     *\n     * <en/> Hide the contextmenu\n     */\n    hide() {\n        this.$element.style.display = 'none';\n        this.targetElement = null;\n    }\n    /**\n     * <zh/> 更新上下文菜单的配置项\n     *\n     * <en/> Update the contextmenu options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 销毁上下文菜单\n     *\n     * <en/> Destroy the contextmenu\n     * @internal\n     */\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n        this.$element.remove();\n    }\n    getDOMContent(event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { getContent, getItems } = this.options;\n            if (getItems) {\n                return getContentFromItems(yield getItems(event));\n            }\n            return yield getContent(event);\n        });\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        const { trigger } = this.options;\n        graph.on(`canvas:${trigger}`, this.onTriggerEvent);\n        graph.on(`node:${trigger}`, this.onTriggerEvent);\n        graph.on(`edge:${trigger}`, this.onTriggerEvent);\n        graph.on(`combo:${trigger}`, this.onTriggerEvent);\n        document.addEventListener('click', this.onMenuItemClick);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        const { trigger } = this.options;\n        graph.off(`canvas:${trigger}`, this.onTriggerEvent);\n        graph.off(`node:${trigger}`, this.onTriggerEvent);\n        graph.off(`edge:${trigger}`, this.onTriggerEvent);\n        graph.off(`combo:${trigger}`, this.onTriggerEvent);\n        document.removeEventListener('click', this.onMenuItemClick);\n    }\n}\nContextmenu.defaultOptions = {\n    trigger: 'contextmenu',\n    offset: [4, 4],\n    loadingContent: '<div class=\"g6-contextmenu-loading\">Loading...</div>',\n    getContent: () => 'It is a empty context menu.',\n    enable: () => true,\n};\n//# sourceMappingURL=index.js.map","/**\n * Get the content of the right-click menu.\n * @param items - context menu items\n * @returns HTML string\n */\nexport function getContentFromItems(items) {\n    return `\n    <ul class=\"g6-contextmenu-ul\">\n      ${items.map((item) => `<li  class=\"g6-contextmenu-li\" value=\"${item.value}\">${item.name}</li>`).join('')}\n    </ul>\n  `;\n}\n/**\n * Style of the right-click menu, same with `tooltip`.\n */\nexport const CONTEXTMENU_CSS = `\n  .g6-contextmenu {\n    font-size: 12px;\n    background-color: rgba(255, 255, 255, 0.96);\n    border-radius: 4px;\n    overflow: hidden;\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;\n    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;\n  }\n\n  .g6-contextmenu-ul {\n    max-width: 256px;\n    min-width: 96px;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .g6-contextmenu-li {\n    padding: 8px 12px;\n    cursor: pointer;\n    user-select: none;\n  }\n\n  .g6-contextmenu-li:hover {\n    background-color: #f5f5f5;\n    cursor: pointer;\n  }\n`;\n//# sourceMappingURL=util.js.map","import { isEmpty } from '@antv/util';\nimport { GraphEvent } from '../../constants';\nimport { getPolylinePath } from '../../utils/edge';\nimport { idOf } from '../../utils/id';\nimport { positionOf } from '../../utils/position';\nimport { add, distance, divide, dot, multiply, subtract, toVector2 } from '../../utils/vector';\nimport { BasePlugin } from '../base-plugin';\n/**\n * <zh/> 边绑定\n *\n * <en/> Edge bundling\n * @remarks\n * <zh/> 边绑定（Edge Bundling）是一种图可视化技术，用于减少复杂网络图中的视觉混乱，并揭示图中的高级别模式和结构。其思想是将相邻的边捆绑在一起。\n *\n * <zh/> G6 中提供的边绑定插件是基于 FEDB（Force-Directed Edge Bundling for Graph Visualization）一文的实现：将边建模为可以相互吸引的柔性弹簧，通过自组织的方式进行捆绑。\n *\n * <en/> Edge bundling is a graph visualization technique used to reduce visual clutter in complex network graphs and reveal high-level patterns and structures in the graph. The idea is to bundle adjacent edges together.\n *\n * <en/> The edge bundling plugin provided in G6 is based on the implementation of the paper FEDB (Force-Directed Edge Bundling for Graph Visualization): modeling edges as flexible springs that can attract each other and bundling them in a self-organizing way.\n */\nexport class EdgeBundling extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, EdgeBundling.defaultOptions, options));\n        this.edgeBundles = {};\n        this.edgePoints = {};\n        this.onBundle = () => {\n            const { model, element } = this.context;\n            const edges = model.getEdgeData();\n            this.divideEdges(this.options.divisions);\n            const { cycles, iterRate, divRate } = this.options;\n            let { lambda, divisions, iterations } = this.options;\n            for (let i = 0; i < cycles; i++) {\n                for (let j = 0; j < iterations; j++) {\n                    const forces = {};\n                    edges.forEach((edge) => {\n                        var _a;\n                        if (edge.source === edge.target)\n                            return;\n                        const edgeId = idOf(edge);\n                        forces[edgeId] = this.getEdgeForces(edge, divisions, lambda);\n                        for (let p = 0; p < divisions + 1; p++) {\n                            (_a = this.edgePoints)[edgeId] || (_a[edgeId] = []);\n                            this.edgePoints[edgeId][p] = add(this.edgePoints[edgeId][p], forces[edgeId][p]);\n                        }\n                    });\n                }\n                // parameters for next cycle\n                lambda /= 2;\n                divisions *= divRate;\n                iterations *= iterRate;\n                this.divideEdges(divisions);\n            }\n            edges.forEach((edge) => {\n                const edgeId = idOf(edge);\n                const edgeEl = element.getElement(edgeId);\n                edgeEl === null || edgeEl === void 0 ? void 0 : edgeEl.update({ d: getPolylinePath(this.edgePoints[edgeId]) });\n            });\n        };\n        this.bindEvents();\n    }\n    get nodeMap() {\n        const nodes = this.context.model.getNodeData();\n        return Object.fromEntries(nodes.map((node) => [idOf(node), toVector2(positionOf(node))]));\n    }\n    divideEdges(divisions) {\n        const edges = this.context.model.getEdgeData();\n        edges.forEach((edge) => {\n            var _a;\n            const edgeId = idOf(edge);\n            (_a = this.edgePoints)[edgeId] || (_a[edgeId] = []);\n            const source = this.nodeMap[edge.source];\n            const target = this.nodeMap[edge.target];\n            if (divisions === 1) {\n                this.edgePoints[edgeId].push(source);\n                this.edgePoints[edgeId].push(divide(add(source, target), 2));\n                this.edgePoints[edgeId].push(target);\n            }\n            else {\n                const edgeLength = this.edgePoints[edgeId].length === 0\n                    ? // edge is a straight line\n                        distance(source, target)\n                    : // edge is a polyline\n                        getEdgeLength(this.edgePoints[edgeId]);\n                const divisionLength = edgeLength / (divisions + 1);\n                let currentDivisionLength = divisionLength;\n                const newEdgePoints = [source];\n                for (let i = 1; i < this.edgePoints[edgeId].length; i++) {\n                    const prevEp = this.edgePoints[edgeId][i - 1];\n                    const ep = this.edgePoints[edgeId][i];\n                    let oriDivisionLength = distance(ep, prevEp);\n                    while (oriDivisionLength > currentDivisionLength) {\n                        const ratio = currentDivisionLength / oriDivisionLength;\n                        const edgePoint = add(prevEp, multiply(subtract(ep, prevEp), ratio));\n                        newEdgePoints.push(edgePoint);\n                        oriDivisionLength -= currentDivisionLength;\n                        currentDivisionLength = divisionLength;\n                    }\n                    currentDivisionLength -= oriDivisionLength;\n                }\n                newEdgePoints.push(target);\n                this.edgePoints[edgeId] = newEdgePoints;\n            }\n        });\n    }\n    getVectorPosition(edge) {\n        const source = this.nodeMap[edge.source];\n        const target = this.nodeMap[edge.target];\n        const [vx, vy] = subtract(target, source);\n        const length = distance(source, target);\n        return { source, target, vx, vy, length };\n    }\n    measureEdgeCompatibility(edge1, edge2) {\n        const vector1 = this.getVectorPosition(edge1);\n        const vector2 = this.getVectorPosition(edge2);\n        const ac = getAngleCompatibility(vector1, vector2);\n        const sc = getScaleCompatibility(vector1, vector2);\n        const pc = getPositionCompatibility(vector1, vector2);\n        const vc = getVisibilityCompatibility(vector1, vector2);\n        return ac * sc * pc * vc;\n    }\n    getEdgeBundles() {\n        const edgeBundles = {};\n        const bundleThreshold = this.options.bundleThreshold;\n        const edges = this.context.model.getEdgeData();\n        edges.forEach((edge1, i) => {\n            edges.forEach((edge2, j) => {\n                var _a, _b;\n                if (j <= i)\n                    return;\n                const compatibility = this.measureEdgeCompatibility(edge1, edge2);\n                if (compatibility >= bundleThreshold) {\n                    edgeBundles[_a = idOf(edge1)] || (edgeBundles[_a] = []);\n                    edgeBundles[idOf(edge1)].push(edge2);\n                    edgeBundles[_b = idOf(edge2)] || (edgeBundles[_b] = []);\n                    edgeBundles[idOf(edge2)].push(edge1);\n                }\n            });\n        });\n        return edgeBundles;\n    }\n    getSpringForce(divisions, kp) {\n        const { pre, cur, next } = divisions;\n        return multiply(subtract(add(pre, next), multiply(cur, 2)), kp);\n    }\n    getElectrostaticForce(pidx, edge) {\n        if (isEmpty(this.edgeBundles)) {\n            this.edgeBundles = this.getEdgeBundles();\n        }\n        const edgeBundle = this.edgeBundles[idOf(edge)];\n        let resForce = [0, 0];\n        edgeBundle === null || edgeBundle === void 0 ? void 0 : edgeBundle.forEach((eb) => {\n            const p1 = this.edgePoints[idOf(eb)][pidx];\n            const p2 = this.edgePoints[idOf(edge)][pidx];\n            const force = subtract(p1, p2);\n            const length = distance(p1, p2);\n            resForce = add(resForce, multiply(force, 1 / length));\n        });\n        return resForce;\n    }\n    getEdgeForces(edge, divisions, lambda) {\n        const source = this.nodeMap[edge.source];\n        const target = this.nodeMap[edge.target];\n        const kp = this.options.K / (distance(source, target) * (divisions + 1));\n        const edgePointForces = [[0, 0]];\n        const edgeId = idOf(edge);\n        for (let i = 1; i < divisions; i++) {\n            const spring = this.getSpringForce({\n                pre: this.edgePoints[edgeId][i - 1],\n                cur: this.edgePoints[edgeId][i],\n                next: this.edgePoints[edgeId][i + 1] || [0, 0],\n            }, kp);\n            const electrostatic = this.getElectrostaticForce(i, edge);\n            edgePointForces.push(multiply(add(spring, electrostatic), lambda));\n        }\n        edgePointForces.push([0, 0]);\n        return edgePointForces;\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        graph.on(GraphEvent.AFTER_RENDER, this.onBundle);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(GraphEvent.AFTER_RENDER, this.onBundle);\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nEdgeBundling.defaultOptions = {\n    K: 0.1,\n    lambda: 0.1,\n    divisions: 1,\n    divRate: 2,\n    cycles: 6,\n    iterations: 90,\n    iterRate: 2 / 3,\n    bundleThreshold: 0.6,\n};\n// The larger the angle between edges P and Q, the smaller Ca(P,Q).\n// Ca(P,Q) is 0 if P and Q are orthogonal and 1 if P and Q are parallel.\nconst getAngleCompatibility = (p, q) => {\n    return Math.abs(dot([p.vx, p.vy], [q.vx, q.vy]) / (p.length * q.length));\n};\n// Cs(P,Q) is 1 if P and Q have equal length and approaches 0 if the ratio between the longest and the shortest edge approaches ∞.\nconst getScaleCompatibility = (p, q) => {\n    const aLength = (p.length + q.length) / 2;\n    return 2 / (aLength / Math.min(p.length, q.length) + Math.max(p.length, q.length) / aLength);\n};\n// Cp(P,Q) is 1 if Pm and Qm coincide and approaches 0 if ||Pm −Qm|| approaches ∞.\nconst getPositionCompatibility = (p, q) => {\n    const aLength = (p.length + q.length) / 2;\n    const pMid = divide(add(p.source, p.target), 2);\n    const qMid = divide(add(q.source, q.target), 2);\n    return aLength / (aLength + distance(pMid, qMid));\n};\nconst projectPointToEdge = (p, e) => {\n    if (e.source[0] === e.target[0])\n        return [e.source[0], p[1]];\n    if (e.source[1] === e.target[1])\n        return [p[0], e.source[1]];\n    const k = (e.source[1] - e.target[1]) / (e.source[0] - e.target[0]);\n    const x = (k * k * e.source[0] + k * (p[1] - e.source[1]) + p[0]) / (k * k + 1);\n    const y = k * (x - e.source[0]) + e.source[1];\n    return [x, y];\n};\nconst getEdgeVisibility = (p, q) => {\n    const is = projectPointToEdge(q.source, p);\n    const it = projectPointToEdge(q.target, p);\n    const iMid = divide(add(is, it), 2);\n    const pMid = divide(add(p.source, p.target), 2);\n    if (distance(is, it) === 0)\n        return 0;\n    return Math.max(0, 1 - (2 * distance(pMid, iMid)) / distance(is, it));\n};\nconst getVisibilityCompatibility = (p, q) => {\n    return Math.min(getEdgeVisibility(p, q), getEdgeVisibility(q, p));\n};\n/**\n * Calculate the length of a polyline\n * @param points - The points of the polyline\n * @returns The length of the polyline\n */\nconst getEdgeLength = (points) => {\n    let length = 0;\n    for (let i = 1; i < points.length; i++) {\n        length += distance(points[i], points[i - 1]);\n    }\n    return length;\n};\n//# sourceMappingURL=index.js.map","import { CommonEvent } from '../../constants';\nimport { Circle } from '../../elements';\nimport { idOf } from '../../utils/id';\nimport { parsePoint, toPointObject } from '../../utils/point';\nimport { positionOf } from '../../utils/position';\nimport { distance } from '../../utils/vector';\nimport { BasePlugin } from '../base-plugin';\nconst defaultLensStyle = {\n    fill: '#fff',\n    fillOpacity: 1,\n    lineWidth: 1,\n    stroke: '#000',\n    strokeOpacity: 0.8,\n    zIndex: -Infinity,\n};\nconst DELTA = 0.05;\n/**\n * <zh/> 边过滤镜插件\n *\n * <en/> Edge filter lens plugin\n * @remarks\n * <zh/> 边过滤镜可以将关注的边保留在过滤镜范围内，其他边将在该范围内不显示。\n *\n * <en/> EdgeFilterLens can keep the focused edges within the lens range, while other edges will not be displayed within that range.\n */\nexport class EdgeFilterLens extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, EdgeFilterLens.defaultOptions, options));\n        this.shapes = new Map();\n        this.r = this.options.r;\n        this.onEdgeFilter = (event) => {\n            if (this.options.trigger === 'drag' && this.isLensOn)\n                return;\n            const origin = parsePoint(event.canvas);\n            this.renderLens(origin);\n            this.renderFocusElements();\n        };\n        this.renderLens = (origin) => {\n            const style = Object.assign({}, defaultLensStyle, this.options.style);\n            if (!this.isLensOn) {\n                this.lens = new Circle({ style });\n                this.canvas.appendChild(this.lens);\n            }\n            Object.assign(style, toPointObject(origin), { size: this.r * 2 });\n            this.lens.update(style);\n        };\n        this.getFilterData = () => {\n            const { filter } = this.options;\n            const { model } = this.context;\n            const data = model.getData();\n            if (!filter)\n                return data;\n            const { nodes, edges, combos } = data;\n            return {\n                nodes: nodes.filter((node) => filter(idOf(node), 'node')),\n                edges: edges.filter((edge) => filter(idOf(edge), 'edge')),\n                combos: combos.filter((combo) => filter(idOf(combo), 'combo')),\n            };\n        };\n        this.getFocusElements = (origin) => {\n            const { nodes, edges } = this.getFilterData();\n            const focusNodes = nodes.filter((datum) => distance(positionOf(datum), origin) < this.r);\n            const focusNodeIds = focusNodes.map((node) => idOf(node));\n            const focusEdges = edges.filter((datum) => {\n                const { source, target } = datum;\n                const isSourceFocus = focusNodeIds.includes(source);\n                const isTargetFocus = focusNodeIds.includes(target);\n                switch (this.options.nodeType) {\n                    case 'both':\n                        return isSourceFocus && isTargetFocus;\n                    case 'either':\n                        return isSourceFocus !== isTargetFocus;\n                    case 'source':\n                        return isSourceFocus && !isTargetFocus;\n                    case 'target':\n                        return !isSourceFocus && isTargetFocus;\n                    default:\n                        return false;\n                }\n            });\n            return { nodes: focusNodes, edges: focusEdges };\n        };\n        this.renderFocusElements = () => {\n            const { element, graph } = this.context;\n            if (!this.isLensOn)\n                return;\n            const origin = this.lens.getCenter();\n            const { nodes, edges } = this.getFocusElements(origin);\n            const ids = new Set();\n            const iterate = (datum) => {\n                const id = idOf(datum);\n                ids.add(id);\n                const shape = element.getElement(id);\n                if (!shape)\n                    return;\n                const cloneShape = this.shapes.get(id) || shape.cloneNode();\n                cloneShape.setPosition(shape.getPosition());\n                cloneShape.id = shape.id;\n                if (!this.shapes.has(id)) {\n                    this.canvas.appendChild(cloneShape);\n                    this.shapes.set(id, cloneShape);\n                }\n                else {\n                    Object.entries(shape.attributes).forEach(([key, value]) => {\n                        if (cloneShape.style[key] !== value)\n                            cloneShape.style[key] = value;\n                    });\n                }\n                const elementType = graph.getElementType(id);\n                const style = this.getElementStyle(elementType, datum);\n                // @ts-ignore\n                cloneShape.update(style);\n            };\n            nodes.forEach(iterate);\n            edges.forEach(iterate);\n            this.shapes.forEach((shape, id) => {\n                if (!ids.has(id)) {\n                    shape.destroy();\n                    this.shapes.delete(id);\n                }\n            });\n        };\n        this.scaleRByWheel = (event) => {\n            var _a;\n            if (this.options.preventDefault)\n                event.preventDefault();\n            const { clientX, clientY, deltaX, deltaY } = event;\n            const { graph, canvas } = this.context;\n            const scaleOrigin = graph.getCanvasByClient([clientX, clientY]);\n            const origin = (_a = this.lens) === null || _a === void 0 ? void 0 : _a.getCenter();\n            if (!this.isLensOn || distance(scaleOrigin, origin) > this.r) {\n                return;\n            }\n            const { maxR, minR } = this.options;\n            const ratio = deltaX + deltaY > 0 ? 1 / (1 - DELTA) : 1 - DELTA;\n            const canvasR = Math.min(...canvas.getSize()) / 2;\n            this.r = Math.max(minR || 0, Math.min(maxR || canvasR, this.r * ratio));\n            this.renderLens(origin);\n            this.renderFocusElements();\n        };\n        this.isLensDragging = false;\n        this.onDragStart = (event) => {\n            var _a;\n            const dragOrigin = parsePoint(event.canvas);\n            const origin = (_a = this.lens) === null || _a === void 0 ? void 0 : _a.getCenter();\n            if (!this.isLensOn || distance(dragOrigin, origin) > this.r)\n                return;\n            this.isLensDragging = true;\n        };\n        this.onDrag = (event) => {\n            if (!this.isLensDragging)\n                return;\n            const dragOrigin = parsePoint(event.canvas);\n            this.renderLens(dragOrigin);\n            this.renderFocusElements();\n        };\n        this.onDragEnd = () => {\n            this.isLensDragging = false;\n        };\n        this.bindEvents();\n    }\n    get canvas() {\n        return this.context.canvas.getLayer('transient');\n    }\n    get isLensOn() {\n        return this.lens && !this.lens.destroyed;\n    }\n    getElementStyle(elementType, datum) {\n        const styler = elementType === 'node' ? this.options.nodeStyle : this.options.edgeStyle;\n        if (typeof styler === 'function')\n            return styler(datum);\n        return styler;\n    }\n    get graphDom() {\n        return this.context.graph.getCanvas().getContextService().getDomElement();\n    }\n    bindEvents() {\n        var _a;\n        const { graph } = this.context;\n        const { trigger, scaleRBy } = this.options;\n        const canvas = graph.getCanvas().getLayer();\n        if (['click', 'drag'].includes(trigger)) {\n            canvas.addEventListener(CommonEvent.CLICK, this.onEdgeFilter);\n        }\n        if (trigger === 'pointermove') {\n            canvas.addEventListener(CommonEvent.POINTER_MOVE, this.onEdgeFilter);\n        }\n        else if (trigger === 'drag') {\n            canvas.addEventListener(CommonEvent.DRAG_START, this.onDragStart);\n            canvas.addEventListener(CommonEvent.DRAG, this.onDrag);\n            canvas.addEventListener(CommonEvent.DRAG_END, this.onDragEnd);\n        }\n        if (scaleRBy === 'wheel') {\n            (_a = this.graphDom) === null || _a === void 0 ? void 0 : _a.addEventListener(CommonEvent.WHEEL, this.scaleRByWheel, { passive: false });\n        }\n    }\n    unbindEvents() {\n        var _a;\n        const { graph } = this.context;\n        const { trigger, scaleRBy } = this.options;\n        const canvas = graph.getCanvas().getLayer();\n        if (['click', 'drag'].includes(trigger)) {\n            canvas.removeEventListener(CommonEvent.CLICK, this.onEdgeFilter);\n        }\n        if (trigger === 'pointermove') {\n            canvas.removeEventListener(CommonEvent.POINTER_MOVE, this.onEdgeFilter);\n        }\n        else if (trigger === 'drag') {\n            canvas.removeEventListener(CommonEvent.DRAG_START, this.onDragStart);\n            canvas.removeEventListener(CommonEvent.DRAG, this.onDrag);\n            canvas.removeEventListener(CommonEvent.DRAG_END, this.onDragEnd);\n        }\n        if (scaleRBy === 'wheel') {\n            (_a = this.graphDom) === null || _a === void 0 ? void 0 : _a.removeEventListener(CommonEvent.WHEEL, this.scaleRByWheel);\n        }\n    }\n    update(options) {\n        var _a;\n        this.unbindEvents();\n        super.update(options);\n        this.r = (_a = options.r) !== null && _a !== void 0 ? _a : this.r;\n        this.bindEvents();\n    }\n    destroy() {\n        this.unbindEvents();\n        if (this.isLensOn) {\n            this.lens.destroy();\n        }\n        this.shapes.forEach((shape, id) => {\n            shape.destroy();\n            this.shapes.delete(id);\n        });\n        super.destroy();\n    }\n}\nEdgeFilterLens.defaultOptions = {\n    trigger: 'pointermove',\n    r: 60,\n    nodeType: 'both',\n    filter: () => true,\n    style: { lineWidth: 2 },\n    nodeStyle: { label: false },\n    edgeStyle: { label: true },\n    scaleRBy: 'wheel',\n    preventDefault: true,\n};\n//# sourceMappingURL=index.js.map","import { pick } from '@antv/util';\nimport { CommonEvent } from '../../constants';\nimport { Circle } from '../../elements';\nimport { arrayDiff } from '../../utils/diff';\nimport { idOf } from '../../utils/id';\nimport { parsePoint, toPointObject } from '../../utils/point';\nimport { positionOf } from '../../utils/position';\nimport { distance } from '../../utils/vector';\nimport { BasePlugin } from '../base-plugin';\nconst defaultLensStyle = {\n    fill: '#ccc',\n    fillOpacity: 0.1,\n    lineWidth: 2,\n    stroke: '#000',\n    strokeOpacity: 0.8,\n    labelFontSize: 12,\n};\nconst R_DELTA = 0.05;\nconst D_DELTA = 0.1;\n/**\n * <zh/> 鱼眼放大镜\n *\n * <en/> Fisheye Distortion\n * @remarks\n * <zh/> Fisheye 鱼眼放大镜是为 focus+context 的探索场景设计的，它能够保证在放大关注区域的同时，保证上下文以及上下文与关注中心的关系不丢失。\n *\n * <en/> Fisheye is designed for focus+context exploration, it keeps the context and the relationships between context and the focus while magnifying the focus area.\n */\nexport class Fisheye extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Fisheye.defaultOptions, options));\n        this.r = this.options.r;\n        this.d = this.options.d;\n        this.onCreateFisheye = (event) => {\n            if (this.options.trigger === 'drag' && this.isLensOn)\n                return;\n            const origin = parsePoint(event.canvas);\n            this.onMagnify(origin);\n        };\n        this.onMagnify = (origin) => {\n            if (origin.some(isNaN))\n                return;\n            this.renderLens(origin);\n            this.renderFocusElements();\n        };\n        this.renderLens = (origin) => {\n            const style = Object.assign({}, defaultLensStyle, this.options.style);\n            if (!this.isLensOn) {\n                this.lens = new Circle({ style });\n                this.canvas.appendChild(this.lens);\n            }\n            Object.assign(style, toPointObject(origin), {\n                size: this.r * 2,\n                label: this.options.showDPercent,\n                labelText: this.getDPercent(),\n            });\n            this.lens.update(style);\n        };\n        this.getDPercent = () => {\n            const { minD, maxD } = this.options;\n            const percent = Math.round(((this.d - minD) / (maxD - minD)) * 100);\n            return `${percent}%`;\n        };\n        this.prevMagnifiedStyleMap = new Map();\n        this.prevOriginStyleMap = new Map();\n        this.renderFocusElements = () => {\n            if (!this.isLensOn)\n                return;\n            const { graph } = this.context;\n            const origin = this.lens.getCenter();\n            const molecularParam = (this.d + 1) * this.r;\n            const magnifiedStyleMap = new Map();\n            const originStyleMap = new Map();\n            const nodeData = graph.getNodeData();\n            nodeData.forEach((datum) => {\n                const position = positionOf(datum);\n                const distanceToOrigin = distance(position, origin);\n                if (distanceToOrigin > this.r)\n                    return;\n                const magnifiedDistance = (molecularParam * distanceToOrigin) / (this.d * distanceToOrigin + this.r);\n                const [nodeX, nodeY] = position;\n                const [originX, originY] = origin;\n                const cos = (nodeX - originX) / distanceToOrigin;\n                const sin = (nodeY - originY) / distanceToOrigin;\n                const newPoint = [originX + magnifiedDistance * cos, originY + magnifiedDistance * sin];\n                const nodeId = idOf(datum);\n                const style = this.getNodeStyle(datum);\n                const originStyle = pick(graph.getElementRenderStyle(nodeId), Object.keys(style));\n                magnifiedStyleMap.set(nodeId, Object.assign(Object.assign({}, toPointObject(newPoint)), style));\n                originStyleMap.set(nodeId, Object.assign(Object.assign({}, toPointObject(position)), originStyle));\n            });\n            this.updateStyle(magnifiedStyleMap, originStyleMap);\n        };\n        this.getNodeStyle = (datum) => {\n            const { nodeStyle } = this.options;\n            return typeof nodeStyle === 'function' ? nodeStyle(datum) : nodeStyle;\n        };\n        this.updateStyle = (magnifiedStyleMap, originStyleMap) => {\n            const { graph, element } = this.context;\n            const { enter, exit, keep } = arrayDiff(Array.from(this.prevMagnifiedStyleMap.keys()), Array.from(magnifiedStyleMap.keys()), (d) => d);\n            const relatedEdges = new Set();\n            const update = (nodeId, style) => {\n                const node = element.getElement(nodeId);\n                node === null || node === void 0 ? void 0 : node.update(style);\n                graph.getRelatedEdgesData(nodeId).forEach((datum) => {\n                    relatedEdges.add(idOf(datum));\n                });\n            };\n            [...enter, ...keep].forEach((nodeId) => {\n                update(nodeId, magnifiedStyleMap.get(nodeId));\n            });\n            exit.forEach((nodeId) => {\n                update(nodeId, this.prevOriginStyleMap.get(nodeId));\n                this.prevOriginStyleMap.delete(nodeId);\n            });\n            relatedEdges.forEach((edgeId) => {\n                const edge = element.getElement(edgeId);\n                edge === null || edge === void 0 ? void 0 : edge.update({});\n            });\n            this.prevMagnifiedStyleMap = magnifiedStyleMap;\n            originStyleMap.forEach((style, nodeId) => {\n                if (!this.prevOriginStyleMap.has(nodeId)) {\n                    this.prevOriginStyleMap.set(nodeId, style);\n                }\n            });\n        };\n        this.isWheelValid = (event) => {\n            if (this.options.preventDefault)\n                event.preventDefault();\n            if (!this.isLensOn)\n                return false;\n            const { clientX, clientY } = event;\n            const scaleOrigin = this.context.graph.getCanvasByClient([clientX, clientY]);\n            const origin = this.lens.getCenter();\n            if (distance(scaleOrigin, origin) > this.r)\n                return false;\n            return true;\n        };\n        this.scaleR = (positive) => {\n            const { maxR, minR } = this.options;\n            const ratio = positive ? 1 / (1 - R_DELTA) : 1 - R_DELTA;\n            const canvasR = Math.min(...this.context.canvas.getSize()) / 2;\n            this.r = Math.max(minR || 0, Math.min(maxR || canvasR, this.r * ratio));\n        };\n        this.scaleD = (positive) => {\n            const { maxD, minD } = this.options;\n            const newD = positive ? this.d + D_DELTA : this.d - D_DELTA;\n            this.d = Math.max(minD, Math.min(maxD, newD));\n        };\n        this.scaleRByWheel = (event) => {\n            if (!this.isWheelValid(event))\n                return;\n            const { deltaX, deltaY } = event;\n            this.scaleR(deltaX + deltaY > 0);\n            const origin = this.lens.getCenter();\n            this.onMagnify(origin);\n        };\n        this.scaleDByWheel = (event) => {\n            if (!this.isWheelValid(event))\n                return;\n            const { deltaX, deltaY } = event;\n            this.scaleD(deltaX + deltaY > 0);\n            const origin = this.lens.getCenter();\n            this.onMagnify(origin);\n        };\n        this.isDragValid = (event) => {\n            if (this.options.preventDefault)\n                event.preventDefault();\n            if (!this.isLensOn)\n                return false;\n            const dragOrigin = parsePoint(event.canvas);\n            const origin = this.lens.getCenter();\n            if (distance(dragOrigin, origin) > this.r)\n                return false;\n            return true;\n        };\n        this.isLensDragging = false;\n        this.onDragStart = (event) => {\n            if (!this.isDragValid(event))\n                return;\n            this.isLensDragging = true;\n        };\n        this.onDrag = (event) => {\n            if (!this.isLensDragging)\n                return;\n            const dragOrigin = parsePoint(event.canvas);\n            this.onMagnify(dragOrigin);\n        };\n        this.onDragEnd = () => {\n            this.isLensDragging = false;\n        };\n        this.scaleRByDrag = (event) => {\n            if (!this.isLensDragging)\n                return;\n            const { dx, dy } = event;\n            this.scaleR(dx - dy > 0);\n            const origin = this.lens.getCenter();\n            this.onMagnify(origin);\n        };\n        this.scaleDByDrag = (event) => {\n            if (!this.isLensDragging)\n                return;\n            const { dx, dy } = event;\n            this.scaleD(dx - dy > 0);\n            const origin = this.lens.getCenter();\n            this.onMagnify(origin);\n        };\n        this.bindEvents();\n    }\n    get canvas() {\n        return this.context.canvas.getLayer('transient');\n    }\n    get isLensOn() {\n        return this.lens && !this.lens.destroyed;\n    }\n    get graphDom() {\n        return this.context.graph.getCanvas().getContextService().getDomElement();\n    }\n    bindEvents() {\n        var _a;\n        const { graph } = this.context;\n        const { trigger, scaleRBy, scaleDBy } = this.options;\n        const canvas = graph.getCanvas().getLayer();\n        if (['click', 'drag'].includes(trigger)) {\n            canvas.addEventListener(CommonEvent.CLICK, this.onCreateFisheye);\n        }\n        if (trigger === 'pointermove') {\n            canvas.addEventListener(CommonEvent.POINTER_MOVE, this.onCreateFisheye);\n        }\n        if (trigger === 'drag' || scaleRBy === 'drag' || scaleDBy === 'drag') {\n            canvas.addEventListener(CommonEvent.DRAG_START, this.onDragStart);\n            canvas.addEventListener(CommonEvent.DRAG_END, this.onDragEnd);\n            const dragFunc = trigger === 'drag' ? this.onDrag : scaleRBy === 'drag' ? this.scaleRByDrag : this.scaleDByDrag;\n            canvas.addEventListener(CommonEvent.DRAG, dragFunc);\n        }\n        if (scaleRBy === 'wheel' || scaleDBy === 'wheel') {\n            const wheelFunc = scaleRBy === 'wheel' ? this.scaleRByWheel : this.scaleDByWheel;\n            (_a = this.graphDom) === null || _a === void 0 ? void 0 : _a.addEventListener(CommonEvent.WHEEL, wheelFunc, { passive: false });\n        }\n    }\n    unbindEvents() {\n        var _a;\n        const { graph } = this.context;\n        const { trigger, scaleRBy, scaleDBy } = this.options;\n        const canvas = graph.getCanvas().getLayer();\n        if (['click', 'drag'].includes(trigger)) {\n            canvas.removeEventListener(CommonEvent.CLICK, this.onCreateFisheye);\n        }\n        if (trigger === 'pointermove') {\n            canvas.removeEventListener(CommonEvent.POINTER_MOVE, this.onCreateFisheye);\n        }\n        if (trigger === 'drag' || scaleRBy === 'drag' || scaleDBy === 'drag') {\n            canvas.removeEventListener(CommonEvent.DRAG_START, this.onDragStart);\n            canvas.removeEventListener(CommonEvent.DRAG_END, this.onDragEnd);\n            const dragFunc = trigger === 'drag' ? this.onDrag : scaleRBy === 'drag' ? this.scaleRByDrag : this.scaleDByDrag;\n            canvas.removeEventListener(CommonEvent.DRAG, dragFunc);\n        }\n        if (scaleRBy === 'wheel' || scaleDBy === 'wheel') {\n            const wheelFunc = scaleRBy === 'wheel' ? this.scaleRByWheel : this.scaleDByWheel;\n            (_a = this.graphDom) === null || _a === void 0 ? void 0 : _a.removeEventListener(CommonEvent.WHEEL, wheelFunc);\n        }\n    }\n    update(options) {\n        var _a, _b;\n        this.unbindEvents();\n        super.update(options);\n        this.r = (_a = options.r) !== null && _a !== void 0 ? _a : this.r;\n        this.d = (_b = options.d) !== null && _b !== void 0 ? _b : this.d;\n        this.bindEvents();\n    }\n    destroy() {\n        var _a;\n        this.unbindEvents();\n        if (this.isLensOn) {\n            (_a = this.lens) === null || _a === void 0 ? void 0 : _a.destroy();\n        }\n        this.prevMagnifiedStyleMap.clear();\n        this.prevOriginStyleMap.clear();\n        super.destroy();\n    }\n}\nFisheye.defaultOptions = {\n    trigger: 'pointermove',\n    r: 120,\n    d: 1.5,\n    maxD: 5,\n    minD: 0,\n    showDPercent: true,\n    style: {},\n    nodeStyle: { label: true },\n    preventDefault: true,\n};\n//# sourceMappingURL=index.js.map","import { print } from '../../utils/print';\nimport { Shortcut } from '../../utils/shortcut';\nimport { BasePlugin } from '../base-plugin';\n/**\n * <zh/> 全屏\n *\n * <en/> Full screen\n */\nexport class Fullscreen extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Fullscreen.defaultOptions, options));\n        this.$el = this.context.canvas.getContainer();\n        this.graphSize = [0, 0];\n        this.onFullscreenChange = () => {\n            var _a, _b, _c, _d;\n            const isFull = !!document.fullscreenElement;\n            if (this.options.autoFit)\n                this.setGraphSize(isFull);\n            if (isFull) {\n                (_b = (_a = this.options).onEnter) === null || _b === void 0 ? void 0 : _b.call(_a);\n            }\n            else {\n                (_d = (_c = this.options).onExit) === null || _d === void 0 ? void 0 : _d.call(_c);\n            }\n        };\n        this.shortcut = new Shortcut(context.graph);\n        this.bindEvents();\n        this.style = document.createElement('style');\n        document.head.appendChild(this.style);\n        this.style.innerHTML = `\n      :not(:root):fullscreen::backdrop {\n        background: transparent;\n      }\n    `;\n    }\n    bindEvents() {\n        this.unbindEvents();\n        this.shortcut.unbindAll();\n        const { request = [], exit = [] } = this.options.trigger;\n        this.shortcut.bind(request, this.request);\n        this.shortcut.bind(exit, this.exit);\n        const events = ['webkitfullscreenchange', 'mozfullscreenchange', 'fullscreenchange', 'MSFullscreenChange'];\n        events.forEach((eventName) => {\n            document.addEventListener(eventName, this.onFullscreenChange, false);\n        });\n    }\n    unbindEvents() {\n        this.shortcut.unbindAll();\n        const events = ['webkitfullscreenchange', 'mozfullscreenchange', 'fullscreenchange', 'MSFullscreenChange'];\n        events.forEach((eventName) => {\n            document.removeEventListener(eventName, this.onFullscreenChange, false);\n        });\n    }\n    setGraphSize(fullScreen = true) {\n        var _a, _b;\n        let width, height;\n        if (fullScreen) {\n            width = ((_a = globalThis.screen) === null || _a === void 0 ? void 0 : _a.width) || 0;\n            height = ((_b = globalThis.screen) === null || _b === void 0 ? void 0 : _b.height) || 0;\n            this.graphSize = this.context.graph.getSize();\n        }\n        else {\n            [width, height] = this.graphSize;\n        }\n        this.context.graph.setSize(width, height);\n        this.context.graph.render();\n    }\n    /**\n     * <zh/> 请求全屏\n     *\n     * <en/> Request full screen\n     */\n    request() {\n        if (document.fullscreenElement || !isFullscreenEnabled())\n            return;\n        this.$el.requestFullscreen().catch((err) => {\n            print.warn(`Error attempting to enable full-screen: ${err.message} (${err.name})`);\n        });\n    }\n    /**\n     * <zh/> 退出全屏\n     *\n     * <en/> Exit full screen\n     */\n    exit() {\n        if (!document.fullscreenElement)\n            return;\n        document.exitFullscreen();\n    }\n    /**\n     * <zh/> 更新配置\n     *\n     * <en/> Update options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    destroy() {\n        this.exit();\n        this.style.remove();\n        super.destroy();\n    }\n}\nFullscreen.defaultOptions = {\n    trigger: {},\n    autoFit: true,\n};\n/**\n * <zh/> 判断是否支持全屏\n *\n * <en/> Determine whether full screen is enabled\n * @returns <zh/> 是否支持全屏 | <en/> Whether full screen is enabled\n */\nfunction isFullscreenEnabled() {\n    return (document.fullscreenEnabled ||\n        // <zh/> 使用 Reflect 语法规避 ts 检查 | <en/> use Reflect to avoid ts checking\n        Reflect.get(document, 'webkitFullscreenEnabled') ||\n        Reflect.get(document, 'mozFullscreenEnabled') ||\n        Reflect.get(document, 'msFullscreenEnabled'));\n}\n//# sourceMappingURL=index.js.map","import { isBoolean } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport { add, mod, multiply } from '../utils/vector';\nimport { BasePlugin } from './base-plugin';\nimport { createPluginContainer } from './utils/dom';\n/**\n * <zh/> 网格线\n *\n * <en/> Grid line\n * @remarks\n * <zh/> 网格线插件，多用于辅助绘图\n *\n * <en/> Grid line plugin, often used to auxiliary drawing\n */\nexport class GridLine extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, GridLine.defaultOptions, options));\n        this.$element = createPluginContainer('grid-line', true);\n        this.offset = [0, 0];\n        this.currentScale = 1;\n        this.followZoom = (event) => {\n            const { data: { scale, origin }, } = event;\n            if (!scale)\n                return;\n            const prevScale = this.currentScale;\n            this.currentScale = scale;\n            const deltaScale = scale / prevScale;\n            const positionOffset = multiply(origin || this.context.graph.getCanvasCenter(), 1 - deltaScale);\n            const scaledSize = this.baseSize * scale;\n            const scaledOffset = multiply(this.offset, deltaScale);\n            const modulatedOffset = mod(scaledOffset, scaledSize);\n            const newOffset = add(modulatedOffset, positionOffset);\n            this.$element.style.backgroundSize = `${scaledSize}px ${scaledSize}px`;\n            this.$element.style.backgroundPosition = `${newOffset[0]}px ${newOffset[1]}px`;\n            this.offset = mod(newOffset, scaledSize);\n        };\n        this.followTranslate = (event) => {\n            if (!this.options.follow)\n                return;\n            const { data: { translate }, } = event;\n            if (translate)\n                this.updateOffset(translate);\n        };\n        this.onTransform = (event) => {\n            const follow = this.parseFollow(this.options.follow);\n            if (follow.zoom)\n                this.followZoom(event);\n            if (follow.translate)\n                this.followTranslate(event);\n        };\n        const $container = this.context.canvas.getContainer();\n        $container.prepend(this.$element);\n        this.baseSize = this.options.size;\n        this.updateStyle();\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 更新网格线配置\n     *\n     * <en/> Update the configuration of the grid line\n     * @param options - <zh/> 配置项 | <en/> options\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        if (options.size !== undefined) {\n            this.baseSize = options.size;\n        }\n        this.updateStyle();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        graph.on(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n    }\n    updateStyle() {\n        const { stroke, lineWidth, border, borderLineWidth, borderStroke, borderStyle } = this.options;\n        const scaledSize = this.baseSize * this.currentScale;\n        Object.assign(this.$element.style, {\n            border: border ? `${borderLineWidth}px ${borderStyle} ${borderStroke}` : 'none',\n            backgroundImage: `linear-gradient(${stroke} ${lineWidth}px, transparent ${lineWidth}px), linear-gradient(90deg, ${stroke} ${lineWidth}px, transparent ${lineWidth}px)`,\n            backgroundSize: `${scaledSize}px ${scaledSize}px`,\n            backgroundRepeat: 'repeat',\n        });\n    }\n    updateOffset(delta) {\n        const scaledSize = this.baseSize * this.currentScale;\n        this.offset = mod(add(this.offset, delta), scaledSize);\n        this.$element.style.backgroundPosition = `${this.offset[0]}px ${this.offset[1]}px`;\n    }\n    parseFollow(follow) {\n        var _a, _b;\n        return isBoolean(follow)\n            ? { translate: follow, zoom: follow }\n            : { translate: (_a = follow === null || follow === void 0 ? void 0 : follow.translate) !== null && _a !== void 0 ? _a : false, zoom: (_b = follow === null || follow === void 0 ? void 0 : follow.zoom) !== null && _b !== void 0 ? _b : false };\n    }\n    /**\n     * <zh/> 销毁网格线\n     *\n     * <en/> Destroy the grid line\n     * @internal\n     */\n    destroy() {\n        this.context.graph.off(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n        this.$element.remove();\n        super.destroy();\n    }\n}\nGridLine.defaultOptions = {\n    border: true,\n    borderLineWidth: 1,\n    borderStroke: '#eee',\n    borderStyle: 'solid',\n    lineWidth: 1,\n    size: 20,\n    stroke: '#eee',\n};\n//# sourceMappingURL=grid-line.js.map","import { groupBy } from '@antv/util';\nimport { idOf } from './id';\n/**\n * <zh/> 对数据操作进行约简\n *\n * <en/> Reduce data changes\n * @param changes - <zh/> 数据操作 | <en/> data changes\n * @returns <zh/> 约简后的数据操作 | <en/> reduced data changes\n */\nexport function reduceDataChanges(changes) {\n    const results = {\n        Added: new Map(),\n        Updated: new Map(),\n        Removed: new Map(),\n    };\n    changes.forEach((change) => {\n        const { type, value } = change;\n        const id = idOf(value);\n        if (type === 'NodeAdded' || type === 'EdgeAdded' || type === 'ComboAdded') {\n            results.Added.set(id, change);\n        }\n        else if (type === 'NodeUpdated' || type === 'EdgeUpdated' || type === 'ComboUpdated') {\n            // 如果存在 Added，将当前操作置为 Added 操作\n            // If there is an Added operation, set the current operation to Added\n            if (results.Added.has(id)) {\n                results.Added.set(id, { type: type.replace('Updated', 'Added'), value });\n            }\n            // 如果存在 Updated，将当前操作置为 Updated 操作，但使用更早版本的 original\n            // If there is an Updated operation, set the current operation to Updated, but use an earlier version of original\n            else if (results.Updated.has(id)) {\n                const { original } = results.Updated.get(id);\n                results.Updated.set(id, { type, value, original });\n            }\n            else if (results.Removed.has(id)) {\n                // 如果存在 Removed，不做任何操作\n                // If there is a Removed operation, do nothing\n            }\n            else\n                results.Updated.set(id, change);\n        }\n        else if (type === 'NodeRemoved' || type === 'EdgeRemoved' || type === 'ComboRemoved') {\n            // 如果存在 Added 或者 Updated 的操作，删除 Removed 操作\n            // If there is an Added or Updated operation, delete the Removed operation\n            if (results.Added.has(id)) {\n                results.Added.delete(id);\n            }\n            else if (results.Updated.has(id)) {\n                results.Updated.delete(id);\n                results.Removed.set(id, change);\n            }\n            else {\n                results.Removed.set(id, change);\n            }\n        }\n    });\n    // 顺序并不重要\n    // The order is not important\n    return [\n        ...Array.from(results.Added.values()),\n        ...Array.from(results.Updated.values()),\n        ...Array.from(results.Removed.values()),\n    ];\n}\n/**\n * <zh/> 对数据操作进行分类\n *\n * <en/> Classify data changes\n * @param changes - <zh/> 数据操作 | <en/> data changes\n * @returns <zh/> 分类后的数据操作 | <en/> classified data changes\n */\nexport function groupByChangeType(changes) {\n    const { NodeAdded = [], NodeUpdated = [], NodeRemoved = [], EdgeAdded = [], EdgeUpdated = [], EdgeRemoved = [], ComboAdded = [], ComboUpdated = [], ComboRemoved = [], } = groupBy(changes, (change) => change.type);\n    return {\n        add: {\n            nodes: NodeAdded,\n            edges: EdgeAdded,\n            combos: ComboAdded,\n        },\n        update: {\n            nodes: NodeUpdated,\n            edges: EdgeUpdated,\n            combos: ComboUpdated,\n        },\n        remove: {\n            nodes: NodeRemoved,\n            edges: EdgeRemoved,\n            combos: ComboRemoved,\n        },\n    };\n}\n//# sourceMappingURL=change.js.map","import { isObject } from '@antv/util';\nimport { inferDefaultValue } from '../../utils/animation';\nimport { groupByChangeType, reduceDataChanges } from '../../utils/change';\nimport { idOf } from '../../utils/id';\n/**\n * <zh/> 对齐两个对象的字段。若目标对象缺少字段，则会添加默认值。\n *\n * <en/> Align the fields of two objects. If the target object lacks fields, default values will be added.\n * @param refObject - <zh/> 参考对象 ｜ <en/> Reference object\n * @param targetObject - <zh/> 目标对象 ｜ <en/> Target object\n */\nexport function alignFields(refObject, targetObject) {\n    for (const key in refObject) {\n        if (isObject(refObject[key]) && !Array.isArray(refObject[key]) && refObject[key] !== null) {\n            if (!targetObject[key])\n                targetObject[key] = {};\n            alignFields(refObject[key], targetObject[key]);\n        }\n        else if (targetObject[key] === undefined) {\n            targetObject[key] = inferDefaultValue(key);\n        }\n    }\n}\n/**\n * <zh/> 解析数据变更为历史记录命令\n *\n * <en/> Parse data changes into history commands\n * @param changes - <zh/> 数据变更 ｜ <en/> Data changes\n * @param animation - <zh/> 是否开启动画 ｜ <en/> Whether to enable animation\n * @param context - <zh/> 运行时上下文 ｜ <en/> Runtime context\n * @returns <zh/> 历史记录命令 ｜ <en/> History command\n */\nexport function parseCommand(changes, animation = false, context) {\n    const cmd = {\n        animation,\n        current: { add: {}, update: {}, remove: {} },\n        original: { add: {}, update: {}, remove: {} },\n    };\n    const { add, update, remove } = groupByChangeType(reduceDataChanges(changes));\n    ['nodes', 'edges', 'combos'].forEach((category) => {\n        if (update[category]) {\n            update[category].forEach((item) => {\n                var _a, _b;\n                const newValue = Object.assign({}, item.value);\n                let newOriginal = Object.assign({}, item.original);\n                if (context) {\n                    // 特殊处理：获取元素原始 color\n                    const itemType = context.graph.getElementType(idOf(item.original));\n                    const colorKey = itemType === 'edge' ? 'stroke' : 'fill';\n                    const style = context.element.getElementComputedStyle(itemType, item.original);\n                    newOriginal = Object.assign(Object.assign({}, item.original), { style: Object.assign({ [colorKey]: style[colorKey] }, item.original.style) });\n                }\n                alignFields(newValue, newOriginal);\n                (_a = cmd.current.update)[category] || (_a[category] = []);\n                cmd.current.update[category].push(newValue);\n                (_b = cmd.original.update)[category] || (_b[category] = []);\n                cmd.original.update[category].push(newOriginal);\n            });\n        }\n        if (add[category]) {\n            add[category].forEach((item) => {\n                var _a, _b;\n                const newValue = Object.assign({}, item.value);\n                (_a = cmd.current.add)[category] || (_a[category] = []);\n                cmd.current.add[category].push(newValue);\n                (_b = cmd.original.remove)[category] || (_b[category] = []);\n                cmd.original.remove[category].push(newValue);\n            });\n        }\n        if (remove[category]) {\n            remove[category].forEach((item) => {\n                var _a, _b;\n                const newValue = Object.assign({}, item.value);\n                (_a = cmd.current.remove)[category] || (_a[category] = []);\n                cmd.current.remove[category].push(newValue);\n                (_b = cmd.original.add)[category] || (_b[category] = []);\n                cmd.original.add[category].push(newValue);\n            });\n        }\n    });\n    return cmd;\n}\n//# sourceMappingURL=util.js.map","import EventEmitter from '@antv/event-emitter';\nimport { GraphEvent } from '../../constants';\nimport { HistoryEvent } from '../../constants/events/history';\nimport { idsOf } from '../../utils/id';\nimport { BasePlugin } from '../base-plugin';\nimport { parseCommand } from './util';\n/**\n * <zh/> 历史记录\n *\n * <en/> History\n * @remarks\n * <zh/> 历史记录用于记录图的数据变化，支持撤销和重做等操作。\n *\n * <en/> History is used to record data changes in the graph and supports operations such as undo and redo.\n */\nexport class History extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, History.defaultOptions, options));\n        this.batchChanges = null;\n        this.batchAnimation = false;\n        this.undoStack = [];\n        this.redoStack = [];\n        this.freezed = false;\n        this.executeCommand = (cmd, revert = true) => {\n            var _a, _b, _c;\n            this.freezed = true;\n            (_b = (_a = this.options).executeCommand) === null || _b === void 0 ? void 0 : _b.call(_a, cmd);\n            const values = revert ? cmd.original : cmd.current;\n            this.context.graph.addData(values.add);\n            this.context.graph.updateData(values.update);\n            this.context.graph.removeData(idsOf(values.remove, false));\n            (_c = this.context.element) === null || _c === void 0 ? void 0 : _c.draw({ silence: true, animation: cmd.animation });\n            this.freezed = false;\n        };\n        this.addCommand = (event) => {\n            var _a;\n            if (this.freezed)\n                return;\n            if (event.type === GraphEvent.AFTER_DRAW) {\n                const { dataChanges = [], animation = true } = event.data;\n                if ((_a = this.context.batch) === null || _a === void 0 ? void 0 : _a.isBatching) {\n                    if (!this.batchChanges)\n                        return;\n                    this.batchChanges.push(dataChanges);\n                    this.batchAnimation && (this.batchAnimation = animation);\n                    return;\n                }\n                this.batchChanges = [dataChanges];\n                this.batchAnimation = animation;\n            }\n            this.undoStackPush(parseCommand(this.batchChanges.flat(), this.batchAnimation, this.context));\n            this.notify(HistoryEvent.ADD, this.undoStack[this.undoStack.length - 1]);\n        };\n        this.initBatchCommand = (event) => {\n            const { initiate } = event.data;\n            this.batchAnimation = false;\n            if (initiate) {\n                this.batchChanges = [];\n            }\n            else {\n                const cmd = this.undoStack.pop();\n                if (!cmd)\n                    this.batchChanges = null;\n            }\n        };\n        this.emitter = new EventEmitter();\n        const { graph } = this.context;\n        graph.on(GraphEvent.AFTER_DRAW, this.addCommand);\n        graph.on(GraphEvent.BATCH_START, this.initBatchCommand);\n        graph.on(GraphEvent.BATCH_END, this.addCommand);\n    }\n    /**\n     * <zh/> 是否可以执行撤销操作\n     *\n     * <en/> Whether undo can be done\n     * @returns <zh/> 是否可以执行撤销操作 | <en/> Whether undo can be done\n     */\n    canUndo() {\n        return this.undoStack.length > 0;\n    }\n    /**\n     * <zh/> 是否可以执行重做操作\n     *\n     * <en/> Whether redo can be done\n     * @returns <zh/> 是否可以执行重做操作 | <en/> Whether redo can be done\n     */\n    canRedo() {\n        return this.redoStack.length > 0;\n    }\n    /**\n     * <zh/> 执行撤销\n     *\n     * <en/> Execute undo\n     * @returns <zh/> 返回当前实例 | <en/> Return the current instance\n     */\n    undo() {\n        var _a, _b, _c, _d;\n        const cmd = this.undoStack.pop();\n        if (cmd) {\n            this.executeCommand(cmd);\n            const before = (_b = (_a = this.options).beforeAddCommand) === null || _b === void 0 ? void 0 : _b.call(_a, cmd, false);\n            if (before === false)\n                return;\n            this.redoStack.push(cmd);\n            (_d = (_c = this.options).afterAddCommand) === null || _d === void 0 ? void 0 : _d.call(_c, cmd, false);\n            this.notify(HistoryEvent.UNDO, cmd);\n        }\n        return this;\n    }\n    /**\n     * <zh/> 执行重做\n     *\n     * <en/> Execute redo\n     * @returns <zh/> 返回当前实例 | <en/> Return the current instance\n     */\n    redo() {\n        const cmd = this.redoStack.pop();\n        if (cmd) {\n            this.executeCommand(cmd, false);\n            this.undoStackPush(cmd);\n            this.notify(HistoryEvent.REDO, cmd);\n        }\n        return this;\n    }\n    /**\n     * <zh/> 执行撤销且不计入历史记录\n     *\n     * <en/> Execute undo and do not record in history\n     * @returns <zh/> 返回当前实例 | <en/> Return the current instance\n     */\n    undoAndCancel() {\n        const cmd = this.undoStack.pop();\n        if (cmd) {\n            this.executeCommand(cmd, false);\n            this.redoStack = [];\n            this.notify(HistoryEvent.CANCEL, cmd);\n        }\n        return this;\n    }\n    undoStackPush(cmd) {\n        var _a, _b, _c, _d;\n        const { stackSize } = this.options;\n        if (stackSize !== 0 && this.undoStack.length >= stackSize) {\n            this.undoStack.shift();\n        }\n        const before = (_b = (_a = this.options).beforeAddCommand) === null || _b === void 0 ? void 0 : _b.call(_a, cmd, true);\n        if (before === false)\n            return;\n        this.undoStack.push(cmd);\n        (_d = (_c = this.options).afterAddCommand) === null || _d === void 0 ? void 0 : _d.call(_c, cmd, true);\n    }\n    /**\n     * <zh/> 清空历史记录\n     *\n     * <en/> Clear history\n     */\n    clear() {\n        this.undoStack = [];\n        this.redoStack = [];\n        this.batchChanges = null;\n        this.batchAnimation = false;\n        this.notify(HistoryEvent.CLEAR, null);\n    }\n    notify(event, cmd) {\n        this.emitter.emit(event, { cmd });\n        this.emitter.emit(HistoryEvent.CHANGE, { cmd });\n    }\n    /**\n     * <zh/> 监听历史记录事件\n     *\n     * <en/> Listen to history events\n     * @param event  - <zh/> 事件名称 | <en/> Event name\n     * @param handler - <zh/> 事件处理函数 | <en/> Event handler\n     */\n    on(event, handler) {\n        this.emitter.on(event, handler);\n    }\n    /**\n     * <zh/> 销毁\n     *\n     * <en/> Destroy\n     * @internal\n     */\n    destroy() {\n        const { graph } = this.context;\n        graph.off(GraphEvent.AFTER_DRAW, this.addCommand);\n        graph.off(GraphEvent.BATCH_START, this.initBatchCommand);\n        graph.off(GraphEvent.BATCH_END, this.addCommand);\n        this.emitter.off();\n        super.destroy();\n        this.undoStack = [];\n        this.redoStack = [];\n    }\n}\nHistory.defaultOptions = {\n    stackSize: 0,\n};\n//# sourceMappingURL=index.js.map","export const formatUtil = {\n    toXy(pointset, format) {\n        if (!format)\n            return [...pointset];\n        const xProperty = format[0].slice(1);\n        const yProperty = format[1].slice(1);\n        return pointset.map((pt) => [pt[xProperty], pt[yProperty]]);\n    },\n    fromXy(coordinates, format) {\n        if (!format)\n            return [...coordinates];\n        const xProperty = format[0].slice(1);\n        const yProperty = format[1].slice(1);\n        return coordinates.map(([x, y]) => ({\n            [xProperty]: x,\n            [yProperty]: y,\n        }));\n    },\n};\n//# sourceMappingURL=format.js.map","export class Grid {\n    constructor(points, cellSize) {\n        this._cells = [];\n        this._cellSize = cellSize;\n        this._reverseCellSize = 1 / cellSize;\n        for (const point of points) {\n            const x = this.coordToCellNum(point[0]);\n            const y = this.coordToCellNum(point[1]);\n            if (!this._cells[x]) {\n                this._cells[x] = [];\n            }\n            if (!this._cells[x][y]) {\n                this._cells[x][y] = [];\n            }\n            this._cells[x][y].push(point);\n        }\n    }\n    cellPoints(x, y) {\n        var _a;\n        return ((_a = this._cells[x]) === null || _a === void 0 ? void 0 : _a[y]) || [];\n    }\n    rangePoints(bbox) {\n        const tlCellX = this.coordToCellNum(bbox[0]);\n        const tlCellY = this.coordToCellNum(bbox[1]);\n        const brCellX = this.coordToCellNum(bbox[2]);\n        const brCellY = this.coordToCellNum(bbox[3]);\n        const points = [];\n        for (let x = tlCellX; x <= brCellX; x++) {\n            for (let y = tlCellY; y <= brCellY; y++) {\n                const cell = this.cellPoints(x, y);\n                for (const point of cell) {\n                    points.push(point);\n                }\n            }\n        }\n        return points;\n    }\n    removePoint(point) {\n        const cellX = this.coordToCellNum(point[0]);\n        const cellY = this.coordToCellNum(point[1]);\n        const cell = this._cells[cellX][cellY];\n        const index = cell.findIndex(([px, py]) => px === point[0] && py === point[1]);\n        if (index > -1) {\n            cell.splice(index, 1);\n        }\n        return cell;\n    }\n    trunc(val) {\n        return Math.trunc(val);\n    }\n    coordToCellNum(x) {\n        return this.trunc(x * this._reverseCellSize);\n    }\n    extendBbox(bbox, scaleFactor) {\n        return [\n            bbox[0] - scaleFactor * this._cellSize,\n            bbox[1] - scaleFactor * this._cellSize,\n            bbox[2] + scaleFactor * this._cellSize,\n            bbox[3] + scaleFactor * this._cellSize,\n        ];\n    }\n}\nexport function grid(points, cellSize) {\n    return new Grid(points, cellSize);\n}\n//# sourceMappingURL=grid_handle.js.map","'use strict';\nconst SPLITTER = +(Math.pow(2, 27) + 1.0);\nexport function twoProduct(a, b, result) {\n    const x = a * b;\n    const c = SPLITTER * a;\n    const a_big = c - a;\n    const ahi = c - a_big;\n    const alo = a - ahi;\n    const d = SPLITTER * b;\n    const b_big = d - b;\n    const bhi = d - b_big;\n    const blo = b - bhi;\n    const err1 = x - ahi * bhi;\n    const err2 = err1 - alo * bhi;\n    const err3 = err2 - ahi * blo;\n    const y = alo * blo - err3;\n    if (result) {\n        result[0] = y;\n        result[1] = x;\n        return result;\n    }\n    return [y, x];\n}\n//# sourceMappingURL=two-product.js.map","'use strict';\nexport function fastTwoSum(a, b, result) {\n    const x = a + b;\n    const bv = x - a;\n    const av = x - bv;\n    const br = b - bv;\n    const ar = a - av;\n    if (result) {\n        result[0] = ar + br;\n        result[1] = x;\n        return result;\n    }\n    return [ar + br, x];\n}\n//# sourceMappingURL=two-sum.js.map","'use strict';\nimport { twoProduct } from './two-product';\nimport { fastTwoSum as twoSum } from './two-sum';\nexport function scaleLinearExpansion(e, scale) {\n    const n = e.length;\n    if (n === 1) {\n        const ts = twoProduct(e[0], scale);\n        if (ts[0]) {\n            return ts;\n        }\n        return [ts[1]];\n    }\n    const g = new Array(2 * n);\n    const q = [0.1, 0.1];\n    const t = [0.1, 0.1];\n    let count = 0;\n    twoProduct(e[0], scale, q);\n    if (q[0]) {\n        g[count++] = q[0];\n    }\n    for (let i = 1; i < n; ++i) {\n        twoProduct(e[i], scale, t);\n        const pq = q[1];\n        twoSum(pq, t[0], q);\n        if (q[0]) {\n            g[count++] = q[0];\n        }\n        const a = t[1];\n        const b = q[1];\n        const x = a + b;\n        const bv = x - a;\n        const y = b - bv;\n        q[1] = x;\n        if (y) {\n            g[count++] = y;\n        }\n    }\n    if (q[1]) {\n        g[count++] = q[1];\n    }\n    if (count === 0) {\n        g[count++] = 0.0;\n    }\n    g.length = count;\n    return g;\n}\n//# sourceMappingURL=robust-scale.js.map","'use strict';\nfunction scalarScalar(a, b) {\n    const x = a + b;\n    const bv = x - a;\n    const av = x - bv;\n    const br = b - bv;\n    const ar = a - av;\n    const y = ar + br;\n    if (y) {\n        return [y, x];\n    }\n    return [x];\n}\nexport function robustSubtract(e, f) {\n    const ne = e.length | 0;\n    const nf = f.length | 0;\n    // Base case: scalar subtraction\n    if (ne === 1 && nf === 1) {\n        return scalarScalar(e[0], -f[0]);\n    }\n    const n = ne + nf;\n    const g = new Array(n);\n    let count = 0;\n    let ep_tr = 0;\n    let fp_tr = 0;\n    const abs = Math.abs;\n    let ei = e[ep_tr];\n    let ea = abs(ei);\n    let fi = -f[fp_tr];\n    let fa = abs(fi);\n    let a, b;\n    // Initial comparison to determine `a` and `b`\n    if (ea < fa) {\n        b = ei;\n        ep_tr += 1;\n        if (ep_tr < ne) {\n            ei = e[ep_tr];\n            ea = abs(ei);\n        }\n    }\n    else {\n        b = fi;\n        fp_tr += 1;\n        if (fp_tr < nf) {\n            fi = -f[fp_tr];\n            fa = abs(fi);\n        }\n    }\n    if ((ep_tr < ne && ea < fa) || fp_tr >= nf) {\n        a = ei;\n        ep_tr += 1;\n        if (ep_tr < ne) {\n            ei = e[ep_tr];\n            ea = abs(ei);\n        }\n    }\n    else {\n        a = fi;\n        fp_tr += 1;\n        if (fp_tr < nf) {\n            fi = -f[fp_tr];\n            fa = abs(fi);\n        }\n    }\n    let x = a + b;\n    let bv = x - a;\n    let y = b - bv;\n    let q0 = y;\n    let q1 = x;\n    let _x, _bv, _av, _br, _ar;\n    // Main loop for combining expansions\n    while (ep_tr < ne && fp_tr < nf) {\n        if (ea < fa) {\n            a = ei;\n            ep_tr += 1;\n            if (ep_tr < ne) {\n                ei = e[ep_tr];\n                ea = abs(ei);\n            }\n        }\n        else {\n            a = fi;\n            fp_tr += 1;\n            if (fp_tr < nf) {\n                fi = -f[fp_tr];\n                fa = abs(fi);\n            }\n        }\n        b = q0;\n        x = a + b;\n        bv = x - a;\n        y = b - bv;\n        if (y) {\n            g[count++] = y;\n        }\n        _x = q1 + x;\n        _bv = _x - q1;\n        _av = _x - _bv;\n        _br = x - _bv;\n        _ar = q1 - _av;\n        q0 = _ar + _br;\n        q1 = _x;\n    }\n    // Handle remaining elements in `e`\n    while (ep_tr < ne) {\n        a = ei;\n        b = q0;\n        x = a + b;\n        bv = x - a;\n        y = b - bv;\n        if (y) {\n            g[count++] = y;\n        }\n        _x = q1 + x;\n        _bv = _x - q1;\n        _av = _x - _bv;\n        _br = x - _bv;\n        _ar = q1 - _av;\n        q0 = _ar + _br;\n        q1 = _x;\n        ep_tr += 1;\n        if (ep_tr < ne) {\n            ei = e[ep_tr];\n        }\n    }\n    // Handle remaining elements in `f`\n    while (fp_tr < nf) {\n        a = fi;\n        b = q0;\n        x = a + b;\n        bv = x - a;\n        y = b - bv;\n        if (y) {\n            g[count++] = y;\n        }\n        _x = q1 + x;\n        _bv = _x - q1;\n        _av = _x - _bv;\n        _br = x - _bv;\n        _ar = q1 - _av;\n        q0 = _ar + _br;\n        q1 = _x;\n        fp_tr += 1;\n        if (fp_tr < nf) {\n            fi = -f[fp_tr];\n        }\n    }\n    // Finalize the result\n    if (q0) {\n        g[count++] = q0;\n    }\n    if (q1) {\n        g[count++] = q1;\n    }\n    if (!count) {\n        g[count++] = 0.0;\n    }\n    g.length = count;\n    return g;\n}\n//# sourceMappingURL=robust-subtract.js.map","'use strict';\nfunction scalarScalar(a, b) {\n    const x = a + b;\n    const bv = x - a;\n    const av = x - bv;\n    const br = b - bv;\n    const ar = a - av;\n    const y = ar + br;\n    if (y) {\n        return [y, x];\n    }\n    return [x];\n}\nexport function linearExpansionSum(e, f) {\n    const ne = e.length | 0;\n    const nf = f.length | 0;\n    if (ne === 1 && nf === 1) {\n        return scalarScalar(e[0], f[0]);\n    }\n    const n = ne + nf;\n    const g = new Array(n);\n    let count = 0;\n    let ep_tr = 0;\n    let fp_tr = 0;\n    const abs = Math.abs;\n    let ei = e[ep_tr];\n    let ea = abs(ei);\n    let fi = f[fp_tr];\n    let fa = abs(fi);\n    let a, b;\n    if (ea < fa) {\n        b = ei;\n        ep_tr += 1;\n        if (ep_tr < ne) {\n            ei = e[ep_tr];\n            ea = abs(ei);\n        }\n    }\n    else {\n        b = fi;\n        fp_tr += 1;\n        if (fp_tr < nf) {\n            fi = f[fp_tr];\n            fa = abs(fi);\n        }\n    }\n    if ((ep_tr < ne && ea < fa) || fp_tr >= nf) {\n        a = ei;\n        ep_tr += 1;\n        if (ep_tr < ne) {\n            ei = e[ep_tr];\n            ea = abs(ei);\n        }\n    }\n    else {\n        a = fi;\n        fp_tr += 1;\n        if (fp_tr < nf) {\n            fi = f[fp_tr];\n            fa = abs(fi);\n        }\n    }\n    let x = a + b;\n    let bv = x - a;\n    let y = b - bv;\n    let q0 = y;\n    let q1 = x;\n    let _x, _bv, _av, _br, _ar;\n    while (ep_tr < ne && fp_tr < nf) {\n        if (ea < fa) {\n            a = ei;\n            ep_tr += 1;\n            if (ep_tr < ne) {\n                ei = e[ep_tr];\n                ea = abs(ei);\n            }\n        }\n        else {\n            a = fi;\n            fp_tr += 1;\n            if (fp_tr < nf) {\n                fi = f[fp_tr];\n                fa = abs(fi);\n            }\n        }\n        b = q0;\n        x = a + b;\n        bv = x - a;\n        y = b - bv;\n        if (y) {\n            g[count++] = y;\n        }\n        _x = q1 + x;\n        _bv = _x - q1;\n        _av = _x - _bv;\n        _br = x - _bv;\n        _ar = q1 - _av;\n        q0 = _ar + _br;\n        q1 = _x;\n    }\n    while (ep_tr < ne) {\n        a = ei;\n        b = q0;\n        x = a + b;\n        bv = x - a;\n        y = b - bv;\n        if (y) {\n            g[count++] = y;\n        }\n        _x = q1 + x;\n        _bv = _x - q1;\n        _av = _x - _bv;\n        _br = x - _bv;\n        _ar = q1 - _av;\n        q0 = _ar + _br;\n        q1 = _x;\n        ep_tr += 1;\n        if (ep_tr < ne) {\n            ei = e[ep_tr];\n        }\n    }\n    while (fp_tr < nf) {\n        a = fi;\n        b = q0;\n        x = a + b;\n        bv = x - a;\n        y = b - bv;\n        if (y) {\n            g[count++] = y;\n        }\n        _x = q1 + x;\n        _bv = _x - q1;\n        _av = _x - _bv;\n        _br = x - _bv;\n        _ar = q1 - _av;\n        q0 = _ar + _br;\n        q1 = _x;\n        fp_tr += 1;\n        if (fp_tr < nf) {\n            fi = f[fp_tr];\n        }\n    }\n    if (q0) {\n        g[count++] = q0;\n    }\n    if (q1) {\n        g[count++] = q1;\n    }\n    if (!count) {\n        g[count++] = 0.0;\n    }\n    g.length = count;\n    return g;\n}\n//# sourceMappingURL=robust-sum.js.map","'use strict';\nimport { scaleLinearExpansion as robustScale } from './robust-scale';\nimport { robustSubtract } from './robust-subtract';\nimport { linearExpansionSum as robustSum } from './robust-sum';\nimport { twoProduct } from './two-product';\nconst NUM_EXPAND = 5;\nconst EPSILON = 1.1102230246251565e-16;\nconst ERR_BOUND_3 = (3.0 + 16.0 * EPSILON) * EPSILON;\nconst ERR_BOUND_4 = (7.0 + 56.0 * EPSILON) * EPSILON;\nfunction orientation_3(sum, prod, scale, sub) {\n    return function orientation3Exact(m0, m1, m2) {\n        const p = sum(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])));\n        const n = sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0]));\n        const d = sub(p, n);\n        return d[d.length - 1];\n    };\n}\nfunction orientation_4(sum, prod, scale, sub) {\n    return function orientation4Exact(m0, m1, m2, m3) {\n        const p = sum(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m1[2]), sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), -m2[2]), scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m3[2]))), sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m3[2]))));\n        const n = sum(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m2[2]), scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m3[2]))), sum(scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m2[2]))));\n        const d = sub(p, n);\n        return d[d.length - 1];\n    };\n}\nfunction orientation_5(sum, prod, scale, sub) {\n    return function orientation5Exact(m0, m1, m2, m3, m4) {\n        const p = sum(sum(sum(scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m2[2]), sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), -m3[2]), scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m4[2]))), m1[3]), sum(scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m1[2]), sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m3[2]), scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m4[2]))), -m2[3]), scale(sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m1[2]), sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m2[2]), scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m4[2]))), m3[3]))), sum(scale(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m1[2]), sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), -m2[2]), scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m3[2]))), -m4[3]), sum(scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m1[2]), sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m3[2]), scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m4[2]))), m0[3]), scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m3[2]), scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), m4[2]))), -m1[3])))), sum(sum(scale(sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m4[2]))), m3[3]), sum(scale(sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m3[2]))), -m4[3]), scale(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m1[2]), sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), -m2[2]), scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m3[2]))), m0[3]))), sum(scale(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m2[2]), scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m3[2]))), -m1[3]), sum(scale(sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m3[2]))), m2[3]), scale(sum(scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m2[2]))), -m3[3])))));\n        const n = sum(sum(sum(scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m2[2]), sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), -m3[2]), scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m4[2]))), m0[3]), scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m3[2]), scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), m4[2]))), -m2[3])), sum(scale(sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m2[2]), scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m4[2]))), m3[3]), scale(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m2[2]), scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m3[2]))), -m4[3]))), sum(sum(scale(sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m1[2]), sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m2[2]), scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m4[2]))), m0[3]), scale(sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m2[2]), scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m4[2]))), -m1[3])), sum(scale(sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m4[2]))), m2[3]), scale(sum(scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m2[2]))), -m4[3]))));\n        const d = sub(p, n);\n        return d[d.length - 1];\n    };\n}\nfunction orientation(n) {\n    const fn = n === 3 ? orientation_3 : n === 4 ? orientation_4 : orientation_5;\n    return fn(robustSum, twoProduct, robustScale, robustSubtract);\n}\nconst orientation3Exact = orientation(3);\nconst orientation4Exact = orientation(4);\nconst CACHED = [\n    function orientation0() {\n        return 0;\n    },\n    function orientation1() {\n        return 0;\n    },\n    function orientation2(a, b) {\n        return b[0] - a[0];\n    },\n    function orientation3(a, b, c) {\n        const l = (a[1] - c[1]) * (b[0] - c[0]);\n        const r = (a[0] - c[0]) * (b[1] - c[1]);\n        const det = l - r;\n        let s;\n        if (l > 0) {\n            if (r <= 0) {\n                return det;\n            }\n            else {\n                s = l + r;\n            }\n        }\n        else if (l < 0) {\n            if (r >= 0) {\n                return det;\n            }\n            else {\n                s = -(l + r);\n            }\n        }\n        else {\n            return det;\n        }\n        const tol = ERR_BOUND_3 * s;\n        if (det >= tol || det <= -tol) {\n            return det;\n        }\n        return orientation3Exact(a, b, c);\n    },\n    function orientation4(a, b, c, d) {\n        const adx = a[0] - d[0];\n        const bdx = b[0] - d[0];\n        const cdx = c[0] - d[0];\n        const ady = a[1] - d[1];\n        const bdy = b[1] - d[1];\n        const cdy = c[1] - d[1];\n        const adz = a[2] - d[2];\n        const bdz = b[2] - d[2];\n        const cdz = c[2] - d[2];\n        const bdx_cdy = bdx * cdy;\n        const cdx_bdy = cdx * bdy;\n        const cdx_ady = cdx * ady;\n        const adx_cdy = adx * cdy;\n        const adx_bdy = adx * bdy;\n        const bdx_ady = bdx * ady;\n        const det = adz * (bdx_cdy - cdx_bdy) + bdz * (cdx_ady - adx_cdy) + cdz * (adx_bdy - bdx_ady);\n        const permanent = (Math.abs(bdx_cdy) + Math.abs(cdx_bdy)) * Math.abs(adz) +\n            (Math.abs(cdx_ady) + Math.abs(adx_cdy)) * Math.abs(bdz) +\n            (Math.abs(adx_bdy) + Math.abs(bdx_ady)) * Math.abs(cdz);\n        const tol = ERR_BOUND_4 * permanent;\n        if (det > tol || -det > tol) {\n            return det;\n        }\n        return orientation4Exact(a, b, c, d);\n    },\n];\nfunction slowOrient(args) {\n    let proc = CACHED[args.length];\n    if (!proc) {\n        proc = CACHED[args.length] = orientation(args.length);\n    }\n    return proc.apply(undefined, ...args);\n}\nfunction proc(slow, o0, o1, o2, o3, o4, o5) {\n    return function getOrientation(...args) {\n        switch (args.length) {\n            case 0:\n            case 1:\n                return 0;\n            case 2:\n                return o2(args[0], args[1]);\n            case 3:\n                return o3(args[0], args[1], args[2]);\n            case 4:\n                return o4(args[0], args[1], args[2], args[3]);\n            case 5:\n                return o5(args[0], args[1], args[2], args[3], args[4]);\n        }\n        return slow(args);\n    };\n}\nfunction generateOrientationProc() {\n    while (CACHED.length <= NUM_EXPAND) {\n        CACHED.push(orientation(CACHED.length));\n    }\n    // @ts-ignore\n    const orientationProc = proc(undefined, slowOrient, ...CACHED);\n    for (let i = 0; i <= NUM_EXPAND; ++i) {\n        // @ts-ignore\n        orientationProc[i] = CACHED[i];\n    }\n    return orientationProc;\n}\nexport default generateOrientationProc();\n//# sourceMappingURL=robust-orientation.js.map","'use strict';\nimport robustOrientation from './robust-orientation';\nconst orient = robustOrientation[3];\nexport function monotoneConvexHull2D(points) {\n    const n = points.length;\n    // Handle special cases when the input contains fewer than 3 points\n    if (n < 3) {\n        const result = new Array(n);\n        for (let i = 0; i < n; ++i) {\n            result[i] = i;\n        }\n        // Special case for exactly 2 identical points\n        if (n === 2 && points[0][0] === points[1][0] && points[0][1] === points[1][1]) {\n            return [0];\n        }\n        return result;\n    }\n    // Sort point indices along the x-axis (breaking ties with y-axis)\n    const sorted = new Array(n);\n    for (let i = 0; i < n; ++i) {\n        sorted[i] = i;\n    }\n    sorted.sort((a, b) => {\n        const d = points[a][0] - points[b][0];\n        if (d) {\n            return d;\n        }\n        return points[a][1] - points[b][1];\n    });\n    // Construct the upper and lower hulls\n    const lower = [sorted[0], sorted[1]];\n    const upper = [sorted[0], sorted[1]];\n    for (let i = 2; i < n; ++i) {\n        const idx = sorted[i];\n        const p = points[idx];\n        // Insert into the lower hull\n        let m = lower.length;\n        while (m > 1 && orient(points[lower[m - 2]], points[lower[m - 1]], p) <= 0) {\n            m -= 1;\n            lower.pop();\n        }\n        lower.push(idx);\n        // Insert into the upper hull\n        m = upper.length;\n        while (m > 1 && orient(points[upper[m - 2]], points[upper[m - 1]], p) >= 0) {\n            m -= 1;\n            upper.pop();\n        }\n        upper.push(idx);\n    }\n    // Merge the lower and upper hulls into the final result\n    const result = new Array(upper.length + lower.length - 2);\n    let ptr = 0;\n    for (let i = 0, nl = lower.length; i < nl; ++i) {\n        result[ptr++] = lower[i];\n    }\n    for (let j = upper.length - 2; j > 0; --j) {\n        result[ptr++] = upper[j];\n    }\n    // Return the final convex hull\n    return result;\n}\n//# sourceMappingURL=monotone-convex-hull-2d.js.map","import orient from './robust-orientation';\nfunction checkCollinear(a0, a1, b0, b1) {\n    for (let d = 0; d < 2; ++d) {\n        const x0 = a0[d];\n        const y0 = a1[d];\n        const [l0, h0] = [Math.min(x0, y0), Math.max(x0, y0)];\n        const x1 = b0[d];\n        const y1 = b1[d];\n        const [l1, h1] = [Math.min(x1, y1), Math.max(x1, y1)];\n        if (h1 < l0 || h0 < l1)\n            return false;\n    }\n    return true;\n}\nexport function segmentsIntersect(a0, a1, b0, b1) {\n    const x0 = orient(a0, b0, b1);\n    const y0 = orient(a1, b0, b1);\n    if ((x0 > 0 && y0 > 0) || (x0 < 0 && y0 < 0))\n        return false;\n    const x1 = orient(b0, a0, a1);\n    const y1 = orient(b1, a0, a1);\n    if ((x1 > 0 && y1 > 0) || (x1 < 0 && y1 < 0))\n        return false;\n    if (x0 === 0 && y0 === 0 && x1 === 0 && y1 === 0) {\n        return checkCollinear(a0, a1, b0, b1);\n    }\n    return true;\n}\n//# sourceMappingURL=robust-segment-intersect.js.map","import { formatUtil } from './format';\nimport { grid } from './grid_handle';\nimport { monotoneConvexHull2D as convexHull } from './monotone-convex-hull-2d';\nimport { segmentsIntersect as intersect } from './robust-segment-intersect';\nfunction _filterDuplicates(pointset) {\n    const unique = [pointset[0]];\n    let lastPoint = pointset[0];\n    for (let i = 1; i < pointset.length; i++) {\n        const currentPoint = pointset[i];\n        if (lastPoint[0] !== currentPoint[0] || lastPoint[1] !== currentPoint[1]) {\n            unique.push(currentPoint);\n        }\n        lastPoint = currentPoint;\n    }\n    return unique;\n}\nfunction _sortByX(pointset) {\n    return pointset.sort(function (a, b) {\n        return a[0] - b[0] || a[1] - b[1];\n    });\n}\nfunction _sqLength(a, b) {\n    return Math.pow(b[0] - a[0], 2) + Math.pow(b[1] - a[1], 2);\n}\nfunction _cos(o, a, b) {\n    const aShifted = [a[0] - o[0], a[1] - o[1]], bShifted = [b[0] - o[0], b[1] - o[1]], sqALen = _sqLength(o, a), sqBLen = _sqLength(o, b), dot = aShifted[0] * bShifted[0] + aShifted[1] * bShifted[1];\n    return dot / Math.sqrt(sqALen * sqBLen);\n}\nfunction _intersect(segment, pointset) {\n    for (let i = 0; i < pointset.length - 1; i++) {\n        const seg = [pointset[i], pointset[i + 1]];\n        if ((segment[0][0] === seg[0][0] && segment[0][1] === seg[0][1]) ||\n            (segment[0][0] === seg[1][0] && segment[0][1] === seg[1][1])) {\n            continue;\n        }\n        if (intersect(segment[0], segment[1], seg[0], seg[1])) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction _occupiedArea(pointset) {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    for (let i = pointset.length - 1; i >= 0; i--) {\n        if (pointset[i][0] < minX) {\n            minX = pointset[i][0];\n        }\n        if (pointset[i][1] < minY) {\n            minY = pointset[i][1];\n        }\n        if (pointset[i][0] > maxX) {\n            maxX = pointset[i][0];\n        }\n        if (pointset[i][1] > maxY) {\n            maxY = pointset[i][1];\n        }\n    }\n    return [\n        maxX - minX, // width\n        maxY - minY, // height\n    ];\n}\nfunction _bBoxAround(edge) {\n    return [\n        Math.min(edge[0][0], edge[1][0]), // left\n        Math.min(edge[0][1], edge[1][1]), // top\n        Math.max(edge[0][0], edge[1][0]), // right\n        Math.max(edge[0][1], edge[1][1]), // bottom\n    ];\n}\nfunction _midPoint(edge, innerPoints, convex) {\n    let point = null, angle1Cos = MAX_CONCAVE_ANGLE_COS, angle2Cos = MAX_CONCAVE_ANGLE_COS, a1Cos, a2Cos;\n    for (let i = 0; i < innerPoints.length; i++) {\n        a1Cos = _cos(edge[0], edge[1], innerPoints[i]);\n        a2Cos = _cos(edge[1], edge[0], innerPoints[i]);\n        if (a1Cos > angle1Cos &&\n            a2Cos > angle2Cos &&\n            !_intersect([edge[0], innerPoints[i]], convex) &&\n            !_intersect([edge[1], innerPoints[i]], convex)) {\n            angle1Cos = a1Cos;\n            angle2Cos = a2Cos;\n            point = innerPoints[i];\n        }\n    }\n    return point;\n}\nfunction _concave(convex, maxSqEdgeLen, maxSearchArea, grid, edgeSkipList) {\n    let midPointInserted = false;\n    for (let i = 0; i < convex.length - 1; i++) {\n        const edge = [convex[i], convex[i + 1]];\n        // generate a key in the format X0,Y0,X1,Y1\n        const keyInSkipList = edge[0][0] + ',' + edge[0][1] + ',' + edge[1][0] + ',' + edge[1][1];\n        if (_sqLength(edge[0], edge[1]) < maxSqEdgeLen || edgeSkipList.has(keyInSkipList)) {\n            continue;\n        }\n        let scaleFactor = 0;\n        let bBoxAround = _bBoxAround(edge);\n        let bBoxWidth;\n        let bBoxHeight;\n        let midPoint;\n        do {\n            bBoxAround = grid.extendBbox(bBoxAround, scaleFactor);\n            bBoxWidth = bBoxAround[2] - bBoxAround[0];\n            bBoxHeight = bBoxAround[3] - bBoxAround[1];\n            midPoint = _midPoint(edge, grid.rangePoints(bBoxAround), convex);\n            scaleFactor++;\n        } while (midPoint === null && (maxSearchArea[0] > bBoxWidth || maxSearchArea[1] > bBoxHeight));\n        if (bBoxWidth >= maxSearchArea[0] && bBoxHeight >= maxSearchArea[1]) {\n            edgeSkipList.add(keyInSkipList);\n        }\n        if (midPoint !== null) {\n            convex.splice(i + 1, 0, midPoint);\n            grid.removePoint(midPoint);\n            midPointInserted = true;\n        }\n    }\n    if (midPointInserted) {\n        return _concave(convex, maxSqEdgeLen, maxSearchArea, grid, edgeSkipList);\n    }\n    return convex;\n}\nexport function hull(pointset, concavity, format) {\n    const maxEdgeLen = concavity || 20;\n    const points = _filterDuplicates(_sortByX(formatUtil.toXy(pointset, format)));\n    if (points.length < 4) {\n        const concave = points.concat([points[0]]);\n        return (format ? formatUtil.fromXy(concave, format) : concave);\n    }\n    const occupiedArea = _occupiedArea(points);\n    const maxSearchArea = [\n        occupiedArea[0] * MAX_SEARCH_BBOX_SIZE_PERCENT,\n        occupiedArea[1] * MAX_SEARCH_BBOX_SIZE_PERCENT,\n    ];\n    const convex = convexHull(points)\n        .reverse()\n        .map((idx) => points[idx]); // ccw -> cw, indices -> points\n    convex.push(convex[0]);\n    const innerPoints = points.filter(function (pt) {\n        return convex.indexOf(pt) < 0;\n    });\n    const cellSize = Math.ceil(1 / (points.length / (occupiedArea[0] * occupiedArea[1])));\n    const concave = _concave(convex, Math.pow(maxEdgeLen, 2), maxSearchArea, grid(innerPoints, cellSize), new Set());\n    return (format ? formatUtil.fromXy(concave, format) : concave);\n}\nconst MAX_CONCAVE_ANGLE_COS = Math.cos(90 / (180 / Math.PI)); // angle = 90 deg\nconst MAX_SEARCH_BBOX_SIZE_PERCENT = 0.6;\n//# sourceMappingURL=index.js.map","import { getLinesIntersection } from '../../utils/line';\nimport { getClosedSpline } from '../../utils/path';\nimport { isCollinear, sortByClockwise } from '../../utils/point';\nimport { add, angle, normalize, perpendicular, scale, subtract, toVector2, toVector3 } from '../../utils/vector';\n/**\n * <zh/> 计算 Hull 路径\n *\n * <en/> Compute Hull Path\n * @param points - <zh/> 顶点列表 | <en/> Vertices of Hull\n * @param padding - <zh/> 内边距 | <en/> padding\n * @param corner - <zh/> 拐角类型，目前支持 'sharp'、'rounded' 和 'smooth' | <en/> Corner type, currently supports 'sharp', 'rounded' and 'smooth'\n * @returns <zh/> Hull 路径 | <en/> Hull Path\n */\nexport function computeHullPath(points, padding, corner) {\n    if (points.length === 1)\n        return genSinglePointHullPath(points[0], padding, corner);\n    if (points.length === 2)\n        return genTwoPointsHullPath(points, padding, corner);\n    if (points.length === 3) {\n        const [p1, p2, p3] = sortByClockwise(points);\n        if (isCollinear(p1, p2, p3))\n            return genTwoPointsHullPath([p1, p3], padding, corner);\n    }\n    switch (corner) {\n        case 'smooth':\n            return genMultiPointsSmoothHull(points, padding);\n        case 'sharp':\n            return genMultiPointsSharpHull(points, padding);\n        case 'rounded':\n        default:\n            return genMultiPointsRoundedHull(points, padding);\n    }\n}\n/**\n * <zh/> 生成单点 Hull 路径\n *\n * <en/> Generate Hull Path for a single point\n * @param point - <zh/> 单点 | <en/> Single point\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @param corner - <zh/> 拐角类型 | <en/> Corner type\n * @returns <zh/> 单点 Hull 路径 | <en/> Single point Hull Path\n */\nconst genSinglePointHullPath = (point, padding, corner) => {\n    if (corner === 'sharp')\n        return [\n            ['M', point[0] - padding, point[1] - padding],\n            ['L', point[0] + padding, point[1] - padding],\n            ['L', point[0] + padding, point[1] + padding],\n            ['L', point[0] - padding, point[1] + padding],\n            ['Z'],\n        ];\n    const arcData = [padding, padding, 0, 0, 0];\n    return [\n        ['M', point[0], point[1] - padding],\n        ['A', ...arcData, point[0], point[1] + padding],\n        ['A', ...arcData, point[0], point[1] - padding],\n    ];\n};\n/**\n * <zh/> 生成两点 Hull 路径\n *\n * <en/> Generate Hull Path for two points\n * @param points - <zh/> 两点 | <en/> Two points\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @param corner - <zh/> 拐角类型 | <en/> Corner type\n * @returns <zh/> 两点 Hull 路径 | <en/> Two points Hull Path\n */\nconst genTwoPointsHullPath = (points, padding, corner) => {\n    const arcData = [padding, padding, 0, 0, 0];\n    const point1 = corner === 'sharp' ? add(points[0], scale(normalize(subtract(points[0], points[1])), padding)) : points[0];\n    const point2 = corner === 'sharp' ? add(points[1], scale(normalize(subtract(points[1], points[0])), padding)) : points[1];\n    const offsetVector = scale(normalize(perpendicular(subtract(point1, point2), false)), padding);\n    const invOffsetVector = scale(offsetVector, -1);\n    const prev = add(point1, offsetVector);\n    const current = add(point2, offsetVector);\n    const p2 = add(point2, invOffsetVector);\n    const p3 = add(point1, invOffsetVector);\n    if (corner === 'sharp') {\n        return [['M', prev[0], prev[1]], ['L', current[0], current[1]], ['L', p2[0], p2[1]], ['L', p3[0], p3[1]], ['Z']];\n    }\n    return [\n        ['M', prev[0], prev[1]],\n        ['L', current[0], current[1]],\n        ['A', ...arcData, p2[0], p2[1]],\n        ['L', p3[0], p3[1]],\n        ['A', ...arcData, prev[0], prev[1]],\n    ];\n};\n/**\n * <zh/> 生成多点 Hull 路径且拐角为圆角\n *\n * <en/> Generate Hull Path for multiple points with rounded corners\n * @param points - <zh/> 形成 Hull 的点集 | <en/> Points that form the Hull\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @returns <zh/> 圆角外壳路径 | <en/> Rounded hull path\n */\nconst genMultiPointsRoundedHull = (points, padding) => {\n    const segments = sortByClockwise(points).map((current, i) => {\n        const prev2Index = (i - 2 + points.length) % points.length;\n        const prevIndex = (i - 1 + points.length) % points.length;\n        const nextIndex = (i + 1) % points.length;\n        const prev2 = points[prev2Index];\n        const prev = points[prevIndex];\n        const next = points[nextIndex];\n        const v0 = subtract(prev2, prev);\n        const v1 = subtract(prev, current);\n        const v2 = subtract(current, next);\n        // 判断是否为凹角 ｜ Determine if it is a concave angle\n        const isConcave = (v1, v2) => {\n            return angle(v1, v2, true) < Math.PI;\n        };\n        const concavePrev = isConcave(v0, v1);\n        const concaveNext = isConcave(v1, v2);\n        const offsetVector = (v) => scale(normalize(perpendicular(v, false)), padding);\n        const offset = offsetVector(v1);\n        return [\n            {\n                p: toVector2(concavePrev ? add(prev, offsetVector(v0)) : add(prev, offset)),\n                concave: concavePrev && prev,\n            },\n            {\n                p: toVector2(concaveNext ? add(current, offsetVector(v2)) : add(current, offset)),\n                concave: concaveNext && current,\n            },\n        ];\n    });\n    const arcData = [padding, padding, 0, 0, 0];\n    const startIndex = segments.findIndex((segment, i) => !segments[(i - 1 + segments.length) % segments.length][0].concave &&\n        !segments[(i - 1 + segments.length) % segments.length][1].concave &&\n        !segment[0].concave &&\n        !segment[0].concave &&\n        !segment[1].concave);\n    const sortedSegments = segments.slice(startIndex).concat(segments.slice(0, startIndex));\n    let concavePoints = [];\n    return sortedSegments.flatMap((segment, i) => {\n        const pathFragment = [];\n        const lastSegment = sortedSegments[segments.length - 1];\n        if (i === 0)\n            pathFragment.push(['M', ...lastSegment[1].p]);\n        if (!segment[0].concave) {\n            pathFragment.push(['A', ...arcData, ...segment[0].p]);\n        }\n        else {\n            concavePoints.push(segment[0].p, segment[1].p);\n        }\n        if (!segment[1].concave) {\n            pathFragment.push(['L', ...segment[1].p]);\n        }\n        else {\n            concavePoints.unshift(segment[1].p);\n        }\n        if (concavePoints.length === 3) {\n            pathFragment.pop();\n            pathFragment.push(['C', ...concavePoints.flat()]);\n            concavePoints = [];\n        }\n        return pathFragment;\n    });\n};\n/**\n * <zh/> 生成多点 Hull 路径且拐角为平滑\n *\n * <en/> Generate Hull Path for multiple points with smooth corners\n * @param points - <zh/> 形成 Hull 的点集 | <en/> Points that form the Hull\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @returns <zh/> 平滑外壳路径 | <en/> Smooth hull path\n */\nconst genMultiPointsSmoothHull = (points, padding) => {\n    const hullPoints = sortByClockwise(points).map((p, i) => {\n        const pNext = points[(i + 1) % points.length];\n        return { p, v: normalize(subtract(pNext, p)) };\n    });\n    // Compute the expanded hull points, and the nearest prior control point for each.\n    hullPoints.forEach((hp, i) => {\n        const priorIndex = i > 0 ? i - 1 : points.length - 1;\n        const prevV = hullPoints[priorIndex].v;\n        const extensionVec = normalize(add(prevV, scale(hp.v, angle(prevV, hp.v, true) < Math.PI ? 1 : -1)));\n        hp.p = add(hp.p, scale(extensionVec, padding));\n    });\n    return getClosedSpline(hullPoints.map((obj) => obj.p));\n};\n/**\n * <zh/> 生成多点 Hull 路径且拐角为尖锐\n *\n * <en/> Generate Hull Path for multiple points with sharp corners\n * @param points - <zh/> 形成 Hull 的点集 | <en/> Points that form the Hull\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @returns <zh/> 锐角外壳路径 | <en/> Sharp hull path\n */\nconst genMultiPointsSharpHull = (points, padding) => {\n    const segments = points.map((current, i) => {\n        const prev = points[i === 0 ? points.length - 1 : i - 1];\n        const offset = toVector3(scale(normalize(perpendicular(subtract(prev, current), false)), padding));\n        return [add(prev, offset), add(current, offset)];\n    });\n    const arr = segments.flat();\n    const vertices = arr\n        .map((_, i) => {\n        if (i % 2 === 0)\n            return null;\n        const l1 = [arr[(i - 1) % arr.length], arr[i % arr.length]];\n        const l2 = [arr[(i + 1) % arr.length], arr[(i + 2) % arr.length]];\n        return getLinesIntersection(l1, l2, true);\n    })\n        .filter(Boolean);\n    return vertices.map((point, i) => [i === 0 ? 'M' : 'L', point[0], point[1]]).concat([['Z']]);\n};\n//# sourceMappingURL=util.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { isEqual, isFunction } from '@antv/util';\nimport { GraphEvent } from '../../constants';\nimport { Contour } from '../../elements/shapes';\nimport { idOf } from '../../utils/id';\nimport { positionOf } from '../../utils/position';\nimport { BasePlugin } from '../base-plugin';\nimport { hull } from './hull';\nimport { computeHullPath } from './util';\n/**\n * <zh/> 轮廓\n *\n * <en/> Hull\n * @remarks\n * <zh/> 轮廓包围（Hull）用于处理和表示一组点的凸多边形包围盒。轮廓包围分为两种形态：凸包和凹包。\n *\n * <zh/> 凸包（Convex Hull）：这是一个凸多边形，它包含所有的点，并且没有任何凹陷。你可以将其想象为一组点的最小包围盒，没有任何点在这个多边形的外部。\n *\n * <zh/> 凹包（Concave Hull）：这是一个凹多边形，它同样包含所有的点，但是可能会有凹陷。凹包的凹陷程度由 concavity 参数控制。concavity 越大，凹陷越小。当 concavity 为 Infinity 时，凹包就变成了凸包。\n *\n * <en/> Hull is used to process and represent the convex polygon bounding box of a set of points. Hull has two forms: convex hull and concave hull.\n *\n * <en/>  Convex Hull: This is a convex polygon that contains all points and has no concave. You can think of it as the smallest bounding box of a set of points, with no points outside the polygon.\n *\n *  <en/>  Concave Hull: This is a concave polygon that also contains all points, but may have concave. The concavity of the concave hull is controlled by the concavity parameter. The larger the concavity, the smaller the concave. When concavity is Infinity, the concave hull becomes a convex hull.\n */\nexport class Hull extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Hull.defaultOptions, options));\n        /**\n         * <zh/> 在 Hull 上的元素\n         *\n         * <en/> Element Ids on Hull\n         */\n        this.hullMemberIds = [];\n        this.drawHull = () => {\n            if (!this.shape) {\n                this.shape = new Contour({ style: this.getHullStyle() });\n                this.context.canvas.appendChild(this.shape);\n            }\n            else {\n                const forceUpdate = !isEqual(this.optionsCache, this.options);\n                this.shape.update(this.getHullStyle(forceUpdate));\n            }\n            this.optionsCache = Object.assign({}, this.options);\n        };\n        this.updateHullPath = (event) => {\n            if (!this.shape)\n                return;\n            if (!this.options.members.includes(idOf(event.data)))\n                return;\n            this.shape.update({ d: this.getHullPath(true) });\n        };\n        this.getHullPath = (forceUpdate = false) => {\n            const { graph } = this.context;\n            const members = this.getMember();\n            if (members.length === 0)\n                return '';\n            const data = members.map((id) => graph.getNodeData(id));\n            const vertices = hull(data.map(positionOf), this.options.concavity).slice(1).reverse();\n            const hullMemberIds = vertices.flatMap((point) => data.filter((m) => isEqual(positionOf(m), point)).map(idOf));\n            if (isEqual(hullMemberIds, this.hullMemberIds) && !forceUpdate)\n                return this.path;\n            this.hullMemberIds = hullMemberIds;\n            this.path = computeHullPath(vertices, this.getPadding(), this.options.corner);\n            return this.path;\n        };\n        this.bindEvents();\n    }\n    bindEvents() {\n        this.context.graph.on(GraphEvent.AFTER_RENDER, this.drawHull);\n        this.context.graph.on(GraphEvent.AFTER_ELEMENT_UPDATE, this.updateHullPath);\n    }\n    getHullStyle(forceUpdate) {\n        const _a = this.options, { members, padding, corner } = _a, style = __rest(_a, [\"members\", \"padding\", \"corner\"]);\n        return Object.assign(Object.assign({}, style), { d: this.getHullPath(forceUpdate) });\n    }\n    getPadding() {\n        const { graph } = this.context;\n        const memberPadding = this.hullMemberIds.reduce((acc, id) => {\n            const { halfExtents } = graph.getElementRenderBounds(id);\n            const size = Math.max(halfExtents[0], halfExtents[1]);\n            return Math.max(acc, size);\n        }, 0);\n        return memberPadding + this.options.padding;\n    }\n    /**\n     * <zh/> 添加 Hull 成员\n     *\n     * <en/> Add Hull member\n     * @param members - <zh/> 元素 Ids | <en/> Element Ids\n     */\n    addMember(members) {\n        const membersToAdd = Array.isArray(members) ? members : [members];\n        this.options.members = [...new Set([...this.options.members, ...membersToAdd])];\n        this.shape.update({ d: this.getHullPath() });\n    }\n    /**\n     * <zh/> 移除 Hull 成员\n     *\n     * <en/> Remove Hull member\n     * @param members - <zh/> 元素 Ids | <en/> Element Ids\n     */\n    removeMember(members) {\n        const membersToRemove = Array.isArray(members) ? members : [members];\n        this.options.members = this.options.members.filter((id) => !membersToRemove.includes(id));\n        if (membersToRemove.some((id) => this.hullMemberIds.includes(id))) {\n            this.shape.update({ d: this.getHullPath() });\n        }\n    }\n    /**\n     * <zh/> 更新 Hull 成员\n     *\n     * <en/> Update Hull member\n     * @param members - <zh/> 元素 Ids | <en/> Element Ids\n     */\n    updateMember(members) {\n        this.options.members = isFunction(members) ? members(this.options.members) : members;\n        this.shape.update(this.getHullStyle(true));\n    }\n    /**\n     * <zh/> 获取 Hull 成员\n     *\n     * <en/> Get Hull member\n     * @returns <zh/> 元素 Ids | <en/> Element Ids\n     */\n    getMember() {\n        return this.options.members;\n    }\n    /**\n     * <zh/> 销毁 Hull\n     *\n     * <en/> Destroy Hull\n     * @internal\n     */\n    destroy() {\n        this.context.graph.off(GraphEvent.AFTER_DRAW, this.drawHull);\n        this.shape.destroy();\n        this.hullMemberIds = [];\n        super.destroy();\n    }\n}\nHull.defaultOptions = {\n    members: [],\n    padding: 10,\n    corner: 'rounded',\n    concavity: Infinity,\n    /** hull style */\n    fill: 'lightblue',\n    fillOpacity: 0.2,\n    labelOpacity: 1,\n    stroke: 'blue',\n    strokeOpacity: 0.2,\n};\n//# sourceMappingURL=index.js.map","import { Canvas as GCanvas } from '@antv/g';\nimport { Renderer } from '@antv/g-canvas';\nimport { parsePlacement } from '../../utils/placement';\nimport { createPluginContainer } from './dom';\n/**\n * <zh/> 创建插件画布\n *\n * <en/> Create a plugin canvas\n * @param options - <zh/> 配置项 | <en/> options\n * @returns <zh/> [容器, 画布] | <en/> [container, canvas]\n */\nexport function createPluginCanvas(options) {\n    const { width, height, renderer } = options;\n    const $container = getContainer(options);\n    const canvas = new GCanvas({\n        width,\n        height,\n        container: $container,\n        renderer: renderer || new Renderer(),\n    });\n    return [$container, canvas];\n}\n/**\n * <zh/> 获取容器\n *\n * <en/> Get container\n * @param options - <zh/> 配置项 | <en/> options\n * @returns <zh/> 容器 | <en/> container\n */\nfunction getContainer(options) {\n    var _a;\n    const { container, className, graphCanvas } = options;\n    if (container) {\n        return typeof container === 'string' ? document.getElementById(container) : container;\n    }\n    const $container = createPluginContainer(className, false);\n    const { width, height, containerStyle } = options;\n    const [x, y] = computePosition(options);\n    Object.assign($container.style, Object.assign({ position: 'absolute', left: x + 'px', top: y + 'px', width: width + 'px', height: height + 'px' }, containerStyle));\n    (_a = graphCanvas.getContainer()) === null || _a === void 0 ? void 0 : _a.appendChild($container);\n    return $container;\n}\n/**\n * <zh/> 计算容器位置\n *\n * <en/> Compute the position of the container\n * @param options - <zh/> 配置项 | <en/> options\n * @returns <zh/> 位置 | <en/> position\n */\nfunction computePosition(options) {\n    const { width, height, placement, graphCanvas } = options;\n    const [W, H] = graphCanvas.getSize();\n    const [xRatio, yRatio] = parsePlacement(placement);\n    return [xRatio * (W - width), yRatio * (H - height)];\n}\n//# sourceMappingURL=canvas.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Category } from '@antv/component';\nimport { get, isFunction } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport { BasePlugin } from './base-plugin';\nimport { createPluginCanvas } from './utils/canvas';\n/**\n * <zh/> 图例\n *\n * <en/> Legend\n * @remarks\n * <zh/> 图例插件用于展示图中元素的分类信息，支持节点、边、组合的分类信息展示。\n *\n * <en/> The legend plugin is used to display the classification information of elements in the graph, and supports the display of classification information of nodes, edges, and combos.\n */\nexport class Legend extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Legend.defaultOptions, options));\n        this.typePrefix = '__data__';\n        this.draw = false;\n        this.fieldMap = {\n            node: new Map(),\n            edge: new Map(),\n            combo: new Map(),\n        };\n        this.selectedItems = [];\n        this.bindEvents = () => {\n            const { graph } = this.context;\n            graph.on(GraphEvent.AFTER_DRAW, this.createElement);\n        };\n        this.changeState = (el, state) => {\n            const { graph } = this.context;\n            const { typePrefix } = this;\n            const composeId = get(el, [typePrefix, 'id']);\n            const category = get(el, [typePrefix, 'style', 'labelText']);\n            const [type] = composeId.split('__');\n            const ids = this.fieldMap[type].get(category) || [];\n            graph.setElementState(Object.fromEntries(ids === null || ids === void 0 ? void 0 : ids.map((id) => [id, state])));\n        };\n        /**\n         * <zh/> 图例元素点击事件\n         *\n         * <en/> Legend element click event\n         * @param event - <zh/> 点击的元素 | <en/> The element that is clicked\n         */\n        this.click = (event) => {\n            if (this.options.trigger === 'hover')\n                return;\n            const composeId = get(event, [this.typePrefix, 'id']);\n            if (!this.selectedItems.includes(composeId)) {\n                this.selectedItems.push(composeId);\n                this.changeState(event, 'selected');\n            }\n            else {\n                this.selectedItems = this.selectedItems.filter((item) => item !== composeId);\n                this.changeState(event, []);\n            }\n        };\n        /**\n         * <zh/> 图例元素移出事件\n         *\n         * <en/> Legend element mouseleave event\n         * @param event - <zh/> 移出的元素 | <en/> The element that is moved out\n         */\n        this.mouseleave = (event) => {\n            if (this.options.trigger === 'click')\n                return;\n            this.selectedItems = [];\n            this.changeState(event, []);\n        };\n        /**\n         * <zh/> 图例元素移入事件\n         *\n         * <en/> Legend element mouseenter event\n         * @param event - <zh/> 移入的元素 | <en/> The element that is moved in\n         */\n        this.mouseenter = (event) => {\n            if (this.options.trigger === 'click')\n                return;\n            const composeId = get(event, [this.typePrefix, 'id']);\n            if (!this.selectedItems.includes(composeId)) {\n                this.selectedItems.push(composeId);\n                this.changeState(event, 'active');\n            }\n            else {\n                this.selectedItems = this.selectedItems.filter((item) => item !== composeId);\n            }\n        };\n        this.setFieldMap = (field, id, type) => {\n            if (!field)\n                return;\n            const map = this.fieldMap[type];\n            if (!map)\n                return;\n            if (!map.has(field)) {\n                map.set(field, [id]);\n            }\n            else {\n                const ids = map.get(field);\n                if (ids) {\n                    ids.push(id);\n                    map.set(field, ids);\n                }\n            }\n        };\n        this.getEvents = () => {\n            return {\n                mouseenter: this.mouseenter,\n                mouseleave: this.mouseleave,\n                click: this.click,\n            };\n        };\n        this.getMarkerData = (field, elementType) => {\n            if (!field)\n                return [];\n            const { model, element } = this.context;\n            const { nodes, edges, combos } = model.getData();\n            const items = {};\n            const getField = (item) => {\n                if (isFunction(field))\n                    return field(item);\n                return field;\n            };\n            const defaultType = {\n                node: 'circle',\n                edge: 'line',\n                combo: 'rect',\n            };\n            // 用于将 G6 element 转换为 components 支持的类型\n            // Used to convert G6 element to types supported by components\n            const markerMapping = {\n                circle: 'circle',\n                ellipse: 'circle', // 待 components 支持 ellipse\n                image: 'bowtie',\n                rect: 'square',\n                star: 'cross',\n                triangle: 'triangle',\n                diamond: 'diamond',\n                cubic: 'dot',\n                line: 'hyphen',\n                polyline: 'hyphen',\n                quadratic: 'hv',\n                'cubic-horizontal': 'hyphen',\n                'cubic-vertical': 'line',\n            };\n            const getElementStyle = (type, datum) => {\n                const style = element === null || element === void 0 ? void 0 : element.getElementComputedStyle(type, datum);\n                return style;\n            };\n            const getElementModel = (data, type) => {\n                data.forEach((item) => {\n                    const { id } = item;\n                    const value = get(item, ['data', getField(item)]);\n                    const marker = (element === null || element === void 0 ? void 0 : element.getElementType(type, item)) || 'circle';\n                    const style = getElementStyle(type, item);\n                    const color = (type === 'edge' ? style === null || style === void 0 ? void 0 : style.stroke : style === null || style === void 0 ? void 0 : style.fill) || '#1783ff';\n                    if (id && value && value.replace(/\\s+/g, '')) {\n                        this.setFieldMap(value, id, type);\n                        if (!items[value]) {\n                            items[value] = {\n                                id: `${type}__${id}`,\n                                label: value,\n                                marker: markerMapping[marker] || defaultType[type],\n                                elementType: type,\n                                lineWidth: 1,\n                                stroke: color,\n                                fill: color,\n                            };\n                        }\n                    }\n                });\n            };\n            switch (elementType) {\n                case 'node':\n                    getElementModel(nodes, 'node');\n                    break;\n                case 'edge':\n                    getElementModel(edges, 'edge');\n                    break;\n                case 'combo':\n                    getElementModel(combos, 'combo');\n                    break;\n                default:\n                    return [];\n            }\n            return Object.values(items);\n        };\n        this.createElement = () => {\n            if (this.draw) {\n                this.updateElement();\n                return;\n            }\n            const _a = this.options, { width, height, nodeField, edgeField, comboField, trigger, position, container, containerStyle, className } = _a, rest = __rest(_a, [\"width\", \"height\", \"nodeField\", \"edgeField\", \"comboField\", \"trigger\", \"position\", \"container\", \"containerStyle\", \"className\"]);\n            const nodeItems = this.getMarkerData(nodeField, 'node');\n            const edgeItems = this.getMarkerData(edgeField, 'edge');\n            const comboItems = this.getMarkerData(comboField, 'combo');\n            const items = [...nodeItems, ...comboItems, ...edgeItems];\n            const categoryStyle = Object.assign({\n                width,\n                height,\n                data: items,\n                itemMarkerLineWidth: ({ lineWidth }) => lineWidth,\n                itemMarker: ({ marker }) => marker,\n                itemMarkerStroke: ({ stroke }) => stroke,\n                itemMarkerFill: ({ fill }) => fill,\n                gridCol: nodeItems.length,\n            }, rest, this.getEvents());\n            const category = new Category({\n                className: 'legend',\n                style: categoryStyle,\n            });\n            this.category = category;\n            const canvas = this.upsertCanvas();\n            canvas.appendChild(category);\n            this.draw = true;\n        };\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 更新图例配置\n     *\n     * <en/> Update the legend configuration\n     * @param options - <zh/> 图例配置项 | <en/> Legend options\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.clear();\n        this.createElement();\n    }\n    clear() {\n        var _a, _b;\n        (_a = this.canvas) === null || _a === void 0 ? void 0 : _a.destroy();\n        (_b = this.container) === null || _b === void 0 ? void 0 : _b.remove();\n        this.canvas = undefined;\n        this.container = undefined;\n        this.draw = false;\n    }\n    /**\n     * <zh/> 刷新图例元素状态\n     *\n     * <en/> Refresh the status of the legend element\n     */\n    updateElement() {\n        if (!this.category)\n            return;\n        this.category.update({\n            itemMarkerOpacity: ({ id }) => {\n                if (!this.selectedItems.length || this.selectedItems.includes(id))\n                    return 1;\n                return 0.5;\n            },\n            itemLabelOpacity: ({ id }) => {\n                if (!this.selectedItems.length || this.selectedItems.includes(id))\n                    return 1;\n                return 0.5;\n            },\n        });\n    }\n    upsertCanvas() {\n        if (this.canvas)\n            return this.canvas;\n        const graphCanvas = this.context.canvas;\n        const [canvasWidth, canvasHeight] = graphCanvas.getSize();\n        const { width = canvasWidth, height = canvasHeight, position, container, containerStyle, className } = this.options;\n        const [$container, canvas] = createPluginCanvas({\n            width,\n            height,\n            graphCanvas,\n            container,\n            containerStyle,\n            placement: position,\n            className: 'legend',\n        });\n        this.container = $container;\n        if (className)\n            $container.classList.add(className);\n        this.canvas = canvas;\n        return this.canvas;\n    }\n    /**\n     * <zh/>销毁图例\n     *\n     * <en/> Destroy the legend\n     * @internal\n     */\n    destroy() {\n        this.clear();\n        this.context.graph.off(GraphEvent.AFTER_DRAW, this.createElement);\n        super.destroy();\n    }\n}\nLegend.defaultOptions = {\n    position: 'bottom',\n    trigger: 'hover',\n    orientation: 'horizontal',\n    layout: 'flex',\n    itemSpacing: 4,\n    rowPadding: 10,\n    colPadding: 10,\n    itemMarkerSize: 16,\n    itemLabelFontSize: 16,\n    width: 240,\n    height: 160,\n};\n//# sourceMappingURL=legend.js.map","import { debounce, throttle } from '@antv/util';\nimport { GraphEvent } from '../../constants';\nimport { idOf } from '../../utils/id';\nimport { parsePadding } from '../../utils/padding';\nimport { toPointObject } from '../../utils/point';\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginCanvas } from '../utils/canvas';\n/**\n * <zh/> 缩略图插件\n *\n * <en/> Minimap plugin\n */\nexport class Minimap extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Minimap.defaultOptions, options));\n        this.onDraw = (event) => {\n            var _a;\n            if ((_a = event === null || event === void 0 ? void 0 : event.data) === null || _a === void 0 ? void 0 : _a.render)\n                return;\n            this.onRender();\n        };\n        this.shapes = new Map();\n        this.landmarkMap = new Map();\n        this.mask = null;\n        this.isMaskDragging = false;\n        this.onMaskDragStart = (event) => {\n            if (!this.mask)\n                return;\n            this.isMaskDragging = true;\n            this.mask.setPointerCapture(event.pointerId);\n            this.mask.addEventListener('pointermove', this.onMaskDrag);\n            this.mask.addEventListener('pointerup', this.onMaskDragEnd);\n            this.mask.addEventListener('pointercancel', this.onMaskDragEnd);\n        };\n        this.onMaskDrag = (event) => {\n            if (!this.mask || !this.isMaskDragging)\n                return;\n            const { size: [minimapWidth, minimapHeight], } = this.options;\n            const { movementX, movementY } = event;\n            const { left, top, width: w, height: h } = this.mask.style;\n            const [, , fullWidth, fullHeight] = this.maskBBox;\n            let x = parseInt(left) + movementX;\n            let y = parseInt(top) + movementY;\n            let width = parseInt(w);\n            let height = parseInt(h);\n            // 确保 mask 在 minimap 内部\n            // Ensure that the mask is inside the minimap\n            if (x < 0)\n                x = 0;\n            if (y < 0)\n                y = 0;\n            if (x + width > minimapWidth)\n                x = lower(minimapWidth - width, 0);\n            if (y + height > minimapHeight)\n                y = lower(minimapHeight - height, 0);\n            // 当拖拽画布导致 mask 缩小时，拖拽 mask 时，能够恢复到实际大小\n            // When dragging the canvas causes the mask to shrink, dragging the mask will restore it to its actual size\n            if (width < fullWidth) {\n                if (movementX > 0)\n                    (x = lower(x - movementX, 0)), (width = upper(width + movementX, minimapWidth));\n                else if (movementX < 0)\n                    width = upper(width - movementX, minimapWidth);\n            }\n            if (height < fullHeight) {\n                if (movementY > 0)\n                    (y = lower(y - movementY, 0)), (height = upper(height + movementY, minimapHeight));\n                else if (movementY < 0)\n                    height = upper(height - movementY, minimapHeight);\n            }\n            Object.assign(this.mask.style, {\n                left: x + 'px',\n                top: y + 'px',\n                width: width + 'px',\n                height: height + 'px',\n            });\n            // 基于 movement 进行相对移动\n            // Move relative to movement\n            const deltaX = parseInt(left) - x;\n            const deltaY = parseInt(top) - y;\n            if (deltaX === 0 && deltaY === 0)\n                return;\n            const zoom1 = this.context.canvas.getCamera().getZoom();\n            const zoom2 = this.canvas.getCamera().getZoom();\n            const ratio = zoom1 / zoom2;\n            this.context.graph.translateBy([deltaX * ratio, deltaY * ratio], false);\n        };\n        this.onMaskDragEnd = (event) => {\n            if (!this.mask)\n                return;\n            this.isMaskDragging = false;\n            this.mask.releasePointerCapture(event.pointerId);\n            this.mask.removeEventListener('pointermove', this.onMaskDrag);\n            this.mask.removeEventListener('pointerup', this.onMaskDragEnd);\n            this.mask.removeEventListener('pointercancel', this.onMaskDragEnd);\n        };\n        this.onTransform = throttle(() => {\n            if (this.isMaskDragging)\n                return;\n            this.updateMask();\n            this.setCamera();\n        }, 32, { leading: true });\n        this.setOnRender();\n        this.bindEvents();\n    }\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        if ('delay' in options)\n            this.setOnRender();\n        this.bindEvents();\n    }\n    setOnRender() {\n        this.onRender = debounce(() => {\n            this.renderMinimap();\n            this.renderMask();\n        }, this.options.delay);\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        graph.on(GraphEvent.AFTER_DRAW, this.onDraw);\n        graph.on(GraphEvent.AFTER_RENDER, this.onRender);\n        graph.on(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(GraphEvent.AFTER_DRAW, this.onDraw);\n        graph.off(GraphEvent.AFTER_RENDER, this.onRender);\n        graph.off(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n    }\n    /**\n     * <zh/> 创建或更新缩略图\n     *\n     * <en/> Create or update the minimap\n     */\n    renderMinimap() {\n        const data = this.getElements();\n        const canvas = this.initCanvas();\n        this.setShapes(canvas, data);\n    }\n    getElements() {\n        const { filter } = this.options;\n        const { model } = this.context;\n        const data = model.getData();\n        if (!filter)\n            return data;\n        const { nodes, edges, combos } = data;\n        return {\n            nodes: nodes.filter((node) => filter(idOf(node), 'node')),\n            edges: edges.filter((edge) => filter(idOf(edge), 'edge')),\n            combos: combos.filter((combo) => filter(idOf(combo), 'combo')),\n        };\n    }\n    setShapes(canvas, data) {\n        const { nodes, edges, combos } = data;\n        const { shape } = this.options;\n        const { element } = this.context;\n        if (shape === 'key') {\n            const ids = new Set();\n            const iterate = (datum) => {\n                const id = idOf(datum);\n                ids.add(id);\n                const target = element.getElement(id);\n                if (!target)\n                    return;\n                const shape = target.getShape('key');\n                const cloneShape = this.shapes.get(id) || shape.cloneNode();\n                cloneShape.setPosition(shape.getPosition());\n                // keep zIndex / id\n                if (target.style.zIndex)\n                    cloneShape.style.zIndex = target.style.zIndex;\n                cloneShape.id = target.id;\n                if (!this.shapes.has(id)) {\n                    canvas.appendChild(cloneShape);\n                    this.shapes.set(id, cloneShape);\n                }\n                else {\n                    Object.entries(shape.attributes).forEach(([key, value]) => {\n                        if (cloneShape.style[key] !== value)\n                            cloneShape.style[key] = value;\n                    });\n                }\n            };\n            // 注意执行顺序 / Note the execution order\n            edges.forEach(iterate);\n            combos.forEach(iterate);\n            nodes.forEach(iterate);\n            this.shapes.forEach((shape, id) => {\n                if (!ids.has(id)) {\n                    canvas.removeChild(shape);\n                    this.shapes.delete(id);\n                }\n            });\n            return;\n        }\n        const setPosition = (id, shape) => {\n            const target = element.getElement(id);\n            const position = target.getPosition();\n            shape.setPosition(position);\n            return shape;\n        };\n        canvas.removeChildren();\n        edges.forEach((datum) => canvas.appendChild(shape(idOf(datum), 'edge')));\n        combos.forEach((datum) => {\n            canvas.appendChild(setPosition(idOf(datum), shape(idOf(datum), 'combo')));\n        });\n        nodes.forEach((datum) => {\n            canvas.appendChild(setPosition(idOf(datum), shape(idOf(datum), 'node')));\n        });\n    }\n    initCanvas() {\n        const { renderer, size: [width, height], } = this.options;\n        if (this.canvas) {\n            const { width: w, height: h } = this.canvas.getConfig();\n            if (width !== w || height !== h)\n                this.canvas.resize(width, height);\n            if (renderer)\n                this.canvas.setRenderer(renderer);\n        }\n        else {\n            const { className, position, container, containerStyle } = this.options;\n            const [$container, canvas] = createPluginCanvas({\n                renderer,\n                width,\n                height,\n                placement: position,\n                className: 'minimap',\n                container,\n                containerStyle,\n                graphCanvas: this.context.canvas,\n            });\n            if (className)\n                $container.classList.add(className);\n            this.container = $container;\n            this.canvas = canvas;\n        }\n        this.setCamera();\n        return this.canvas;\n    }\n    createLandmark(position, focalPoint, zoom) {\n        const key = `${position.join(',')}-${focalPoint.join(',')}-${zoom}`;\n        if (this.landmarkMap.has(key))\n            return this.landmarkMap.get(key);\n        const camera = this.canvas.getCamera();\n        const landmark = camera.createLandmark(key, {\n            position,\n            focalPoint,\n            zoom,\n        });\n        this.landmarkMap.set(key, landmark);\n        return landmark;\n    }\n    setCamera() {\n        var _a;\n        const { canvas } = this.context;\n        const camera = (_a = this.canvas) === null || _a === void 0 ? void 0 : _a.getCamera();\n        if (!camera)\n            return;\n        const { size: [minimapWidth, minimapHeight], padding, } = this.options;\n        const [top, right, bottom, left] = parsePadding(padding);\n        const { min: boundsMin, max: boundsMax, center } = canvas.getBounds('elements');\n        const boundsWidth = boundsMax[0] - boundsMin[0];\n        const boundsHeight = boundsMax[1] - boundsMin[1];\n        const availableWidth = minimapWidth - left - right;\n        const availableHeight = minimapHeight - top - bottom;\n        const scaleX = availableWidth / boundsWidth;\n        const scaleY = availableHeight / boundsHeight;\n        const scale = Math.min(scaleX, scaleY);\n        const landmark = this.createLandmark(center, center, scale);\n        camera.gotoLandmark(landmark, 0);\n    }\n    get maskBBox() {\n        const { canvas: graphCanvas } = this.context;\n        const canvasSize = graphCanvas.getSize();\n        const canvasMin = graphCanvas.getCanvasByViewport([0, 0]);\n        const canvasMax = graphCanvas.getCanvasByViewport(canvasSize);\n        const maskMin = this.canvas.canvas2Viewport(toPointObject(canvasMin));\n        const maskMax = this.canvas.canvas2Viewport(toPointObject(canvasMax));\n        const width = maskMax.x - maskMin.x;\n        const height = maskMax.y - maskMin.y;\n        return [maskMin.x, maskMin.y, width, height];\n    }\n    /**\n     * <zh/> 计算遮罩包围盒\n     *\n     * <en/> Calculate the bounding box of the mask\n     * @returns <zh/> 遮罩包围盒 | <en/> Mask bounding box\n     */\n    calculateMaskBBox() {\n        const { size: [minimapWidth, minimapHeight], } = this.options;\n        let [x, y, width, height] = this.maskBBox;\n        // clamp x, y, width, height\n        if (x < 0)\n            (width = upper(width + x, minimapWidth)), (x = 0);\n        if (y < 0)\n            (height = upper(height + y, minimapHeight)), (y = 0);\n        if (x + width > minimapWidth)\n            width = lower(minimapWidth - x, 0);\n        if (y + height > minimapHeight)\n            height = lower(minimapHeight - y, 0);\n        return [upper(x, minimapWidth), upper(y, minimapHeight), lower(width, 0), lower(height, 0)];\n    }\n    /**\n     * <zh/> 创建或更新遮罩\n     *\n     * <en/> Create or update the mask\n     */\n    renderMask() {\n        const { maskStyle } = this.options;\n        if (!this.mask) {\n            this.mask = document.createElement('div');\n            this.mask.addEventListener('pointerdown', this.onMaskDragStart);\n        }\n        this.container.appendChild(this.mask);\n        Object.assign(this.mask.style, Object.assign(Object.assign({}, maskStyle), { cursor: 'move', position: 'absolute', pointerEvents: 'auto' }));\n        this.updateMask();\n    }\n    updateMask() {\n        if (!this.mask)\n            return;\n        const [x, y, width, height] = this.calculateMaskBBox();\n        Object.assign(this.mask.style, {\n            top: y + 'px',\n            left: x + 'px',\n            width: width + 'px',\n            height: height + 'px',\n        });\n    }\n    destroy() {\n        var _a;\n        this.unbindEvents();\n        this.canvas.destroy();\n        (_a = this.mask) === null || _a === void 0 ? void 0 : _a.remove();\n        super.destroy();\n    }\n}\nMinimap.defaultOptions = {\n    size: [240, 160],\n    shape: 'key',\n    padding: 10,\n    position: 'right-bottom',\n    maskStyle: {\n        border: '1px solid #ddd',\n        background: 'rgba(0, 0, 0, 0.1)',\n    },\n    containerStyle: {\n        border: '1px solid #ddd',\n        background: '#fff',\n    },\n    delay: 128,\n};\nconst upper = (value, max) => Math.min(value, max);\nconst lower = (value, min) => Math.max(value, min);\n//# sourceMappingURL=index.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Line } from '@antv/g';\nimport { isEqual } from '@antv/util';\nimport { NodeEvent } from '../../constants';\nimport { isVisible } from '../../utils/element';\nimport { divide } from '../../utils/vector';\nimport { BasePlugin } from '../base-plugin';\nconst defaultLineStyle = { x1: 0, y1: 0, x2: 0, y2: 0, visibility: 'hidden' };\n/**\n * <zh/> 对齐线插件\n *\n * <en/> Snapline plugin\n */\nexport class Snapline extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Snapline.defaultOptions, options));\n        this.initSnapline = () => {\n            const canvas = this.context.canvas.getLayer('transient');\n            if (!this.horizontalLine) {\n                this.horizontalLine = canvas.appendChild(new Line({ style: Object.assign(Object.assign({}, defaultLineStyle), this.options.horizontalLineStyle) }));\n            }\n            if (!this.verticalLine) {\n                this.verticalLine = canvas.appendChild(new Line({ style: Object.assign(Object.assign({}, defaultLineStyle), this.options.verticalLineStyle) }));\n            }\n        };\n        this.isHorizontalSticking = false;\n        this.isVerticalSticking = false;\n        this.enableStick = true;\n        this.autoSnapToLine = (nodeId, bbox, metadata) => __awaiter(this, void 0, void 0, function* () {\n            const { verticalX, horizontalY } = metadata;\n            const { tolerance } = this.options;\n            const { min: [nodeMinX, nodeMinY], max: [nodeMaxX, nodeMaxY], center: [nodeCenterX, nodeCenterY], } = bbox;\n            let dx = 0;\n            let dy = 0;\n            if (verticalX !== null) {\n                if (distance(nodeMaxX, verticalX) < tolerance)\n                    dx = verticalX - nodeMaxX;\n                if (distance(nodeMinX, verticalX) < tolerance)\n                    dx = verticalX - nodeMinX;\n                if (distance(nodeCenterX, verticalX) < tolerance)\n                    dx = verticalX - nodeCenterX;\n                if (dx !== 0)\n                    this.isVerticalSticking = true;\n            }\n            if (horizontalY !== null) {\n                if (distance(nodeMaxY, horizontalY) < tolerance)\n                    dy = horizontalY - nodeMaxY;\n                if (distance(nodeMinY, horizontalY) < tolerance)\n                    dy = horizontalY - nodeMinY;\n                if (distance(nodeCenterY, horizontalY) < tolerance)\n                    dy = horizontalY - nodeCenterY;\n                if (dy !== 0)\n                    this.isHorizontalSticking = true;\n            }\n            if (dx !== 0 || dy !== 0) {\n                // Stick to the line\n                yield this.context.graph.translateElementBy({ [nodeId]: [dx, dy] }, false);\n            }\n        });\n        this.enableSnap = (event) => {\n            const { target } = event;\n            const threshold = 0.5;\n            if (this.isHorizontalSticking || this.isVerticalSticking) {\n                const [dx, dy] = this.getDelta(event);\n                if (this.isHorizontalSticking &&\n                    this.isVerticalSticking &&\n                    Math.abs(dx) <= threshold &&\n                    Math.abs(dy) <= threshold) {\n                    this.context.graph.translateElementBy({ [target.id]: [-dx, -dy] }, false);\n                    return false;\n                }\n                else if (this.isHorizontalSticking && Math.abs(dy) <= threshold) {\n                    this.context.graph.translateElementBy({ [target.id]: [0, -dy] }, false);\n                    return false;\n                }\n                else if (this.isVerticalSticking && Math.abs(dx) <= threshold) {\n                    this.context.graph.translateElementBy({ [target.id]: [-dx, 0] }, false);\n                    return false;\n                }\n                else {\n                    this.isHorizontalSticking = false;\n                    this.isVerticalSticking = false;\n                    this.enableStick = false;\n                    setTimeout(() => {\n                        this.enableStick = true;\n                    }, 200);\n                }\n            }\n            return this.enableStick;\n        };\n        this.calcSnaplineMetadata = (target, nodeBBox) => {\n            const { tolerance, shape } = this.options;\n            const { min: [nodeMinX, nodeMinY], max: [nodeMaxX, nodeMaxY], center: [nodeCenterX, nodeCenterY], } = nodeBBox;\n            let verticalX = null;\n            let verticalMinY = null;\n            let verticalMaxY = null;\n            let horizontalY = null;\n            let horizontalMinX = null;\n            let horizontalMaxX = null;\n            this.getNodes().some((snapNode) => {\n                if (isEqual(target.id, snapNode.id))\n                    return false;\n                const snapBBox = getShape(snapNode, shape).getRenderBounds();\n                const { min: [snapMinX, snapMinY], max: [snapMaxX, snapMaxY], center: [snapCenterX, snapCenterY], } = snapBBox;\n                if (verticalX === null) {\n                    if (distance(snapCenterX, nodeCenterX) < tolerance) {\n                        verticalX = snapCenterX;\n                    }\n                    else if (distance(snapMinX, nodeMinX) < tolerance) {\n                        verticalX = snapMinX;\n                    }\n                    else if (distance(snapMinX, nodeMaxX) < tolerance) {\n                        verticalX = snapMinX;\n                    }\n                    else if (distance(snapMaxX, nodeMaxX) < tolerance) {\n                        verticalX = snapMaxX;\n                    }\n                    else if (distance(snapMaxX, nodeMinX) < tolerance) {\n                        verticalX = snapMaxX;\n                    }\n                    if (verticalX !== null) {\n                        verticalMinY = Math.min(snapMinY, nodeMinY);\n                        verticalMaxY = Math.max(snapMaxY, nodeMaxY);\n                    }\n                }\n                if (horizontalY === null) {\n                    if (distance(snapCenterY, nodeCenterY) < tolerance) {\n                        horizontalY = snapCenterY;\n                    }\n                    else if (distance(snapMinY, nodeMinY) < tolerance) {\n                        horizontalY = snapMinY;\n                    }\n                    else if (distance(snapMinY, nodeMaxY) < tolerance) {\n                        horizontalY = snapMinY;\n                    }\n                    else if (distance(snapMaxY, nodeMaxY) < tolerance) {\n                        horizontalY = snapMaxY;\n                    }\n                    else if (distance(snapMaxY, nodeMinY) < tolerance) {\n                        horizontalY = snapMaxY;\n                    }\n                    if (horizontalY !== null) {\n                        horizontalMinX = Math.min(snapMinX, nodeMinX);\n                        horizontalMaxX = Math.max(snapMaxX, nodeMaxX);\n                    }\n                }\n                return verticalX !== null && horizontalY !== null;\n            });\n            return { verticalX, verticalMinY, verticalMaxY, horizontalY, horizontalMinX, horizontalMaxX };\n        };\n        this.onDragStart = () => {\n            this.initSnapline();\n        };\n        this.onDrag = (event) => __awaiter(this, void 0, void 0, function* () {\n            const { target } = event;\n            if (this.options.autoSnap) {\n                const enable = this.enableSnap(event);\n                if (!enable)\n                    return;\n            }\n            const nodeBBox = getShape(target, this.options.shape).getRenderBounds();\n            const metadata = this.calcSnaplineMetadata(target, nodeBBox);\n            this.hideSnapline();\n            if (metadata.verticalX !== null || metadata.horizontalY !== null) {\n                this.updateSnapline(metadata);\n            }\n            if (this.options.autoSnap) {\n                yield this.autoSnapToLine(target.id, nodeBBox, metadata);\n            }\n        });\n        this.onDragEnd = () => {\n            this.hideSnapline();\n        };\n        this.bindEvents();\n    }\n    getNodes() {\n        var _a;\n        const { filter } = this.options;\n        const allNodes = ((_a = this.context.element) === null || _a === void 0 ? void 0 : _a.getNodes()) || [];\n        // 不考虑超出画布视口范围、不可见的节点\n        // Nodes that are out of the canvas viewport range, invisible are not considered\n        const nodes = allNodes.filter((node) => {\n            var _a;\n            return isVisible(node) && ((_a = this.context.viewport) === null || _a === void 0 ? void 0 : _a.isInViewport(node.getRenderBounds()));\n        });\n        if (!filter)\n            return nodes;\n        return nodes.filter((node) => filter(node));\n    }\n    hideSnapline() {\n        this.horizontalLine.style.visibility = 'hidden';\n        this.verticalLine.style.visibility = 'hidden';\n    }\n    getLineWidth(direction) {\n        const { lineWidth } = this.options[`${direction}LineStyle`];\n        return +(lineWidth || defaultLineStyle.lineWidth || 1) / this.context.graph.getZoom();\n    }\n    updateSnapline(metadata) {\n        const { verticalX, verticalMinY, verticalMaxY, horizontalY, horizontalMinX, horizontalMaxX } = metadata;\n        const [canvasWidth, canvasHeight] = this.context.canvas.getSize();\n        const { offset } = this.options;\n        if (horizontalY !== null) {\n            Object.assign(this.horizontalLine.style, {\n                x1: offset === Infinity ? 0 : horizontalMinX - offset,\n                y1: horizontalY,\n                x2: offset === Infinity ? canvasWidth : horizontalMaxX + offset,\n                y2: horizontalY,\n                visibility: 'visible',\n                lineWidth: this.getLineWidth('horizontal'),\n            });\n        }\n        else {\n            this.horizontalLine.style.visibility = 'hidden';\n        }\n        if (verticalX !== null) {\n            Object.assign(this.verticalLine.style, {\n                x1: verticalX,\n                y1: offset === Infinity ? 0 : verticalMinY - offset,\n                x2: verticalX,\n                y2: offset === Infinity ? canvasHeight : verticalMaxY + offset,\n                visibility: 'visible',\n                lineWidth: this.getLineWidth('vertical'),\n            });\n        }\n        else {\n            this.verticalLine.style.visibility = 'hidden';\n        }\n    }\n    /**\n     * Get the delta of the drag\n     * @param event - drag event object\n     * @returns delta\n     * @internal\n     */\n    getDelta(event) {\n        const zoom = this.context.graph.getZoom();\n        return divide([event.dx, event.dy], zoom);\n    }\n    bindEvents() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { graph } = this.context;\n            graph.on(NodeEvent.DRAG_START, this.onDragStart);\n            graph.on(NodeEvent.DRAG, this.onDrag);\n            graph.on(NodeEvent.DRAG_END, this.onDragEnd);\n        });\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(NodeEvent.DRAG_START, this.onDragStart);\n        graph.off(NodeEvent.DRAG, this.onDrag);\n        graph.off(NodeEvent.DRAG_END, this.onDragEnd);\n    }\n    destroyElements() {\n        var _a, _b;\n        (_a = this.horizontalLine) === null || _a === void 0 ? void 0 : _a.destroy();\n        (_b = this.verticalLine) === null || _b === void 0 ? void 0 : _b.destroy();\n    }\n    destroy() {\n        this.destroyElements();\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nSnapline.defaultOptions = {\n    tolerance: 5,\n    offset: 20,\n    autoSnap: true,\n    shape: 'key',\n    verticalLineStyle: { stroke: '#1783FF' },\n    horizontalLineStyle: { stroke: '#1783FF' },\n    filter: () => true,\n};\nconst distance = (a, b) => Math.abs(a - b);\nconst getShape = (node, shapeFilter) => {\n    return typeof shapeFilter === 'function' ? shapeFilter(node) : node.getShape(shapeFilter);\n};\n//# sourceMappingURL=index.js.map","import { __read } from \"tslib\";\nvar scale = ['year', 'month', 'day', 'hour', 'minute', 'second'];\nvar masks = ['YYYY', 'MM', 'DD', 'hh', 'mm', 'ss'];\nexport function parseDate(date) {\n    return date instanceof Date ? date : new Date(date);\n}\n/**\n * 生成时间格式化\n * @param maxUnit 最大时间单位\n * @param minUnit 最小时间单位\n */\nexport function getMask(_a) {\n    var _b = __read(_a, 2), maxUnit = _b[0], minUnit = _b[1];\n    var startIndex = scale.indexOf(maxUnit);\n    var endIndex = scale.indexOf(minUnit);\n    var format = '';\n    for (var i = startIndex; i <= endIndex; i += 1) {\n        format += masks[i];\n        if (i < endIndex) {\n            var connect = '-';\n            if (i === 2)\n                connect = ' ';\n            else if (i > 2)\n                connect = ':';\n            format += connect;\n        }\n    }\n    return format;\n}\n/**\n * 格式化时间\n */\nexport function formatTime(date, mask) {\n    var timeMap = {\n        YYYY: date.getFullYear(),\n        MM: date.getMonth() + 1,\n        DD: date.getDate(),\n        HH: date.getHours(),\n        mm: date.getMinutes(),\n        ss: date.getSeconds(),\n    };\n    var strftime = mask;\n    Object.keys(timeMap).forEach(function (key) {\n        var val = timeMap[key];\n        strftime = strftime.replace(key, key === 'YYYY' ? \"\".concat(val) : \"\".concat(val).padStart(2, '0'));\n    });\n    return strftime;\n}\n/**\n * 获取两个时间的差值，单位毫秒\n */\nexport function getTimeDiff(a, b) {\n    return parseDate(a).getTime() - parseDate(b).getTime();\n}\n/**\n * 获取时间跨度\n */\nexport function getTimeScale(a, b) {\n    var _a = __read([parseDate(a), parseDate(b)], 2), ma = _a[0], mb = _a[1];\n    if (ma.getFullYear() !== mb.getFullYear())\n        return 'year';\n    if (ma.getMonth() !== mb.getMonth())\n        return 'month';\n    if (ma.getDay() !== mb.getDay())\n        return 'day';\n    if (ma.getHours() !== mb.getHours())\n        return 'hour';\n    if (ma.getMinutes() !== mb.getMinutes())\n        return 'minute';\n    return 'second';\n}\n/**\n * 获取给定时间的开始时间\n */\nexport function getTimeStart(date, scale) {\n    var result = new Date(date);\n    var timeMap = {\n        year: function (d) {\n            d.setMonth(0);\n            d.setHours(0, 0, 0, 0);\n        },\n        month: function (d) {\n            d.setDate(1);\n            d.setHours(0, 0, 0, 0);\n        },\n        day: function (d) { return d.setHours(0, 0, 0, 0); },\n        hour: function (d) { return d.setMinutes(0, 0, 0); },\n        minute: function (d) { return d.setSeconds(0, 0); },\n        second: function (d) { return d.setMilliseconds(0); },\n    };\n    timeMap[scale](result);\n    return formatTime(result, getMask(['year', scale]));\n}\n//# sourceMappingURL=time.js.map","import { __assign, __extends, __read } from \"tslib\";\nimport { Component } from '../../core';\nimport { Group, Rect } from '../../shapes';\nimport { parseSeriesAttr, renderExtDo, select, subStyleProps } from '../../util';\nimport { deepAssign } from '../../util/deep-assign';\nvar Option = /** @class */ (function (_super) {\n    __extends(Option, _super);\n    function Option(options) {\n        var _this = _super.call(this, deepAssign({}, Option.defaultOptions, options)) || this;\n        _this.hoverColor = '#f5f5f5';\n        _this.selectedColor = '#e6f7ff';\n        _this.background = _this.appendChild(new Rect({}));\n        _this.label = _this.background.appendChild(new Group({}));\n        return _this;\n    }\n    Object.defineProperty(Option.prototype, \"padding\", {\n        get: function () {\n            return parseSeriesAttr(this.style.padding);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Option.prototype.renderLabel = function () {\n        var _a = this.style, label = _a.label, value = _a.value;\n        var labelStyle = subStyleProps(this.attributes, 'label');\n        select(this.label)\n            .maybeAppend('.label', function () { return renderExtDo(label); })\n            .attr('className', 'label')\n            .styles(labelStyle);\n        // bind data to label\n        this.label.attr('__data__', value);\n    };\n    Option.prototype.renderBackground = function () {\n        var labelBBox = this.label.getBBox();\n        var _a = __read(this.padding, 4), top = _a[0], right = _a[1], bottom = _a[2], left = _a[3];\n        var labelWidth = labelBBox.width, labelHeight = labelBBox.height;\n        var backgroundWidth = labelWidth + left + right;\n        var backgroundHeight = labelHeight + top + bottom;\n        var backgroundStyle = subStyleProps(this.attributes, 'background');\n        var _b = this.style, _c = _b.width, styleWidth = _c === void 0 ? 0 : _c, _d = _b.height, styleHeight = _d === void 0 ? 0 : _d, selected = _b.selected;\n        this.background.attr(__assign(__assign({}, backgroundStyle), { width: Math.max(backgroundWidth, styleWidth), height: Math.max(backgroundHeight, styleHeight), fill: selected ? this.selectedColor : '#fff' }));\n        // place label\n        this.label.attr({ transform: \"translate(\".concat(left, \", \").concat((backgroundHeight - labelHeight) / 2, \")\") });\n    };\n    Option.prototype.render = function () {\n        this.renderLabel();\n        this.renderBackground();\n    };\n    Option.prototype.bindEvents = function () {\n        var _this = this;\n        this.addEventListener('pointerenter', function () {\n            if (_this.style.selected)\n                return;\n            _this.background.attr('fill', _this.hoverColor);\n        });\n        this.addEventListener('pointerleave', function () {\n            if (_this.style.selected)\n                return;\n            _this.background.attr('fill', _this.style.backgroundFill);\n        });\n        var item = this;\n        this.addEventListener('click', function () {\n            var _a = _this.style, label = _a.label, value = _a.value, onClick = _a.onClick;\n            onClick === null || onClick === void 0 ? void 0 : onClick(value, { label: label, value: value }, item);\n        });\n    };\n    Option.defaultOptions = {\n        style: {\n            value: '',\n            label: '',\n            cursor: 'pointer',\n        },\n    };\n    return Option;\n}(Component));\nexport { Option };\n//# sourceMappingURL=option.js.map","import { __assign, __extends } from \"tslib\";\nimport { CustomEvent } from '@antv/g';\nimport { Component } from '../../core';\nimport { Rect } from '../../shapes';\nimport { hide, parseSeriesAttr, renderExtDo, select, show, subStyleProps } from '../../util';\nimport { deepAssign } from '../../util/deep-assign';\nimport { Option } from './option';\nvar Select = /** @class */ (function (_super) {\n    __extends(Select, _super);\n    function Select(options) {\n        var _a, _b;\n        var _this = _super.call(this, deepAssign({}, Select.defaultOptions, options)) || this;\n        /** 当前 value */\n        _this.currentValue = (_a = Select.defaultOptions.style) === null || _a === void 0 ? void 0 : _a.defaultValue;\n        _this.isPointerInSelect = false;\n        _this.select = _this.appendChild(new Rect({\n            className: 'select',\n            style: {\n                cursor: 'pointer',\n                width: 0,\n                height: 0,\n            },\n        }));\n        _this.dropdown = _this.appendChild(new Rect({\n            className: 'dropdown',\n        }));\n        var defaultValue = _this.style.defaultValue;\n        if (defaultValue && ((_b = _this.style.options) === null || _b === void 0 ? void 0 : _b.some(function (option) { return option.value === defaultValue; }))) {\n            _this.currentValue = defaultValue;\n        }\n        return _this;\n    }\n    Select.prototype.setValue = function (value) {\n        this.currentValue = value;\n        this.render();\n    };\n    Select.prototype.getValue = function () {\n        return this.currentValue;\n    };\n    Object.defineProperty(Select.prototype, \"dropdownPadding\", {\n        get: function () {\n            return parseSeriesAttr(this.style.dropdownPadding);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Select.prototype.renderSelect = function () {\n        var _this = this;\n        var _a;\n        var _b = this.style, x = _b.x, y = _b.y, width = _b.width, height = _b.height, bordered = _b.bordered, showDropdownIcon = _b.showDropdownIcon;\n        var selectStyle = subStyleProps(this.attributes, 'select');\n        var placeholderStyle = subStyleProps(this.attributes, 'placeholder');\n        this.select.attr(__assign(__assign({ x: x, y: y, width: width, height: height }, selectStyle), { fill: '#fff', strokeWidth: bordered ? 1 : 0 }));\n        var padding = this.dropdownPadding;\n        // dropdown icon\n        var iconSize = 10;\n        if (showDropdownIcon) {\n            select(this.select)\n                .maybeAppend('.dropdown-icon', 'path')\n                .style('d', 'M-5,-3.5 L0,3.5 L5,-3.5')\n                .style('transform', \"translate(\".concat(x + width - iconSize - padding[1] - padding[3], \", \").concat(y + height / 2, \")\"))\n                .style('lineWidth', 1)\n                .style('stroke', this.select.style.stroke);\n        }\n        var currentOption = (_a = this.style.options) === null || _a === void 0 ? void 0 : _a.find(function (option) { return option.value === _this.currentValue; });\n        // placeholder\n        var finalPlaceholderStyle = __assign({ x: x + padding[3] }, placeholderStyle);\n        select(this.select)\n            .selectAll('.placeholder')\n            .data(!currentOption ? [1] : [])\n            .join(function (enter) {\n            return enter\n                .append('text')\n                .attr('className', 'placeholder')\n                .styles(finalPlaceholderStyle)\n                .style('y', function () {\n                var bbox = this.getBBox();\n                return y + (height - bbox.height) / 2;\n            });\n        }, function (update) { return update.styles(finalPlaceholderStyle); }, function (exit) { return exit.remove(); });\n        // value\n        var labelStyle = subStyleProps(this.attributes, 'optionLabel');\n        var finalValueStyle = __assign({ x: x + padding[3] }, labelStyle);\n        select(this.select)\n            .selectAll('.value')\n            .data(currentOption ? [currentOption] : [])\n            .join(function (enter) {\n            return enter\n                .append(function (datum) { return renderExtDo(datum.label); })\n                .attr('className', 'value')\n                .styles(finalValueStyle)\n                .style('y', function () {\n                var bbox = this.getBBox();\n                return y + (height - bbox.height) / 2;\n            });\n        }, function (update) { return update.styles(finalValueStyle); }, function (exit) { return exit.remove(); });\n    };\n    Select.prototype.renderDropdown = function () {\n        var _this = this;\n        var _a, _b;\n        var _c = this.style, x = _c.x, y = _c.y, width = _c.width, height = _c.height, options = _c.options, onSelect = _c.onSelect, open = _c.open;\n        var dropdownStyle = subStyleProps(this.attributes, 'dropdown');\n        var optionStyle = subStyleProps(this.attributes, 'option');\n        var padding = this.dropdownPadding;\n        select(this.dropdown)\n            .maybeAppend('.dropdown-container', 'g')\n            .attr('className', 'dropdown-container')\n            .selectAll('.dropdown-item')\n            .data(options, function (datum) { return datum.value; })\n            .join(function (enter) {\n            return enter\n                .append(function (datum) {\n                return new Option({\n                    className: 'dropdown-item',\n                    style: __assign(__assign(__assign({}, datum), optionStyle), { width: width - padding[1] - padding[3], selected: datum.value === _this.currentValue, onClick: function (value, option, item) {\n                            _this.setValue(value);\n                            onSelect === null || onSelect === void 0 ? void 0 : onSelect(value, option, item);\n                            _this.dispatchEvent(new CustomEvent('change', { detail: { value: value, option: option, item: item } }));\n                            hide(_this.dropdown);\n                        } }),\n                });\n            })\n                .each(function (datum, i) {\n                var _a;\n                var nodes = (_a = this.parentNode) === null || _a === void 0 ? void 0 : _a.children;\n                var accHeight = nodes.reduce(function (acc, curr, index) {\n                    if (index < i) {\n                        acc += curr.getBBox().height;\n                    }\n                    return acc;\n                }, 0);\n                // 设置偏移\n                this.attr('transform', \"translate(\".concat(padding[3], \", \").concat(padding[0] + accHeight, \")\"));\n            });\n        }, function (update) {\n            return update.update(function (datum) {\n                return { selected: datum.value === _this.currentValue };\n            });\n        }, function (exit) { return exit.remove(); });\n        var bbox = (_b = (_a = this.dropdown.getElementsByClassName('dropdown-container')) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.getBBox();\n        var spacing = dropdownStyle.spacing;\n        this.dropdown.attr(__assign({ transform: \"translate(\".concat(x, \", \").concat(y + height + spacing, \")\"), width: bbox.width + padding[1] + padding[3], height: bbox.height + padding[0] + padding[2] }, dropdownStyle));\n        // 默认隐藏\n        !open && hide(this.dropdown);\n    };\n    Select.prototype.render = function () {\n        this.renderSelect();\n        this.renderDropdown();\n    };\n    Select.prototype.bindEvents = function () {\n        var _this = this;\n        this.addEventListener('click', function (e) {\n            e.stopPropagation();\n        });\n        this.select.addEventListener('click', function () {\n            if (_this.dropdown.style.visibility === 'visible')\n                hide(_this.dropdown);\n            else {\n                show(_this.dropdown);\n            }\n        });\n        // mock blur\n        this.addEventListener('pointerenter', function () {\n            _this.isPointerInSelect = true;\n        });\n        this.addEventListener('pointerleave', function () {\n            _this.isPointerInSelect = false;\n        });\n        document === null || document === void 0 ? void 0 : document.addEventListener('click', function () {\n            if (!_this.isPointerInSelect) {\n                hide(_this.dropdown);\n            }\n        });\n    };\n    Select.defaultOptions = {\n        style: {\n            x: 0,\n            y: 0,\n            width: 140,\n            height: 32,\n            options: [],\n            bordered: true,\n            defaultValue: '',\n            selectRadius: 8,\n            selectStroke: '#d9d9d9',\n            showDropdownIcon: true,\n            placeholderText: '请选择',\n            placeholderFontSize: 12,\n            placeholderTextBaseline: 'top',\n            placeholderFill: '#c2c2c2',\n            dropdownFill: '#fff',\n            dropdownStroke: '#d9d9d9',\n            dropdownRadius: 8,\n            dropdownShadowBlur: 4,\n            dropdownShadowColor: 'rgba(0, 0, 0, 0.08)',\n            dropdownPadding: 8,\n            dropdownSpacing: 10,\n            optionPadding: [8, 12],\n            optionFontSize: 12,\n            optionTextBaseline: 'top',\n            optionBackgroundFill: '#fff',\n            optionBackgroundRadius: 4,\n            optionLabelFontSize: 12,\n            optionLabelTextBaseline: 'top',\n        },\n    };\n    return Select;\n}(Component));\nexport { Select };\n//# sourceMappingURL=select.js.map","import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { clamp, omit } from '@antv/util';\nimport { Component } from '../../core';\nimport { Group, Path, Rect } from '../../shapes';\nimport { deepAssign, parseSeriesAttr, select, subStyleProps } from '../../util';\nimport { Indicator } from '../indicator';\nimport { Select } from '../select';\nvar IconBase = /** @class */ (function (_super) {\n    __extends(IconBase, _super);\n    function IconBase(options) {\n        var _this = _super.call(this, deepAssign({}, { style: { backgroundOpacity: IconBase.backgroundOpacities.default } }, IconBase.defaultOptions, options)) || this;\n        /** hover 时是否显示背景 */\n        _this.showBackground = true;\n        _this.background = _this.appendChild(new Rect({}));\n        _this.icon = _this.appendChild(new Group({}));\n        return _this;\n    }\n    Object.defineProperty(IconBase.prototype, \"label\", {\n        get: function () {\n            return 'BaseIcon';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IconBase.prototype, \"lineWidth\", {\n        get: function () {\n            return Math.log10(this.attributes.size);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IconBase.prototype, \"padding\", {\n        get: function () {\n            return parseSeriesAttr(this.attributes.size / 5);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IconBase.prototype, \"iconSize\", {\n        get: function () {\n            var size = this.attributes.size;\n            var _a = __read(this.padding, 4), top = _a[0], right = _a[1], bottom = _a[2], left = _a[3];\n            return Math.max(size - Math.max(left + right, top + bottom), this.lineWidth * 2 + 1);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    IconBase.prototype.renderBackground = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, size = _a.size;\n        var halfSize = size / 2;\n        var backgroundStyle = subStyleProps(this.attributes, 'background');\n        this.background.attr(__assign({ x: x - halfSize, y: y - halfSize, width: size, height: size }, backgroundStyle));\n    };\n    IconBase.prototype.showIndicator = function () {\n        if (!this.label)\n            return;\n        var size = this.attributes.size;\n        var _a = this.background.getBBox(), x = _a.x, y = _a.y;\n        this.indicator.update({ x: x + size / 2, y: y - 5, labelText: this.label, visibility: 'visible' });\n    };\n    IconBase.prototype.hideIndicator = function () {\n        this.indicator.update({ visibility: 'hidden' });\n    };\n    IconBase.prototype.connectedCallback = function () {\n        var _a;\n        _super.prototype.connectedCallback.call(this);\n        // indicator 脱离文档流，需要手动添加到 canvas\n        var size = this.attributes.size;\n        var _b = this.background.getBBox(), x = _b.x, y = _b.y;\n        var canvas = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n        if (canvas) {\n            this.indicator = canvas.appendChild(new Indicator({\n                style: {\n                    x: x + size / 2,\n                    y: y - size / 2,\n                    visibility: 'hidden',\n                    position: 'top',\n                    radius: 3,\n                    zIndex: 100,\n                },\n            }));\n        }\n    };\n    IconBase.prototype.disconnectedCallback = function () {\n        this.indicator.destroy();\n    };\n    IconBase.prototype.render = function () {\n        this.renderIcon();\n        if (this.showBackground)\n            this.renderBackground();\n    };\n    IconBase.prototype.bindEvents = function () {\n        var _this = this;\n        var onClick = this.attributes.onClick;\n        this.addEventListener('click', function () {\n            onClick === null || onClick === void 0 ? void 0 : onClick(_this);\n        });\n        if (this.showBackground) {\n            var resetBackground_1 = function () { return _this.background.attr({ opacity: IconBase.backgroundOpacities.default }); };\n            var hoverBackground_1 = function () { return _this.background.attr({ opacity: IconBase.backgroundOpacities.hover }); };\n            var activeBackground_1 = function () { return _this.background.attr({ opacity: IconBase.backgroundOpacities.active }); };\n            this.addEventListener('pointerenter', function () {\n                hoverBackground_1();\n                _this.showIndicator();\n            });\n            this.addEventListener('pointerleave', function () {\n                resetBackground_1();\n                _this.hideIndicator();\n            });\n            this.addEventListener('pointerdown', function () {\n                activeBackground_1();\n            });\n            this.addEventListener('pointerup', function () {\n                resetBackground_1();\n            });\n        }\n    };\n    IconBase.tag = 'IconBase';\n    IconBase.defaultOptions = {\n        style: {\n            x: 0,\n            y: 0,\n            size: 10,\n            color: '#565758',\n            backgroundRadius: 4,\n            backgroundFill: '#e2e2e2',\n        },\n    };\n    IconBase.backgroundOpacities = {\n        default: 0,\n        hover: 0.8,\n        active: 1,\n    };\n    return IconBase;\n}(Component));\nexport { IconBase };\nvar arrow = function (size, color) {\n    if (color === void 0) { color = '#565758'; }\n    return new Path({\n        style: {\n            fill: color,\n            d: \"M \".concat(size, \",\").concat(size, \" L -\").concat(size, \",0 L \").concat(size, \",-\").concat(size, \" Z\"),\n            transformOrigin: 'center',\n        },\n    });\n};\n/** 重置 */\nvar Reset = /** @class */ (function (_super) {\n    __extends(Reset, _super);\n    function Reset() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Reset.prototype.arcPath = function (cx, cy, radius) {\n        var _a = __read([radius, radius], 2), rx = _a[0], ry = _a[1];\n        var getPosByAngle = function (angle) { return [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)]; };\n        var _b = __read(getPosByAngle((-5 / 4) * Math.PI), 2), x1 = _b[0], y1 = _b[1];\n        var _c = __read(getPosByAngle((1 / 4) * Math.PI), 2), x2 = _c[0], y2 = _c[1];\n        return \"M\".concat(x1, \",\").concat(y1, \",A\").concat(rx, \",\").concat(ry, \",0,1,1,\").concat(x2, \",\").concat(y2);\n    };\n    Object.defineProperty(Reset.prototype, \"label\", {\n        get: function () {\n            return '重置';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Reset.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var size = this.iconSize;\n        var lineWidth = this.lineWidth;\n        var arrowSize = lineWidth + 0.5;\n        select(this.icon)\n            .maybeAppend('.reset', 'path')\n            .styles({\n            stroke: color,\n            lineWidth: lineWidth,\n            d: this.arcPath(x, y, size / 2 - lineWidth),\n            markerStart: arrow(arrowSize, color),\n        });\n    };\n    return Reset;\n}(IconBase));\nexport { Reset };\n/** 快退 */\nvar Backward = /** @class */ (function (_super) {\n    __extends(Backward, _super);\n    function Backward() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Backward.prototype, \"label\", {\n        get: function () {\n            return '快退';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Backward.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var size = this.iconSize;\n        var deltaX = size / 2;\n        var deltaY = size / 2 / Math.pow(3, 0.5);\n        var points = [\n            [x, y],\n            [x, y - deltaY],\n            [x - deltaX, y],\n            [x, y + deltaY],\n            [x, y],\n            [x + deltaX, y - deltaY],\n            [x + deltaX, y + deltaY],\n            [x, y],\n        ];\n        select(this.icon).maybeAppend('.backward', 'polygon').styles({\n            points: points,\n            fill: color,\n        });\n    };\n    return Backward;\n}(IconBase));\nexport { Backward };\n/** 快进 */\nvar Forward = /** @class */ (function (_super) {\n    __extends(Forward, _super);\n    function Forward() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Forward.prototype, \"label\", {\n        get: function () {\n            return '快进';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Forward.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var size = this.iconSize;\n        var deltaX = size / 2;\n        var deltaY = size / 2 / Math.pow(3, 0.5);\n        var points = [\n            [x, y],\n            [x, y - deltaY],\n            [x + deltaX, y],\n            [x, y + deltaY],\n            [x, y],\n            [x - deltaX, y - deltaY],\n            [x - deltaX, y + deltaY],\n            [x, y],\n        ];\n        select(this.icon).maybeAppend('.forward', 'polygon').styles({\n            points: points,\n            fill: color,\n        });\n    };\n    return Forward;\n}(IconBase));\nexport { Forward };\nvar Play = /** @class */ (function (_super) {\n    __extends(Play, _super);\n    function Play() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Play.prototype, \"label\", {\n        get: function () {\n            return '播放';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Play.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var size = this.iconSize;\n        var deltaX = (size / 3) * Math.pow(3, 0.5) * 0.8;\n        var points = [\n            [x + deltaX, y],\n            [x - deltaX / 2, y - (size / 2) * 0.8],\n            [x - deltaX / 2, y + (size / 2) * 0.8],\n            [x + deltaX, y],\n        ];\n        select(this.icon).maybeAppend('.play', 'polygon').styles({\n            points: points,\n            fill: color,\n        });\n    };\n    return Play;\n}(IconBase));\nexport { Play };\nvar Pause = /** @class */ (function (_super) {\n    __extends(Pause, _super);\n    function Pause() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Pause.prototype, \"label\", {\n        get: function () {\n            return '暂停';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Pause.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var size = this.iconSize;\n        var deltaX = size / 3;\n        var points = [\n            [x - deltaX, y - size / 2],\n            [x - deltaX, y + size / 2],\n            [x - deltaX / 2, y + size / 2],\n            [x - deltaX / 2, y - size / 2],\n            [x - deltaX, y - size / 2],\n            [x + deltaX / 2, y - size / 2],\n            [x + deltaX / 2, y + size / 2],\n            [x + deltaX, y + size / 2],\n            [x + deltaX, y - size / 2],\n        ];\n        select(this.icon).maybeAppend('.pause', 'polygon').styles({\n            points: points,\n            fill: color,\n        });\n    };\n    return Pause;\n}(IconBase));\nexport { Pause };\n/** 时间范围 */\nvar Range = /** @class */ (function (_super) {\n    __extends(Range, _super);\n    function Range() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Range.prototype, \"label\", {\n        get: function () {\n            return '范围时间';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Range.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var _b = this, size = _b.iconSize, lineWidth = _b.lineWidth;\n        var gap = lineWidth;\n        select(this.icon)\n            .maybeAppend('.left-line', 'line')\n            .styles({\n            x1: x - size / 2,\n            y1: y - size / 2,\n            x2: x - size / 2,\n            y2: y + size / 2,\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n        select(this.icon)\n            .maybeAppend('.right-line', 'line')\n            .styles({\n            x1: x + size / 2,\n            y1: y - size / 2,\n            x2: x + size / 2,\n            y2: y + size / 2,\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n        select(this.icon)\n            .maybeAppend('.left-arrow', 'line')\n            .styles({\n            x1: x,\n            y1: y,\n            x2: x - size / 2 + gap * 2,\n            y2: y,\n            stroke: color,\n            lineWidth: lineWidth,\n            markerEnd: arrow(lineWidth * 2, color),\n        });\n        select(this.icon)\n            .maybeAppend('.right-arrow', 'line')\n            .styles({\n            x1: x,\n            y1: y,\n            x2: x + size / 2 - gap * 2,\n            y2: y,\n            stroke: color,\n            lineWidth: lineWidth,\n            markerEnd: arrow(lineWidth * 2, color),\n        });\n    };\n    return Range;\n}(IconBase));\nexport { Range };\n/** 值范围 */\nvar Value = /** @class */ (function (_super) {\n    __extends(Value, _super);\n    function Value() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Value.prototype, \"label\", {\n        get: function () {\n            return '单一时间';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Value.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var _b = this, size = _b.iconSize, lineWidth = _b.lineWidth;\n        select(this.icon)\n            .maybeAppend('.line', 'line')\n            .styles({\n            x1: x,\n            y1: y - size / 2,\n            x2: x,\n            y2: y + size / 2,\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n        var gap = lineWidth;\n        select(this.icon)\n            .maybeAppend('.left-arrow', 'line')\n            .styles({\n            x1: x - size / 2 - gap * 2,\n            y1: y,\n            x2: x - gap * 2,\n            y2: y,\n            stroke: color,\n            lineWidth: lineWidth,\n            markerEnd: arrow(lineWidth * 2, color),\n        });\n        select(this.icon)\n            .maybeAppend('.right-arrow', 'line')\n            .styles({\n            x1: x + size / 2 + gap * 2,\n            y1: y,\n            x2: x + gap * 2,\n            y2: y,\n            stroke: color,\n            lineWidth: lineWidth,\n            markerEnd: arrow(lineWidth * 2, color),\n        });\n    };\n    return Value;\n}(IconBase));\nexport { Value };\nvar getCoordinatePoints = function (size) {\n    return [\n        [-size / 2, -size / 2],\n        [-size / 2, size / 2],\n        [size / 2, size / 2],\n    ];\n};\nvar LineChart = /** @class */ (function (_super) {\n    __extends(LineChart, _super);\n    function LineChart() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(LineChart.prototype, \"label\", {\n        get: function () {\n            return '折线图';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LineChart.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var _b = this, size = _b.iconSize, lineWidth = _b.lineWidth;\n        var gap = lineWidth;\n        var deltaX = (size - gap * 2 - lineWidth) / 4;\n        var deltaY = (size - gap * 2 - lineWidth) / 2;\n        var _c = __read([x - size / 2 + gap, y + size / 2 - gap * 2], 2), ox = _c[0], oy = _c[1];\n        select(this.icon)\n            .maybeAppend('.coordinate', 'polyline')\n            .styles({\n            points: getCoordinatePoints(size).map(function (_a) {\n                var _b = __read(_a, 2), px = _b[0], py = _b[1];\n                return [px + x, py + y];\n            }),\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n        select(this.icon)\n            .maybeAppend('.line', 'polyline')\n            .styles({\n            points: [\n                [ox, oy],\n                [ox + deltaX, oy - deltaY],\n                [ox + deltaX * 2, oy],\n                [ox + deltaX * 4, oy - deltaY * 2],\n            ],\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n    };\n    return LineChart;\n}(IconBase));\nexport { LineChart };\nvar BarChart = /** @class */ (function (_super) {\n    __extends(BarChart, _super);\n    function BarChart() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(BarChart.prototype, \"label\", {\n        get: function () {\n            return '条形图';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BarChart.prototype, \"data\", {\n        get: function () {\n            return [1, 4, 2, 4, 3];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BarChart.prototype.renderIcon = function () {\n        var data = this.data;\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var _b = this, size = _b.iconSize, lineWidth = _b.lineWidth;\n        var gap = lineWidth;\n        var deltaX = (size - gap) / data.length;\n        var deltaY = (size - gap * 2) / 4;\n        var _c = __read([x - size / 2 + gap * 2, y + size / 2 - gap], 2), ox = _c[0], oy = _c[1];\n        select(this.icon)\n            .maybeAppend('.coordinate', 'polyline')\n            .styles({\n            points: getCoordinatePoints(size).map(function (_a) {\n                var _b = __read(_a, 2), px = _b[0], py = _b[1];\n                return [px + x, py + y];\n            }),\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n        select(this.icon)\n            .maybeAppend('.bars', 'g')\n            .selectAll('.column')\n            .data(this.data.map(function (value, index) { return ({ value: value, index: index }); }))\n            .join(function (enter) {\n            return enter\n                .append('line')\n                .attr('className', 'column')\n                .style('x1', function (_a) {\n                var index = _a.index;\n                return ox + deltaX * index;\n            })\n                .style('y1', oy)\n                .style('x2', function (_a) {\n                var index = _a.index;\n                return ox + deltaX * index;\n            })\n                .style('y2', function (_a) {\n                var value = _a.value;\n                return oy - deltaY * value;\n            })\n                .styles({\n                y1: oy,\n                stroke: color,\n                lineWidth: lineWidth,\n            });\n        });\n    };\n    return BarChart;\n}(IconBase));\nexport { BarChart };\n/** 分割线 */\nvar Split = /** @class */ (function (_super) {\n    __extends(Split, _super);\n    function Split(options) {\n        var _this = _super.call(this, deepAssign({}, { style: { color: '#d8d9d9' } }, options)) || this;\n        _this.showBackground = false;\n        return _this;\n    }\n    Split.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var _b = this, size = _b.iconSize, lineWidth = _b.lineWidth;\n        select(this.icon)\n            .maybeAppend('.split', 'line')\n            .styles({\n            x1: x,\n            y1: y - size / 2,\n            x2: x,\n            y2: y + size / 2,\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n    };\n    return Split;\n}(IconBase));\nexport { Split };\nvar SpeedSelect = /** @class */ (function (_super) {\n    __extends(SpeedSelect, _super);\n    function SpeedSelect() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this.showBackground = false;\n        return _this;\n    }\n    Object.defineProperty(SpeedSelect.prototype, \"padding\", {\n        get: function () {\n            return parseSeriesAttr(0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SpeedSelect.prototype.renderIcon = function () {\n        var iconSize = this.iconSize;\n        var _a = this.attributes, x = _a.x, y = _a.y, _b = _a.speed, speed = _b === void 0 ? 1 : _b;\n        var inheritStyle = omit(this.attributes, [\n            'x',\n            'y',\n            'transform',\n            'transformOrigin',\n            'width',\n            'height',\n            'size',\n            'color',\n            'speed',\n        ]);\n        var width = clamp(iconSize, 20, Infinity);\n        var height = 20;\n        var style = __assign(__assign({}, inheritStyle), { x: x - width / 2, y: y - height / 2, width: width, height: height, defaultValue: speed, bordered: false, showDropdownIcon: false, selectRadius: 2, dropdownPadding: this.padding, dropdownRadius: 2, dropdownSpacing: iconSize / 5, placeholderFontSize: iconSize / 2, optionPadding: 0, optionLabelFontSize: iconSize / 2, optionBackgroundRadius: 1, options: [\n                { label: '1x', value: 1 },\n                { label: '1.5x', value: 1.5 },\n                { label: '2x', value: 2 },\n            ] });\n        select(this.icon)\n            .maybeAppend('.speed', function () { return new Select({ style: style }); })\n            .attr('className', 'speed')\n            .each(function () {\n            this.update(style);\n        });\n    };\n    SpeedSelect.tag = 'SpeedSelect';\n    return SpeedSelect;\n}(IconBase));\nexport { SpeedSelect };\nvar ToggleIcon = /** @class */ (function (_super) {\n    __extends(ToggleIcon, _super);\n    function ToggleIcon(options) {\n        var _this = _super.call(this, options) || this;\n        _this.icon = _this.appendChild(new Group({}));\n        _this.currentType = _this.attributes.type;\n        return _this;\n    }\n    ToggleIcon.prototype.getType = function () {\n        return this.currentType;\n    };\n    ToggleIcon.prototype.render = function () {\n        var _this = this;\n        var _a = this.attributes, onChange = _a.onChange, restStyles = __rest(_a, [\"onChange\"]);\n        select(this.icon)\n            .selectAll('.icon')\n            .data([this.currentType])\n            .join(function (enter) {\n            return enter\n                .append(function (type) {\n                var _a;\n                var Ctor = (_a = _this.toggles.find(function (_a) {\n                    var _b = __read(_a, 1), key = _b[0];\n                    return key === type;\n                })) === null || _a === void 0 ? void 0 : _a[1];\n                if (!Ctor)\n                    throw new Error(\"Invalid type: \".concat(type));\n                return new Ctor({});\n            })\n                .attr('className', 'icon')\n                .styles(restStyles, false)\n                .update({});\n        }, function (update) { return update.styles({ restStyles: restStyles }).update({}); }, function (exit) { return exit.remove(); });\n    };\n    ToggleIcon.prototype.bindEvents = function () {\n        var _this = this;\n        var onChange = this.attributes.onChange;\n        this.addEventListener('click', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            var nextIndex = (_this.toggles.findIndex(function (_a) {\n                var _b = __read(_a, 1), key = _b[0];\n                return key === _this.currentType;\n            }) + 1) % _this.toggles.length;\n            var nextType = _this.toggles[nextIndex][0];\n            onChange === null || onChange === void 0 ? void 0 : onChange(_this.currentType);\n            _this.currentType = nextType;\n            _this.render();\n        });\n    };\n    ToggleIcon.tag = 'ToggleIcon';\n    return ToggleIcon;\n}(Component));\nexport { ToggleIcon };\nvar PlayPause = /** @class */ (function (_super) {\n    __extends(PlayPause, _super);\n    function PlayPause(options) {\n        var _this = _super.call(this, deepAssign({}, { style: { type: 'play' } }, options)) || this;\n        _this.toggles = [\n            ['play', Play],\n            ['pause', Pause],\n        ];\n        return _this;\n    }\n    return PlayPause;\n}(ToggleIcon));\nexport { PlayPause };\nvar SelectionType = /** @class */ (function (_super) {\n    __extends(SelectionType, _super);\n    function SelectionType(options) {\n        var _this = _super.call(this, deepAssign({}, { style: { type: 'range' } }, options)) || this;\n        _this.toggles = [\n            ['range', Range],\n            ['value', Value],\n        ];\n        return _this;\n    }\n    return SelectionType;\n}(ToggleIcon));\nexport { SelectionType };\nvar ChartType = /** @class */ (function (_super) {\n    __extends(ChartType, _super);\n    function ChartType(options) {\n        var _this = _super.call(this, deepAssign({}, { style: { type: 'column' } }, options)) || this;\n        _this.toggles = [\n            ['line', LineChart],\n            ['column', BarChart],\n        ];\n        return _this;\n    }\n    return ChartType;\n}(ToggleIcon));\nexport { ChartType };\n//# sourceMappingURL=icons.js.map","import { __assign, __extends, __read, __spreadArray } from \"tslib\";\nimport { Component } from '../../core';\nimport { Group, Rect } from '../../shapes';\nimport { deepAssign, parseSeriesAttr, subStyleProps } from '../../util';\nimport { Backward, ChartType, Forward, PlayPause, Reset, SelectionType, SpeedSelect, Split } from './icons';\nvar componentsMap = {\n    reset: Reset,\n    speed: SpeedSelect,\n    backward: Backward,\n    playPause: PlayPause,\n    forward: Forward,\n    selectionType: SelectionType,\n    chartType: ChartType,\n    split: Split,\n};\nvar Controller = /** @class */ (function (_super) {\n    __extends(Controller, _super);\n    function Controller(options) {\n        var _this = _super.call(this, deepAssign({}, Controller.defaultOptions, options)) || this;\n        _this.background = _this.appendChild(new Rect({}));\n        _this.functions = _this.appendChild(new Group({}));\n        return _this;\n    }\n    Object.defineProperty(Controller.prototype, \"padding\", {\n        get: function () {\n            return parseSeriesAttr(this.attributes.padding);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Controller.prototype.renderBackground = function () {\n        var _a = this.style, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var backgroundStyle = subStyleProps(this.attributes, 'background');\n        this.background.attr(__assign({ x: x, y: y, width: width, height: height }, backgroundStyle));\n    };\n    Controller.prototype.renderFunctions = function () {\n        var _this = this;\n        var _a;\n        var _b = this.attributes, functions = _b.functions, iconSize = _b.iconSize, iconSpacing = _b.iconSpacing, x = _b.x, y = _b.y, width = _b.width, height = _b.height, align = _b.align;\n        var _c = __read(this.padding, 4), right = _c[1], left = _c[3];\n        var components = functions.reduce(function (prev, curr) {\n            if (prev.length && curr.length) {\n                return prev.concat.apply(prev, __spreadArray(['split'], __read(curr), false));\n            }\n            return prev.concat.apply(prev, __spreadArray([], __read(curr), false));\n        }, []);\n        var componentsWidth = components.length * (iconSize + iconSpacing) - iconSpacing;\n        var xOffset = {\n            left: left + iconSize / 2,\n            center: (width - componentsWidth) / 2 + iconSize / 2,\n            right: width - componentsWidth - left - right + iconSize / 2,\n        }[align] || 0;\n        (_a = this.speedSelect) === null || _a === void 0 ? void 0 : _a.destroy();\n        this.functions.removeChildren();\n        components.forEach(function (name, index) {\n            var _a;\n            var Ctor = componentsMap[name];\n            var style = {\n                x: x + index * (iconSize + iconSpacing) + xOffset,\n                y: y + height / 2,\n                size: iconSize,\n            };\n            if (Ctor === SpeedSelect) {\n                style.speed = _this.attributes.speed;\n                style.onSelect = function (value) { return _this.handleFunctionChange(name, { value: value }); };\n            }\n            else if ([PlayPause, SelectionType, ChartType].includes(Ctor)) {\n                style.onChange = function (value) { return _this.handleFunctionChange(name, { value: value }); };\n                if (Ctor === PlayPause)\n                    style.type = _this.attributes.state === 'play' ? 'pause' : 'play';\n                if (Ctor === SelectionType)\n                    style.type = _this.attributes.selectionType === 'range' ? 'value' : 'range';\n                if (Ctor === ChartType)\n                    style.type = _this.attributes.chartType === 'line' ? 'column' : 'line';\n            }\n            else {\n                // IconBase\n                style.onClick = function () { return _this.handleFunctionChange(name, { value: name }); };\n            }\n            if (Ctor === SpeedSelect) {\n                // SpeedSelect 直接插入到 canvas\n                var canvas = (_a = _this.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n                if (canvas) {\n                    _this.speedSelect = new Ctor({ style: __assign(__assign({}, style), { zIndex: 100 }) });\n                    canvas.appendChild(_this.speedSelect);\n                }\n            }\n            else {\n                _this.functions.appendChild(new Ctor({ style: style }));\n            }\n        });\n    };\n    Controller.prototype.disconnectedCallback = function () {\n        var _a;\n        _super.prototype.disconnectedCallback.call(this);\n        (_a = this.speedSelect) === null || _a === void 0 ? void 0 : _a.destroy();\n    };\n    Controller.prototype.render = function () {\n        this.renderBackground();\n        this.renderFunctions();\n    };\n    Controller.prototype.handleFunctionChange = function (name, value) {\n        var onChange = this.attributes.onChange;\n        onChange === null || onChange === void 0 ? void 0 : onChange(name, value);\n    };\n    Controller.defaultOptions = {\n        style: {\n            x: 0,\n            y: 0,\n            width: 300,\n            height: 40,\n            padding: 0,\n            align: 'center',\n            iconSize: 25,\n            iconSpacing: 0,\n            speed: 1,\n            state: 'pause',\n            chartType: 'line',\n            selectionType: 'range',\n            backgroundFill: '#fbfdff',\n            backgroundStroke: '#ebedf0',\n            functions: [\n                ['reset', 'speed'],\n                ['backward', 'playPause', 'forward'],\n                ['selectionType', 'chartType'],\n            ],\n        },\n    };\n    return Controller;\n}(Component));\nexport { Controller };\n//# sourceMappingURL=controller.js.map","import { __assign, __extends } from \"tslib\";\nimport { Component } from '../../core';\nimport { Circle } from '../../shapes';\nimport { select, subStyleProps } from '../../util';\nimport { deepAssign } from '../../util/deep-assign';\nvar TimeModeHandle = /** @class */ (function (_super) {\n    __extends(TimeModeHandle, _super);\n    function TimeModeHandle(options) {\n        var _this = _super.call(this, deepAssign({}, TimeModeHandle.defaultOptions, options)) || this;\n        _this.bindEvents();\n        return _this;\n    }\n    TimeModeHandle.prototype.bindEvents = function () {\n        var _this = this;\n        this.addEventListener('mouseenter', function () {\n            _this.attr('lineWidth', Math.ceil(+(_this.style.r || 0) / 2));\n        });\n        this.addEventListener('mouseleave', function () {\n            _this.attr('lineWidth', 0);\n        });\n    };\n    TimeModeHandle.defaultOptions = {\n        style: {\n            r: 5,\n            fill: '#3f7cf7',\n            lineWidth: 0,\n            stroke: '#3f7cf7',\n            strokeOpacity: 0.5,\n            cursor: 'pointer',\n        },\n    };\n    return TimeModeHandle;\n}(Circle));\nexport { TimeModeHandle };\nvar ChartModeHandle = /** @class */ (function (_super) {\n    __extends(ChartModeHandle, _super);\n    function ChartModeHandle(options) {\n        return _super.call(this, deepAssign({}, ChartModeHandle.defaultOptions, options)) || this;\n    }\n    ChartModeHandle.prototype.renderBackground = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var style = subStyleProps(this.attributes, 'background');\n        select(this)\n            .maybeAppend('background', 'rect')\n            .attr('className', 'background')\n            .styles(__assign({ x: x - width / 2, y: y - height / 2, width: width, height: height }, style));\n    };\n    ChartModeHandle.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, iconSize = _a.iconSize;\n        var style = subStyleProps(this.attributes, 'icon');\n        var diffX = 1;\n        var diffY = iconSize / 2;\n        select(this)\n            .maybeAppend('icon-left-line', 'line')\n            .attr('className', 'icon-left-line')\n            .styles(__assign({ x1: x - diffX, y1: y - diffY, x2: x - diffX, y2: y + diffY }, style));\n        select(this)\n            .maybeAppend('icon-right-line', 'line')\n            .attr('className', 'icon-right-line')\n            .styles(__assign({ x1: x + diffX, y1: y - diffY, x2: x + diffX, y2: y + diffY }, style));\n    };\n    ChartModeHandle.prototype.renderBorder = function () {\n        var _a = this.attributes, xx = _a.x, y = _a.y, width = _a.width, height = _a.height, type = _a.type;\n        var style = subStyleProps(this.attributes, 'border');\n        var x = type === 'start' ? +width / 2 : -width / 2;\n        select(this)\n            .maybeAppend('border', 'line')\n            .attr('className', 'border')\n            .styles(__assign({ x1: x + xx, y1: y - height / 2, x2: x + xx, y2: y + height / 2 }, style));\n    };\n    ChartModeHandle.prototype.render = function () {\n        this.renderBackground();\n        this.renderIcon();\n        this.renderBorder();\n    };\n    ChartModeHandle.defaultOptions = {\n        style: {\n            x: 0,\n            y: 0,\n            width: 10,\n            height: 50,\n            iconSize: 10,\n            type: 'start',\n            backgroundFill: '#fff',\n            backgroundFillOpacity: 0.5,\n            iconStroke: '#9a9a9a',\n            iconLineWidth: 1,\n            borderStroke: '#e8e8e8',\n            borderLineWidth: 1,\n        },\n    };\n    return ChartModeHandle;\n}(Component));\nexport { ChartModeHandle };\n//# sourceMappingURL=handle.js.map","import { formatTime } from '../../util/time';\nexport function labelFormatter(time, interval) {\n    if (typeof time === 'number') {\n        return parseBySeries(time);\n    }\n    return parseByTime(time, interval);\n}\nexport function parseByTime(time, interval) {\n    var date = new Date(time);\n    switch (interval) {\n        case 'half-hour':\n        case 'hour':\n        case 'four-hour':\n            if ([0, 6, 12, 18].includes(date.getHours()) && date.getMinutes() === 0) {\n                // HH:mm\\nYYYY-MM-DD\n                return formatTime(date, 'HH:mm\\nYYYY-MM-DD');\n            }\n            // HH:mm\n            return formatTime(date, 'HH:mm');\n        case 'half-day':\n            // A\\nYYYY-MM-DD\n            if (date.getHours() < 12) {\n                return \"AM\\n\".concat(formatTime(date, 'YYYY-MM-DD'));\n            }\n            // A\n            return 'PM';\n        case 'day':\n            if ([1, 10, 20].includes(date.getDate())) {\n                // DD\\nYYYY-MM\n                return formatTime(date, 'DD\\nYYYY-MM');\n            }\n            // DD\n            return formatTime(date, 'DD');\n        case 'week':\n            if (date.getDate() <= 7) {\n                // DD\\nYYYY-MM\n                return formatTime(date, 'DD\\nYYYY-MM');\n            }\n            // DD\n            return formatTime(date, 'DD');\n        case 'month':\n            if ([0, 6].includes(date.getMonth())) {\n                // MM月\\nYYYY\n                return formatTime(date, 'MM月\\nYYYY');\n            }\n            // MM月\n            return formatTime(date, 'MM月');\n        case 'season':\n            if ([0].includes(date.getMonth())) {\n                // MM月\\nYYYY\n                return formatTime(date, 'MM月\\nYYYY');\n            }\n            // MM月\n            return formatTime(date, 'MM月');\n        case 'year':\n            // YYYY\n            return formatTime(date, 'YYYY');\n        default:\n            // YYYY-MM-DD HH:mm\n            return formatTime(date, 'YYYY-MM-DD HH:mm');\n    }\n}\n/**\n * 按照序列数据解析，如第 1, 2, 3 秒\n * @param time\n * @param interval\n */\nexport function parseBySeries(time) {\n    var hours = String(Math.floor(time / 3600)).padStart(2, '0');\n    var minutes = String(Math.floor((time % 3600) / 60)).padStart(2, '0');\n    var seconds = String(Math.floor(time % 60)).padStart(2, '0');\n    if (time < 3600) {\n        // mm:ss\n        return \"\".concat(minutes, \":\").concat(seconds);\n    }\n    return \"\".concat(hours, \":\").concat(minutes, \":\").concat(seconds);\n}\n//# sourceMappingURL=utils.js.map","import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { clamp } from '@antv/util';\nimport { Component } from '../../core';\nimport { Line } from '../../shapes';\nimport { BBox, deepAssign, subStyleProps, formatTime } from '../../util';\nimport { Axis } from '../axis';\nimport { Slider } from '../slider';\nimport { Controller } from './controller';\nimport { ChartModeHandle, TimeModeHandle } from './handle';\nimport { labelFormatter, parseBySeries } from './utils';\nvar Timebar = /** @class */ (function (_super) {\n    __extends(Timebar, _super);\n    function Timebar(options) {\n        var _this = _super.call(this, deepAssign({}, Timebar.defaultOptions, options)) || this;\n        _this.axis = _this.appendChild(new Axis({\n            style: { type: 'linear', startPos: [0, 0], endPos: [0, 0], data: [], showArrow: false, animate: false },\n        }));\n        /** 时间线 group，用于放置 timeline 或者 chart */\n        _this.timeline = _this.appendChild(new Slider({\n            style: {\n                onChange: function (values) {\n                    _this.handleSliderChange(values);\n                },\n            },\n        }));\n        _this.controller = _this.appendChild(new Controller({}));\n        _this.states = {};\n        _this.handleSliderChange = function (values) {\n            var prevValues = (function () {\n                var val = _this.states.values;\n                if (Array.isArray(val))\n                    return __spreadArray([], __read(val), false);\n                return val;\n            })();\n            _this.setBySliderValues(values);\n            _this.dispatchOnChange(prevValues);\n        };\n        var _a = _this.attributes, selectionType = _a.selectionType, chartType = _a.chartType, speed = _a.speed, state = _a.state, playMode = _a.playMode, values = _a.values;\n        _this.states = { chartType: chartType, playMode: playMode, selectionType: selectionType, speed: speed, state: state };\n        _this.setByTimebarValues(values);\n        return _this;\n    }\n    Object.defineProperty(Timebar.prototype, \"data\", {\n        get: function () {\n            var data = this.attributes.data;\n            var compareFn = function (a, b) {\n                if (a.time < b.time)\n                    return -1;\n                if (a.time > b.time)\n                    return 1;\n                return 0;\n            };\n            return data.sort(compareFn);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Timebar.prototype, \"space\", {\n        /** 计算空间分配 */\n        get: function () {\n            var _a = this.attributes, x = _a.x, y = _a.y, width = _a.width, height = _a.height, type = _a.type, controllerHeight = _a.controllerHeight;\n            var availableTimelineHeight = clamp(+height - controllerHeight, 0, +height);\n            var controllerBBox = new BBox(x, y + +height - controllerHeight, +width, controllerHeight);\n            // chart 模式下可用\n            var axisBBox;\n            var axisHeight = 0;\n            if (type === 'chart') {\n                // axis 默认分配高度为 35\n                axisHeight = 35;\n                axisBBox = new BBox(x, y + availableTimelineHeight - axisHeight, +width, axisHeight);\n            }\n            else\n                axisBBox = new BBox();\n            var timelineHeight = type === 'time' ? 10 : availableTimelineHeight;\n            var timelineBBox = new BBox(x, y + (type === 'time' ? availableTimelineHeight : availableTimelineHeight - timelineHeight), +width, timelineHeight - axisHeight);\n            return { axisBBox: axisBBox, controllerBBox: controllerBBox, timelineBBox: timelineBBox };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Timebar.prototype.setBySliderValues = function (val) {\n        var _a, _b;\n        var data = this.data;\n        var _c = __read(Array.isArray(val) ? val : [0, val], 2), startRatio = _c[0], endRatio = _c[1];\n        var length = data.length;\n        var startDatum = data[Math.floor(startRatio * length)];\n        var endDatum = data[Math.ceil(endRatio * length) - (Array.isArray(val) ? 0 : 1)];\n        // 如果 endDatum 不存在，则其已经比最大的时间范围更大\n        this.states.values = [(_a = startDatum === null || startDatum === void 0 ? void 0 : startDatum.time) !== null && _a !== void 0 ? _a : data[0].time, (_b = endDatum === null || endDatum === void 0 ? void 0 : endDatum.time) !== null && _b !== void 0 ? _b : Infinity];\n    };\n    Timebar.prototype.setByTimebarValues = function (val) {\n        var _a, _b, _c;\n        var data = this.data;\n        var _d = __read(Array.isArray(val) ? val : [undefined, val], 2), start = _d[0], end = _d[1];\n        var startDatum = data.find(function (_a) {\n            var time = _a.time;\n            return time === start;\n        });\n        var endDatum = data.find(function (_a) {\n            var time = _a.time;\n            return time === end;\n        });\n        this.states.values = [(_a = startDatum === null || startDatum === void 0 ? void 0 : startDatum.time) !== null && _a !== void 0 ? _a : (_b = data[0]) === null || _b === void 0 ? void 0 : _b.time, (_c = endDatum === null || endDatum === void 0 ? void 0 : endDatum.time) !== null && _c !== void 0 ? _c : Infinity];\n    };\n    Timebar.prototype.setByIndex = function (index) {\n        var _a, _b, _c, _d;\n        var data = this.data;\n        var _e = __read(index, 2), startIndex = _e[0], endIndex = _e[1];\n        this.states.values = [(_b = (_a = data[startIndex]) === null || _a === void 0 ? void 0 : _a.time) !== null && _b !== void 0 ? _b : data[0].time, (_d = (_c = this.data[endIndex]) === null || _c === void 0 ? void 0 : _c.time) !== null && _d !== void 0 ? _d : Infinity];\n    };\n    Object.defineProperty(Timebar.prototype, \"sliderValues\", {\n        /**\n         * 获取 timebar 的 values\n         */\n        get: function () {\n            var _a = this.states, values = _a.values, selectionType = _a.selectionType;\n            var _b = __read(Array.isArray(values) ? values : [undefined, values], 2), start = _b[0], end = _b[1];\n            var data = this.data;\n            var length = data.length;\n            var isValue = selectionType === 'value';\n            var getStartValue = function () {\n                var startDatumIndex = data.findIndex(function (_a) {\n                    var time = _a.time;\n                    return time === start;\n                });\n                if (isValue)\n                    return 0;\n                if (startDatumIndex > -1)\n                    return startDatumIndex / length;\n                // value 模式下默认取 0\n                return 0;\n            };\n            var getEndValue = function () {\n                if (end === Infinity)\n                    return 1;\n                var endDatumIndex = data.findIndex(function (_a) {\n                    var time = _a.time;\n                    return time === end;\n                });\n                if (endDatumIndex > -1)\n                    return endDatumIndex / length;\n                // range 模式下默认取 1，value 模式下默认取 0.5\n                if (isValue)\n                    return 0.5;\n                return 1;\n            };\n            return [getStartValue(), getEndValue()];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Timebar.prototype, \"values\", {\n        get: function () {\n            var _a = this.states, values = _a.values, selectionType = _a.selectionType;\n            var _b = __read(Array.isArray(values) ? values : [this.data[0].time, values], 2), start = _b[0], end = _b[1];\n            if (selectionType === 'value')\n                return end;\n            return [start, end];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Timebar.prototype.getDatumByRatio = function (ratio) {\n        var data = this.data;\n        var length = data.length;\n        var index = Math.floor(ratio * (length - 1));\n        return data[index];\n    };\n    Object.defineProperty(Timebar.prototype, \"chartHandleIconShape\", {\n        get: function () {\n            var selectionType = this.states.selectionType;\n            var height = this.space.timelineBBox.height;\n            if (selectionType === 'range')\n                return function (type) { return new ChartModeHandle({ style: { type: type, height: height, iconSize: height / 6 } }); };\n            return function () {\n                return new Line({ style: { x1: 0, y1: -height / 2, x2: 0, y2: height / 2, lineWidth: 2, stroke: '#c8c8c8' } });\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Timebar.prototype.getChartStyle = function (bbox) {\n        var _this = this;\n        var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n        var _a = this.states, selectionType = _a.selectionType, chartType = _a.chartType;\n        var data = this.data;\n        var _b = this.attributes, type = _b.type, userDefinedLabelFormatter = _b.labelFormatter;\n        var _c = subStyleProps(this.attributes, 'chart'), ignoreType = _c.type, userDefinedChartStyle = __rest(_c, [\"type\"]);\n        var isRange = selectionType === 'range';\n        if (type === 'time') {\n            return __assign({ handleIconShape: function () { return new TimeModeHandle({}); }, selectionFill: '#2e7ff8', selectionFillOpacity: 1, showLabelOnInteraction: true, handleLabelDy: isRange ? -15 : 0, autoFitLabel: isRange, handleSpacing: isRange ? -15 : 0, trackFill: '#edeeef', trackLength: width, trackOpacity: 0.5, trackRadius: height / 2, trackSize: height / 2, type: selectionType, values: this.sliderValues, formatter: function (value) {\n                    if (userDefinedLabelFormatter)\n                        return userDefinedLabelFormatter(value);\n                    var time = _this.getDatumByRatio(value).time;\n                    if (typeof time === 'number')\n                        return parseBySeries(time);\n                    return formatTime(time, 'YYYY-MM-DD HH:mm:ss');\n                }, transform: \"translate(\".concat(x, \", \").concat(y, \")\"), \n                // x,\n                // y,\n                zIndex: 1 }, userDefinedChartStyle);\n        }\n        // type === 'chart'\n        var handleIconOffset = selectionType === 'range' ? 5 : 0;\n        var sparklineData = data.map(function (_a) {\n            var value = _a.value;\n            return value;\n        });\n        return __assign({ handleIconOffset: handleIconOffset, handleIconShape: this.chartHandleIconShape, selectionFill: '#fff', selectionFillOpacity: 0.5, selectionType: 'invert', sparklineSpacing: 0.1, sparklineColumnLineWidth: 0, sparklineColor: '#d4e5fd', sparklineAreaOpacity: 1, sparklineAreaLineWidth: 0, sparklineData: sparklineData, sparklineType: chartType, sparklineScale: 0.8, trackLength: width, trackSize: height, type: selectionType, values: this.sliderValues, \n            // x,\n            // y,\n            transform: \"translate(\".concat(x, \", \").concat(y, \")\"), zIndex: 1 }, userDefinedChartStyle);\n    };\n    Timebar.prototype.renderChart = function (bbox) {\n        if (bbox === void 0) { bbox = this.space.timelineBBox; }\n        this.timeline.update(this.getChartStyle(bbox));\n    };\n    Timebar.prototype.updateSelection = function () {\n        this.timeline.setValues(this.sliderValues, true);\n        this.handleSliderChange(this.sliderValues);\n    };\n    Timebar.prototype.getAxisStyle = function (bbox) {\n        var data = this.data;\n        var _a = this.attributes, interval = _a.interval, userDefinedLabelFormatter = _a.labelFormatter;\n        var userDefinedAxisStyle = subStyleProps(this.attributes, 'axis');\n        var x = bbox.x, y = bbox.y, width = bbox.width;\n        // 需要补一个刻度\n        var axisData = __spreadArray(__spreadArray([], __read(data), false), [{ time: 0 }], false).map(function (_a, index, arr) {\n            var time = _a.time;\n            return ({\n                label: \"\".concat(time),\n                value: index / (arr.length - 1),\n                time: time,\n            });\n        });\n        var style = __assign({ startPos: [x, y], endPos: [x + width, y], data: axisData, \n            // hide last label\n            labelFilter: function (_datum, index) { return index < axisData.length - 1; }, labelFormatter: function (_a) {\n                var time = _a.time;\n                return userDefinedLabelFormatter ? userDefinedLabelFormatter(time) : labelFormatter(time, interval);\n            } }, userDefinedAxisStyle);\n        return style;\n    };\n    Timebar.prototype.renderAxis = function (bbox) {\n        if (bbox === void 0) { bbox = this.space.axisBBox; }\n        var type = this.attributes.type;\n        if (type !== 'chart')\n            return;\n        this.axis.update(this.getAxisStyle(bbox));\n    };\n    Timebar.prototype.renderController = function (bbox) {\n        if (bbox === void 0) { bbox = this.space.controllerBBox; }\n        var type = this.attributes.type;\n        var _a = this.states, state = _a.state, speed = _a.speed, selectionType = _a.selectionType, chartType = _a.chartType;\n        var userDefinedControllerStyle = subStyleProps(this.attributes, 'controller');\n        var that = this;\n        var style = __assign(__assign(__assign({}, bbox), { iconSize: 20, speed: speed, state: state, selectionType: selectionType, chartType: chartType, onChange: function (type, _a) {\n                var value = _a.value;\n                switch (type) {\n                    case 'reset':\n                        that.internalReset();\n                        break;\n                    case 'speed':\n                        that.handleSpeedChange(value);\n                        break;\n                    case 'backward':\n                        that.internalBackward();\n                        break;\n                    case 'playPause':\n                        if (value === 'play')\n                            that.internalPlay();\n                        else\n                            that.internalPause();\n                        break;\n                    case 'forward':\n                        that.internalForward();\n                        break;\n                    case 'selectionType':\n                        that.handleSelectionTypeChange(value);\n                        break;\n                    case 'chartType':\n                        that.handleChartTypeChange(value);\n                        break;\n                    default:\n                        break;\n                }\n            } }), userDefinedControllerStyle);\n        if (type === 'time') {\n            style.functions = [['reset', 'speed'], ['backward', 'playPause', 'forward'], ['selectionType']];\n        }\n        this.controller.update(style);\n    };\n    Timebar.prototype.dispatchOnChange = function (prevValues) {\n        var data = this.data;\n        var onChange = this.attributes.onChange;\n        var _a = this.states, values = _a.values, selectionType = _a.selectionType;\n        var _b = __read(values, 2), start = _b[0], end = _b[1];\n        var endTime = end === Infinity ? data.at(-1).time : end;\n        var newValues = selectionType === 'range' ? [start, endTime] : endTime;\n        var isEqual = function (val1, val2) {\n            if (Array.isArray(val1)) {\n                if (!Array.isArray(val2))\n                    return false;\n                if (val1[0] === val2[0]) {\n                    if (val1[1] === val2[1])\n                        return true;\n                    if (val1[1] === Infinity || val2[1] === Infinity)\n                        return true;\n                }\n                return false;\n            }\n            if (Array.isArray(val2))\n                return false;\n            return val1 === val2;\n        };\n        // 如果和当前值不同，才响应\n        if (!prevValues || !isEqual(prevValues, newValues)) {\n            onChange === null || onChange === void 0 ? void 0 : onChange(selectionType === 'range' ? [start, endTime] : endTime);\n        }\n    };\n    Timebar.prototype.internalReset = function (preventEvent) {\n        var _a, _b;\n        var selectionType = this.states.selectionType;\n        this.internalPause();\n        this.setBySliderValues(selectionType === 'range' ? [0, 1] : [0, 0]);\n        this.renderController();\n        this.updateSelection();\n        if (!preventEvent) {\n            (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onReset) === null || _b === void 0 ? void 0 : _b.call(_a);\n            this.dispatchOnChange();\n        }\n    };\n    Timebar.prototype.reset = function () {\n        this.internalReset();\n    };\n    Timebar.prototype.moveSelection = function (direction, preventEvent) {\n        var data = this.data;\n        var length = data.length;\n        var _a = this.states, values = _a.values, selectionType = _a.selectionType, playMode = _a.playMode;\n        var _b = __read(values, 2), startTime = _b[0], endTime = _b[1];\n        var startIndex = data.findIndex(function (_a) {\n            var time = _a.time;\n            return time === startTime;\n        });\n        var endIndex = data.findIndex(function (_a) {\n            var time = _a.time;\n            return time === endTime;\n        });\n        if (endIndex === -1)\n            endIndex = length;\n        var diff = direction === 'backward' ? -1 : 1;\n        var currentIndexes;\n        if (selectionType === 'range') {\n            // end 后移一个时间间隔\n            if (playMode === 'acc') {\n                currentIndexes = [startIndex, endIndex + diff];\n                // 如果回退过程中，start 和 end 相遇，则 end 重置到 length\n                if (diff === -1 && startIndex === endIndex) {\n                    currentIndexes = [startIndex, length];\n                }\n            }\n            // start, end 后移一个时间间隔\n            else\n                currentIndexes = [startIndex + diff, endIndex + diff];\n        }\n        // end 后移一个时间间隔\n        else\n            currentIndexes = [startIndex, endIndex + diff];\n        var normalizeIndexes = function (indexes) {\n            // 先进行排序\n            var _a = __read(indexes.sort(function (a, b) { return a - b; }), 2), start = _a[0], end = _a[1];\n            // 保证 index 在 [0, length]\n            var clampIndex = function (index) { return clamp(index, 0, length); };\n            // 如果 end 超出最大值\n            if (end > length) {\n                // value 模式下，重置到 0\n                if (selectionType === 'value')\n                    return [0, 0];\n                // 移动到 start\n                if (playMode === 'acc')\n                    return [clampIndex(start), clampIndex(start)];\n                // 整体移动到起始位置\n                return [0, clampIndex(end - start)];\n            }\n            // 如果是倒放，到头时，整体移动到末尾\n            if (start < 0) {\n                if (playMode === 'acc')\n                    return [0, clampIndex(end)];\n                return [clampIndex(start + length - end), length];\n            }\n            return [clampIndex(start), clampIndex(end)];\n        };\n        var normalizedIndexes = normalizeIndexes(currentIndexes);\n        this.setByIndex(normalizedIndexes);\n        this.updateSelection();\n        return normalizedIndexes;\n    };\n    Timebar.prototype.internalBackward = function (preventEvent) {\n        var _a, _b;\n        var indexes = this.moveSelection('backward', preventEvent);\n        if (!preventEvent) {\n            (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onBackward) === null || _b === void 0 ? void 0 : _b.call(_a);\n            this.dispatchOnChange();\n        }\n        return indexes;\n    };\n    Timebar.prototype.backward = function () {\n        this.internalBackward();\n    };\n    Timebar.prototype.internalPlay = function (preventEvent) {\n        var _this = this;\n        var _a, _b;\n        var data = this.data;\n        var loop = this.attributes.loop;\n        var _c = this.states.speed, speed = _c === void 0 ? 1 : _c;\n        this.playInterval = window.setInterval(function () {\n            var indexes = _this.internalForward();\n            // 如果不是循环播放，则播放到最后一个值时暂停\n            if (indexes[1] === data.length && !loop) {\n                // 这里需要抛出暂停事件\n                _this.internalPause();\n                _this.renderController();\n            }\n        }, 1000 / speed);\n        this.states.state = 'play';\n        !preventEvent && ((_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onPlay) === null || _b === void 0 ? void 0 : _b.call(_a));\n    };\n    Timebar.prototype.play = function () {\n        this.internalPlay();\n    };\n    Timebar.prototype.internalPause = function (preventEvent) {\n        var _a, _b;\n        clearInterval(this.playInterval);\n        this.states.state = 'pause';\n        !preventEvent && ((_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onPause) === null || _b === void 0 ? void 0 : _b.call(_a));\n    };\n    Timebar.prototype.pause = function () {\n        this.internalPause();\n    };\n    Timebar.prototype.internalForward = function (preventEvent) {\n        var _a, _b;\n        var indexes = this.moveSelection('forward', preventEvent);\n        if (!preventEvent) {\n            (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onForward) === null || _b === void 0 ? void 0 : _b.call(_a);\n            this.dispatchOnChange();\n        }\n        return indexes;\n    };\n    Timebar.prototype.forward = function () {\n        this.internalForward();\n    };\n    Timebar.prototype.handleSpeedChange = function (value) {\n        var _a, _b;\n        this.states.speed = value;\n        var state = this.states.state;\n        if (state === 'play') {\n            // 重新设定 interval\n            this.internalPause(true);\n            this.internalPlay(true);\n        }\n        (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onSpeedChange) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    Timebar.prototype.handleSelectionTypeChange = function (type) {\n        var _a, _b;\n        this.states.selectionType = type;\n        this.renderChart();\n        (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onSelectionTypeChange) === null || _b === void 0 ? void 0 : _b.call(_a, type);\n    };\n    Timebar.prototype.handleChartTypeChange = function (type) {\n        var _a, _b;\n        this.states.chartType = type;\n        this.renderChart();\n        (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onChartTypeChange) === null || _b === void 0 ? void 0 : _b.call(_a, type);\n    };\n    Timebar.prototype.render = function () {\n        var _a = this.space, axisBBox = _a.axisBBox, controllerBBox = _a.controllerBBox, timelineBBox = _a.timelineBBox;\n        this.renderController(controllerBBox);\n        this.renderAxis(axisBBox);\n        this.renderChart(timelineBBox);\n        if (this.states.state === 'play')\n            this.internalPlay();\n    };\n    Timebar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.internalPause(true);\n    };\n    Timebar.defaultOptions = {\n        style: {\n            x: 0,\n            y: 0,\n            axisLabelFill: '#6e6e6e',\n            axisLabelTextAlign: 'left',\n            axisLabelTextBaseline: 'top',\n            axisLabelTransform: 'translate(5, -12)',\n            axisLineLineWidth: 1,\n            axisLineStroke: '#cacdd1',\n            axisTickLength: 15,\n            axisTickLineWidth: 1,\n            axisTickStroke: '#cacdd1',\n            chartShowLabel: false,\n            chartType: 'line',\n            controllerAlign: 'center',\n            controllerHeight: 40,\n            data: [],\n            interval: 'day',\n            loop: false,\n            playMode: 'acc',\n            selectionType: 'range',\n            type: 'time',\n        },\n    };\n    return Timebar;\n}(Component));\nexport { Timebar };\n//# sourceMappingURL=timebar.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Timebar as TimebarComponent } from '@antv/component';\nimport { isArray, isDate, isNumber } from '@antv/util';\nimport { idOf } from '../utils/id';\nimport { parsePadding } from '../utils/padding';\nimport { BasePlugin } from './base-plugin';\nimport { createPluginCanvas } from './utils/canvas';\nconst prospectiveTimeKeys = ['timestamp', 'time', 'date', 'datetime'];\n/**\n * <zh/> 时间组件\n *\n * <en/> Timebar\n */\nexport class Timebar extends BasePlugin {\n    get padding() {\n        return parsePadding(this.options.padding);\n    }\n    constructor(context, options) {\n        super(context, Object.assign({}, Timebar.defaultOptions, options));\n        this.backup();\n        this.upsertTimebar();\n    }\n    /**\n     * <zh/> 播放\n     *\n     * <en/> Play\n     */\n    play() {\n        var _a;\n        (_a = this.timebar) === null || _a === void 0 ? void 0 : _a.play();\n    }\n    /**\n     * <zh/> 暂停\n     *\n     * <en/> Pause\n     */\n    pause() {\n        var _a;\n        (_a = this.timebar) === null || _a === void 0 ? void 0 : _a.pause();\n    }\n    /**\n     * <zh/> 前进\n     *\n     * <en/> Forward\n     */\n    forward() {\n        var _a;\n        (_a = this.timebar) === null || _a === void 0 ? void 0 : _a.forward();\n    }\n    /**\n     * <zh/> 后退\n     *\n     * <en/> Backward\n     */\n    backward() {\n        var _a;\n        (_a = this.timebar) === null || _a === void 0 ? void 0 : _a.backward();\n    }\n    /**\n     * <zh/> 重置\n     *\n     * <en/> Reset\n     */\n    reset() {\n        var _a;\n        (_a = this.timebar) === null || _a === void 0 ? void 0 : _a.reset();\n    }\n    /**\n     * <zh/> 更新时间条配置项\n     *\n     * <en/> Update timebar configuration options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.backup();\n        this.upsertTimebar();\n    }\n    /**\n     * <zh/> 备份数据\n     *\n     * <en/> Backup data\n     */\n    backup() {\n        this.originalData = shallowCopy(this.context.graph.getData());\n    }\n    upsertTimebar() {\n        const { canvas } = this.context;\n        const _a = this.options, { onChange, timebarType, data, x, y, width, height, mode } = _a, restOptions = __rest(_a, [\"onChange\", \"timebarType\", \"data\", \"x\", \"y\", \"width\", \"height\", \"mode\"]);\n        const canvasSize = canvas.getSize();\n        const [top] = this.padding;\n        this.upsertCanvas().ready.then(() => {\n            var _a;\n            const style = Object.assign(Object.assign({ x: canvasSize[0] / 2 - width / 2, y: top, onChange: (value) => {\n                    const range = (isArray(value) ? value : [value, value]).map((time) => isDate(time) ? time.getTime() : time);\n                    if (this.options.mode === 'modify')\n                        this.filterElements(range);\n                    else\n                        this.hiddenElements(range);\n                    onChange === null || onChange === void 0 ? void 0 : onChange(range);\n                } }, restOptions), { data: data.map((datum) => (isNumber(datum) ? { time: datum, value: 0 } : datum)), width,\n                height, type: timebarType });\n            if (!this.timebar) {\n                this.timebar = new TimebarComponent({ style });\n                (_a = this.canvas) === null || _a === void 0 ? void 0 : _a.appendChild(this.timebar);\n            }\n            else {\n                this.timebar.update(style);\n            }\n        });\n    }\n    upsertCanvas() {\n        if (this.canvas)\n            return this.canvas;\n        const { className, height, position } = this.options;\n        const graphCanvas = this.context.canvas;\n        const [width] = graphCanvas.getSize();\n        const [top, , bottom] = this.padding;\n        const [$container, canvas] = createPluginCanvas({\n            width,\n            height: height + top + bottom,\n            graphCanvas,\n            className: 'timebar',\n            placement: position,\n        });\n        this.container = $container;\n        if (className)\n            $container.classList.add(className);\n        this.canvas = canvas;\n        return this.canvas;\n    }\n    filterElements(range) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!this.originalData)\n                return;\n            const { elementTypes, getTime } = this.options;\n            const { graph, element } = this.context;\n            const newData = shallowCopy(this.originalData);\n            elementTypes.forEach((type) => {\n                const key = `${type}s`;\n                newData[key] = (this.originalData[key] || []).filter((datum) => {\n                    const time = getTime(datum);\n                    if (match(time, range))\n                        return true;\n                    return false;\n                });\n            });\n            const nodeLikeIds = [...newData.nodes, ...newData.combos].map((datum) => idOf(datum));\n            newData.edges = newData.edges.filter((edge) => {\n                const source = edge.source;\n                const target = edge.target;\n                return nodeLikeIds.includes(source) && nodeLikeIds.includes(target);\n            });\n            graph.setData(newData);\n            yield ((_a = element.draw({ animation: false, silence: true })) === null || _a === void 0 ? void 0 : _a.finished);\n        });\n    }\n    hiddenElements(range) {\n        const { graph } = this.context;\n        const { elementTypes, getTime } = this.options;\n        const hideElementId = [];\n        const showElementId = [];\n        elementTypes.forEach((elementType) => {\n            var _a;\n            const key = `${elementType}s`;\n            const elementData = ((_a = this.originalData) === null || _a === void 0 ? void 0 : _a[key]) || [];\n            elementData.forEach((elementDatum) => {\n                const id = idOf(elementDatum);\n                const time = getTime(elementDatum);\n                if (match(time, range))\n                    showElementId.push(id);\n                else\n                    hideElementId.push(id);\n            });\n        });\n        graph.hideElement(hideElementId, false);\n        graph.showElement(showElementId, false);\n    }\n    /**\n     * <zh/> 销毁时间条\n     *\n     * <en/> Destroy the timebar\n     * @internal\n     */\n    destroy() {\n        var _a, _b, _c;\n        const { graph } = this.context;\n        this.originalData && graph.setData(Object.assign({}, this.originalData));\n        (_a = this.timebar) === null || _a === void 0 ? void 0 : _a.destroy();\n        (_b = this.canvas) === null || _b === void 0 ? void 0 : _b.destroy();\n        (_c = this.container) === null || _c === void 0 ? void 0 : _c.remove();\n        this.originalData = undefined;\n        this.container = undefined;\n        this.timebar = undefined;\n        this.canvas = undefined;\n        super.destroy();\n    }\n}\nTimebar.defaultOptions = {\n    position: 'bottom',\n    enable: true,\n    timebarType: 'time',\n    className: 'g6-timebar',\n    width: 450,\n    height: 60,\n    zIndex: 3,\n    elementTypes: ['node'],\n    padding: 10,\n    mode: 'modify',\n    getTime: (datum) => inferTime(datum, prospectiveTimeKeys, undefined),\n    loop: false,\n};\nconst shallowCopy = (data) => {\n    const { nodes = [], edges = [], combos = [] } = data;\n    return {\n        nodes: [...nodes],\n        edges: [...edges],\n        combos: [...combos],\n    };\n};\nconst match = (time, range) => {\n    if (isNumber(range))\n        return time === range;\n    const [start, end] = range;\n    return time >= start && time <= end;\n};\nconst inferTime = (datum, optionsKeys, defaultValue) => {\n    var _a;\n    for (let i = 0; i < optionsKeys.length; i++) {\n        const key = optionsKeys[i];\n        const val = (_a = datum.data) === null || _a === void 0 ? void 0 : _a[key];\n        if (val)\n            return val;\n    }\n    return defaultValue;\n};\n//# sourceMappingURL=timebar.js.map","/**\n * 判断值是否为 Date\n * @return 是否为 Date\n */\nexport default function isDate(value) {\n    return value instanceof Date;\n}\n//# sourceMappingURL=is-date.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginContainer, insertDOM } from '../utils/dom';\nimport { BUILD_IN_SVG_ICON, TOOLBAR_CSS, parsePositionToStyle } from './util';\n/**\n * <zh/> 工具栏，支持配置工具栏项目，以及点击之后的回调方法\n *\n * <en/> Toolbar, support configuration of toolbar items, and callback methods after clicking\n */\nexport class Toolbar extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Toolbar.defaultOptions, options));\n        this.$element = createPluginContainer('toolbar', false);\n        this.onToolbarItemClick = (e) => {\n            const { onClick } = this.options;\n            if (e.target instanceof Element) {\n                if (e.target.className.includes('g6-toolbar-item')) {\n                    const v = e.target.getAttribute('value');\n                    onClick === null || onClick === void 0 ? void 0 : onClick(v, e.target);\n                }\n            }\n        };\n        const $container = this.context.canvas.getContainer();\n        this.$element.style.display = 'flex';\n        $container.appendChild(this.$element);\n        // 设置样式\n        insertDOM('g6-toolbar-css', 'style', {}, TOOLBAR_CSS, document.head);\n        insertDOM('g6-toolbar-svgicon', 'div', { display: 'none' }, BUILD_IN_SVG_ICON);\n        this.$element.addEventListener('click', this.onToolbarItemClick);\n        this.update(options);\n    }\n    /**\n     * <zh/> 更新工具栏的配置项\n     *\n     * <en/> Update the configuration of the toolbar\n     * @param options - <zh/> 工具栏的配置项 | <en/> The options of the toolbar\n     * @internal\n     */\n    update(options) {\n        const _super = Object.create(null, {\n            update: { get: () => super.update }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            _super.update.call(this, options);\n            const { className, position, style } = this.options;\n            this.$element.className = `g6-toolbar ${className || ''}`;\n            // 设置容器的样式，主要是位置，背景之类的\n            Object.assign(this.$element.style, style, parsePositionToStyle(position));\n            this.$element.innerHTML = yield this.getDOMContent();\n        });\n    }\n    /**\n     * <zh/> 销毁工具栏\n     *\n     * <en/> Destroy the toolbar\n     * @internal\n     */\n    destroy() {\n        this.$element.removeEventListener('click', this.onToolbarItemClick);\n        this.$element.remove();\n        super.destroy();\n    }\n    getDOMContent() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const items = yield this.options.getItems();\n            return items\n                .map((item) => {\n                var _a;\n                return `\n          <div class=\"g6-toolbar-item\" value=\"${item.value}\" title=\"${(_a = item.title) !== null && _a !== void 0 ? _a : ''}\">\n            <svg aria-hidden=\"true\" focusable=\"false\">\n              <use xlink:href=\"#${item.id}\"></use>\n            </svg>\n          </div>`;\n            })\n                .join('');\n        });\n    }\n}\nToolbar.defaultOptions = {\n    position: 'top-left',\n};\n//# sourceMappingURL=index.js.map","/**\n * <zh/> 解析 toolbar 的 position 为位置样式。\n *\n * <en/> Parse the position of the toolbar into position style.\n * @param position - position\n * @returns style\n */\nexport function parsePositionToStyle(position) {\n    const style = {\n        top: 'unset',\n        right: 'unset',\n        bottom: 'unset',\n        left: 'unset',\n    };\n    const directions = position.split('-');\n    directions.forEach((d) => {\n        style[d] = '8px';\n    });\n    style.flexDirection = position.startsWith('top') || position.startsWith('bottom') ? 'row' : 'column';\n    return style;\n}\n/**\n * 内置默认的 toolbar 的 CSS 样式。\n */\nexport const TOOLBAR_CSS = `\n  .g6-toolbar {\n    position: absolute;\n    z-index: 100;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);\n    opacity: 0.65;\n  }\n  .g6-toolbar .g6-toolbar-item {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    padding: 4px;\n    cursor: pointer;\n    box-sizing: content-box;\n  }\n\n  .g6-toolbar .g6-toolbar-item:hover {\n    background-color: #f0f0f0;\n  }\n\n  .g6-toolbar .g6-toolbar-item svg {\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n  }\n`;\nexport const BUILD_IN_SVG_ICON = `\n  <svg>\n    <symbol id=\"zoom-in\" viewBox=\"64 64 896 896\">\n      <path d=\"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z\"></path>\n    </symbol>\n    <symbol id=\"zoom-out\" viewBox=\"64 64 896 896\">\n      <path d=\"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z\"></path>\n    </symbol>\n    <symbol id=\"edit\" viewBox=\"64 64 896 896\">\n      <path d=\"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z\"></path>\n    </symbol>\n    <symbol id=\"delete\" viewBox=\"64 64 896 896\">\n      <path d=\"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\"></path>\n    </symbol>\n    <symbol id=\"redo\" viewBox=\"64 64 896 896\">\n      <path d=\"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z\"></path>\n    </symbol>\n    <symbol id=\"undo\" viewBox=\"64 64 896 896\">\n      <path d=\"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z\"></path>\n    </symbol>\n    <symbol id=\"export\" viewBox=\"64 64 896 896\">\n      <path d=\"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z\"></path>\n    </symbol>\n    <symbol id=\"auto-fit\" viewBox=\"64 64 896 896\">\n      <path d=\"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z\"></path>\n      <path d=\"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z\"></path>\n    </symbol>\n    <symbol id=\"reset\" viewBox=\"64 64 896 896\">\n      <path d=\"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z\"></path>\n    </symbol>\n    <symbol id=\"exit-fullscreen\" viewBox=\"0 0 1024 1024\">\n      <path d=\"M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z\"  ></path></symbol>\n    <symbol id=\"request-fullscreen\" viewBox=\"0 0 1024 1024\">\n      <path d=\"M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z\"  ></path></symbol>\n  </svg>\n`;\n//# sourceMappingURL=util.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Tooltip as TooltipComponent } from '@antv/component';\nimport { get } from '@antv/util';\nimport { isToBeDestroyed } from '../utils/element';\nimport { BasePlugin } from './base-plugin';\n/**\n * <zh/> 提示框插件\n *\n * <en/> Tooltip plugin\n */\nexport class Tooltip extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Tooltip.defaultOptions, options));\n        this.currentTarget = null;\n        this.tooltipElement = null;\n        this.container = null;\n        this.isEnable = (event, items) => {\n            const { enable } = this.options;\n            if (typeof enable === 'function') {\n                return enable(event, items);\n            }\n            return enable;\n        };\n        /**\n         * <zh/> 点击事件\n         *\n         * <en/> Click event\n         * @param event - <zh/> 元素 | <en/> element\n         */\n        this.onClick = (event) => {\n            const { target: { id }, } = event;\n            // click the same item twice, tooltip will be hidden\n            if (this.currentTarget === id) {\n                this.hide(event);\n            }\n            else {\n                this.show(event);\n            }\n        };\n        /**\n         * <zh/> 在目标元素(node/edge/combo)上移动\n         *\n         * <en/> Move on target element (node/edge/combo)\n         * @param event - <zh/> 目标元素 | <en/> target element\n         */\n        this.onPointerMove = (event) => {\n            const { target } = event;\n            if (!this.currentTarget || target.id === this.currentTarget) {\n                return;\n            }\n            this.show(event);\n        };\n        /**\n         * <zh/> 点击画布/触发拖拽/出现上下文菜单隐藏tooltip\n         *\n         * <en/> Hide tooltip when clicking canvas/triggering drag/appearing context menu\n         * @param event - <zh/> 目标元素 | <en/> target element\n         */\n        this.onPointerLeave = (event) => {\n            this.hide(event);\n        };\n        /**\n         * <zh/> 移动画布\n         *\n         * <en/> Move canvas\n         * @param event - <zh/> 目标元素 | <en/> target element\n         */\n        this.onCanvasMove = (event) => {\n            this.hide(event);\n        };\n        this.onPointerEnter = (event) => {\n            this.show(event);\n        };\n        /**\n         * <zh/> 显示目标元素的提示框\n         *\n         * <en/> Show tooltip of target element\n         * @param id - <zh/> 元素 ID | <en/> element ID\n         */\n        this.showById = (id) => __awaiter(this, void 0, void 0, function* () {\n            const event = {\n                target: { id },\n            };\n            yield this.show(event);\n        });\n        this.getElementData = (id, targetType) => {\n            const { model } = this.context;\n            switch (targetType) {\n                case 'node':\n                    return model.getNodeData([id]);\n                case 'edge':\n                    return model.getEdgeData([id]);\n                case 'combo':\n                    return model.getComboData([id]);\n                default:\n                    return [];\n            }\n        };\n        /**\n         * <zh/> 在目标元素上显示tooltip\n         *\n         * <en/> Show tooltip on target element\n         * @param event - <zh/> 目标元素 | <en/> target element\n         * @internal\n         */\n        this.show = (event) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            const { client, target: { id }, } = event;\n            if (isToBeDestroyed(event.target))\n                return;\n            const targetType = this.context.graph.getElementType(id);\n            const { getContent, title } = this.options;\n            const items = this.getElementData(id, targetType);\n            if (!this.tooltipElement || !this.isEnable(event, items))\n                return;\n            let tooltipContent = {};\n            if (getContent) {\n                tooltipContent.content = yield getContent(event, items);\n                if (!tooltipContent.content)\n                    return;\n            }\n            else {\n                const style = this.context.graph.getElementRenderStyle(id);\n                const color = targetType === 'node' ? style.fill : style.stroke;\n                tooltipContent = {\n                    title: title || targetType,\n                    data: items.map((item) => {\n                        return {\n                            name: 'ID',\n                            value: item.id || `${item.source} -> ${item.target}`,\n                            color,\n                        };\n                    }),\n                };\n            }\n            this.currentTarget = id;\n            let x;\n            let y;\n            if (client) {\n                x = client.x;\n                y = client.y;\n            }\n            else {\n                const style = get(items, '0.style', { x: 0, y: 0 });\n                x = style.x;\n                y = style.y;\n            }\n            (_b = (_a = this.options).onOpenChange) === null || _b === void 0 ? void 0 : _b.call(_a, true);\n            this.tooltipElement.update(Object.assign(Object.assign(Object.assign({}, this.tooltipStyleProps), { x,\n                y, style: {\n                    '.tooltip': {\n                        visibility: 'visible',\n                    },\n                } }), tooltipContent));\n        });\n        /**\n         * <zh/> 隐藏tooltip\n         *\n         * <en/> Hidden tooltip\n         * @param event - <zh/> 目标元素,不传则为外部调用 | <en/> Target element, not passed in as external call\n         */\n        this.hide = (event) => {\n            var _a, _b, _c, _d, _e;\n            // if e is undefined, hide the tooltip， external call\n            if (!event) {\n                (_b = (_a = this.options).onOpenChange) === null || _b === void 0 ? void 0 : _b.call(_a, false);\n                (_c = this.tooltipElement) === null || _c === void 0 ? void 0 : _c.hide();\n                this.currentTarget = null;\n                return;\n            }\n            if (!this.tooltipElement)\n                return;\n            // No target node: tooltip has been hidden. No need for duplicated call.\n            if (!this.currentTarget)\n                return;\n            const { client: { x, y }, } = event;\n            (_e = (_d = this.options).onOpenChange) === null || _e === void 0 ? void 0 : _e.call(_d, false);\n            this.tooltipElement.hide(x, y);\n            this.currentTarget = null;\n        };\n        this.initTooltip = () => {\n            var _a;\n            const tooltipElement = new TooltipComponent({\n                className: 'tooltip',\n                style: this.tooltipStyleProps,\n            });\n            (_a = this.container) === null || _a === void 0 ? void 0 : _a.appendChild(tooltipElement.HTMLTooltipElement);\n            return tooltipElement;\n        };\n        this.render();\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 获取事件及处理事件的方法\n     *\n     * <en/> Get event and handle event methods\n     * @returns <zh/> 事件及处理事件的方法 | <en/> Event and handling event methods\n     */\n    getEvents() {\n        if (this.options.trigger === 'click') {\n            return {\n                'node:click': this.onClick,\n                'edge:click': this.onClick,\n                'combo:click': this.onClick,\n                'canvas:click': this.onPointerLeave,\n                contextmenu: this.onPointerLeave,\n                drag: this.onPointerLeave,\n            };\n        }\n        return {\n            'node:pointerenter': this.onPointerEnter,\n            'node:pointermove': this.onPointerMove,\n            'canvas:pointermove': this.onCanvasMove,\n            'edge:pointerenter': this.onPointerEnter,\n            'edge:pointermove': this.onPointerMove,\n            'combo:pointerenter': this.onPointerEnter,\n            'combo:pointermove': this.onPointerMove,\n            contextmenu: this.onPointerLeave,\n            'node:drag': this.onPointerLeave,\n        };\n    }\n    /**\n     * <zh/> 更新tooltip配置\n     *\n     * <en/> Update the tooltip configuration\n     * @param options - <zh/> 配置项 | <en/> options\n     * @internal\n     */\n    update(options) {\n        var _a;\n        this.unbindEvents();\n        super.update(options);\n        if (this.tooltipElement) {\n            (_a = this.container) === null || _a === void 0 ? void 0 : _a.removeChild(this.tooltipElement.HTMLTooltipElement);\n        }\n        this.tooltipElement = this.initTooltip();\n        this.bindEvents();\n    }\n    render() {\n        const { canvas } = this.context;\n        const $container = canvas.getContainer();\n        if (!$container)\n            return;\n        this.container = $container;\n        this.tooltipElement = this.initTooltip();\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        /** The previous event binding needs to be removed when updating the trigger. */\n        const events = this.getEvents();\n        Object.keys(events).forEach((eventName) => {\n            graph.off(eventName, events[eventName]);\n        });\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        const events = this.getEvents();\n        Object.keys(events).forEach((eventName) => {\n            graph.on(eventName, events[eventName]);\n        });\n    }\n    get tooltipStyleProps() {\n        const { canvas } = this.context;\n        const { center } = canvas.getBounds();\n        const $container = canvas.getContainer();\n        const { top, left } = $container.getBoundingClientRect();\n        const { style, position, enterable, container = { x: -left, y: -top }, title, offset } = this.options;\n        const [x, y] = center;\n        const [width, height] = canvas.getSize();\n        return {\n            x,\n            y,\n            container,\n            title,\n            bounding: { x: 0, y: 0, width, height },\n            position,\n            enterable,\n            offset,\n            style,\n        };\n    }\n    /**\n     * <zh/> 销毁tooltip\n     *\n     * <en/> Destroy tooltip\n     * @internal\n     */\n    destroy() {\n        var _a;\n        this.unbindEvents();\n        if (this.tooltipElement) {\n            (_a = this.container) === null || _a === void 0 ? void 0 : _a.removeChild(this.tooltipElement.HTMLTooltipElement);\n        }\n        super.destroy();\n    }\n}\nTooltip.defaultOptions = {\n    trigger: 'hover',\n    position: 'top-right',\n    enterable: false,\n    enable: true,\n    offset: [10, 10],\n    style: {\n        '.tooltip': {\n            visibility: 'hidden',\n        },\n    },\n};\n//# sourceMappingURL=tooltip.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n// Only use one instance.\nlet canvas;\n/**\n * Create a canvas instance.\n * @param width - width\n * @param height - height\n * @returns a new Canvas\n */\nfunction createCanvas(width, height) {\n    if (!canvas) {\n        canvas = document.createElement('canvas');\n    }\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, width, height);\n    return canvas;\n}\n/**\n * 从文本获取水印的 base64\n * @param width - width\n * @param height - height\n * @param text - 样式\n * @param style - 样式\n * @returns 水印的 base64\n */\nexport function getTextWatermark(width, height, text, style) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const canvas = createCanvas(width, height);\n        const ctx = canvas.getContext('2d');\n        const { rotate, opacity, textFill, textFontSize, textFontFamily, textFontVariant, textFontWeight, textAlign, textBaseline, } = style;\n        // Set the style.\n        // Default is align center and middle.\n        ctx.textAlign = textAlign;\n        ctx.textBaseline = textBaseline;\n        ctx.translate(width / 2, height / 2);\n        ctx.font = `${textFontSize}px ${textFontFamily} ${textFontVariant} ${textFontWeight}`;\n        rotate && ctx.rotate(rotate);\n        opacity && (ctx.globalAlpha = opacity);\n        if (textFill) {\n            ctx.fillStyle = textFill;\n            // Draw the text.\n            ctx.fillText(`${text}`, 0, 0);\n        }\n        // Return the base64.\n        return canvas.toDataURL();\n    });\n}\n/**\n * Get the image base64 of the watermark.\n * @param width - width\n * @param height - height\n * @param imageURL - image URL\n * @param style - 样式\n * @returns 水印的 base64\n */\nexport function getImageWatermark(width, height, imageURL, style) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const canvas = createCanvas(width, height);\n        const ctx = canvas.getContext('2d');\n        const { rotate, opacity } = style;\n        rotate && ctx.rotate(rotate);\n        opacity && (ctx.globalAlpha = opacity);\n        const img = new Image();\n        img.crossOrigin = 'anonymous';\n        img.src = imageURL;\n        return new Promise((resolve) => {\n            img.onload = function () {\n                const sepX = width > img.width ? (width - img.width) / 2 : 0;\n                const sepY = height > img.height ? (height - img.height) / 2 : 0;\n                ctx.drawImage(img, 0, 0, img.width, img.height, sepX, sepY, width - sepX * 2, height - sepY * 2);\n                resolve(canvas.toDataURL());\n            };\n        });\n    });\n}\n//# sourceMappingURL=util.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginContainer } from '../utils/dom';\nimport { getImageWatermark, getTextWatermark } from './util';\n/**\n * <zh/> 水印\n *\n * <en/> Watermark\n * @remarks\n * <zh/> 支持使用文本和图片作为水印，实现原理是在 Graph 容器的 div 上加上 `background-image` 属性，然后就可以通过 css 来控制水印的位置和样式。对于文本，会使用隐藏 canvas 转成图片的方式来实现\n *\n * <en/> Support using text and image as watermark, the principle is to add the `background-image` property to the div of the Graph container, and then you can control the position and style of the watermark through css. For text, it will be converted to an image using a hidden canvas\n */\nexport class Watermark extends BasePlugin {\n    constructor(context, options) {\n        super(context, Object.assign({}, Watermark.defaultOptions, options));\n        this.$element = createPluginContainer('watermark');\n        const $container = this.context.canvas.getContainer();\n        $container.appendChild(this.$element);\n        this.update(options);\n    }\n    /**\n     * <zh/> 更新水印配置\n     *\n     * <en/> Update the watermark configuration\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        const _super = Object.create(null, {\n            update: { get: () => super.update }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            _super.update.call(this, options);\n            const _a = this.options, { width, height, text, imageURL } = _a, rest = __rest(_a, [\"width\", \"height\", \"text\", \"imageURL\"]);\n            // Set the background style.\n            Object.keys(rest).forEach((key) => {\n                if (key.startsWith('background')) {\n                    // @ts-expect-error ignore\n                    this.$element.style[key] = options[key];\n                }\n            });\n            // Set the background image\n            const base64 = imageURL\n                ? yield getImageWatermark(width, height, imageURL, rest)\n                : yield getTextWatermark(width, height, text, rest);\n            this.$element.style.backgroundImage = `url(${base64})`;\n        });\n    }\n    /**\n     * <zh/> 销毁水印\n     *\n     * <en/> Destroy the watermark\n     * @internal\n     */\n    destroy() {\n        super.destroy();\n        // Remove the background dom.\n        this.$element.remove();\n    }\n}\nWatermark.defaultOptions = {\n    width: 200,\n    height: 100,\n    opacity: 0.2,\n    rotate: Math.PI / 12,\n    text: '',\n    textFill: '#000',\n    textFontSize: 16,\n    textAlign: 'center',\n    textBaseline: 'middle',\n    backgroundRepeat: 'repeat',\n};\n//# sourceMappingURL=index.js.map","const BADGE_PALETTE = ['#7E92B5', '#F4664A', '#FFBE3A'];\nconst NODE_PALETTE_OPTIONS = {\n    type: 'group',\n    color: ['#1783FF', '#00C9C9', '#F08F56', '#D580FF', '#7863FF', '#DB9D0D', '#60C42D', '#FF80CA', '#2491B3', '#17C76F'],\n};\nconst EDGE_PALETTE_OPTIONS = {\n    type: 'group',\n    color: [\n        '#99ADD1',\n        '#1783FF',\n        '#00C9C9',\n        '#F08F56',\n        '#D580FF',\n        '#7863FF',\n        '#DB9D0D',\n        '#60C42D',\n        '#FF80CA',\n        '#2491B3',\n        '#17C76F',\n    ],\n};\n/**\n * <zh/> 创建主题\n *\n * <en/> Create a theme based on the given tokens\n * @param tokens - <zh/> 主题配置项 <en/> Theme tokens\n * @returns <zh/> 主题 <en/> Theme\n */\nexport function create(tokens) {\n    const { bgColor, textColor, nodeColor, nodeColorDisabled, nodeStroke, nodeHaloStrokeOpacityActive = 0.15, nodeHaloStrokeOpacitySelected = 0.25, nodeOpacityDisabled = 0.06, nodeIconOpacityInactive = 0.85, nodeOpacityInactive = 0.25, nodeBadgePalette = BADGE_PALETTE, nodePaletteOptions = NODE_PALETTE_OPTIONS, edgeColor, edgeColorDisabled, edgePaletteOptions = EDGE_PALETTE_OPTIONS, comboColor, comboColorDisabled, comboStroke, comboStrokeDisabled, edgeColorInactive, } = tokens;\n    return {\n        background: bgColor,\n        node: {\n            palette: nodePaletteOptions,\n            style: {\n                donutOpacity: 1,\n                badgeBackgroundOpacity: 1,\n                badgeFill: '#fff',\n                badgeFontSize: 8,\n                badgePadding: [0, 4],\n                badgePalette: nodeBadgePalette,\n                fill: nodeColor,\n                fillOpacity: 1,\n                halo: false,\n                iconFill: '#fff',\n                iconOpacity: 1,\n                labelBackground: false,\n                labelBackgroundFill: bgColor,\n                labelBackgroundLineWidth: 0,\n                labelBackgroundOpacity: 0.75,\n                labelFill: textColor,\n                labelFillOpacity: 0.85,\n                labelLineHeight: 16,\n                labelPadding: [0, 2],\n                labelFontSize: 12,\n                labelFontWeight: 400,\n                labelOpacity: 1,\n                labelOffsetY: 2,\n                lineWidth: 0,\n                portFill: nodeColor,\n                portLineWidth: 1,\n                portStroke: nodeStroke,\n                portStrokeOpacity: 0.65,\n                size: 32,\n                stroke: nodeStroke,\n                strokeOpacity: 1,\n                zIndex: 2,\n            },\n            state: {\n                selected: {\n                    halo: true,\n                    haloLineWidth: 24,\n                    haloStrokeOpacity: nodeHaloStrokeOpacitySelected,\n                    labelFontSize: 12,\n                    labelFontWeight: 'bold',\n                    lineWidth: 4,\n                    stroke: nodeStroke,\n                },\n                active: {\n                    halo: true,\n                    haloLineWidth: 12,\n                    haloStrokeOpacity: nodeHaloStrokeOpacityActive,\n                },\n                highlight: {\n                    labelFontWeight: 'bold',\n                    lineWidth: 4,\n                    stroke: nodeStroke,\n                    strokeOpacity: 0.85,\n                },\n                inactive: {\n                    badgeBackgroundOpacity: nodeOpacityInactive,\n                    donutOpacity: nodeOpacityInactive,\n                    fillOpacity: nodeOpacityInactive,\n                    iconOpacity: nodeIconOpacityInactive,\n                    labelFill: textColor,\n                    labelFillOpacity: nodeOpacityInactive,\n                    strokeOpacity: nodeOpacityInactive,\n                },\n                disabled: {\n                    badgeBackgroundOpacity: 0.25,\n                    donutOpacity: nodeOpacityDisabled,\n                    fill: nodeColorDisabled,\n                    fillOpacity: nodeOpacityDisabled,\n                    iconFill: nodeColorDisabled,\n                    iconOpacity: 0.25,\n                    labelFill: textColor,\n                    labelFillOpacity: 0.25,\n                    strokeOpacity: nodeOpacityDisabled,\n                },\n            },\n            animation: {\n                enter: 'fade',\n                exit: 'fade',\n                show: 'fade',\n                hide: 'fade',\n                expand: 'node-expand',\n                collapse: 'node-collapse',\n                update: [{ fields: ['x', 'y', 'fill', 'stroke'] }],\n                translate: [{ fields: ['x', 'y'] }],\n            },\n        },\n        edge: {\n            palette: edgePaletteOptions,\n            style: {\n                badgeBackgroundFill: edgeColor,\n                badgeFill: '#fff',\n                badgeFontSize: 8,\n                badgeOffsetX: 10,\n                fillOpacity: 1,\n                halo: false,\n                haloLineWidth: 12,\n                haloStrokeOpacity: 1,\n                increasedLineWidthForHitTesting: 2,\n                labelBackground: false,\n                labelBackgroundFill: bgColor,\n                labelBackgroundLineWidth: 0,\n                labelBackgroundOpacity: 0.75,\n                labelBackgroundPadding: [4, 4, 4, 4],\n                labelFill: textColor,\n                labelFontSize: 12,\n                labelFontWeight: 400,\n                labelOpacity: 1,\n                labelPlacement: 'center',\n                labelTextBaseline: 'middle',\n                lineWidth: 1,\n                stroke: edgeColor,\n                strokeOpacity: 1,\n                zIndex: 1,\n            },\n            state: {\n                selected: {\n                    halo: true,\n                    haloStrokeOpacity: 0.25,\n                    labelFontSize: 14,\n                    labelFontWeight: 'bold',\n                    lineWidth: 3,\n                },\n                active: {\n                    halo: true,\n                    haloStrokeOpacity: 0.15,\n                },\n                highlight: {\n                    labelFontWeight: 'bold',\n                    lineWidth: 3,\n                },\n                inactive: {\n                    stroke: edgeColorInactive,\n                    fillOpacity: 0.08,\n                    labelOpacity: 0.25,\n                    strokeOpacity: 0.08,\n                    badgeBackgroundOpacity: 0.25,\n                },\n                disabled: {\n                    stroke: edgeColorDisabled,\n                    fillOpacity: 0.45,\n                    strokeOpacity: 0.45,\n                    labelOpacity: 0.25,\n                    badgeBackgroundOpacity: 0.45,\n                },\n            },\n            animation: {\n                enter: 'fade',\n                exit: 'fade',\n                expand: 'path-in',\n                collapse: 'path-out',\n                show: 'fade',\n                hide: 'fade',\n                update: [{ fields: ['sourceNode', 'targetNode'] }, { fields: ['stroke'], shape: 'key' }],\n                translate: [{ fields: ['sourceNode', 'targetNode'] }],\n            },\n        },\n        combo: {\n            style: {\n                collapsedMarkerFill: bgColor,\n                collapsedMarkerFontSize: 12,\n                collapsedMarkerFillOpacity: 1,\n                collapsedSize: 32,\n                collapsedFillOpacity: 1,\n                fill: comboColor,\n                halo: false,\n                haloLineWidth: 12,\n                haloStroke: comboStroke,\n                haloStrokeOpacity: 0.25,\n                labelBackground: false,\n                labelBackgroundFill: bgColor,\n                labelBackgroundLineWidth: 0,\n                labelBackgroundOpacity: 0.75,\n                labelBackgroundPadding: [2, 4, 2, 4],\n                labelFill: textColor,\n                labelFontSize: 12,\n                labelFontWeight: 400,\n                labelOpacity: 1,\n                lineDash: 0,\n                lineWidth: 1,\n                fillOpacity: 0.04,\n                strokeOpacity: 1,\n                padding: 10,\n                stroke: comboStroke,\n            },\n            state: {\n                selected: {\n                    halo: true,\n                    labelFontSize: 14,\n                    labelFontWeight: 700,\n                    lineWidth: 4,\n                },\n                active: {\n                    halo: true,\n                },\n                highlight: {\n                    labelFontWeight: 700,\n                    lineWidth: 4,\n                },\n                inactive: {\n                    fillOpacity: 0.65,\n                    labelOpacity: 0.25,\n                    strokeOpacity: 0.65,\n                },\n                disabled: {\n                    fill: comboColorDisabled,\n                    fillOpacity: 0.25,\n                    labelOpacity: 0.25,\n                    stroke: comboStrokeDisabled,\n                    strokeOpacity: 0.25,\n                },\n            },\n            animation: {\n                enter: 'fade',\n                exit: 'fade',\n                show: 'fade',\n                hide: 'fade',\n                expand: 'combo-expand',\n                collapse: 'combo-collapse',\n                update: [{ fields: ['x', 'y'] }, { fields: ['fill', 'stroke', 'lineWidth'], shape: 'key' }],\n                translate: [{ fields: ['x', 'y'] }],\n            },\n        },\n    };\n}\n//# sourceMappingURL=base.js.map","import { create } from './base';\nconst EDGE_PALETTE_OPTIONS = {\n    type: 'group',\n    color: [\n        '#637088',\n        '#0F55A6',\n        '#008383',\n        '#9C5D38',\n        '#8B53A6',\n        '#4E40A6',\n        '#8F6608',\n        '#3E801D',\n        '#A65383',\n        '#175E75',\n        '#0F8248',\n    ],\n};\nconst tokens = {\n    bgColor: '#000000',\n    comboColor: '#fdfdfd',\n    comboColorDisabled: '#d0e4ff',\n    comboStroke: '#99add1',\n    comboStrokeDisabled: '#969696',\n    edgeColor: '#637088',\n    edgeColorDisabled: '#637088',\n    edgeColorInactive: '#D0E4FF',\n    edgePaletteOptions: EDGE_PALETTE_OPTIONS,\n    nodeColor: '#1783ff',\n    nodeColorDisabled: '#D0E4FF',\n    nodeHaloStrokeOpacityActive: 0.25,\n    nodeHaloStrokeOpacitySelected: 0.45,\n    nodeIconOpacityInactive: 0.45,\n    nodeOpacityDisabled: 0.25,\n    nodeOpacityInactive: 0.45,\n    nodeStroke: '#d0e4ff',\n    textColor: '#ffffff',\n};\nexport const dark = create(tokens);\n//# sourceMappingURL=dark.js.map","import { create } from './base';\nconst tokens = {\n    bgColor: '#ffffff',\n    comboColor: '#99ADD1',\n    comboColorDisabled: '#f0f0f0',\n    comboStroke: '#99add1',\n    comboStrokeDisabled: '#d9d9d9',\n    edgeColor: '#99add1',\n    edgeColorDisabled: '#d9d9d9',\n    edgeColorInactive: '#1B324F',\n    nodeColor: '#1783ff',\n    nodeColorDisabled: '#1B324F',\n    nodeHaloStrokeOpacityActive: 0.15,\n    nodeHaloStrokeOpacitySelected: 0.25,\n    nodeIconOpacityInactive: 0.85,\n    nodeOpacityDisabled: 0.06,\n    nodeOpacityInactive: 0.25,\n    nodeStroke: '#000000',\n    textColor: '#000000',\n};\nexport const light = create(tokens);\n//# sourceMappingURL=light.js.map","import { BaseExtension } from '../registry/extension';\n/**\n * <zh/> 数据转换的基类\n *\n * <en/> Base class for data transforms\n */\nexport class BaseTransform extends BaseExtension {\n    beforeDraw(data, context) {\n        return data;\n    }\n    afterLayout(type, data) { }\n}\n//# sourceMappingURL=base-transform.js.map","import { idOf } from '../utils/id';\n/**\n * <zh/> 重新分配绘制任务\n *\n * <en/> Reassign drawing tasks\n * @param input - <zh/>绘制数据 | <en/>DrawData\n * @param type - <zh/>类型 | <en/>type\n * @param elementType - <zh/>元素类型 | <en/>element type\n * @param datum - <zh/>数据 | <en/>data\n * @param overwrite - <zh/>是否覆盖现有数据 | <en/>whether to overwrite existing data\n */\nexport function reassignTo(input, type, elementType, datum, overwrite) {\n    const id = idOf(datum);\n    const typeName = `${elementType}s`;\n    const exitsDatum = overwrite\n        ? datum\n        : input.add[typeName].get(id) || input.update[typeName].get(id) || input.remove[typeName].get(id) || datum;\n    Object.entries(input).forEach(([_type, value]) => {\n        if (type === _type)\n            value[typeName].set(id, exitsDatum);\n        else\n            value[typeName].delete(id);\n    });\n}\n/**\n * <zh/> 判断样式是否与原始样式一致\n *\n * <en/> Determine whether the style is consistent with the original style\n * @param style - <zh/> 样式 | <en/> style\n * @param originalStyle - <zh/> 原始样式 | <en/> original style\n * @returns <zh/> 是否一致 | <en/> Whether it is consistent\n */\nexport function isStyleEqual(style, originalStyle) {\n    return Object.keys(style).every((key) => style[key] === originalStyle[key]);\n}\n//# sourceMappingURL=utils.js.map","import { TREE_KEY } from '../constants';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\nimport { reassignTo } from './utils';\n// 如果在任务列表中不存在，则添加到任务列表\n// If it does not exist in the task list, add it to the task list\nconst weakAssignTo = (input, type, elementType, datum) => {\n    const typeName = `${elementType}s`;\n    const id = idOf(datum);\n    if (!input.add[typeName].has(id) && !input.update[typeName].has(id)) {\n        input[type][typeName].set(idOf(datum), datum);\n    }\n};\n/**\n * <zh/> 处理(树图)节点的收起和展开\n *\n * <en/> Process the collapse and expand of (tree)nodes\n */\nexport class CollapseExpandNode extends BaseTransform {\n    getElement(id) {\n        return this.context.element.getElement(id);\n    }\n    handleExpand(node, input) {\n        weakAssignTo(input, 'add', 'node', node);\n        if (isCollapsed(node))\n            return;\n        const id = idOf(node);\n        weakAssignTo(input, 'add', 'node', node);\n        const relatedEdges = this.context.model.getRelatedEdgesData(id, 'out');\n        relatedEdges.forEach((edge) => {\n            reassignTo(input, 'add', 'edge', edge);\n        });\n        const children = this.context.model.getChildrenData(id);\n        children.forEach((child) => {\n            this.handleExpand(child, input);\n        });\n    }\n    beforeDraw(input) {\n        const { graph, model } = this.context;\n        if (!model.model.hasTreeStructure(TREE_KEY))\n            return input;\n        const { add: { nodes: nodesToAdd, edges: edgesToAdd }, update: { nodes: nodesToUpdate }, } = input;\n        const nodesToCollapse = new Map();\n        const nodesToExpand = new Map();\n        nodesToAdd.forEach((node, id) => {\n            if (isCollapsed(node))\n                nodesToCollapse.set(id, node);\n        });\n        // 如果创建了一条连接到收起的节点的边，则将其添加到待展开列表\n        // If an edge is created that connects to a collapsed node, add it to the list to be expanded\n        edgesToAdd.forEach((edge) => {\n            if (graph.getElementType(edge.source) !== 'node')\n                return;\n            const source = graph.getNodeData(edge.source);\n            if (isCollapsed(source))\n                nodesToCollapse.set(edge.source, source);\n        });\n        nodesToUpdate.forEach((node, id) => {\n            const nodeElement = this.getElement(id);\n            if (!nodeElement)\n                return;\n            const isCurrentCollapsed = nodeElement.attributes.collapsed;\n            if (isCollapsed(node)) {\n                if (!isCurrentCollapsed)\n                    nodesToCollapse.set(id, node);\n            }\n            else {\n                if (isCurrentCollapsed)\n                    nodesToExpand.set(id, node);\n            }\n        });\n        const handledNodes = new Set();\n        nodesToCollapse.forEach((node, id) => {\n            // 将子节点添加到待删除列表，并删除关联的边\n            // Add child nodes to the list to be deleted，and delete the associated edges\n            const descendants = model.getDescendantsData(id);\n            descendants.forEach((descendant) => {\n                const id = idOf(descendant);\n                if (handledNodes.has(id))\n                    return;\n                reassignTo(input, 'remove', 'node', descendant);\n                const relatedEdges = model.getRelatedEdgesData(id);\n                relatedEdges.forEach((edge) => {\n                    reassignTo(input, 'remove', 'edge', edge);\n                });\n                handledNodes.add(id);\n            });\n        });\n        nodesToExpand.forEach((node, id) => {\n            const ancestors = model.getAncestorsData(id, TREE_KEY);\n            // 如果祖先节点是收起的，添加到移除列表\n            // If the ancestor node is collapsed, add it to the removal list\n            if (ancestors.some(isCollapsed)) {\n                reassignTo(input, 'remove', 'node', node);\n                return;\n            }\n            this.handleExpand(node, input);\n        });\n        return input;\n    }\n}\n//# sourceMappingURL=collapse-expand-node.js.map","const EFFECT_WEAKMAP = new WeakMap();\n/**\n * <zh/> 判定给定样式是否与上一次的样式相同\n *\n * <en/> Determine whether the given style are the same as the previous ones\n * @param target - <zh/> 目标元素 | <en/> Target element\n * @param key - <zh/> 缓存 key | <en/> Cache key\n * @param style - <zh/> 样式属性 | <en/> Style attribute\n * @returns <zh/> 是否执行函数 | <en/> Whether to execute the function\n * @deprecated <zh/> 该方法已废弃，并不能显著提升性能 | <en/> This method is deprecated and does not significantly improve performance\n */\nexport function effect(target, key, style) {\n    // return true;\n    if (!EFFECT_WEAKMAP.has(target))\n        EFFECT_WEAKMAP.set(target, {});\n    const cache = EFFECT_WEAKMAP.get(target);\n    if (!cache[key]) {\n        cache[key] = style;\n        return true;\n    }\n    const original = cache[key];\n    if (isStyleEqual(original, style))\n        return false;\n    cache[key] = style;\n    return true;\n}\n/**\n * <zh/> 比较两个样式属性是否相等\n *\n * <en/> Compare whether two style attributes are equal\n * @param a - <zh/> 样式属性 a | <en/> Style attribute a\n * @param b - <zh/> 样式属性 b | <en/> Style attribute b\n * @param depth - <zh/> 比较深度 | <en/> Comparison depth\n * @returns <zh/> 是否相等 | <en/> Whether they are equal\n * @remarks\n * <zh/> 进行第二层浅比较用于比较 badges、ports 等复合图形属性\n *\n * <en/> Perform a second-level shallow comparison to compare complex shape attributes such as badges and ports\n */\nconst isStyleEqual = (a, b, depth = 2) => {\n    if (typeof a !== 'object' || typeof b !== 'object')\n        return a === b;\n    const keys1 = Object.keys(a);\n    const keys2 = Object.keys(b);\n    if (keys1.length !== keys2.length)\n        return false;\n    for (const key of keys1) {\n        const val1 = a[key];\n        const val2 = b[key];\n        if (depth > 1 && typeof val1 === 'object' && typeof val2 === 'object') {\n            if (!isStyleEqual(val1, val2, depth - 1))\n                return false;\n        }\n        else if (val1 !== val2)\n            return false;\n    }\n    return true;\n};\n//# sourceMappingURL=effect.js.map","import { print } from '../utils/print';\nimport { EXTENSION_REGISTRY } from './store';\n/**\n * <zh/> 注册一个新的扩展。\n *\n * <en/> Registers a new extension.\n * @param category\n * <zh/> 扩展要注册的分类，目前支持注册的扩展分类有：{@link ExtensionCategory}\n *\n * <en/> The category under which the extension is to be registered, see {@link ExtensionCategory}\n * @param type\n * <zh/> 要注册的扩展的类型，将作为使用扩展时的标识\n *\n * <en/> Extension type that used as an identifier when mounting the extension on a graph\n * @param Ctor\n * <zh/> 要注册的扩展类，在使用时创建实例\n *\n * <en/> The extension class to be registered. An instance will be created upon use\n * @param override\n * <zh/> 是否覆盖已注册的扩展\n *\n * <en/> Whether to override the registered extension\n * @remarks\n * <zh/> 内置扩展在项目导入时会自动注册。对于非内置扩展，可以通过 `register` 方法手动注册。扩展只需要注册一次，即可在项目的任何位置使用。\n *\n * <en/> Built-in extensions are automatically registered when the project is imported. For non-built-in extensions, you can manually register them using the `register` method. Extensions only need to be registered once and can be used anywhere in the project.\n * @example\n * ```ts\n * import { register, BaseNode } from '@antv/g6';\n *\n * class CircleNode extends BaseNode {}\n *\n * register('node', 'circle-node', CircleNode);\n * ```\n * @public\n */\nexport function register(category, type, Ctor, override = false) {\n    const ext = EXTENSION_REGISTRY[category][type];\n    if (!override && ext) {\n        if (ext !== Ctor)\n            print.warn(`The extension ${type} of ${category} has been registered before.`);\n    }\n    else\n        Object.assign(EXTENSION_REGISTRY[category], { [type]: Ctor });\n}\n//# sourceMappingURL=register.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { CanvasEvent, Canvas as GCanvas } from '@antv/g';\nimport { Renderer as CanvasRenderer } from '@antv/g-canvas';\nimport { Plugin as DragNDropPlugin } from '@antv/g-plugin-dragndrop';\nimport { createDOM } from '@antv/util';\nimport { getBBoxSize, getCombinedBBox } from '../utils/bbox';\nimport { parsePoint, toPointObject } from '../utils/point';\nconst SINGLE_LAYER_NAME = ['main'];\nconst MULTI_LAYER_NAME = ['background', 'main', 'label', 'transient'];\n/**\n * <zh/> 获取主画布图层\n *\n * <en/> Get the main canvas layer\n * @param layers - <zh/> 画布图层 | <en/> Canvas layer\n * @returns <zh/> 主画布图层 | <en/> Main canvas layer\n */\nfunction getMainLayerOf(layers) {\n    return layers.main;\n}\nexport class Canvas {\n    getConfig() {\n        return this.config;\n    }\n    getLayer(layer = 'main') {\n        return this.extends.layers[layer] || getMainLayerOf(this.getLayers());\n    }\n    /**\n     * <zh/> 获取所有图层\n     *\n     * <en/> Get all layers\n     * @returns <zh/> 图层 <en/> Layer\n     */\n    getLayers() {\n        return this.extends.layers;\n    }\n    /**\n     * <zh/> 获取渲染器\n     *\n     * <en/> Get renderer\n     * @param layer - <zh/> 图层 <en/> Layer\n     * @returns <zh/> 渲染器 <en/> Renderer\n     */\n    getRenderer(layer) {\n        return this.extends.renderers[layer];\n    }\n    /**\n     * <zh/> 获取相机\n     *\n     * <en/> Get camera\n     * @param layer - <zh/> 图层 <en/> Layer\n     * @returns <zh/> 相机 <en/> Camera\n     */\n    getCamera(layer = 'main') {\n        return this.getLayer(layer).getCamera();\n    }\n    getRoot(layer = 'main') {\n        return this.getLayer(layer).getRoot();\n    }\n    getContextService(layer = 'main') {\n        return this.getLayer(layer).getContextService();\n    }\n    setCursor(cursor) {\n        this.config.cursor = cursor;\n        this.getLayer().setCursor(cursor);\n    }\n    get document() {\n        return this.getLayer().document;\n    }\n    get context() {\n        return this.getLayer().context;\n    }\n    constructor(config) {\n        this.config = {\n            enableMultiLayer: true,\n        };\n        Object.assign(this.config, config);\n        const _a = this.config, { renderer, background, cursor, enableMultiLayer } = _a, restConfig = __rest(_a, [\"renderer\", \"background\", \"cursor\", \"enableMultiLayer\"]);\n        const layersName = enableMultiLayer ? MULTI_LAYER_NAME : SINGLE_LAYER_NAME;\n        const renderers = createRenderers(renderer, layersName);\n        const layers = Object.fromEntries(layersName.map((layer) => {\n            const canvas = new GCanvas(Object.assign(Object.assign({}, restConfig), { supportsMutipleCanvasesInOneContainer: enableMultiLayer, renderer: renderers[layer], background: enableMultiLayer ? (layer === 'background' ? background : undefined) : background }));\n            return [layer, canvas];\n        }));\n        configCanvasDom(layers);\n        this.extends = {\n            config: this.config,\n            renderer,\n            renderers,\n            layers,\n        };\n    }\n    get ready() {\n        return Promise.all(Object.entries(this.getLayers()).map(([, canvas]) => canvas.ready));\n    }\n    resize(width, height) {\n        Object.assign(this.extends.config, { width, height });\n        Object.values(this.getLayers()).forEach((canvas) => {\n            const camera = canvas.getCamera();\n            const position = camera.getPosition();\n            const focalPoint = camera.getFocalPoint();\n            canvas.resize(width, height);\n            camera.setPosition(position);\n            camera.setFocalPoint(focalPoint);\n        });\n    }\n    /**\n     * <zh/> 获取画布边界\n     *\n     * <en/> Get canvas boundary\n     * @param group\n     * <zh/> 元素分组\n     * - undefined: 获取整个画布边界\n     * - 'elements': 仅获取元素边界\n     * - 'plugins': 仅获取插件边界\n     *\n     * <en/> Element group\n     * - undefined: Get the entire canvas boundary\n     * - 'elements': Get only the element boundary\n     * - 'plugins': Get only the plugin boundary\n     * @returns <zh/> 边界 <en/> Boundary\n     */\n    getBounds(group) {\n        return getCombinedBBox(Object.values(this.getLayers())\n            .map((canvas) => {\n            const g = group\n                ? canvas\n                    .getRoot()\n                    .childNodes.find((node) => node.classList.includes(group))\n                : canvas.getRoot();\n            return g;\n        })\n            .filter((el) => (el === null || el === void 0 ? void 0 : el.childNodes.length) > 0)\n            .map((el) => el.getBounds()));\n    }\n    getContainer() {\n        const container = this.extends.config.container;\n        return typeof container === 'string' ? document.getElementById(container) : container;\n    }\n    getSize() {\n        return [this.extends.config.width || 0, this.extends.config.height || 0];\n    }\n    appendChild(child, index) {\n        var _a;\n        const layer = (((_a = child.style) === null || _a === void 0 ? void 0 : _a.$layer) || 'main');\n        return this.getLayer(layer).appendChild(child, index);\n    }\n    setRenderer(renderer) {\n        if (renderer === this.extends.renderer)\n            return;\n        const renderers = createRenderers(renderer, this.config.enableMultiLayer ? MULTI_LAYER_NAME : SINGLE_LAYER_NAME);\n        this.extends.renderers = renderers;\n        Object.entries(renderers).forEach(([layer, instance]) => this.getLayer(layer).setRenderer(instance));\n        configCanvasDom(this.getLayers());\n    }\n    getCanvasByViewport(point) {\n        return parsePoint(this.getLayer().viewport2Canvas(toPointObject(point)));\n    }\n    getViewportByCanvas(point) {\n        return parsePoint(this.getLayer().canvas2Viewport(toPointObject(point)));\n    }\n    getViewportByClient(point) {\n        return parsePoint(this.getLayer().client2Viewport(toPointObject(point)));\n    }\n    getClientByViewport(point) {\n        return parsePoint(this.getLayer().viewport2Client(toPointObject(point)));\n    }\n    getClientByCanvas(point) {\n        return this.getClientByViewport(this.getViewportByCanvas(point));\n    }\n    getCanvasByClient(point) {\n        const main = this.getLayer();\n        const viewportPoint = main.client2Viewport(toPointObject(point));\n        return parsePoint(main.viewport2Canvas(viewportPoint));\n    }\n    toDataURL() {\n        return __awaiter(this, arguments, void 0, function* (options = {}) {\n            const devicePixelRatio = globalThis.devicePixelRatio || 1;\n            const { mode = 'viewport' } = options, restOptions = __rest(options, [\"mode\"]);\n            let [startX, startY, width, height] = [0, 0, 0, 0];\n            if (mode === 'viewport') {\n                [width, height] = this.getSize();\n            }\n            else if (mode === 'overall') {\n                const bounds = this.getBounds();\n                const size = getBBoxSize(bounds);\n                [startX, startY] = bounds.min;\n                [width, height] = size;\n            }\n            const container = createDOM('<div id=\"virtual-image\"></div>');\n            const offscreenCanvas = new GCanvas({\n                width,\n                height,\n                renderer: new CanvasRenderer(),\n                devicePixelRatio,\n                container,\n                background: this.extends.config.background,\n            });\n            yield offscreenCanvas.ready;\n            offscreenCanvas.appendChild(this.getLayer('background').getRoot().cloneNode(true));\n            offscreenCanvas.appendChild(this.getRoot().cloneNode(true));\n            // Handle label canvas\n            const label = this.getLayer('label').getRoot().cloneNode(true);\n            const originCanvasPosition = offscreenCanvas.viewport2Canvas({ x: 0, y: 0 });\n            const currentCanvasPosition = this.getCanvasByViewport([0, 0]);\n            label.translate([\n                currentCanvasPosition[0] - originCanvasPosition.x,\n                currentCanvasPosition[1] - originCanvasPosition.y,\n            ]);\n            label.scale(1 / this.getCamera().getZoom());\n            offscreenCanvas.appendChild(label);\n            offscreenCanvas.appendChild(this.getLayer('transient').getRoot().cloneNode(true));\n            const camera = this.getCamera();\n            const offscreenCamera = offscreenCanvas.getCamera();\n            if (mode === 'viewport') {\n                offscreenCamera.setZoom(camera.getZoom());\n                offscreenCamera.setPosition(camera.getPosition());\n                offscreenCamera.setFocalPoint(camera.getFocalPoint());\n            }\n            else if (mode === 'overall') {\n                const [x, y, z] = offscreenCamera.getPosition();\n                const [fx, fy, fz] = offscreenCamera.getFocalPoint();\n                offscreenCamera.setPosition([x + startX, y + startY, z]);\n                offscreenCamera.setFocalPoint([fx + startX, fy + startY, fz]);\n            }\n            const contextService = offscreenCanvas.getContextService();\n            return new Promise((resolve) => {\n                offscreenCanvas.addEventListener(CanvasEvent.RERENDER, () => __awaiter(this, void 0, void 0, function* () {\n                    // 等待图片渲染完成 / Wait for the image to render\n                    yield new Promise((r) => setTimeout(r, 300));\n                    const url = yield contextService.toDataURL(restOptions);\n                    resolve(url);\n                }));\n            });\n        });\n    }\n    destroy() {\n        Object.values(this.getLayers()).forEach((canvas) => {\n            const camera = canvas.getCamera();\n            camera.cancelLandmarkAnimation();\n            canvas.destroy();\n        });\n    }\n}\n/**\n * <zh/> 创建渲染器\n *\n * <en/> Create renderers\n * @param renderer - <zh/> 渲染器创建器 <en/> Renderer creator\n * @param layersName - <zh/> 图层名称 <en/> Layer name\n * @returns <zh/> 渲染器 <en/> Renderer\n */\nfunction createRenderers(renderer, layersName) {\n    return Object.fromEntries(layersName.map((layer) => {\n        const instance = (renderer === null || renderer === void 0 ? void 0 : renderer(layer)) || new CanvasRenderer();\n        if (instance instanceof CanvasRenderer) {\n            instance.setConfig({ enableDirtyRectangleRendering: false });\n        }\n        if (layer === 'main') {\n            instance.registerPlugin(new DragNDropPlugin({\n                isDocumentDraggable: true,\n                isDocumentDroppable: true,\n                dragstartDistanceThreshold: 10,\n                dragstartTimeThreshold: 100,\n            }));\n        }\n        else {\n            instance.unregisterPlugin(instance.getPlugin('dom-interaction'));\n        }\n        return [layer, instance];\n    }));\n}\n/**\n * <zh/> 配置画布 DOM\n *\n * <en/> Configure canvas DOM\n * @param layers - <zh/> 画布 <en/> Canvas\n */\nfunction configCanvasDom(layers) {\n    Object.entries(layers).forEach(([layer, canvas]) => {\n        const domElement = canvas.getContextService().getDomElement();\n        // 浏览器环境下，设置画布样式\n        // Set canvas style in browser environment\n        if (domElement === null || domElement === void 0 ? void 0 : domElement.style) {\n            domElement.style.gridArea = '1 / 1 / 2 / 2';\n            domElement.style.outline = 'none';\n            domElement.tabIndex = 1;\n            if (layer !== 'main')\n                domElement.style.pointerEvents = 'none';\n        }\n        if (domElement === null || domElement === void 0 ? void 0 : domElement.parentElement) {\n            domElement.parentElement.style.display = 'grid';\n        }\n    });\n}\n//# sourceMappingURL=canvas.js.map","import { isNumber } from '@antv/util';\nconst parseInt10 = (d) => (d ? parseInt(d) : 0);\n/**\n * Get the container's bounding size.\n * @param container dom element.\n * @returns the container width and height\n */\nfunction getContainerSize(container) {\n    const style = getComputedStyle(container);\n    const wrapperWidth = container.clientWidth || parseInt10(style.width);\n    const wrapperHeight = container.clientHeight || parseInt10(style.height);\n    const widthPadding = parseInt10(style.paddingLeft) + parseInt10(style.paddingRight);\n    const heightPadding = parseInt10(style.paddingTop) + parseInt10(style.paddingBottom);\n    return [wrapperWidth - widthPadding, wrapperHeight - heightPadding];\n}\n/**\n * Get the size of Graph.\n * @param container container of Graph\n * @returns Size of Graph\n */\nexport function sizeOf(container) {\n    if (!container)\n        return [0, 0];\n    let effectiveWidth = 640;\n    let effectiveHeight = 480;\n    const [containerWidth, containerHeight] = getContainerSize(container);\n    effectiveWidth = containerWidth || effectiveWidth;\n    effectiveHeight = containerHeight || effectiveHeight;\n    /** Minimum width */\n    const MIN_CHART_WIDTH = 1;\n    /** Minimum height */\n    const MIN_CHART_HEIGHT = 1;\n    return [\n        Math.max(isNumber(effectiveWidth) ? effectiveWidth : MIN_CHART_WIDTH, MIN_CHART_WIDTH),\n        Math.max(isNumber(effectiveHeight) ? effectiveHeight : MIN_CHART_HEIGHT, MIN_CHART_HEIGHT),\n    ];\n}\n//# sourceMappingURL=dom.js.map","export class BaseEvent {\n    constructor(type) {\n        this.type = type;\n    }\n}\nexport class GraphLifeCycleEvent extends BaseEvent {\n    constructor(type, data) {\n        super(type);\n        this.data = data;\n    }\n}\nexport class AnimateEvent extends BaseEvent {\n    constructor(type, animationType, animation, data) {\n        super(type);\n        this.animationType = animationType;\n        this.animation = animation;\n        this.data = data;\n    }\n}\nexport class ElementLifeCycleEvent extends BaseEvent {\n    constructor(type, elementType, data) {\n        super(type);\n        this.elementType = elementType;\n        this.data = data;\n    }\n}\nexport class ViewportEvent extends BaseEvent {\n    constructor(type, data) {\n        super(type);\n        this.data = data;\n    }\n}\n//# sourceMappingURL=events.js.map","import { Document } from '@antv/g';\nimport { isCombo, isEdge, isNode } from '../element';\nexport * from './events';\n/**\n * <zh/> 基于 Event 对象触发事件\n *\n * <en/> Trigger event based on Event object\n * @param emitter - <zh/> 事件目标 | <en/> event target\n * @param event - <zh/> 事件对象 | <en/> event object\n */\nexport function emit(emitter, event) {\n    emitter.emit(event.type, event);\n}\n/**\n * <zh/> 获取事件目标元素\n *\n * <en/> Get the event target element\n * @param shape - <zh/> 事件图形 | <en/> event shape\n * @returns <zh/> 目标元素 | <en/> target element\n * @remarks\n * <zh/> 事件响应大多数情况会命中元素的内部图形，通过该方法可以获取到其所属元素\n *\n * <en/> Most of the event responses will hit the internal graphics of the element, and this method can be used to get the element to which it belongs\n */\nexport function eventTargetOf(shape) {\n    if (!shape)\n        return null;\n    if (shape instanceof Document) {\n        return { type: 'canvas', element: shape };\n    }\n    let element = shape;\n    while (element) {\n        // 此判断条件不适用于 label 和 节点分开渲染的情况\n        // This condition is not applicable to the case where the label and node are rendered separately\n        if (isNode(element))\n            return { type: 'node', element };\n        if (isEdge(element))\n            return { type: 'edge', element };\n        if (isCombo(element))\n            return { type: 'combo', element };\n        element = element.parentElement;\n    }\n    return null;\n}\n//# sourceMappingURL=index.js.map","/**\n * <zh/> 获取元素的 zIndex\n * <en/> Get the zIndex of the element\n * @param datum - <zh/> 元素数据 | <en/> element data\n * @returns - <zh/> zIndex | <en/> zIndex\n */\nexport function getZIndexOf(datum) {\n    var _a;\n    return ((_a = datum === null || datum === void 0 ? void 0 : datum.style) === null || _a === void 0 ? void 0 : _a.zIndex) || 0;\n}\n//# sourceMappingURL=z-index.js.map","import { get, set } from '@antv/util';\nconst CacheTargetKey = 'cachedStyle';\nconst getStyleCacheKey = (name) => `__${name}__`;\n/**\n * <zh/> 缓存图形样式\n *\n * <en/> Cache shape style\n * @param element - <zh/> 图形元素 | <en/> shape element\n * @param name - <zh/> 样式名 | <en/> style name\n */\nexport function cacheStyle(element, name) {\n    const names = Array.isArray(name) ? name : [name];\n    if (!get(element, CacheTargetKey))\n        set(element, CacheTargetKey, {});\n    names.forEach((n) => {\n        set(get(element, CacheTargetKey), getStyleCacheKey(n), element.attributes[n]);\n    });\n}\n/**\n * <zh/> 获取缓存的样式\n *\n * <en/> Get cached style\n * @param element - <zh/> 图形元素 | <en/> shape element\n * @param name - <zh/> 样式名 | <en/> style name\n * @returns <zh/> 样式值 | <en/> style value\n */\nexport function getCachedStyle(element, name) {\n    return get(element, [CacheTargetKey, getStyleCacheKey(name)]);\n}\n/**\n * <zh/> 是否有缓存的样式\n *\n * <en/> Whether there is a cached style\n * @param element - <zh/> 图形元素 | <en/> shape element\n * @param name - <zh/> 样式名 | <en/> style name\n * @returns <zh/> 是否有缓存的样式 | <en/> Whether there is a cached style\n */\nexport function hasCachedStyle(element, name) {\n    return getStyleCacheKey(name) in (get(element, CacheTargetKey) || {});\n}\n/**\n * <zh/> 设置缓存的样式\n *\n * <en/> Set cached style\n * @param element - <zh/> 图形元素 | <en/> shape element\n * @param name - <zh/> 样式名 | <en/> style name\n * @param value - <zh/> 样式值 | <en/> style value\n */\nexport function setCacheStyle(element, name, value) {\n    set(element, [CacheTargetKey, getStyleCacheKey(name)], value);\n}\n//# sourceMappingURL=cache.js.map","import { executor } from '../animations/executor';\nimport { createAnimationsProxy, getElementAnimationOptions, inferDefaultValue } from '../utils/animation';\nimport { getCachedStyle } from '../utils/cache';\nexport class Animation {\n    constructor(context) {\n        this.tasks = [];\n        this.animations = new Set();\n        this.context = context;\n    }\n    getTasks() {\n        const tasks = [...this.tasks];\n        this.tasks = [];\n        return tasks;\n    }\n    add(context, callbacks) {\n        this.tasks.push([context, callbacks]);\n    }\n    animate(localAnimation, callbacks, extendOptions) {\n        var _a, _b, _c;\n        (_a = callbacks === null || callbacks === void 0 ? void 0 : callbacks.before) === null || _a === void 0 ? void 0 : _a.call(callbacks);\n        const animations = this.getTasks()\n            .map(([context, cb]) => {\n            var _a, _b, _c;\n            const { element, elementType, stage } = context;\n            const options = getElementAnimationOptions(this.context.options, elementType, stage, localAnimation);\n            (_a = cb === null || cb === void 0 ? void 0 : cb.before) === null || _a === void 0 ? void 0 : _a.call(cb);\n            const animation = options.length ? executor(element, this.inferStyle(context, extendOptions), options) : null;\n            if (animation) {\n                (_b = cb === null || cb === void 0 ? void 0 : cb.beforeAnimate) === null || _b === void 0 ? void 0 : _b.call(cb, animation);\n                animation.finished.then(() => {\n                    var _a, _b;\n                    (_a = cb === null || cb === void 0 ? void 0 : cb.afterAnimate) === null || _a === void 0 ? void 0 : _a.call(cb, animation);\n                    (_b = cb === null || cb === void 0 ? void 0 : cb.after) === null || _b === void 0 ? void 0 : _b.call(cb);\n                    this.animations.delete(animation);\n                });\n            }\n            else\n                (_c = cb === null || cb === void 0 ? void 0 : cb.after) === null || _c === void 0 ? void 0 : _c.call(cb);\n            return animation;\n        })\n            .filter(Boolean);\n        animations.forEach((animation) => this.animations.add(animation));\n        const animation = createAnimationsProxy(animations);\n        if (animation) {\n            (_b = callbacks === null || callbacks === void 0 ? void 0 : callbacks.beforeAnimate) === null || _b === void 0 ? void 0 : _b.call(callbacks, animation);\n            animation.finished.then(() => {\n                var _a, _b;\n                (_a = callbacks === null || callbacks === void 0 ? void 0 : callbacks.afterAnimate) === null || _a === void 0 ? void 0 : _a.call(callbacks, animation);\n                (_b = callbacks === null || callbacks === void 0 ? void 0 : callbacks.after) === null || _b === void 0 ? void 0 : _b.call(callbacks);\n                this.release();\n            });\n        }\n        else\n            (_c = callbacks === null || callbacks === void 0 ? void 0 : callbacks.after) === null || _c === void 0 ? void 0 : _c.call(callbacks);\n        return animation;\n    }\n    /**\n     * <zh/> 推断额外的动画样式\n     *\n     * <en/> Infer additional animation styles\n     * @param context - <zh/> 动画上下文 | <en/> Animation context\n     * @param options - <zh/> 扩展选项 | <en/> Extend options\n     * @returns <zh/> 始态样式与终态样式 | <en/> Initial style and final style\n     */\n    inferStyle(context, options) {\n        var _a, _b;\n        const { element, elementType, stage, originalStyle, updatedStyle = {} } = context;\n        if (!context.modifiedStyle)\n            context.modifiedStyle = Object.assign(Object.assign({}, originalStyle), updatedStyle);\n        const { modifiedStyle } = context;\n        const fromStyle = {};\n        const toStyle = {};\n        if (stage === 'enter') {\n            Object.assign(fromStyle, { opacity: 0 });\n        }\n        else if (stage === 'exit') {\n            Object.assign(toStyle, { opacity: 0 });\n        }\n        else if (stage === 'show') {\n            Object.assign(fromStyle, { opacity: 0 });\n            Object.assign(toStyle, { opacity: (_a = getCachedStyle(element, 'opacity')) !== null && _a !== void 0 ? _a : inferDefaultValue('opacity') });\n        }\n        else if (stage === 'hide') {\n            Object.assign(fromStyle, { opacity: (_b = getCachedStyle(element, 'opacity')) !== null && _b !== void 0 ? _b : inferDefaultValue('opacity') });\n            Object.assign(toStyle, { opacity: 0 });\n        }\n        else if (stage === 'collapse') {\n            const { collapse } = options || {};\n            const { target, descendants, position } = collapse;\n            if (elementType === 'node') {\n                // 为即将被删除的元素设置目标位置\n                // Set the target position for the element to be deleted\n                if (descendants.includes(element.id)) {\n                    const [x, y, z] = position;\n                    Object.assign(toStyle, { x, y, z });\n                }\n            }\n            else if (elementType === 'combo') {\n                if (element.id === target || descendants.includes(element.id)) {\n                    const [x, y] = position;\n                    Object.assign(toStyle, { x, y, childrenNode: originalStyle.childrenNode });\n                }\n            }\n            else if (elementType === 'edge') {\n                Object.assign(toStyle, { sourceNode: modifiedStyle.sourceNode, targetNode: modifiedStyle.targetNode });\n            }\n        }\n        else if (stage === 'expand') {\n            const { expand } = options || {};\n            const { target, descendants, position } = expand;\n            if (elementType === 'node') {\n                // 设置展开节点的起点位置\n                // Set the starting position of the expanded node\n                if (element.id === target || descendants.includes(element.id)) {\n                    const [x, y, z] = position;\n                    Object.assign(fromStyle, { x, y, z });\n                }\n            }\n            else if (elementType === 'combo') {\n                // 设置展开后的组合子元素\n                // Set the child elements of the expanded combo\n                if (element.id === target || descendants.includes(element.id)) {\n                    const [x, y, z] = position;\n                    Object.assign(fromStyle, { x, y, z, childrenNode: modifiedStyle.childrenNode });\n                }\n            }\n            else if (elementType === 'edge') {\n                // 设置展开后的边的起点和终点\n                // Set the starting point and end point of the edge after expansion\n                Object.assign(fromStyle, { sourceNode: modifiedStyle.sourceNode, targetNode: modifiedStyle.targetNode });\n            }\n        }\n        return [\n            Object.keys(fromStyle).length > 0 ? Object.assign({}, originalStyle, fromStyle) : originalStyle,\n            Object.keys(toStyle).length > 0 ? Object.assign({}, modifiedStyle, toStyle) : modifiedStyle,\n        ];\n    }\n    stop() {\n        this.animations.forEach((animation) => animation.cancel());\n    }\n    clear() {\n        this.tasks = [];\n    }\n    /**\n     * <zh/> 释放存量动画对象\n     *\n     * <en/> Release stock animation objects\n     * @description see: https://github.com/antvis/G/issues/1731\n     */\n    release() {\n        var _a, _b;\n        const { canvas } = this.context;\n        // @ts-expect-error private property\n        const animationsWithPromises = (_b = (_a = canvas.document) === null || _a === void 0 ? void 0 : _a.timeline) === null || _b === void 0 ? void 0 : _b.animationsWithPromises;\n        if (animationsWithPromises) {\n            // @ts-expect-error private property\n            canvas.document.timeline.animationsWithPromises = animationsWithPromises.filter((animation) => animation.playState !== 'finished');\n        }\n    }\n    destroy() {\n        this.stop();\n        this.animations.clear();\n        this.tasks = [];\n    }\n}\n//# sourceMappingURL=animation.js.map","import { GraphEvent } from '../constants';\nimport { GraphLifeCycleEvent } from '../utils/event';\nexport class BatchController {\n    constructor(context) {\n        this.batchCount = 0;\n        this.context = context;\n    }\n    emit(event) {\n        const { graph } = this.context;\n        graph.emit(event.type, event);\n    }\n    startBatch(initiate = true) {\n        this.batchCount++;\n        if (this.batchCount === 1)\n            this.emit(new GraphLifeCycleEvent(GraphEvent.BATCH_START, { initiate }));\n    }\n    endBatch() {\n        this.batchCount--;\n        if (this.batchCount === 0)\n            this.emit(new GraphLifeCycleEvent(GraphEvent.BATCH_END));\n    }\n    get isBatching() {\n        return this.batchCount > 0;\n    }\n    destroy() {\n        // @ts-ignore\n        this.context = null;\n    }\n}\n//# sourceMappingURL=batch.js.map","import { CommonEvent, ContainerEvent } from '../constants';\nimport { ExtensionController } from '../registry/extension';\nimport { isToBeDestroyed } from '../utils/element';\nimport { eventTargetOf } from '../utils/event';\nexport class BehaviorController extends ExtensionController {\n    constructor(context) {\n        super(context);\n        /**\n         * <zh/> 当前事件的目标\n         *\n         *  <en/> The current event target\n         */\n        this.currentTarget = null;\n        this.currentTargetType = null;\n        this.category = 'behavior';\n        this.forwardCanvasEvents = (event) => {\n            const { target: originalTarget } = event;\n            const target = eventTargetOf(originalTarget);\n            if (!target)\n                return;\n            const { graph, canvas } = this.context;\n            const { type: targetType, element: targetElement } = target;\n            // 即将销毁或已销毁的元素不再触发事件\n            // Elements that are about to be destroyed or have been destroyed no longer trigger events\n            if ('destroyed' in targetElement && (isToBeDestroyed(targetElement) || targetElement.destroyed))\n                return;\n            const { type, detail, button } = event;\n            const stdEvent = Object.assign(Object.assign({}, event), { target: targetElement, targetType, originalTarget });\n            if (type === CommonEvent.POINTER_MOVE) {\n                if (this.currentTarget !== targetElement) {\n                    if (this.currentTarget) {\n                        graph.emit(`${this.currentTargetType}:${CommonEvent.POINTER_LEAVE}`, Object.assign(Object.assign({}, stdEvent), { type: CommonEvent.POINTER_LEAVE, target: this.currentTarget, targetType: this.currentTargetType }));\n                    }\n                    if (targetElement) {\n                        Object.assign(stdEvent, { type: CommonEvent.POINTER_ENTER });\n                        graph.emit(`${targetType}:${CommonEvent.POINTER_ENTER}`, stdEvent);\n                    }\n                }\n                this.currentTarget = targetElement;\n                this.currentTargetType = targetType;\n            }\n            // 非右键点击事件 / Click event except right click\n            if (!(type === CommonEvent.CLICK && button === 2)) {\n                graph.emit(`${targetType}:${type}`, stdEvent);\n                graph.emit(type, stdEvent);\n            }\n            // 双击事件 / Double click event\n            if (type === CommonEvent.CLICK && detail === 2) {\n                Object.assign(stdEvent, { type: CommonEvent.DBLCLICK });\n                graph.emit(`${targetType}:${CommonEvent.DBLCLICK}`, stdEvent);\n                graph.emit(CommonEvent.DBLCLICK, stdEvent);\n            }\n            // 右键菜单 / Contextmenu\n            if (type === CommonEvent.POINTER_DOWN && button === 2) {\n                Object.assign(stdEvent, {\n                    type: CommonEvent.CONTEXT_MENU,\n                    preventDefault: () => {\n                        var _a;\n                        (_a = canvas.getContainer()) === null || _a === void 0 ? void 0 : _a.addEventListener(CommonEvent.CONTEXT_MENU, (e) => e.preventDefault(), {\n                            once: true,\n                        });\n                    },\n                });\n                graph.emit(`${targetType}:${CommonEvent.CONTEXT_MENU}`, stdEvent);\n                graph.emit(CommonEvent.CONTEXT_MENU, stdEvent);\n            }\n        };\n        this.forwardContainerEvents = (event) => {\n            this.context.graph.emit(event.type, event);\n        };\n        this.forwardEvents();\n        this.setBehaviors(this.context.options.behaviors || []);\n    }\n    setBehaviors(behaviors) {\n        this.setExtensions(behaviors);\n    }\n    forwardEvents() {\n        const container = this.context.canvas.getContainer();\n        if (container) {\n            [ContainerEvent.KEY_DOWN, ContainerEvent.KEY_UP].forEach((name) => {\n                container.addEventListener(name, this.forwardContainerEvents);\n            });\n        }\n        const canvas = this.context.canvas.document;\n        if (canvas) {\n            [\n                CommonEvent.CLICK,\n                CommonEvent.DBLCLICK,\n                CommonEvent.POINTER_OVER,\n                CommonEvent.POINTER_LEAVE,\n                CommonEvent.POINTER_ENTER,\n                CommonEvent.POINTER_MOVE,\n                CommonEvent.POINTER_OUT,\n                CommonEvent.POINTER_DOWN,\n                CommonEvent.POINTER_UP,\n                CommonEvent.CONTEXT_MENU,\n                CommonEvent.DRAG_START,\n                CommonEvent.DRAG,\n                CommonEvent.DRAG_END,\n                CommonEvent.DRAG_ENTER,\n                CommonEvent.DRAG_OVER,\n                CommonEvent.DRAG_LEAVE,\n                CommonEvent.DROP,\n                CommonEvent.WHEEL,\n            ].forEach((name) => {\n                canvas.addEventListener(name, this.forwardCanvasEvents);\n            });\n        }\n    }\n    destroy() {\n        const container = this.context.canvas.getContainer();\n        if (container) {\n            [ContainerEvent.KEY_DOWN, ContainerEvent.KEY_UP].forEach((name) => {\n                container.removeEventListener(name, this.forwardContainerEvents);\n            });\n        }\n        this.context.canvas.document.removeAllEventListeners();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=behavior.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { get } from '@antv/util';\n/**\n * <zh/> 合并两个 节点/边/Combo 的数据\n *\n * <en/> Merge the data of two nodes/edges/combos\n * @param original - <zh/> 原始数据 | <en/> original data\n * @param modified - <zh/> 待合并的数据 | <en/> data to be merged\n * @returns <zh/> 合并后的数据 | <en/> merged data\n * @remarks\n * <zh/> 只会合并第一层的数据，data、style 下的二级数据会被覆盖\n *\n * <en/> Only the first level of data will be merged, the second level of data under data and style will be overwritten\n */\nexport function mergeElementsData(original, modified) {\n    const { data: originalData, style: originalStyle } = original, originalAttrs = __rest(original, [\"data\", \"style\"]);\n    const { data: modifiedData, style: modifiedStyle } = modified, modifiedAttrs = __rest(modified, [\"data\", \"style\"]);\n    const result = Object.assign(Object.assign({}, originalAttrs), modifiedAttrs);\n    if (originalData || modifiedData) {\n        Object.assign(result, { data: Object.assign(Object.assign({}, originalData), modifiedData) });\n    }\n    if (originalStyle || modifiedStyle) {\n        Object.assign(result, { style: Object.assign(Object.assign({}, originalStyle), modifiedStyle) });\n    }\n    return result;\n}\n/**\n * <zh/> 克隆元素数据\n *\n * <en/> Clone clement data\n * @param data - <zh/> 待克隆的数据 | <en/> data to be cloned\n * @returns <zh/> 克隆后的数据 | <en/> cloned data\n * @remarks\n * <zh/> 只会克隆到第二层（data、style）\n *\n * <en/> Only clone to the second level (data, style)\n */\nexport function cloneElementData(data) {\n    const { data: customData, style } = data, restAttrs = __rest(data, [\"data\", \"style\"]);\n    const clonedData = restAttrs;\n    if (customData)\n        clonedData.data = Object.assign({}, customData);\n    if (style)\n        clonedData.style = Object.assign({}, style);\n    return clonedData;\n}\n/**\n * <zh/> 判断数据是否为空\n *\n * <en/> Determine if the data is empty\n * @param data - <zh/> 图数据 | <en/> graph data\n * @returns <zh/> 是否为空 | <en/> is empty\n */\nexport function isEmptyData(data) {\n    return !get(data, ['nodes', 'length']) && !get(data, ['edges', 'length']) && !get(data, ['combos', 'length']);\n}\n/**\n * <zh/> 判断两个元素数据是否相等\n *\n * <en/> Determine if two element data are equal\n * @param original - <zh/> 原始数据 | <en/> original data\n * @param modified - <zh/> 修改后的数据 | <en/> modified data\n * @returns <zh/> 是否相等 | <en/> is equal\n * @remarks\n * <zh/> 相比于 isEqual，这个方法不会比较更下层的数据\n *\n * <en/> Compared to isEqual, this method does not compare data at a lower level\n */\nexport function isElementDataEqual(original = {}, modified = {}) {\n    const { states: originalStates = [], data: originalData = {}, style: originalStyle = {}, children: originalChildren = [] } = original, originalAttrs = __rest(original, [\"states\", \"data\", \"style\", \"children\"]);\n    const { states: modifiedStates = [], data: modifiedData = {}, style: modifiedStyle = {}, children: modifiedChildren = [] } = modified, modifiedAttrs = __rest(modified, [\"states\", \"data\", \"style\", \"children\"]);\n    const isArrayEqual = (arr1, arr2) => {\n        if (arr1.length !== arr2.length)\n            return false;\n        return arr1.every((item, index) => item === arr2[index]);\n    };\n    const isObjectEqual = (obj1, obj2) => {\n        const keys1 = Object.keys(obj1);\n        const keys2 = Object.keys(obj2);\n        if (keys1.length !== keys2.length)\n            return false;\n        return keys1.every((key) => obj1[key] === obj2[key]);\n    };\n    if (!isObjectEqual(originalAttrs, modifiedAttrs))\n        return false;\n    if (!isArrayEqual(originalChildren, modifiedChildren))\n        return false;\n    if (!isArrayEqual(originalStates, modifiedStates))\n        return false;\n    if (!isObjectEqual(originalData, modifiedData))\n        return false;\n    if (!isObjectEqual(originalStyle, modifiedStyle))\n        return false;\n    return true;\n}\n//# sourceMappingURL=data.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { TREE_KEY } from '../constants';\nimport { idOf } from './id';\nimport { isEdgeData } from './is';\n/**\n * <zh/> 将 NodeData、EdgeData、ComboData 转换为 graphlib 的数据结构\n *\n * <en/> Transform NodeData, EdgeData, ComboData to graphlib data structure\n * @param data - <zh/> 节点、边、combo 数据 | <en/> node, combo data\n * @returns <zh/> graphlib 数据 | <en/> graphlib data\n */\nexport function toGraphlibData(data) {\n    const { id = idOf(data), style, data: customData } = data, rest = __rest(data, [\"id\", \"style\", \"data\"]);\n    const _data = Object.assign(Object.assign({}, data), { style: Object.assign({}, style), data: Object.assign({}, customData) });\n    if (isEdgeData(data))\n        return Object.assign({ id, data: _data }, rest);\n    return { id, data: _data };\n}\n/**\n * <zh/> 将 Node、Edge、Combo 转换为 G6 的数据结构\n *\n * <en/> Transform Node, Edge, Combo to G6 data structure\n * @param data - <zh/> graphlib 节点、边、Combo 数据 | <en/> graphlib node, edge, combo data\n * @returns <zh/> G6 数据 | <en/> G6 data\n */\nexport function toG6Data(data) {\n    return data.data;\n}\n/**\n * <zh/> 创建树形结构\n *\n * <en/> Create tree structure\n * @param model - <zh/> 数据模型 | <en/> data model\n */\nexport function createTreeStructure(model) {\n    if (model.hasTreeStructure(TREE_KEY))\n        return;\n    model.attachTreeStructure(TREE_KEY);\n    const edges = model.getAllEdges();\n    for (const edge of edges) {\n        const { source, target } = edge;\n        model.setParent(target, source, TREE_KEY);\n    }\n}\n//# sourceMappingURL=graphlib.js.map","import { Graph as GraphLib } from '@antv/graphlib';\nimport { isNil, isNumber, uniq } from '@antv/util';\nimport { COMBO_KEY, ChangeType, TREE_KEY } from '../constants';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { cloneElementData, isElementDataEqual, mergeElementsData } from '../utils/data';\nimport { arrayDiff } from '../utils/diff';\nimport { toG6Data, toGraphlibData } from '../utils/graphlib';\nimport { idOf, parentIdOf } from '../utils/id';\nimport { positionOf } from '../utils/position';\nimport { format, print } from '../utils/print';\nimport { dfs } from '../utils/traverse';\nimport { add } from '../utils/vector';\nexport class DataController {\n    constructor() {\n        /**\n         * <zh/> 最近一次删除的 combo 的 id\n         *\n         * <en/> The ids of the last deleted combos\n         * @remarks\n         * <zh/> 当删除 combo 后，会将其 id 从 comboIds 中移除，此时根据 Graphlib 的 changes 事件获取到的 NodeRemoved 无法区分是 combo 还是 node。\n         * 因此需要记录最近一次删除的 combo 的 id，并用于 isCombo 的判断\n         *\n         * <en/> When the combo is deleted, its id will be removed from comboIds. At this time, the NodeRemoved obtained according to the changes event of Graphlib cannot distinguish whether it is a combo or a node.\n         * Therefore, it is necessary to record the id of the last deleted combo and use it to judge isCombo\n         */\n        this.latestRemovedComboIds = new Set();\n        this.comboIds = new Set();\n        /**\n         * <zh/> 获取详细数据变更\n         *\n         * <en/> Get detailed data changes\n         */\n        this.changes = [];\n        /**\n         * <zh/> 批处理计数器\n         *\n         * <en/> Batch processing counter\n         */\n        this.batchCount = 0;\n        /**\n         * <zh/> 是否处于无痕模式\n         *\n         * <en/> Whether it is in traceless mode\n         */\n        this.isTraceless = false;\n        this.enableUpdateNodeLikeHierarchy = true;\n        this.model = new GraphLib();\n    }\n    pushChange(change) {\n        if (this.isTraceless)\n            return;\n        const { type } = change;\n        if (type === ChangeType.NodeUpdated || type === ChangeType.EdgeUpdated || type === ChangeType.ComboUpdated) {\n            const { value, original } = change;\n            this.changes.push({ value: cloneElementData(value), original: cloneElementData(original), type });\n        }\n        else {\n            this.changes.push({ value: cloneElementData(change.value), type });\n        }\n    }\n    getChanges() {\n        return this.changes;\n    }\n    clearChanges() {\n        this.changes = [];\n    }\n    batch(callback) {\n        this.batchCount++;\n        this.model.batch(callback);\n        this.batchCount--;\n    }\n    isBatching() {\n        return this.batchCount > 0;\n    }\n    /**\n     * <zh/> 执行操作而不会留下记录\n     *\n     * <en/> Perform operations without leaving records\n     * @param callback - <zh/> 回调函数 | <en/> callback function\n     * @remarks\n     * <zh/> 通常用于运行时调整元素并同步数据，避免触发数据变更导致重绘\n     *\n     * <en/> Usually used to adjust elements at runtime and synchronize data to avoid triggering data changes and causing redraws\n     */\n    silence(callback) {\n        this.isTraceless = true;\n        callback();\n        this.isTraceless = false;\n    }\n    isCombo(id) {\n        return this.comboIds.has(id) || this.latestRemovedComboIds.has(id);\n    }\n    getData() {\n        return {\n            nodes: this.getNodeData(),\n            edges: this.getEdgeData(),\n            combos: this.getComboData(),\n        };\n    }\n    getNodeData(ids) {\n        return this.model.getAllNodes().reduce((acc, node) => {\n            const data = toG6Data(node);\n            if (this.isCombo(idOf(data)))\n                return acc;\n            if (ids === undefined)\n                acc.push(data);\n            else\n                ids.includes(idOf(data)) && acc.push(data);\n            return acc;\n        }, []);\n    }\n    getEdgeDatum(id) {\n        return toG6Data(this.model.getEdge(id));\n    }\n    getEdgeData(ids) {\n        return this.model.getAllEdges().reduce((acc, edge) => {\n            const data = toG6Data(edge);\n            if (ids === undefined)\n                acc.push(data);\n            else\n                ids.includes(idOf(data)) && acc.push(data);\n            return acc;\n        }, []);\n    }\n    getComboData(ids) {\n        return this.model.getAllNodes().reduce((acc, combo) => {\n            const data = toG6Data(combo);\n            if (!this.isCombo(idOf(data)))\n                return acc;\n            if (ids === undefined)\n                acc.push(data);\n            else\n                ids.includes(idOf(data)) && acc.push(data);\n            return acc;\n        }, []);\n    }\n    getRootsData(hierarchyKey = TREE_KEY) {\n        return this.model.getRoots(hierarchyKey).map(toG6Data);\n    }\n    getAncestorsData(id, hierarchyKey) {\n        const { model } = this;\n        if (!model.hasNode(id) || !model.hasTreeStructure(hierarchyKey))\n            return [];\n        return model.getAncestors(id, hierarchyKey).map(toG6Data);\n    }\n    getDescendantsData(id) {\n        const root = this.getElementDataById(id);\n        const data = [];\n        dfs(root, (node) => {\n            if (node !== root)\n                data.push(node);\n        }, (node) => this.getChildrenData(idOf(node)), 'TB');\n        return data;\n    }\n    getParentData(id, hierarchyKey) {\n        const { model } = this;\n        if (!hierarchyKey) {\n            print.warn('The hierarchy structure key is not specified');\n            return undefined;\n        }\n        if (!model.hasNode(id) || !model.hasTreeStructure(hierarchyKey))\n            return undefined;\n        const parent = model.getParent(id, hierarchyKey);\n        return parent ? toG6Data(parent) : undefined;\n    }\n    getChildrenData(id) {\n        const structureKey = this.getElementType(id) === 'node' ? TREE_KEY : COMBO_KEY;\n        const { model } = this;\n        if (!model.hasNode(id) || !model.hasTreeStructure(structureKey))\n            return [];\n        return model.getChildren(id, structureKey).map(toG6Data);\n    }\n    /**\n     * <zh/> 获取指定类型元素的数据\n     *\n     * <en/> Get the data of the specified type of element\n     * @param elementType - <zh/> 元素类型 | <en/> element type\n     * @returns <zh/> 元素数据 | <en/> element data\n     */\n    getElementsDataByType(elementType) {\n        if (elementType === 'node')\n            return this.getNodeData();\n        if (elementType === 'edge')\n            return this.getEdgeData();\n        if (elementType === 'combo')\n            return this.getComboData();\n        return [];\n    }\n    /**\n     * <zh/> 根据 ID 获取元素的数据，不用关心元素的类型\n     *\n     * <en/> Get the data of the element by ID, no need to care about the type of the element\n     * @param id - <zh/> 元素 ID 数组 | <en/> element ID array\n     * @returns <zh/> 元素数据 | <en/> data of the element\n     */\n    getElementDataById(id) {\n        const type = this.getElementType(id);\n        if (type === 'edge')\n            return this.getEdgeDatum(id);\n        return this.getNodeLikeDatum(id);\n    }\n    /**\n     * <zh/> 获取节点的数据\n     *\n     * <en/> Get node data\n     * @param id - <zh/> 节点 ID | <en/> node ID\n     * @returns <zh/> 节点数据 | <en/> node data\n     */\n    getNodeLikeDatum(id) {\n        const data = this.model.getNode(id);\n        return toG6Data(data);\n    }\n    /**\n     * <zh/> 获取所有节点和 combo 的数据\n     *\n     * <en/> Get all node and combo data\n     * @param ids - <zh/> 节点和 combo ID 数组 | <en/> node and combo ID array\n     * @returns <zh/> 节点和 combo 的数据 | <en/> node and combo data\n     */\n    getNodeLikeData(ids) {\n        return this.model.getAllNodes().reduce((acc, node) => {\n            const data = toG6Data(node);\n            if (ids)\n                ids.includes(idOf(data)) && acc.push(data);\n            else\n                acc.push(data);\n            return acc;\n        }, []);\n    }\n    getElementDataByState(elementType, state) {\n        const elementData = this.getElementsDataByType(elementType);\n        return elementData.filter((datum) => { var _a; return (_a = datum.states) === null || _a === void 0 ? void 0 : _a.includes(state); });\n    }\n    getElementState(id) {\n        var _a;\n        return ((_a = this.getElementDataById(id)) === null || _a === void 0 ? void 0 : _a.states) || [];\n    }\n    hasNode(id) {\n        return this.model.hasNode(id) && !this.isCombo(id);\n    }\n    hasEdge(id) {\n        return this.model.hasEdge(id);\n    }\n    hasCombo(id) {\n        return this.model.hasNode(id) && this.isCombo(id);\n    }\n    getRelatedEdgesData(id, direction = 'both') {\n        return this.model.getRelatedEdges(id, direction).map(toG6Data);\n    }\n    getNeighborNodesData(id) {\n        return this.model.getNeighbors(id).map(toG6Data);\n    }\n    setData(data) {\n        const { nodes: modifiedNodes = [], edges: modifiedEdges = [], combos: modifiedCombos = [] } = data;\n        const { nodes: originalNodes, edges: originalEdges, combos: originalCombos } = this.getData();\n        const nodeDiff = arrayDiff(originalNodes, modifiedNodes, (node) => idOf(node), isElementDataEqual);\n        const edgeDiff = arrayDiff(originalEdges, modifiedEdges, (edge) => idOf(edge), isElementDataEqual);\n        const comboDiff = arrayDiff(originalCombos, modifiedCombos, (combo) => idOf(combo), isElementDataEqual);\n        this.batch(() => {\n            const dataToAdd = {\n                nodes: nodeDiff.enter,\n                edges: edgeDiff.enter,\n                combos: comboDiff.enter,\n            };\n            this.addData(dataToAdd);\n            this.computeZIndex(dataToAdd, 'add', true);\n            const dataToUpdate = {\n                nodes: nodeDiff.update,\n                edges: edgeDiff.update,\n                combos: comboDiff.update,\n            };\n            this.updateData(dataToUpdate);\n            this.computeZIndex(dataToUpdate, 'update', true);\n            const dataToRemove = {\n                nodes: nodeDiff.exit.map(idOf),\n                edges: edgeDiff.exit.map(idOf),\n                combos: comboDiff.exit.map(idOf),\n            };\n            this.removeData(dataToRemove);\n        });\n    }\n    addData(data) {\n        const { nodes, edges, combos } = data;\n        this.batch(() => {\n            // add combo first\n            this.addComboData(combos);\n            this.addNodeData(nodes);\n            this.addEdgeData(edges);\n        });\n        this.computeZIndex(data, 'add');\n    }\n    addNodeData(nodes = []) {\n        if (!nodes.length)\n            return;\n        this.model.addNodes(nodes.map((node) => {\n            this.pushChange({ value: node, type: ChangeType.NodeAdded });\n            return toGraphlibData(node);\n        }));\n        this.updateNodeLikeHierarchy(nodes);\n        this.computeZIndex({ nodes }, 'add');\n    }\n    addEdgeData(edges = []) {\n        if (!edges.length)\n            return;\n        this.model.addEdges(edges.map((edge) => {\n            this.pushChange({ value: edge, type: ChangeType.EdgeAdded });\n            return toGraphlibData(edge);\n        }));\n        this.computeZIndex({ edges }, 'add');\n    }\n    addComboData(combos = []) {\n        if (!combos.length)\n            return;\n        const { model } = this;\n        if (!model.hasTreeStructure(COMBO_KEY)) {\n            model.attachTreeStructure(COMBO_KEY);\n        }\n        model.addNodes(combos.map((combo) => {\n            this.comboIds.add(idOf(combo));\n            this.pushChange({ value: combo, type: ChangeType.ComboAdded });\n            return toGraphlibData(combo);\n        }));\n        this.updateNodeLikeHierarchy(combos);\n        this.computeZIndex({ combos }, 'add');\n    }\n    addChildrenData(parentId, childrenData) {\n        const parentData = this.getNodeLikeDatum(parentId);\n        const childrenId = childrenData.map(idOf);\n        this.addNodeData(childrenData);\n        this.updateNodeData([{ id: parentId, children: [...(parentData.children || []), ...childrenId] }]);\n        this.addEdgeData(childrenId.map((childId) => ({ source: parentId, target: childId })));\n    }\n    /**\n     * <zh/> 计算 zIndex\n     *\n     * <en/> Calculate zIndex\n     * @param data - <zh/> 新增的数据 | <en/> newly added data\n     * @param type - <zh/> 操作类型 | <en/> operation type\n     * @param force - <zh/> 忽略批处理 | <en/> ignore batch processing\n     * @remarks\n     * <zh/> 调用该函数的情况：\n     * - 新增元素\n     * - 更新节点/组合的 combo\n     * - 更新节点的 children\n     *\n     * <en/> The situation of calling this function:\n     * - Add element\n     * - Update the combo of the node/combo\n     * - Update the children of the node\n     */\n    computeZIndex(data, type, force = false) {\n        if (!force && this.isBatching())\n            return;\n        this.batch(() => {\n            const { nodes = [], edges = [], combos = [] } = data;\n            combos.forEach((combo) => {\n                var _a, _b, _c;\n                const id = idOf(combo);\n                if (type === 'add' && isNumber((_a = combo.style) === null || _a === void 0 ? void 0 : _a.zIndex))\n                    return;\n                if (type === 'update' && !('combo' in combo))\n                    return;\n                const parent = this.getParentData(id, COMBO_KEY);\n                const zIndex = parent ? ((_c = (_b = parent.style) === null || _b === void 0 ? void 0 : _b.zIndex) !== null && _c !== void 0 ? _c : 0) + 1 : 0;\n                this.preventUpdateNodeLikeHierarchy(() => {\n                    this.updateComboData([{ id, style: { zIndex } }]);\n                });\n            });\n            nodes.forEach((node) => {\n                var _a, _b, _c;\n                const id = idOf(node);\n                if (type === 'add' && isNumber((_a = node.style) === null || _a === void 0 ? void 0 : _a.zIndex))\n                    return;\n                if (type === 'update' && !('combo' in node) && !('children' in node))\n                    return;\n                let zIndex = 0;\n                const comboParent = this.getParentData(id, COMBO_KEY);\n                if (comboParent) {\n                    zIndex = (((_b = comboParent.style) === null || _b === void 0 ? void 0 : _b.zIndex) || 0) + 1;\n                }\n                else {\n                    const nodeParent = this.getParentData(id, TREE_KEY);\n                    if (nodeParent)\n                        zIndex = ((_c = nodeParent === null || nodeParent === void 0 ? void 0 : nodeParent.style) === null || _c === void 0 ? void 0 : _c.zIndex) || 0;\n                }\n                this.preventUpdateNodeLikeHierarchy(() => {\n                    this.updateNodeData([{ id, style: { zIndex } }]);\n                });\n            });\n            edges.forEach((edge) => {\n                var _a, _b, _c, _d, _e;\n                if (isNumber((_a = edge.style) === null || _a === void 0 ? void 0 : _a.zIndex))\n                    return;\n                let { id, source, target } = edge;\n                if (!id)\n                    id = idOf(edge);\n                else {\n                    const datum = this.getEdgeDatum(id);\n                    source = datum.source;\n                    target = datum.target;\n                }\n                if (!source || !target)\n                    return;\n                const sourceZIndex = ((_c = (_b = this.getNodeLikeDatum(source)) === null || _b === void 0 ? void 0 : _b.style) === null || _c === void 0 ? void 0 : _c.zIndex) || 0;\n                const targetZIndex = ((_e = (_d = this.getNodeLikeDatum(target)) === null || _d === void 0 ? void 0 : _d.style) === null || _e === void 0 ? void 0 : _e.zIndex) || 0;\n                this.updateEdgeData([{ id: idOf(edge), style: { zIndex: Math.max(sourceZIndex, targetZIndex) - 1 } }]);\n            });\n        });\n    }\n    /**\n     * <zh/> 计算元素置顶后的 zIndex\n     *\n     * <en/> Calculate the zIndex after the element is placed on top\n     * @param id - <zh/> 元素 ID | <en/> ID of the element\n     * @returns <zh/> zIndex | <en/> zIndex\n     */\n    getFrontZIndex(id) {\n        var _a;\n        const elementType = this.getElementType(id);\n        const elementData = this.getElementDataById(id);\n        const data = this.getData();\n        // 排除当前元素 / Exclude the current element\n        Object.assign(data, {\n            [`${elementType}s`]: data[`${elementType}s`].filter((element) => idOf(element) !== id),\n        });\n        if (elementType === 'combo') {\n            // 如果 combo 展开，则排除 combo 的子节点/combo 及内部边\n            // If the combo is expanded, exclude the child nodes/combos of the combo and the internal edges\n            if (!isCollapsed(elementData)) {\n                const ancestorIds = new Set(this.getAncestorsData(id, COMBO_KEY).map(idOf));\n                data.nodes = data.nodes.filter((element) => !ancestorIds.has(idOf(element)));\n                data.combos = data.combos.filter((element) => !ancestorIds.has(idOf(element)));\n                data.edges = data.edges.filter(({ source, target }) => !ancestorIds.has(source) && !ancestorIds.has(target));\n            }\n        }\n        return Math.max(((_a = elementData.style) === null || _a === void 0 ? void 0 : _a.zIndex) || 0, 0, ...Object.values(data)\n            .flat()\n            .map((datum) => { var _a; return (((_a = datum === null || datum === void 0 ? void 0 : datum.style) === null || _a === void 0 ? void 0 : _a.zIndex) || 0) + 1; }));\n    }\n    updateNodeLikeHierarchy(data) {\n        if (!this.enableUpdateNodeLikeHierarchy)\n            return;\n        const { model } = this;\n        data.forEach((datum) => {\n            const id = idOf(datum);\n            const parent = parentIdOf(datum);\n            if (parent !== undefined) {\n                if (!model.hasTreeStructure(COMBO_KEY))\n                    model.attachTreeStructure(COMBO_KEY);\n                // 解除原父节点的子节点关系，更新原父节点及其祖先的数据\n                // Remove the child relationship of the original parent node, update the data of the original parent node and its ancestors\n                if (parent === null) {\n                    this.refreshComboData(id);\n                }\n                this.setParent(id, parentIdOf(datum), COMBO_KEY);\n            }\n            const children = datum.children || [];\n            if (children.length) {\n                if (!model.hasTreeStructure(TREE_KEY))\n                    model.attachTreeStructure(TREE_KEY);\n                const _children = children.filter((child) => model.hasNode(child));\n                _children.forEach((child) => this.setParent(child, id, TREE_KEY));\n                if (_children.length !== children.length) {\n                    // 从数据中移除不存在的子节点\n                    // Remove non-existent child nodes from the data\n                    this.updateNodeData([{ id, children: _children }]);\n                }\n            }\n        });\n    }\n    /**\n     * <zh/> 执行变更时不要更新节点层次结构\n     *\n     * <en/> Do not update the node hierarchy when executing changes\n     * @param callback - <zh/> 变更函数 | <en/> change function\n     */\n    preventUpdateNodeLikeHierarchy(callback) {\n        this.enableUpdateNodeLikeHierarchy = false;\n        callback();\n        this.enableUpdateNodeLikeHierarchy = true;\n    }\n    updateData(data) {\n        const { nodes, edges, combos } = data;\n        this.batch(() => {\n            this.updateNodeData(nodes);\n            this.updateComboData(combos);\n            this.updateEdgeData(edges);\n        });\n        this.computeZIndex(data, 'update');\n    }\n    updateNodeData(nodes = []) {\n        if (!nodes.length)\n            return;\n        const { model } = this;\n        this.batch(() => {\n            const modifiedNodes = [];\n            nodes.forEach((modifiedNode) => {\n                const id = idOf(modifiedNode);\n                const originalNode = toG6Data(model.getNode(id));\n                if (isElementDataEqual(originalNode, modifiedNode))\n                    return;\n                const value = mergeElementsData(originalNode, modifiedNode);\n                this.pushChange({ value, original: originalNode, type: ChangeType.NodeUpdated });\n                model.mergeNodeData(id, value);\n                modifiedNodes.push(value);\n            });\n            this.updateNodeLikeHierarchy(modifiedNodes);\n        });\n        this.computeZIndex({ nodes }, 'update');\n    }\n    /**\n     * <zh/> 将所有数据提交到变更记录中以进行重绘\n     *\n     * <en/> Submit all data to the change record for redrawing\n     */\n    refreshData() {\n        const { nodes, edges, combos } = this.getData();\n        nodes.forEach((node) => {\n            this.pushChange({ value: node, original: node, type: ChangeType.NodeUpdated });\n        });\n        edges.forEach((edge) => {\n            this.pushChange({ value: edge, original: edge, type: ChangeType.EdgeUpdated });\n        });\n        combos.forEach((combo) => {\n            this.pushChange({ value: combo, original: combo, type: ChangeType.ComboUpdated });\n        });\n    }\n    syncNodeLikeDatum(datum) {\n        const { model } = this;\n        const id = idOf(datum);\n        if (!model.hasNode(id))\n            return;\n        const original = toG6Data(model.getNode(id));\n        const value = mergeElementsData(original, datum);\n        model.mergeNodeData(id, value);\n    }\n    syncEdgeDatum(datum) {\n        const { model } = this;\n        const id = idOf(datum);\n        if (!model.hasEdge(id))\n            return;\n        const original = toG6Data(model.getEdge(id));\n        const value = mergeElementsData(original, datum);\n        model.mergeEdgeData(id, value);\n    }\n    updateEdgeData(edges = []) {\n        if (!edges.length)\n            return;\n        const { model } = this;\n        this.batch(() => {\n            edges.forEach((modifiedEdge) => {\n                const id = idOf(modifiedEdge);\n                const originalEdge = toG6Data(model.getEdge(id));\n                if (isElementDataEqual(originalEdge, modifiedEdge))\n                    return;\n                if (modifiedEdge.source && originalEdge.source !== modifiedEdge.source) {\n                    model.updateEdgeSource(id, modifiedEdge.source);\n                }\n                if (modifiedEdge.target && originalEdge.target !== modifiedEdge.target) {\n                    model.updateEdgeTarget(id, modifiedEdge.target);\n                }\n                const updatedData = mergeElementsData(originalEdge, modifiedEdge);\n                this.pushChange({ value: updatedData, original: originalEdge, type: ChangeType.EdgeUpdated });\n                model.mergeEdgeData(id, updatedData);\n            });\n        });\n        this.computeZIndex({ edges }, 'update');\n    }\n    updateComboData(combos = []) {\n        if (!combos.length)\n            return;\n        const { model } = this;\n        model.batch(() => {\n            const modifiedCombos = [];\n            combos.forEach((modifiedCombo) => {\n                const id = idOf(modifiedCombo);\n                const originalCombo = toG6Data(model.getNode(id));\n                if (isElementDataEqual(originalCombo, modifiedCombo))\n                    return;\n                const value = mergeElementsData(originalCombo, modifiedCombo);\n                this.pushChange({ value, original: originalCombo, type: ChangeType.ComboUpdated });\n                model.mergeNodeData(id, value);\n                modifiedCombos.push(value);\n            });\n            this.updateNodeLikeHierarchy(modifiedCombos);\n        });\n        this.computeZIndex({ combos }, 'update');\n    }\n    /**\n     * <zh/> 设置节点的父节点\n     *\n     * <en/> Set the parent node of the node\n     * @param id - <zh/> 节点 ID | <en/> node ID\n     * @param parent - <zh/> 父节点 ID | <en/> parent node ID\n     * @param hierarchyKey - <zh/> 层次结构类型 | <en/> hierarchy type\n     * @param update - <zh/> 添加新/旧父节点数据更新记录 | <en/> add new/old parent node data update record\n     */\n    setParent(id, parent, hierarchyKey, update = true) {\n        if (id === parent)\n            return;\n        const elementData = this.getNodeLikeDatum(id);\n        const originalParentId = parentIdOf(elementData);\n        if (originalParentId !== parent && hierarchyKey === COMBO_KEY) {\n            const modifiedDatum = { id, combo: parent };\n            if (this.isCombo(id))\n                this.syncNodeLikeDatum(modifiedDatum);\n            else\n                this.syncNodeLikeDatum(modifiedDatum);\n        }\n        this.model.setParent(id, parent, hierarchyKey);\n        if (update && hierarchyKey === COMBO_KEY) {\n            uniq([originalParentId, parent]).forEach((pId) => {\n                if (pId !== undefined)\n                    this.refreshComboData(pId);\n            });\n        }\n    }\n    /**\n     * <zh/> 刷新 combo 数据\n     *\n     * <en/> Refresh combo data\n     * @param id - <zh/> combo ID | <en/> combo ID\n     * @remarks\n     * <zh/> 不会更改数据，但会触发数据变更事件\n     *\n     * <en/> Will not change the data, but will trigger data change events\n     */\n    refreshComboData(id) {\n        const combo = this.getComboData([id])[0];\n        const ancestors = this.getAncestorsData(id, COMBO_KEY);\n        if (combo)\n            this.pushChange({ value: combo, original: combo, type: ChangeType.ComboUpdated });\n        ancestors.forEach((value) => {\n            this.pushChange({ value: value, original: value, type: ChangeType.ComboUpdated });\n        });\n    }\n    getElementPosition(id) {\n        const datum = this.getElementDataById(id);\n        return positionOf(datum);\n    }\n    translateNodeLikeBy(id, offset) {\n        if (this.isCombo(id))\n            this.translateComboBy(id, offset);\n        else\n            this.translateNodeBy(id, offset);\n    }\n    translateNodeLikeTo(id, position) {\n        if (this.isCombo(id))\n            this.translateComboTo(id, position);\n        else\n            this.translateNodeTo(id, position);\n    }\n    translateNodeBy(id, offset) {\n        const curr = this.getElementPosition(id);\n        const position = add(curr, [...offset, 0].slice(0, 3));\n        this.translateNodeTo(id, position);\n    }\n    translateNodeTo(id, position) {\n        const [x = 0, y = 0, z = 0] = position;\n        this.preventUpdateNodeLikeHierarchy(() => {\n            this.updateNodeData([{ id, style: { x, y, z } }]);\n        });\n    }\n    translateComboBy(id, offset) {\n        const [dx = 0, dy = 0, dz = 0] = offset;\n        if ([dx, dy, dz].some(isNaN) || [dx, dy, dz].every((o) => o === 0))\n            return;\n        const combo = this.getComboData([id])[0];\n        if (!combo)\n            return;\n        const seenNodeLikeIds = new Set();\n        dfs(combo, (succeed) => {\n            const succeedID = idOf(succeed);\n            if (seenNodeLikeIds.has(succeedID))\n                return;\n            seenNodeLikeIds.add(succeedID);\n            const [x, y, z] = positionOf(succeed);\n            const value = mergeElementsData(succeed, {\n                style: { x: x + dx, y: y + dy, z: z + dz },\n            });\n            this.pushChange({\n                value,\n                // @ts-ignore\n                original: succeed,\n                type: this.isCombo(succeedID) ? ChangeType.ComboUpdated : ChangeType.NodeUpdated,\n            });\n            this.model.mergeNodeData(succeedID, value);\n        }, (node) => this.getChildrenData(idOf(node)), 'BT');\n    }\n    translateComboTo(id, position) {\n        var _a;\n        if (position.some(isNaN))\n            return;\n        const [tx = 0, ty = 0, tz = 0] = position;\n        const combo = (_a = this.getComboData([id])) === null || _a === void 0 ? void 0 : _a[0];\n        if (!combo)\n            return;\n        const [comboX, comboY, comboZ] = positionOf(combo);\n        const dx = tx - comboX;\n        const dy = ty - comboY;\n        const dz = tz - comboZ;\n        dfs(combo, (succeed) => {\n            const succeedId = idOf(succeed);\n            const [x, y, z] = positionOf(succeed);\n            const value = mergeElementsData(succeed, {\n                style: { x: x + dx, y: y + dy, z: z + dz },\n            });\n            this.pushChange({\n                value,\n                // @ts-ignore\n                original: succeed,\n                type: this.isCombo(succeedId) ? ChangeType.ComboUpdated : ChangeType.NodeUpdated,\n            });\n            this.model.mergeNodeData(succeedId, value);\n        }, (node) => this.getChildrenData(idOf(node)), 'BT');\n    }\n    removeData(data) {\n        const { nodes, edges, combos } = data;\n        this.batch(() => {\n            // remove edges first\n            this.removeEdgeData(edges);\n            this.removeNodeData(nodes);\n            this.removeComboData(combos);\n            this.latestRemovedComboIds = new Set(combos);\n        });\n    }\n    removeNodeData(ids = []) {\n        if (!ids.length)\n            return;\n        this.batch(() => {\n            ids.forEach((id) => {\n                // 移除关联边、子节点\n                // remove related edges and child nodes\n                this.removeEdgeData(this.getRelatedEdgesData(id).map(idOf));\n                // TODO 树图情况下移除子节点\n                this.pushChange({ value: this.getNodeData([id])[0], type: ChangeType.NodeRemoved });\n                this.removeNodeLikeHierarchy(id);\n            });\n            this.model.removeNodes(ids);\n        });\n    }\n    removeEdgeData(ids = []) {\n        if (!ids.length)\n            return;\n        ids.forEach((id) => this.pushChange({ value: this.getEdgeData([id])[0], type: ChangeType.EdgeRemoved }));\n        this.model.removeEdges(ids);\n    }\n    removeComboData(ids = []) {\n        if (!ids.length)\n            return;\n        this.batch(() => {\n            ids.forEach((id) => {\n                this.pushChange({ value: this.getComboData([id])[0], type: ChangeType.ComboRemoved });\n                this.removeNodeLikeHierarchy(id);\n                this.comboIds.delete(id);\n            });\n            this.model.removeNodes(ids);\n        });\n    }\n    /**\n     * <zh/> 移除节点层次结构，将其子节点移动到父节点的 children 列表中\n     *\n     * <en/> Remove the node hierarchy and move its child nodes to the parent node's children list\n     * @param id - <zh/> 待处理的节点 | <en/> node to be processed\n     */\n    removeNodeLikeHierarchy(id) {\n        if (this.model.hasTreeStructure(COMBO_KEY)) {\n            const grandParent = parentIdOf(this.getNodeLikeDatum(id));\n            // 从父节点的 children 列表中移除\n            // remove from its parent's children list\n            // 调用 graphlib.setParent，不需要更新数据\n            this.setParent(id, undefined, COMBO_KEY, false);\n            // 将子节点移动到父节点的 children 列表中\n            // move the children to the grandparent's children list\n            this.model.getChildren(id, COMBO_KEY).forEach((child) => {\n                const childData = toG6Data(child);\n                const childId = idOf(childData);\n                this.setParent(idOf(childData), grandParent, COMBO_KEY, false);\n                const value = mergeElementsData(childData, {\n                    id: idOf(childData),\n                    combo: grandParent,\n                });\n                this.pushChange({\n                    value,\n                    original: childData,\n                    type: this.isCombo(childId) ? ChangeType.ComboUpdated : ChangeType.NodeUpdated,\n                });\n                this.model.mergeNodeData(idOf(childData), value);\n            });\n            if (!isNil(grandParent))\n                this.refreshComboData(grandParent);\n        }\n    }\n    /**\n     * <zh/> 获取元素的类型\n     *\n     * <en/> Get the type of the element\n     * @param id - <zh/> 元素 ID | <en/> ID of the element\n     * @returns <zh/> 元素类型 | <en/> type of the element\n     */\n    getElementType(id) {\n        if (this.model.hasNode(id)) {\n            if (this.isCombo(id))\n                return 'combo';\n            return 'node';\n        }\n        if (this.model.hasEdge(id))\n            return 'edge';\n        throw new Error(format(`Unknown element type of id: ${id}`));\n    }\n    destroy() {\n        const { model } = this;\n        const nodes = model.getAllNodes();\n        const edges = model.getAllEdges();\n        model.removeEdges(edges.map((edge) => edge.id));\n        model.removeNodes(nodes.map((node) => node.id));\n        // @ts-expect-error force delete\n        this.context = {};\n    }\n}\n//# sourceMappingURL=data.js.map","export default function uniq(arr, cache) {\n    if (cache === void 0) { cache = new Map(); }\n    var r = [];\n    if (Array.isArray(arr)) {\n        for (var i = 0, len = arr.length; i < len; i++) {\n            var item = arr[i];\n            // 加一个 cache，提升性能\n            if (!cache.has(item)) {\n                r.push(item);\n                cache.set(item, true);\n            }\n        }\n    }\n    return r;\n}\n//# sourceMappingURL=uniq.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Group } from '@antv/g';\nimport { groupBy } from '@antv/util';\nimport { AnimationType, COMBO_KEY, GraphEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport { getExtension } from '../registry/get';\nimport { cacheStyle, hasCachedStyle } from '../utils/cache';\nimport { reduceDataChanges } from '../utils/change';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { markToBeDestroyed, updateStyle } from '../utils/element';\nimport { AnimateEvent, ElementLifeCycleEvent, GraphLifeCycleEvent, emit } from '../utils/event';\nimport { idOf } from '../utils/id';\nimport { assignColorByPalette, parsePalette } from '../utils/palette';\nimport { positionOf } from '../utils/position';\nimport { print } from '../utils/print';\nimport { computeElementCallbackStyle } from '../utils/style';\nimport { themeOf } from '../utils/theme';\nimport { subtract } from '../utils/vector';\nimport { setVisibility } from '../utils/visibility';\nexport class ElementController {\n    constructor(context) {\n        this.elementMap = {};\n        this.shapeTypeMap = {};\n        this.paletteStyle = {};\n        this.defaultStyle = {};\n        this.stateStyle = {};\n        this.visibilityCache = new WeakMap();\n        this.context = context;\n    }\n    init() {\n        this.initContainer();\n    }\n    initContainer() {\n        if (!this.container || this.container.destroyed) {\n            const { canvas } = this.context;\n            this.container = canvas.appendChild(new Group({ className: 'elements' }));\n        }\n    }\n    emit(event, context) {\n        if (context.silence)\n            return;\n        emit(this.context.graph, event);\n    }\n    forEachElementData(callback) {\n        ELEMENT_TYPES.forEach((elementType) => {\n            const elementData = this.context.model.getElementsDataByType(elementType);\n            callback(elementType, elementData);\n        });\n    }\n    getElementType(elementType, datum) {\n        var _a;\n        const { options, graph } = this.context;\n        const userDefinedType = ((_a = options[elementType]) === null || _a === void 0 ? void 0 : _a.type) || datum.type;\n        if (!userDefinedType) {\n            if (elementType === 'edge')\n                return 'line';\n            // node / combo\n            else\n                return 'circle';\n        }\n        if (typeof userDefinedType === 'string')\n            return userDefinedType;\n        // @ts-expect-error skip type check\n        return userDefinedType.call(graph, datum);\n    }\n    getTheme(elementType) {\n        return themeOf(this.context.options)[elementType] || {};\n    }\n    getThemeStyle(elementType) {\n        return this.getTheme(elementType).style || {};\n    }\n    getThemeStateStyle(elementType, states) {\n        const { state = {} } = this.getTheme(elementType);\n        return Object.assign({}, ...states.map((name) => state[name] || {}));\n    }\n    computePaletteStyle() {\n        const { options } = this.context;\n        this.paletteStyle = {};\n        this.forEachElementData((elementType, elementData) => {\n            var _a, _b;\n            const palette = Object.assign({}, parsePalette((_a = this.getTheme(elementType)) === null || _a === void 0 ? void 0 : _a.palette), parsePalette((_b = options[elementType]) === null || _b === void 0 ? void 0 : _b.palette));\n            if (palette === null || palette === void 0 ? void 0 : palette.field) {\n                Object.assign(this.paletteStyle, assignColorByPalette(elementData, palette));\n            }\n        });\n    }\n    getPaletteStyle(elementType, id) {\n        const color = this.paletteStyle[id];\n        if (!color)\n            return {};\n        if (elementType === 'edge')\n            return { stroke: color };\n        return { fill: color };\n    }\n    /**\n     * <zh/> 计算单个元素的默认样式\n     *\n     * <en/> compute default style of single element\n     */\n    computeElementDefaultStyle(elementType, context) {\n        var _a;\n        const { options } = this.context;\n        const defaultStyle = ((_a = options[elementType]) === null || _a === void 0 ? void 0 : _a.style) || {};\n        if ('transform' in defaultStyle && Array.isArray(defaultStyle.transform)) {\n            defaultStyle.transform = [...defaultStyle.transform];\n        }\n        this.defaultStyle[idOf(context.datum)] = computeElementCallbackStyle(defaultStyle, context);\n    }\n    computeElementsDefaultStyle(ids) {\n        const { graph } = this.context;\n        this.forEachElementData((elementType, elementData) => {\n            const length = elementData.length;\n            for (let i = 0; i < length; i++) {\n                const datum = elementData[i];\n                if (ids === undefined || ids.includes(idOf(datum))) {\n                    this.computeElementDefaultStyle(elementType, { datum, graph });\n                }\n            }\n        });\n    }\n    getDefaultStyle(id) {\n        return this.defaultStyle[id] || {};\n    }\n    getElementState(id) {\n        try {\n            const { model } = this.context;\n            return model.getElementState(id);\n        }\n        catch (_a) {\n            return [];\n        }\n    }\n    /**\n     * <zh/> 获取单个元素的单个状态的样式\n     *\n     * <en/> get single state style of single element\n     */\n    getElementStateStyle(elementType, state, context) {\n        var _a, _b;\n        const { options } = this.context;\n        const stateStyle = ((_b = (_a = options[elementType]) === null || _a === void 0 ? void 0 : _a.state) === null || _b === void 0 ? void 0 : _b[state]) || {};\n        return computeElementCallbackStyle(stateStyle, context);\n    }\n    /**\n     * <zh/> 计算单个元素的合并状态样式\n     *\n     * <en/> compute merged state style of single element\n     */\n    computeElementStatesStyle(elementType, states, context) {\n        this.stateStyle[idOf(context.datum)] = Object.assign({}, ...states.map((state) => this.getElementStateStyle(elementType, state, context)));\n    }\n    /**\n     * <zh/> 计算全部元素的状态样式\n     *\n     * <en/> compute state style of all elements\n     * @param ids - <zh/> 计算指定元素的状态样式 | <en/> compute state style of specified elements\n     */\n    computeElementsStatesStyle(ids) {\n        const { graph } = this.context;\n        this.forEachElementData((elementType, elementData) => {\n            const length = elementData.length;\n            for (let i = 0; i < length; i++) {\n                const datum = elementData[i];\n                if (ids === undefined || ids.includes(idOf(datum))) {\n                    const states = this.getElementState(idOf(datum));\n                    this.computeElementStatesStyle(elementType, states, { datum, graph });\n                }\n            }\n        });\n    }\n    getStateStyle(id) {\n        return this.stateStyle[id] || {};\n    }\n    computeStyle(stage, ids) {\n        const skip = ['translate', 'zIndex'];\n        if (stage && skip.includes(stage))\n            return;\n        this.computePaletteStyle();\n        this.computeElementsDefaultStyle(ids);\n        this.computeElementsStatesStyle(ids);\n    }\n    getElement(id) {\n        return this.elementMap[id];\n    }\n    getNodes() {\n        return this.context.model.getNodeData().map(({ id }) => this.elementMap[id]);\n    }\n    getEdges() {\n        return this.context.model.getEdgeData().map((edge) => this.elementMap[idOf(edge)]);\n    }\n    getCombos() {\n        return this.context.model.getComboData().map(({ id }) => this.elementMap[id]);\n    }\n    getElementComputedStyle(elementType, datum) {\n        const id = idOf(datum);\n        // 优先级(从低到高) Priority (from low to high):\n        const themeStyle = this.getThemeStyle(elementType);\n        const paletteStyle = this.getPaletteStyle(elementType, id);\n        const dataStyle = datum.style || {};\n        const defaultStyle = this.getDefaultStyle(id);\n        const themeStateStyle = this.getThemeStateStyle(elementType, this.getElementState(id));\n        const stateStyle = this.getStateStyle(id);\n        const style = Object.assign({}, themeStyle, paletteStyle, dataStyle, defaultStyle, themeStateStyle, stateStyle);\n        if (elementType === 'combo') {\n            const childrenData = this.context.model.getChildrenData(id);\n            const isCollapsed = !!style.collapsed;\n            const childrenNode = isCollapsed ? [] : childrenData.map(idOf).filter((id) => this.getElement(id));\n            Object.assign(style, { childrenNode, childrenData });\n        }\n        return style;\n    }\n    getDrawData(context) {\n        this.init();\n        const data = this.computeChangesAndDrawData(context);\n        if (!data)\n            return null;\n        const { type = 'draw', stage = type } = context;\n        this.markDestroyElement(data.drawData);\n        // 计算样式 / Calculate style\n        this.computeStyle(stage);\n        return { type, stage, data };\n    }\n    /**\n     * <zh/> 开始绘制流程\n     *\n     * <en/> start render process\n     */\n    draw(context = { animation: true }) {\n        const drawData = this.getDrawData(context);\n        if (!drawData)\n            return;\n        const { data: { drawData: { add, update, remove }, }, } = drawData;\n        this.destroyElements(remove, context);\n        this.createElements(add, context);\n        this.updateElements(update, context);\n        return this.setAnimationTask(context, drawData);\n    }\n    preLayoutDraw() {\n        return __awaiter(this, arguments, void 0, function* (context = { animation: true }) {\n            var _a, _b;\n            const preResult = this.getDrawData(context);\n            if (!preResult)\n                return;\n            const { data: { drawData }, } = preResult;\n            yield ((_b = (_a = this.context.layout) === null || _a === void 0 ? void 0 : _a.preLayout) === null || _b === void 0 ? void 0 : _b.call(_a, drawData));\n            const { add, update, remove } = drawData;\n            this.destroyElements(remove, context);\n            this.createElements(add, context);\n            this.updateElements(update, context);\n            return this.setAnimationTask(context, preResult);\n        });\n    }\n    setAnimationTask(context, data) {\n        const { animation, silence } = context;\n        const { data: { dataChanges, drawData }, stage, type, } = data;\n        return this.context.animation.animate(animation, silence\n            ? {}\n            : {\n                before: () => this.emit(new GraphLifeCycleEvent(GraphEvent.BEFORE_DRAW, {\n                    dataChanges,\n                    animation,\n                    stage,\n                    render: type === 'render',\n                }), context),\n                beforeAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.DRAW, animation, drawData), context),\n                afterAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.DRAW, animation, drawData), context),\n                after: () => this.emit(new GraphLifeCycleEvent(GraphEvent.AFTER_DRAW, {\n                    dataChanges,\n                    animation,\n                    stage,\n                    render: type === 'render',\n                    firstRender: this.context.graph.rendered === false,\n                }), context),\n            });\n    }\n    computeChangesAndDrawData(context) {\n        const { model } = this.context;\n        const dataChanges = model.getChanges();\n        const tasks = reduceDataChanges(dataChanges);\n        if (tasks.length === 0)\n            return null;\n        const { NodeAdded = [], NodeUpdated = [], NodeRemoved = [], EdgeAdded = [], EdgeUpdated = [], EdgeRemoved = [], ComboAdded = [], ComboUpdated = [], ComboRemoved = [], } = groupBy(tasks, (change) => change.type);\n        const dataOf = (data) => new Map(data.map((datum) => {\n            const data = datum.value;\n            return [idOf(data), data];\n        }));\n        const input = {\n            add: {\n                nodes: dataOf(NodeAdded),\n                edges: dataOf(EdgeAdded),\n                combos: dataOf(ComboAdded),\n            },\n            update: {\n                nodes: dataOf(NodeUpdated),\n                edges: dataOf(EdgeUpdated),\n                combos: dataOf(ComboUpdated),\n            },\n            remove: {\n                nodes: dataOf(NodeRemoved),\n                edges: dataOf(EdgeRemoved),\n                combos: dataOf(ComboRemoved),\n            },\n        };\n        const drawData = this.transformData(input, context);\n        // 清空变更 / Clear changes\n        model.clearChanges();\n        return { dataChanges, drawData };\n    }\n    transformData(input, context) {\n        const transforms = this.context.transform.getTransformInstance();\n        return Object.values(transforms).reduce((data, transform) => transform.beforeDraw(data, context), input);\n    }\n    createElement(elementType, datum, context) {\n        var _a;\n        const id = idOf(datum);\n        const currentElement = this.getElement(id);\n        if (currentElement)\n            return;\n        const type = this.getElementType(elementType, datum);\n        const style = this.getElementComputedStyle(elementType, datum);\n        // get shape constructor\n        const Ctor = getExtension(elementType, type);\n        if (!Ctor)\n            return print.warn(`The element ${type} of ${elementType} is not registered.`);\n        this.emit(new ElementLifeCycleEvent(GraphEvent.BEFORE_ELEMENT_CREATE, elementType, datum), context);\n        const element = this.container.appendChild(new Ctor({\n            id,\n            context: this.context,\n            style,\n        }));\n        this.shapeTypeMap[id] = type;\n        this.elementMap[id] = element;\n        const { stage = 'enter' } = context;\n        (_a = this.context.animation) === null || _a === void 0 ? void 0 : _a.add({\n            element,\n            elementType,\n            stage,\n            originalStyle: Object.assign({}, element.attributes),\n            updatedStyle: style,\n        }, {\n            after: () => {\n                var _a;\n                this.emit(new ElementLifeCycleEvent(GraphEvent.AFTER_ELEMENT_CREATE, elementType, datum), context);\n                (_a = element.onCreate) === null || _a === void 0 ? void 0 : _a.call(element);\n            },\n        });\n    }\n    createElements(data, context) {\n        const { nodes, edges, combos } = data;\n        const iteration = [\n            ['node', nodes],\n            ['combo', combos],\n            ['edge', edges],\n        ];\n        iteration.forEach(([elementType, elementData]) => {\n            elementData.forEach((datum) => this.createElement(elementType, datum, context));\n        });\n    }\n    getUpdateStageStyle(elementType, datum, context) {\n        const { stage = 'update' } = context;\n        // 优化 translate 阶段，直接返回 x, y, z，避免计算样式\n        // Optimize the translate stage, return x, y, z directly to avoid calculating style\n        if (stage === 'translate') {\n            if (elementType === 'node' || elementType === 'combo') {\n                const { style: { x = 0, y = 0, z = 0 } = {} } = datum;\n                return { x, y, z };\n            }\n            else\n                return {};\n        }\n        return this.getElementComputedStyle(elementType, datum);\n    }\n    updateElement(elementType, datum, context) {\n        var _a;\n        const id = idOf(datum);\n        const { stage = 'update' } = context;\n        const element = this.getElement(id);\n        if (!element)\n            return () => null;\n        this.emit(new ElementLifeCycleEvent(GraphEvent.BEFORE_ELEMENT_UPDATE, elementType, datum), context);\n        const type = this.getElementType(elementType, datum);\n        const style = this.getUpdateStageStyle(elementType, datum, context);\n        // 如果类型不同，需要先销毁原有元素，再创建新元素\n        // If the type is different, you need to destroy the original element first, and then create a new element\n        if (this.shapeTypeMap[id] !== type) {\n            element.destroy();\n            delete this.shapeTypeMap[id];\n            delete this.elementMap[id];\n            this.createElement(elementType, datum, { animation: false, silence: true });\n        }\n        const exactStage = stage !== 'visibility' ? stage : style.visibility === 'hidden' ? 'hide' : 'show';\n        // 避免立即将 visibility 设置为 hidden，导致元素不可见，而是在 after 阶段再设置\n        // Avoid setting visibility to hidden immediately, causing the element to be invisible, but set it in the after phase\n        if (exactStage === 'hide')\n            delete style['visibility'];\n        (_a = this.context.animation) === null || _a === void 0 ? void 0 : _a.add({\n            element,\n            elementType,\n            stage: exactStage,\n            originalStyle: Object.assign({}, element.attributes),\n            updatedStyle: style,\n        }, {\n            before: () => {\n                // 通过 elementMap[id] 访问最新的 element，防止 type 不同导致的 element 丢失\n                // Access the latest element through elementMap[id] to prevent the loss of element caused by different types\n                const element = this.elementMap[id];\n                if (stage !== 'collapse')\n                    updateStyle(element, style);\n                if (stage === 'visibility') {\n                    // 缓存原始透明度 / Cache original opacity\n                    // 会在 animation controller 中访问该缓存值 / The cached value will be accessed in the animation controller\n                    if (!hasCachedStyle(element, 'opacity'))\n                        cacheStyle(element, 'opacity');\n                    this.visibilityCache.set(element, exactStage === 'show' ? 'visible' : 'hidden');\n                    if (exactStage === 'show')\n                        setVisibility(element, 'visible');\n                }\n            },\n            after: () => {\n                var _a;\n                const element = this.elementMap[id];\n                if (stage === 'collapse')\n                    updateStyle(element, style);\n                if (exactStage === 'hide')\n                    setVisibility(element, this.visibilityCache.get(element));\n                this.emit(new ElementLifeCycleEvent(GraphEvent.AFTER_ELEMENT_UPDATE, elementType, datum), context);\n                (_a = element.onUpdate) === null || _a === void 0 ? void 0 : _a.call(element);\n            },\n        });\n    }\n    updateElements(data, context) {\n        const { nodes, edges, combos } = data;\n        const iteration = [\n            ['node', nodes],\n            ['combo', combos],\n            ['edge', edges],\n        ];\n        iteration.forEach(([elementType, elementData]) => {\n            elementData.forEach((datum) => this.updateElement(elementType, datum, context));\n        });\n    }\n    /**\n     * <zh/> 标记销毁元素\n     *\n     * <en/> mark destroy element\n     * @param data - <zh/> 绘制数据 | <en/> draw data\n     */\n    markDestroyElement(data) {\n        Object.values(data.remove).forEach((elementData) => {\n            elementData.forEach((datum) => {\n                const id = idOf(datum);\n                const element = this.getElement(id);\n                if (element)\n                    markToBeDestroyed(element);\n            });\n        });\n    }\n    destroyElement(elementType, datum, context) {\n        var _a;\n        const { stage = 'exit' } = context;\n        const id = idOf(datum);\n        const element = this.elementMap[id];\n        if (!element)\n            return () => null;\n        this.emit(new ElementLifeCycleEvent(GraphEvent.BEFORE_ELEMENT_DESTROY, elementType, datum), context);\n        (_a = this.context.animation) === null || _a === void 0 ? void 0 : _a.add({\n            element,\n            elementType,\n            stage,\n            originalStyle: Object.assign({}, element.attributes),\n            updatedStyle: {},\n        }, {\n            after: () => {\n                var _a;\n                this.clearElement(id);\n                element.destroy();\n                (_a = element.onDestroy) === null || _a === void 0 ? void 0 : _a.call(element);\n                this.emit(new ElementLifeCycleEvent(GraphEvent.AFTER_ELEMENT_DESTROY, elementType, datum), context);\n            },\n        });\n    }\n    destroyElements(data, context) {\n        const { nodes, edges, combos } = data;\n        const iteration = [\n            ['combo', combos],\n            ['edge', edges],\n            ['node', nodes],\n        ];\n        iteration.forEach(([elementType, elementData]) => {\n            elementData.forEach((datum) => this.destroyElement(elementType, datum, context));\n        });\n        // TODO 重新计算色板样式，如果是分组色板，则不需要重新计算\n    }\n    clearElement(id) {\n        delete this.paletteStyle[id];\n        delete this.defaultStyle[id];\n        delete this.stateStyle[id];\n        delete this.elementMap[id];\n        delete this.shapeTypeMap[id];\n    }\n    /**\n     * <zh/> 将布局结果对齐到元素，避免视图偏移。会修改布局结果\n     *\n     * <en/> Align the layout result to the element to avoid view offset. Will modify the layout result\n     * @param layoutResult - <zh/> 布局结果 | <en/> layout result\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     */\n    alignLayoutResultToElement(layoutResult, id) {\n        var _a, _b;\n        const target = (_a = layoutResult.nodes) === null || _a === void 0 ? void 0 : _a.find((node) => idOf(node) === id);\n        if (target) {\n            const originalPosition = positionOf(this.context.model.getNodeLikeDatum(id));\n            const modifiedPosition = positionOf(target);\n            const delta = subtract(originalPosition, modifiedPosition);\n            (_b = layoutResult.nodes) === null || _b === void 0 ? void 0 : _b.forEach((node) => {\n                var _a, _b, _c;\n                if ((_a = node.style) === null || _a === void 0 ? void 0 : _a.x)\n                    node.style.x += delta[0];\n                if ((_b = node.style) === null || _b === void 0 ? void 0 : _b.y)\n                    node.style.y += delta[1];\n                if ((_c = node.style) === null || _c === void 0 ? void 0 : _c.z)\n                    node.style.z += delta[2] || 0;\n            });\n        }\n    }\n    /**\n     * <zh/> 收起节点\n     *\n     * <en/> collapse node\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param options - <zh/> 选项 | <en/> options\n     */\n    collapseNode(id, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const { animation, align } = options;\n            const { model, layout } = this.context;\n            const simulateLayoutData = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n            if (!simulateLayoutData)\n                return;\n            this.markDestroyElement(simulateLayoutData.drawData);\n            // 进行预布局，计算出所有元素的位置\n            // Perform pre-layout to calculate the position of all elements\n            const result = yield layout.simulate();\n            if (align)\n                this.alignLayoutResultToElement(result, id);\n            model.updateData(result);\n            // 重新计算数据 / Recalculate data\n            const data = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n            if (!data)\n                return;\n            const { drawData } = data;\n            const { add, remove, update } = drawData;\n            this.markDestroyElement(drawData);\n            const context = { animation, stage: 'collapse', data: drawData };\n            this.destroyElements(remove, context);\n            this.createElements(add, context);\n            this.updateElements(update, context);\n            yield ((_a = this.context.animation.animate(animation, {\n                beforeAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n                afterAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n            }, {\n                collapse: {\n                    target: id,\n                    descendants: Array.from(remove.nodes).map(([, node]) => idOf(node)),\n                    position: positionOf(update.nodes.get(id)),\n                },\n            })) === null || _a === void 0 ? void 0 : _a.finished);\n        });\n    }\n    /**\n     * <zh/> 展开节点\n     *\n     * <en/> expand node\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 是否使用动画，默认为 true | <en/> Whether to use animation, default is true\n     */\n    expandNode(id, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const { model, layout } = this.context;\n            const { animation, align } = options;\n            const position = positionOf(model.getNodeData([id])[0]);\n            const preLayoutData = this.computeChangesAndDrawData({ stage: 'expand', animation });\n            if (!preLayoutData)\n                return;\n            // 首先创建展开的元素，然后进行预布局\n            // First create the expanded element, then perform pre-layout\n            const { drawData: { add }, } = preLayoutData;\n            this.createElements(add, { animation: false, stage: 'expand', target: id });\n            // 重置动画 / Reset animation\n            this.context.animation.clear();\n            const result = yield layout.simulate();\n            if (align)\n                this.alignLayoutResultToElement(result, id);\n            model.updateData(result);\n            // 重新计算数据 / Recalculate data\n            this.computeStyle('expand');\n            const data = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n            if (!data)\n                return;\n            const { drawData } = data;\n            const { update } = drawData;\n            const context = { animation, stage: 'expand', data: drawData };\n            // 将新增节点/边添加到更新列表 / Add new nodes/edges to the update list\n            add.edges.forEach((edge) => update.edges.set(idOf(edge), edge));\n            add.nodes.forEach((node) => update.nodes.set(idOf(node), node));\n            this.updateElements(update, context);\n            yield ((_a = this.context.animation.animate(animation, {\n                beforeAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n                afterAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n            }, {\n                expand: {\n                    target: id,\n                    descendants: Array.from(add.nodes).map(([, node]) => idOf(node)),\n                    position,\n                },\n            })) === null || _a === void 0 ? void 0 : _a.finished);\n        });\n    }\n    collapseCombo(id, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const { model, element } = this.context;\n            if (model.getAncestorsData(id, COMBO_KEY).some((datum) => isCollapsed(datum)))\n                return;\n            const combo = element.getElement(id);\n            const position = combo.getComboPosition(Object.assign(Object.assign({}, combo.attributes), { collapsed: true }));\n            const data = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n            if (!data)\n                return;\n            const { dataChanges, drawData } = data;\n            this.markDestroyElement(drawData);\n            const { update, remove } = drawData;\n            const context = { animation, stage: 'collapse', data: drawData };\n            this.destroyElements(remove, context);\n            this.updateElements(update, context);\n            const idsOf = (data) => Array.from(data).map(([, node]) => idOf(node));\n            yield ((_a = this.context.animation.animate(animation, {\n                before: () => this.emit(new GraphLifeCycleEvent(GraphEvent.BEFORE_DRAW, { dataChanges, animation }), context),\n                beforeAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n                afterAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n                after: () => this.emit(new GraphLifeCycleEvent(GraphEvent.AFTER_DRAW, { dataChanges, animation }), context),\n            }, {\n                collapse: {\n                    target: id,\n                    descendants: [...idsOf(remove.nodes), ...idsOf(remove.combos)],\n                    position,\n                },\n            })) === null || _a === void 0 ? void 0 : _a.finished);\n        });\n    }\n    expandCombo(id, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const { model } = this.context;\n            const position = positionOf(model.getComboData([id])[0]);\n            // 重新计算数据 / Recalculate data\n            this.computeStyle('expand');\n            const data = this.computeChangesAndDrawData({ stage: 'expand', animation });\n            if (!data)\n                return;\n            const { dataChanges, drawData } = data;\n            const { add, update } = drawData;\n            const context = { animation, stage: 'expand', data: drawData, target: id };\n            this.createElements(add, context);\n            this.updateElements(update, context);\n            const idsOf = (data) => Array.from(data).map(([, node]) => idOf(node));\n            yield ((_a = this.context.animation.animate(animation, {\n                before: () => this.emit(new GraphLifeCycleEvent(GraphEvent.BEFORE_DRAW, { dataChanges, animation }), context),\n                beforeAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n                afterAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n                after: () => this.emit(new GraphLifeCycleEvent(GraphEvent.AFTER_DRAW, { dataChanges, animation }), context),\n            }, {\n                expand: {\n                    target: id,\n                    descendants: [...idsOf(add.nodes), ...idsOf(add.combos)],\n                    position,\n                },\n            })) === null || _a === void 0 ? void 0 : _a.finished);\n        });\n    }\n    /**\n     * <zh/> 清空所有元素\n     *\n     * <en/> clear all elements\n     */\n    clear() {\n        this.container.destroy();\n        this.initContainer();\n        this.elementMap = {};\n        this.shapeTypeMap = {};\n        this.defaultStyle = {};\n        this.stateStyle = {};\n        this.paletteStyle = {};\n    }\n    destroy() {\n        this.clear();\n        this.container.destroy();\n        // @ts-expect-error force delete\n        this.context = {};\n    }\n}\n//# sourceMappingURL=element.js.map","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nconst proxyMarker = Symbol(\"Comlink.proxy\");\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\nconst finalizer = Symbol(\"Comlink.finalizer\");\nconst throwMarker = Symbol(\"Comlink.thrown\");\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler = {\n    canHandle: (val) => isObject(val) && val[proxyMarker],\n    serialize(obj) {\n        const { port1, port2 } = new MessageChannel();\n        expose(obj, port1);\n        return [port2, [port2]];\n    },\n    deserialize(port) {\n        port.start();\n        return wrap(port);\n    },\n};\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler = {\n    canHandle: (value) => isObject(value) && throwMarker in value,\n    serialize({ value }) {\n        let serialized;\n        if (value instanceof Error) {\n            serialized = {\n                isError: true,\n                value: {\n                    message: value.message,\n                    name: value.name,\n                    stack: value.stack,\n                },\n            };\n        }\n        else {\n            serialized = { isError: false, value };\n        }\n        return [serialized, []];\n    },\n    deserialize(serialized) {\n        if (serialized.isError) {\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\n        }\n        throw serialized.value;\n    },\n};\n/**\n * Allows customizing the serialization of certain values.\n */\nconst transferHandlers = new Map([\n    [\"proxy\", proxyTransferHandler],\n    [\"throw\", throwTransferHandler],\n]);\nfunction isAllowedOrigin(allowedOrigins, origin) {\n    for (const allowedOrigin of allowedOrigins) {\n        if (origin === allowedOrigin || allowedOrigin === \"*\") {\n            return true;\n        }\n        if (allowedOrigin instanceof RegExp && allowedOrigin.test(origin)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction expose(obj, ep = globalThis, allowedOrigins = [\"*\"]) {\n    ep.addEventListener(\"message\", function callback(ev) {\n        if (!ev || !ev.data) {\n            return;\n        }\n        if (!isAllowedOrigin(allowedOrigins, ev.origin)) {\n            console.warn(`Invalid origin '${ev.origin}' for comlink proxy`);\n            return;\n        }\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n        let returnValue;\n        try {\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n            switch (type) {\n                case \"GET\" /* MessageType.GET */:\n                    {\n                        returnValue = rawValue;\n                    }\n                    break;\n                case \"SET\" /* MessageType.SET */:\n                    {\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n                        returnValue = true;\n                    }\n                    break;\n                case \"APPLY\" /* MessageType.APPLY */:\n                    {\n                        returnValue = rawValue.apply(parent, argumentList);\n                    }\n                    break;\n                case \"CONSTRUCT\" /* MessageType.CONSTRUCT */:\n                    {\n                        const value = new rawValue(...argumentList);\n                        returnValue = proxy(value);\n                    }\n                    break;\n                case \"ENDPOINT\" /* MessageType.ENDPOINT */:\n                    {\n                        const { port1, port2 } = new MessageChannel();\n                        expose(obj, port2);\n                        returnValue = transfer(port1, [port1]);\n                    }\n                    break;\n                case \"RELEASE\" /* MessageType.RELEASE */:\n                    {\n                        returnValue = undefined;\n                    }\n                    break;\n                default:\n                    return;\n            }\n        }\n        catch (value) {\n            returnValue = { value, [throwMarker]: 0 };\n        }\n        Promise.resolve(returnValue)\n            .catch((value) => {\n            return { value, [throwMarker]: 0 };\n        })\n            .then((returnValue) => {\n            const [wireValue, transferables] = toWireValue(returnValue);\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n            if (type === \"RELEASE\" /* MessageType.RELEASE */) {\n                // detach and deactive after sending release response above.\n                ep.removeEventListener(\"message\", callback);\n                closeEndPoint(ep);\n                if (finalizer in obj && typeof obj[finalizer] === \"function\") {\n                    obj[finalizer]();\n                }\n            }\n        })\n            .catch((error) => {\n            // Send Serialization Error To Caller\n            const [wireValue, transferables] = toWireValue({\n                value: new TypeError(\"Unserializable return value\"),\n                [throwMarker]: 0,\n            });\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n        });\n    });\n    if (ep.start) {\n        ep.start();\n    }\n}\nfunction isMessagePort(endpoint) {\n    return endpoint.constructor.name === \"MessagePort\";\n}\nfunction closeEndPoint(endpoint) {\n    if (isMessagePort(endpoint))\n        endpoint.close();\n}\nfunction wrap(ep, target) {\n    const pendingListeners = new Map();\n    ep.addEventListener(\"message\", function handleMessage(ev) {\n        const { data } = ev;\n        if (!data || !data.id) {\n            return;\n        }\n        const resolver = pendingListeners.get(data.id);\n        if (!resolver) {\n            return;\n        }\n        try {\n            resolver(data);\n        }\n        finally {\n            pendingListeners.delete(data.id);\n        }\n    });\n    return createProxy(ep, pendingListeners, [], target);\n}\nfunction throwIfProxyReleased(isReleased) {\n    if (isReleased) {\n        throw new Error(\"Proxy has been released and is not useable\");\n    }\n}\nfunction releaseEndpoint(ep) {\n    return requestResponseMessage(ep, new Map(), {\n        type: \"RELEASE\" /* MessageType.RELEASE */,\n    }).then(() => {\n        closeEndPoint(ep);\n    });\n}\nconst proxyCounter = new WeakMap();\nconst proxyFinalizers = \"FinalizationRegistry\" in globalThis &&\n    new FinalizationRegistry((ep) => {\n        const newCount = (proxyCounter.get(ep) || 0) - 1;\n        proxyCounter.set(ep, newCount);\n        if (newCount === 0) {\n            releaseEndpoint(ep);\n        }\n    });\nfunction registerProxy(proxy, ep) {\n    const newCount = (proxyCounter.get(ep) || 0) + 1;\n    proxyCounter.set(ep, newCount);\n    if (proxyFinalizers) {\n        proxyFinalizers.register(proxy, ep, proxy);\n    }\n}\nfunction unregisterProxy(proxy) {\n    if (proxyFinalizers) {\n        proxyFinalizers.unregister(proxy);\n    }\n}\nfunction createProxy(ep, pendingListeners, path = [], target = function () { }) {\n    let isProxyReleased = false;\n    const proxy = new Proxy(target, {\n        get(_target, prop) {\n            throwIfProxyReleased(isProxyReleased);\n            if (prop === releaseProxy) {\n                return () => {\n                    unregisterProxy(proxy);\n                    releaseEndpoint(ep);\n                    pendingListeners.clear();\n                    isProxyReleased = true;\n                };\n            }\n            if (prop === \"then\") {\n                if (path.length === 0) {\n                    return { then: () => proxy };\n                }\n                const r = requestResponseMessage(ep, pendingListeners, {\n                    type: \"GET\" /* MessageType.GET */,\n                    path: path.map((p) => p.toString()),\n                }).then(fromWireValue);\n                return r.then.bind(r);\n            }\n            return createProxy(ep, pendingListeners, [...path, prop]);\n        },\n        set(_target, prop, rawValue) {\n            throwIfProxyReleased(isProxyReleased);\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n            // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\n            const [value, transferables] = toWireValue(rawValue);\n            return requestResponseMessage(ep, pendingListeners, {\n                type: \"SET\" /* MessageType.SET */,\n                path: [...path, prop].map((p) => p.toString()),\n                value,\n            }, transferables).then(fromWireValue);\n        },\n        apply(_target, _thisArg, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const last = path[path.length - 1];\n            if (last === createEndpoint) {\n                return requestResponseMessage(ep, pendingListeners, {\n                    type: \"ENDPOINT\" /* MessageType.ENDPOINT */,\n                }).then(fromWireValue);\n            }\n            // We just pretend that `bind()` didn’t happen.\n            if (last === \"bind\") {\n                return createProxy(ep, pendingListeners, path.slice(0, -1));\n            }\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, pendingListeners, {\n                type: \"APPLY\" /* MessageType.APPLY */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n        construct(_target, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, pendingListeners, {\n                type: \"CONSTRUCT\" /* MessageType.CONSTRUCT */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n    });\n    registerProxy(proxy, ep);\n    return proxy;\n}\nfunction myFlat(arr) {\n    return Array.prototype.concat.apply([], arr);\n}\nfunction processArguments(argumentList) {\n    const processed = argumentList.map(toWireValue);\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\nconst transferCache = new WeakMap();\nfunction transfer(obj, transfers) {\n    transferCache.set(obj, transfers);\n    return obj;\n}\nfunction proxy(obj) {\n    return Object.assign(obj, { [proxyMarker]: true });\n}\nfunction windowEndpoint(w, context = globalThis, targetOrigin = \"*\") {\n    return {\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\n        addEventListener: context.addEventListener.bind(context),\n        removeEventListener: context.removeEventListener.bind(context),\n    };\n}\nfunction toWireValue(value) {\n    for (const [name, handler] of transferHandlers) {\n        if (handler.canHandle(value)) {\n            const [serializedValue, transferables] = handler.serialize(value);\n            return [\n                {\n                    type: \"HANDLER\" /* WireValueType.HANDLER */,\n                    name,\n                    value: serializedValue,\n                },\n                transferables,\n            ];\n        }\n    }\n    return [\n        {\n            type: \"RAW\" /* WireValueType.RAW */,\n            value,\n        },\n        transferCache.get(value) || [],\n    ];\n}\nfunction fromWireValue(value) {\n    switch (value.type) {\n        case \"HANDLER\" /* WireValueType.HANDLER */:\n            return transferHandlers.get(value.name).deserialize(value.value);\n        case \"RAW\" /* WireValueType.RAW */:\n            return value.value;\n    }\n}\nfunction requestResponseMessage(ep, pendingListeners, msg, transfers) {\n    return new Promise((resolve) => {\n        const id = generateUUID();\n        pendingListeners.set(id, resolve);\n        if (ep.start) {\n            ep.start();\n        }\n        ep.postMessage(Object.assign({ id }, msg), transfers);\n    });\n}\nfunction generateUUID() {\n    return new Array(4)\n        .fill(0)\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n        .join(\"-\");\n}\n\nexport { createEndpoint, expose, finalizer, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n","import { __awaiter, __rest } from \"tslib\";\nimport EventEmitter from '@antv/event-emitter';\nimport { isFunction } from '@antv/util';\nimport * as Comlink from 'comlink';\n/**\n * @example\n * const graph = new Graph();\n * const layout = new CircularLayout();\n *\n * const supervisor = new Supervisor(graph, layout, { iterations: 1000 });\n * const positions = await supervisor.execute();\n * supervisor.stop();\n * supervisor.kill();\n */\nexport class Supervisor extends EventEmitter {\n    constructor(graph, layout, options) {\n        super();\n        this.graph = graph;\n        this.layout = layout;\n        this.options = options;\n        this.spawnWorker();\n    }\n    spawnWorker() {\n        this.proxy = Comlink.wrap(\n        // @ts-ignore\n        new Worker(new URL('./worker.js', import.meta.url), { type: 'module' }));\n        if (this.running) {\n            this.running = false;\n            this.execute();\n        }\n    }\n    execute() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.running)\n                return this;\n            this.running = true;\n            // Payload should include nodes & edges(if needed).\n            const _b = this.layout.options, { onTick } = _b, rest = __rest(_b, [\"onTick\"]);\n            const noFunctionOptions = {};\n            Object.keys(rest).forEach((name) => {\n                if (!isFunction(rest[name]))\n                    noFunctionOptions[name] = rest[name];\n            });\n            const payload = {\n                layout: {\n                    id: this.layout.id,\n                    options: noFunctionOptions,\n                    iterations: (_a = this.options) === null || _a === void 0 ? void 0 : _a.iterations,\n                },\n                nodes: this.graph.getAllNodes(),\n                edges: this.graph.getAllEdges(),\n            };\n            /**\n             * TODO: Convert graph object to linear memory(e.g. csr, adjacency matrix), then transfer the ownership to worker.\n             * @example\n             * const arraybufferWithNodesEdges = graphToByteArrays(this.graph); // Float32Array\n             */\n            const arraybufferWithNodesEdges = new Float32Array([0]);\n            // TODO: Support transferables.\n            // @see https://www.npmjs.com/package/@naoak/workerize-transferable\n            // setupTransferableMethodsOnMain(this.worker, {\n            //   calculateLayout: {\n            //     // pick a transferable object from the method parameters\n            //     pickTransferablesFromParams: (params) => [params[1].buffer],\n            //   },\n            // });\n            const [positions] = yield this.proxy.calculateLayout(payload, [\n                arraybufferWithNodesEdges,\n            ]);\n            return positions;\n        });\n    }\n    stop() {\n        this.running = false;\n        // trigger `layout.stop()` if needed\n        this.proxy.stopLayout();\n        return this;\n    }\n    kill() {\n        // allow the GC to collect wrapper port\n        // @see https://github.com/GoogleChromeLabs/comlink#comlinkreleaseproxy\n        this.proxy[Comlink.releaseProxy]();\n        // TODO: unbind listeners on graph.\n        // TODO: release attached memory\n    }\n    isRunning() {\n        return this.running;\n    }\n}\n//# sourceMappingURL=supervisor.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Graph as Graphlib } from '@antv/graphlib';\nimport { Supervisor, isLayoutWithIterations } from '@antv/layout';\nimport { deepMix } from '@antv/util';\nimport { COMBO_KEY, GraphEvent, TREE_KEY } from '../constants';\nimport { BaseLayout } from '../layouts';\nimport { getExtension } from '../registry/get';\nimport { getAnimationOptions } from '../utils/animation';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { isToBeDestroyed } from '../utils/element';\nimport { GraphLifeCycleEvent, emit } from '../utils/event';\nimport { createTreeStructure } from '../utils/graphlib';\nimport { idOf } from '../utils/id';\nimport { isTreeLayout, layoutAdapter, layoutMapping2GraphData } from '../utils/layout';\nimport { print } from '../utils/print';\nimport { dfs } from '../utils/traverse';\nexport class LayoutController {\n    get presetOptions() {\n        return {\n            animation: !!getAnimationOptions(this.context.options, true),\n        };\n    }\n    get options() {\n        const { options } = this.context;\n        return options.layout;\n    }\n    constructor(context) {\n        this.instances = [];\n        this.context = context;\n    }\n    getLayoutInstance() {\n        return this.instances;\n    }\n    /**\n     * <zh/> 前布局，即在绘制前执行布局\n     *\n     * <en/> Pre-layout, that is, perform layout before drawing\n     * @param data - <zh/> 绘制数据 | <en/> Draw data\n     * @remarks\n     * <zh/> 前布局应该只在首次绘制前执行，后续更新不会触发\n     *\n     * <en/> Pre-layout should only be executed before the first drawing, and subsequent updates will not trigger\n     */\n    preLayout(data) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c, _d;\n            const { graph, model } = this.context;\n            const { add } = data;\n            emit(graph, new GraphLifeCycleEvent(GraphEvent.BEFORE_LAYOUT, { type: 'pre' }));\n            const simulate = yield ((_a = this.context.layout) === null || _a === void 0 ? void 0 : _a.simulate());\n            (_b = simulate === null || simulate === void 0 ? void 0 : simulate.nodes) === null || _b === void 0 ? void 0 : _b.forEach((l) => {\n                const id = idOf(l);\n                const node = add.nodes.get(id);\n                model.syncNodeLikeDatum(l);\n                if (node)\n                    Object.assign(node.style, l.style);\n            });\n            (_c = simulate === null || simulate === void 0 ? void 0 : simulate.edges) === null || _c === void 0 ? void 0 : _c.forEach((l) => {\n                const id = idOf(l);\n                const edge = add.edges.get(id);\n                model.syncEdgeDatum(l);\n                if (edge)\n                    Object.assign(edge.style, l.style);\n            });\n            (_d = simulate === null || simulate === void 0 ? void 0 : simulate.combos) === null || _d === void 0 ? void 0 : _d.forEach((l) => {\n                const id = idOf(l);\n                const combo = add.combos.get(id);\n                model.syncNodeLikeDatum(l);\n                if (combo)\n                    Object.assign(combo.style, l.style);\n            });\n            emit(graph, new GraphLifeCycleEvent(GraphEvent.AFTER_LAYOUT, { type: 'pre' }));\n            this.transformDataAfterLayout('pre', data);\n        });\n    }\n    /**\n     * <zh/> 后布局，即在完成绘制后执行布局\n     *\n     * <en/> Post layout, that is, perform layout after drawing\n     * @param layoutOptions - <zh/> 布局配置项 | <en/> Layout options\n     */\n    postLayout() {\n        return __awaiter(this, arguments, void 0, function* (layoutOptions = this.options) {\n            if (!layoutOptions)\n                return;\n            const pipeline = Array.isArray(layoutOptions) ? layoutOptions : [layoutOptions];\n            const { graph } = this.context;\n            emit(graph, new GraphLifeCycleEvent(GraphEvent.BEFORE_LAYOUT, { type: 'post' }));\n            for (let index = 0; index < pipeline.length; index++) {\n                const options = pipeline[index];\n                const data = this.getLayoutData(options);\n                const opts = Object.assign(Object.assign({}, this.presetOptions), options);\n                emit(graph, new GraphLifeCycleEvent(GraphEvent.BEFORE_STAGE_LAYOUT, { options: opts, index }));\n                const result = yield this.stepLayout(data, opts, index);\n                emit(graph, new GraphLifeCycleEvent(GraphEvent.AFTER_STAGE_LAYOUT, { options: opts, index }));\n                if (!options.animation) {\n                    this.updateElementPosition(result, false);\n                }\n            }\n            emit(graph, new GraphLifeCycleEvent(GraphEvent.AFTER_LAYOUT, { type: 'post' }));\n            this.transformDataAfterLayout('post');\n        });\n    }\n    transformDataAfterLayout(type, data) {\n        const transforms = this.context.transform.getTransformInstance();\n        // @ts-expect-error skip type check\n        Object.values(transforms).forEach((transform) => transform.afterLayout(type, data));\n    }\n    /**\n     * <zh/> 模拟布局\n     *\n     * <en/> Simulate layout\n     * @returns <zh/> 模拟布局结果 | <en/> Simulated layout result\n     */\n    simulate() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.options)\n                return {};\n            const pipeline = Array.isArray(this.options) ? this.options : [this.options];\n            let simulation = {};\n            for (let index = 0; index < pipeline.length; index++) {\n                const options = pipeline[index];\n                const data = this.getLayoutData(options);\n                const result = yield this.stepLayout(data, Object.assign(Object.assign(Object.assign({}, this.presetOptions), options), { animation: false }), index);\n                simulation = result;\n            }\n            return simulation;\n        });\n    }\n    stepLayout(data, options, index) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (isTreeLayout(options))\n                return yield this.treeLayout(data, options, index);\n            return yield this.graphLayout(data, options, index);\n        });\n    }\n    graphLayout(data, options, index) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { animation, enableWorker, iterations = 300 } = options;\n            const layout = this.initGraphLayout(options);\n            if (!layout)\n                return {};\n            this.instances[index] = layout;\n            this.instance = layout;\n            // 使用 web worker 执行布局 / Use web worker to execute layout\n            if (enableWorker) {\n                const rawLayout = layout;\n                this.supervisor = new Supervisor(rawLayout.graphData2LayoutModel(data), rawLayout.instance, { iterations });\n                return layoutMapping2GraphData(yield this.supervisor.execute());\n            }\n            if (isLayoutWithIterations(layout)) {\n                // 有动画，基于布局迭代 tick 更新位置 / Update position based on layout iteration tick\n                if (animation) {\n                    return yield layout.execute(data, {\n                        onTick: (tickData) => {\n                            this.updateElementPosition(tickData, false);\n                        },\n                    });\n                }\n                // 无动画，直接返回终态位置 / No animation, return final position directly\n                layout.execute(data);\n                layout.stop();\n                return layout.tick(iterations);\n            }\n            // 无迭代的布局，直接返回终态位置 / Layout without iteration, return final position directly\n            const layoutResult = yield layout.execute(data);\n            if (animation) {\n                const animationResult = this.updateElementPosition(layoutResult, animation);\n                yield (animationResult === null || animationResult === void 0 ? void 0 : animationResult.finished);\n            }\n            return layoutResult;\n        });\n    }\n    treeLayout(data, options, index) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { type, animation } = options;\n            // @ts-expect-error @antv/hierarchy 布局格式与 @antv/layout 不一致，其导出的是一个方法，而非 class\n            // The layout format of @antv/hierarchy is inconsistent with @antv/layout, it exports a method instead of a class\n            const layout = getExtension('layout', type);\n            if (!layout)\n                return {};\n            const { nodes = [], edges = [] } = data;\n            const model = new Graphlib({\n                nodes: nodes.map((node) => ({ id: idOf(node), data: node.data || {} })),\n                edges: edges.map((edge) => ({ id: idOf(edge), source: edge.source, target: edge.target, data: edge.data || {} })),\n            });\n            createTreeStructure(model);\n            const layoutPreset = { nodes: [], edges: [] };\n            const layoutResult = { nodes: [], edges: [] };\n            const roots = model.getRoots(TREE_KEY);\n            roots.forEach((root) => {\n                dfs(root, (node) => {\n                    node.children = model.getSuccessors(node.id);\n                }, (node) => model.getSuccessors(node.id), 'TB');\n                const result = layout(root, options);\n                const { x: rx, y: ry, z: rz = 0 } = result;\n                // 将布局结果转化为 LayoutMapping 格式 / Convert the layout result to LayoutMapping format\n                dfs(result, (node) => {\n                    const { id, x, y, z = 0 } = node;\n                    layoutPreset.nodes.push({ id, style: { x: rx, y: ry, z: rz } });\n                    layoutResult.nodes.push({ id, style: { x, y, z } });\n                }, (node) => node.children, 'TB');\n            });\n            const offset = this.inferTreeLayoutOffset(layoutResult);\n            applyTreeLayoutOffset(layoutResult, offset);\n            if (animation) {\n                // 先将所有节点移动到根节点位置 / Move all nodes to the root node position first\n                applyTreeLayoutOffset(layoutPreset, offset);\n                this.updateElementPosition(layoutPreset, false);\n                const animationResult = this.updateElementPosition(layoutResult, animation);\n                yield (animationResult === null || animationResult === void 0 ? void 0 : animationResult.finished);\n            }\n            return layoutResult;\n        });\n    }\n    inferTreeLayoutOffset(data) {\n        var _a;\n        let [minX, maxX] = [Infinity, -Infinity];\n        let [minY, maxY] = [Infinity, -Infinity];\n        (_a = data.nodes) === null || _a === void 0 ? void 0 : _a.forEach((node) => {\n            const { x = 0, y = 0 } = node.style || {};\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        });\n        const { canvas } = this.context;\n        const canvasSize = canvas.getSize();\n        const [x1, y1] = canvas.getCanvasByViewport([0, 0]);\n        const [x2, y2] = canvas.getCanvasByViewport(canvasSize);\n        if (minX >= x1 && maxX <= x2 && minY >= y1 && maxY <= y2)\n            return [0, 0];\n        const cx = (x1 + x2) / 2;\n        const cy = (y1 + y2) / 2;\n        return [cx - (minX + maxX) / 2, cy - (minY + maxY) / 2];\n    }\n    stopLayout() {\n        if (this.instance && isLayoutWithIterations(this.instance)) {\n            this.instance.stop();\n            this.instance = undefined;\n        }\n        if (this.supervisor) {\n            this.supervisor.stop();\n            this.supervisor = undefined;\n        }\n        if (this.animationResult) {\n            this.animationResult.finish();\n            this.animationResult = undefined;\n        }\n    }\n    getLayoutData(options) {\n        const { nodeFilter = () => true, preLayout = false, isLayoutInvisibleNodes = false } = options;\n        const { nodes, edges, combos } = this.context.model.getData();\n        const { element, model } = this.context;\n        const getElement = (id) => element.getElement(id);\n        const filterFn = preLayout\n            ? (node) => {\n                var _a;\n                if (!isLayoutInvisibleNodes) {\n                    if (((_a = node.style) === null || _a === void 0 ? void 0 : _a.visibility) === 'hidden')\n                        return false;\n                    if (model.getAncestorsData(node.id, TREE_KEY).some(isCollapsed))\n                        return false;\n                    if (model.getAncestorsData(node.id, COMBO_KEY).some(isCollapsed))\n                        return false;\n                }\n                return nodeFilter(node);\n            }\n            : (node) => {\n                const id = idOf(node);\n                const element = getElement(id);\n                if (!element)\n                    return false;\n                if (isToBeDestroyed(element))\n                    return false;\n                return nodeFilter(node);\n            };\n        const nodesToLayout = nodes.filter(filterFn);\n        const nodeLikeIdsMap = new Map(nodesToLayout.map((node) => [idOf(node), node]));\n        combos.forEach((combo) => nodeLikeIdsMap.set(idOf(combo), combo));\n        const edgesToLayout = edges.filter(({ source, target }) => {\n            return nodeLikeIdsMap.has(source) && nodeLikeIdsMap.has(target);\n        });\n        return {\n            nodes: nodesToLayout,\n            edges: edgesToLayout,\n            combos,\n        };\n    }\n    /**\n     * <zh/> 创建布局实例\n     *\n     * <en/> Create layout instance\n     * @param options - <zh/> 布局配置项 | <en/> Layout options\n     * @returns <zh/> 布局对象 | <en/> Layout object\n     */\n    initGraphLayout(options) {\n        var _a;\n        const { element, viewport } = this.context;\n        const { type, enableWorker, animation, iterations } = options, restOptions = __rest(options, [\"type\", \"enableWorker\", \"animation\", \"iterations\"]);\n        const [width, height] = viewport.getCanvasSize();\n        const center = [width / 2, height / 2];\n        const nodeSize = (_a = options === null || options === void 0 ? void 0 : options.nodeSize) !== null && _a !== void 0 ? _a : ((node) => {\n            const nodeElement = element === null || element === void 0 ? void 0 : element.getElement(node.id);\n            if (nodeElement)\n                return nodeElement.attributes.size;\n            return element === null || element === void 0 ? void 0 : element.getElementComputedStyle('node', node).size;\n        });\n        const Ctor = getExtension('layout', type);\n        if (!Ctor)\n            return print.warn(`The layout of ${type} is not registered.`);\n        const STDCtor = Object.getPrototypeOf(Ctor.prototype) === BaseLayout.prototype\n            ? Ctor\n            : layoutAdapter(Ctor, this.context);\n        const layout = new STDCtor(this.context);\n        const config = { nodeSize, width, height, center };\n        switch (layout.id) {\n            case 'd3-force':\n            case 'd3-force-3d':\n                Object.assign(config, {\n                    center: { x: width / 2, y: height / 2, z: 0 },\n                });\n                break;\n            default:\n                break;\n        }\n        deepMix(layout.options, config, restOptions);\n        return layout;\n    }\n    updateElementPosition(layoutResult, animation) {\n        const { model, element } = this.context;\n        if (!element)\n            return null;\n        model.updateData(layoutResult);\n        return element.draw({ animation, silence: true });\n    }\n    destroy() {\n        var _a;\n        this.stopLayout();\n        // @ts-expect-error force delete\n        this.context = {};\n        (_a = this.supervisor) === null || _a === void 0 ? void 0 : _a.kill();\n        this.supervisor = undefined;\n        this.instance = undefined;\n        this.instances = [];\n        this.animationResult = undefined;\n    }\n}\n/**\n * <zh/> 对树形布局结果应用偏移\n *\n * <en/> Apply offset to tree layout result\n * @param data - <zh/> 布局数据 | <en/> Layout data\n * @param offset - <zh/> 偏移量 | <en/> Offset\n */\nconst applyTreeLayoutOffset = (data, offset) => {\n    var _a;\n    const [ox, oy] = offset;\n    (_a = data.nodes) === null || _a === void 0 ? void 0 : _a.forEach((node) => {\n        if (node.style) {\n            const { x = 0, y = 0 } = node.style;\n            node.style.x = x + ox;\n            node.style.y = y + oy;\n        }\n        else {\n            node.style = { x: ox, y: oy };\n        }\n    });\n};\n//# sourceMappingURL=layout.js.map","/**\n * <zh/> 基于用户传入的配置，推断出最终的配置\n *\n * <en/> Infer the final configuration based on the configuration passed by the user\n * @param options - <zh/> 用户传入的配置 | <en/> Configuration passed by the user\n * @returns <zh/> 最终的配置 | <en/> Final configuration\n */\nexport function inferOptions(options) {\n    const flow = [inferLayoutOptions];\n    return flow.reduce((acc, infer) => infer(acc), options);\n}\n/**\n * <zh/> 推断布局配置\n *\n * <en/> Infer layout configuration\n * @param options - <zh/> 用户传入的配置 | <en/> Configuration passed by the user\n * @returns <zh/> 最终的配置 | <en/> Final configuration\n */\nfunction inferLayoutOptions(options) {\n    if (!options.layout)\n        return options;\n    if (Array.isArray(options.layout))\n        return options;\n    if ('preLayout' in options.layout)\n        return options;\n    if ([\n        'antv-dagre',\n        'combo-combined',\n        'compact-box',\n        'circular',\n        'concentric',\n        'dagre',\n        'fishbone',\n        'grid',\n        'indented',\n        'mds',\n        'radial',\n        'random',\n        'snake',\n        // <zh/> 下列布局的标签位置待适配，需要手动配置 preLayout false\n        // <en/> The label position of the following layouts needs to be adapted, and preLayout needs to be manually configured as false\n        'dendrogram',\n        'mindmap',\n    ].includes(options.layout.type)) {\n        options.layout.preLayout = true;\n    }\n    return options;\n}\n//# sourceMappingURL=options.js.map","import { ExtensionController } from '../registry/extension';\nimport { print } from '../utils/print';\nexport class PluginController extends ExtensionController {\n    constructor(context) {\n        super(context);\n        this.category = 'plugin';\n        this.setPlugins(this.context.options.plugins || []);\n    }\n    setPlugins(plugins) {\n        this.setExtensions(plugins);\n    }\n    getPluginInstance(key) {\n        const exactly = this.extensionMap[key];\n        if (exactly)\n            return exactly;\n        print.warn(`Cannot find the plugin ${key}, will try to find it by type.`);\n        const fussily = this.extensions.find((extension) => extension.type === key);\n        if (fussily)\n            return this.extensionMap[fussily.key];\n    }\n}\n//# sourceMappingURL=plugin.js.map","import { ExtensionController } from '../registry/extension';\nexport const REQUIRED_TRANSFORMS = [\n    'update-related-edges',\n    'collapse-expand-node',\n    'collapse-expand-combo',\n    'get-edge-actual-ends',\n    'arrange-draw-order',\n];\nexport class TransformController extends ExtensionController {\n    constructor(context) {\n        super(context);\n        this.category = 'transform';\n        this.setTransforms(this.context.options.transforms || []);\n    }\n    getTransforms() { }\n    setTransforms(transforms) {\n        this.setExtensions([\n            ...REQUIRED_TRANSFORMS.slice(0, REQUIRED_TRANSFORMS.length - 1),\n            ...transforms,\n            REQUIRED_TRANSFORMS[REQUIRED_TRANSFORMS.length - 1],\n        ]);\n    }\n    getTransformInstance(key) {\n        return key ? this.extensionMap[key] : this.extensionMap;\n    }\n}\n//# sourceMappingURL=transform.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AABB } from '@antv/g';\nimport { clamp, isNumber, pick } from '@antv/util';\nimport { AnimationType, GraphEvent } from '../constants';\nimport { getAnimationOptions } from '../utils/animation';\nimport { getBBoxSize, getCombinedBBox, getExpandedBBox, isBBoxInside, isPointInBBox } from '../utils/bbox';\nimport { AnimateEvent, ViewportEvent, emit } from '../utils/event';\nimport { isPoint } from '../utils/is';\nimport { parsePadding } from '../utils/padding';\nimport { add, divide, subtract } from '../utils/vector';\nexport class ViewportController {\n    get padding() {\n        return parsePadding(this.context.options.padding);\n    }\n    get paddingOffset() {\n        const [top, right, bottom, left] = this.padding;\n        const [offsetX, offsetY, offsetZ] = [(left - right) / 2, (top - bottom) / 2, 0];\n        return [offsetX, offsetY, offsetZ];\n    }\n    constructor(context) {\n        this.landmarkCounter = 0;\n        this.context = context;\n        const [px, py] = this.paddingOffset;\n        const { zoom, rotation, x = px, y = py } = context.options;\n        this.transform({ mode: 'absolute', scale: zoom, translate: [x, y], rotate: rotation }, false);\n    }\n    get camera() {\n        const { canvas } = this.context;\n        return new Proxy(canvas.getCamera(), {\n            get: (target, prop) => {\n                const layers = Object.entries(canvas.getLayers()).filter(([name]) => !['main'].includes(name));\n                const cameras = layers.map(([, layer]) => layer.getCamera());\n                const value = target[prop];\n                if (typeof value === 'function') {\n                    return (...args) => {\n                        const result = value.apply(target, args);\n                        cameras.forEach((camera) => {\n                            camera[prop].apply(camera, args);\n                        });\n                        return result;\n                    };\n                }\n            },\n        });\n    }\n    createLandmark(options) {\n        return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`, options);\n    }\n    getAnimation(animation) {\n        const finalAnimation = getAnimationOptions(this.context.options, animation);\n        if (!finalAnimation)\n            return false;\n        return pick(Object.assign({}, finalAnimation), ['easing', 'duration']);\n    }\n    getCanvasSize() {\n        const { canvas } = this.context;\n        const { width = 0, height = 0 } = canvas.getConfig();\n        return [width, height];\n    }\n    /**\n     * <zh/> 获取画布中心坐标\n     *\n     * <en/> Get the center coordinates of the canvas\n     * @returns - <zh/> 画布中心坐标 | <en/> Center coordinates of the canvas\n     * @remarks\n     * <zh/> 基于画布的宽高计算中心坐标，不受视口变换影响\n     *\n     * <en/> Calculate the center coordinates based on the width and height of the canvas, not affected by the viewport transformation\n     */\n    getCanvasCenter() {\n        const { canvas } = this.context;\n        const { width = 0, height = 0 } = canvas.getConfig();\n        return [width / 2, height / 2, 0];\n    }\n    /**\n     * <zh/> 当前视口中心坐标\n     *\n     * <en/> Current viewport center coordinates\n     * @returns - <zh/> 视口中心坐标 | <en/> Viewport center coordinates\n     * @remarks\n     * <zh/> 以画布原点为原点，受到视口变换影响\n     *\n     * <en/> With the origin of the canvas as the origin, affected by the viewport transformation\n     */\n    getViewportCenter() {\n        // 理论上应该通过 camera.getFocalPoint() 获取\n        // 但在 2D 场景下，通过 pan 操作时，focalPoint 不会变化\n        const [x, y] = this.camera.getPosition();\n        return [x, y, 0];\n    }\n    getGraphCenter() {\n        return this.context.graph.getViewportByCanvas(this.getCanvasCenter());\n    }\n    getZoom() {\n        return this.camera.getZoom();\n    }\n    getRotation() {\n        return this.camera.getRoll();\n    }\n    getTranslateOptions(options) {\n        const { camera } = this;\n        const { mode, translate = [] } = options;\n        const currentZoom = this.getZoom();\n        const position = camera.getPosition();\n        const focalPoint = camera.getFocalPoint();\n        const [cx, cy] = this.getCanvasCenter();\n        const [x = 0, y = 0, z = 0] = translate;\n        const delta = divide([-x, -y, -z], currentZoom);\n        return mode === 'relative'\n            ? {\n                position: add(position, delta),\n                focalPoint: add(focalPoint, delta),\n            }\n            : {\n                position: add([cx, cy, position[2]], delta),\n                focalPoint: add([cx, cy, focalPoint[2]], delta),\n            };\n    }\n    getRotateOptions(options) {\n        const { mode, rotate = 0 } = options;\n        const roll = mode === 'relative' ? this.camera.getRoll() + rotate : rotate;\n        return { roll };\n    }\n    getZoomOptions(options) {\n        const { zoomRange } = this.context.options;\n        const currentZoom = this.camera.getZoom();\n        const { mode, scale = 1 } = options;\n        return clamp(mode === 'relative' ? currentZoom * scale : scale, ...zoomRange);\n    }\n    transform(options, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { graph } = this.context;\n            const { translate, rotate, scale, origin } = options;\n            this.cancelAnimation();\n            const _animation = this.getAnimation(animation);\n            emit(graph, new ViewportEvent(GraphEvent.BEFORE_TRANSFORM, options));\n            // 针对缩放操作，且不涉及平移、旋转、中心点、动画时，直接调用 setZoomByViewportPoint\n            // For zoom operations, and no translation, rotation, center point, and animation involved, call setZoomByViewportPoint directly\n            if (!rotate && scale && !translate && origin && !_animation) {\n                this.camera.setZoomByViewportPoint(this.getZoomOptions(options), origin);\n                emit(graph, new ViewportEvent(GraphEvent.AFTER_TRANSFORM, options));\n                return;\n            }\n            const landmarkOptions = {};\n            if (translate)\n                Object.assign(landmarkOptions, this.getTranslateOptions(options));\n            if (isNumber(rotate))\n                Object.assign(landmarkOptions, this.getRotateOptions(options));\n            if (isNumber(scale))\n                Object.assign(landmarkOptions, { zoom: this.getZoomOptions(options) });\n            if (_animation) {\n                emit(graph, new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.TRANSFORM, null, options));\n                return new Promise((resolve) => {\n                    this.transformResolver = resolve;\n                    this.camera.gotoLandmark(this.createLandmark(landmarkOptions), Object.assign(Object.assign({}, _animation), { onfinish: () => {\n                            emit(graph, new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.TRANSFORM, null, options));\n                            emit(graph, new ViewportEvent(GraphEvent.AFTER_TRANSFORM, options));\n                            this.transformResolver = undefined;\n                            resolve();\n                        } }));\n                });\n            }\n            else {\n                this.camera.gotoLandmark(this.createLandmark(landmarkOptions), {\n                    duration: 0,\n                });\n                emit(graph, new ViewportEvent(GraphEvent.AFTER_TRANSFORM, options));\n            }\n        });\n    }\n    fitView(options, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const [top, right, bottom, left] = this.padding;\n            const { when = 'always', direction = 'both' } = options || {};\n            const [width, height] = this.context.canvas.getSize();\n            const innerWidth = width - left - right;\n            const innerHeight = height - top - bottom;\n            const canvasBounds = this.context.canvas.getBounds();\n            const bboxInViewPort = this.getBBoxInViewport(canvasBounds);\n            const [contentWidth, contentHeight] = getBBoxSize(bboxInViewPort);\n            const isOverflow = (direction === 'x' && contentWidth >= innerWidth) ||\n                (direction === 'y' && contentHeight >= innerHeight) ||\n                (direction === 'both' && contentWidth >= innerWidth && contentHeight >= innerHeight);\n            if (when === 'overflow' && !isOverflow)\n                return yield this.fitCenter({ animation });\n            const scaleX = innerWidth / contentWidth;\n            const scaleY = innerHeight / contentHeight;\n            const scale = direction === 'x' ? scaleX : direction === 'y' ? scaleY : Math.min(scaleX, scaleY);\n            const _animation = this.getAnimation(animation);\n            yield this.transform({\n                mode: 'relative',\n                scale,\n                translate: add(subtract(this.getCanvasCenter(), this.getBBoxInViewport(canvasBounds).center), divide(this.paddingOffset, scale)),\n            }, _animation);\n        });\n    }\n    fitCenter(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const canvasBounds = this.context.canvas.getBounds();\n            yield this.focus(canvasBounds, options);\n        });\n    }\n    focusElements(ids_1) {\n        return __awaiter(this, arguments, void 0, function* (ids, options = {}) {\n            const { element } = this.context;\n            if (!element)\n                return;\n            const getBoundsOf = (el) => options.shapes ? el.getShape(options.shapes).getRenderBounds() : el.getRenderBounds();\n            const elementsBounds = getCombinedBBox(ids.map((id) => getBoundsOf(element.getElement(id))));\n            yield this.focus(elementsBounds, options);\n        });\n    }\n    focus(bbox, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const center = this.context.graph.getViewportByCanvas(bbox.center);\n            const position = options.position || this.getCanvasCenter();\n            const delta = subtract(position, center);\n            yield this.transform({ mode: 'relative', translate: add(delta, this.paddingOffset) }, options.animation);\n        });\n    }\n    /**\n     * <zh/> 获取画布元素在视口中的包围盒\n     *\n     * <en/> Get the bounding box of the canvas element in the viewport\n     * @param bbox - <zh/> 画布元素包围盒 | <en/> Canvas element bounding box\n     * @returns - <zh/> 视口中的包围盒 | <en/> Bounding box in the viewport\n     */\n    getBBoxInViewport(bbox) {\n        const { min, max } = bbox;\n        const { graph } = this.context;\n        const [x1, y1] = graph.getViewportByCanvas(min);\n        const [x2, y2] = graph.getViewportByCanvas(max);\n        const bboxInViewport = new AABB();\n        bboxInViewport.setMinMax([x1, y1, 0], [x2, y2, 0]);\n        return bboxInViewport;\n    }\n    /**\n     * <zh/> 判断点或包围盒是否在视口中\n     *\n     * <en/> Determine whether the point or bounding box is in the viewport\n     * @param target - <zh/> 点或包围盒 | <en/> Point or bounding box\n     * @param complete - <zh/> 是否完全在视口中 | <en/> Whether it is completely in the viewport\n     * @param tolerance - <zh/> 视口外的容差 | <en/> Tolerance outside the viewport\n     * @returns - <zh/> 是否在视口中 | <en/> Whether it is in the viewport\n     */\n    isInViewport(target, complete = false, tolerance = 0) {\n        const { graph } = this.context;\n        const size = this.getCanvasSize();\n        const [x1, y1] = graph.getCanvasByViewport([0, 0]);\n        const [x2, y2] = graph.getCanvasByViewport(size);\n        let viewportBBox = new AABB();\n        viewportBBox.setMinMax([x1, y1, 0], [x2, y2, 0]);\n        if (tolerance) {\n            viewportBBox = getExpandedBBox(viewportBBox, tolerance);\n        }\n        return isPoint(target)\n            ? isPointInBBox(target, viewportBBox)\n            : !complete\n                ? viewportBBox.intersects(target)\n                : isBBoxInside(target, viewportBBox);\n    }\n    cancelAnimation() {\n        var _a, _b;\n        // @ts-expect-error landmarks is private\n        if ((_a = this.camera.landmarks) === null || _a === void 0 ? void 0 : _a.length) {\n            this.camera.cancelLandmarkAnimation();\n        }\n        (_b = this.transformResolver) === null || _b === void 0 ? void 0 : _b.call(this);\n    }\n}\n//# sourceMappingURL=viewport.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from '@antv/event-emitter';\nimport { debounce, isEqual, isFunction, isNumber, isObject, isString, omit } from '@antv/util';\nimport { COMBO_KEY, GraphEvent } from '../constants';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { sizeOf } from '../utils/dom';\nimport { getSubgraphRelatedEdges } from '../utils/edge';\nimport { GraphLifeCycleEvent, emit } from '../utils/event';\nimport { idOf } from '../utils/id';\nimport { isPreLayout } from '../utils/layout';\nimport { format } from '../utils/print';\nimport { subtract } from '../utils/vector';\nimport { getZIndexOf } from '../utils/z-index';\nimport { Animation } from './animation';\nimport { BatchController } from './batch';\nimport { BehaviorController } from './behavior';\nimport { Canvas } from './canvas';\nimport { DataController } from './data';\nimport { ElementController } from './element';\nimport { LayoutController } from './layout';\nimport { inferOptions } from './options';\nimport { PluginController } from './plugin';\nimport { TransformController } from './transform';\nimport { ViewportController } from './viewport';\nexport class Graph extends EventEmitter {\n    constructor(options) {\n        var _a;\n        super();\n        this.options = {};\n        /**\n         * <zh/> 当前图实例是否已经渲染\n         *\n         * <en/> Whether the current graph instance has been rendered\n         */\n        this.rendered = false;\n        /**\n         * <zh/> 当前图实例是否已经被销毁\n         *\n         * <en/> Whether the current graph instance has been destroyed\n         */\n        this.destroyed = false;\n        // @ts-expect-error will be initialized in createRuntime\n        this.context = {\n            model: new DataController(),\n        };\n        this.isCollapsingExpanding = false;\n        this.onResize = debounce(() => {\n            this.resize();\n        }, 300);\n        this._setOptions(Object.assign({}, Graph.defaultOptions, options), true);\n        this.context.graph = this;\n        // Listening resize to autoResize.\n        this.options.autoResize && ((_a = globalThis.addEventListener) === null || _a === void 0 ? void 0 : _a.call(globalThis, 'resize', this.onResize));\n    }\n    /**\n     * <zh/> 获取配置项\n     *\n     * <en/> Get options\n     * @returns <zh/> 配置项 | <en/> options\n     * @apiCategory option\n     */\n    getOptions() {\n        return this.options;\n    }\n    /**\n     * <zh/> 设置配置项\n     *\n     * <en/> Set options\n     * @param options - <zh/> 配置项 | <en/> options\n     * @remarks\n     * <zh/> 要更新 devicePixelRatio、container 属性请销毁后重新创建实例\n     *\n     * <en/> To update devicePixelRatio and container properties, please destroy and recreate the instance\n     * @apiCategory option\n     */\n    setOptions(options) {\n        this._setOptions(options, false);\n    }\n    _setOptions(options, isInit) {\n        this.updateCanvas(options);\n        Object.assign(this.options, inferOptions(options));\n        if (isInit) {\n            const { data } = options;\n            if (data)\n                this.addData(data);\n            return;\n        }\n        const { behaviors, combo, data, edge, layout, node, plugins, theme, transforms } = options;\n        if (behaviors)\n            this.setBehaviors(behaviors);\n        if (data)\n            this.setData(data);\n        if (node)\n            this.setNode(node);\n        if (edge)\n            this.setEdge(edge);\n        if (combo)\n            this.setCombo(combo);\n        if (layout)\n            this.setLayout(layout);\n        if (theme)\n            this.setTheme(theme);\n        if (plugins)\n            this.setPlugins(plugins);\n        if (transforms)\n            this.setTransforms(transforms);\n    }\n    /**\n     * <zh/> 获取当前画布容器的尺寸\n     *\n     * <en/> Get the size of the current canvas container\n     * @returns <zh/> 画布尺寸 | <en/> canvas size\n     * @apiCategory canvas\n     */\n    getSize() {\n        if (this.context.canvas)\n            return this.context.canvas.getSize();\n        return [this.options.width || 0, this.options.height || 0];\n    }\n    /**\n     * <zh/> 设置当前画布容器的尺寸\n     *\n     * <en/> Set the size of the current canvas container\n     * @param width - <zh/> 画布宽度 | <en/> canvas width\n     * @param height - <zh/> 画布高度 | <en/> canvas height\n     * @apiCategory canvas\n     */\n    setSize(width, height) {\n        if (width)\n            this.options.width = width;\n        if (height)\n            this.options.height = height;\n        this.resize(width, height);\n    }\n    /**\n     * <zh/> 设置当前图的缩放区间\n     *\n     * <en/> Get the zoom range of the current graph\n     * @param zoomRange - <zh/> 缩放区间 | <en/> zoom range\n     * @apiCategory viewport\n     */\n    setZoomRange(zoomRange) {\n        this.options.zoomRange = zoomRange;\n    }\n    /**\n     * <zh/> 获取当前图的缩放区间\n     *\n     * <en/> Get the zoom range of the current graph\n     * @returns <zh/> 缩放区间 | <en/> zoom range\n     * @apiCategory viewport\n     */\n    getZoomRange() {\n        return this.options.zoomRange;\n    }\n    /**\n     * <zh/> 设置节点样式映射\n     *\n     * <en/> Set node mapper\n     * @param node - <zh/> 节点配置 | <en/> node options\n     * @remarks\n     * <zh/> 即 `options.node` 的值\n     *\n     * <en/> The value of `options.node`\n     * @apiCategory element\n     */\n    setNode(node) {\n        this.options.node = node;\n        this.context.model.refreshData();\n    }\n    /**\n     * <zh/> 设置边样式映射\n     *\n     * <en/> Set edge mapper\n     * @param edge - <zh/> 边配置 | <en/> edge options\n     * @remarks\n     * <zh/> 即 `options.edge` 的值\n     *\n     * <en/> The value of `options.edge`\n     * @apiCategory element\n     */\n    setEdge(edge) {\n        this.options.edge = edge;\n        this.context.model.refreshData();\n    }\n    /**\n     * <zh/> 设置组合样式映射\n     *\n     * <en/> Set combo mapper\n     * @param combo - <zh/> 组合配置 | <en/> combo options\n     * @remarks\n     * <zh/> 即 `options.combo` 的值\n     *\n     * <en/> The value of `options.combo`\n     * @apiCategory element\n     */\n    setCombo(combo) {\n        this.options.combo = combo;\n        this.context.model.refreshData();\n    }\n    /**\n     * <zh/> 获取主题\n     *\n     * <en/> Get theme\n     * @returns <zh/> 当前主题 | <en/> current theme\n     * @apiCategory theme\n     */\n    getTheme() {\n        return this.options.theme;\n    }\n    /**\n     * <zh/> 设置主题\n     *\n     * <en/> Set theme\n     * @param theme - <zh/> 主题名 | <en/> theme name\n     * @example\n     * ```ts\n     * graph.setTheme('dark');\n     * ```\n     * @apiCategory theme\n     */\n    setTheme(theme) {\n        this.options.theme = isFunction(theme) ? theme(this.getTheme()) : theme;\n    }\n    /**\n     * <zh/> 设置布局\n     *\n     * <en/> Set layout\n     * @param layout - <zh/> 布局配置 | <en/> layout options\n     * @example\n     * ```ts\n     * graph.setLayout({\n     *  type: 'dagre',\n     * })\n     * ```\n     * @apiCategory layout\n     */\n    setLayout(layout) {\n        this.options.layout = isFunction(layout) ? layout(this.getLayout()) : layout;\n    }\n    /**\n     * <zh/> 获取布局配置\n     *\n     * <en/> Get layout options\n     * @returns <zh/> 布局配置 | <en/> layout options\n     * @apiCategory layout\n     */\n    getLayout() {\n        return this.options.layout;\n    }\n    /**\n     * <zh/> 设置交互\n     *\n     * <en/> Set behaviors\n     * @param behaviors - <zh/> 交互配置 | <en/> behavior options\n     * @remarks\n     * <zh/> 设置的交互会全量替换原有的交互，如果需要新增交互可以使用如下方式：\n     *\n     * <en/> The set behavior will completely replace the original behavior. If you need to add behavior, you can use the following method:\n     *\n     * ```ts\n     * graph.setBehaviors((behaviors) => [...behaviors, { type: 'zoom-canvas' }])\n     * ```\n     * @apiCategory behavior\n     */\n    setBehaviors(behaviors) {\n        var _a;\n        this.options.behaviors = isFunction(behaviors) ? behaviors(this.getBehaviors()) : behaviors;\n        (_a = this.context.behavior) === null || _a === void 0 ? void 0 : _a.setBehaviors(this.options.behaviors);\n    }\n    /**\n     * <zh/> 更新指定的交互配置\n     *\n     * <en/> Update specified behavior options\n     * @param behavior - <zh/> 交互配置 | <en/> behavior options\n     * @remarks\n     * <zh/> 如果要更新一个交互，那么必须在交互配置中指定 key 字段，例如：\n     *\n     * <en/> If you want to update a behavior, you must specify the key field in the behavior options, for example:\n     * ```ts\n     * {\n     *   behaviors: [{ type: 'zoom-canvas', key: 'zoom-canvas' }]\n     * }\n     *\n     * graph.updateBehavior({ key: 'zoom-canvas', enable: false })\n     * ```\n     * @apiCategory behavior\n     */\n    updateBehavior(behavior) {\n        this.setBehaviors((behaviors) => behaviors.map((_behavior) => {\n            if (typeof _behavior === 'object' && _behavior.key === behavior.key) {\n                return Object.assign(Object.assign({}, _behavior), behavior);\n            }\n            return _behavior;\n        }));\n    }\n    /**\n     * <zh/> 获取交互配置\n     *\n     * <en/> Get behaviors options\n     * @returns <zh/> 交互配置 | <en/> behavior options\n     * @apiCategory behavior\n     */\n    getBehaviors() {\n        return this.options.behaviors || [];\n    }\n    /**\n     * <zh/> 设置插件配置\n     *\n     * <en/> Set plugins options\n     * @param plugins - <zh/> 插件配置 | <en/> plugin options\n     * @remarks\n     * <zh/> 设置的插件会全量替换原有的插件配置，如果需要新增插件可以使用如下方式：\n     *\n     * <en/> The set plugin will completely replace the original plugin configuration. If you need to add a plugin, you can use the following method:\n     * ```ts\n     * graph.setPlugins((plugins) => [...plugins, { key: 'grid-line' }])\n     * ```\n     * @apiCategory plugin\n     */\n    setPlugins(plugins) {\n        var _a;\n        this.options.plugins = isFunction(plugins) ? plugins(this.getPlugins()) : plugins;\n        (_a = this.context.plugin) === null || _a === void 0 ? void 0 : _a.setPlugins(this.options.plugins);\n    }\n    /**\n     * <zh/> 更新插件配置\n     *\n     * <en/> Update plugin options\n     * @param plugin - <zh/> 插件配置 | <en/> plugin options\n     * @remarks\n     * <zh/> 如果要更新一个插件，那么必须在插件配置中指定 key 字段，例如：\n     *\n     * <en/> If you want to update a plugin, you must specify the key field in the plugin options, for example:\n     * ```ts\n     * {\n     *   plugins: [{ key: 'grid-line' }]\n     * }\n     *\n     * graph.updatePlugin({ key: 'grid-line', follow: true })\n     * ```\n     * @apiCategory plugin\n     */\n    updatePlugin(plugin) {\n        this.setPlugins((plugins) => plugins.map((_plugin) => {\n            if (typeof _plugin === 'object' && _plugin.key === plugin.key) {\n                return Object.assign(Object.assign({}, _plugin), plugin);\n            }\n            return _plugin;\n        }));\n    }\n    /**\n     * <zh/> 获取插件配置\n     *\n     * <en/> Get plugins options\n     * @returns <zh/> 插件配置 | <en/> plugin options\n     * @apiCategory plugin\n     */\n    getPlugins() {\n        return this.options.plugins || [];\n    }\n    /**\n     * <zh/> 获取插件实例\n     *\n     * <en/> Get plugin instance\n     * @param key - <zh/> 插件 key（在配置 plugin 时需要手动传入指定） | <en/> plugin key(need to be specified manually when configuring plugin)\n     * @returns <zh/> 插件实例 | <en/> plugin instance\n     * @remarks\n     * <zh/> 一些插件提供了 API 方法可供调用，例如全屏插件可以调用 `request` 和 `exit` 方法来请求和退出全屏\n     *\n     * <en/> Some plugins provide API methods for calling, such as the full-screen plugin can call the `request` and `exit` methods to request and exit full-screen\n     * ```ts\n     * const fullscreen = graph.getPluginInstance('fullscreen');\n     *\n     * fullscreen.request();\n     *\n     * fullscreen.exit();\n     * ```\n     * @apiCategory plugin\n     */\n    getPluginInstance(key) {\n        return this.context.plugin.getPluginInstance(key);\n    }\n    /**\n     * <zh/> 设置数据转换器\n     *\n     * <en/> Set data transforms\n     * @param transforms - <zh/> 数据转换配置 | <en/> data transform options\n     * @remarks\n     * <zh/> 数据转换器能够在图渲染过程中执行数据转换，目前支持在渲染前对绘制数据进行转化。\n     *\n     * <en/> Data transforms can perform data transformation during the rendering process of the graph. Currently, it supports transforming the drawing data before rendering.\n     * @apiCategory transform\n     */\n    setTransforms(transforms) {\n        var _a;\n        this.options.transforms = isFunction(transforms) ? transforms(this.getTransforms()) : transforms;\n        (_a = this.context.transform) === null || _a === void 0 ? void 0 : _a.setTransforms(this.options.transforms);\n    }\n    /**\n     * <zh/> 更新数据转换器\n     *\n     * <en/> Update data transform\n     * @param transform - <zh/> 数据转换器配置 | <en/> data transform options\n     * @apiCategory transform\n     */\n    updateTransform(transform) {\n        this.setTransforms((transforms) => transforms.map((_transform) => {\n            if (typeof _transform === 'object' && _transform.key === transform.key) {\n                return Object.assign(Object.assign({}, _transform), transform);\n            }\n            return _transform;\n        }));\n        this.context.model.refreshData();\n    }\n    /**\n     * <zh/> 获取数据转换器配置\n     *\n     * <en/> Get data transforms options\n     * @returns <zh/> 数据转换配置 | <en/> data transform options\n     * @apiCategory transform\n     */\n    getTransforms() {\n        return this.options.transforms || [];\n    }\n    /**\n     * <zh/> 获取图数据\n     *\n     * <en/> Get graph data\n     * @returns <zh/> 图数据 | <en/> Graph data\n     * <zh/> 获取当前图的数据，包括节点、边、组合数据\n     *\n     * <en/> Get the data of the current graph, including node, edge, and combo data\n     * @apiCategory data\n     */\n    getData() {\n        return this.context.model.getData();\n    }\n    getElementData(ids) {\n        if (Array.isArray(ids))\n            return ids.map((id) => this.context.model.getElementDataById(id));\n        return this.context.model.getElementDataById(ids);\n    }\n    getNodeData(id) {\n        if (id === undefined)\n            return this.context.model.getNodeData();\n        if (Array.isArray(id))\n            return this.context.model.getNodeData(id);\n        return this.context.model.getNodeLikeDatum(id);\n    }\n    getEdgeData(id) {\n        if (id === undefined)\n            return this.context.model.getEdgeData();\n        if (Array.isArray(id))\n            return this.context.model.getEdgeData(id);\n        return this.context.model.getEdgeDatum(id);\n    }\n    getComboData(id) {\n        if (id === undefined)\n            return this.context.model.getComboData();\n        if (Array.isArray(id))\n            return this.context.model.getComboData(id);\n        return this.context.model.getNodeLikeDatum(id);\n    }\n    /**\n     * <zh/> 设置全量数据\n     *\n     * <en/> Set full data\n     * @param data - <zh/> 数据 | <en/> data\n     * @remarks\n     * <zh/> 设置全量数据会替换当前图中的所有数据，G6 会自动进行数据差异计算\n     *\n     * <en/> Setting full data will replace all data in the current graph, and G6 will automatically calculate the data difference\n     * @apiCategory data\n     */\n    setData(data) {\n        this.context.model.setData(isFunction(data) ? data(this.getData()) : data);\n    }\n    /**\n     * <zh/> 新增元素数据\n     *\n     * <en/> Add element data\n     * @param data - <zh/> 元素数据 | <en/> element data\n     * @example\n     * ```ts\n     * graph.addData({\n     *  nodes: [{ id: 'node-1' }, { id: 'node-2' }],\n     *  edges: [{ source: 'node-1', target: 'node-2' }],\n     * });\n     * ```\n     * @apiCategory data\n     */\n    addData(data) {\n        this.context.model.addData(isFunction(data) ? data(this.getData()) : data);\n    }\n    /**\n     * <zh/> 新增节点数据\n     *\n     * <en/> Add node data\n     * @param data - <zh/> 节点数据 | <en/> node data\n     * @example\n     * ```ts\n     * graph.addNodeData([{ id: 'node-1' }, { id: 'node-2' }]);\n     * ```\n     * @apiCategory data\n     */\n    addNodeData(data) {\n        this.context.model.addNodeData(isFunction(data) ? data(this.getNodeData()) : data);\n    }\n    /**\n     * <zh/> 新增边数据\n     *\n     * <en/> Add edge data\n     * @param data - <zh/> 边数据 | <en/> edge data\n     * @example\n     * ```ts\n     * graph.addEdgeData([{ source: 'node-1', target: 'node-2' }]);\n     * ```\n     * @apiCategory data\n     */\n    addEdgeData(data) {\n        this.context.model.addEdgeData(isFunction(data) ? data(this.getEdgeData()) : data);\n    }\n    /**\n     * <zh/> 新增组合数据\n     *\n     * <en/> Add combo data\n     * @param data - <zh/> 组合数据 | <en/> combo data\n     * @example\n     * ```ts\n     * graph.addComboData([{ id: 'combo-1' }]);\n     * ```\n     * @apiCategory data\n     */\n    addComboData(data) {\n        this.context.model.addComboData(isFunction(data) ? data(this.getComboData()) : data);\n    }\n    /**\n     * <zh/> 为树图节点添加子节点数据\n     *\n     * <en/> Add child node data to the tree node\n     * @param parentId - <zh/> 父节点 ID | <en/> parent node ID\n     * @param childrenData - <zh/> 子节点数据 | <en/> child node data\n     * @remarks\n     * <zh/> 为组合添加子节点使用 addNodeData / addComboData 方法\n     *\n     * <en/> Use addNodeData / addComboData method to add child nodes to the combo\n     * @apiCategory data\n     */\n    addChildrenData(parentId, childrenData) {\n        this.context.model.addChildrenData(parentId, childrenData);\n    }\n    /**\n     * <zh/> 更新元素数据\n     *\n     * <en/> Update element data\n     * @param data - <zh/> 元素数据 | <en/> element data\n     * @remarks\n     * <zh/> 只需要传入需要更新的数据即可，不必传入完整的数据\n     *\n     * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n     * @example\n     * ```ts\n     * graph.updateData({\n     *   nodes: [{ id: 'node-1', style: { x: 100, y: 100 } }],\n     *   edges: [{ id: 'edge-1', style: { lineWidth: 2 } }]\n     * });\n     * ```\n     * @apiCategory data\n     */\n    updateData(data) {\n        this.context.model.updateData(isFunction(data) ? data(this.getData()) : data);\n    }\n    /**\n     * <zh/> 更新节点数据\n     *\n     * <en/> Update node data\n     * @param data - <zh/> 节点数据 | <en/> node data\n     * @remarks\n     * <zh/> 只需要传入需要更新的数据即可，不必传入完整的数据\n     *\n     * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n     * @example\n     * ```ts\n     * graph.updateNodeData([{ id: 'node-1', style: { x: 100, y: 100 } }]);\n     * ```\n     * @apiCategory data\n     */\n    updateNodeData(data) {\n        this.context.model.updateNodeData(isFunction(data) ? data(this.getNodeData()) : data);\n    }\n    /**\n     * <zh/> 更新边数据\n     *\n     * <en/> Update edge data\n     * @param data - <zh/> 边数据 | <en/> edge data\n     * @remarks\n     * <zh/> 只需要传入需要更新的数据即可，不必传入完整的数据\n     *\n     * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n     * @example\n     * ```ts\n     * graph.updateEdgeData([{ id: 'edge-1', style: { lineWidth: 2 } }]);\n     * ```\n     * @apiCategory data\n     */\n    updateEdgeData(data) {\n        this.context.model.updateEdgeData(isFunction(data) ? data(this.getEdgeData()) : data);\n    }\n    /**\n     * <zh/> 更新组合数据\n     *\n     * <en/> Update combo data\n     * @param data - <zh/> 组合数据 | <en/> combo data\n     * @remarks\n     * <zh/> 只需要传入需要更新的数据即可，不必传入完整的数据\n     *\n     * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n     * @example\n     * ```ts\n     * graph.updateComboData([{ id: 'combo-1', style: { x: 100, y: 100 } }]);\n     * ```\n     * @apiCategory data\n     */\n    updateComboData(data) {\n        this.context.model.updateComboData(isFunction(data) ? data(this.getComboData()) : data);\n    }\n    /**\n     * <zh/> 删除元素数据\n     *\n     * <en/> Remove element data\n     * @param ids - <zh/> 元素 ID 数组 | <en/> element ID array\n     * @example\n     * ```ts\n     * graph.removeData({\n     *   nodes: ['node-1', 'node-2'],\n     *   edges: ['edge-1'],\n     * });\n     * ```\n     * @apiCategory data\n     */\n    removeData(ids) {\n        this.context.model.removeData(isFunction(ids) ? ids(this.getData()) : ids);\n    }\n    /**\n     * <zh/> 删除节点数据\n     *\n     * <en/> Remove node data\n     * @param ids - <zh/> 节点 ID 数组 | <en/> node ID array\n     * @example\n     * ```ts\n     * graph.removeNodeData(['node-1', 'node-2']);\n     * ```\n     * @apiCategory data\n     */\n    removeNodeData(ids) {\n        this.context.model.removeNodeData(isFunction(ids) ? ids(this.getNodeData()) : ids);\n    }\n    /**\n     * <zh/> 删除边数据\n     *\n     * <en/> Remove edge data\n     * @param ids - <zh/> 边 ID 数组 | <en/> edge ID array\n     * @remarks\n     * <zh/> 如果传入边数据时仅提供了 source 和 target，那么需要通过 `idOf` 方法获取边的实际 ID\n     *\n     * <en/> If only the source and target are provided when passing in the edge data, you need to get the actual ID of the edge through the `idOf` method\n     * @example\n     * ```ts\n     * graph.removeEdgeData(['edge-1']);\n     * ```\n     * @apiCategory data\n     */\n    removeEdgeData(ids) {\n        this.context.model.removeEdgeData(isFunction(ids) ? ids(this.getEdgeData()) : ids);\n    }\n    /**\n     * <zh/> 删除组合数据\n     *\n     * <en/> Remove combo data\n     * @param ids - <zh/> 组合 ID 数组 | <en/> 组合 ID array\n     * @example\n     * ```ts\n     * graph.removeComboData(['combo-1']);\n     * ```\n     * @apiCategory data\n     */\n    removeComboData(ids) {\n        this.context.model.removeComboData(isFunction(ids) ? ids(this.getComboData()) : ids);\n    }\n    /**\n     * <zh/> 获取元素类型\n     *\n     * <en/> Get element type\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素类型 | <en/> element type\n     * @apiCategory element\n     */\n    getElementType(id) {\n        return this.context.model.getElementType(id);\n    }\n    /**\n     * <zh/> 获取节点或组合关联边的数据\n     *\n     * <en/> Get edge data related to the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @param direction - <zh/> 边的方向 | <en/> edge direction\n     * @returns <zh/> 边数据 | <en/> edge data\n     * @apiCategory data\n     */\n    getRelatedEdgesData(id, direction = 'both') {\n        return this.context.model.getRelatedEdgesData(id, direction);\n    }\n    /**\n     * <zh/> 获取节点或组合的一跳邻居节点数据\n     *\n     * <en/> Get the one-hop neighbor node data of the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @returns <zh/> 邻居节点数据 | <en/> neighbor node data\n     * @apiCategory data\n     */\n    getNeighborNodesData(id) {\n        return this.context.model.getNeighborNodesData(id);\n    }\n    /**\n     * <zh/> 获取节点或组合的祖先元素数据\n     *\n     * <en/> Get the ancestor element data of the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @param hierarchy - <zh/> 指定树图层级关系还是组合层级关系 | <en/> specify tree or combo hierarchy relationship\n     * @returns <zh/> 祖先元素数据 | <en/> ancestor element data\n     * @remarks\n     * <zh/> 数组中的顺序是从父节点到祖先节点\n     *\n     * <en/> The order in the array is from the parent node to the ancestor node\n     * @apiCategory data\n     */\n    getAncestorsData(id, hierarchy) {\n        return this.context.model.getAncestorsData(id, hierarchy);\n    }\n    /**\n     * <zh/> 获取节点或组合的父元素数据\n     *\n     * <en/> Get the parent element data of the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @param hierarchy - <zh/> 指定树图层级关系还是组合层级关系 | <en/> specify tree or combo hierarchy relationship\n     * @returns <zh/> 父元素数据 | <en/> parent element data\n     * @apiCategory data\n     */\n    getParentData(id, hierarchy) {\n        return this.context.model.getParentData(id, hierarchy);\n    }\n    /**\n     * <zh/> 获取节点或组合的子元素数据\n     *\n     * <en/> Get the child element data of the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @returns <zh/> 子元素数据 | <en/> child element data\n     * @apiCategory data\n     */\n    getChildrenData(id) {\n        return this.context.model.getChildrenData(id);\n    }\n    /**\n     * <zh/> 获取节点或组合的后代元素数据\n     *\n     * <en/> Get the descendant element data of the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @returns <zh/> 后代元素数据 | <en/> descendant element data\n     * @apiCategory data\n     */\n    getDescendantsData(id) {\n        return this.context.model.getDescendantsData(id);\n    }\n    getElementDataByState(elementType, state) {\n        return this.context.model.getElementDataByState(elementType, state);\n    }\n    initCanvas() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (this.context.canvas)\n                return yield this.context.canvas.ready;\n            const { container = 'container', width, height, renderer, cursor, background, canvas: canvasOptions, devicePixelRatio = (_a = globalThis.devicePixelRatio) !== null && _a !== void 0 ? _a : 1, } = this.options;\n            if (container instanceof Canvas) {\n                this.context.canvas = container;\n                if (cursor)\n                    container.setCursor(cursor);\n                if (renderer)\n                    container.setRenderer(renderer);\n                yield container.ready;\n            }\n            else {\n                const $container = isString(container) ? document.getElementById(container) : container;\n                const containerSize = sizeOf($container);\n                this.emit(GraphEvent.BEFORE_CANVAS_INIT, { container: $container, width, height });\n                const options = Object.assign(Object.assign({}, canvasOptions), { container: $container, width: width || containerSize[0], height: height || containerSize[1], background,\n                    renderer,\n                    cursor,\n                    devicePixelRatio });\n                const canvas = new Canvas(options);\n                this.context.canvas = canvas;\n                yield canvas.ready;\n                this.emit(GraphEvent.AFTER_CANVAS_INIT, { canvas });\n            }\n        });\n    }\n    updateCanvas(options) {\n        var _a, _b;\n        const { renderer, cursor, height, width } = options;\n        const canvas = this.context.canvas;\n        if (!canvas)\n            return;\n        if (renderer) {\n            this.emit(GraphEvent.BEFORE_RENDERER_CHANGE, { renderer: this.options.renderer });\n            canvas.setRenderer(renderer);\n            this.emit(GraphEvent.AFTER_RENDERER_CHANGE, { renderer });\n        }\n        if (cursor)\n            canvas.setCursor(cursor);\n        if (isNumber(width) || isNumber(height))\n            this.setSize((_a = width !== null && width !== void 0 ? width : this.options.width) !== null && _a !== void 0 ? _a : 0, (_b = height !== null && height !== void 0 ? height : this.options.height) !== null && _b !== void 0 ? _b : 0);\n    }\n    initRuntime() {\n        this.context.options = this.options;\n        if (!this.context.batch)\n            this.context.batch = new BatchController(this.context);\n        if (!this.context.plugin)\n            this.context.plugin = new PluginController(this.context);\n        if (!this.context.viewport)\n            this.context.viewport = new ViewportController(this.context);\n        if (!this.context.transform)\n            this.context.transform = new TransformController(this.context);\n        if (!this.context.element)\n            this.context.element = new ElementController(this.context);\n        if (!this.context.animation)\n            this.context.animation = new Animation(this.context);\n        if (!this.context.layout)\n            this.context.layout = new LayoutController(this.context);\n        if (!this.context.behavior)\n            this.context.behavior = new BehaviorController(this.context);\n    }\n    prepare() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // 等待同步任务执行完成，避免 render 后立即调用 destroy 导致的问题\n            // Wait for synchronous tasks to complete, to avoid problems caused by calling destroy immediately after render\n            yield Promise.resolve();\n            if (this.destroyed)\n                throw new Error(format('The graph instance has been destroyed'));\n            yield this.initCanvas();\n            this.initRuntime();\n        });\n    }\n    /**\n     * <zh/> 执行渲染\n     *\n     * <en/> Render\n     * @remarks\n     * <zh/> 此过程会执行数据更新、绘制元素、执行布局\n     *\n     * > ⚠️ render 为异步方法，如果需要在 render 后执行一些操作，可以使用 `await graph.render()` 或者监听 GraphEvent.AFTER_RENDER 事件\n     *\n     * <en/> This process will execute data update, element rendering, and layout execution\n     *\n     * > ⚠️ render is an asynchronous method. If you need to perform some operations after render, you can use `await graph.render()` or listen to the GraphEvent.AFTER_RENDER event\n     * @apiCategory render\n     */\n    render() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.prepare();\n            emit(this, new GraphLifeCycleEvent(GraphEvent.BEFORE_RENDER));\n            if (!this.options.layout) {\n                const animation = this.context.element.draw({ type: 'render' });\n                yield Promise.all([animation === null || animation === void 0 ? void 0 : animation.finished, this.autoFit()]);\n            }\n            else if (!this.rendered && isPreLayout(this.options.layout)) {\n                const animation = yield this.context.element.preLayoutDraw({ type: 'render' });\n                yield Promise.all([animation === null || animation === void 0 ? void 0 : animation.finished, this.autoFit()]);\n            }\n            else {\n                const animation = this.context.element.draw({ type: 'render' });\n                yield Promise.all([animation === null || animation === void 0 ? void 0 : animation.finished, this.context.layout.postLayout()]);\n                yield this.autoFit();\n            }\n            this.rendered = true;\n            emit(this, new GraphLifeCycleEvent(GraphEvent.AFTER_RENDER));\n        });\n    }\n    /**\n     * <zh/> 绘制元素\n     *\n     * <en/> Draw elements\n     * @returns <zh/> 渲染结果 | <en/> draw result\n     * @remarks\n     * <zh/> 仅执行元素绘制，不会重新布局\n     *\n     * <zh/> ⚠️ draw 为异步方法，如果需要在 draw 后执行一些操作，可以使用 `await graph.draw()` 或者监听 GraphEvent.AFTER_DRAW 事件\n     *\n     * <en/> Only execute element drawing, no re-layout\n     *\n     * <en/> ⚠️ draw is an asynchronous method. If you need to perform some operations after draw, you can use `await graph.draw()` or listen to the GraphEvent.AFTER_DRAW event\n     * @apiCategory render\n     */\n    draw() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            yield this.prepare();\n            yield ((_a = this.context.element.draw()) === null || _a === void 0 ? void 0 : _a.finished);\n        });\n    }\n    /**\n     * <zh/> 执行布局\n     *\n     * <en/> Execute layout\n     * @param layoutOptions - <zh/> 布局配置项 | <en/> Layout options\n     * @apiCategory layout\n     */\n    layout(layoutOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.context.layout.postLayout(layoutOptions);\n        });\n    }\n    /**\n     * <zh/> 停止布局\n     *\n     * <en/> Stop layout\n     * @remarks\n     * <zh/> 适用于带有迭代动画的布局，目前有 `force` 属于此类布局，即停止力导布局的迭代，一般用于布局迭代时间过长情况下的手动停止迭代动画，例如在点击画布/节点的监听中调用\n     *\n     * <en/> Suitable for layouts with iterative animations. Currently, `force` belongs to this type of layout, that is, stop the iteration of the force-directed layout. It is generally used to manually stop the iteration animation when the layout iteration time is too long, such as calling in the click canvas/node listener\n     * @apiCategory layout\n     */\n    stopLayout() {\n        this.context.layout.stopLayout();\n    }\n    /**\n     * <zh/> 清空画布元素\n     *\n     * <en/> Clear canvas elements\n     * @apiCategory canvas\n     */\n    clear() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { model, element } = this.context;\n            model.setData({});\n            model.clearChanges();\n            element === null || element === void 0 ? void 0 : element.clear();\n        });\n    }\n    /**\n     * <zh/> 销毁当前图实例\n     *\n     * <en/> Destroy the current graph instance\n     * @remarks\n     * <zh/> 销毁后无法进行任何操作，如果需要重新使用，需要重新创建一个新的图实例\n     *\n     * <en/> After destruction, no operations can be performed. If you need to reuse it, you need to create a new graph instance\n     * @apiCategory instance\n     */\n    destroy() {\n        var _a;\n        emit(this, new GraphLifeCycleEvent(GraphEvent.BEFORE_DESTROY));\n        const { layout, animation, element, model, canvas, behavior, plugin } = this.context;\n        plugin === null || plugin === void 0 ? void 0 : plugin.destroy();\n        behavior === null || behavior === void 0 ? void 0 : behavior.destroy();\n        layout === null || layout === void 0 ? void 0 : layout.destroy();\n        animation === null || animation === void 0 ? void 0 : animation.destroy();\n        element === null || element === void 0 ? void 0 : element.destroy();\n        model.destroy();\n        canvas === null || canvas === void 0 ? void 0 : canvas.destroy();\n        this.options = {};\n        // @ts-expect-error force delete\n        this.context = {};\n        this.off();\n        (_a = globalThis.removeEventListener) === null || _a === void 0 ? void 0 : _a.call(globalThis, 'resize', this.onResize);\n        this.destroyed = true;\n        emit(this, new GraphLifeCycleEvent(GraphEvent.AFTER_DESTROY));\n    }\n    /**\n     * <zh/> 获取画布实例\n     *\n     * <en/> Get canvas instance\n     * @returns - <zh/> 画布实例 | <en/> canvas instance\n     * @apiCategory canvas\n     */\n    getCanvas() {\n        return this.context.canvas;\n    }\n    resize(width, height) {\n        var _a;\n        const containerSize = sizeOf((_a = this.context.canvas) === null || _a === void 0 ? void 0 : _a.getContainer());\n        const specificSize = [width || containerSize[0], height || containerSize[1]];\n        if (!this.context.canvas)\n            return;\n        const canvasSize = this.context.canvas.getSize();\n        if (isEqual(specificSize, canvasSize))\n            return;\n        emit(this, new GraphLifeCycleEvent(GraphEvent.BEFORE_SIZE_CHANGE, { size: specificSize }));\n        this.context.canvas.resize(...specificSize);\n        emit(this, new GraphLifeCycleEvent(GraphEvent.AFTER_SIZE_CHANGE, { size: specificSize }));\n    }\n    /**\n     * <zh/> 将图缩放至合适大小并平移至视口中心\n     *\n     * <en/> Zoom the graph to fit the viewport and move it to the center of the viewport\n     * @param options - <zh/> 适配配置 | <en/> fit options\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @apiCategory viewport\n     */\n    fitView(options, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            yield ((_a = this.context.viewport) === null || _a === void 0 ? void 0 : _a.fitView(options, animation));\n        });\n    }\n    /**\n     * <zh/> 将图平移至视口中心\n     *\n     * <en/> Move the graph to the center of the viewport\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @apiCategory viewport\n     */\n    fitCenter(animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            yield ((_a = this.context.viewport) === null || _a === void 0 ? void 0 : _a.fitCenter({ animation }));\n        });\n    }\n    autoFit() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { autoFit } = this.context.options;\n            if (!autoFit)\n                return;\n            if (isString(autoFit)) {\n                if (autoFit === 'view')\n                    yield this.fitView();\n                else if (autoFit === 'center')\n                    yield this.fitCenter();\n            }\n            else {\n                const { type, animation } = autoFit;\n                if (type === 'view')\n                    yield this.fitView(autoFit.options, animation);\n                else if (type === 'center')\n                    yield this.fitCenter(animation);\n            }\n        });\n    }\n    /**\n     * <zh/> 聚焦元素\n     *\n     * <en/> Focus on element\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @remarks\n     * <zh/> 移动图，使得元素对齐到视口中心\n     *\n     * <en/> Move the graph so that the element is aligned to the center of the viewport\n     * @apiCategory viewport\n     */\n    focusElement(id, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            yield ((_a = this.context.viewport) === null || _a === void 0 ? void 0 : _a.focusElements(Array.isArray(id) ? id : [id], { animation }));\n        });\n    }\n    /**\n     * <zh/> 基于当前缩放比例进行缩放（相对缩放）\n     *\n     * <en/> Zoom based on the current zoom ratio (relative zoom)\n     * @param ratio - <zh/> 缩放比例 | <en/> zoom ratio\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @param origin - <zh/> 缩放中心(视口坐标) | <en/> zoom center(viewport coordinates)\n     * @remarks\n     * <zh/>\n     * - ratio > 1 放大\n     * - ratio < 1 缩小\n     *\n     * <en/>\n     * - ratio > 1 zoom in\n     * - ratio < 1 zoom out\n     * @apiCategory viewport\n     */\n    zoomBy(ratio, animation, origin) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.context.viewport.transform({ mode: 'relative', scale: ratio, origin }, animation);\n        });\n    }\n    /**\n     * <zh/> 缩放画布至指定比例（绝对缩放）\n     *\n     * <en/> Zoom the canvas to the specified ratio (absolute zoom)\n     * @param zoom - <zh/> 指定缩放比例 | <en/> specified zoom ratio\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @param origin - <zh/> 缩放中心(视口坐标) | <en/> zoom center(viewport coordinates)\n     * @remarks\n     * <zh/>\n     * - zoom = 1 默认大小\n     * - zoom > 1 放大\n     * - zoom < 1 缩小\n     *\n     * <en/>\n     * - zoom = 1 default size\n     * - zoom > 1 zoom in\n     * - zoom < 1 zoom out\n     * @apiCategory viewport\n     */\n    zoomTo(zoom, animation, origin) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.context.viewport.transform({ mode: 'absolute', scale: zoom, origin }, animation);\n        });\n    }\n    /**\n     * <zh/> 获取当前缩放比例\n     *\n     * <en/> Get the current zoom ratio\n     * @returns <zh/> 缩放比例 | <en/> zoom ratio\n     * @apiCategory viewport\n     */\n    getZoom() {\n        return this.context.viewport.getZoom();\n    }\n    /**\n     * <zh/> 基于当前旋转角度进行旋转（相对旋转）\n     *\n     * <en/> Rotate based on the current rotation angle (relative rotation)\n     * @param angle - <zh/> 旋转角度 | <en/> rotation angle\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @param origin - <zh/> 旋转中心(视口坐标) | <en/> rotation center(viewport coordinates)\n     * @apiCategory viewport\n     */\n    rotateBy(angle, animation, origin) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.context.viewport.transform({ mode: 'relative', rotate: angle, origin }, animation);\n        });\n    }\n    /**\n     * <zh/> 旋转画布至指定角度 (绝对旋转)\n     *\n     * <en/> Rotate the canvas to the specified angle (absolute rotation)\n     * @param angle - <zh/> 目标角度 | <en/> target angle\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @param origin - <zh/> 旋转中心(视口坐标) | <en/> rotation center(viewport coordinates)\n     * @apiCategory viewport\n     */\n    rotateTo(angle, animation, origin) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.context.viewport.transform({ mode: 'absolute', rotate: angle, origin }, animation);\n        });\n    }\n    /**\n     * <zh/> 获取当前旋转角度\n     *\n     * <en/> Get the current rotation angle\n     * @returns <zh/> 旋转角度 | <en/> rotation angle\n     * @apiCategory viewport\n     */\n    getRotation() {\n        return this.context.viewport.getRotation();\n    }\n    /**\n     * <zh/> 将图平移指定距离 (相对平移)\n     *\n     * <en/> Translate the graph by the specified distance (relative translation)\n     * @param offset - <zh/> 偏移量 | <en/> offset\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @apiCategory viewport\n     */\n    translateBy(offset, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.context.viewport.transform({ mode: 'relative', translate: offset }, animation);\n        });\n    }\n    /**\n     * <zh/> 将图平移至指定位置 (绝对平移)\n     *\n     * <en/> Translate the graph to the specified position (absolute translation)\n     * @param position - <zh/> 指定位置 | <en/> specified position\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @apiCategory viewport\n     */\n    translateTo(position, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.context.viewport.transform({ mode: 'absolute', translate: position }, animation);\n        });\n    }\n    /**\n     * <zh/> 获取图的位置\n     *\n     * <en/> Get the position of the graph\n     * @returns <zh/> 图的位置 | <en/> position of the graph\n     * @remarks\n     * <zh/> 即画布原点在视口坐标系下的位置。默认状态下，图的位置为 [0, 0]\n     *\n     * <en/> That is, the position of the canvas origin in the viewport coordinate system. By default, the position of the graph is [0, 0]\n     * @apiCategory viewport\n     */\n    getPosition() {\n        return subtract([0, 0], this.getCanvasByViewport([0, 0]));\n    }\n    translateElementBy(args1_1, args2_1) {\n        return __awaiter(this, arguments, void 0, function* (args1, args2, args3 = true) {\n            var _a, _b;\n            const [config, animation] = isObject(args1)\n                ? [args1, (_a = args2) !== null && _a !== void 0 ? _a : true]\n                : [{ [args1]: args2 }, args3];\n            Object.entries(config).forEach(([id, offset]) => this.context.model.translateNodeLikeBy(id, offset));\n            yield ((_b = this.context.element.draw({ animation, stage: 'translate' })) === null || _b === void 0 ? void 0 : _b.finished);\n        });\n    }\n    translateElementTo(args1_1, args2_1) {\n        return __awaiter(this, arguments, void 0, function* (args1, args2, args3 = true) {\n            var _a, _b;\n            const [config, animation] = isObject(args1)\n                ? [args1, (_a = args2) !== null && _a !== void 0 ? _a : true]\n                : [{ [args1]: args2 }, args3];\n            Object.entries(config).forEach(([id, position]) => this.context.model.translateNodeLikeTo(id, position));\n            yield ((_b = this.context.element.draw({ animation, stage: 'translate' })) === null || _b === void 0 ? void 0 : _b.finished);\n        });\n    }\n    /**\n     * <zh/> 获取元素位置\n     *\n     * <en/> Get element position\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素位置 | <en/> element position\n     * @apiCategory element\n     */\n    getElementPosition(id) {\n        return this.context.model.getElementPosition(id);\n    }\n    /**\n     * <zh/> 获取元素渲染样式\n     *\n     * <en/> Get element rendering style\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素渲染样式 | <en/> element rendering style\n     * @apiCategory element\n     */\n    getElementRenderStyle(id) {\n        return omit(this.context.element.getElement(id).attributes, ['context']);\n    }\n    setElementVisibility(args1_1, args2_1) {\n        return __awaiter(this, arguments, void 0, function* (args1, args2, args3 = true) {\n            var _a, _b;\n            const [config, animation] = isObject(args1)\n                ? [args1, (_a = args2) !== null && _a !== void 0 ? _a : true]\n                : [{ [args1]: args2 }, args3];\n            const dataToUpdate = { nodes: [], edges: [], combos: [] };\n            Object.entries(config).forEach(([id, value]) => {\n                const elementType = this.getElementType(id);\n                dataToUpdate[`${elementType}s`].push({ id, style: { visibility: value } });\n            });\n            const { model, element } = this.context;\n            model.preventUpdateNodeLikeHierarchy(() => {\n                model.updateData(dataToUpdate);\n            });\n            yield ((_b = element.draw({ animation, stage: 'visibility' })) === null || _b === void 0 ? void 0 : _b.finished);\n        });\n    }\n    /**\n     * <zh/> 显示元素\n     *\n     * <en/> Show element\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 是否启用动画 | <en/> whether to enable animation\n     * @apiCategory element\n     */\n    showElement(id, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const ids = Array.isArray(id) ? id : [id];\n            yield this.setElementVisibility(Object.fromEntries(ids.map((_id) => [_id, 'visible'])), animation);\n        });\n    }\n    /**\n     * <zh/> 隐藏元素\n     *\n     * <en/> Hide element\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 是否启用动画 | <en/> whether to enable animation\n     * @apiCategory element\n     */\n    hideElement(id, animation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const ids = Array.isArray(id) ? id : [id];\n            yield this.setElementVisibility(Object.fromEntries(ids.map((_id) => [_id, 'hidden'])), animation);\n        });\n    }\n    /**\n     * <zh/> 获取元素可见性\n     *\n     * <en/> Get element visibility\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素可见性 | <en/> element visibility\n     * @apiCategory element\n     */\n    getElementVisibility(id) {\n        var _a, _b;\n        const element = this.context.element.getElement(id);\n        return (_b = (_a = element === null || element === void 0 ? void 0 : element.style) === null || _a === void 0 ? void 0 : _a.visibility) !== null && _b !== void 0 ? _b : 'visible';\n    }\n    setElementZIndex(args1, args2) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const dataToUpdate = { nodes: [], edges: [], combos: [] };\n            const config = isObject(args1) ? args1 : { [args1]: args2 };\n            Object.entries(config).forEach(([id, value]) => {\n                const elementType = this.getElementType(id);\n                dataToUpdate[`${elementType}s`].push({ id, style: { zIndex: value } });\n            });\n            const { model, element } = this.context;\n            model.preventUpdateNodeLikeHierarchy(() => model.updateData(dataToUpdate));\n            yield ((_a = element.draw({ animation: false, stage: 'zIndex' })) === null || _a === void 0 ? void 0 : _a.finished);\n        });\n    }\n    /**\n     * <zh/> 将元素置于最顶层\n     *\n     * <en/> Bring the element to the front\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @apiCategory element\n     */\n    frontElement(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const ids = Array.isArray(id) ? id : [id];\n            const { model } = this.context;\n            const zIndexes = {};\n            ids.map((_id) => {\n                const zIndex = model.getFrontZIndex(_id);\n                const elementType = model.getElementType(_id);\n                if (elementType === 'combo') {\n                    const ancestor = model.getAncestorsData(_id, COMBO_KEY).at(-1) || this.getComboData(_id);\n                    const descendants = [ancestor, ...model.getDescendantsData(idOf(ancestor))];\n                    const delta = zIndex - getZIndexOf(ancestor);\n                    descendants.forEach((combo) => {\n                        zIndexes[idOf(combo)] = this.getElementZIndex(idOf(combo)) + delta;\n                    });\n                    const { internal } = getSubgraphRelatedEdges(descendants.map(idOf), (id) => model.getRelatedEdgesData(id));\n                    internal.forEach((edge) => {\n                        const edgeId = idOf(edge);\n                        zIndexes[edgeId] = this.getElementZIndex(edgeId) + delta;\n                    });\n                }\n                else\n                    zIndexes[_id] = zIndex;\n            });\n            yield this.setElementZIndex(zIndexes);\n        });\n    }\n    /**\n     * <zh/> 获取元素层级\n     *\n     * <en/> Get element z-index\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素层级 | <en/> element z-index\n     * @apiCategory element\n     */\n    getElementZIndex(id) {\n        return getZIndexOf(this.context.model.getElementDataById(id));\n    }\n    setElementState(args1_1, args2_1) {\n        return __awaiter(this, arguments, void 0, function* (args1, args2, args3 = true) {\n            var _a, _b;\n            const [config, animation] = isObject(args1)\n                ? [args1, (_a = args2) !== null && _a !== void 0 ? _a : true]\n                : [{ [args1]: args2 }, args3];\n            const parseState = (state) => {\n                if (!state)\n                    return [];\n                return Array.isArray(state) ? state : [state];\n            };\n            const dataToUpdate = { nodes: [], edges: [], combos: [] };\n            Object.entries(config).forEach(([id, value]) => {\n                const elementType = this.getElementType(id);\n                dataToUpdate[`${elementType}s`].push({ id, states: parseState(value) });\n            });\n            this.updateData(dataToUpdate);\n            yield ((_b = this.context.element.draw({ animation, stage: 'state' })) === null || _b === void 0 ? void 0 : _b.finished);\n        });\n    }\n    /**\n     * <zh/> 获取元素状态\n     *\n     * <en/> Get element state\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素状态 | <en/> element state\n     * @apiCategory element\n     */\n    getElementState(id) {\n        return this.context.model.getElementState(id);\n    }\n    /**\n     * <zh/> 获取元素自身以及子节点在世界坐标系下的渲染包围盒\n     *\n     * <en/> Get the rendering bounding box of the element itself and its child nodes in the world coordinate system\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 渲染包围盒 | <en/> render bounding box\n     * @apiCategory element\n     */\n    getElementRenderBounds(id) {\n        return this.context.element.getElement(id).getRenderBounds();\n    }\n    /**\n     * <zh/> 收起元素\n     *\n     * <en/> Collapse element\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param options - <zh/> 是否启用动画或者配置收起节点的配置项 | <en/> whether to enable animation or the options of collapsing node\n     * @apiCategory element\n     */\n    collapseElement(id_1) {\n        return __awaiter(this, arguments, void 0, function* (id, options = true) {\n            const { model, element } = this.context;\n            if (isCollapsed(model.getNodeLikeData([id])[0]))\n                return;\n            if (this.isCollapsingExpanding)\n                return;\n            if (typeof options === 'boolean')\n                options = { animation: options, align: true };\n            const elementType = model.getElementType(id);\n            yield this.frontElement(id);\n            this.isCollapsingExpanding = true;\n            this.setElementCollapsibility(id, true);\n            if (elementType === 'node')\n                yield element.collapseNode(id, options);\n            else if (elementType === 'combo')\n                yield element.collapseCombo(id, !!options.animation);\n            this.isCollapsingExpanding = false;\n        });\n    }\n    /**\n     * <zh/> 展开元素\n     *\n     * <en/> Expand Element\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 是否启用动画或者配置收起节点的配置项 | <en/> whether to enable animation or the options of collapsing node\n     * @param options\n     * @apiCategory element\n     */\n    expandElement(id_1) {\n        return __awaiter(this, arguments, void 0, function* (id, options = true) {\n            const { model, element } = this.context;\n            if (!isCollapsed(model.getNodeLikeData([id])[0]))\n                return;\n            if (this.isCollapsingExpanding)\n                return;\n            if (typeof options === 'boolean')\n                options = { animation: options, align: true };\n            const elementType = model.getElementType(id);\n            this.isCollapsingExpanding = true;\n            this.setElementCollapsibility(id, false);\n            if (elementType === 'node')\n                yield element.expandNode(id, options);\n            else if (elementType === 'combo')\n                yield element.expandCombo(id, !!options.animation);\n            this.isCollapsingExpanding = false;\n        });\n    }\n    setElementCollapsibility(id, collapsed) {\n        const elementType = this.getElementType(id);\n        if (elementType === 'node')\n            this.updateNodeData([{ id, style: { collapsed } }]);\n        else if (elementType === 'combo')\n            this.updateComboData([{ id, style: { collapsed } }]);\n    }\n    /**\n     * <zh/> 导出画布内容为 DataURL\n     *\n     * <en/> Export canvas content as DataURL\n     * @param options - <zh/> 导出配置 | <en/> export options\n     * @returns <zh/> DataURL | <en/> DataURL\n     * @apiCategory exportImage\n     */\n    toDataURL() {\n        return __awaiter(this, arguments, void 0, function* (options = {}) {\n            return this.context.canvas.toDataURL(options);\n        });\n    }\n    /**\n     * <zh/> 给定的视窗 DOM 坐标，转换为画布上的绘制坐标\n     *\n     * <en/> Convert the given viewport DOM coordinates to the drawing coordinates on the canvas\n     * @param point - <zh/> 视窗坐标 | <en/> viewport coordinates\n     * @returns <zh/> 画布上的绘制坐标 | <en/> drawing coordinates on the canvas\n     * @apiCategory viewport\n     */\n    getCanvasByViewport(point) {\n        return this.context.canvas.getCanvasByViewport(point);\n    }\n    /**\n     * <zh/> 给定画布上的绘制坐标，转换为视窗 DOM 的坐标\n     *\n     * <en/> Convert the given drawing coordinates on the canvas to the coordinates of the viewport DOM\n     * @param point - <zh/> 画布坐标 | <en/> canvas coordinates\n     * @returns <zh/> 视窗 DOM 的坐标 | <en/> coordinates of the viewport DOM\n     * @apiCategory viewport\n     */\n    getViewportByCanvas(point) {\n        return this.context.canvas.getViewportByCanvas(point);\n    }\n    /**\n     * <zh/> 给定画布上的绘制坐标，转换为浏览器坐标\n     *\n     * <en/> Convert the given drawing coordinates on the canvas to browser coordinates\n     * @param point - <zh/> 画布坐标 | <en/> canvas coordinates\n     * @returns <zh/> 浏览器坐标 | <en/> browser coordinates\n     * @apiCategory viewport\n     */\n    getClientByCanvas(point) {\n        return this.context.canvas.getClientByCanvas(point);\n    }\n    /**\n     * <zh/> 给定的浏览器坐标，转换为画布上的绘制坐标\n     *\n     * <en/> Convert the given browser coordinates to drawing coordinates on the canvas\n     * @param point - <zh/> 浏览器坐标 | <en/> browser coordinates\n     * @returns <zh/> 画布上的绘制坐标 | <en/> drawing coordinates on the canvas\n     * @apiCategory viewport\n     */\n    getCanvasByClient(point) {\n        return this.context.canvas.getCanvasByClient(point);\n    }\n    /**\n     * <zh/> 获取视口中心的画布坐标\n     *\n     * <en/> Get the canvas coordinates of the viewport center\n     * @returns <zh/> 视口中心的画布坐标 | <en/> Canvas coordinates of the viewport center\n     * @apiCategory viewport\n     */\n    getViewportCenter() {\n        return this.context.viewport.getViewportCenter();\n    }\n    /**\n     * <zh/> 获取视口中心的视口坐标\n     *\n     * <en/> Get the viewport coordinates of the viewport center\n     * @returns <zh/> 视口中心的视口坐标 | <en/> Viewport coordinates of the viewport center\n     * @apiCategory viewport\n     */\n    getCanvasCenter() {\n        return this.context.viewport.getCanvasCenter();\n    }\n    /**\n     * <zh/> 监听事件\n     *\n     * <en/> Listen to events\n     * @param eventName - <zh/> 事件名称 | <en/> event name\n     * @param callback - <zh/> 回调函数 | <en/> callback function\n     * @param once - <zh/> 是否只监听一次 | <en/> whether to listen only once\n     * @returns <zh/> Graph 实例 | <en/> Graph instance\n     * @apiCategory event\n     */\n    on(eventName, callback, once) {\n        return super.on(eventName, callback, once);\n    }\n    /**\n     * <zh/> 一次性监听事件\n     *\n     * <en/> Listen to events once\n     * @param eventName - <zh/> 事件名称 | <en/> event name\n     * @param callback - <zh/> 回调函数 | <en/> callback function\n     * @returns <zh/> Graph 实例 | <en/> Graph instance\n     * @apiCategory event\n     */\n    once(eventName, callback) {\n        return super.once(eventName, callback);\n    }\n    off(eventName, callback) {\n        return super.off(eventName, callback);\n    }\n}\n/**\n * @internal\n */\nGraph.defaultOptions = {\n    autoResize: false,\n    theme: 'light',\n    rotation: 0,\n    zoom: 1,\n    zoomRange: [0.01, 10],\n};\n//# sourceMappingURL=graph.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { dfs } from './traverse';\n/**\n * <zh/> 将树数据转换为图数据\n *\n * <en/> Convert tree data to graph data\n * @param treeData - <zh/> 树数据 | <en/> Tree data\n * @param getter - <zh/> 获取节点和边的方法 | <en/> Methods to get nodes and edges\n * @returns <zh/> 图数据 | <en/> Graph data\n */\nexport function treeToGraphData(treeData, getter) {\n    const { getNodeData = (datum, depth) => {\n        datum.depth = depth;\n        if (!datum.children)\n            return datum;\n        const { children } = datum, restDatum = __rest(datum, [\"children\"]);\n        return Object.assign(Object.assign({}, restDatum), { children: children.map((child) => child.id) });\n    }, getEdgeData = (source, target) => ({ source: source.id, target: target.id }), getChildren = (datum) => datum.children || [], } = getter || {};\n    const nodes = [];\n    const edges = [];\n    dfs(treeData, (node, depth) => {\n        nodes.push(getNodeData(node, depth));\n        const children = getChildren(node);\n        for (const child of children) {\n            edges.push(getEdgeData(node, child));\n        }\n    }, (node) => getChildren(node), 'TB');\n    return { nodes, edges };\n}\n//# sourceMappingURL=tree.js.map","import { COMBO_KEY } from '../constants';\nimport { idOf } from '../exports';\nimport { findActualConnectNodeData } from '../utils/edge';\nimport { BaseTransform } from './base-transform';\n/**\n * <zh/> 获取边的实际端点\n *\n * <en/> Get the actual endpoints of the edge\n */\nexport class GetEdgeActualEnds extends BaseTransform {\n    beforeDraw(input) {\n        const { add, update } = input;\n        const { model } = this.context;\n        [...add.edges.entries(), ...update.edges.entries()].forEach(([, edge]) => {\n            getEdgeEndsContext(model, edge);\n        });\n        return input;\n    }\n}\nexport const getEdgeEndsContext = (model, edge) => {\n    const { source, target } = edge;\n    const sourceNodeData = model.getElementDataById(source);\n    const targetNodeData = model.getElementDataById(target);\n    const actualSourceNode = findActualConnectNodeData(sourceNodeData, (id) => model.getParentData(id, COMBO_KEY));\n    const actualTargetNode = findActualConnectNodeData(targetNodeData, (id) => model.getParentData(id, COMBO_KEY));\n    const sourceNode = idOf(actualSourceNode);\n    const targetNode = idOf(actualTargetNode);\n    const ends = { sourceNode, targetNode };\n    if (edge.style) {\n        Object.assign(edge.style, ends);\n    }\n    else\n        edge.style = ends;\n    return edge;\n};\n//# sourceMappingURL=get-edge-actual-ends.js.map","import { deepMix, pick } from '@antv/util';\nimport { getNodeCentralities } from '../utils/centrality';\nimport { idOf } from '../utils/id';\nimport { getVerticalPadding } from '../utils/padding';\nimport { linear, log, pow, sqrt } from '../utils/scale';\nimport { parseSize } from '../utils/size';\nimport { BaseTransform } from './base-transform';\nimport { isStyleEqual, reassignTo } from './utils';\n/**\n * <zh/> 根据节点重要性调整节点的大小\n *\n * <en/> Map node size based on node importance\n * @remarks\n * <zh/> 在图可视化中，节点的大小通常用于传达节点的重要性或影响力。通过根据节点中心性调整节点的大小，我们可以更直观地展示网络中各个节点的重要性，从而帮助用户更好地理解和分析复杂的网络结构。\n *\n * <en/> In graph visualization, the size of a node is usually used to convey the importance or influence of the node. By adjusting the size of the node based on the centrality of the node, we can more intuitively show the importance of each node in the network, helping users better understand and analyze complex network structures.\n */\nexport class MapNodeSize extends BaseTransform {\n    constructor(context, options) {\n        super(context, deepMix({}, MapNodeSize.defaultOptions, options));\n        this.assignSizeByCentrality = (centrality, minCentrality, maxCentrality, minSize, maxSize, scale) => {\n            const domain = [minCentrality, maxCentrality];\n            const rangeX = [minSize[0], maxSize[0]];\n            const rangeY = [minSize[1], maxSize[1]];\n            const rangeZ = [minSize[2], maxSize[2]];\n            const interpolate = (centrality, range) => {\n                if (typeof scale === 'function') {\n                    return scale(centrality, domain, range);\n                }\n                switch (scale) {\n                    case 'linear':\n                        return linear(centrality, domain, range);\n                    case 'log':\n                        return log(centrality, domain, range);\n                    case 'pow':\n                        return pow(centrality, domain, range, 2);\n                    case 'sqrt':\n                        return sqrt(centrality, domain, range);\n                    default:\n                        return range[0];\n                }\n            };\n            return [interpolate(centrality, rangeX), interpolate(centrality, rangeY), interpolate(centrality, rangeZ)];\n        };\n    }\n    beforeDraw(input) {\n        const { model } = this.context;\n        const nodes = model.getNodeData();\n        const maxSize = parseSize(this.options.maxSize);\n        const minSize = parseSize(this.options.minSize);\n        const centralities = this.getCentralities(this.options.centrality);\n        const maxCentrality = centralities.size > 0 ? Math.max(...centralities.values()) : 0;\n        const minCentrality = centralities.size > 0 ? Math.min(...centralities.values()) : 0;\n        nodes.forEach((datum) => {\n            var _a;\n            const size = this.assignSizeByCentrality(centralities.get(idOf(datum)) || 0, minCentrality, maxCentrality, minSize, maxSize, this.options.scale);\n            const element = (_a = this.context.element) === null || _a === void 0 ? void 0 : _a.getElement(idOf(datum));\n            const style = { size };\n            this.assignLabelStyle(style, size, datum, element);\n            if (!element || !isStyleEqual(style, element.attributes)) {\n                reassignTo(input, element ? 'update' : 'add', 'node', deepMix(datum, { style }), true);\n            }\n        });\n        return input;\n    }\n    assignLabelStyle(style, size, datum, element) {\n        var _a;\n        const configStyle = element ? element.config.style : (_a = this.context.element) === null || _a === void 0 ? void 0 : _a.getElementComputedStyle('node', datum);\n        Object.assign(style, pick(configStyle, ['labelFontSize', 'labelLineHeight']));\n        if (this.options.mapLabelSize) {\n            const fontSize = this.getLabelSizeByNodeSize(size, Infinity, Number(style.labelFontSize));\n            Object.assign(style, {\n                labelFontSize: fontSize,\n                labelLineHeight: fontSize + getVerticalPadding(style.labelPadding),\n            });\n        }\n        return style;\n    }\n    getLabelSizeByNodeSize(size, defaultMaxFontSize, defaultMinFontSize) {\n        const fontSize = Math.min(...size) / 2;\n        const [minFontSize, maxFontSize] = !Array.isArray(this.options.mapLabelSize)\n            ? [defaultMinFontSize, defaultMaxFontSize]\n            : this.options.mapLabelSize;\n        return Math.min(maxFontSize, Math.max(fontSize, minFontSize));\n    }\n    getCentralities(centrality) {\n        const { model } = this.context;\n        const graphData = model.getData();\n        if (typeof centrality === 'function')\n            return centrality(graphData);\n        const getRelatedEdgesData = model.getRelatedEdgesData.bind(model);\n        return getNodeCentralities(graphData, getRelatedEdgesData, centrality);\n    }\n}\nMapNodeSize.defaultOptions = {\n    centrality: { type: 'degree' },\n    maxSize: 80,\n    minSize: 20,\n    scale: 'linear',\n    mapLabelSize: false,\n};\n//# sourceMappingURL=map-node-size.js.map","/**\n * <zh/> 将一个值从一个范围线性映射到另一个范围\n *\n * <en/> Linearly maps a value from one range to another range\n * @param value - <zh/> 需要映射的值 | <en/> The value to be mapped\n * @param domain - <zh/> 输入值的范围 [最小值, 最大值] | <en/> The input range [min, max]\n * @param range - <zh/> 输出值的范围 [最小值, 最大值] | <en/> The output range [min, max]\n * @returns <zh/> 映射后的值 | <en/> The mapped value\n */\nexport const linear = (value, domain, range) => {\n    const [d0, d1] = domain;\n    const [r0, r1] = range;\n    if (d1 === d0)\n        return r0;\n    const ratio = (value - d0) / (d1 - d0);\n    return r0 + ratio * (r1 - r0);\n};\n/**\n * <zh/> 将一个值从一个范围对数映射到另一个范围\n *\n * <en/> Logarithmically maps a value from one range to another range\n * @param value - <zh/> 需要映射的值 | <en/> The value to be mapped\n * @param domain - <zh/> 输入值的范围 [最小值, 最大值] | <en/> The input range [min, max]\n * @param range - <zh/> 输出值的范围 [最小值, 最大值] | <en/> The output range [min, max]\n * @returns <zh/> 映射后的值 | <en/> The mapped value\n */\nexport const log = (value, domain, range) => {\n    const [d0, d1] = domain;\n    const [r0, r1] = range;\n    const ratio = Math.log(value - d0 + 1) / Math.log(d1 - d0 + 1);\n    return r0 + ratio * (r1 - r0);\n};\n/**\n * <zh/> 将一个值从一个范围幂映射到另一个范围\n *\n * <en/> Maps a value from one range to another range\n * @param value - <zh/> 需要映射的值 | <en/> The value to be mapped\n * @param domain - <zh/> 输入值的范围 [最小值, 最大值] | <en/> The input range [min, max]\n * @param range - <zh/> 输出值的范围 [最小值, 最大值] | <en/> The output range [min, max]\n * @param exponent - <zh/> 幂指数 | <en/> The exponent\n * @returns <zh/> 映射后的值 | <en/> The mapped value\n */\nexport const pow = (value, domain, range, exponent = 2) => {\n    const [d0, d1] = domain;\n    const [r0, r1] = range;\n    const ratio = Math.pow((value - d0) / (d1 - d0), exponent);\n    return r0 + ratio * (r1 - r0);\n};\n/**\n * <zh/> 将一个值从一个范围平方根映射到另一个范围\n *\n * <en/> Maps a value from one range to another range using square root\n * @param value - <zh/> 需要映射的值 | <en/> The value to be mapped\n * @param domain - <zh/> 输入值的范围 [最小值, 最大值] | <en/> The input range [min, max]\n * @param range - <zh/> 输出值的范围 [最小值, 最大值] | <en/> The output range [min, max]\n * @returns <zh/> 映射后的值 | <en/> The mapped value\n */\nexport const sqrt = (value, domain, range) => {\n    const [d0, d1] = domain;\n    const [r0, r1] = range;\n    const ratio = Math.sqrt((value - d0) / (d1 - d0));\n    return r0 + ratio * (r1 - r0);\n};\n//# sourceMappingURL=scale.js.map","import { rad2deg } from '@antv/g';\nimport { idOf } from '../utils/id';\nimport { positionOf } from '../utils/position';\nimport { parseSize } from '../utils/size';\nimport { rad, subtract } from '../utils/vector';\nimport { BaseTransform } from './base-transform';\n/**\n * <zh/> 根据径向布局自动调整节点标签样式，包括位置和旋转角度\n *\n * <en/> Automatically adjust the style of node labels according to the radial layout, including position and rotation angle\n */\nexport class PlaceRadialLabels extends BaseTransform {\n    constructor(context, options) {\n        super(context, Object.assign({}, PlaceRadialLabels.defaultOptions, options));\n    }\n    get ref() {\n        return this.context.model.getRootsData()[0];\n    }\n    afterLayout() {\n        var _a;\n        const refPoint = positionOf(this.ref);\n        const { graph, model } = this.context;\n        const data = model.getData();\n        (_a = data.nodes) === null || _a === void 0 ? void 0 : _a.forEach((datum) => {\n            var _a;\n            if (idOf(datum) === idOf(this.ref))\n                return;\n            const radian = rad(subtract(positionOf(datum), refPoint));\n            const isLeft = Math.abs(radian) > Math.PI / 2;\n            const isLeaf = !datum.children || datum.children.length === 0;\n            const nodeId = idOf(datum);\n            const node = (_a = this.context.element) === null || _a === void 0 ? void 0 : _a.getElement(nodeId);\n            if (!node || !node.isVisible())\n                return;\n            const nodeHalfWidth = parseSize(graph.getElementRenderStyle(nodeId).size)[0] / 2;\n            const offset = (isLeaf ? 1 : -1) * (nodeHalfWidth + this.options.offset);\n            const labelTransform = [\n                ['translate', offset * Math.cos(radian), offset * Math.sin(radian)],\n                ['rotate', isLeft ? rad2deg(radian) + 180 : rad2deg(radian)],\n            ];\n            model.updateNodeData([\n                {\n                    id: idOf(datum),\n                    style: {\n                        labelTextAlign: isLeft === isLeaf ? 'right' : 'left',\n                        labelTextBaseline: 'middle',\n                        labelTransform,\n                    },\n                },\n            ]);\n        });\n        graph.draw();\n    }\n}\nPlaceRadialLabels.defaultOptions = {\n    offset: 5,\n};\n//# sourceMappingURL=place-radial-labels.js.map","import { isBoolean, isEmpty, isEqual, isFunction } from '@antv/util';\nimport { groupByChangeType, reduceDataChanges } from '../utils/change';\nimport { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\nimport { getEdgeEndsContext } from './get-edge-actual-ends';\nimport { isStyleEqual, reassignTo } from './utils';\nconst CUBIC_EDGE_TYPE = 'quadratic';\nconst CUBIC_LOOP_PLACEMENTS = [\n    'top',\n    'top-right',\n    'right',\n    'right-bottom',\n    'bottom',\n    'bottom-left',\n    'left',\n    'left-top',\n];\n/**\n * <zh/> 处理平行边，即多条边共享同一源节点和目标节点\n *\n * <en/> Process parallel edges which share the same source and target nodes\n * @remarks\n * <zh/> 平行边（Parallel Edges）是指在图结构中，两个节点之间存在多条边。这些边共享相同的源节点和目标节点，但可能代表不同的关系或属性。为了避免边的重叠和混淆，提供了两种处理平行边的方式：(1) 捆绑模式（bundle）：将平行边捆绑在一起，通过改变曲率与其他边分开；(2) 合并模式（merge）：将平行边合并为一条聚合。\n *\n * <en/> Parallel Edges refer to multiple edges existing between two nodes in a graph structure. These edges share the same source and target nodes but may represent different relationships or attributes. To avoid edge overlap and confusion, two methods are provided for handling parallel edges: (1) Bundle Mode: Bundles parallel edges together and separates them from other edges by altering their curvature; (2) Merge Mode: Merges parallel edges into a single aggregated edge.\n */\nexport class ProcessParallelEdges extends BaseTransform {\n    constructor(context, options) {\n        super(context, Object.assign({}, ProcessParallelEdges.defaultOptions, options));\n        this.cacheMergeStyle = new Map();\n        /**\n         * <zh/> 获取受影响的平行边\n         *\n         * <en/> Get affected parallel edges\n         * @param input\n         */\n        this.getAffectedParallelEdges = (input) => {\n            const { add: { edges: edgesToAdd }, update: { nodes: nodesToUpdate, edges: edgesToUpdate, combos: combosToUpdate }, remove: { edges: edgesToRemove }, } = input;\n            const { model } = this.context;\n            const edges = new Map();\n            const addRelatedEdges = (_, id) => {\n                const relatedEdgesData = model.getRelatedEdgesData(id);\n                relatedEdgesData.forEach((edge) => !edges.has(idOf(edge)) && edges.set(idOf(edge), edge));\n            };\n            nodesToUpdate.forEach(addRelatedEdges);\n            combosToUpdate.forEach(addRelatedEdges);\n            const pushParallelEdges = (edge) => {\n                const edgeData = model.getEdgeData().map((edge) => getEdgeEndsContext(model, edge));\n                const parallelEdges = getParallelEdges(edge, edgeData, true);\n                parallelEdges.forEach((e) => !edges.has(idOf(e)) && edges.set(idOf(e), e));\n            };\n            if (edgesToRemove.size)\n                edgesToRemove.forEach(pushParallelEdges);\n            if (edgesToAdd.size)\n                edgesToAdd.forEach(pushParallelEdges);\n            if (edgesToUpdate.size) {\n                const changes = groupByChangeType(reduceDataChanges(model.getChanges())).update.edges;\n                edgesToUpdate.forEach((edge) => {\n                    var _a;\n                    pushParallelEdges(edge);\n                    // 当边的端点发生变化时，将原始边及其平行边一并添加到更新列表 | Add the original edge and its parallel edges to the update list when the endpoints of the edge change\n                    const originalEdge = (_a = changes.find((e) => idOf(e.value) === idOf(edge))) === null || _a === void 0 ? void 0 : _a.original;\n                    if (originalEdge && !isParallelEdges(edge, originalEdge)) {\n                        pushParallelEdges(originalEdge);\n                    }\n                });\n            }\n            if (!isEmpty(this.options.edges)) {\n                edges.forEach((_, id) => !this.options.edges.includes(id) && edges.delete(id));\n            }\n            // 按照用户指定的顺序排序，防止捆绑时的抖动\n            // Sort by user-set order to prevent jitter during bundling\n            const edgeIds = model.getEdgeData().map(idOf);\n            return new Map([...edges].sort((a, b) => edgeIds.indexOf(a[0]) - edgeIds.indexOf(b[0])));\n        };\n        this.applyBundlingStyle = (input, edges, distance) => {\n            const { edgeMap, reverses } = groupByEndpoints(edges);\n            edgeMap.forEach((arcEdges) => {\n                arcEdges.forEach((edge, i, edgeArr) => {\n                    var _a;\n                    const length = edgeArr.length;\n                    const style = edge.style || {};\n                    if (edge.source === edge.target) {\n                        const len = CUBIC_LOOP_PLACEMENTS.length;\n                        style.loopPlacement = CUBIC_LOOP_PLACEMENTS[i % len];\n                        style.loopDist = Math.floor(i / len) * distance + 50;\n                    }\n                    else if (length === 1) {\n                        style.curveOffset = 0;\n                    }\n                    else {\n                        const sign = (i % 2 === 0 ? 1 : -1) * (reverses[`${edge.source}|${edge.target}|${i}`] ? -1 : 1);\n                        style.curveOffset =\n                            length % 2 === 1\n                                ? sign * Math.ceil(i / 2) * distance * 2\n                                : sign * (Math.floor(i / 2) * distance * 2 + distance);\n                    }\n                    const mergedEdgeData = Object.assign(edge, { type: CUBIC_EDGE_TYPE, style });\n                    const element = (_a = this.context.element) === null || _a === void 0 ? void 0 : _a.getElement(idOf(edge));\n                    if (!element || !isStyleEqual(mergedEdgeData.style, element.attributes)) {\n                        reassignTo(input, element ? 'update' : 'add', 'edge', mergedEdgeData, true);\n                    }\n                });\n            });\n        };\n        this.resetEdgeStyle = (edge) => {\n            const style = edge.style || {};\n            const cacheStyle = this.cacheMergeStyle.get(idOf(edge)) || {};\n            Object.keys(cacheStyle).forEach((key) => {\n                if (isEqual(style[key], cacheStyle[key])) {\n                    if (edge[key]) {\n                        style[key] = edge[key];\n                    }\n                    else {\n                        delete style[key];\n                    }\n                }\n            });\n            return Object.assign(edge, { style });\n        };\n        this.applyMergingStyle = (input, edges) => {\n            const { edgeMap, reverses } = groupByEndpoints(edges);\n            edgeMap.forEach((edges) => {\n                var _a;\n                if (edges.length === 1) {\n                    const edge = edges[0];\n                    const element = (_a = this.context.element) === null || _a === void 0 ? void 0 : _a.getElement(idOf(edge));\n                    const edgeStyle = this.resetEdgeStyle(edge);\n                    if (!element || !isStyleEqual(edgeStyle, element.attributes)) {\n                        reassignTo(input, element ? 'update' : 'add', 'edge', edgeStyle);\n                    }\n                    return;\n                }\n                const mergedStyle = edges\n                    .map(({ source, target, style = {} }, i) => {\n                    const { startArrow, endArrow } = style;\n                    const newStyle = {};\n                    const [start, end] = reverses[`${source}|${target}|${i}`]\n                        ? ['endArrow', 'startArrow']\n                        : ['startArrow', 'endArrow'];\n                    if (isBoolean(startArrow))\n                        newStyle[start] = startArrow;\n                    if (isBoolean(endArrow))\n                        newStyle[end] = endArrow;\n                    return newStyle;\n                })\n                    .reduce((acc, style) => (Object.assign(Object.assign({}, acc), style)), {});\n                edges.forEach((edge, i, edges) => {\n                    var _a;\n                    if (i !== 0) {\n                        reassignTo(input, 'remove', 'edge', edge);\n                        return;\n                    }\n                    const parsedStyle = Object.assign({}, isFunction(this.options.style) ? this.options.style(edges) : this.options.style, { childrenData: edges });\n                    this.cacheMergeStyle.set(idOf(edge), parsedStyle);\n                    const mergedEdgeData = Object.assign(Object.assign({}, edge), { type: 'line', style: Object.assign(Object.assign(Object.assign({}, edge.style), mergedStyle), parsedStyle) });\n                    const element = (_a = this.context.element) === null || _a === void 0 ? void 0 : _a.getElement(idOf(edge));\n                    if (!element || !isStyleEqual(mergedEdgeData.style, element.attributes)) {\n                        reassignTo(input, element ? 'update' : 'add', 'edge', mergedEdgeData, true);\n                    }\n                });\n            });\n        };\n    }\n    /**\n     * <zh/> 在每次绘制前处理平行边\n     *\n     * <en/> Process parallel edges before each drawing\n     * @param input\n     */\n    beforeDraw(input) {\n        const edges = this.getAffectedParallelEdges(input);\n        if (edges.size === 0)\n            return input;\n        this.options.mode === 'bundle'\n            ? this.applyBundlingStyle(input, edges, this.options.distance)\n            : this.applyMergingStyle(input, edges);\n        return input;\n    }\n}\nProcessParallelEdges.defaultOptions = {\n    mode: 'bundle',\n    distance: 15, // only valid for bundling mode\n};\n/**\n * <zh/> 优化的按照端点分组方法，时间复杂度O(n)\n *\n * <en/> Optimized method to group by endpoints, time complexity O(n)\n * @param edges - <zh/> 边集合 | <en/> Edges\n * @returns <zh/> 端点分组后的边集合 | <en/> Edges grouped by endpoints\n */\nexport const groupByEndpoints = (edges) => {\n    const edgeMap = new Map();\n    const processedEdgesSet = new Set();\n    const reverses = {};\n    const includedEdgesInGroup = new Map();\n    for (const [id, edge] of edges) {\n        if (processedEdgesSet.has(id))\n            continue;\n        const { source, target } = edge;\n        const sourceTarget = `${source}-${target}`;\n        if (!edgeMap.has(sourceTarget)) {\n            edgeMap.set(sourceTarget, []);\n            includedEdgesInGroup.set(sourceTarget, new Set());\n        }\n        const sourceTargetEdges = edgeMap.get(sourceTarget);\n        const includedEdges = includedEdgesInGroup.get(sourceTarget);\n        if (sourceTargetEdges && includedEdges && !includedEdges.has(id)) {\n            sourceTargetEdges.push(edge);\n            includedEdges.add(id);\n            processedEdgesSet.add(id);\n        }\n        for (const [otherId, sedge] of edges) {\n            if (processedEdgesSet.has(otherId) || otherId === id)\n                continue;\n            if (isParallelEdges(edge, sedge)) {\n                const groupEdges = edgeMap.get(sourceTarget);\n                const includedGroupEdges = includedEdgesInGroup.get(sourceTarget);\n                if (groupEdges && includedGroupEdges && !includedGroupEdges.has(otherId)) {\n                    groupEdges.push(sedge);\n                    includedGroupEdges.add(otherId);\n                    if (source === sedge.target && target === sedge.source) {\n                        reverses[`${sedge.source}|${sedge.target}|${groupEdges.length - 1}`] = true;\n                    }\n                    processedEdgesSet.add(otherId);\n                }\n            }\n        }\n    }\n    return { edgeMap, reverses };\n};\n/**\n * <zh/> 获取平行边\n *\n * <en/> Get parallel edges\n * @param edge - <zh/> 目标边 | <en/> Target edge\n * @param edges - <zh/> 边集合 | <en/> Edges\n * @param containsSelf - <zh/> 输出结果是否包含目标边 | <en/> Whether the output result contains the target edge\n * @returns <zh/> 平行边集合 | <en/> Parallel edges\n */\nexport const getParallelEdges = (edge, edges, containsSelf) => {\n    return edges.filter((e) => (containsSelf || idOf(e) !== idOf(edge)) && isParallelEdges(e, edge));\n};\n/**\n * <zh/> 判断两条边是否平行\n *\n * <en/> Determine whether two edges are parallel\n * @param edge1 - <zh/> 边1 | <en/> Edge 1\n * @param edge2 - <zh/> 边2 | <en/> Edge 2\n * @returns <zh/> 是否平行 | <en/> Whether is parallel\n */\nexport const isParallelEdges = (edge1, edge2) => {\n    const { sourceNode: src1, targetNode: tgt1 } = edge1.style || {};\n    const { sourceNode: src2, targetNode: tgt2 } = edge2.style || {};\n    return (src1 === src2 && tgt1 === tgt2) || (src1 === tgt2 && tgt1 === src2);\n};\n//# sourceMappingURL=process-parallel-edges.js.map","import { Circle as GCircle, Ellipse as GEllipse, Group as GGroup, HTML as GHTML, Line as GLine, Path as GPath, Polygon as GPolygon, Polyline as GPolyline, Rect as GRect, Text as GText, } from '@antv/g';\nimport { ComboCollapse, ComboExpand, Fade, NodeCollapse, NodeExpand, PathIn, PathOut, Translate } from '../animations';\nimport { AutoAdaptLabel, BrushSelect, ClickSelect, CollapseExpand, CreateEdge, DragCanvas, DragElement, DragElementForce, FixElementSize, FocusElement, HoverActivate, LassoSelect, OptimizeViewportTransform, ScrollCanvas, ZoomCanvas, } from '../behaviors';\nimport { Circle, CircleCombo, Cubic, CubicHorizontal, CubicRadial, CubicVertical, Diamond, Donut, Ellipse, HTML, Hexagon, Image, Line, Polyline, Quadratic, Rect, RectCombo, Star, Triangle, } from '../elements';\nimport { Badge as BadgeShape, Image as ImageShape, Label as LabelShape } from '../elements/shapes';\nimport { AntVDagreLayout, CircularLayout, ComboCombinedLayout, ConcentricLayout, D3ForceLayout, DagreLayout, FishboneLayout, ForceAtlas2Layout, ForceLayout, FruchtermanLayout, GridLayout, MDSLayout, RadialLayout, RandomLayout, SnakeLayout, compactBox, dendrogram, indented, mindmap, } from '../layouts';\nimport { blues, greens, oranges, spectral, tableau } from '../palettes';\nimport { Background, BubbleSets, Contextmenu, EdgeBundling, EdgeFilterLens, Fisheye, Fullscreen, GridLine, History, Hull, Legend, Minimap, Snapline, Timebar, Toolbar, Tooltip, Watermark, } from '../plugins';\nimport { dark, light } from '../themes';\nimport { ArrangeDrawOrder, CollapseExpandCombo, CollapseExpandNode, GetEdgeActualEnds, MapNodeSize, PlaceRadialLabels, ProcessParallelEdges, UpdateRelatedEdge, } from '../transforms';\n/**\n * <zh/> 内置插件统一在这里注册。\n * <en/> Built-in extensions are registered here.\n */\nconst BUILT_IN_EXTENSIONS = {\n    animation: {\n        'combo-collapse': ComboCollapse,\n        'combo-expand': ComboExpand,\n        'node-collapse': NodeCollapse,\n        'node-expand': NodeExpand,\n        'path-in': PathIn,\n        'path-out': PathOut,\n        fade: Fade,\n        translate: Translate,\n    },\n    behavior: {\n        'brush-select': BrushSelect,\n        'click-select': ClickSelect,\n        'collapse-expand': CollapseExpand,\n        'create-edge': CreateEdge,\n        'drag-canvas': DragCanvas,\n        'drag-element-force': DragElementForce,\n        'drag-element': DragElement,\n        'fix-element-size': FixElementSize,\n        'focus-element': FocusElement,\n        'hover-activate': HoverActivate,\n        'lasso-select': LassoSelect,\n        'auto-adapt-label': AutoAdaptLabel,\n        'optimize-viewport-transform': OptimizeViewportTransform,\n        'scroll-canvas': ScrollCanvas,\n        'zoom-canvas': ZoomCanvas,\n    },\n    combo: {\n        circle: CircleCombo,\n        rect: RectCombo,\n    },\n    edge: {\n        cubic: Cubic,\n        line: Line,\n        polyline: Polyline,\n        quadratic: Quadratic,\n        'cubic-horizontal': CubicHorizontal,\n        'cubic-radial': CubicRadial,\n        'cubic-vertical': CubicVertical,\n    },\n    layout: {\n        'antv-dagre': AntVDagreLayout,\n        'combo-combined': ComboCombinedLayout,\n        'compact-box': compactBox,\n        'd3-force': D3ForceLayout,\n        'force-atlas2': ForceAtlas2Layout,\n        circular: CircularLayout,\n        concentric: ConcentricLayout,\n        dagre: DagreLayout,\n        dendrogram,\n        fishbone: FishboneLayout,\n        force: ForceLayout,\n        fruchterman: FruchtermanLayout,\n        grid: GridLayout,\n        indented,\n        mds: MDSLayout,\n        mindmap,\n        radial: RadialLayout,\n        random: RandomLayout,\n        snake: SnakeLayout,\n    },\n    node: {\n        circle: Circle,\n        diamond: Diamond,\n        ellipse: Ellipse,\n        hexagon: Hexagon,\n        html: HTML,\n        image: Image,\n        rect: Rect,\n        star: Star,\n        donut: Donut,\n        triangle: Triangle,\n    },\n    palette: {\n        spectral,\n        tableau,\n        oranges,\n        greens,\n        blues,\n    },\n    theme: {\n        dark,\n        light,\n    },\n    plugin: {\n        'bubble-sets': BubbleSets,\n        'edge-bundling': EdgeBundling,\n        'edge-filter-lens': EdgeFilterLens,\n        'grid-line': GridLine,\n        background: Background,\n        contextmenu: Contextmenu,\n        fisheye: Fisheye,\n        fullscreen: Fullscreen,\n        history: History,\n        hull: Hull,\n        legend: Legend,\n        minimap: Minimap,\n        snapline: Snapline,\n        timebar: Timebar,\n        toolbar: Toolbar,\n        tooltip: Tooltip,\n        watermark: Watermark,\n    },\n    transform: {\n        'arrange-draw-order': ArrangeDrawOrder,\n        'collapse-expand-combo': CollapseExpandCombo,\n        'collapse-expand-node': CollapseExpandNode,\n        'get-edge-actual-ends': GetEdgeActualEnds,\n        'map-node-size': MapNodeSize,\n        'place-radial-labels': PlaceRadialLabels,\n        'process-parallel-edges': ProcessParallelEdges,\n        'update-related-edges': UpdateRelatedEdge,\n    },\n    shape: {\n        circle: GCircle,\n        ellipse: GEllipse,\n        group: GGroup,\n        html: GHTML,\n        image: ImageShape,\n        line: GLine,\n        path: GPath,\n        polygon: GPolygon,\n        polyline: GPolyline,\n        rect: GRect,\n        text: GText,\n        label: LabelShape,\n        badge: BadgeShape,\n    },\n};\nimport { register } from './register';\n/**\n * <zh/> 注册内置扩展\n *\n * <en/> Register built-in extensions\n */\nexport function registerBuiltInExtensions() {\n    Object.entries(BUILT_IN_EXTENSIONS).forEach(([category, extensions]) => {\n        Object.entries(extensions).forEach(([type, extension]) => {\n            register(category, type, extension);\n        });\n    });\n}\n//# sourceMappingURL=build-in.js.map","import { Path } from '@antv/g';\nimport { pointsToPath } from '../utils/path';\nimport { BrushSelect, getCursorPoint } from './brush-select';\n/**\n * <zh/> 套索选择交互\n *\n * <en/> Lasso select behavior\n * @remarks\n * <zh/> 用不规则多边形框选一组元素。\n *\n * <en/> Select a group of elements with an irregular polygon.\n */\nexport class LassoSelect extends BrushSelect {\n    /**\n     * Triggered when the mouse is pressed\n     * @param event - mouse event\n     * @internal\n     */\n    onPointerDown(event) {\n        if (!super.validate(event) || !super.isKeydown() || this.points)\n            return;\n        const { canvas } = this.context;\n        this.pathShape = new Path({\n            id: 'g6-lasso-select',\n            style: this.options.style,\n        });\n        canvas.appendChild(this.pathShape);\n        this.points = [getCursorPoint(event)];\n    }\n    /**\n     * Triggered when the mouse is moved\n     * @param event - mouse event\n     * @internal\n     */\n    onPointerMove(event) {\n        var _a;\n        if (!this.points)\n            return;\n        const { immediately, mode } = this.options;\n        this.points.push(getCursorPoint(event));\n        (_a = this.pathShape) === null || _a === void 0 ? void 0 : _a.setAttribute('d', pointsToPath(this.points));\n        if (immediately && mode === 'default' && this.points.length > 2)\n            super.updateElementsStates(this.points);\n    }\n    /**\n     * Triggered when the mouse is released\n     * @internal\n     */\n    onPointerUp() {\n        if (!this.points)\n            return;\n        if (this.points.length < 2) {\n            this.clearLasso();\n            return;\n        }\n        super.updateElementsStates(this.points);\n        this.clearLasso();\n    }\n    clearLasso() {\n        var _a;\n        (_a = this.pathShape) === null || _a === void 0 ? void 0 : _a.remove();\n        this.pathShape = undefined;\n        this.points = undefined;\n    }\n}\n//# sourceMappingURL=lasso-select.js.map","import { Circle as GCircle } from '@antv/g';\nimport { getBBoxSize } from '../../utils/bbox';\nimport { getEllipseIntersectPoint } from '../../utils/point';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { BaseCombo } from './base-combo';\n/**\n * <zh/> 圆形组合\n *\n * <en/> Circle combo\n */\nexport class CircleCombo extends BaseCombo {\n    constructor(options) {\n        super(options);\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GCircle, this.getKeyStyle(attributes), container);\n    }\n    getKeyStyle(attributes) {\n        const { collapsed } = attributes;\n        const keyStyle = super.getKeyStyle(attributes);\n        const [width] = this.getKeySize(attributes);\n        return Object.assign(Object.assign(Object.assign({}, keyStyle), (collapsed && subStyleProps(keyStyle, 'collapsed'))), { r: width / 2 });\n    }\n    getCollapsedKeySize(attributes) {\n        const [collapsedWidth, collapsedHeight] = parseSize(attributes.collapsedSize);\n        const collapsedR = Math.max(collapsedWidth, collapsedHeight) / 2;\n        return [collapsedR * 2, collapsedR * 2, 0];\n    }\n    getExpandedKeySize(attributes) {\n        const contentBBox = this.getContentBBox(attributes);\n        const [width, height] = getBBoxSize(contentBBox);\n        const expandedR = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) / 2;\n        return [expandedR * 2, expandedR * 2, 0];\n    }\n    getIntersectPoint(point, useExtendedLine = false) {\n        const keyShapeBounds = this.getShape('key').getBounds();\n        return getEllipseIntersectPoint(point, keyShapeBounds, useExtendedLine);\n    }\n}\n//# sourceMappingURL=circle.js.map","import { Rect as GRect } from '@antv/g';\nimport { subStyleProps } from '../../utils/prefix';\nimport { BaseCombo } from './base-combo';\n/**\n * <zh/> 矩形组合\n *\n * <en/> Rect combo\n */\nexport class RectCombo extends BaseCombo {\n    constructor(options) {\n        super(options);\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GRect, this.getKeyStyle(attributes), container);\n    }\n    getKeyStyle(attributes) {\n        const keyStyle = super.getKeyStyle(attributes);\n        const [width, height] = this.getKeySize(attributes);\n        return Object.assign(Object.assign(Object.assign({}, keyStyle), (attributes.collapsed && subStyleProps(keyStyle, 'collapsed'))), { width,\n            height, x: -width / 2, y: -height / 2 });\n    }\n}\n//# sourceMappingURL=rect.js.map","import { getDiamondPoints } from '../../utils/element';\nimport { Polygon } from '../shapes/polygon';\n/**\n * <zh/> 菱形节点\n *\n * <en/> Diamond node\n */\nexport class Diamond extends Polygon {\n    constructor(options) {\n        super(options);\n    }\n    getPoints(attributes) {\n        const [width, height] = this.getSize(attributes);\n        return getDiamondPoints(width, height);\n    }\n}\n//# sourceMappingURL=diamond.js.map","import { ICON_SIZE_RATIO } from '../../constants/element';\nimport { getHexagonPoints } from '../../utils/element';\nimport { Polygon } from '../shapes/polygon';\n/**\n * <zh/> 六边形节点\n *\n * <en/> Hexagon node\n */\nexport class Hexagon extends Polygon {\n    constructor(options) {\n        super(options);\n    }\n    getOuterR(attributes) {\n        return attributes.outerR || Math.min(...this.getSize(attributes)) / 2;\n    }\n    getPoints(attributes) {\n        return getHexagonPoints(this.getOuterR(attributes));\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const size = this.getOuterR(attributes) * ICON_SIZE_RATIO;\n        return style ? Object.assign({ width: size, height: size }, style) : false;\n    }\n}\n//# sourceMappingURL=hexagon.js.map","import { Rect as GRect } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { BaseNode } from './base-node';\n/**\n * <zh/> 矩形节点\n *\n * <en/> Rect node\n */\nexport class Rect extends BaseNode {\n    constructor(options) {\n        super(options);\n    }\n    getKeyStyle(attributes) {\n        const [width, height] = this.getSize(attributes);\n        return Object.assign(Object.assign({}, super.getKeyStyle(attributes)), { width,\n            height, x: -width / 2, y: -height / 2 });\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const { width, height } = this.getShape('key').attributes;\n        return style\n            ? Object.assign({ width: width * ICON_SIZE_RATIO, height: height * ICON_SIZE_RATIO }, style)\n            : false;\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GRect, this.getKeyStyle(attributes), container);\n    }\n}\n//# sourceMappingURL=rect.js.map","import { ICON_SIZE_RATIO } from '../../constants/element';\nimport { getPortXYByPlacement, getStarPoints, getStarPorts } from '../../utils/element';\nimport { Polygon } from '../shapes/polygon';\n/**\n * <zh/> 五角星节点\n *\n * <en/> Star node\n */\nexport class Star extends Polygon {\n    constructor(options) {\n        super(options);\n    }\n    getInnerR(attributes) {\n        return attributes.innerR || (this.getOuterR(attributes) * 3) / 8;\n    }\n    getOuterR(attributes) {\n        return Math.min(...this.getSize(attributes)) / 2;\n    }\n    getPoints(attributes) {\n        return getStarPoints(this.getOuterR(attributes), this.getInnerR(attributes));\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const size = this.getInnerR(attributes) * 2 * ICON_SIZE_RATIO;\n        return style ? Object.assign({ width: size, height: size }, style) : false;\n    }\n    getPortXY(attributes, style) {\n        const { placement = 'top' } = style;\n        const bbox = this.getShape('key').getLocalBounds();\n        const ports = getStarPorts(this.getOuterR(attributes), this.getInnerR(attributes));\n        return getPortXYByPlacement(bbox, placement, ports, false);\n    }\n}\n//# sourceMappingURL=star.js.map","/**\n * <zh/> 内置色板\n *\n * <en/> Built-in palettes\n */\nexport const spectral = [\n    'rgb(158, 1, 66)',\n    'rgb(213, 62, 79)',\n    'rgb(244, 109, 67)',\n    'rgb(253, 174, 97)',\n    'rgb(254, 224, 139)',\n    'rgb(255, 255, 191)',\n    'rgb(230, 245, 152)',\n    'rgb(171, 221, 164)',\n    'rgb(102, 194, 165)',\n    'rgb(50, 136, 189)',\n    'rgb(94, 79, 162)',\n];\nexport const tableau = [\n    'rgb(78, 121, 167)',\n    'rgb(242, 142, 44)',\n    'rgb(225, 87, 89)',\n    'rgb(118, 183, 178)',\n    'rgb(89, 161, 79)',\n    'rgb(237, 201, 73)',\n    'rgb(175, 122, 161)',\n    'rgb(255, 157, 167)',\n    'rgb(156, 117, 95)',\n    'rgb(186, 176, 171)',\n];\nexport const oranges = [\n    'rgb(255, 245, 235)',\n    'rgb(254, 230, 206)',\n    'rgb(253, 208, 162)',\n    'rgb(253, 174, 107)',\n    'rgb(253, 141, 60)',\n    'rgb(241, 105, 19)',\n    'rgb(217, 72, 1)',\n    'rgb(166, 54, 3)',\n    'rgb(127, 39, 4)',\n];\nexport const greens = [\n    'rgb(247, 252, 245)',\n    'rgb(229, 245, 224)',\n    'rgb(199, 233, 192)',\n    'rgb(161, 217, 155)',\n    'rgb(116, 196, 118)',\n    'rgb(65, 171, 93)',\n    'rgb(35, 139, 69)',\n    'rgb(0, 109, 44)',\n    'rgb(0, 68, 27)',\n];\nexport const blues = [\n    'rgb(247, 251, 255)',\n    'rgb(222, 235, 247)',\n    'rgb(198, 219, 239)',\n    'rgb(158, 202, 225)',\n    'rgb(107, 174, 214)',\n    'rgb(66, 146, 198)',\n    'rgb(33, 113, 181)',\n    'rgb(8, 81, 156)',\n    'rgb(8, 48, 107)',\n];\n//# sourceMappingURL=index.js.map","import { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\n/**\n * <zh/> 调整元素绘制顺序\n *\n * <en/> Adjust the drawing order of elements\n */\nexport class ArrangeDrawOrder extends BaseTransform {\n    beforeDraw(input) {\n        const { model } = this.context;\n        const combosToAdd = input.add.combos;\n        const arrangeCombo = (combos) => {\n            // id, data, zIndex\n            const order = [];\n            combos.forEach((combo, id) => {\n                const ancestors = model.getAncestorsData(id, 'combo');\n                const path = ancestors.map((ancestor) => idOf(ancestor)).reverse();\n                // combo 的 zIndex 为距离根 combo 的深度\n                // The zIndex of the combo is the depth from the root combo\n                order.push([id, combo, path.length]);\n            });\n            return new Map(order\n                // 基于 zIndex 降序排序，优先绘制子 combo / Sort based on zIndex in descending order, draw child combo first\n                .sort(([, , zIndex1], [, , zIndex2]) => zIndex2 - zIndex1)\n                .map(([id, datum]) => [id, datum]));\n        };\n        input.add.combos = arrangeCombo(combosToAdd);\n        input.update.combos = arrangeCombo(input.update.combos);\n        return input;\n    }\n}\n//# sourceMappingURL=arrange-draw-order.js.map","import { COMBO_KEY } from '../constants';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { getSubgraphRelatedEdges } from '../utils/edge';\nimport { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\nimport { reassignTo } from './utils';\n/**\n * <zh/> 处理组合的收起和展开\n *\n * <en/> Process the collapse and expand of combos\n */\nexport class CollapseExpandCombo extends BaseTransform {\n    beforeDraw(input, context) {\n        if (context.stage === 'visibility')\n            return input;\n        if (!this.context.model.model.hasTreeStructure(COMBO_KEY))\n            return input;\n        const { model } = this.context;\n        const { add, update } = input;\n        // combo 添加和更新的顺序为先子后父，因此采用倒序遍历\n        // The order of adding and updating combos is first child and then parent, so reverse traversal is used\n        const combos = [...input.update.combos.entries(), ...input.add.combos.entries()];\n        while (combos.length) {\n            const [id, combo] = combos.pop();\n            if (isCollapsed(combo)) {\n                const descendants = model.getDescendantsData(id);\n                const descendantIds = descendants.map(idOf);\n                const { internal, external } = getSubgraphRelatedEdges(descendantIds, (id) => model.getRelatedEdgesData(id));\n                // 移除所有后代元素 / Remove all descendant elements\n                descendants.forEach((descendant) => {\n                    const descendantId = idOf(descendant);\n                    // 不再处理当前 combo 的后代 combo\n                    // No longer process the descendant combo of the current combo\n                    const comboIndex = combos.findIndex(([id]) => id === descendantId);\n                    if (comboIndex !== -1)\n                        combos.splice(comboIndex, 1);\n                    const elementType = model.getElementType(descendantId);\n                    reassignTo(input, 'remove', elementType, descendant);\n                });\n                // 如果是内部边/节点 销毁\n                // If it is an internal edge/node, destroy it\n                internal.forEach((edge) => reassignTo(input, 'remove', 'edge', edge));\n                // 如果是外部边，连接到收起对象上\n                // If it is an external edge, connect to the collapsed object\n                external.forEach((edge) => {\n                    var _a;\n                    const id = idOf(edge);\n                    const edgeElement = (_a = this.context.element) === null || _a === void 0 ? void 0 : _a.getElement(id);\n                    if (edgeElement)\n                        update.edges.set(id, edge);\n                    else\n                        add.edges.set(id, edge);\n                });\n            }\n            else {\n                const children = model.getChildrenData(id);\n                const childrenIds = children.map(idOf);\n                const { edges } = getSubgraphRelatedEdges(childrenIds, (id) => model.getRelatedEdgesData(id));\n                [...children, ...edges].forEach((descendant) => {\n                    var _a;\n                    const id = idOf(descendant);\n                    const elementType = model.getElementType(id);\n                    const element = (_a = this.context.element) === null || _a === void 0 ? void 0 : _a.getElement(id);\n                    // 如果节点不存在，则添加到新增列表，如果存在，添加到更新列表\n                    // If the node does not exist, add it to the new list, if it exists, add it to the update list\n                    if (element)\n                        reassignTo(input, 'update', elementType, descendant);\n                    else\n                        reassignTo(input, 'add', elementType, descendant);\n                    // 继续展开子节点 / Continue to expand child nodes\n                    if (elementType === 'combo')\n                        combos.push([id, descendant]);\n                });\n            }\n        }\n        return input;\n    }\n}\n//# sourceMappingURL=collapse-expand-combo.js.map","import { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\n/**\n * 如果更新了节点 / combo，需要更新连接的边\n * If the node / combo is updated, the connected edge and the combo it is in need to be updated\n */\nexport class UpdateRelatedEdge extends BaseTransform {\n    beforeDraw(input, context) {\n        const { stage } = context;\n        if (stage === 'visibility')\n            return input;\n        const { model } = this.context;\n        const { update: { nodes, edges, combos }, } = input;\n        const addRelatedEdges = (_, id) => {\n            const relatedEdgesData = model.getRelatedEdgesData(id);\n            relatedEdgesData.forEach((edge) => !edges.has(idOf(edge)) && edges.set(idOf(edge), edge));\n        };\n        nodes.forEach(addRelatedEdges);\n        combos.forEach(addRelatedEdges);\n        return input;\n    }\n}\n//# sourceMappingURL=update-related-edge.js.map","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Hierarchy\"] = factory();\n\telse\n\t\troot[\"Hierarchy\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/**\n * Get average height or height for node's position calculation, according to align.\n * @param {*} preNode previous node\n * @param {*} node current node, whose position is going to be calculated\n * @param {'center' | undefined} align 'center' means nodes align at the center, other value means align at the left-top\n * @param {string} heightField field name for height value on preNode and node\n * @return {number} the height for calculation\n */\nfunction getHeight(preNode, node, align, heightField) {\n  if (heightField === void 0) {\n    heightField = 'height';\n  }\n  return align === 'center' ? (preNode[heightField] + node[heightField]) / 2 : preNode.height;\n}\nmodule.exports = {\n  assign: Object.assign,\n  getHeight: getHeight\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar hierarchy = __webpack_require__(3);\nvar Layout = /*#__PURE__*/function () {\n  function Layout(root, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var me = this;\n    me.options = options;\n    me.rootNode = hierarchy(root, options);\n  }\n  var _proto = Layout.prototype;\n  _proto.execute = function execute() {\n    throw new Error('please override this method');\n  };\n  return Layout;\n}();\nmodule.exports = Layout;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar separateTree = __webpack_require__(4);\nvar VALID_DIRECTIONS = ['LR',\n// left to right\n'RL',\n// right to left\n'TB',\n// top to bottom\n'BT',\n// bottom to top\n'H',\n// horizontal\n'V' // vertical\n];\nvar HORIZONTAL_DIRECTIONS = ['LR', 'RL', 'H'];\nvar isHorizontal = function isHorizontal(direction) {\n  return HORIZONTAL_DIRECTIONS.indexOf(direction) > -1;\n};\nvar DEFAULT_DIRECTION = VALID_DIRECTIONS[0];\nmodule.exports = function (root, options, layoutAlgrithm) {\n  var direction = options.direction || DEFAULT_DIRECTION;\n  options.isHorizontal = isHorizontal(direction);\n  if (direction && VALID_DIRECTIONS.indexOf(direction) === -1) {\n    throw new TypeError(\"Invalid direction: \" + direction);\n  }\n  if (direction === VALID_DIRECTIONS[0]) {\n    // LR\n    layoutAlgrithm(root, options);\n  } else if (direction === VALID_DIRECTIONS[1]) {\n    // RL\n    layoutAlgrithm(root, options);\n    root.right2left();\n  } else if (direction === VALID_DIRECTIONS[2]) {\n    // TB\n    layoutAlgrithm(root, options);\n  } else if (direction === VALID_DIRECTIONS[3]) {\n    // BT\n    layoutAlgrithm(root, options);\n    root.bottom2top();\n  } else if (direction === VALID_DIRECTIONS[4] || direction === VALID_DIRECTIONS[5]) {\n    // H or V\n    // separate into left and right trees\n    var _separateTree = separateTree(root, options),\n      left = _separateTree.left,\n      right = _separateTree.right;\n    // do layout for left and right trees\n    layoutAlgrithm(left, options);\n    layoutAlgrithm(right, options);\n    options.isHorizontal ? left.right2left() : left.bottom2top();\n    // combine left and right trees\n    right.translate(left.x - right.x, left.y - right.y);\n    // translate root\n    root.x = left.x;\n    root.y = right.y;\n    var bb = root.getBoundingBox();\n    if (options.isHorizontal) {\n      if (bb.top < 0) {\n        root.translate(0, -bb.top);\n      }\n    } else {\n      if (bb.left < 0) {\n        root.translate(-bb.left, 0);\n      }\n    }\n  }\n  // fixed root position, default value is true\n  var fixedRoot = options.fixedRoot;\n  if (fixedRoot === undefined) fixedRoot = true;\n  if (fixedRoot) {\n    root.translate(-(root.x + root.width / 2 + root.hgap), -(root.y + root.height / 2 + root.vgap));\n  }\n  reassignXYIfRadial(root, options);\n  return root;\n};\nfunction reassignXYIfRadial(root, options) {\n  if (options.radial) {\n    var _ref = options.isHorizontal ? [\"x\", \"y\"] : [\"y\", \"x\"],\n      rScale = _ref[0],\n      radScale = _ref[1];\n    var min = {\n      x: Infinity,\n      y: Infinity\n    };\n    var max = {\n      x: -Infinity,\n      y: -Infinity\n    };\n    var count = 0;\n    root.DFTraverse(function (node) {\n      count++;\n      var x = node.x,\n        y = node.y;\n      min.x = Math.min(min.x, x);\n      min.y = Math.min(min.y, y);\n      max.x = Math.max(max.x, x);\n      max.y = Math.max(max.y, y);\n    });\n    var radDiff = max[radScale] - min[radScale];\n    if (radDiff === 0) return;\n    var avgRad = Math.PI * 2 / count;\n    root.DFTraverse(function (node) {\n      var rad = (node[radScale] - min[radScale]) / radDiff * (Math.PI * 2 - avgRad) + avgRad;\n      var r = node[rScale] - root[rScale];\n      node.x = Math.cos(rad) * r;\n      node.y = Math.sin(rad) * r;\n    });\n  }\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* eslint-disable no-cond-assign */\nvar util = __webpack_require__(0);\nvar PEM = 18;\nvar DEFAULT_HEIGHT = PEM * 2;\nvar DEFAULT_GAP = PEM;\nvar DEFAULT_OPTIONS = {\n  getId: function getId(d) {\n    return d.id || d.name;\n  },\n  getPreH: function getPreH(d) {\n    return d.preH || 0;\n  },\n  getPreV: function getPreV(d) {\n    return d.preV || 0;\n  },\n  getHGap: function getHGap(d) {\n    return d.hgap || DEFAULT_GAP;\n  },\n  getVGap: function getVGap(d) {\n    return d.vgap || DEFAULT_GAP;\n  },\n  getChildren: function getChildren(d) {\n    return d.children;\n  },\n  getHeight: function getHeight(d) {\n    return d.height || DEFAULT_HEIGHT;\n  },\n  getWidth: function getWidth(d) {\n    var label = d.label || ' ';\n    return d.width || label.split('').length * PEM; // FIXME DO NOT get width like this\n  }\n};\nfunction Node(data, options) {\n  var me = this;\n  me.vgap = me.hgap = 0;\n  if (data instanceof Node) return data;\n  me.data = data;\n  /*\n   * Gaps: filling space between nodes\n   * (x, y) ----------------------\n   * |            vgap            |\n   * |    --------------------    h\n   * | h |                    |   e\n   * | g |                    |   i\n   * | a |                    |   g\n   * | p |                    |   h\n   * |   ---------------------    t\n   * |                            |\n   *  -----------width------------\n   */\n  var hgap = options.getHGap(data);\n  var vgap = options.getVGap(data);\n  me.preH = options.getPreH(data);\n  me.preV = options.getPreV(data);\n  me.width = options.getWidth(data);\n  me.height = options.getHeight(data);\n  me.width += me.preH;\n  me.height += me.preV;\n  me.id = options.getId(data);\n  me.x = me.y = 0;\n  me.depth = 0;\n  if (!me.children) {\n    me.children = [];\n  }\n  me.addGap(hgap, vgap);\n  return me;\n}\nutil.assign(Node.prototype, {\n  isRoot: function isRoot() {\n    return this.depth === 0;\n  },\n  isLeaf: function isLeaf() {\n    return this.children.length === 0;\n  },\n  addGap: function addGap(hgap, vgap) {\n    var me = this;\n    me.hgap += hgap;\n    me.vgap += vgap;\n    me.width += 2 * hgap;\n    me.height += 2 * vgap;\n  },\n  eachNode: function eachNode(callback) {\n    // Depth First traverse\n    var me = this;\n    var nodes = [me];\n    var current;\n    while (current = nodes.shift()) {\n      callback(current);\n      nodes = current.children.concat(nodes);\n    }\n  },\n  DFTraverse: function DFTraverse(callback) {\n    // Depth First traverse\n    this.eachNode(callback);\n  },\n  BFTraverse: function BFTraverse(callback) {\n    // Breadth First traverse\n    var me = this;\n    var nodes = [me];\n    var current;\n    while (current = nodes.shift()) {\n      callback(current);\n      nodes = nodes.concat(current.children);\n    }\n  },\n  getBoundingBox: function getBoundingBox() {\n    // BBox for just one tree node\n    var bb = {\n      left: Number.MAX_VALUE,\n      top: Number.MAX_VALUE,\n      width: 0,\n      height: 0\n    };\n    this.eachNode(function (node) {\n      bb.left = Math.min(bb.left, node.x);\n      bb.top = Math.min(bb.top, node.y);\n      bb.width = Math.max(bb.width, node.x + node.width);\n      bb.height = Math.max(bb.height, node.y + node.height);\n    });\n    return bb;\n  },\n  // translate\n  translate: function translate(tx, ty) {\n    if (tx === void 0) {\n      tx = 0;\n    }\n    if (ty === void 0) {\n      ty = 0;\n    }\n    this.eachNode(function (node) {\n      node.x += tx;\n      node.y += ty;\n      node.x += node.preH;\n      node.y += node.preV;\n    });\n  },\n  right2left: function right2left() {\n    var me = this;\n    var bb = me.getBoundingBox();\n    me.eachNode(function (node) {\n      node.x = node.x - (node.x - bb.left) * 2 - node.width;\n      // node.x = - node.x;\n    });\n    me.translate(bb.width, 0);\n  },\n  bottom2top: function bottom2top() {\n    var me = this;\n    var bb = me.getBoundingBox();\n    me.eachNode(function (node) {\n      node.y = node.y - (node.y - bb.top) * 2 - node.height;\n      // node.y = - node.y;\n    });\n    me.translate(0, bb.height);\n  }\n});\nfunction hierarchy(data, options, isolated) {\n  if (options === void 0) {\n    options = {};\n  }\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  var root = new Node(data, options);\n  var nodes = [root];\n  var node;\n  if (!isolated && !data.collapsed) {\n    while (node = nodes.shift()) {\n      if (!node.data.collapsed) {\n        var children = options.getChildren(node.data);\n        var length = children ? children.length : 0;\n        node.children = new Array(length);\n        if (children && length) {\n          for (var i = 0; i < length; i++) {\n            var child = new Node(children[i], options);\n            node.children[i] = child;\n            nodes.push(child);\n            child.parent = node;\n            child.depth = node.depth + 1;\n          }\n        }\n      }\n    }\n  }\n  return root;\n}\nmodule.exports = hierarchy;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar hierarchy = __webpack_require__(3);\nmodule.exports = function (root, options) {\n  // separate into left and right trees\n  var left = hierarchy(root.data, options, true); // root only\n  var right = hierarchy(root.data, options, true); // root only\n  // automatically\n  var treeSize = root.children.length;\n  var rightTreeSize = Math.round(treeSize / 2);\n  // separate left and right tree by meta data\n  var getSide = options.getSide || function (child, index) {\n    if (index < rightTreeSize) {\n      return 'right';\n    }\n    return 'left';\n  };\n  for (var i = 0; i < treeSize; i++) {\n    var child = root.children[i];\n    var side = getSide(child, i);\n    if (side === 'right') {\n      right.children.push(child);\n    } else {\n      left.children.push(child);\n    }\n  }\n  left.eachNode(function (node) {\n    if (!node.isRoot()) {\n      node.side = 'left';\n    }\n  });\n  right.eachNode(function (node) {\n    if (!node.isRoot()) {\n      node.side = 'right';\n    }\n  });\n  return {\n    left: left,\n    right: right\n  };\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar hierarchy = {\n  compactBox: __webpack_require__(6),\n  dendrogram: __webpack_require__(8),\n  indented: __webpack_require__(10),\n  mindmap: __webpack_require__(12)\n};\nmodule.exports = hierarchy;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nvar TreeLayout = __webpack_require__(1);\nvar nonLayeredTidyTree = __webpack_require__(7);\nvar doTreeLayout = __webpack_require__(2);\nvar util = __webpack_require__(0);\nvar CompactBoxTreeLayout = /*#__PURE__*/function (_TreeLayout) {\n  function CompactBoxTreeLayout() {\n    return _TreeLayout.apply(this, arguments) || this;\n  }\n  _inheritsLoose(CompactBoxTreeLayout, _TreeLayout);\n  var _proto = CompactBoxTreeLayout.prototype;\n  _proto.execute = function execute() {\n    var me = this;\n    return doTreeLayout(me.rootNode, me.options, nonLayeredTidyTree);\n  };\n  return CompactBoxTreeLayout;\n}(TreeLayout);\nvar DEFAULT_OPTIONS = {};\nfunction compactBoxLayout(root, options) {\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  return new CompactBoxTreeLayout(root, options).execute();\n}\nmodule.exports = compactBoxLayout;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n// wrap tree node\nfunction WrappedTree(w, h, y, c) {\n  if (c === void 0) {\n    c = [];\n  }\n  var me = this;\n  // size\n  me.w = w || 0;\n  me.h = h || 0;\n\n  // position\n  me.y = y || 0;\n  me.x = 0;\n\n  // children\n  me.c = c || [];\n  me.cs = c.length;\n\n  // modified\n  me.prelim = 0;\n  me.mod = 0;\n  me.shift = 0;\n  me.change = 0;\n\n  // left/right tree\n  me.tl = null;\n  me.tr = null;\n\n  // extreme left/right tree\n  me.el = null;\n  me.er = null;\n\n  // modified left/right tree\n  me.msel = 0;\n  me.mser = 0;\n}\nWrappedTree.fromNode = function (root, isHorizontal) {\n  if (!root) return null;\n  var children = [];\n  root.children.forEach(function (child) {\n    children.push(WrappedTree.fromNode(child, isHorizontal));\n  });\n  if (isHorizontal) return new WrappedTree(root.height, root.width, root.x, children);\n  return new WrappedTree(root.width, root.height, root.y, children);\n};\n\n// node utils\nfunction moveRight(node, move, isHorizontal) {\n  if (isHorizontal) {\n    node.y += move;\n  } else {\n    node.x += move;\n  }\n  node.children.forEach(function (child) {\n    moveRight(child, move, isHorizontal);\n  });\n}\nfunction getMin(node, isHorizontal) {\n  var res = isHorizontal ? node.y : node.x;\n  node.children.forEach(function (child) {\n    res = Math.min(getMin(child, isHorizontal), res);\n  });\n  return res;\n}\nfunction normalize(node, isHorizontal) {\n  var min = getMin(node, isHorizontal);\n  moveRight(node, -min, isHorizontal);\n}\nfunction convertBack(converted /* WrappedTree */, root /* TreeNode */, isHorizontal) {\n  if (isHorizontal) {\n    root.y = converted.x;\n  } else {\n    root.x = converted.x;\n  }\n  converted.c.forEach(function (child, i) {\n    convertBack(child, root.children[i], isHorizontal);\n  });\n}\nfunction layer(node, isHorizontal, d) {\n  if (d === void 0) {\n    d = 0;\n  }\n  if (isHorizontal) {\n    node.x = d;\n    d += node.width;\n  } else {\n    node.y = d;\n    d += node.height;\n  }\n  node.children.forEach(function (child) {\n    layer(child, isHorizontal, d);\n  });\n}\nmodule.exports = function (root, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var isHorizontal = options.isHorizontal;\n  function firstWalk(t) {\n    if (t.cs === 0) {\n      setExtremes(t);\n      return;\n    }\n    firstWalk(t.c[0]);\n    var ih = updateIYL(bottom(t.c[0].el), 0, null);\n    for (var i = 1; i < t.cs; ++i) {\n      firstWalk(t.c[i]);\n      var min = bottom(t.c[i].er);\n      separate(t, i, ih);\n      ih = updateIYL(min, i, ih);\n    }\n    positionRoot(t);\n    setExtremes(t);\n  }\n  function setExtremes(t) {\n    if (t.cs === 0) {\n      t.el = t;\n      t.er = t;\n      t.msel = t.mser = 0;\n    } else {\n      t.el = t.c[0].el;\n      t.msel = t.c[0].msel;\n      t.er = t.c[t.cs - 1].er;\n      t.mser = t.c[t.cs - 1].mser;\n    }\n  }\n  function separate(t, i, ih) {\n    var sr = t.c[i - 1];\n    var mssr = sr.mod;\n    var cl = t.c[i];\n    var mscl = cl.mod;\n    while (sr !== null && cl !== null) {\n      if (bottom(sr) > ih.low) ih = ih.nxt;\n      var dist = mssr + sr.prelim + sr.w - (mscl + cl.prelim);\n      if (dist > 0) {\n        mscl += dist;\n        moveSubtree(t, i, ih.index, dist);\n      }\n      var sy = bottom(sr);\n      var cy = bottom(cl);\n      if (sy <= cy) {\n        sr = nextRightContour(sr);\n        if (sr !== null) mssr += sr.mod;\n      }\n      if (sy >= cy) {\n        cl = nextLeftContour(cl);\n        if (cl !== null) mscl += cl.mod;\n      }\n    }\n    if (!sr && !!cl) {\n      setLeftThread(t, i, cl, mscl);\n    } else if (!!sr && !cl) {\n      setRightThread(t, i, sr, mssr);\n    }\n  }\n  function moveSubtree(t, i, si, dist) {\n    t.c[i].mod += dist;\n    t.c[i].msel += dist;\n    t.c[i].mser += dist;\n    distributeExtra(t, i, si, dist);\n  }\n  function nextLeftContour(t) {\n    return t.cs === 0 ? t.tl : t.c[0];\n  }\n  function nextRightContour(t) {\n    return t.cs === 0 ? t.tr : t.c[t.cs - 1];\n  }\n  function bottom(t) {\n    return t.y + t.h;\n  }\n  function setLeftThread(t, i, cl, modsumcl) {\n    var li = t.c[0].el;\n    li.tl = cl;\n    var diff = modsumcl - cl.mod - t.c[0].msel;\n    li.mod += diff;\n    li.prelim -= diff;\n    t.c[0].el = t.c[i].el;\n    t.c[0].msel = t.c[i].msel;\n  }\n  function setRightThread(t, i, sr, modsumsr) {\n    var ri = t.c[i].er;\n    ri.tr = sr;\n    var diff = modsumsr - sr.mod - t.c[i].mser;\n    ri.mod += diff;\n    ri.prelim -= diff;\n    t.c[i].er = t.c[i - 1].er;\n    t.c[i].mser = t.c[i - 1].mser;\n  }\n  function positionRoot(t) {\n    t.prelim = (t.c[0].prelim + t.c[0].mod + t.c[t.cs - 1].mod + t.c[t.cs - 1].prelim + t.c[t.cs - 1].w) / 2 - t.w / 2;\n  }\n  function secondWalk(t, modsum) {\n    modsum += t.mod;\n    t.x = t.prelim + modsum;\n    addChildSpacing(t);\n    for (var i = 0; i < t.cs; i++) {\n      secondWalk(t.c[i], modsum);\n    }\n  }\n  function distributeExtra(t, i, si, dist) {\n    if (si !== i - 1) {\n      var nr = i - si;\n      t.c[si + 1].shift += dist / nr;\n      t.c[i].shift -= dist / nr;\n      t.c[i].change -= dist - dist / nr;\n    }\n  }\n  function addChildSpacing(t) {\n    var d = 0;\n    var modsumdelta = 0;\n    for (var i = 0; i < t.cs; i++) {\n      d += t.c[i].shift;\n      modsumdelta += d + t.c[i].change;\n      t.c[i].mod += modsumdelta;\n    }\n  }\n  function updateIYL(low, index, ih) {\n    while (ih !== null && low >= ih.low) {\n      ih = ih.nxt;\n    }\n    return {\n      low: low,\n      index: index,\n      nxt: ih\n    };\n  }\n\n  // do layout\n  layer(root, isHorizontal);\n  var wt = WrappedTree.fromNode(root, isHorizontal);\n  firstWalk(wt);\n  secondWalk(wt, 0);\n  convertBack(wt, root, isHorizontal);\n  normalize(root, isHorizontal);\n  return root;\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nvar TreeLayout = __webpack_require__(1);\nvar dendrogram = __webpack_require__(9);\nvar doTreeLayout = __webpack_require__(2);\nvar util = __webpack_require__(0);\nvar DendrogramLayout = /*#__PURE__*/function (_TreeLayout) {\n  function DendrogramLayout() {\n    return _TreeLayout.apply(this, arguments) || this;\n  }\n  _inheritsLoose(DendrogramLayout, _TreeLayout);\n  var _proto = DendrogramLayout.prototype;\n  _proto.execute = function execute() {\n    var me = this;\n    me.rootNode.width = 0;\n    return doTreeLayout(me.rootNode, me.options, dendrogram);\n  };\n  return DendrogramLayout;\n}(TreeLayout);\nvar DEFAULT_OPTIONS = {};\nfunction dendrogramLayout(root, options) {\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  return new DendrogramLayout(root, options).execute();\n}\nmodule.exports = dendrogramLayout;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// wrap tree node\n// TODO considering size\nvar util = __webpack_require__(0);\nfunction WrappedTree(height, children) {\n  if (height === void 0) {\n    height = 0;\n  }\n  if (children === void 0) {\n    children = [];\n  }\n  var me = this;\n  me.x = me.y = 0;\n  me.leftChild = me.rightChild = null;\n  me.height = 0;\n  me.children = children;\n}\nvar DEFAULT_OPTIONS = {\n  isHorizontal: true,\n  nodeSep: 20,\n  nodeSize: 20,\n  rankSep: 200,\n  subTreeSep: 10\n};\nfunction convertBack(converted /* WrappedTree */, root /* TreeNode */, isHorizontal) {\n  if (isHorizontal) {\n    root.x = converted.x;\n    root.y = converted.y;\n  } else {\n    root.x = converted.y;\n    root.y = converted.x;\n  }\n  converted.children.forEach(function (child, i) {\n    convertBack(child, root.children[i], isHorizontal);\n  });\n}\nmodule.exports = function (root, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  var maxDepth = 0;\n  function wrappedTreeFromNode(n) {\n    if (!n) return null;\n    n.width = 0;\n    if (n.depth && n.depth > maxDepth) {\n      maxDepth = n.depth; // get the max depth\n    }\n    var children = n.children;\n    var childrenCount = children.length;\n    var t = new WrappedTree(n.height, []);\n    children.forEach(function (child, i) {\n      var childWT = wrappedTreeFromNode(child);\n      t.children.push(childWT);\n      if (i === 0) {\n        // t.leftChild = childWT.leftChild ? childWT.leftChild : childWT\n        t.leftChild = childWT;\n      }\n      if (i === childrenCount - 1) {\n        // t.rightChild = childWT.rightChild ? childWT.rightChild : childWT\n        t.rightChild = childWT;\n      }\n    });\n    t.originNode = n;\n    t.isLeaf = n.isLeaf();\n    return t;\n  }\n  function getDrawingDepth(t) {\n    if (t.isLeaf || t.children.length === 0) {\n      t.drawingDepth = maxDepth;\n    } else {\n      var depths = t.children.map(function (child) {\n        return getDrawingDepth(child);\n      });\n      var minChildDepth = Math.min.apply(null, depths);\n      t.drawingDepth = minChildDepth - 1;\n    }\n    return t.drawingDepth;\n  }\n  var prevLeaf;\n  function position(t) {\n    t.x = t.drawingDepth * options.rankSep;\n    if (t.isLeaf) {\n      t.y = 0;\n      if (prevLeaf) {\n        t.y = prevLeaf.y + prevLeaf.height + options.nodeSep;\n        if (t.originNode.parent !== prevLeaf.originNode.parent) {\n          t.y += options.subTreeSep;\n        }\n      }\n      prevLeaf = t;\n    } else {\n      t.children.forEach(function (child) {\n        position(child);\n      });\n      t.y = (t.leftChild.y + t.rightChild.y) / 2;\n    }\n  }\n\n  // wrap node\n  var wt = wrappedTreeFromNode(root);\n  // get depth for drawing\n  getDrawingDepth(wt);\n  // get position\n  position(wt);\n  // get x, y\n  convertBack(wt, root, options.isHorizontal);\n  return root;\n};\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nvar TreeLayout = __webpack_require__(1);\nvar indentedTree = __webpack_require__(11);\nvar separateTree = __webpack_require__(4);\nvar util = __webpack_require__(0);\nvar VALID_DIRECTIONS = ['LR',\n// left to right\n'RL',\n// right to left\n'H' // horizontal\n];\nvar DEFAULT_DIRECTION = VALID_DIRECTIONS[0];\nvar IndentedLayout = /*#__PURE__*/function (_TreeLayout) {\n  function IndentedLayout() {\n    return _TreeLayout.apply(this, arguments) || this;\n  }\n  _inheritsLoose(IndentedLayout, _TreeLayout);\n  var _proto = IndentedLayout.prototype;\n  _proto.execute = function execute() {\n    var me = this;\n    var options = me.options;\n    var root = me.rootNode;\n    options.isHorizontal = true;\n    // default indent 20 and sink first children;\n    var _options$indent = options.indent,\n      indent = _options$indent === void 0 ? 20 : _options$indent,\n      _options$dropCap = options.dropCap,\n      dropCap = _options$dropCap === void 0 ? true : _options$dropCap,\n      _options$direction = options.direction,\n      direction = _options$direction === void 0 ? DEFAULT_DIRECTION : _options$direction,\n      align = options.align;\n    if (direction && VALID_DIRECTIONS.indexOf(direction) === -1) {\n      throw new TypeError(\"Invalid direction: \" + direction);\n    }\n    if (direction === VALID_DIRECTIONS[0]) {\n      // LR\n      indentedTree(root, indent, dropCap, align);\n    } else if (direction === VALID_DIRECTIONS[1]) {\n      // RL\n      indentedTree(root, indent, dropCap, align);\n      root.right2left();\n    } else if (direction === VALID_DIRECTIONS[2]) {\n      // H\n      // separate into left and right trees\n      var _separateTree = separateTree(root, options),\n        left = _separateTree.left,\n        right = _separateTree.right;\n      indentedTree(left, indent, dropCap, align);\n      left.right2left();\n      indentedTree(right, indent, dropCap, align);\n      var bbox = left.getBoundingBox();\n      right.translate(bbox.width, 0);\n      root.x = right.x - root.width / 2;\n    }\n    return root;\n  };\n  return IndentedLayout;\n}(TreeLayout);\nvar DEFAULT_OPTIONS = {};\nfunction indentedLayout(root, options) {\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  return new IndentedLayout(root, options).execute();\n}\nmodule.exports = indentedLayout;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\nfunction positionNode(node, previousNode, indent, dropCap, align) {\n  //  caculate the node's horizontal offset DX, dx's type might be number or function\n  var displacementX = (typeof indent === \"function\" ? indent(node) : indent) * node.depth;\n  if (!dropCap) {\n    try {\n      if (node.id === node.parent.children[0].id) {\n        node.x += displacementX;\n        node.y = previousNode ? previousNode.y : 0;\n        return;\n      }\n    } catch (e) {\n      // skip to normal when a node has no parent\n    }\n  }\n  node.x += displacementX;\n  if (previousNode) {\n    node.y = previousNode.y + util.getHeight(previousNode, node, align);\n    if (previousNode.parent && node.parent.id !== previousNode.parent.id) {\n      // previous node has different parent\n      var prevParent = previousNode.parent;\n      var preY = prevParent.y + util.getHeight(prevParent, node, align);\n      node.y = preY > node.y ? preY : node.y;\n    }\n  } else {\n    node.y = 0;\n  }\n  return;\n}\nmodule.exports = function (root, indent, dropCap, align) {\n  var previousNode = null;\n  root.eachNode(function (node) {\n    positionNode(node, previousNode, indent, dropCap, align);\n    previousNode = node;\n  });\n};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nvar TreeLayout = __webpack_require__(1);\nvar mindmap = __webpack_require__(13);\nvar doTreeLayout = __webpack_require__(2);\nvar util = __webpack_require__(0);\nvar MindmapLayout = /*#__PURE__*/function (_TreeLayout) {\n  function MindmapLayout() {\n    return _TreeLayout.apply(this, arguments) || this;\n  }\n  _inheritsLoose(MindmapLayout, _TreeLayout);\n  var _proto = MindmapLayout.prototype;\n  _proto.execute = function execute() {\n    var me = this;\n    return doTreeLayout(me.rootNode, me.options, mindmap);\n  };\n  return MindmapLayout;\n}(TreeLayout);\nvar DEFAULT_OPTIONS = {};\nfunction mindmapLayout(root, options) {\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  return new MindmapLayout(root, options).execute();\n}\nmodule.exports = mindmapLayout;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\nfunction secondWalk(node, options) {\n  var totalHeight = 0;\n  if (!node.children.length) {\n    totalHeight = node.height;\n  } else {\n    node.children.forEach(function (c) {\n      totalHeight += secondWalk(c, options);\n    });\n  }\n  node._subTreeSep = options.getSubTreeSep(node.data);\n  node.totalHeight = Math.max(node.height, totalHeight) + 2 * node._subTreeSep;\n  return node.totalHeight;\n}\nfunction thirdWalk(node) {\n  var children = node.children;\n  var len = children.length;\n  if (len) {\n    children.forEach(function (c) {\n      thirdWalk(c);\n    });\n    var first = children[0];\n    var last = children[len - 1];\n    var childrenHeight = last.y - first.y + last.height;\n    var childrenTotalHeight = 0;\n    children.forEach(function (child) {\n      childrenTotalHeight += child.totalHeight;\n    });\n    if (childrenHeight > node.height) {\n      // 当子节点总高度大于父节点高度\n      node.y = first.y + childrenHeight / 2 - node.height / 2;\n    } else if (children.length !== 1 || node.height > childrenTotalHeight) {\n      // 多于一个子节点或者父节点大于所有子节点的总高度\n      var offset = node.y + (node.height - childrenHeight) / 2 - first.y;\n      children.forEach(function (c) {\n        c.translate(0, offset);\n      });\n    } else {\n      // 只有一个子节点\n      node.y = (first.y + first.height / 2 + last.y + last.height / 2) / 2 - node.height / 2;\n    }\n  }\n}\nvar DEFAULT_OPTIONS = {\n  getSubTreeSep: function getSubTreeSep() {\n    return 0;\n  }\n};\nmodule.exports = function (root, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  root.parent = {\n    x: 0,\n    width: 0,\n    height: 0,\n    y: 0\n  };\n  // first walk\n  root.BFTraverse(function (node) {\n    node.x = node.parent.x + node.parent.width; // simply get x\n  });\n  root.parent = null;\n  // second walk\n  secondWalk(root, options); // assign sub tree totalHeight\n  // adjusting\n  // separating nodes\n  root.startY = 0;\n  root.y = root.totalHeight / 2 - root.height / 2;\n  root.eachNode(function (node) {\n    var children = node.children;\n    var len = children.length;\n    if (len) {\n      var first = children[0];\n      first.startY = node.startY + node._subTreeSep;\n      if (len === 1) {\n        first.y = node.y + node.height / 2 - first.height / 2;\n      } else {\n        first.y = first.startY + first.totalHeight / 2 - first.height / 2;\n        for (var i = 1; i < len; i++) {\n          var c = children[i];\n          c.startY = children[i - 1].startY + children[i - 1].totalHeight;\n          c.y = c.startY + c.totalHeight / 2 - c.height / 2;\n        }\n      }\n    }\n  });\n\n  // third walk\n  thirdWalk(root);\n};\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=hierarchy.js.map","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\n\nmodule.exports = mapValues;\n"],"names":["DEFAULT_ANIMATION_OPTIONS","duration","DEFAULT_ELEMENTS_ANIMATION_OPTIONS","easing","iterations","fill","ChangeType","AnimationType","CanvasEvent","ComboEvent","CommonEvent","ContainerEvent","EdgeEvent","HistoryEvent","NodeEvent","GraphEvent","COMBO_KEY","TREE_KEY","ExtensionCategory","animation","behavior","combo","edge","layout","node","palette","theme","plugin","transform","shape","getExtension","category","type","_a","extension","format","message","print","mute","debug","console","info","warn","error","themeOf","options","themeOptions","THEME","createAnimationsProxy","args1","args2","Array","isArray","length","sourceAnimation","targetAnimations","slice","Proxy","get","target","propKey","includes","Promise","all","finished","map","Reflect","args","forEach","call","set","value","preprocessKeyframes","keyframes","propertyIndexedKeyframes","reduce","acc","kf","Object","entries","key","undefined","push","values","some","every","output","index","_","inferDefaultValue","name","getAnimationOptions","localAnimation","effectTiming","assign","getElementAnimationOptions","elementType","stage","_b","globalAnimation","userElementAnimation","useElementStageAnimation","themeElementAnimation","combine","ANIMATION","animationOf","themeElementStageAnimation","replaceTranslateInTransform","x","y","z","translateIndex","newTransform","i","t","splice","removedTranslate","replace","__rest","s","e","p","prototype","hasOwnProperty","indexOf","getOwnPropertySymbols","propertyIsEnumerable","executor","element","originalStyle","modifiedStyle","mainResult","subResults","fields","shapeID","states","enabledStates","keyframeStyle","getShape","styler","bind","attrs","fromStyle","toStyle","getKeyframeStyle","attr","keyframe","keys","attributes","_c","result","animate","filter","Boolean","NodeCollapse","NodeExpand","PathIn","PathOut","ComboCollapse","ComboExpand","data","condition","predicate","item","isPoint","Float32Array","elem","isBetween","min","max","parsePadding","padding","top","right","bottom","left","getVerticalPadding","parsedPadding","getBBoxWidth","bbox","getBBoxHeight","getBBoxSize","getNodeBBox","getPointBBox","getBounds","getExpandedBBox","point","setMinMax","minX","minY","minZ","maxX","maxY","maxZ","eBbox","getCombinedBBox","bboxes","b2","Math","isPointInBBox","isPointOnBBoxBoundary","extended","onTopOrBottomLine","onLeftOrRightLine","isPointBBoxCenter","center","getNearestBoundarySide","getNearestBoundaryPoint","ref","clone","defaultComparator","a","b","LinkedListNode","next","this","toString","callback","concat","LinkedList","comparator","head","tail","compare","prepend","newNode","append","delete","deleteNode","currentNode","find","deleteTail","deletedTail","deleteHead","deletedHead","fromArray","_this","toArray","nodes","reverse","prevNode","nextNode","getNeighbors","Queue","linkedList","isEmpty","peek","enqueue","dequeue","removeHead","nodeId","edges","currentEdges","source","getEdgesByNodeId","degree","graphData","degrees","id","inDegree","outDegree","elements","func","len","k","arrPrototype","str","Number","isInteger","PI","obj","rst","l","f","resolver","TypeError","memoized","_i","arguments","apply","cache","has","Map","text","font","fontSize","fontFamily","fontWeight","fontStyle","fontVariant","ctx","document","createElement","getContext","join","measureText","width","default_1","def","v","clear","size","directed","weightPropertyName","nodeIds","marks","D","prevs","Infinity","nodeNum","_loop_1","minNode","minDis","minVertex","minNodeId","relatedEdges","getOutEdgesNodeId","edgeTarget","edgeSource","w","weight","paths","findAllPaths","path","allPath","foundPaths","prevPaths","prevPaths_1","prePath","DistanceType","findShortestPath","start","end","Vector","arr","getArr","add","otherVector","otherArr","res","subtract","avg","negate","squareEuclideanDistance","pow","euclideanDistance","sqrt","normalize","cloneArr","sort","norm2","dot","equal","UnionFind","items","count","parent","items_1","union","rootA","rootB","connected","defaultCompare","MinBinaryHeap","compareFn","list","getLeft","getRight","getParent","floor","delMin","pop","moveDown","insert","moveUp","tmp","epsilon","linkProb","currentRank","distance","leakedRank","maxIterations","nodesCount","curRanks","prevRanks","j","nodeDegree","neighbors","neighbor","abs","VACANT_NODE_LABEL","Edge","from","to","label","Node","edgeMap","addEdge","Graph","edgeIdAutoIncrease","nodeMap","nodeLabelMap","edgeLabelMap","counter","getNodeNum","addNode","rEdge","DFSedge","fromNode","toNode","fromNodeLabel","edgeLabel","toNodeLabel","nodeEdgeNodeLabel","nodeLabel1","nodeLabel2","equalTo","other","formNode","notEqualTo","DFScode","rmpath","dfsEdgeList","aLength","pushBack","toGraph","graphId","graph","dfsEdge","fromNodeId","toNodeId","buildRmpath","oldFrom","fromNodeIdx","toNodeIdx","History","pdfs","his","nodesUsed","edgesUsed","preNode","hasNode","hasEdge","GSpan","graphs","minSupport","minNodeNum","_d","maxNodeNum","_e","_f","_g","verbose","dfsCode","support","frequentSize1Subgraphs","frequentSubgraphs","reportDF","findForwardRootEdges","findBackwardEdge","edge1","edge2","history","edge2ToEdges","edgeLength","findForwardPureEdges","rightmostEdge","minNodeLabel","rightmostEdgeToId","findForwardRmpathEdges","newToNodeLabel","getSupport","projected","graphMap","pro","findMinLabel","minLabel","isMin","log","dfsCodeMin","root","otherNode","projectIsMin","maxToC","backwardRoot","flag","newTo","backwardEdge","minBackwardEdgeLabel","idx_1","forwardRoot","newFrom","forwardPureEdges","pathLength","_loop_2","forwardRmpathEdges","forwardMinEdgeNodeLabel","idx","report","subGraphMining","_loop_3","generate1EdgeFrequentSubGraphs","nodeLabelCounter","nodeEdgeNodeCounter","nodeLableCounted","nodeEdgeNodeLabelCounted","nodeLabel","graphNodeKey","graphKey","graphNodeEdgeNodeKey","nodeEdgeNodeKey","g","run","Stack","maxStep","defineProperty","enumerable","configurable","isMaxStack","idOf","Error","parentIdOf","idsOf","flat","ids","combos","getNodeCentralities","getRelatedEdgesData","centrality","centralityResult","direction","computeNodeBetweennessCentrality","computeNodeClosenessCentrality","computeNodeEigenvectorCentrality","computeNodePageRankCentrality","initCentralityResult","pathCount","totalLength","adjacencyMatrix","createAdjacencyMatrix","eigenvector","powerIteration","matrix","uIndex","findIndex","vIndex","numNodes","tolerance","diff","iter","newEigenvector","norm","sum","val","arrayDiff","original","modified","originalMap","d","modifiedMap","originalSet","Set","modifiedSet","enter","update","exit","keep","setVisibility","style","visibility","ExtensionController","constructor","context","extensions","extensionMap","setExtensions","stdExtensions","getKey","parseExtensions","createExtensions","updateExtensions","destroyExtensions","createExtension","Ctor","instance","updateExtension","destroyExtension","destroy","BaseExtension","events","destroyed","BaseBehavior","AutoAdaptLabel","super","defaultOptions","isOverlapping","intersects","occupiedBounds","detectLabelCollision","viewport","show","hide","labelBounds","getRenderBounds","isInViewport","hideLabelIfExceedViewport","prevElementsInView","currentElementsInView","hideLabel","nodeCentralities","sortNodesByCentrality","model","getData","sortLabelElementsInView","labelElements","sortNode","sortCombo","sortEdge","getElementDataById","el","getComboData","getNodeData","getEdgeData","labelElementsInView","isFirstRender","onToggleVisibility","event","validate","hiddenElements","showLabel","getLabelElements","getLabelElementsInView","sortedElements","toFront","onTransform","throttle","leading","enableToggle","toggle","onBeforeRender","onAfterRender","bindEvents","unbindEvents","elementMap","isVisible","on","BEFORE_RENDER","AFTER_RENDER","AFTER_DRAW","AFTER_LAYOUT","AFTER_TRANSFORM","off","enable","VECTOR_ZERO","multiply","divide","scale","manhattanDistance","angle","clockwise","determinant","acos","perpendicular","mod","toVector2","toVector3","vector","isVector2","rad","atan2","isLinesParallel","l1","l2","p1","p2","p3","p4","a2","cross","getLinesIntersection","u","parsePlacement","placement","split","positionOf","datum","hasPosition","getXYByRelativePlacement","getXYByPlacement","parsePoint","toPointObject","round","digits","parseFloat","toFixed","moveTo","normalizedDirection","moveVector","isHorizontal","isCollinear","getSymmetricPoint","getPolygonIntersectPoint","points","isRelativePos","useExtendedLine","intersect","line","getEllipseIntersectPoint","vec","isNaN","rx","ry","cos","sin","getDistanceToLine","findNearestPointOnLine","x1","y1","x2","y2","x3","y3","px","py","sortByClockwise","centerOf","angle1","angle2","getBoundingPoints","PinchHandler","emitter","phase","pointerByTouch","initialDistance","callbacks","onPointerDown","onPointerMove","onPointerUp","POINTER_DOWN","POINTER_MOVE","POINTER_UP","updatePointerPosition","pointerId","client","pointerType","isPinching","dx","dy","pinchstart","cb","ratio","pinchmove","pinchend","tryDestroy","lowerCaseKeys","toLocaleLowerCase","Shortcut","boundHandlePinch","recordKey","onKeyDown","trigger","onKeyUp","onWheel","triggerExtendKey","WHEEL","onDrag","DRAG","handlePinch","PINCH","onFocus","handler","pinchHandler","unbind","h","unbindAll","match","recordKeyList","keyList","KEY_DOWN","KEY_UP","globalThis","addEventListener","eventType","removeEventListener","BrushSelect","shortcut","clearStates","isKeydown","startPoint","canvas","lineWidth","getZoom","rectShape","appendChild","immediately","mode","endPoint","getCursorPoint","height","updateElementsStates","clearBrush","clearElementsStates","setElementState","enableElements","state","onSelect","selectedIds","selector","getElementState","prevStates","itemTypes","itemType","getElementVisibility","inside","xi","yi","xj","yj","isPointInPolygon","getElementPosition","remove","CLICK","stroke","fillOpacity","zIndex","pointerEvents","ICON_SIZE_RATIO","ELEMENT_TYPES","dfs","visitor","navigator","depth","children","child","getElementNthDegreeIds","elementId","getNodeNthDegreeIds","edgeData","sourceRelations","targetRelations","startNodeId","visitedNodes","visitedEdges","relations","queue","current","shift","edgeId","neighborNodeId","statesOf","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","rejected","done","then","ClickSelect","onClickSelect","updateState","onClick","onClickCanvas","clearState","isMultipleSelect","multiple","getNeighborIds","targetType","selectState","unselectedState","neighborState","getElementData","click","getDataStates","addState","dataStatesSet","_states","targetState","getClearStates","complete","statesToClear","datumStates","newStates","isCollapsed","nodeLike","collapsed","prefix","startsWith","nextChart","addPrefix","removePrefix","string","lowercaseFirstLetter","subStyleProps","subStyle","subOpacityKey","opacity","subOpacity","subObject","prefixLength","omitStyleProps","prefixArray","omitStyle","parseSize","computeElementCallbackStyle","callableStyle","fromEntries","mergeOptions","modifiedOptions","s1","s2","parsePalette","field","color","invert","getPaletteColors","colorPalette","getWordWrapWidthWithBase","maxWidth","wordWrapWidth","getWordWrapWidthByBox","keyShapeBox","zoom","enableBalanceShape","balanceZoom","BaseShape","applyTransform","shapeMap","animateMap","render","parsedAttributes","upsert","className","container","hooks","_h","beforeDestroy","removeChild","afterDestroy","_Ctor","SHAPE","beforeCreate","afterCreate","beforeUpdate","updateStyle","afterUpdate","transformOrigin","cursor","clipPath","component","rest","setAttribute","setAttributes","getGraphicStyle","class","cls","getSubShapeStyle","compositeShapes","animationMap","_x","_y","_z","releaseAnimation","skippedAttrs","method","subKeyframes","handleCompositeShapeAnimation","shapeSet","itemsKeyframes","styles","activeAnimations","Label","defaultStyleProps","isTextStyle","isBackgroundStyle","getTextStyle","getBackgroundStyle","background","wordWrap","backgroundStyle","centerX","centerY","halfExtents","halfWidth","halfHeight","getGeometryBounds","totalWidth","radius","endsWith","percentage","maxLines","textOverflow","textBaseline","backgroundOpacity","backgroundZIndex","backgroundLineWidth","Badge","getBadgeStyle","labelShape","backgroundRadius","PATH_COMMANDS","M","m","H","V","L","Z","C","c","S","Q","q","T","A","pathToPoints","segments","trim","currentCommand","currentElement","it","unshift","prop","parsePath","seg","command","getClosedSpline","first","second","last","lastSecond","closedPath","x0","y0","cp1x","cp1y","cp2x","cp2y","getPolygonTextStyleByPlacement","bounds","offsetX","offsetY","closeToContour","autoRotate","textAlign","lines","minDistance","nearestLine","findNearestLine","intersection","atan","Contour","getLabelStyle","closeToPath","labelStyle","keyBounds","getKeyStyle","labelPlacement","labelCloseToPath","labelAutoRotate","labelOffsetX","labelOffsetY","onMounted","handleRadius","onAttrModified","isMutationObserved","MOUNTED","ATTR_MODIFIED","clipPathStyle","parsedStyle","rect","ImagesWeakMap","WeakMap","connectImage","ancestors","parentNode","getAncestorShapes","images","dispatchPositionChange","image","Icon","isImage","src","getIconStyle","BaseElement","config","onframe","BaseNode","getSize","labelText","getLocalBounds","getTextStyleByPlacement","getHaloStyle","halo","keyStyle","haloStyle","icon","iconText","iconSrc","iconStyle","stdSize","inferIconStyle","getBadgesStyle","badges","badgesShapeStyle","badge","badgeOptions","badgePalette","restAttributes","colors","badgeStyle","option","backgroundFill","keyShape","restStyle","textStyle","getPortsStyle","ports","getPorts","portsShapeStyle","port","portStyle","portOptions","mergedStyle","isSimplePort","getPortXY","getPortXYByPlacement","getLayer","substitute","cloneNode","getBoundsInOffscreen","getCenter","getIntersectPoint","getRectIntersectPoint","drawHaloShape","drawIconShape","drawBadgeShapes","badgesStyle","drawPortShapes","portsStyle","shapeKey","drawLabelShape","_drawKeyShape","drawKeyShape","droppable","draggable","portZIndex","portLinkToCenter","badgeZIndex","haloDroppable","haloLineDash","haloLineWidth","haloStrokeOpacity","haloPointerEvents","haloZIndex","iconZIndex","labelIsBillboard","labelMaxWidth","labelWordWrap","labelZIndex","Circle","r","Polygon","getPoints","Donut","parseOuterR","parseInnerR","innerR","parseInt","drawDonutShape","donuts","parsedDonuts","donutPalette","cur","outerR","roundStyle","arc","angel","R","full","part","Ellipse","majorAxis","minorAxis","HTML","rootPointerEvent","forwardEvents","nativeEvent","iCanvas","renderingContext","ownerDocument","defaultView","normalizeToPointerEvent","normalizedEvent","bootstrapEvent","eventService","mapEvent","POINTER_OVER","POINTER_LEAVE","getDomElement","connectedCallback","getRenderer","eventName","attributeChangedCallback","oldValue","newValue","normalizedEvents","isTouchEvent","changedTouches","touch","button","buttons","isPrimary","touches","radiusX","radiusY","tiltX","tiltY","identifier","pressure","force","twist","tangentialPressure","isNormalized","isMouseEvent","tempEvent","transferMouseData","isTrusted","srcElement","timeStamp","performance","now","altKey","metaKey","shiftKey","ctrlKey","clientX","clientY","movement","movementX","movementY","page","pageX","pageY","screen","screenX","screenY","relatedTarget","view","originalEvent","getViewportXY","canvasX","canvasY","getCanvasByViewport","global","copyFrom","offset","client2Viewport","keyStyleFill","keyStyleStroke","Triangle","MAP","up","down","getTrianglePoints","getTrianglePorts","getTriangleCenter","getIncircleRadius","BaseCombo","updateComboPosition","getKeySize","childrenNode","getEmptyKeySize","getCollapsedKeySize","getExpandedKeySize","collapsedSize","contentBBox","getContentBBox","getElement","childrenBBox","drawCollapsedMarkerShape","getCollapsedMarkerStyle","collapsedMarker","collapsedMarkerStyle","getCollapsedMarkerText","childrenData","getDescendantsData","getElementType","getComboPosition","descendants","isCombo","getComboStyle","comboStyle","syncNodeLikeDatum","collapsedMarkerZIndex","collapsedMarkerFontSize","collapsedMarkerTextAlign","collapsedMarkerTextBaseline","collapsedMarkerType","orth","sourcePoint","targetPoint","sourceNode","targetNode","controlPoints","sourceBBox","targetBBox","fromIdx","toIdx","isOrth","isVertical","route","insideNode","nodeToNode","fromWithPadding","toWithPadding","pointToPoint","getDirection","nodeToPoint","pointToNode","opposites","N","W","E","radians","fx","fy","tx","ty","d1","d2","opposite","fromBBox","freeJoin","toBBox","freePoints","isPointOutsideBBox","freeDirectionPoints","fromBorder","toBorder","midPoint","startRoute","endRoute","DEFAULT_OFFSET","boundary","reversed","halfPerimeter","getLabelPositionStyle","getPoint","pointOffset","pointX","pointY","actualOffsetX","actualOffsetY","getCurveControlPoint","curvePosition","curveOffset","lineVector","controlPoint","perpVector","getCubicPath","getPolylinePath","targetIndex","pathArray","prevPoint","nextPoint","ps","pt","d0","getBorderRadiusPoints","getLoopEndpoints","sourcePort","targetPort","getPortPosition","halfPI","angleWithX","angleWithY","getRadians","point1","point2","getNodeConnectionPoint","getCubicLoopPath","dist","sourcePortKey","targetPortKey","adjustment","sign","getCubicLoopControlPoints","getPortConnectionPoint","at","getPolylineLoopPath","allPortsMap","getAllPorts","sourceSide","targetSide","getPointOffSide","side","getPolylineLoopControlPoints","getSubgraphRelatedEdges","getRelatedEdges","internal","external","findActualConnectNodeData","getParentData","n","circle","triangle","diamond","vee","triangleRect","tWidth","rWidth","rBeginX","simple","BaseEdge","loop","node1","node2","getLoopPath","getKeyPath","PARSED_STYLE_LIST","defaultDist","getEndpoints","optimize","findPort","findPorts","_controlPoints","getConnectionPoint","labelPositionStyle","getWordWrapWidthByEnds","badgeText","badgeWidth","labelWidth","getBadgePositionStyle","drawArrow","isStart","arrowStyle","getArrowStyle","marker","markerOffset","arrowOffset","arrow","arrowShape","arrowType","getArrowSize","drawBadgeShape","drawSourceArrow","drawTargetArrow","badgeOffsetX","badgeOffsetY","badgePlacement","isBillboard","labelTextBaseline","startArrow","startArrowLineDash","startArrowLineJoin","startArrowLineWidth","startArrowTransformOrigin","startArrowType","endArrow","endArrowLineDash","endArrowLineJoin","endArrowLineWidth","endArrowTransformOrigin","endArrowType","loopPlacement","loopClockwise","Cubic","actualControlPoints","getControlPoints","parseCurvePosition","parseCurveOffset","CubicHorizontal","xDist","CubicRadial","getRootsData","refPoint","toRadialCoordinate","r1","rad1","r2","rDist","CubicVertical","yDist","Line","defaultCfg","enableObstacleAvoidance","maxAllowedDirectionChange","maximumLoops","gridSize","startDirections","endDirections","directionMap","stepX","stepY","penalties","distFunc","keyOf","alignToGrid","align","getDirectionAngle","deltaX","deltaY","getDirectionChange","cameFrom","scaleStartPoint","directionAngle","currentCameFrom","directionChange","getAngleDiff","estimateCost","anchors","anchor","getBoxPoints","directions","expandedBBox","directionKey","otherPoint","topLeftCorner","topRightCorner","bottomRightCorner","bottomLeftCorner","getBBoxSegments","intersectP","startPoints","scaleEndPoint","pointZero","_current","_currentCameFrom","prePoint","realStartPoints","nearestPoint","dis","getNearestPoint","aStarSearch","obstacleMap","getObstacleMap","endPoints","openList","closedList","gScore","fScore","sortedOpenSet","SortedArray","firstStep","endPointsKeys","remainLoops","curCost","minId","dir","neighborId","directionPenalties","neighborCost","costFromStart","neighborGScore","_innerAdd","low","high","mid","_clearAndGetMinId","_findFirstId","Polyline","router","getNodes","newSourcePoint","newTargetPoint","Quadratic","getQuadraticPath","isNode","isEdge","PORT_MAP","default","portMap","isRelative","DEFAULT","getPosition","oppositeNode","portKey","oppositePortKey","portsMap","positions","oppositePositions","oppositePorts","findConnectionPoints","nearestPosition","group1","group2","nearestPoints","findNearestPoints","linkToCenter","oppositePosition","isReverseBaseline","isToBeDestroyed","CollapseExpand","onCollapseExpand","onCollapse","onExpand","expandElement","collapseElement","DBLCLICK","ASSIST_NODE_ID","CreateEdge","drop","handleCreateEdge","cancelEdge","batch","createEdge","startBatch","setCursor","getSelectedNodeIDs","addNodeData","addEdgeData","draw","updateAssistEdge","translateNodeTo","silence","onFinish","onCreate","removeNodeData","endBatch","DRAG_START","currTarget","getElementDataByState","DragCanvas","isDragging","onDragStart","translate","onDragEnd","defaultCursor","invokeOnFinish","debounce","getConfig","onTranslate","DRAG_END","sensitivity","delta","clampByDirection","clampByRange","translateBy","canvasWidth","canvasHeight","range","draggableArea","getCanvasCenter","nextViewportCenter","getViewportCenter","DragElement","shadowOrigin","hiddenEdges","onDrop","dropEffect","modifiedParentId","originalParent","refreshComboData","setParent","POINTER_ENTER","grab","$canvas","getContextService","DROP","getDelta","grabbing","hideEdge","frontElement","shadow","createShadow","moveShadow","moveElement","showEdges","translateElementBy","shadowStyle","positionStyle","$layer","showElement","hideElement","shadowZIndex","shadowFill","shadowFillOpacity","shadowStroke","shadowStrokeOpacity","shadowLineDash","BaseLayout","layoutMapping2GraphData","layoutMapping","_isCombo","invokeLayoutMethod","getLayoutProperty","FixElementSize","isZoomEvent","relatedEdgeToUpdate","fixElementSize","nodeFilter","edgeFilter","comboFilter","nodeData","comboData","currentScale","nodeLikeData","fixNodeLike","updateRelatedEdges","fixEdge","cachedStyles","getOriginalFieldValue","shapesStyle","shapeStyle","scaleEntireElement","setLocalScale","scaleSpecificShapes","descendantShapes","succeeds","traverse","getDescendantShapes","shapeFilter","oriFieldValue","skipIfExceedViewport","resetTransform","firstRender","reset","restoreCachedStyles","edgeIds","FocusElement","focus","focusElement","HoverActivate","isFrozen","toggleFrozen","hoverElement","isEnter","updateElementsState","onHover","onHoverEnd","inactiveState","activeIds","getActiveIds","getElementsState","inactiveIds","currentState","isCollapsingExpanding","OptimizeViewportTransform","hiddenShapes","setElementsVisibility","filterShapes","includesClassnames","hideShapes","shapes","getEdges","getCombos","showShapes","BEFORE_TRANSFORM","ScrollCanvas","preventDefault","diffX","diffY","scroll","graphDom","passive","getCanvas","formatDisplacement","scrollableArea","formattedValue","ZoomCanvas","origin","clamp","zoomTo","onReset","getContainer","zoomIn","zoomOut","FishboneLayout","getRoot","roots","formatSize","nodeSize","nodeSizeFunc","doLayout","hGap","getRibSep","vGap","ribX","getHorizontalOffset","childId","getNodeLikeDatum","grandChildId","grandChild","getAuxiliaryPoint","isAtEvenDepth","ancestor","calculateY","nodeIndex","followingSiblingsIncludeSelf","calculateX","sibling","isRoot","getParentY","prevSibling","descendant","lastChild","lastDescendant","tmpRibX","relatedNodeId","placeAlterative","oddIndexedRibs","rootY","shouldFlip","getAncestorsData","ribId","rightToLeft","execute","propOptions","assignElementStyle","getEdgeDatum","SnakeLayout","sizeFn","adjList","visited","sourceNodes","sinkNodes","propNodeSize","propPadding","sortBy","cols","colGap","propColSep","rowGap","propRowSep","rows","ceil","colSep","rowSep","sortedNodes","topologicalSort","rowIndex","colIndex","createPluginContainer","cover","position","display","gridArea","inset","overflow","insertDOM","tag","innerHTML","body","dom","getElementById","div","EState","OutCode","Background","$element","_super","create","linePtSegDistSq","lx1","ly1","lx2","ly2","dotprod","projlenSq","lenSq","ptsDistanceSq","doublePointsEqual","lineBoundingBox","transition","backgroundSize","equals","that","lineTo","cuts","distSquare","ptClose","Intersection","intersectLineLine","la","lb","uaT","ubT","uB","ua","ub","POINT","NONE","COINCIDENT","PARALLEL","fractionAlongLineA","POSITIVE_INFINITY","outcode","out","LEFT","RIGHT","TOP","BOTTOM","intersectsLine","out2","out1","fractionToLineCenter","countIntersections","testLine","xa","ya","xb","yb","testDistance","testIntersection","Rectangle","cx","cy","addPoint","containsPt","area","tempX","tempY","code","ellipse","Area","pixelGroup","pixelX","pixelY","pixels","createSub","pixelPos","fromPixelRegion","pixelRect","copy","sub","pixelPoint","scaleX","scaleY","boundX","pos","boundY","pixel","invertScaleX","invertScaleY","addPadding","pixelPadding","NaN","inc","incArea","factor","aw","i1","j1","i2","j2","subRow","row","fillArea","fillHorizontalLine","fillVerticalLine","padStart","save","NEGATIVE_INFINITY","fillStyle","fillRect","restore","drawThreshold","threshold","createLineInfluenceArea","potentialArea","createGenericInfluenceArea","lr","scaled","distanceFunction","padding2","distanceSq","dr","sample","calculateVirtualEdges","nonMembers","maxRoutingIterations","morphBuffer","sorted","totalX","totalY","sortByDistanceToCentroid","itemCenter","closestNeighbor","minLengthSq","neighborItem","directLine","numberInterferenceItems","hasFractionToLineCenter","itemsCuttingLine","calculateClosestNeighbor","scannedLines","linesToCheck","hasIntersection","closestItem","getCenterItem","intersections","tempMorphBuffer","movePoint","rerouteLine","foundFirst","pointExists","pointInside","isPointInRectangles","foundSecond","computeRoute","finalRoute","line1","line2","mergeLine","mergeLines","connectItem","rects","pointToCheck","checkEndPointsLine","rerouteBuffer","wrapNormal","topIntersect","leftIntersect","bottomIntersect","rightIntersect","totalArea","canTakeNext","toleranceSquared","closed","basicFunction","PointPath","roundToDigits","rounder","isFinite","beginPath","closePath","skip","actSkip","finalHull","samplePath","simplify","shapeSimplifier","bSplines","granularity","calcPoint","REL_END","bf","ORDER","ix","bSplineShapeGenerator","transformer","containsElements","members","bb","boundingBox","member","withinArea","crossings","PointList","contains","isFirst","o","marchingSquares","estLength","contour","updateDir","getState","doMarch","xPos","yPos","xPixel","yPixel","maxMarchingIterations","edgeR0","edgeR1","nodeR0","nodeR1","memberInfluenceFactor","edgeInfluenceFactor","nonMemberInfluenceFactor","virtualEdges","isCircle","bc","br","EDirty","dirty","activeRegion","pushMember","MEMBERS","raw","removeMember","removeNonMember","nonMember","NON_MEMBERS","removeEdge","pushNonMember","pushEdge","EDGES","dirtyMembers","dirtyNonMembers","dirtyEdges","memberObjs","old","activeRegionDirty","memberItems","edgeItems","unionBoundingBox","potentialWidth","potentialHeight","existing","addCache","createOrAddCache","padded","paddingLeft","paddingTop","paddingRight","paddingBottom","innerWidth","innerHeight","straightDistances","maxPadding","cornerDistances","maxHorizontalPadding","maxVerticalPadding","ii","createRectangleInfluenceArea","drawMembers","drawNonMembers","drawEdges","drawPotentialArea","compute","validPath","nodeInfA","edgeInfA","calculatePotentialOutline","BubbleSets","avoidMembers","bubbleSetOptions","drawBubbleSets","parseOptions","init","finalStyle","getPath","updateBubbleSetsPath","forceUpdateId","currMembers","prevMembers","currAvoidMembers","prevAvoidMembers","membersToEnter","membersToExit","avoidMembersToEnter","avoidMembersToExit","updateBubbleSets","isEntering","isMember","convertToLine","bubbleSets","convertToRectangle","cleanPath","AFTER_ELEMENT_UPDATE","addMember","membersToAdd","membersToRemove","updateMember","getMember","addAvoidMember","avoidMembersToAdd","AvoidMember","removeAvoidMember","avoidMembersToRemove","updateAvoidMember","getAvoidMember","strokeOpacity","getElementRenderBounds","Contextmenu","targetElement","onTriggerEvent","onMenuItemClick","HTMLElement","getAttribute","initElement","classList","content","getDOMContent","clientRect","getBoundingClientRect","getContent","getItems","loadingContent","EdgeBundling","edgeBundles","edgePoints","onBundle","divideEdges","divisions","cycles","iterRate","divRate","lambda","forces","getEdgeForces","edgeEl","divisionLength","getEdgeLength","currentDivisionLength","newEdgePoints","prevEp","ep","oriDivisionLength","edgePoint","getVectorPosition","vx","vy","measureEdgeCompatibility","vector1","vector2","getAngleCompatibility","getScaleCompatibility","getPositionCompatibility","getVisibilityCompatibility","getEdgeBundles","bundleThreshold","getSpringForce","kp","pre","getElectrostaticForce","pidx","edgeBundle","resForce","eb","K","edgePointForces","spring","electrostatic","projectPointToEdge","getEdgeVisibility","is","iMid","pMid","defaultLensStyle","EdgeFilterLens","onEdgeFilter","isLensOn","renderLens","renderFocusElements","lens","getFilterData","getFocusElements","focusNodes","focusNodeIds","isSourceFocus","isTargetFocus","nodeType","iterate","cloneShape","setPosition","getElementStyle","scaleRByWheel","scaleOrigin","getCanvasByClient","maxR","minR","canvasR","isLensDragging","dragOrigin","nodeStyle","edgeStyle","scaleRBy","labelFontSize","Fisheye","onCreateFisheye","onMagnify","showDPercent","getDPercent","minD","maxD","prevMagnifiedStyleMap","prevOriginStyleMap","molecularParam","magnifiedStyleMap","originStyleMap","distanceToOrigin","magnifiedDistance","nodeX","nodeY","originX","originY","newPoint","getNodeStyle","originStyle","getElementRenderStyle","isWheelValid","scaleR","positive","scaleD","newD","scaleDByWheel","isDragValid","scaleRByDrag","scaleDByDrag","scaleDBy","dragFunc","wheelFunc","Fullscreen","$el","graphSize","onFullscreenChange","isFull","fullscreenElement","autoFit","setGraphSize","onEnter","onExit","request","fullScreen","setSize","fullscreenEnabled","requestFullscreen","catch","err","exitFullscreen","GridLine","followZoom","prevScale","deltaScale","positionOffset","scaledSize","baseSize","newOffset","backgroundPosition","followTranslate","follow","updateOffset","parseFollow","border","borderLineWidth","borderStroke","borderStyle","backgroundImage","backgroundRepeat","reduceDataChanges","changes","results","Added","Updated","Removed","change","groupByChangeType","NodeAdded","NodeUpdated","NodeRemoved","EdgeAdded","EdgeUpdated","EdgeRemoved","ComboAdded","ComboUpdated","ComboRemoved","alignFields","refObject","targetObject","parseCommand","cmd","newOriginal","colorKey","getElementComputedStyle","batchChanges","batchAnimation","undoStack","redoStack","freezed","executeCommand","revert","addData","updateData","removeData","addCommand","dataChanges","isBatching","undoStackPush","notify","ADD","initBatchCommand","initiate","BATCH_START","BATCH_END","canUndo","canRedo","undo","beforeAddCommand","afterAddCommand","UNDO","redo","REDO","undoAndCancel","CANCEL","stackSize","CLEAR","emit","CHANGE","formatUtil","toXy","pointset","xProperty","yProperty","fromXy","coordinates","Grid","cellSize","_cells","_cellSize","_reverseCellSize","coordToCellNum","cellPoints","rangePoints","tlCellX","tlCellY","brCellX","brCellY","cell","removePoint","cellX","cellY","trunc","extendBbox","scaleFactor","SPLITTER","twoProduct","ahi","alo","bhi","blo","fastTwoSum","bv","ar","scaleLinearExpansion","ts","robustSubtract","ne","nf","scalarScalar","ep_tr","fp_tr","ei","ea","fi","fa","_bv","_av","_br","_ar","q0","q1","linearExpansionSum","orientation_3","prod","m0","m1","m2","orientation_4","m3","orientation_5","m4","orientation","orientation3Exact","orientation4Exact","CACHED","det","tol","adx","bdx","cdx","ady","bdy","cdy","adz","bdz","cdz","bdx_cdy","cdx_bdy","cdx_ady","adx_cdy","adx_bdy","bdx_ady","slowOrient","proc","orientationProc","slow","o0","o1","o2","o3","o4","o5","orient","segmentsIntersect","a0","a1","b0","b1","l0","h0","h1","checkCollinear","_sqLength","_cos","aShifted","bShifted","sqALen","sqBLen","_intersect","segment","_bBoxAround","_midPoint","innerPoints","convex","a1Cos","a2Cos","angle1Cos","MAX_CONCAVE_ANGLE_COS","angle2Cos","_concave","maxSqEdgeLen","maxSearchArea","grid","edgeSkipList","midPointInserted","keyInSkipList","bBoxWidth","bBoxHeight","bBoxAround","hull","concavity","maxEdgeLen","unique","lastPoint","currentPoint","_filterDuplicates","_sortByX","concave","occupiedArea","_occupiedArea","MAX_SEARCH_BBOX_SIZE_PERCENT","lower","upper","ptr","nl","genSinglePointHullPath","corner","arcData","genTwoPointsHullPath","offsetVector","invOffsetVector","prev","genMultiPointsRoundedHull","prev2Index","prevIndex","nextIndex","prev2","v0","v1","v2","isConcave","concavePrev","concaveNext","startIndex","sortedSegments","concavePoints","flatMap","pathFragment","lastSegment","genMultiPointsSmoothHull","hullPoints","hp","priorIndex","prevV","extensionVec","genMultiPointsSharpHull","Hull","hullMemberIds","drawHull","forceUpdate","optionsCache","getHullStyle","updateHullPath","getHullPath","vertices","computeHullPath","getPadding","labelOpacity","createPluginCanvas","renderer","$container","graphCanvas","containerStyle","xRatio","yRatio","computePosition","Legend","typePrefix","fieldMap","selectedItems","changeState","composeId","mouseleave","mouseenter","setFieldMap","getEvents","getMarkerData","getField","defaultType","markerMapping","star","cubic","polyline","quadratic","getElementModel","updateElement","nodeField","edgeField","comboField","nodeItems","comboItems","categoryStyle","itemMarkerLineWidth","itemMarker","itemMarkerStroke","itemMarkerFill","gridCol","upsertCanvas","itemMarkerOpacity","itemLabelOpacity","itemSpacing","rowPadding","colPadding","itemMarkerSize","itemLabelFontSize","Minimap","onDraw","onRender","landmarkMap","mask","isMaskDragging","onMaskDragStart","setPointerCapture","onMaskDrag","onMaskDragEnd","minimapWidth","minimapHeight","fullWidth","fullHeight","maskBBox","getCamera","releasePointerCapture","updateMask","setCamera","setOnRender","renderMinimap","renderMask","delay","getElements","initCanvas","setShapes","removeChildren","resize","setRenderer","createLandmark","focalPoint","landmark","camera","boundsMin","boundsMax","gotoLandmark","canvasSize","canvasMin","canvasMax","maskMin","canvas2Viewport","maskMax","calculateMaskBBox","maskStyle","defaultLineStyle","Snapline","initSnapline","horizontalLine","horizontalLineStyle","verticalLine","verticalLineStyle","isHorizontalSticking","isVerticalSticking","enableStick","autoSnapToLine","metadata","verticalX","horizontalY","nodeMinX","nodeMinY","nodeMaxX","nodeMaxY","nodeCenterX","nodeCenterY","enableSnap","setTimeout","calcSnaplineMetadata","nodeBBox","verticalMinY","verticalMaxY","horizontalMinX","horizontalMaxX","snapNode","snapBBox","snapMinX","snapMinY","snapMaxX","snapMaxY","snapCenterX","snapCenterY","autoSnap","hideSnapline","updateSnapline","getLineWidth","destroyElements","formatTime","date","timeMap","YYYY","getFullYear","MM","getMonth","DD","getDate","HH","getHours","mm","getMinutes","ss","getSeconds","strftime","Option","hoverColor","selectedColor","renderLabel","maybeAppend","renderBackground","labelBBox","getBBox","labelHeight","backgroundWidth","backgroundHeight","styleWidth","styleHeight","selected","Select","currentValue","defaultValue","isPointerInSelect","select","dropdown","setValue","getValue","dropdownPadding","renderSelect","bordered","showDropdownIcon","selectStyle","placeholderStyle","strokeWidth","currentOption","finalPlaceholderStyle","selectAll","finalValueStyle","renderDropdown","open","dropdownStyle","optionStyle","dispatchEvent","detail","each","accHeight","curr","getElementsByClassName","spacing","stopPropagation","selectRadius","selectStroke","placeholderText","placeholderFontSize","placeholderTextBaseline","placeholderFill","dropdownFill","dropdownStroke","dropdownRadius","dropdownShadowBlur","dropdownShadowColor","dropdownSpacing","optionPadding","optionFontSize","optionTextBaseline","optionBackgroundFill","optionBackgroundRadius","optionLabelFontSize","optionLabelTextBaseline","IconBase","backgroundOpacities","showBackground","log10","halfSize","showIndicator","indicator","hideIndicator","disconnectedCallback","renderIcon","resetBackground_1","hover","active","Reset","arcPath","getPosByAngle","iconSize","arrowSize","markerStart","Backward","Forward","Play","Pause","Range","gap","markerEnd","Value","getCoordinatePoints","LineChart","ox","oy","BarChart","Split","SpeedSelect","speed","inheritStyle","ToggleIcon","currentType","getType","restStyles","onChange","toggles","nextType","PlayPause","SelectionType","ChartType","componentsMap","backward","playPause","forward","selectionType","chartType","Controller","functions","renderFunctions","iconSpacing","components","componentsWidth","xOffset","speedSelect","handleFunctionChange","backgroundStroke","TimeModeHandle","ChartModeHandle","renderBorder","xx","backgroundFillOpacity","iconStroke","iconLineWidth","labelFormatter","time","interval","parseBySeries","Date","parseByTime","hours","String","minutes","seconds","Timebar","axis","startPos","endPos","showArrow","timeline","handleSliderChange","controller","prevValues","setBySliderValues","dispatchOnChange","playMode","setByTimebarValues","axisBBox","controllerHeight","availableTimelineHeight","controllerBBox","axisHeight","timelineHeight","timelineBBox","startRatio","endRatio","startDatum","endDatum","setByIndex","endIndex","startDatumIndex","isValue","endDatumIndex","getEndValue","getDatumByRatio","space","getChartStyle","userDefinedLabelFormatter","userDefinedChartStyle","isRange","handleIconShape","selectionFill","selectionFillOpacity","showLabelOnInteraction","handleLabelDy","autoFitLabel","handleSpacing","trackFill","trackLength","trackOpacity","trackRadius","trackSize","sliderValues","formatter","handleIconOffset","sparklineData","chartHandleIconShape","sparklineSpacing","sparklineColumnLineWidth","sparklineColor","sparklineAreaOpacity","sparklineAreaLineWidth","sparklineType","sparklineScale","renderChart","updateSelection","setValues","getAxisStyle","userDefinedAxisStyle","axisData","labelFilter","_datum","renderAxis","renderController","userDefinedControllerStyle","internalReset","handleSpeedChange","internalBackward","internalPlay","internalPause","internalForward","handleSelectionTypeChange","handleChartTypeChange","endTime","val1","val2","isEqual","preventEvent","moveSelection","startTime","currentIndexes","normalizedIndexes","indexes","clampIndex","normalizeIndexes","onBackward","playInterval","window","setInterval","onPlay","play","clearInterval","onPause","pause","onForward","onSpeedChange","onSelectionTypeChange","onChartTypeChange","axisLabelFill","axisLabelTextAlign","axisLabelTextBaseline","axisLabelTransform","axisLineLineWidth","axisLineStroke","axisTickLength","axisTickLineWidth","axisTickStroke","chartShowLabel","controllerAlign","prospectiveTimeKeys","backup","upsertTimebar","timebar","originalData","shallowCopy","timebarType","restOptions","ready","getTime","filterElements","elementTypes","newData","nodeLikeIds","setData","hideElementId","showElementId","elementDatum","inferTime","optionsKeys","Toolbar","onToolbarItemClick","Element","flexDirection","parsePositionToStyle","title","Tooltip","currentTarget","tooltipElement","isEnable","onPointerLeave","onCanvasMove","onPointerEnter","showById","tooltipContent","onOpenChange","tooltipStyleProps","initTooltip","HTMLTooltipElement","contextmenu","drag","enterable","bounding","createCanvas","clearRect","Watermark","imageURL","base64","rotate","globalAlpha","img","Image","crossOrigin","onload","sepX","sepY","drawImage","toDataURL","getImageWatermark","textFill","textFontSize","textFontFamily","textFontVariant","textFontWeight","fillText","getTextWatermark","BADGE_PALETTE","NODE_PALETTE_OPTIONS","EDGE_PALETTE_OPTIONS","tokens","bgColor","textColor","nodeColor","nodeColorDisabled","nodeStroke","nodeHaloStrokeOpacityActive","nodeHaloStrokeOpacitySelected","nodeOpacityDisabled","nodeIconOpacityInactive","nodeOpacityInactive","nodeBadgePalette","nodePaletteOptions","edgeColor","edgeColorDisabled","edgePaletteOptions","comboColor","comboColorDisabled","comboStroke","comboStrokeDisabled","edgeColorInactive","donutOpacity","badgeBackgroundOpacity","badgeFill","badgeFontSize","badgePadding","iconFill","iconOpacity","labelBackground","labelBackgroundFill","labelBackgroundLineWidth","labelBackgroundOpacity","labelFill","labelFillOpacity","labelLineHeight","labelPadding","labelFontWeight","portFill","portLineWidth","portStroke","portStrokeOpacity","highlight","inactive","disabled","expand","collapse","badgeBackgroundFill","increasedLineWidthForHitTesting","labelBackgroundPadding","collapsedMarkerFill","collapsedMarkerFillOpacity","collapsedFillOpacity","haloStroke","lineDash","dark","light","BaseTransform","beforeDraw","afterLayout","reassignTo","input","overwrite","typeName","exitsDatum","_type","isStyleEqual","weakAssignTo","register","override","ext","SINGLE_LAYER_NAME","MULTI_LAYER_NAME","Canvas","layer","extends","layers","getLayers","main","renderers","enableMultiLayer","restConfig","layersName","createRenderers","supportsMutipleCanvasesInOneContainer","configCanvasDom","getFocalPoint","setFocalPoint","group","childNodes","viewport2Canvas","getViewportByCanvas","getViewportByClient","getClientByViewport","viewport2Client","getClientByCanvas","viewportPoint","devicePixelRatio","startX","startY","offscreenCanvas","originCanvasPosition","currentCanvasPosition","offscreenCamera","setZoom","fz","contextService","RERENDER","url","cancelLandmarkAnimation","setConfig","enableDirtyRectangleRendering","registerPlugin","isDocumentDraggable","isDocumentDroppable","dragstartDistanceThreshold","dragstartTimeThreshold","unregisterPlugin","getPlugin","domElement","outline","tabIndex","parentElement","parseInt10","sizeOf","effectiveWidth","effectiveHeight","containerWidth","containerHeight","getComputedStyle","wrapperWidth","clientWidth","wrapperHeight","clientHeight","getContainerSize","BaseEvent","GraphLifeCycleEvent","AnimateEvent","animationType","ElementLifeCycleEvent","ViewportEvent","getZIndexOf","CacheTargetKey","getStyleCacheKey","getCachedStyle","Animation","tasks","animations","getTasks","extendOptions","before","inferStyle","beforeAnimate","afterAnimate","after","release","updatedStyle","stop","cancel","animationsWithPromises","playState","BatchController","batchCount","BehaviorController","currentTargetType","forwardCanvasEvents","originalTarget","eventTargetOf","stdEvent","CONTEXT_MENU","once","forwardContainerEvents","setBehaviors","behaviors","POINTER_OUT","DRAG_ENTER","DRAG_OVER","DRAG_LEAVE","removeAllEventListeners","mergeElementsData","originalAttrs","modifiedData","modifiedAttrs","cloneElementData","customData","clonedData","isElementDataEqual","originalStates","originalChildren","modifiedStates","modifiedChildren","isArrayEqual","arr1","arr2","isObjectEqual","obj1","obj2","keys1","keys2","toGraphlibData","_data","isEdgeData","toG6Data","DataController","latestRemovedComboIds","comboIds","isTraceless","enableUpdateNodeLikeHierarchy","pushChange","getChanges","clearChanges","getAllNodes","getEdge","getAllEdges","hierarchyKey","getRoots","hasTreeStructure","getAncestors","getChildrenData","structureKey","getChildren","getElementsDataByType","getNode","getNodeLikeData","hasCombo","getNeighborNodesData","modifiedNodes","modifiedEdges","modifiedCombos","originalNodes","originalEdges","originalCombos","nodeDiff","edgeDiff","comboDiff","dataToAdd","computeZIndex","dataToUpdate","dataToRemove","addComboData","addNodes","updateNodeLikeHierarchy","addEdges","attachTreeStructure","addChildrenData","parentId","parentData","childrenId","updateNodeData","preventUpdateNodeLikeHierarchy","updateComboData","comboParent","nodeParent","sourceZIndex","targetZIndex","updateEdgeData","getFrontZIndex","elementData","ancestorIds","_children","modifiedNode","originalNode","mergeNodeData","refreshData","syncEdgeDatum","mergeEdgeData","modifiedEdge","originalEdge","updateEdgeSource","updateEdgeTarget","updatedData","modifiedCombo","originalCombo","originalParentId","modifiedDatum","pId","translateNodeLikeBy","translateComboBy","translateNodeBy","translateNodeLikeTo","translateComboTo","dz","seenNodeLikeIds","succeed","succeedID","tz","comboX","comboY","comboZ","succeedId","removeEdgeData","removeComboData","removeNodeLikeHierarchy","removeNodes","removeEdges","grandParent","childData","ElementController","shapeTypeMap","paletteStyle","defaultStyle","stateStyle","visibilityCache","initContainer","forEachElementData","userDefinedType","getTheme","getThemeStyle","getThemeStateStyle","computePaletteStyle","assignColor","parseField","groupData","assignResult","groupKey","assignColorByPalette","getPaletteStyle","computeElementDefaultStyle","computeElementsDefaultStyle","getDefaultStyle","getElementStateStyle","computeElementStatesStyle","computeElementsStatesStyle","getStateStyle","computeStyle","themeStyle","dataStyle","themeStateStyle","getDrawData","computeChangesAndDrawData","markDestroyElement","drawData","createElements","updateElements","setAnimationTask","preLayoutDraw","preResult","preLayout","BEFORE_DRAW","BEFORE_ANIMATE","DRAW","AFTER_ANIMATE","rendered","dataOf","transformData","transforms","getTransformInstance","BEFORE_ELEMENT_CREATE","AFTER_ELEMENT_CREATE","getUpdateStageStyle","BEFORE_ELEMENT_UPDATE","exactStage","hasCachedStyle","names","cacheStyle","onUpdate","markToBeDestroyed","destroyElement","BEFORE_ELEMENT_DESTROY","clearElement","onDestroy","AFTER_ELEMENT_DESTROY","alignLayoutResultToElement","layoutResult","collapseNode","simulateLayoutData","simulate","COLLAPSE","expandNode","preLayoutData","EXPAND","collapseCombo","expandCombo","proxyMarker","Symbol","createEndpoint","releaseProxy","finalizer","throwMarker","transferHandlers","canHandle","serialize","port1","port2","MessageChannel","expose","deserialize","wrap","serialized","isError","stack","allowedOrigins","ev","allowedOrigin","RegExp","test","isAllowedOrigin","argumentList","fromWireValue","returnValue","rawValue","proxy","transfers","transferCache","transfer","wireValue","transferables","toWireValue","postMessage","closeEndPoint","endpoint","isMessagePort","close","pendingListeners","createProxy","throwIfProxyReleased","isReleased","releaseEndpoint","requestResponseMessage","proxyCounter","proxyFinalizers","FinalizationRegistry","newCount","isProxyReleased","_target","unregister","unregisterProxy","_thisArg","rawArgumentList","processArguments","construct","registerProxy","processed","serializedValue","msg","random","MAX_SAFE_INTEGER","Supervisor","spawnWorker","Worker","URL","running","onTick","noFunctionOptions","payload","arraybufferWithNodesEdges","calculateLayout","stopLayout","kill","isRunning","LayoutController","presetOptions","instances","getLayoutInstance","BEFORE_LAYOUT","transformDataAfterLayout","postLayout","layoutOptions","pipeline","getLayoutData","opts","BEFORE_STAGE_LAYOUT","stepLayout","AFTER_STAGE_LAYOUT","updateElementPosition","simulation","isTreeLayout","treeLayout","graphLayout","enableWorker","initGraphLayout","rawLayout","supervisor","graphData2LayoutModel","tickData","tick","animationResult","createTreeStructure","layoutPreset","getSuccessors","rz","inferTreeLayoutOffset","applyTreeLayoutOffset","finish","isLayoutInvisibleNodes","filterFn","nodesToLayout","nodeLikeIdsMap","getCanvasSize","nodeElement","STDCtor","getPrototypeOf","transformOptions","nodesIdMap","edgesToLayout","combosToLayout","layoutModel","layoutAdapter","inferLayoutOptions","PluginController","setPlugins","plugins","getPluginInstance","exactly","fussily","REQUIRED_TRANSFORMS","TransformController","setTransforms","getTransforms","ViewportController","paddingOffset","offsetZ","landmarkCounter","rotation","cameras","getAnimation","finalAnimation","getGraphCenter","getRotation","getRoll","getTranslateOptions","currentZoom","getRotateOptions","roll","getZoomOptions","zoomRange","cancelAnimation","_animation","setZoomByViewportPoint","landmarkOptions","TRANSFORM","transformResolver","onfinish","fitView","when","canvasBounds","bboxInViewPort","getBBoxInViewport","contentWidth","contentHeight","fitCenter","focusElements","ids_1","elementsBounds","getBoundsOf","bboxInViewport","viewportBBox","bbox1","bbox2","minX1","minY1","maxX1","maxY1","minX2","minY2","maxX2","maxY2","isBBoxInside","landmarks","onResize","_setOptions","autoResize","getOptions","setOptions","isInit","updateCanvas","infer","inferOptions","setNode","setEdge","setCombo","setLayout","setTheme","setZoomRange","getZoomRange","getLayout","getBehaviors","updateBehavior","_behavior","getPlugins","updatePlugin","_plugin","updateTransform","_transform","hierarchy","canvasOptions","containerSize","BEFORE_CANVAS_INIT","AFTER_CANVAS_INIT","BEFORE_RENDERER_CHANGE","AFTER_RENDERER_CHANGE","initRuntime","prepare","BEFORE_DESTROY","AFTER_DESTROY","specificSize","BEFORE_SIZE_CHANGE","AFTER_SIZE_CHANGE","zoomBy","rotateBy","rotateTo","translateTo","args1_1","args2_1","args3","translateElementTo","setElementVisibility","_id","setElementZIndex","zIndexes","getElementZIndex","id_1","setElementCollapsibility","treeToGraphData","treeData","getter","restDatum","getEdgeEndsContext","sourceNodeData","targetNodeData","actualSourceNode","actualTargetNode","ends","MapNodeSize","assignSizeByCentrality","minCentrality","maxCentrality","minSize","maxSize","domain","rangeX","rangeY","rangeZ","interpolate","r0","linear","exponent","centralities","getCentralities","assignLabelStyle","configStyle","mapLabelSize","getLabelSizeByNodeSize","defaultMaxFontSize","defaultMinFontSize","minFontSize","maxFontSize","PlaceRadialLabels","radian","isLeft","isLeaf","labelTransform","labelTextAlign","CUBIC_LOOP_PLACEMENTS","ProcessParallelEdges","cacheMergeStyle","getAffectedParallelEdges","edgesToAdd","nodesToUpdate","edgesToUpdate","combosToUpdate","edgesToRemove","addRelatedEdges","pushParallelEdges","getParallelEdges","isParallelEdges","applyBundlingStyle","reverses","groupByEndpoints","arcEdges","edgeArr","loopDist","mergedEdgeData","resetEdgeStyle","applyMergingStyle","newStyle","processedEdgesSet","includedEdgesInGroup","sourceTarget","sourceTargetEdges","includedEdges","otherId","sedge","groupEdges","includedGroupEdges","containsSelf","src1","tgt1","src2","tgt2","BUILT_IN_EXTENSIONS","fade","forceLayoutInstance","alphaTarget","restart","fixed","pathShape","isClose","pointsToPath","clearLasso","collapsedWidth","collapsedHeight","collapsedR","expandedR","compactBox","circular","concentric","dagre","dendrogram","fishbone","fruchterman","indented","mds","mindmap","radial","snake","getDiamondPoints","hexagon","getOuterR","html","getInnerR","getStarPorts","donut","spectral","tableau","oranges","greens","blues","fisheye","fullscreen","legend","minimap","snapline","toolbar","tooltip","watermark","combosToAdd","arrangeCombo","order","zIndex1","zIndex2","descendantIds","descendantId","comboIndex","childrenIds","handleExpand","nodesToAdd","nodesToCollapse","nodesToExpand","isCurrentCollapsed","handledNodes","polygon","factory","self","modules","installedModules","moduleId","exports","module","__esModule","object","property","getHeight","heightField","Layout","rootNode","separateTree","VALID_DIRECTIONS","HORIZONTAL_DIRECTIONS","DEFAULT_DIRECTION","layoutAlgrithm","right2left","bottom2top","_separateTree","getBoundingBox","fixedRoot","hgap","vgap","_ref","rScale","radScale","DFTraverse","radDiff","avgRad","reassignXYIfRadial","util","DEFAULT_OPTIONS","getId","getPreH","preH","getPreV","preV","getHGap","getVGap","PEM","getWidth","me","addGap","eachNode","BFTraverse","MAX_VALUE","isolated","treeSize","rightTreeSize","getSide","_setPrototypeOf","setPrototypeOf","__proto__","TreeLayout","nonLayeredTidyTree","doTreeLayout","CompactBoxTreeLayout","_TreeLayout","WrappedTree","cs","prelim","tl","tr","er","msel","mser","moveRight","move","getMin","convertBack","converted","setExtremes","separate","ih","sr","mssr","cl","mscl","nxt","moveSubtree","sy","nextRightContour","nextLeftContour","modsumcl","li","setLeftThread","modsumsr","ri","setRightThread","si","nr","distributeExtra","updateIYL","wt","firstWalk","positionRoot","secondWalk","modsum","modsumdelta","addChildSpacing","DendrogramLayout","leftChild","rightChild","nodeSep","rankSep","subTreeSep","prevLeaf","maxDepth","wrappedTreeFromNode","childrenCount","childWT","originNode","getDrawingDepth","drawingDepth","depths","minChildDepth","indentedTree","IndentedLayout","_options$indent","indent","_options$dropCap","dropCap","_options$direction","previousNode","displacementX","prevParent","preY","positionNode","MindmapLayout","totalHeight","_subTreeSep","getSubTreeSep","thirdWalk","childrenHeight","childrenTotalHeight","baseGet","baseGetTag","isObjectLike","baseAssignValue","baseForOwn","baseIteratee","iteratee"],"sourceRoot":""}