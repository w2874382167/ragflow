{"version":3,"file":"390.83e27573.async.js","mappings":"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","sources":["webpack://web/./src/components/file-icon/index.less?cab7","webpack://web/./src/components/file-icon/index.tsx","webpack://web/./src/components/highlight-markdown/index.less?13d5","webpack://web/./src/components/highlight-markdown/index.tsx","webpack://web/./src/components/image/index.less?25dc","webpack://web/./src/components/image/index.tsx","webpack://web/./src/components/indented-tree/indented-tree.tsx","webpack://web/./src/components/new-document-link.tsx","webpack://web/./src/components/pdf-drawer/hooks.ts","webpack://web/./src/components/pdf-previewer/index.less?80cf","webpack://web/./src/components/pdf-previewer/index.tsx","webpack://web/./src/components/pdf-drawer/index.tsx","webpack://web/./src/components/pdf-previewer/hooks.ts","webpack://web/./src/hooks/document-hooks.ts","webpack://web/./src/pages/chat/markdown-content/index.less?ed51","webpack://web/./src/pages/chat/markdown-content/index.tsx","webpack://web/./src/pages/chat/utils.ts","webpack://web/./src/pages/document-viewer/file-error/index.less?9a0d","webpack://web/./src/pages/document-viewer/file-error/index.tsx","webpack://web/./src/utils/document-util.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"thumbnailImg\":\"thumbnailImg___cbGoI\"};","import { getExtension } from '@/utils/document-util';\nimport SvgIcon from '../svg-icon';\n\nimport { useFetchDocumentThumbnailsByIds } from '@/hooks/document-hooks';\nimport { useEffect } from 'react';\nimport styles from './index.less';\n\ninterface IProps {\n  name: string;\n  id: string;\n}\n\nconst FileIcon = ({ name, id }: IProps) => {\n  const fileExtension = getExtension(name);\n\n  const { data: fileThumbnails, setDocumentIds } =\n    useFetchDocumentThumbnailsByIds();\n  const fileThumbnail = fileThumbnails[id];\n\n  useEffect(() => {\n    if (id) {\n      setDocumentIds([id]);\n    }\n  }, [id, setDocumentIds]);\n\n  return fileThumbnail ? (\n    <img src={fileThumbnail} className={styles.thumbnailImg}></img>\n  ) : (\n    <SvgIcon name={`file-icon/${fileExtension}`} width={24}></SvgIcon>\n  );\n};\n\nexport default FileIcon;\n","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"text___QzeTq\",\"code\":\"code___dMLXp\"};","import classNames from 'classnames';\nimport Markdown from 'react-markdown';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport rehypeKatex from 'rehype-katex';\nimport rehypeRaw from 'rehype-raw';\nimport remarkGfm from 'remark-gfm';\nimport remarkMath from 'remark-math';\n\nimport 'katex/dist/katex.min.css'; // `rehype-katex` does not import the CSS for you\n\nimport { preprocessLaTeX } from '@/utils/chat';\nimport styles from './index.less';\n\nconst HightLightMarkdown = ({\n  children,\n}: {\n  children: string | null | undefined;\n}) => {\n  return (\n    <Markdown\n      remarkPlugins={[remarkGfm, remarkMath]}\n      rehypePlugins={[rehypeRaw, rehypeKatex]}\n      className={classNames(styles.text)}\n      components={\n        {\n          code(props: any) {\n            const { children, className, node, ...rest } = props;\n            const match = /language-(\\w+)/.exec(className || '');\n            return match ? (\n              <SyntaxHighlighter\n                {...rest}\n                PreTag=\"div\"\n                language={match[1]}\n                // style={dark}\n              >\n                {String(children).replace(/\\n$/, '')}\n              </SyntaxHighlighter>\n            ) : (\n              <code {...rest} className={`${className} ${styles.code}`}>\n                {children}\n              </code>\n            );\n          },\n        } as any\n      }\n    >\n      {children ? preprocessLaTeX(children) : children}\n    </Markdown>\n  );\n};\n\nexport default HightLightMarkdown;\n","// extracted by mini-css-extract-plugin\nexport default {\"primitiveImg\":\"primitiveImg___VkCiH\",\"image\":\"image___BCkCB\",\"imagePreview\":\"imagePreview___qFyP3\"};","import { api_host } from '@/utils/api';\nimport { Popover } from 'antd';\nimport classNames from 'classnames';\n\nimport styles from './index.less';\n\ninterface IImage {\n  id: string;\n  className: string;\n}\n\nconst Image = ({ id, className, ...props }: IImage) => {\n  return (\n    <img\n      {...props}\n      src={`${api_host}/document/image/${id}`}\n      alt=\"\"\n      className={classNames(styles.primitiveImg, className)}\n    />\n  );\n};\n\nexport default Image;\n\nexport const ImageWithPopover = ({ id }: { id: string }) => {\n  return (\n    <Popover\n      placement=\"left\"\n      content={<Image id={id} className={styles.imagePreview}></Image>}\n    >\n      <Image id={id} className={styles.image}></Image>\n    </Popover>\n  );\n};\n","import { Rect } from '@antv/g';\nimport {\n  Badge,\n  BaseBehavior,\n  BaseNode,\n  CommonEvent,\n  ExtensionCategory,\n  Graph,\n  NodeEvent,\n  Point,\n  Polyline,\n  PolylineStyleProps,\n  register,\n  subStyleProps,\n  treeToGraphData,\n} from '@antv/g6';\nimport { TreeData } from '@antv/g6/lib/types';\nimport isEmpty from 'lodash/isEmpty';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { ErrorBoundary, FallbackProps } from 'react-error-boundary';\n\nconst rootId = 'root';\n\nconst COLORS = [\n  '#5B8FF9',\n  '#F6BD16',\n  '#5AD8A6',\n  '#945FB9',\n  '#E86452',\n  '#6DC8EC',\n  '#FF99C3',\n  '#1E9493',\n  '#FF9845',\n  '#5D7092',\n];\n\nconst TreeEvent = {\n  COLLAPSE_EXPAND: 'collapse-expand',\n  WHEEL: 'canvas:wheel',\n};\n\nclass IndentedNode extends BaseNode {\n  static defaultStyleProps = {\n    ports: [\n      {\n        key: 'in',\n        placement: 'right-bottom',\n      },\n      {\n        key: 'out',\n        placement: 'left-bottom',\n      },\n    ],\n  } as any;\n\n  constructor(options: any) {\n    Object.assign(options.style, IndentedNode.defaultStyleProps);\n    super(options);\n  }\n\n  get childrenData() {\n    return this.attributes.context?.model.getChildrenData(this.id);\n  }\n\n  getKeyStyle(attributes: any) {\n    const [width, height] = this.getSize(attributes);\n    const keyStyle = super.getKeyStyle(attributes);\n    return {\n      width,\n      height,\n      ...keyStyle,\n      fill: 'transparent',\n    };\n  }\n\n  drawKeyShape(attributes: any, container: any) {\n    const keyStyle = this.getKeyStyle(attributes);\n    return this.upsert('key', Rect, keyStyle, container);\n  }\n\n  getLabelStyle(attributes: any) {\n    if (attributes.label === false || !attributes.labelText) return false;\n    return subStyleProps(this.getGraphicStyle(attributes), 'label') as any;\n  }\n\n  drawIconArea(attributes: any, container: any) {\n    const [, h] = this.getSize(attributes);\n    const iconAreaStyle = {\n      fill: 'transparent',\n      height: 30,\n      width: 12,\n      x: -6,\n      y: h,\n      zIndex: -1,\n    };\n    this.upsert('icon-area', Rect, iconAreaStyle, container);\n  }\n\n  forwardEvent(target: any, type: any, listener: any) {\n    if (target && !Reflect.has(target, '__bind__')) {\n      Reflect.set(target, '__bind__', true);\n      target.addEventListener(type, listener);\n    }\n  }\n\n  getCountStyle(attributes: any) {\n    const { collapsed, color } = attributes;\n    if (collapsed) {\n      const [, height] = this.getSize(attributes);\n      return {\n        backgroundFill: color,\n        cursor: 'pointer',\n        fill: '#fff',\n        fontSize: 8,\n        padding: [0, 10],\n        text: `${this.childrenData?.length}`,\n        textAlign: 'center',\n        y: height + 8,\n      };\n    }\n\n    return false;\n  }\n\n  drawCountShape(attributes: any, container: any) {\n    const countStyle = this.getCountStyle(attributes);\n    const btn = this.upsert('count', Badge, countStyle as any, container);\n\n    this.forwardEvent(btn, CommonEvent.CLICK, (event: any) => {\n      event.stopPropagation();\n      attributes.context.graph.emit(TreeEvent.COLLAPSE_EXPAND, {\n        id: this.id,\n        collapsed: false,\n      });\n    });\n  }\n\n  isShowCollapse(attributes: any) {\n    return (\n      !attributes.collapsed &&\n      Array.isArray(this.childrenData) &&\n      this.childrenData?.length > 0\n    );\n  }\n\n  getCollapseStyle(attributes: any) {\n    const { showIcon, color } = attributes;\n    if (!this.isShowCollapse(attributes)) return false;\n    const [, height] = this.getSize(attributes);\n    return {\n      visibility: showIcon ? 'visible' : 'hidden',\n      backgroundFill: color,\n      backgroundHeight: 12,\n      backgroundWidth: 12,\n      cursor: 'pointer',\n      fill: '#fff',\n      fontFamily: 'iconfont',\n      fontSize: 8,\n      text: '\\ue6e4',\n      textAlign: 'center',\n      x: -1, // half of edge line width\n      y: height + 8,\n    };\n  }\n\n  drawCollapseShape(attributes: any, container: any) {\n    const iconStyle = this.getCollapseStyle(attributes);\n    const btn = this.upsert(\n      'collapse-expand',\n      Badge,\n      iconStyle as any,\n      container,\n    );\n\n    this.forwardEvent(btn, CommonEvent.CLICK, (event: any) => {\n      event.stopPropagation();\n      attributes.context.graph.emit(TreeEvent.COLLAPSE_EXPAND, {\n        id: this.id,\n        collapsed: !attributes.collapsed,\n      });\n    });\n  }\n\n  getAddStyle(attributes: any) {\n    const { collapsed, showIcon } = attributes;\n    if (collapsed) return false;\n    const [, height] = this.getSize(attributes);\n    const color = '#ddd';\n    const lineWidth = 1;\n\n    return {\n      visibility: showIcon ? 'visible' : 'hidden',\n      backgroundFill: '#fff',\n      backgroundHeight: 12,\n      backgroundLineWidth: lineWidth,\n      backgroundStroke: color,\n      backgroundWidth: 12,\n      cursor: 'pointer',\n      fill: color,\n      fontFamily: 'iconfont',\n      text: '\\ue664',\n      textAlign: 'center',\n      x: -1,\n      y: height + (this.isShowCollapse(attributes) ? 22 : 8),\n    };\n  }\n\n  render(attributes = this.parsedAttributes, container = this) {\n    super.render(attributes, container);\n\n    this.drawCountShape(attributes, container);\n\n    this.drawIconArea(attributes, container);\n    this.drawCollapseShape(attributes, container);\n  }\n}\n\nclass IndentedEdge extends Polyline {\n  getControlPoints(\n    attributes: Required<PolylineStyleProps>,\n    sourcePoint: Point,\n    targetPoint: Point,\n  ) {\n    const [sx] = sourcePoint;\n    const [, ty] = targetPoint;\n    return [[sx, ty]] as any;\n  }\n}\n\nclass CollapseExpandTree extends BaseBehavior {\n  constructor(context: any, options: any) {\n    super(context, options);\n    this.bindEvents();\n  }\n\n  update(options: any) {\n    this.unbindEvents();\n    super.update(options);\n    this.bindEvents();\n  }\n\n  bindEvents() {\n    const { graph } = this.context;\n\n    graph.on(NodeEvent.POINTER_ENTER, this.showIcon);\n    graph.on(NodeEvent.POINTER_LEAVE, this.hideIcon);\n    graph.on(TreeEvent.COLLAPSE_EXPAND, this.onCollapseExpand);\n  }\n\n  unbindEvents() {\n    const { graph } = this.context;\n\n    graph.off(NodeEvent.POINTER_ENTER, this.showIcon);\n    graph.off(NodeEvent.POINTER_LEAVE, this.hideIcon);\n    graph.off(TreeEvent.COLLAPSE_EXPAND, this.onCollapseExpand);\n  }\n\n  status = 'idle';\n\n  showIcon = (event: any) => {\n    this.setIcon(event, true);\n  };\n\n  hideIcon = (event: any) => {\n    this.setIcon(event, false);\n  };\n\n  setIcon = (event: any, show: boolean) => {\n    if (this.status !== 'idle') return;\n    const { target } = event;\n    const id = target.id;\n    const { graph, element } = this.context;\n    graph.updateNodeData([{ id, style: { showIcon: show } }]);\n    element?.draw({ animation: false, silence: true });\n  };\n\n  onCollapseExpand = async (event: any) => {\n    this.status = 'busy';\n    const { id, collapsed } = event;\n    const { graph } = this.context;\n    if (collapsed) await graph.collapseElement(id);\n    else await graph.expandElement(id);\n    this.status = 'idle';\n  };\n}\n\nregister(ExtensionCategory.NODE, 'indented', IndentedNode);\nregister(ExtensionCategory.EDGE, 'indented', IndentedEdge);\nregister(\n  ExtensionCategory.BEHAVIOR,\n  'collapse-expand-tree',\n  CollapseExpandTree,\n);\n\ninterface IProps {\n  data: TreeData;\n  show: boolean;\n  style?: React.CSSProperties;\n}\n\nfunction fallbackRender({ error }: FallbackProps) {\n  // Call resetErrorBoundary() to reset the error boundary and retry the render.\n\n  return (\n    <div role=\"alert\">\n      <p>Something went wrong:</p>\n      <pre style={{ color: 'red' }}>{error.message}</pre>\n    </div>\n  );\n}\n\nconst IndentedTree = ({ data, show, style = {} }: IProps) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const graphRef = useRef<Graph | null>(null);\n  const assignIds = React.useCallback(function assignIds(\n    node: TreeData,\n    parentId: string = '',\n    index = 0,\n  ) {\n    if (!node.id) node.id = parentId ? `${parentId}-${index}` : 'root';\n    if (node.children) {\n      node.children.forEach((child, idx) => assignIds(child, node.id, idx));\n    }\n  }, []);\n\n  const render = useCallback(\n    async (data: TreeData) => {\n      const graph: Graph = new Graph({\n        container: containerRef.current!,\n        x: 60,\n        node: {\n          type: 'indented',\n          style: {\n            size: (d) => [d.id.length * 6 + 10, 20],\n            labelBackground: (datum) => datum.id === rootId,\n            labelBackgroundRadius: 0,\n            labelBackgroundFill: '#576286',\n            labelFill: (datum) => (datum.id === rootId ? '#fff' : '#666'),\n            labelText: (d) => d.style?.labelText || d.id,\n            labelTextAlign: (datum) =>\n              datum.id === rootId ? 'center' : 'left',\n            labelTextBaseline: 'top',\n            color: (datum: any) => {\n              const depth = graph.getAncestorsData(datum.id, 'tree').length - 1;\n              return COLORS[depth % COLORS.length] || '#576286';\n            },\n          },\n          state: {\n            selected: {\n              lineWidth: 0,\n              labelFill: '#40A8FF',\n              labelBackground: true,\n              labelFontWeight: 'normal',\n              labelBackgroundFill: '#e8f7ff',\n              labelBackgroundRadius: 10,\n            },\n          },\n        },\n        edge: {\n          type: 'indented',\n          style: {\n            radius: 16,\n            lineWidth: 2,\n            sourcePort: 'out',\n            targetPort: 'in',\n            stroke: (datum: any) => {\n              const depth = graph.getAncestorsData(datum.source, 'tree').length;\n              return COLORS[depth % COLORS.length] || 'black';\n            },\n          },\n        },\n        layout: {\n          type: 'indented',\n          direction: 'LR',\n          isHorizontal: true,\n          indent: 40,\n          getHeight: () => 20,\n          getVGap: () => 10,\n        },\n        behaviors: [\n          'scroll-canvas',\n          'collapse-expand-tree',\n          {\n            type: 'click-select',\n            enable: (event: any) =>\n              event.targetType === 'node' && event.target.id !== rootId,\n          },\n        ],\n      });\n\n      if (graphRef.current) {\n        graphRef.current.destroy();\n      }\n\n      graphRef.current = graph;\n\n      assignIds(data);\n\n      graph?.setData(treeToGraphData(data));\n\n      graph?.render();\n    },\n    [assignIds],\n  );\n\n  useEffect(() => {\n    if (!isEmpty(data)) {\n      render(data);\n    }\n  }, [render, data]);\n\n  return (\n    <ErrorBoundary fallbackRender={fallbackRender}>\n      <div\n        id=\"tree\"\n        ref={containerRef}\n        style={{\n          width: '90vw',\n          height: '80vh',\n          display: show ? 'block' : 'none',\n          ...style,\n        }}\n      />\n    </ErrorBoundary>\n  );\n};\n\nexport default IndentedTree;\n","import {\n  getExtension,\n  isSupportedPreviewDocumentType,\n} from '@/utils/document-util';\nimport React from 'react';\n\ninterface IProps extends React.PropsWithChildren {\n  link?: string;\n  preventDefault?: boolean;\n  color?: string;\n  documentName: string;\n  documentId?: string;\n  prefix?: string;\n}\n\nconst NewDocumentLink = ({\n  children,\n  link,\n  preventDefault = false,\n  color = 'rgb(15, 79, 170)',\n  documentId,\n  documentName,\n  prefix = 'file',\n}: IProps) => {\n  let nextLink = link;\n  const extension = getExtension(documentName);\n  if (!link) {\n    nextLink = `/document/${documentId}?ext=${extension}&prefix=${prefix}`;\n  }\n\n  return (\n    <a\n      target=\"_blank\"\n      onClick={\n        !preventDefault || isSupportedPreviewDocumentType(extension)\n          ? undefined\n          : (e) => e.preventDefault()\n      }\n      href={nextLink}\n      rel=\"noreferrer\"\n      style={{ color, wordBreak: 'break-all' }}\n    >\n      {children}\n    </a>\n  );\n};\n\nexport default NewDocumentLink;\n","import { useSetModalState } from '@/hooks/common-hooks';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { useCallback, useState } from 'react';\n\nexport const useClickDrawer = () => {\n  const { visible, showModal, hideModal } = useSetModalState();\n  const [selectedChunk, setSelectedChunk] = useState<IReferenceChunk>(\n    {} as IReferenceChunk,\n  );\n  const [documentId, setDocumentId] = useState<string>('');\n\n  const clickDocumentButton = useCallback(\n    (documentId: string, chunk: IReferenceChunk) => {\n      showModal();\n      setSelectedChunk(chunk);\n      setDocumentId(documentId);\n    },\n    [showModal],\n  );\n\n  return {\n    clickDocumentButton,\n    visible,\n    showModal,\n    hideModal,\n    selectedChunk,\n    documentId,\n  };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"documentContainer\":\"documentContainer___kWzt7\"};","import {\n  useGetChunkHighlights,\n  useGetDocumentUrl,\n} from '@/hooks/document-hooks';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport FileError from '@/pages/document-viewer/file-error';\nimport { Skeleton } from 'antd';\nimport { useEffect, useRef, useState } from 'react';\nimport {\n  AreaHighlight,\n  Highlight,\n  IHighlight,\n  PdfHighlighter,\n  PdfLoader,\n  Popup,\n} from 'react-pdf-highlighter';\nimport { useCatchDocumentError } from './hooks';\n\nimport styles from './index.less';\n\ninterface IProps {\n  chunk: IChunk | IReferenceChunk;\n  documentId: string;\n  visible: boolean;\n}\n\nconst HighlightPopup = ({\n  comment,\n}: {\n  comment: { text: string; emoji: string };\n}) =>\n  comment.text ? (\n    <div className=\"Highlight__popup\">\n      {comment.emoji} {comment.text}\n    </div>\n  ) : null;\n\nconst DocumentPreviewer = ({ chunk, documentId, visible }: IProps) => {\n  const getDocumentUrl = useGetDocumentUrl(documentId);\n  const { highlights: state, setWidthAndHeight } = useGetChunkHighlights(chunk);\n  const ref = useRef<(highlight: IHighlight) => void>(() => {});\n  const [loaded, setLoaded] = useState(false);\n  const url = getDocumentUrl();\n  const error = useCatchDocumentError(url);\n\n  const resetHash = () => {};\n\n  useEffect(() => {\n    setLoaded(visible);\n  }, [visible]);\n\n  useEffect(() => {\n    if (state.length > 0 && loaded) {\n      setLoaded(false);\n      ref.current(state[0]);\n    }\n  }, [state, loaded]);\n\n  return (\n    <div className={styles.documentContainer}>\n      <PdfLoader\n        url={url}\n        beforeLoad={<Skeleton active />}\n        workerSrc=\"/pdfjs-dist/pdf.worker.min.js\"\n        errorMessage={<FileError>{error}</FileError>}\n      >\n        {(pdfDocument) => {\n          pdfDocument.getPage(1).then((page) => {\n            const viewport = page.getViewport({ scale: 1 });\n            const width = viewport.width;\n            const height = viewport.height;\n            setWidthAndHeight(width, height);\n          });\n\n          return (\n            <PdfHighlighter\n              pdfDocument={pdfDocument}\n              enableAreaSelection={(event) => event.altKey}\n              onScrollChange={resetHash}\n              scrollRef={(scrollTo) => {\n                ref.current = scrollTo;\n                setLoaded(true);\n              }}\n              onSelectionFinished={() => null}\n              highlightTransform={(\n                highlight,\n                index,\n                setTip,\n                hideTip,\n                viewportToScaled,\n                screenshot,\n                isScrolledTo,\n              ) => {\n                const isTextHighlight = !Boolean(\n                  highlight.content && highlight.content.image,\n                );\n\n                const component = isTextHighlight ? (\n                  <Highlight\n                    isScrolledTo={isScrolledTo}\n                    position={highlight.position}\n                    comment={highlight.comment}\n                  />\n                ) : (\n                  <AreaHighlight\n                    isScrolledTo={isScrolledTo}\n                    highlight={highlight}\n                    onChange={() => {}}\n                  />\n                );\n\n                return (\n                  <Popup\n                    popupContent={<HighlightPopup {...highlight} />}\n                    onMouseOver={(popupContent) =>\n                      setTip(highlight, () => popupContent)\n                    }\n                    onMouseOut={hideTip}\n                    key={index}\n                  >\n                    {component}\n                  </Popup>\n                );\n              }}\n              highlights={state}\n            />\n          );\n        }}\n      </PdfLoader>\n    </div>\n  );\n};\n\nexport default DocumentPreviewer;\n","import { IModalProps } from '@/interfaces/common';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport { Drawer } from 'antd';\nimport DocumentPreviewer from '../pdf-previewer';\n\ninterface IProps extends IModalProps<any> {\n  documentId: string;\n  chunk: IChunk | IReferenceChunk;\n}\n\nexport const PdfDrawer = ({\n  visible = false,\n  hideModal,\n  documentId,\n  chunk,\n}: IProps) => {\n  return (\n    <Drawer\n      title=\"Document Previewer\"\n      onClose={hideModal}\n      open={visible}\n      width={'50vw'}\n    >\n      <DocumentPreviewer\n        documentId={documentId}\n        chunk={chunk}\n        visible={visible}\n      ></DocumentPreviewer>\n    </Drawer>\n  );\n};\n\nexport default PdfDrawer;\n","import axios from 'axios';\nimport { useCallback, useEffect, useState } from 'react';\n\nexport const useCatchDocumentError = (url: string) => {\n  const [error, setError] = useState<string>('');\n\n  const fetchDocument = useCallback(async () => {\n    const { data } = await axios.get(url);\n    if (data.code !== 0) {\n      setError(data?.message);\n    }\n  }, [url]);\n  useEffect(() => {\n    fetchDocument();\n  }, [fetchDocument]);\n\n  return error;\n};\n","import { IReferenceChunk } from '@/interfaces/database/chat';\nimport { IDocumentInfo } from '@/interfaces/database/document';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport {\n  IChangeParserConfigRequestBody,\n  IDocumentMetaRequestBody,\n} from '@/interfaces/request/document';\nimport i18n from '@/locales/config';\nimport chatService from '@/services/chat-service';\nimport kbService from '@/services/knowledge-service';\nimport api, { api_host } from '@/utils/api';\nimport { buildChunkHighlights } from '@/utils/document-util';\nimport { post } from '@/utils/request';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { UploadFile, message } from 'antd';\nimport { get } from 'lodash';\nimport { useCallback, useMemo, useState } from 'react';\nimport { IHighlight } from 'react-pdf-highlighter';\nimport { useParams } from 'umi';\nimport {\n  useGetPaginationWithRouter,\n  useHandleSearchChange,\n} from './logic-hooks';\nimport {\n  useGetKnowledgeSearchParams,\n  useSetPaginationParams,\n} from './route-hook';\n\nexport const useGetDocumentUrl = (documentId?: string) => {\n  const getDocumentUrl = useCallback(\n    (id?: string) => {\n      return `${api_host}/document/get/${documentId || id}`;\n    },\n    [documentId],\n  );\n\n  return getDocumentUrl;\n};\n\nexport const useGetChunkHighlights = (\n  selectedChunk: IChunk | IReferenceChunk,\n) => {\n  const [size, setSize] = useState({ width: 849, height: 1200 });\n\n  const highlights: IHighlight[] = useMemo(() => {\n    return buildChunkHighlights(selectedChunk, size);\n  }, [selectedChunk, size]);\n\n  const setWidthAndHeight = (width: number, height: number) => {\n    setSize((pre) => {\n      if (pre.height !== height || pre.width !== width) {\n        return { height, width };\n      }\n      return pre;\n    });\n  };\n\n  return { highlights, setWidthAndHeight };\n};\n\nexport const useFetchNextDocumentList = () => {\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n  const { searchString, handleInputChange } = useHandleSearchChange();\n  const { pagination, setPagination } = useGetPaginationWithRouter();\n  const { id } = useParams();\n\n  const { data, isFetching: loading } = useQuery<{\n    docs: IDocumentInfo[];\n    total: number;\n  }>({\n    queryKey: ['fetchDocumentList', searchString, pagination],\n    initialData: { docs: [], total: 0 },\n    refetchInterval: 15000,\n    enabled: !!knowledgeId || !!id,\n    queryFn: async () => {\n      const ret = await kbService.get_document_list({\n        kb_id: knowledgeId || id,\n        keywords: searchString,\n        page_size: pagination.pageSize,\n        page: pagination.current,\n      });\n      if (ret.data.code === 0) {\n        return ret.data.data;\n      }\n\n      return {\n        docs: [],\n        total: 0,\n      };\n    },\n  });\n\n  const onInputChange: React.ChangeEventHandler<HTMLInputElement> = useCallback(\n    (e) => {\n      setPagination({ page: 1 });\n      handleInputChange(e);\n    },\n    [handleInputChange, setPagination],\n  );\n\n  return {\n    loading,\n    searchString,\n    documents: data.docs,\n    pagination: { ...pagination, total: data?.total },\n    handleInputChange: onInputChange,\n    setPagination,\n  };\n};\n\nexport const useSetNextDocumentStatus = () => {\n  const queryClient = useQueryClient();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['updateDocumentStatus'],\n    mutationFn: async ({\n      status,\n      documentId,\n    }: {\n      status: boolean;\n      documentId: string;\n    }) => {\n      const { data } = await kbService.document_change_status({\n        doc_id: documentId,\n        status: Number(status),\n      });\n      if (data.code === 0) {\n        message.success(i18n.t('message.modified'));\n        queryClient.invalidateQueries({ queryKey: ['fetchDocumentList'] });\n      }\n      return data;\n    },\n  });\n\n  return { setDocumentStatus: mutateAsync, data, loading };\n};\n\nexport const useSaveNextDocumentName = () => {\n  const queryClient = useQueryClient();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['saveDocumentName'],\n    mutationFn: async ({\n      name,\n      documentId,\n    }: {\n      name: string;\n      documentId: string;\n    }) => {\n      const { data } = await kbService.document_rename({\n        doc_id: documentId,\n        name: name,\n      });\n      if (data.code === 0) {\n        message.success(i18n.t('message.renamed'));\n        queryClient.invalidateQueries({ queryKey: ['fetchDocumentList'] });\n      }\n      return data.code;\n    },\n  });\n\n  return { loading, saveName: mutateAsync, data };\n};\n\nexport const useCreateNextDocument = () => {\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n  const { setPaginationParams, page } = useSetPaginationParams();\n  const queryClient = useQueryClient();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['createDocument'],\n    mutationFn: async (name: string) => {\n      const { data } = await kbService.document_create({\n        name,\n        kb_id: knowledgeId,\n      });\n      if (data.code === 0) {\n        if (page === 1) {\n          queryClient.invalidateQueries({ queryKey: ['fetchDocumentList'] });\n        } else {\n          setPaginationParams(); // fetch document list\n        }\n\n        message.success(i18n.t('message.created'));\n      }\n      return data.code;\n    },\n  });\n\n  return { createDocument: mutateAsync, loading, data };\n};\n\nexport const useSetNextDocumentParser = () => {\n  const queryClient = useQueryClient();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['setDocumentParser'],\n    mutationFn: async ({\n      parserId,\n      documentId,\n      parserConfig,\n    }: {\n      parserId: string;\n      documentId: string;\n      parserConfig: IChangeParserConfigRequestBody;\n    }) => {\n      const { data } = await kbService.document_change_parser({\n        parser_id: parserId,\n        doc_id: documentId,\n        parser_config: parserConfig,\n      });\n      if (data.code === 0) {\n        queryClient.invalidateQueries({ queryKey: ['fetchDocumentList'] });\n\n        message.success(i18n.t('message.modified'));\n      }\n      return data.code;\n    },\n  });\n\n  return { setDocumentParser: mutateAsync, data, loading };\n};\n\nexport const useUploadNextDocument = () => {\n  const queryClient = useQueryClient();\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['uploadDocument'],\n    mutationFn: async (fileList: UploadFile[]) => {\n      const formData = new FormData();\n      formData.append('kb_id', knowledgeId);\n      fileList.forEach((file: any) => {\n        formData.append('file', file);\n      });\n\n      try {\n        const ret = await kbService.document_upload(formData);\n        const code = get(ret, 'data.code');\n\n        if (code === 0 || code === 500) {\n          queryClient.invalidateQueries({ queryKey: ['fetchDocumentList'] });\n        }\n        return ret?.data;\n      } catch (error) {\n        console.warn(error);\n        return {\n          code: 500,\n          message: error + '',\n        };\n      }\n    },\n  });\n\n  return { uploadDocument: mutateAsync, loading, data };\n};\n\nexport const useNextWebCrawl = () => {\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['webCrawl'],\n    mutationFn: async ({ name, url }: { name: string; url: string }) => {\n      const formData = new FormData();\n      formData.append('name', name);\n      formData.append('url', url);\n      formData.append('kb_id', knowledgeId);\n\n      const ret = await kbService.web_crawl(formData);\n      const code = get(ret, 'data.code');\n      if (code === 0) {\n        message.success(i18n.t('message.uploaded'));\n      }\n\n      return code;\n    },\n  });\n\n  return {\n    data,\n    loading,\n    webCrawl: mutateAsync,\n  };\n};\n\nexport const useRunNextDocument = () => {\n  const queryClient = useQueryClient();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['runDocumentByIds'],\n    mutationFn: async ({\n      documentIds,\n      run,\n      shouldDelete,\n    }: {\n      documentIds: string[];\n      run: number;\n      shouldDelete: boolean;\n    }) => {\n      const ret = await kbService.document_run({\n        doc_ids: documentIds,\n        run,\n        delete: shouldDelete,\n      });\n      const code = get(ret, 'data.code');\n      if (code === 0) {\n        queryClient.invalidateQueries({ queryKey: ['fetchDocumentList'] });\n        message.success(i18n.t('message.operated'));\n      }\n\n      return code;\n    },\n  });\n\n  return { runDocumentByIds: mutateAsync, loading, data };\n};\n\nexport const useFetchDocumentInfosByIds = () => {\n  const [ids, setDocumentIds] = useState<string[]>([]);\n  const { data } = useQuery<IDocumentInfo[]>({\n    queryKey: ['fetchDocumentInfos', ids],\n    enabled: ids.length > 0,\n    initialData: [],\n    queryFn: async () => {\n      const { data } = await kbService.document_infos({ doc_ids: ids });\n      if (data.code === 0) {\n        return data.data;\n      }\n\n      return [];\n    },\n  });\n\n  return { data, setDocumentIds };\n};\n\nexport const useFetchDocumentThumbnailsByIds = () => {\n  const [ids, setDocumentIds] = useState<string[]>([]);\n  const { data } = useQuery<Record<string, string>>({\n    queryKey: ['fetchDocumentThumbnails', ids],\n    enabled: ids.length > 0,\n    initialData: {},\n    queryFn: async () => {\n      const { data } = await kbService.document_thumbnails({ doc_ids: ids });\n      if (data.code === 0) {\n        return data.data;\n      }\n      return {};\n    },\n  });\n\n  return { data, setDocumentIds };\n};\n\nexport const useRemoveNextDocument = () => {\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['removeDocument'],\n    mutationFn: async (documentIds: string | string[]) => {\n      const { data } = await kbService.document_rm({ doc_id: documentIds });\n      if (data.code === 0) {\n        message.success(i18n.t('message.deleted'));\n        queryClient.invalidateQueries({ queryKey: ['fetchDocumentList'] });\n      }\n      return data.code;\n    },\n  });\n\n  return { data, loading, removeDocument: mutateAsync };\n};\n\nexport const useDeleteDocument = () => {\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['deleteDocument'],\n    mutationFn: async (documentIds: string[]) => {\n      const data = await kbService.document_delete({ doc_ids: documentIds });\n\n      return data;\n    },\n  });\n\n  return { data, loading, deleteDocument: mutateAsync };\n};\n\nexport const useUploadAndParseDocument = (uploadMethod: string) => {\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['uploadAndParseDocument'],\n    mutationFn: async ({\n      conversationId,\n      fileList,\n    }: {\n      conversationId: string;\n      fileList: UploadFile[];\n    }) => {\n      try {\n        const formData = new FormData();\n        formData.append('conversation_id', conversationId);\n        fileList.forEach((file: UploadFile) => {\n          formData.append('file', file as any);\n        });\n        if (uploadMethod === 'upload_and_parse') {\n          const data = await kbService.upload_and_parse(formData);\n          return data?.data;\n        }\n        const data = await chatService.uploadAndParseExternal(formData);\n        return data?.data;\n      } catch (error) {}\n    },\n  });\n\n  return { data, loading, uploadAndParseDocument: mutateAsync };\n};\n\nexport const useParseDocument = () => {\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['parseDocument'],\n    mutationFn: async (url: string) => {\n      try {\n        const data = await post(api.parse, { url });\n        if (data?.code === 0) {\n          message.success(i18n.t('message.uploaded'));\n        }\n        return data;\n      } catch (error) {\n        message.error('error');\n      }\n    },\n  });\n\n  return { parseDocument: mutateAsync, data, loading };\n};\n\nexport const useSetDocumentMeta = () => {\n  const queryClient = useQueryClient();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['setDocumentMeta'],\n    mutationFn: async (params: IDocumentMetaRequestBody) => {\n      try {\n        const { data } = await kbService.setMeta({\n          meta: params.meta,\n          doc_id: params.documentId,\n        });\n\n        if (data?.code === 0) {\n          queryClient.invalidateQueries({ queryKey: ['fetchDocumentList'] });\n\n          message.success(i18n.t('message.modified'));\n        }\n        return data?.code;\n      } catch (error) {\n        message.error('error');\n      }\n    },\n  });\n\n  return { setDocumentMeta: mutateAsync, data, loading };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"markdownContentWrapper\":\"markdownContentWrapper___geQCE\",\"referencePopoverWrapper\":\"referencePopoverWrapper___rn9A6\",\"referenceChunkImage\":\"referenceChunkImage___LoR67\",\"referenceImagePreview\":\"referenceImagePreview___kcQgd\",\"chunkContentText\":\"chunkContentText___vcP0P\",\"documentLink\":\"documentLink___USud0\",\"referenceIcon\":\"referenceIcon___g5Mgk\",\"cursor\":\"cursor___rRuWB\",\"blink\":\"blink___BYl7u\",\"fileThumbnail\":\"fileThumbnail___BzBir\"};","import Image from '@/components/image';\nimport SvgIcon from '@/components/svg-icon';\nimport { IReference, IReferenceChunk } from '@/interfaces/database/chat';\nimport { getExtension } from '@/utils/document-util';\nimport { InfoCircleOutlined } from '@ant-design/icons';\nimport { Button, Flex, Popover, Space } from 'antd';\nimport DOMPurify from 'dompurify';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport Markdown from 'react-markdown';\nimport reactStringReplace from 'react-string-replace';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport rehypeKatex from 'rehype-katex';\nimport rehypeRaw from 'rehype-raw';\nimport remarkGfm from 'remark-gfm';\nimport remarkMath from 'remark-math';\nimport { visitParents } from 'unist-util-visit-parents';\n\nimport { useFetchDocumentThumbnailsByIds } from '@/hooks/document-hooks';\nimport { useTranslation } from 'react-i18next';\n\nimport 'katex/dist/katex.min.css'; // `rehype-katex` does not import the CSS for you\n\nimport { preprocessLaTeX, replaceThinkToSection } from '@/utils/chat';\nimport { replaceTextByOldReg } from '../utils';\n\nimport { pipe } from 'lodash/fp';\nimport styles from './index.less';\n\nconst reg = /(~{2}\\d+={2})/g;\n// const curReg = /(~{2}\\d+\\${2})/g;\n\nconst getChunkIndex = (match: string) => Number(match.slice(2, -2));\n// TODO: The display of the table is inconsistent with the display previously placed in the MessageItem.\nconst MarkdownContent = ({\n  reference,\n  clickDocumentButton,\n  content,\n}: {\n  content: string;\n  loading: boolean;\n  reference: IReference;\n  clickDocumentButton?: (documentId: string, chunk: IReferenceChunk) => void;\n}) => {\n  const { t } = useTranslation();\n  const { setDocumentIds, data: fileThumbnails } =\n    useFetchDocumentThumbnailsByIds();\n  const contentWithCursor = useMemo(() => {\n    let text = content;\n    if (text === '') {\n      text = t('chat.searching');\n    }\n    const nextText = replaceTextByOldReg(text);\n    return pipe(replaceThinkToSection, preprocessLaTeX)(nextText);\n  }, [content, t]);\n\n  useEffect(() => {\n    const docAggs = reference?.doc_aggs;\n    setDocumentIds(Array.isArray(docAggs) ? docAggs.map((x) => x.doc_id) : []);\n  }, [reference, setDocumentIds]);\n\n  const handleDocumentButtonClick = useCallback(\n    (\n      documentId: string,\n      chunk: IReferenceChunk,\n      isPdf: boolean,\n      documentUrl?: string,\n    ) =>\n      () => {\n        if (!isPdf) {\n          if (!documentUrl) {\n            return;\n          }\n          window.open(documentUrl, '_blank');\n        } else {\n          clickDocumentButton?.(documentId, chunk);\n        }\n      },\n    [clickDocumentButton],\n  );\n\n  const rehypeWrapReference = () => {\n    return function wrapTextTransform(tree: any) {\n      visitParents(tree, 'text', (node, ancestors) => {\n        const latestAncestor = ancestors.at(-1);\n        if (\n          latestAncestor.tagName !== 'custom-typography' &&\n          latestAncestor.tagName !== 'code'\n        ) {\n          node.type = 'element';\n          node.tagName = 'custom-typography';\n          node.properties = {};\n          node.children = [{ type: 'text', value: node.value }];\n        }\n      });\n    };\n  };\n\n  const getPopoverContent = useCallback(\n    (chunkIndex: number) => {\n      const chunks = reference?.chunks ?? [];\n      const chunkItem = chunks[chunkIndex];\n      const document = reference?.doc_aggs?.find(\n        (x) => x?.doc_id === chunkItem?.document_id,\n      );\n      const documentId = document?.doc_id;\n      const documentUrl = document?.url;\n      const fileThumbnail = documentId ? fileThumbnails[documentId] : '';\n      const fileExtension = documentId ? getExtension(document?.doc_name) : '';\n      const imageId = chunkItem?.image_id;\n      return (\n        <Flex\n          key={chunkItem?.id}\n          gap={10}\n          className={styles.referencePopoverWrapper}\n        >\n          {imageId && (\n            <Popover\n              placement=\"left\"\n              content={\n                <Image\n                  id={imageId}\n                  className={styles.referenceImagePreview}\n                ></Image>\n              }\n            >\n              <Image\n                id={imageId}\n                className={styles.referenceChunkImage}\n              ></Image>\n            </Popover>\n          )}\n          <Space direction={'vertical'}>\n            <div\n              dangerouslySetInnerHTML={{\n                __html: DOMPurify.sanitize(chunkItem?.content ?? ''),\n              }}\n              className={styles.chunkContentText}\n            ></div>\n            {documentId && (\n              <Flex gap={'small'}>\n                {fileThumbnail ? (\n                  <img\n                    src={fileThumbnail}\n                    alt=\"\"\n                    className={styles.fileThumbnail}\n                  />\n                ) : (\n                  <SvgIcon\n                    name={`file-icon/${fileExtension}`}\n                    width={24}\n                  ></SvgIcon>\n                )}\n                <Button\n                  type=\"link\"\n                  className={styles.documentLink}\n                  onClick={handleDocumentButtonClick(\n                    documentId,\n                    chunkItem,\n                    fileExtension === 'pdf',\n                    documentUrl,\n                  )}\n                >\n                  {document?.doc_name}\n                </Button>\n              </Flex>\n            )}\n          </Space>\n        </Flex>\n      );\n    },\n    [reference, fileThumbnails, handleDocumentButtonClick],\n  );\n\n  const renderReference = useCallback(\n    (text: string) => {\n      let replacedText = reactStringReplace(text, reg, (match, i) => {\n        const chunkIndex = getChunkIndex(match);\n        return (\n          <Popover content={getPopoverContent(chunkIndex)} key={i}>\n            <InfoCircleOutlined className={styles.referenceIcon} />\n          </Popover>\n        );\n      });\n\n      // replacedText = reactStringReplace(replacedText, curReg, (match, i) => (\n      //   <span className={styles.cursor} key={i}></span>\n      // ));\n\n      return replacedText;\n    },\n    [getPopoverContent],\n  );\n\n  return (\n    <Markdown\n      rehypePlugins={[rehypeWrapReference, rehypeKatex, rehypeRaw]}\n      remarkPlugins={[remarkGfm, remarkMath]}\n      className={styles.markdownContentWrapper}\n      components={\n        {\n          'custom-typography': ({ children }: { children: string }) =>\n            renderReference(children),\n          code(props: any) {\n            const { children, className, node, ...rest } = props;\n            const match = /language-(\\w+)/.exec(className || '');\n            return match ? (\n              <SyntaxHighlighter {...rest} PreTag=\"div\" language={match[1]}>\n                {String(children).replace(/\\n$/, '')}\n              </SyntaxHighlighter>\n            ) : (\n              <code {...rest} className={className}>\n                {children}\n              </code>\n            );\n          },\n        } as any\n      }\n    >\n      {contentWithCursor}\n    </Markdown>\n  );\n};\n\nexport default MarkdownContent;\n","import { MessageType } from '@/constants/chat';\nimport { IConversation, IReference } from '@/interfaces/database/chat';\nimport { isEmpty } from 'lodash';\nimport { EmptyConversationId } from './constants';\nimport { IMessage } from './interface';\n\nexport const isConversationIdExist = (conversationId: string) => {\n  return conversationId !== EmptyConversationId && conversationId !== '';\n};\n\nexport const getDocumentIdsFromConversionReference = (data: IConversation) => {\n  const documentIds = data.reference.reduce(\n    (pre: Array<string>, cur: IReference) => {\n      cur.doc_aggs\n        ?.map((x) => x.doc_id)\n        .forEach((x) => {\n          if (pre.every((y) => y !== x)) {\n            pre.push(x);\n          }\n        });\n      return pre;\n    },\n    [],\n  );\n  return documentIds.join(',');\n};\n\nexport const buildMessageItemReference = (\n  conversation: { message: IMessage[]; reference: IReference[] },\n  message: IMessage,\n) => {\n  const assistantMessages = conversation.message\n    ?.filter((x) => x.role === MessageType.Assistant)\n    .slice(1);\n  const referenceIndex = assistantMessages.findIndex(\n    (x) => x.id === message.id,\n  );\n  const reference = !isEmpty(message?.reference)\n    ? message?.reference\n    : (conversation?.reference ?? [])[referenceIndex];\n\n  return reference ?? { doc_aggs: [], chunks: [], total: 0 };\n};\n\nconst oldReg = /(#{2}\\d+\\${2})/g;\n\n// To be compatible with the old index matching mode\nexport const replaceTextByOldReg = (text: string) => {\n  return text.replace(oldReg, function (substring) {\n    return `~~${substring.slice(2, -2)}==`;\n  });\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"errorWrapper\":\"errorWrapper___QfVXQ\"};","import { Alert, Flex } from 'antd';\n\nimport { useTranslate } from '@/hooks/common-hooks';\nimport React from 'react';\nimport styles from './index.less';\n\nconst FileError = ({ children }: React.PropsWithChildren) => {\n  const { t } = useTranslate('fileManager');\n  return (\n    <Flex align=\"center\" justify=\"center\" className={styles.errorWrapper}>\n      <Alert\n        type=\"error\"\n        message={<h2>{children || t('fileError')}</h2>}\n      ></Alert>\n    </Flex>\n  );\n};\n\nexport default FileError;\n","import { Images, SupportedPreviewDocumentTypes } from '@/constants/common';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport { UploadFile } from 'antd';\nimport { get } from 'lodash';\nimport { v4 as uuid } from 'uuid';\n\nexport const buildChunkHighlights = (\n  selectedChunk: IChunk | IReferenceChunk,\n  size: { width: number; height: number },\n) => {\n  return Array.isArray(selectedChunk?.positions) &&\n    selectedChunk.positions.every((x) => Array.isArray(x))\n    ? selectedChunk?.positions?.map((x) => {\n        const boundingRect = {\n          width: size.width,\n          height: size.height,\n          x1: x[1],\n          x2: x[2],\n          y1: x[3],\n          y2: x[4],\n        };\n        return {\n          id: uuid(),\n          comment: {\n            text: '',\n            emoji: '',\n          },\n          content: {\n            text:\n              get(selectedChunk, 'content_with_weight') ||\n              get(selectedChunk, 'content', ''),\n          },\n          position: {\n            boundingRect: boundingRect,\n            rects: [boundingRect],\n            pageNumber: x[0],\n          },\n        };\n      })\n    : [];\n};\n\nexport const isFileUploadDone = (file: UploadFile) => file.status === 'done';\n\nexport const getExtension = (name: string) =>\n  name?.slice(name.lastIndexOf('.') + 1).toLowerCase() ?? '';\n\nexport const isPdf = (name: string) => {\n  return getExtension(name) === 'pdf';\n};\n\nexport const getUnSupportedFilesCount = (message: string) => {\n  return message.split('\\n').length;\n};\n\nexport const isSupportedPreviewDocumentType = (fileExtension: string) => {\n  return SupportedPreviewDocumentTypes.includes(fileExtension);\n};\n\nexport const isImage = (image: string) => {\n  return [...Images, 'svg'].some((x) => x === image);\n};\n"],"names":["_ref","name","id","fileExtension","getExtension","_useFetchDocumentThum","useFetchDocumentThumbnailsByIds","fileThumbnails","data","setDocumentIds","fileThumbnail","useEffect","_jsx","src","className","styles","SvgIcon","concat","width","children","Markdown","remarkPlugins","remarkGfm","remarkMath","rehypePlugins","rehypeRaw","rehypeKatex","classNames","components","code","props","rest","node","_objectWithoutProperties","_excluded","match","exec","SyntaxHighlighter","_objectSpread","PreTag","language","String","replace","preprocessLaTeX","Image","api_host","alt","ImageWithPopover","_ref2","Popover","placement","content","rootId","COLORS","TreeEvent","IndentedNode","_BaseNode","_inherits","_super","_createSuper","options","_classCallCheck","Object","assign","style","defaultStyleProps","call","_createClass","key","get","_this$attributes$cont","this","attributes","context","model","getChildrenData","value","_this$getSize","getSize","_this$getSize2","_slicedToArray","height","keyStyle","_get","_getPrototypeOf","prototype","fill","container","getKeyStyle","upsert","Rect","label","labelText","subStyleProps","getGraphicStyle","_this$getSize3","iconAreaStyle","x","y","zIndex","target","type","listener","Reflect","has","set","addEventListener","collapsed","color","_this$childrenData","_this$getSize5","backgroundFill","cursor","fontSize","padding","text","childrenData","length","textAlign","_this","countStyle","getCountStyle","btn","Badge","forwardEvent","CommonEvent","CLICK","event","stopPropagation","graph","emit","_this$childrenData2","Array","isArray","showIcon","isShowCollapse","_this$getSize7","visibility","backgroundHeight","backgroundWidth","fontFamily","_this2","iconStyle","getCollapseStyle","_this$getSize9","backgroundLineWidth","backgroundStroke","arguments","undefined","parsedAttributes","drawCountShape","drawIconArea","drawCollapseShape","BaseNode","_defineProperty","ports","IndentedEdge","_Polyline","_super2","apply","sourcePoint","targetPoint","Polyline","CollapseExpandTree","_BaseBehavior","_super3","_this3","_assertThisInitialized","setIcon","show","status","_this3$context","element","updateNodeData","draw","animation","silence","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","collapseElement","expandElement","stop","_x","bindEvents","unbindEvents","on","NodeEvent","POINTER_ENTER","POINTER_LEAVE","hideIcon","onCollapseExpand","off","BaseBehavior","fallbackRender","error","_jsxs","role","message","register","ExtensionCategory","NODE","EDGE","BEHAVIOR","_ref3","_ref3$style","containerRef","useRef","graphRef","assignIds","React","parentId","index","forEach","child","idx","render","useCallback","_ref4","_callee2","_context2","Graph","current","size","d","labelBackground","datum","labelBackgroundRadius","labelBackgroundFill","labelFill","_d$style","labelTextAlign","labelTextBaseline","depth","getAncestorsData","state","selected","lineWidth","labelFontWeight","edge","radius","sourcePort","targetPort","stroke","source","layout","direction","isHorizontal","indent","getHeight","getVGap","behaviors","enable","targetType","destroy","setData","treeToGraphData","_x2","isEmpty","ErrorBoundary","ref","display","link","_ref$preventDefault","preventDefault","_ref$color","documentId","documentName","_ref$prefix","prefix","nextLink","extension","onClick","isSupportedPreviewDocumentType","e","href","rel","wordBreak","useClickDrawer","_useSetModalState","useSetModalState","visible","showModal","hideModal","_useState","useState","_useState2","selectedChunk","setSelectedChunk","_useState3","_useState4","setDocumentId","clickDocumentButton","chunk","HighlightPopup","comment","emoji","getDocumentUrl","useGetDocumentUrl","_useGetChunkHighlight","useGetChunkHighlights","highlights","setWidthAndHeight","loaded","setLoaded","url","useCatchDocumentError","resetHash","PdfLoader","beforeLoad","Skeleton","active","workerSrc","errorMessage","FileError","pdfDocument","getPage","then","page","viewport","getViewport","scale","PdfHighlighter","enableAreaSelection","altKey","onScrollChange","scrollRef","scrollTo","onSelectionFinished","highlightTransform","highlight","setTip","hideTip","viewportToScaled","screenshot","isScrolledTo","component","Boolean","image","Highlight","position","AreaHighlight","onChange","Popup","popupContent","onMouseOver","onMouseOut","_ref$visible","Drawer","title","onClose","open","DocumentPreviewer","setError","fetchDocument","_yield$axios$get","axios","sent","setSize","useMemo","buildChunkHighlights","pre","useFetchNextDocumentList","_queryFn","knowledgeId","useGetKnowledgeSearchParams","_useHandleSearchChang","useHandleSearchChange","searchString","handleInputChange","_useGetPaginationWith","useGetPaginationWithRouter","pagination","setPagination","useParams","_useQuery","useQuery","queryKey","initialData","docs","total","refetchInterval","enabled","queryFn","ret","kbService","get_document_list","kb_id","keywords","page_size","pageSize","abrupt","loading","isFetching","onInputChange","documents","useSetNextDocumentStatus","_mutationFn","queryClient","useQueryClient","_useMutation","useMutation","mutationKey","mutationFn","_yield$kbService$docu","document_change_status","doc_id","Number","success","i18n","t","invalidateQueries","isPending","setDocumentStatus","mutateAsync","useSaveNextDocumentName","_mutationFn2","_useMutation2","_callee3","_yield$kbService$docu2","_context3","document_rename","saveName","useCreateNextDocument","_mutationFn3","_useSetPaginationPara","useSetPaginationParams","setPaginationParams","_useMutation3","_callee4","_yield$kbService$docu3","_context4","document_create","_x3","createDocument","useSetNextDocumentParser","_mutationFn4","_useMutation4","_callee5","parserId","parserConfig","_yield$kbService$docu4","_context5","document_change_parser","parser_id","parser_config","_x4","setDocumentParser","useUploadNextDocument","_mutationFn5","_useMutation5","_callee6","fileList","formData","_context6","FormData","append","file","document_upload","t0","console","warn","_x5","uploadDocument","useNextWebCrawl","_mutationFn6","_useMutation6","_callee7","_context7","web_crawl","_x6","webCrawl","useRunNextDocument","_mutationFn7","_useMutation7","_callee8","_ref5","documentIds","run","shouldDelete","_context8","document_run","doc_ids","delete","_x7","runDocumentByIds","useFetchDocumentInfosByIds","_queryFn2","ids","_useQuery2","_callee9","_yield$kbService$docu5","_context9","document_infos","_queryFn3","_useState5","_useState6","_useQuery3","_callee10","_yield$kbService$docu6","_context10","document_thumbnails","useRemoveNextDocument","_mutationFn8","_useMutation8","_callee11","_yield$kbService$docu7","_context11","document_rm","_x8","removeDocument","useDeleteDocument","_mutationFn9","_useMutation9","_callee12","_context12","document_delete","_x9","deleteDocument","useUploadAndParseDocument","uploadMethod","_mutationFn10","_useMutation10","_callee13","_ref6","conversationId","_data","_data2","_context13","upload_and_parse","chatService","uploadAndParseExternal","_x10","uploadAndParseDocument","useParseDocument","_mutationFn11","_useMutation11","_callee14","_data3","_context14","post","api","parse","_x11","parseDocument","useSetDocumentMeta","_mutationFn12","_useMutation12","_callee15","params","_yield$kbService$setM","_data4","_context15","setMeta","meta","_x12","setDocumentMeta","reg","reference","useTranslation","contentWithCursor","nextText","replaceTextByOldReg","pipe","replaceThinkToSection","docAggs","doc_aggs","map","handleDocumentButtonClick","isPdf","documentUrl","window","getPopoverContent","chunkIndex","_reference$chunks","_reference$doc_aggs","_chunkItem$content","chunkItem","chunks","document","find","document_id","doc_name","imageId","image_id","Flex","gap","Space","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","Button","renderReference","reactStringReplace","i","slice","getChunkIndex","InfoCircleOutlined","tree","visitParents","ancestors","latestAncestor","at","tagName","properties","buildMessageItemReference","conversation","_conversation$message","_conversation$referen","referenceIndex","filter","MessageType","Assistant","findIndex","oldReg","substring","useTranslate","align","justify","Alert","_selectedChunk$positi","positions","every","boundingRect","x1","x2","y1","y2","uuid","rects","pageNumber","_name$slice$toLowerCa","lastIndexOf","toLowerCase","getUnSupportedFilesCount","split","SupportedPreviewDocumentTypes","includes","isImage","_toConsumableArray","Images","some"],"sourceRoot":""}