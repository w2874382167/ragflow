"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[7081],{92160:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var o=t(10541),i=t(67294),l=t(97857),r=t.n(l),a=t(47736),u=t(41609),c=t.n(u),d=(t(12444),t(72004),t(9783),t(96486),t(57632)),s=function(e){return Array.isArray(e)?e[0]:void 0},v="forceContainer___PdykR",f=t(85893),p={combo:"red",node:"black",edge:"blue"},b=function(e){var n=e.data,t=e.show,o=(0,i.useRef)(null),l=(0,i.useRef)(null),u=(0,i.useMemo)((function(){if(!c()(n)){var e=n,t=(o=e.nodes,i=[],o.forEach((function(e){var n=s(null==e?void 0:e.communities);n&&i.every((function(e){return e.data.label!==n}))&&i.push({isCombo:!0,id:(0,d.Z)(),data:{label:n}})})),{nodes:o.map((function(e){var n;return r()(r()({},e),{},{combo:null===(n=i.find((function(n){return n.data.label===s(null==e?void 0:e.communities)})))||void 0===n?void 0:n.id})})),combos:i});return r()({edges:e.edges},t)}var o,i;return{nodes:[],edges:[]}}),[n]),b=(0,i.useCallback)((function(){var e=new a.kJ({container:o.current,autoFit:"view",autoResize:!0,behaviors:["drag-element","drag-canvas","zoom-canvas","collapse-expand",{type:"hover-activate",degree:1}],plugins:[{type:"tooltip",enterable:!0,getContent:function(e,n){if(Array.isArray(n)){var t;if(n.some((function(e){return null==e?void 0:e.isCombo})))return'<p style="font-weight:600;color:red">'.concat(null==n||null===(t=n[0])||void 0===t||null===(t=t.data)||void 0===t?void 0:t.label,"</p>");var o="";return n.forEach((function(n){o+='<section style="color:'.concat(p[e.targetType],';"><h3>').concat(null==n?void 0:n.id,"</h3>"),null!=n&&n.entity_type&&(o+='<div style="padding-bottom: 6px;"><b>Entity type: </b>'.concat(null==n?void 0:n.entity_type,"</div>")),null!=n&&n.weight&&(o+="<div><b>Weight: </b>".concat(null==n?void 0:n.weight,"</div>")),null!=n&&n.description&&(o+="<p>".concat(null==n?void 0:n.description,"</p>"))})),o+"</section>"}}}],layout:{type:"combo-combined",preventOverlap:!0,comboPadding:1,spacing:100},node:{style:{size:150,labelText:function(e){return e.id},labelFontSize:40,labelOffsetY:20,labelPlacement:"center",labelWordWrap:!0},palette:{type:"group",field:function(e){return null==e?void 0:e.entity_type}}},edge:{style:function(e){var n=4*(Number(null==e?void 0:e.weight)||2);return{stroke:"#99ADD1",lineWidth:n>10?10:n}}}});l.current&&l.current.destroy(),l.current=e,e.setData(u),e.render()}),[u]);return(0,i.useEffect)((function(){c()(n)||b()}),[n,b]),(0,f.jsx)("div",{ref:o,className:v,style:{width:"100%",height:"100%",display:t?"block":"none"}})},y=function(){var e=(0,o.$F)().data;return(0,f.jsx)("section",{className:"w-full h-full",children:(0,f.jsx)(b,{data:null==e?void 0:e.graph,show:!0})})}}}]);
//# sourceMappingURL=p__add-knowledge__components__knowledge-graph__index.2b083966.async.js.map