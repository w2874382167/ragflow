{"version":3,"file":"layouts__index.af4738df.async.js","mappings":"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","sources":["webpack://web/./src/constants/knowledge.ts","webpack://web/./src/hooks/logic-hooks.ts","webpack://web/./src/hooks/route-hook.ts","webpack://web/./src/assets/svg/file-management.svg","webpack://web/./src/assets/svg/graph.svg","webpack://web/./src/assets/svg/knowledge-base.svg","webpack://web/./src/layouts/index.less?90c5","webpack://web/./src/layouts/components/user/index.tsx","webpack://web/./src/layouts/components/right-toolbar/index.less?2923","webpack://web/./src/layouts/components/right-toolbar/index.tsx","webpack://web/./src/layouts/components/header/index.less?a412","webpack://web/./src/layouts/components/header/index.tsx","webpack://web/./src/layouts/index.tsx","webpack://web/./src/utils/chat.ts"],"sourcesContent":["export enum KnowledgeRouteKey {\n  Dataset = 'dataset',\n  Testing = 'testing',\n  Configuration = 'configuration',\n  KnowledgeGraph = 'knowledgeGraph',\n}\n\nexport const DatasetBaseKey = 'dataset';\n\nexport enum RunningStatus {\n  UNSTART = '0', // need to run\n  RUNNING = '1', // need to cancel\n  CANCEL = '2', // need to refresh\n  DONE = '3', // need to refresh\n  FAIL = '4', // need to refresh\n}\n\nexport enum ModelVariableType {\n  Improvise = 'Improvise',\n  Precise = 'Precise',\n  Balance = 'Balance',\n}\n\nexport const settledModelVariableMap = {\n  [ModelVariableType.Improvise]: {\n    temperature: 0.9,\n    top_p: 0.9,\n    frequency_penalty: 0.2,\n    presence_penalty: 0.4,\n    max_tokens: 512,\n  },\n  [ModelVariableType.Precise]: {\n    temperature: 0.1,\n    top_p: 0.3,\n    frequency_penalty: 0.7,\n    presence_penalty: 0.4,\n    max_tokens: 512,\n  },\n  [ModelVariableType.Balance]: {\n    temperature: 0.5,\n    top_p: 0.5,\n    frequency_penalty: 0.7,\n    presence_penalty: 0.4,\n    max_tokens: 512,\n  },\n};\n\nexport enum LlmModelType {\n  Embedding = 'embedding',\n  Chat = 'chat',\n  Image2text = 'image2text',\n  Speech2text = 'speech2text',\n  Rerank = 'rerank',\n  TTS = 'tts',\n}\n\nexport enum KnowledgeSearchParams {\n  DocumentId = 'doc_id',\n  KnowledgeId = 'id',\n}\n\nexport enum DocumentType {\n  Virtual = 'virtual',\n  Visual = 'visual',\n}\n\nexport enum DocumentParserType {\n  Naive = 'naive',\n  Qa = 'qa',\n  Resume = 'resume',\n  Manual = 'manual',\n  Table = 'table',\n  Paper = 'paper',\n  Book = 'book',\n  Laws = 'laws',\n  Presentation = 'presentation',\n  Picture = 'picture',\n  One = 'one',\n  Audio = 'audio',\n  Email = 'email',\n  Tag = 'tag',\n  KnowledgeGraph = 'knowledge_graph',\n}\n","import { Authorization } from '@/constants/authorization';\nimport { MessageType } from '@/constants/chat';\nimport { LanguageTranslationMap } from '@/constants/common';\nimport { ResponseType } from '@/interfaces/database/base';\nimport { IAnswer, Message } from '@/interfaces/database/chat';\nimport { IKnowledgeFile } from '@/interfaces/database/knowledge';\nimport { IClientConversation, IMessage } from '@/pages/chat/interface';\nimport api from '@/utils/api';\nimport { getAuthorization } from '@/utils/authorization-util';\nimport { buildMessageUuid } from '@/utils/chat';\nimport { PaginationProps, message } from 'antd';\nimport { FormInstance } from 'antd/lib';\nimport axios from 'axios';\nimport { EventSourceParserStream } from 'eventsource-parser/stream';\nimport { omit } from 'lodash';\nimport {\n  ChangeEventHandler,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { v4 as uuid } from 'uuid';\nimport { useTranslate } from './common-hooks';\nimport { useSetPaginationParams } from './route-hook';\nimport { useFetchTenantInfo, useSaveSetting } from './user-setting-hooks';\n\nexport const useSetSelectedRecord = <T = IKnowledgeFile>() => {\n  const [currentRecord, setCurrentRecord] = useState<T>({} as T);\n\n  const setRecord = (record: T) => {\n    setCurrentRecord(record);\n  };\n\n  return { currentRecord, setRecord };\n};\n\nexport const useHandleSearchChange = () => {\n  const [searchString, setSearchString] = useState('');\n\n  const handleInputChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      const value = e.target.value;\n      setSearchString(value);\n    },\n    [],\n  );\n\n  return { handleInputChange, searchString };\n};\n\nexport const useChangeLanguage = () => {\n  const { i18n } = useTranslation();\n  const { saveSetting } = useSaveSetting();\n\n  const changeLanguage = (lng: string) => {\n    i18n.changeLanguage(\n      LanguageTranslationMap[lng as keyof typeof LanguageTranslationMap],\n    );\n    saveSetting({ language: lng });\n  };\n\n  return changeLanguage;\n};\n\nexport const useGetPaginationWithRouter = () => {\n  const { t } = useTranslate('common');\n  const {\n    setPaginationParams,\n    page,\n    size: pageSize,\n  } = useSetPaginationParams();\n\n  const onPageChange: PaginationProps['onChange'] = useCallback(\n    (pageNumber: number, pageSize: number) => {\n      setPaginationParams(pageNumber, pageSize);\n    },\n    [setPaginationParams],\n  );\n\n  const setCurrentPagination = useCallback(\n    (pagination: { page: number; pageSize?: number }) => {\n      setPaginationParams(pagination.page, pagination.pageSize);\n    },\n    [setPaginationParams],\n  );\n\n  const pagination: PaginationProps = useMemo(() => {\n    return {\n      showQuickJumper: true,\n      total: 0,\n      showSizeChanger: true,\n      current: page,\n      pageSize: pageSize,\n      pageSizeOptions: [1, 2, 10, 20, 50, 100],\n      onChange: onPageChange,\n      showTotal: (total) => `${t('total')} ${total}`,\n    };\n  }, [t, onPageChange, page, pageSize]);\n\n  return {\n    pagination,\n    setPagination: setCurrentPagination,\n  };\n};\n\nexport const useGetPagination = () => {\n  const [pagination, setPagination] = useState({ page: 1, pageSize: 10 });\n  const { t } = useTranslate('common');\n\n  const onPageChange: PaginationProps['onChange'] = useCallback(\n    (pageNumber: number, pageSize: number) => {\n      setPagination({ page: pageNumber, pageSize });\n    },\n    [],\n  );\n\n  const currentPagination: PaginationProps = useMemo(() => {\n    return {\n      showQuickJumper: true,\n      total: 0,\n      showSizeChanger: true,\n      current: pagination.page,\n      pageSize: pagination.pageSize,\n      pageSizeOptions: [1, 2, 10, 20, 50, 100],\n      onChange: onPageChange,\n      showTotal: (total) => `${t('total')} ${total}`,\n    };\n  }, [t, onPageChange, pagination]);\n\n  return {\n    pagination: currentPagination,\n  };\n};\n\nexport interface AppConf {\n  appName: string;\n}\n\nexport const useFetchAppConf = () => {\n  const [appConf, setAppConf] = useState<AppConf>({} as AppConf);\n  const fetchAppConf = useCallback(async () => {\n    const ret = await axios.get('/conf.json');\n\n    setAppConf(ret.data);\n  }, []);\n\n  useEffect(() => {\n    fetchAppConf();\n  }, [fetchAppConf]);\n\n  return appConf;\n};\n\nexport const useSendMessageWithSse = (\n  url: string = api.completeConversation,\n) => {\n  const [answer, setAnswer] = useState<IAnswer>({} as IAnswer);\n  const [done, setDone] = useState(true);\n  const timer = useRef<any>();\n\n  const resetAnswer = useCallback(() => {\n    if (timer.current) {\n      clearTimeout(timer.current);\n    }\n    timer.current = setTimeout(() => {\n      setAnswer({} as IAnswer);\n      clearTimeout(timer.current);\n    }, 1000);\n  }, []);\n\n  const send = useCallback(\n    async (\n      body: any,\n      controller?: AbortController,\n    ): Promise<{ response: Response; data: ResponseType } | undefined> => {\n      try {\n        setDone(false);\n        const response = await fetch(url, {\n          method: 'POST',\n          headers: {\n            [Authorization]: getAuthorization(),\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(body),\n          signal: controller?.signal,\n        });\n\n        const res = response.clone().json();\n        const reader = response?.body\n          ?.pipeThrough(new TextDecoderStream())\n          .pipeThrough(new EventSourceParserStream())\n          .getReader();\n\n        while (true) {\n          const x = await reader?.read();\n          if (x) {\n            const { done, value } = x;\n            if (done) {\n              console.info('done');\n              resetAnswer();\n              break;\n            }\n            try {\n              const val = JSON.parse(value?.data || '');\n              const d = val?.data;\n              if (typeof d !== 'boolean') {\n                console.info('data:', d);\n                setAnswer({\n                  ...d,\n                  conversationId: body?.conversation_id,\n                });\n              }\n            } catch (e) {\n              console.warn(e);\n            }\n          }\n        }\n        console.info('done?');\n        setDone(true);\n        resetAnswer();\n        return { data: await res, response };\n      } catch (e) {\n        setDone(true);\n        resetAnswer();\n\n        console.warn(e);\n      }\n    },\n    [url, resetAnswer],\n  );\n\n  return { send, answer, done, setDone, resetAnswer };\n};\n\nexport const useSpeechWithSse = (url: string = api.tts) => {\n  const read = useCallback(\n    async (body: any) => {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          [Authorization]: getAuthorization(),\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body),\n      });\n      try {\n        const res = await response.clone().json();\n        if (res?.code !== 0) {\n          message.error(res?.message);\n        }\n      } catch (error) {\n        console.warn('🚀 ~ error:', error);\n      }\n      return response;\n    },\n    [url],\n  );\n\n  return { read };\n};\n\n//#region chat hooks\n\nexport const useScrollToBottom = (messages?: unknown) => {\n  const ref = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = useCallback(() => {\n    if (messages) {\n      ref.current?.scrollIntoView({ behavior: 'instant' });\n    }\n  }, [messages]); // If the message changes, scroll to the bottom\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [scrollToBottom]);\n\n  return ref;\n};\n\nexport const useHandleMessageInputChange = () => {\n  const [value, setValue] = useState('');\n\n  const handleInputChange: ChangeEventHandler<HTMLTextAreaElement> = (e) => {\n    const value = e.target.value;\n    const nextValue = value.replaceAll('\\\\n', '\\n').replaceAll('\\\\t', '\\t');\n    setValue(nextValue);\n  };\n\n  return {\n    handleInputChange,\n    value,\n    setValue,\n  };\n};\n\nexport const useSelectDerivedMessages = () => {\n  const [derivedMessages, setDerivedMessages] = useState<IMessage[]>([]);\n\n  const ref = useScrollToBottom(derivedMessages);\n\n  const addNewestQuestion = useCallback(\n    (message: Message, answer: string = '') => {\n      setDerivedMessages((pre) => {\n        return [\n          ...pre,\n          {\n            ...message,\n            id: buildMessageUuid(message), // The message id is generated on the front end,\n            // and the message id returned by the back end is the same as the question id,\n            //  so that the pair of messages can be deleted together when deleting the message\n          },\n          {\n            role: MessageType.Assistant,\n            content: answer,\n            id: buildMessageUuid({ ...message, role: MessageType.Assistant }),\n          },\n        ];\n      });\n    },\n    [],\n  );\n\n  // Add the streaming message to the last item in the message list\n  const addNewestAnswer = useCallback((answer: IAnswer) => {\n    setDerivedMessages((pre) => {\n      return [\n        ...(pre?.slice(0, -1) ?? []),\n        {\n          role: MessageType.Assistant,\n          content: answer.answer,\n          reference: answer.reference,\n          id: buildMessageUuid({\n            id: answer.id,\n            role: MessageType.Assistant,\n          }),\n          prompt: answer.prompt,\n          audio_binary: answer.audio_binary,\n          ...omit(answer, 'reference'),\n        },\n      ];\n    });\n  }, []);\n\n  const removeLatestMessage = useCallback(() => {\n    setDerivedMessages((pre) => {\n      const nextMessages = pre?.slice(0, -2) ?? [];\n      return nextMessages;\n    });\n  }, []);\n\n  const removeMessageById = useCallback(\n    (messageId: string) => {\n      setDerivedMessages((pre) => {\n        const nextMessages = pre?.filter((x) => x.id !== messageId) ?? [];\n        return nextMessages;\n      });\n    },\n    [setDerivedMessages],\n  );\n\n  const removeMessagesAfterCurrentMessage = useCallback(\n    (messageId: string) => {\n      setDerivedMessages((pre) => {\n        const index = pre.findIndex((x) => x.id === messageId);\n        if (index !== -1) {\n          let nextMessages = pre.slice(0, index + 2) ?? [];\n          const latestMessage = nextMessages.at(-1);\n          nextMessages = latestMessage\n            ? [\n                ...nextMessages.slice(0, -1),\n                {\n                  ...latestMessage,\n                  content: '',\n                  reference: undefined,\n                  prompt: undefined,\n                },\n              ]\n            : nextMessages;\n          return nextMessages;\n        }\n        return pre;\n      });\n    },\n    [setDerivedMessages],\n  );\n\n  return {\n    ref,\n    derivedMessages,\n    setDerivedMessages,\n    addNewestQuestion,\n    addNewestAnswer,\n    removeLatestMessage,\n    removeMessageById,\n    removeMessagesAfterCurrentMessage,\n  };\n};\n\nexport interface IRemoveMessageById {\n  removeMessageById(messageId: string): void;\n}\n\nexport const useRemoveMessagesAfterCurrentMessage = (\n  setCurrentConversation: (\n    callback: (state: IClientConversation) => IClientConversation,\n  ) => void,\n) => {\n  const removeMessagesAfterCurrentMessage = useCallback(\n    (messageId: string) => {\n      setCurrentConversation((pre) => {\n        const index = pre.message?.findIndex((x) => x.id === messageId);\n        if (index !== -1) {\n          let nextMessages = pre.message?.slice(0, index + 2) ?? [];\n          const latestMessage = nextMessages.at(-1);\n          nextMessages = latestMessage\n            ? [\n                ...nextMessages.slice(0, -1),\n                {\n                  ...latestMessage,\n                  content: '',\n                  reference: undefined,\n                  prompt: undefined,\n                },\n              ]\n            : nextMessages;\n          return {\n            ...pre,\n            message: nextMessages,\n          };\n        }\n        return pre;\n      });\n    },\n    [setCurrentConversation],\n  );\n\n  return { removeMessagesAfterCurrentMessage };\n};\n\nexport interface IRegenerateMessage {\n  regenerateMessage?: (message: Message) => void;\n}\n\nexport const useRegenerateMessage = ({\n  removeMessagesAfterCurrentMessage,\n  sendMessage,\n  messages,\n}: {\n  removeMessagesAfterCurrentMessage(messageId: string): void;\n  sendMessage({\n    message,\n  }: {\n    message: Message;\n    messages?: Message[];\n  }): void | Promise<any>;\n  messages: Message[];\n}) => {\n  const regenerateMessage = useCallback(\n    async (message: Message) => {\n      if (message.id) {\n        removeMessagesAfterCurrentMessage(message.id);\n        const index = messages.findIndex((x) => x.id === message.id);\n        let nextMessages;\n        if (index !== -1) {\n          nextMessages = messages.slice(0, index);\n        }\n        sendMessage({\n          message: { ...message, id: uuid() },\n          messages: nextMessages,\n        });\n      }\n    },\n    [removeMessagesAfterCurrentMessage, sendMessage, messages],\n  );\n\n  return { regenerateMessage };\n};\n\n// #endregion\n\n/**\n *\n * @param defaultId\n * used to switch between different items, similar to radio\n * @returns\n */\nexport const useSelectItem = (defaultId?: string) => {\n  const [selectedId, setSelectedId] = useState('');\n\n  const handleItemClick = useCallback(\n    (id: string) => () => {\n      setSelectedId(id);\n    },\n    [],\n  );\n\n  useEffect(() => {\n    if (defaultId) {\n      setSelectedId(defaultId);\n    }\n  }, [defaultId]);\n\n  return { selectedId, handleItemClick };\n};\n\nexport const useFetchModelId = () => {\n  const { data: tenantInfo } = useFetchTenantInfo(true);\n\n  return tenantInfo?.llm_id ?? '';\n};\n\nconst ChunkTokenNumMap = {\n  naive: 128,\n  knowledge_graph: 8192,\n};\n\nexport const useHandleChunkMethodSelectChange = (form: FormInstance) => {\n  // const form = Form.useFormInstance();\n  const handleChange = useCallback(\n    (value: string) => {\n      if (value in ChunkTokenNumMap) {\n        form.setFieldValue(\n          ['parser_config', 'chunk_token_num'],\n          ChunkTokenNumMap[value as keyof typeof ChunkTokenNumMap],\n        );\n      }\n    },\n    [form],\n  );\n\n  return handleChange;\n};\n\n// reset form fields when modal is form, closed\nexport const useResetFormOnCloseModal = ({\n  form,\n  visible,\n}: {\n  form: FormInstance;\n  visible?: boolean;\n}) => {\n  const prevOpenRef = useRef<boolean>();\n  useEffect(() => {\n    prevOpenRef.current = visible;\n  }, [visible]);\n  const prevOpen = prevOpenRef.current;\n\n  useEffect(() => {\n    if (!visible && prevOpen) {\n      form.resetFields();\n    }\n  }, [form, prevOpen, visible]);\n};\n","import {\n  KnowledgeRouteKey,\n  KnowledgeSearchParams,\n} from '@/constants/knowledge';\nimport { useCallback } from 'react';\nimport { useLocation, useNavigate, useSearchParams } from 'umi';\n\nexport enum SegmentIndex {\n  Second = '2',\n  Third = '3',\n}\n\nexport const useSegmentedPathName = (index: SegmentIndex) => {\n  const { pathname } = useLocation();\n\n  const pathArray = pathname.split('/');\n  return pathArray[index] || '';\n};\n\nexport const useSecondPathName = () => {\n  return useSegmentedPathName(SegmentIndex.Second);\n};\n\nexport const useThirdPathName = () => {\n  return useSegmentedPathName(SegmentIndex.Third);\n};\n\nexport const useGetKnowledgeSearchParams = () => {\n  const [currentQueryParameters] = useSearchParams();\n\n  return {\n    documentId:\n      currentQueryParameters.get(KnowledgeSearchParams.DocumentId) || '',\n    knowledgeId:\n      currentQueryParameters.get(KnowledgeSearchParams.KnowledgeId) || '',\n  };\n};\n\nexport const useNavigateWithFromState = () => {\n  const navigate = useNavigate();\n  return useCallback(\n    (path: string) => {\n      navigate(path, { state: { from: path } });\n    },\n    [navigate],\n  );\n};\n\nexport const useNavigateToDataset = () => {\n  const navigate = useNavigate();\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  return useCallback(() => {\n    navigate(`/knowledge/${KnowledgeRouteKey.Dataset}?id=${knowledgeId}`);\n  }, [knowledgeId, navigate]);\n};\n\nexport const useGetPaginationParams = () => {\n  const [currentQueryParameters] = useSearchParams();\n\n  return {\n    page: currentQueryParameters.get('page') || 1,\n    size: currentQueryParameters.get('size') || 10,\n  };\n};\n\nexport const useSetPaginationParams = () => {\n  const [queryParameters, setSearchParams] = useSearchParams();\n  // const newQueryParameters: URLSearchParams = useMemo(\n  //   () => new URLSearchParams(queryParameters.toString()),\n  //   [queryParameters],\n  // );\n\n  const setPaginationParams = useCallback(\n    (page: number = 1, pageSize?: number) => {\n      queryParameters.set('page', page.toString());\n      if (pageSize) {\n        queryParameters.set('size', pageSize.toString());\n      }\n      setSearchParams(queryParameters);\n    },\n    [setSearchParams, queryParameters],\n  );\n\n  return {\n    setPaginationParams,\n    page: Number(queryParameters.get('page')) || 1,\n    size: Number(queryParameters.get('size')) || 10,\n  };\n};\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgFileManagement = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ width: 15, height: 15, fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props), /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#file-management_svg__a)\" }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M7.907 4.45 7.28 3.194c-.18-.361-.27-.542-.405-.674a1.126 1.126 0 0 0-.421-.26c-.179-.061-.38-.061-.785-.061H3.517c-.63 0-.946 0-1.187.122-.212.108-.384.28-.492.492-.123.241-.123.557-.123 1.187v.45m0 0h8.557c.945 0 1.418 0 1.78.184.317.162.576.42.738.738.184.362.184.835.184 1.78V9.63c0 .946 0 1.419-.184 1.78-.162.318-.42.576-.738.738-.362.184-.835.184-1.78.184H4.417c-.945 0-1.418 0-1.78-.184a1.688 1.688 0 0 1-.738-.738c-.184-.361-.184-.834-.184-1.78V4.45Z\", stroke: \"currentColor\", strokeWidth: 1.689, strokeLinecap: \"round\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"file-management_svg__a\" }, /* @__PURE__ */ React.createElement(\"path\", { fill: \"#fff\", transform: \"translate(.59 .51)\", d: \"M0 0h13.51v13.51H0z\" }))));\nexport { SvgFileManagement as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBkPSJNNy45MDcgNC40NSA3LjI4IDMuMTk0Yy0uMTgtLjM2MS0uMjctLjU0Mi0uNDA1LS42NzRhMS4xMjYgMS4xMjYgMCAwIDAtLjQyMS0uMjZjLS4xNzktLjA2MS0uMzgtLjA2MS0uNzg1LS4wNjFIMy41MTdjLS42MyAwLS45NDYgMC0xLjE4Ny4xMjItLjIxMi4xMDgtLjM4NC4yOC0uNDkyLjQ5Mi0uMTIzLjI0MS0uMTIzLjU1Ny0uMTIzIDEuMTg3di40NW0wIDBoOC41NTdjLjk0NSAwIDEuNDE4IDAgMS43OC4xODQuMzE3LjE2Mi41NzYuNDIuNzM4LjczOC4xODQuMzYyLjE4NC44MzUuMTg0IDEuNzhWOS42M2MwIC45NDYgMCAxLjQxOS0uMTg0IDEuNzgtLjE2Mi4zMTgtLjQyLjU3Ni0uNzM4LjczOC0uMzYyLjE4NC0uODM1LjE4NC0xLjc4LjE4NEg0LjQxN2MtLjk0NSAwLTEuNDE4IDAtMS43OC0uMTg0YTEuNjg4IDEuNjg4IDAgMCAxLS43MzgtLjczOGMtLjE4NC0uMzYxLS4xODQtLjgzNC0uMTg0LTEuNzhWNC40NVoiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjEuNjg5IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSguNTkgLjUxKSIgZD0iTTAgMGgxMy41MXYxMy41MUgweiIvPjwvY2xpcFBhdGg+PC9kZWZzPjwvc3ZnPg==\";\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgGraph = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ className: \"graph_svg__icon\", viewBox: \"0 0 1024 1024\", xmlns: \"http://www.w3.org/2000/svg\", width: 200, height: 200 }, props), /* @__PURE__ */ React.createElement(\"path\", { d: \"m403.687 669.564-90.216 26.017a156.733 156.733 0 1 1-24.157-80.038l96.046-27.69a156.817 156.817 0 0 1 114.728-143.358V307.824a156.733 156.733 0 1 1 83.591 0v136.67a156.44 156.44 0 0 1 63.007 34.524l63.466-38.243a156.733 156.733 0 1 1 42.13 72.202l-60.561 36.487a157.1 157.1 0 0 1 6.896 46.122 156.002 156.002 0 0 1-23.656 82.838l57.05 54.94a156.733 156.733 0 1 1-57.218 60.938l-61.439-59.182a156.064 156.064 0 0 1-71.47 17.199 156.712 156.712 0 0 1-138.218-82.755zm394.654-232.32.083.146a73.142 73.142 0 1 0-.083-.147zM541.884 668.727a73.142 73.142 0 1 0 0-146.285 73.142 73.142 0 0 0 0 146.285zm0-438.853a73.142 73.142 0 1 0 0-146.284 73.142 73.142 0 0 0 0 146.284zm219.948 585.66a73.142 73.142 0 1 0 103.444 103.443 73.142 73.142 0 0 0-103.444-103.444zm-534.46-135.21a73.142 73.142 0 1 0-141.31 37.826 73.142 73.142 0 0 0 141.31-37.825z\", fill: \"currentColor\" }));\nexport { SvgGraph as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0ibTQwMy42ODcgNjY5LjU2NC05MC4yMTYgMjYuMDE3YTE1Ni43MzMgMTU2LjczMyAwIDEgMS0yNC4xNTctODAuMDM4bDk2LjA0Ni0yNy42OWExNTYuODE3IDE1Ni44MTcgMCAwIDEgMTE0LjcyOC0xNDMuMzU4VjMwNy44MjRhMTU2LjczMyAxNTYuNzMzIDAgMSAxIDgzLjU5MSAwdjEzNi42N2ExNTYuNDQgMTU2LjQ0IDAgMCAxIDYzLjAwNyAzNC41MjRsNjMuNDY2LTM4LjI0M2ExNTYuNzMzIDE1Ni43MzMgMCAxIDEgNDIuMTMgNzIuMjAybC02MC41NjEgMzYuNDg3YTE1Ny4xIDE1Ny4xIDAgMCAxIDYuODk2IDQ2LjEyMiAxNTYuMDAyIDE1Ni4wMDIgMCAwIDEtMjMuNjU2IDgyLjgzOGw1Ny4wNSA1NC45NGExNTYuNzMzIDE1Ni43MzMgMCAxIDEtNTcuMjE4IDYwLjkzOGwtNjEuNDM5LTU5LjE4MmExNTYuMDY0IDE1Ni4wNjQgMCAwIDEtNzEuNDcgMTcuMTk5IDE1Ni43MTIgMTU2LjcxMiAwIDAgMS0xMzguMjE4LTgyLjc1NXptMzk0LjY1NC0yMzIuMzIuMDgzLjE0NmE3My4xNDIgNzMuMTQyIDAgMSAwLS4wODMtLjE0N3pNNTQxLjg4NCA2NjguNzI3YTczLjE0MiA3My4xNDIgMCAxIDAgMC0xNDYuMjg1IDczLjE0MiA3My4xNDIgMCAwIDAgMCAxNDYuMjg1em0wLTQzOC44NTNhNzMuMTQyIDczLjE0MiAwIDEgMCAwLTE0Ni4yODQgNzMuMTQyIDczLjE0MiAwIDAgMCAwIDE0Ni4yODR6bTIxOS45NDggNTg1LjY2YTczLjE0MiA3My4xNDIgMCAxIDAgMTAzLjQ0NCAxMDMuNDQzIDczLjE0MiA3My4xNDIgMCAwIDAtMTAzLjQ0NC0xMDMuNDQ0em0tNTM0LjQ2LTEzNS4yMWE3My4xNDIgNzMuMTQyIDAgMSAwLTE0MS4zMSAzNy44MjYgNzMuMTQyIDczLjE0MiAwIDAgMCAxNDEuMzEtMzcuODI1eiIgZmlsbD0iY3VycmVudENvbG9yIi8+PC9zdmc+\";\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgKnowledgeBase = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ width: 15, height: 15, fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props), /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#knowledge-base_svg__a)\" }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M12.331 3.324c0 .933-2.268 1.69-5.066 1.69s-5.066-.757-5.066-1.69m10.132 0c0-.932-2.268-1.688-5.066-1.688s-5.066.756-5.066 1.688m10.132 0v7.881c0 .935-2.252 1.689-5.066 1.689-2.815 0-5.066-.754-5.066-1.689v-7.88m10.132 3.94c0 .934-2.252 1.689-5.066 1.689-2.815 0-5.066-.755-5.066-1.69\", stroke: \"currentColor\", strokeWidth: 1.689, strokeLinecap: \"round\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"knowledge-base_svg__a\" }, /* @__PURE__ */ React.createElement(\"path\", { fill: \"#fff\", transform: \"translate(.51 .51)\", d: \"M0 0h13.51v13.51H0z\" }))));\nexport { SvgKnowledgeBase as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBkPSJNMTIuMzMxIDMuMzI0YzAgLjkzMy0yLjI2OCAxLjY5LTUuMDY2IDEuNjlzLTUuMDY2LS43NTctNS4wNjYtMS42OW0xMC4xMzIgMGMwLS45MzItMi4yNjgtMS42ODgtNS4wNjYtMS42ODhzLTUuMDY2Ljc1Ni01LjA2NiAxLjY4OG0xMC4xMzIgMHY3Ljg4MWMwIC45MzUtMi4yNTIgMS42ODktNS4wNjYgMS42ODktMi44MTUgMC01LjA2Ni0uNzU0LTUuMDY2LTEuNjg5di03Ljg4bTEwLjEzMiAzLjk0YzAgLjkzNC0yLjI1MiAxLjY4OS01LjA2NiAxLjY4OS0yLjgxNSAwLTUuMDY2LS43NTUtNS4wNjYtMS42OSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS42ODkiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48ZGVmcz48Y2xpcFBhdGggaWQ9ImEiPjxwYXRoIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC41MSAuNTEpIiBkPSJNMCAwaDEzLjUxdjEzLjUxSDB6Ii8+PC9jbGlwUGF0aD48L2RlZnM+PC9zdmc+\";\n","// extracted by mini-css-extract-plugin\nexport default {\"navs\":\"navs___X754f\",\"layout\":\"layout___Ps7xZ\",\"divider\":\"divider___RVUOM\",\"clickAvailable\":\"clickAvailable___KgAij\"};","import { useFetchUserInfo } from '@/hooks/user-setting-hooks';\nimport { Avatar } from 'antd';\nimport React from 'react';\nimport { history } from 'umi';\n\nimport styles from '../../index.less';\n\nconst App: React.FC = () => {\n  const { data: userInfo } = useFetchUserInfo();\n\n  const toSetting = () => {\n    history.push('/user-setting');\n  };\n\n  return (\n    <Avatar\n      size={32}\n      onClick={toSetting}\n      className={styles.clickAvailable}\n      src={\n        userInfo.avatar ??\n        '/user.jpg'\n      }\n    />\n  );\n};\n\nexport default App;\n","// extracted by mini-css-extract-plugin\nexport default {\"toolbarWrapper\":\"toolbarWrapper___sjvth\",\"circle\":\"circle___O8ZjN\",\"language\":\"language___LTIqE\"};","import { useTranslate } from '@/hooks/common-hooks';\nimport { DownOutlined, GithubOutlined } from '@ant-design/icons';\nimport { Dropdown, MenuProps, Space } from 'antd';\nimport camelCase from 'lodash/camelCase';\nimport React from 'react';\nimport User from '../user';\n\nimport { useTheme } from '@/components/theme-provider';\nimport { LanguageList, LanguageMap } from '@/constants/common';\nimport { useChangeLanguage } from '@/hooks/logic-hooks';\nimport { useFetchUserInfo } from '@/hooks/user-setting-hooks';\nimport { CircleHelp, MoonIcon, SunIcon } from 'lucide-react';\nimport styled from './index.less';\n\nconst Circle = ({ children, ...restProps }: React.PropsWithChildren) => {\n  return (\n    <div {...restProps} className={styled.circle}>\n      {children}\n    </div>\n  );\n};\n\nconst handleGithubCLick = () => {\n  window.open('https://github.com/w2874382167', 'target');\n};\n\n// const handleDocHelpCLick = () => {\n//   window.open('https://ragflow.io/docs/dev/category/guides', 'target');\n// };\n\nconst RightToolBar = () => {\n  const { t } = useTranslate('common');\n  // const changeLanguage = useChangeLanguage();\n  const { setTheme, theme } = useTheme();\n\n  const {\n    data: { language = 'English' },\n  } = useFetchUserInfo();\n\n  {/* 这是选择语言的*/}\n  // const handleItemClick: MenuProps['onClick'] = ({ key }) => {\n  //   changeLanguage(key);\n  // };\n\n  const items: MenuProps['items'] = LanguageList.map((x) => ({\n    key: x,\n    label: <span>{LanguageMap[x as keyof typeof LanguageMap]}</span>,\n  })).reduce<MenuProps['items']>((pre, cur) => {\n    return [...pre!, { type: 'divider' }, cur];\n  }, []);\n\n  const onMoonClick = React.useCallback(() => {\n    setTheme('light');\n  }, [setTheme]);\n  const onSunClick = React.useCallback(() => {\n    setTheme('dark');\n  }, [setTheme]);\n\n  return (\n    <div className={styled.toolbarWrapper}>\n      <Space wrap size={16}>\n        {/* 这是选择语言的*/}\n        {/* <Dropdown menu={{ items, onClick: handleItemClick }} placement=\"bottom\">\n          <Space className={styled.language}>\n            <b>{t(camelCase(language))}</b>\n            <DownOutlined />\n          </Space>\n        </Dropdown> */}\n        <Circle>\n          <GithubOutlined onClick={handleGithubCLick} />\n        </Circle>\n        {/* <Circle>\n          <CircleHelp className=\"size-4\" onClick={handleDocHelpCLick} />\n        </Circle> */}\n        <Circle>\n          {theme === 'dark' ? (\n            <MoonIcon onClick={onMoonClick} size={20} />\n          ) : (\n            <SunIcon onClick={onSunClick} size={20} />\n          )}\n        </Circle>\n        <User></User>\n      </Space>\n    </div>\n  );\n};\n\nexport default RightToolBar;\n","// extracted by mini-css-extract-plugin\nexport default {\"tag\":\"tag___RuqXA\",\"checked\":\"checked___iytqR\",\"logoWrapper\":\"logoWrapper___B7B1l\",\"appIcon\":\"appIcon___x4rus\",\"appName\":\"appName___WliRD\",\"radioGroup\":\"radioGroup___pTbHv\",\"radioGroupDark\":\"radioGroupDark___uxjib\",\"ant-radio-button-wrapper-checked\":\"ant-radio-button-wrapper-checked____62B5\",\"radioButtonIcon\":\"radioButtonIcon___vE17s\"};","import { ReactComponent as FileIcon } from '@/assets/svg/file-management.svg';\nimport { ReactComponent as GraphIcon } from '@/assets/svg/graph.svg';\nimport { ReactComponent as KnowledgeBaseIcon } from '@/assets/svg/knowledge-base.svg';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useFetchAppConf } from '@/hooks/logic-hooks';\nimport { useNavigateWithFromState } from '@/hooks/route-hook';\nimport { MessageOutlined, SearchOutlined } from '@ant-design/icons';\nimport { Flex, Layout, Radio, Space, theme } from 'antd';\nimport { MouseEventHandler, useCallback, useMemo } from 'react';\nimport { useLocation } from 'umi';\nimport Toolbar from '../right-toolbar';\n\nimport { useTheme } from '@/components/theme-provider';\nimport styles from './index.less';\n\nconst { Header } = Layout;\n\nconst RagHeader = () => {\n  const {\n    token: { colorBgContainer },\n  } = theme.useToken();\n  const navigate = useNavigateWithFromState();\n  const { pathname } = useLocation();\n  const { t } = useTranslate('header');\n  const appConf = useFetchAppConf();\n  const { theme: themeRag } = useTheme();\n  const tagsData = useMemo(\n    () => [\n      { path: '/knowledge', name: t('knowledgeBase'), icon: KnowledgeBaseIcon },\n      { path: '/chat', name: t('chat'), icon: MessageOutlined },\n      { path: '/search', name: t('search'), icon: SearchOutlined },\n      { path: '/flow', name: t('flow'), icon: GraphIcon },\n      { path: '/file', name: t('fileManager'), icon: FileIcon },\n    ],\n    [t],\n  );\n\n  const currentPath = useMemo(() => {\n    return (\n      tagsData.find((x) => pathname.startsWith(x.path))?.name || 'knowledge'\n    );\n  }, [pathname, tagsData]);\n\n  const handleChange = useCallback(\n    (path: string): MouseEventHandler =>\n      (e) => {\n        e.preventDefault();\n        navigate(path);\n      },\n    [navigate],\n  );\n\n  const handleLogoClick = useCallback(() => {\n    navigate('/');\n  }, [navigate]);\n\n  return (\n    <Header\n      style={{\n        padding: '0 16px',\n        background: colorBgContainer,\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        height: '72px',\n      }}\n    >\n      <a href={window.location.origin}>\n        <Space\n          size={12}\n          onClick={handleLogoClick}\n          className={styles.logoWrapper}\n        >\n          <img src=\"/logo.jpg\" alt=\"\" className={styles.appIcon} /> \n          <span className={styles.appName}>{appConf.appName}</span>\n        </Space>\n      </a>\n      <Space size={[0, 8]} wrap>\n        <Radio.Group\n          defaultValue=\"a\"\n          buttonStyle=\"solid\"\n          className={\n            themeRag === 'dark' ? styles.radioGroupDark : styles.radioGroup\n          }\n          value={currentPath}\n        >\n          {tagsData.map((item, index) => (\n            <Radio.Button\n              className={`${themeRag === 'dark' ? 'dark' : 'light'} ${index === 0 ? 'first' : ''} ${index === tagsData.length - 1 ? 'last' : ''}`}\n              value={item.name}\n              key={item.name}\n            >\n              <a href={item.path}>\n                <Flex\n                  align=\"center\"\n                  gap={8}\n                  onClick={handleChange(item.path)}\n                  className=\"cursor-pointer\"\n                >\n                  <item.icon\n                    className={styles.radioButtonIcon}\n                    stroke={item.name === currentPath ? 'black' : 'white'}\n                  ></item.icon>\n                  {item.name}\n                </Flex>\n              </a>\n            </Radio.Button>\n          ))}\n        </Radio.Group>\n      </Space>\n      <Toolbar></Toolbar>\n    </Header>\n  );\n};\n\nexport default RagHeader;\n","import { Divider, Layout, theme } from 'antd';\nimport React from 'react';\nimport { Outlet } from 'umi';\nimport '../locales/config';\nimport Header from './components/header';\n\nimport styles from './index.less';\n\nconst { Content } = Layout;\n\nconst App: React.FC = () => {\n  const {\n    token: { colorBgContainer, borderRadiusLG },\n  } = theme.useToken();\n\n  return (\n    <Layout className={styles.layout}>\n      <Layout>\n        <Header></Header>\n        <Divider orientationMargin={0} className={styles.divider} />\n        <Content\n          style={{\n            minHeight: 280,\n            background: colorBgContainer,\n            borderRadius: borderRadiusLG,\n            overflow: 'auto',\n            display: 'flex',\n          }}\n        >\n          <Outlet />\n        </Content>\n      </Layout>\n    </Layout>\n  );\n};\n\nexport default App;\n","import {\n  ChatVariableEnabledField,\n  EmptyConversationId,\n} from '@/constants/chat';\nimport { Message } from '@/interfaces/database/chat';\nimport { IMessage } from '@/pages/chat/interface';\nimport { omit } from 'lodash';\nimport { v4 as uuid } from 'uuid';\n\nexport const isConversationIdExist = (conversationId: string) => {\n  return conversationId !== EmptyConversationId && conversationId !== '';\n};\n\nexport const buildMessageUuid = (message: Partial<Message | IMessage>) => {\n  if ('id' in message && message.id) {\n    return message.id;\n  }\n  return uuid();\n};\n\nexport const buildMessageListWithUuid = (messages?: Message[]) => {\n  return (\n    messages?.map((x: Message | IMessage) => ({\n      ...omit(x, 'reference'),\n      id: buildMessageUuid(x),\n    })) ?? []\n  );\n};\n\nexport const getConversationId = () => {\n  return uuid().replace(/-/g, '');\n};\n\n// When rendering each message, add a prefix to the id to ensure uniqueness.\nexport const buildMessageUuidWithRole = (\n  message: Partial<Message | IMessage>,\n) => {\n  return `${message.role}_${message.id}`;\n};\n\n// Preprocess LaTeX equations to be rendered by KaTeX\n// ref: https://github.com/remarkjs/react-markdown/issues/785\n\nexport const preprocessLaTeX = (content: string) => {\n  const blockProcessedContent = content.replace(\n    /\\\\\\[([\\s\\S]*?)\\\\\\]/g,\n    (_, equation) => `$$${equation}$$`,\n  );\n  const inlineProcessedContent = blockProcessedContent.replace(\n    /\\\\\\(([\\s\\S]*?)\\\\\\)/g,\n    (_, equation) => `$${equation}$`,\n  );\n  return inlineProcessedContent;\n};\n\nexport function replaceThinkToSection(text: string = '') {\n  const pattern = /<think>([\\s\\S]*?)<\\/think>/g;\n\n  const result = text.replace(pattern, '<section class=\"think\">$1</section>');\n\n  return result;\n}\n\nexport function setInitialChatVariableEnabledFieldValue(\n  field: ChatVariableEnabledField,\n) {\n  return field !== ChatVariableEnabledField.MaxTokensEnabled;\n}\n"],"names":["KnowledgeRouteKey","RunningStatus","ModelVariableType","settledModelVariableMap","_defineProperty","Improvise","temperature","top_p","frequency_penalty","presence_penalty","max_tokens","Precise","Balance","LlmModelType","KnowledgeSearchParams","DocumentType","DocumentParserType","useSetSelectedRecord","_useState","useState","_useState2","_slicedToArray","currentRecord","setCurrentRecord","setRecord","record","useHandleSearchChange","_useState3","_useState4","searchString","setSearchString","handleInputChange","useCallback","e","value","target","useChangeLanguage","i18n","useTranslation","saveSetting","useSaveSetting","lng","changeLanguage","LanguageTranslationMap","language","useGetPaginationWithRouter","t","useTranslate","_useSetPaginationPara","useSetPaginationParams","setPaginationParams","page","pageSize","size","onPageChange","pageNumber","setCurrentPagination","pagination","useMemo","showQuickJumper","total","showSizeChanger","current","pageSizeOptions","onChange","showTotal","concat","setPagination","useFetchAppConf","_useState7","_useState8","appConf","setAppConf","fetchAppConf","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ret","wrap","_context","prev","next","axios","get","sent","data","stop","useEffect","useSendMessageWithSse","url","arguments","length","undefined","api","completeConversation","_useState9","_useState10","answer","setAnswer","_useState11","_useState12","done","setDone","timer","useRef","resetAnswer","clearTimeout","setTimeout","send","_ref2","_callee2","body","controller","_response$body","response","res","reader","x","_done","val","d","_context2","fetch","method","headers","Authorization","getAuthorization","JSON","stringify","signal","clone","json","pipeThrough","TextDecoderStream","EventSourceParserStream","getReader","read","console","info","abrupt","parse","_objectSpread","conversationId","conversation_id","warn","t0","t1","t2","_x","_x2","apply","useSpeechWithSse","tts","_ref3","_callee3","_context3","code","message","error","_x3","useHandleMessageInputChange","_useState13","_useState14","setValue","nextValue","replaceAll","useSelectDerivedMessages","_useState15","_useState16","derivedMessages","setDerivedMessages","ref","messages","scrollToBottom","_ref$current","scrollIntoView","behavior","useScrollToBottom","addNewestQuestion","pre","_toConsumableArray","id","buildMessageUuid","role","MessageType","Assistant","content","addNewestAnswer","_pre$slice","slice","reference","prompt","audio_binary","omit","removeLatestMessage","_pre$slice2","removeMessageById","messageId","_pre$filter","filter","removeMessagesAfterCurrentMessage","index","findIndex","_pre$slice3","nextMessages","latestMessage","at","useRegenerateMessage","_ref4","sendMessage","regenerateMessage","_ref5","_callee4","_context4","uuid","_x4","useSelectItem","defaultId","_useState17","_useState18","selectedId","setSelectedId","handleItemClick","useFetchModelId","_tenantInfo$llm_id","tenantInfo","useFetchTenantInfo","llm_id","ChunkTokenNumMap","naive","knowledge_graph","useHandleChunkMethodSelectChange","form","setFieldValue","useResetFormOnCloseModal","_ref6","visible","prevOpenRef","prevOpen","resetFields","SegmentIndex","useSegmentedPathName","useLocation","pathname","split","useSecondPathName","Second","useThirdPathName","Third","useGetKnowledgeSearchParams","_useSearchParams","useSearchParams","currentQueryParameters","documentId","DocumentId","knowledgeId","KnowledgeId","useNavigateWithFromState","navigate","useNavigate","path","state","from","useNavigateToDataset","Dataset","_useSearchParams5","_useSearchParams6","queryParameters","setSearchParams","set","toString","Number","__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","enumerable","configurable","writable","SvgFileManagement","props","a","b","prop","call","__spreadValues","width","height","fill","xmlns","clipPath","stroke","strokeWidth","strokeLinecap","strokeLinejoin","transform","SvgGraph","className","viewBox","SvgKnowledgeBase","_userInfo$avatar","userInfo","useFetchUserInfo","_jsx","Avatar","onClick","history","push","styles","src","avatar","Circle","_ref","children","restProps","_objectWithoutProperties","_excluded","styled","handleGithubCLick","window","open","_useTheme","useTheme","setTheme","theme","onMoonClick","LanguageList","map","label","LanguageMap","reduce","cur","type","React","onSunClick","_jsxs","Space","GithubOutlined","MoonIcon","SunIcon","User","Header","Layout","colorBgContainer","useToken","token","themeRag","tagsData","name","icon","KnowledgeBaseIcon","MessageOutlined","SearchOutlined","GraphIcon","FileIcon","currentPath","_tagsData$find","find","startsWith","handleChange","preventDefault","handleLogoClick","style","padding","background","display","justifyContent","alignItems","href","location","origin","alt","appName","Radio","defaultValue","buttonStyle","item","Flex","align","gap","Toolbar","Content","_theme$useToken$token","borderRadiusLG","Divider","orientationMargin","minHeight","borderRadius","overflow","Outlet","isConversationIdExist","EmptyConversationId","buildMessageListWithUuid","_messages$map","getConversationId","replace","buildMessageUuidWithRole","preprocessLaTeX","_","equation","replaceThinkToSection","setInitialChatVariableEnabledFieldValue","field","ChatVariableEnabledField","MaxTokensEnabled"],"sourceRoot":""}