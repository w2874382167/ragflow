{"version":3,"file":"4392.20da18d1.async.js","mappings":"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","sources":["webpack://web/./node_modules/@antv/component/esm/animation/utils.js","webpack://web/./node_modules/@antv/component/esm/core/component.js","webpack://web/./node_modules/@antv/component/esm/shapes/Text.js","webpack://web/./node_modules/@antv/component/esm/util/angle-converter.js","webpack://web/./node_modules/@antv/component/esm/animation/fadeOut.js","webpack://web/./node_modules/@antv/component/esm/util/primitive.js","webpack://web/./node_modules/@antv/component/esm/ui/grid/index.js","webpack://web/./node_modules/@antv/component/esm/util/interpolate.js","webpack://web/./node_modules/@antv/component/esm/util/omit.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/guides/utils.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/guides/line.js","webpack://web/./node_modules/@antv/component/esm/util/keyframe-interpolate.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/guides/grid.js","webpack://web/./node_modules/@antv/component/esm/util/in-range.js","webpack://web/./node_modules/@antv/component/esm/util/transform.js","webpack://web/./node_modules/@antv/component/esm/util/defined.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/utils/bounds.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/utils/contain.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/utils/intersect.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/utils/test.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/overlap/autoEllipsis.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/overlap/autoHide.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/overlap/index.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/overlap/autoRotate.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/overlap/autoWrap.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/utils/index.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/guides/labels.js","webpack://web/./node_modules/@antv/component/esm/util/wrap.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/guides/ticks.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/guides/title.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/axis.js","webpack://web/./node_modules/@antv/component/esm/util/sampling.js","webpack://web/./node_modules/@antv/component/esm/ui/axis/constant.js","webpack://web/./node_modules/@antv/component/esm/ui/indicator/constant.js","webpack://web/./node_modules/@antv/component/esm/ui/indicator/indicator.js","webpack://web/./node_modules/@antv/util/esm/lodash/noop.js","webpack://web/./node_modules/@antv/component/esm/ui/navigator/index.js","webpack://web/./node_modules/@antv/component/esm/util/transpose.js","webpack://web/./node_modules/@antv/component/esm/ui/legend/category/item.js","webpack://web/./node_modules/@antv/component/esm/ui/legend/category/items.js","webpack://web/./node_modules/@antv/component/esm/util/group-by.js","webpack://web/./node_modules/@antv/component/esm/ui/legend/category.js","webpack://web/./node_modules/@antv/component/esm/ui/legend/constant.js","webpack://web/./node_modules/@antv/component/esm/ui/legend/continuous/handle.js","webpack://web/./node_modules/@antv/component/esm/ui/legend/utils.js","webpack://web/./node_modules/@antv/component/esm/ui/marker/index.js","webpack://web/./node_modules/@antv/component/esm/ui/marker/utils.js","webpack://web/./node_modules/@antv/component/esm/ui/marker/symbol.js","webpack://web/./node_modules/@antv/component/esm/ui/slider/constant.js","webpack://web/./node_modules/@antv/component/esm/ui/slider/handle.js","webpack://web/./node_modules/@antv/component/esm/ui/sparkline/columns.js","webpack://web/./node_modules/@antv/component/esm/ui/sparkline/lines.js","webpack://web/./node_modules/@antv/component/esm/util/path.js","webpack://web/./node_modules/@antv/component/esm/ui/sparkline/path.js","webpack://web/./node_modules/@antv/util/esm/lodash/min-by.js","webpack://web/./node_modules/@antv/util/esm/lodash/max-by.js","webpack://web/./node_modules/@antv/component/esm/ui/sparkline/utils.js","webpack://web/./node_modules/@antv/component/esm/ui/sparkline/index.js","webpack://web/./node_modules/@antv/component/esm/ui/slider/index.js","webpack://web/./node_modules/@antv/component/esm/ui/title/index.js","webpack://web/./node_modules/@antv/util/esm/lodash/substitute.js","webpack://web/./node_modules/@antv/component/esm/util/replace-children.js","webpack://web/./node_modules/@antv/component/esm/ui/tooltip/constant.js","webpack://web/./node_modules/@antv/component/esm/ui/tooltip/index.js","webpack://web/./node_modules/@antv/component/esm/util/bbox.js","webpack://web/./node_modules/@antv/component/esm/util/callback.js","webpack://web/./node_modules/@antv/component/esm/util/classnames.js","webpack://web/./node_modules/@antv/component/esm/util/deep-assign.js","webpack://web/./node_modules/@antv/component/esm/util/ellipsis.js","webpack://web/./node_modules/@antv/component/esm/util/event.js","webpack://web/./node_modules/@antv/component/esm/util/extend-display-object.js","webpack://web/./node_modules/@antv/component/esm/util/if-show.js","webpack://web/./node_modules/@antv/component/esm/util/matrix.js","webpack://web/./node_modules/@antv/component/esm/util/number.js","webpack://web/./node_modules/@antv/component/esm/util/offscreen.js","webpack://web/./node_modules/@antv/component/esm/util/scale-to-pixel.js","webpack://web/./node_modules/@antv/component/esm/util/selection.js","webpack://web/./node_modules/@antv/component/esm/util/group.js","webpack://web/./node_modules/@antv/component/esm/util/series.js","webpack://web/./node_modules/@antv/component/esm/util/shape.js","webpack://web/./node_modules/@antv/component/esm/util/string.js","webpack://web/./node_modules/@antv/component/esm/util/style.js","webpack://web/./node_modules/@antv/component/esm/util/text.js","webpack://web/./node_modules/@antv/component/esm/util/traverse.js","webpack://web/./node_modules/@antv/component/esm/util/visibility.js","webpack://web/./node_modules/@antv/event-emitter/esm/index.js","webpack://web/./node_modules/@antv/g-plugin-canvas-path-generator/dist/index.esm.js","webpack://web/./node_modules/@antv/g-plugin-canvas-picker/dist/index.esm.js","webpack://web/./node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js","webpack://web/./node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js","webpack://web/./node_modules/@antv/g-plugin-image-loader/dist/index.esm.js","webpack://web/./node_modules/@antv/g-plugin-canvas-renderer/dist/index.esm.js","webpack://web/./node_modules/@antv/g-plugin-dom-interaction/dist/index.esm.js","webpack://web/./node_modules/@antv/g-plugin-html-renderer/dist/index.esm.js","webpack://web/./node_modules/@antv/g-canvas/dist/index.esm.js","webpack://web/./node_modules/eventemitter3/index.mjs","webpack://web/./node_modules/@antv/util/esm/path/parser/params-count.js","webpack://web/./node_modules/@antv/util/esm/path/util/is-path-array.js","webpack://web/./node_modules/@antv/util/esm/path/util/is-absolute-array.js","webpack://web/./node_modules/@antv/util/esm/path/util/is-normalized-array.js","webpack://web/./node_modules/@antv/util/esm/path/parser/params-parser.js","webpack://web/./node_modules/@antv/util/esm/path/parser/finalize-segment.js","webpack://web/./node_modules/@antv/util/esm/path/parser/scan-flag.js","webpack://web/./node_modules/@antv/util/esm/path/parser/is-digit-start.js","webpack://web/./node_modules/@antv/util/esm/path/parser/scan-param.js","webpack://web/./node_modules/@antv/util/esm/path/parser/skip-spaces.js","webpack://web/./node_modules/@antv/util/esm/path/parser/is-space.js","webpack://web/./node_modules/@antv/util/esm/path/parser/scan-segment.js","webpack://web/./node_modules/@antv/util/esm/path/parser/is-path-command.js","webpack://web/./node_modules/@antv/util/esm/path/parser/is-arc-command.js","webpack://web/./node_modules/@antv/util/esm/path/parser/path-parser.js","webpack://web/./node_modules/@antv/util/esm/path/convert/path-2-absolute.js","webpack://web/./node_modules/@antv/util/esm/path/parser/parse-path-string.js","webpack://web/./node_modules/@antv/util/esm/path/process/normalize-segment.js","webpack://web/./node_modules/@antv/util/esm/path/process/normalize-path.js","webpack://web/./node_modules/@antv/util/esm/path/util/mid-point.js","webpack://web/./node_modules/@antv/util/esm/path/util/segment-line-factory.js","webpack://web/./node_modules/@antv/util/esm/path/util/segment-arc-factory.js","webpack://web/./node_modules/@antv/util/esm/path/util/segment-cubic-factory.js","webpack://web/./node_modules/@antv/util/esm/path/util/segment-quad-factory.js","webpack://web/./node_modules/@antv/util/esm/path/util/path-length-factory.js","webpack://web/./node_modules/@antv/util/esm/lodash/mod.js","webpack://web/./node_modules/@antv/util/esm/path/process/fix-arc.js","webpack://web/./node_modules/@antv/util/esm/path/process/line-2-cubic.js","webpack://web/./node_modules/@antv/util/esm/path/process/segment-2-cubic.js","webpack://web/./node_modules/@antv/util/esm/path/process/quad-2-cubic.js","webpack://web/./node_modules/@antv/util/esm/path/convert/path-2-curve.js","webpack://web/./node_modules/@antv/util/esm/path/util/is-curve-array.js","webpack://web/./node_modules/@antv/util/esm/path/util/equalize-segments.js","webpack://web/./node_modules/@antv/util/esm/path/util/get-draw-direction.js","webpack://web/./node_modules/@antv/util/esm/path/util/get-path-area.js","webpack://web/./node_modules/@babel/runtime/helpers/esm/get.js","webpack://web/./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack://web/./node_modules/@babel/runtime/helpers/esm/superPropGet.js","webpack://web/./node_modules/@antv/g-lite/dist/index.esm.js","webpack://web/./node_modules/@antv/util/esm/path/util/get-total-length.js","webpack://web/./node_modules/@antv/util/esm/path/process/reverse-curve.js","webpack://web/./node_modules/@antv/util/esm/path/util/get-rotated-curve.js","webpack://web/./node_modules/@antv/util/esm/path/process/clone-path.js","webpack://web/./node_modules/@antv/util/esm/path/util/get-point-at-length.js","webpack://web/./node_modules/@antv/g-math/dist/index.esm.js","webpack://web/./node_modules/@antv/g-plugin-dragndrop/dist/index.esm.js","webpack://web/./node_modules/@antv/g-camera-api/dist/index.esm.js","webpack://web/./node_modules/@antv/g-dom-mutation-observer-api/dist/index.esm.js","webpack://web/./node_modules/@antv/g-web-animations-api/dist/index.esm.js","webpack://web/./node_modules/@antv/scale/esm/utils/internMap.js","webpack://web/./node_modules/@antv/scale/esm/scales/band.js","webpack://web/./node_modules/@antv/scale/esm/scales/base.js","webpack://web/./node_modules/@antv/scale/esm/scales/continuous.js","webpack://web/./node_modules/@antv/scale/esm/utils/clamp.js","webpack://web/./node_modules/@antv/scale/esm/scales/linear.js","webpack://web/./node_modules/@antv/scale/esm/scales/ordinal.js","webpack://web/./node_modules/@antv/scale/esm/tick-methods/d3-ticks.js","webpack://web/./node_modules/@antv/scale/esm/utils/bisect.js","webpack://web/./node_modules/@antv/scale/esm/utils/compose.js","webpack://web/./node_modules/@antv/scale/esm/utils/d3-linear-nice.js","webpack://web/./node_modules/@antv/scale/esm/utils/color.js","webpack://web/./node_modules/@antv/scale/esm/utils/interpolate.js","webpack://web/./node_modules/@antv/scale/esm/utils/is-valid.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-null.js","webpack://web/./node_modules/@antv/scale/esm/utils/normalize.js","webpack://web/./node_modules/@antv/scale/esm/utils/ticks.js","webpack://web/./node_modules/@antv/util/esm/dom/create-dom.js","webpack://web/./node_modules/@antv/util/esm/lodash/clamp.js","webpack://web/./node_modules/@antv/util/esm/lodash/clone.js","webpack://web/./node_modules/@antv/util/esm/lodash/debounce.js","webpack://web/./node_modules/@antv/util/esm/lodash/deep-mix.js","webpack://web/./node_modules/@antv/util/esm/lodash/each.js","webpack://web/./node_modules/@antv/util/esm/lodash/filter.js","webpack://web/./node_modules/@antv/util/esm/lodash/get.js","webpack://web/./node_modules/@antv/util/esm/lodash/identity.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-array-like.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-array.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-boolean.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-equal.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-function.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-nil.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-number-equal.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-number.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-object-like.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-object.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-plain-object.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-string.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-type.js","webpack://web/./node_modules/@antv/util/esm/lodash/is-undefined.js","webpack://web/./node_modules/@antv/util/esm/lodash/lower-first.js","webpack://web/./node_modules/@antv/util/esm/lodash/max.js","webpack://web/./node_modules/@antv/util/esm/lodash/memoize.js","webpack://web/./node_modules/@antv/util/esm/lodash/min.js","webpack://web/./node_modules/@antv/util/esm/lodash/reduce.js","webpack://web/./node_modules/@antv/util/esm/lodash/omit.js","webpack://web/./node_modules/@antv/util/esm/lodash/pick.js","webpack://web/./node_modules/@antv/util/esm/lodash/set.js","webpack://web/./node_modules/@antv/util/esm/lodash/throttle.js","webpack://web/./node_modules/@antv/util/esm/lodash/to-string.js","webpack://web/./node_modules/@antv/util/esm/lodash/upper-first.js","webpack://web/./node_modules/@antv/util/esm/path/util/rotate-vector.js","webpack://web/./node_modules/@antv/util/esm/path/process/arc-2-cubic.js","webpack://web/./node_modules/@antv/util/esm/path/util/distance-square-root.js","webpack://web/./node_modules/color-name/index.js","webpack://web/./node_modules/color-string/index.js","webpack://web/./node_modules/eventemitter3/index.js","webpack://web/./node_modules/gl-matrix/esm/common.js","webpack://web/./node_modules/gl-matrix/esm/mat3.js","webpack://web/./node_modules/gl-matrix/esm/mat4.js","webpack://web/./node_modules/gl-matrix/esm/quat.js","webpack://web/./node_modules/gl-matrix/esm/vec2.js","webpack://web/./node_modules/gl-matrix/esm/vec3.js","webpack://web/./node_modules/gl-matrix/esm/vec4.js","webpack://web/./node_modules/lodash/_hasUnicode.js","webpack://web/./node_modules/simple-swizzle/index.js","webpack://web/./node_modules/simple-swizzle/node_modules/is-arrayish/index.js","webpack://web/./node_modules/@babel/runtime/helpers/esm/callSuper.js","webpack://web/./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack://web/./node_modules/@tanstack/react-query/build/modern/useMutationState.js","webpack://web/./node_modules/d3-dispatch/src/dispatch.js","webpack://web/./node_modules/d3-force/src/center.js","webpack://web/./node_modules/d3-force/src/constant.js","webpack://web/./node_modules/d3-force/src/jiggle.js","webpack://web/./node_modules/d3-force/src/link.js","webpack://web/./node_modules/d3-force/src/manyBody.js","webpack://web/./node_modules/d3-force/src/lcg.js","webpack://web/./node_modules/d3-force/src/simulation.js","webpack://web/./node_modules/d3-force/src/x.js","webpack://web/./node_modules/d3-force/src/y.js","webpack://web/./node_modules/d3-quadtree/src/add.js","webpack://web/./node_modules/d3-quadtree/src/quad.js","webpack://web/./node_modules/d3-quadtree/src/x.js","webpack://web/./node_modules/d3-quadtree/src/y.js","webpack://web/./node_modules/d3-quadtree/src/quadtree.js","webpack://web/./node_modules/d3-quadtree/src/cover.js","webpack://web/./node_modules/d3-quadtree/src/data.js","webpack://web/./node_modules/d3-quadtree/src/extent.js","webpack://web/./node_modules/d3-quadtree/src/find.js","webpack://web/./node_modules/d3-quadtree/src/remove.js","webpack://web/./node_modules/d3-quadtree/src/root.js","webpack://web/./node_modules/d3-quadtree/src/size.js","webpack://web/./node_modules/d3-quadtree/src/visit.js","webpack://web/./node_modules/d3-quadtree/src/visitAfter.js","webpack://web/./node_modules/d3-timer/src/timer.js"],"sourcesContent":["import { __assign, __read } from \"tslib\";\n/* global Keyframe */\nimport { isNil } from '@antv/util';\nimport { show, hide } from '../util';\nfunction isStandardAnimationOption(option) {\n    if (typeof option === 'boolean')\n        return false;\n    return 'enter' in option && 'update' in option && 'exit' in option;\n}\nexport function parseAnimationOption(option) {\n    // option is false => all animation is false\n    // option is { enter: {}, update: {}, exit: {}, ...baseOption } =>\n    //    { enter: { ...enter, ...baseOption }, update: { ...update, ...baseOption }, exit: { ...exit, ...baseOption } }\n    // option is { enter: {}, update: {}, exit: {} } => option\n    if (!option)\n        return { enter: false, update: false, exit: false };\n    var keys = ['enter', 'update', 'exit'];\n    var baseOption = Object.fromEntries(Object.entries(option).filter(function (_a) {\n        var _b = __read(_a, 1), k = _b[0];\n        return !keys.includes(k);\n    }));\n    return Object.fromEntries(keys.map(function (k) {\n        if (isStandardAnimationOption(option)) {\n            if (option[k] === false)\n                return [k, false];\n            return [k, __assign(__assign({}, option[k]), baseOption)];\n        }\n        return [k, baseOption];\n    }));\n}\nexport function onAnimateFinished(animation, callback) {\n    if (!animation)\n        callback();\n    else\n        animation.finished.then(callback);\n}\nexport function onAnimatesFinished(animations, callback) {\n    if (animations.length === 0)\n        callback();\n    else\n        Promise.all(animations.map(function (a) { return a === null || a === void 0 ? void 0 : a.finished; })).then(callback);\n}\nfunction attr(target, value) {\n    if ('update' in target)\n        target.update(value);\n    else\n        target.attr(value);\n}\nexport function animate(target, keyframes, options) {\n    if (keyframes.length === 0)\n        return null;\n    if (!options) {\n        var state = keyframes.slice(-1)[0];\n        attr(target, { style: state });\n        return null;\n    }\n    return target.animate(keyframes, options);\n}\nfunction identicalTextNode(source, target) {\n    if (source.nodeName !== 'text' || target.nodeName !== 'text')\n        return false;\n    if (source.attributes.text !== target.attributes.text)\n        return false;\n    return true;\n}\n/**\n * transition source shape to target shape\n * @param source\n * @param target\n * @param options\n * @param after destroy or hide source shape after transition\n */\nexport function transitionShape(source, target, options, after) {\n    if (after === void 0) { after = 'destroy'; }\n    // If source and target are both text node and with same text,\n    // do not apply shape animation.\n    if (identicalTextNode(source, target)) {\n        source.remove();\n        return [null];\n    }\n    var afterTransition = function () {\n        if (after === 'destroy')\n            source.destroy();\n        else if (after === 'hide')\n            hide(source);\n        if (target.isVisible())\n            show(target);\n    };\n    if (!options) {\n        afterTransition();\n        return [null];\n    }\n    var _a = options.duration, duration = _a === void 0 ? 0 : _a, _b = options.delay, delay = _b === void 0 ? 0 : _b;\n    var middle = Math.ceil(+duration / 2);\n    var offset = +duration / 4;\n    var _c = __read(source.getGeometryBounds().center, 2), sx = _c[0], sy = _c[1];\n    var _d = __read(target.getGeometryBounds().center, 2), ex = _d[0], ey = _d[1];\n    var _e = __read([(sx + ex) / 2 - sx, (sy + ey) / 2 - sy], 2), mx = _e[0], my = _e[1];\n    var _f = source.style.opacity, so = _f === void 0 ? 1 : _f;\n    var _g = target.style.opacity, to = _g === void 0 ? 1 : _g;\n    var st = source.style.transform || '';\n    var tt = target.style.transform || '';\n    // const st = source.style._transform || '';\n    // const tt = target.style._transform || '';\n    var sourceAnimation = source.animate([\n        { opacity: so, transform: \"translate(0, 0) \".concat(st) },\n        { opacity: 0, transform: \"translate(\".concat(mx, \", \").concat(my, \") \").concat(st) },\n    ], __assign(__assign({ fill: 'both' }, options), { duration: delay + middle + offset }));\n    var targetAnimation = target.animate([\n        { opacity: 0, transform: \"translate(\".concat(-mx, \", \").concat(-my, \") \").concat(tt), offset: 0.01 },\n        { opacity: to, transform: \"translate(0, 0) \".concat(tt) },\n    ], __assign(__assign({ fill: 'both' }, options), { duration: middle + offset, delay: delay + middle - offset }));\n    onAnimateFinished(targetAnimation, afterTransition);\n    return [sourceAnimation, targetAnimation];\n}\n/**\n * execute transition animation on element\n * @description in the current stage, only support the following properties:\n * x, y, width, height, opacity, fill, stroke, lineWidth, radius\n * @param target element to be animated\n * @param state target properties or element\n * @param options transition options\n * @param animate whether to animate\n * @returns transition instance\n */\nexport function transition(target, state, options) {\n    var from = {};\n    var to = {};\n    Object.entries(state).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], tarStyle = _b[1];\n        if (!isNil(tarStyle)) {\n            //  CSS attr / getAttribute \n            //  x/y 0 \n            var currStyle = target.style[key] || target.parsedStyle[key] || 0; // x/y\n            if (currStyle !== tarStyle) {\n                from[key] = currStyle;\n                to[key] = tarStyle;\n            }\n        }\n    });\n    if (!options) {\n        attr(target, to);\n        return null;\n    }\n    return animate(target, [from, to], __assign({ fill: 'both' }, options));\n}\n//# sourceMappingURL=utils.js.map","import { __extends, __rest } from \"tslib\";\nimport { CustomElement } from '../shapes';\nimport { createOffscreenGroup, deepAssign, visibility } from '../util';\nfunction applyVisibility() {\n    visibility(this, this.attributes.visibility !== 'hidden');\n}\nvar Component = /** @class */ (function (_super) {\n    __extends(Component, _super);\n    function Component(options, defaultStyleProps) {\n        if (defaultStyleProps === void 0) { defaultStyleProps = {}; }\n        var _this = _super.call(this, deepAssign({}, { style: defaultStyleProps }, options)) || this;\n        _this.initialized = false;\n        _this._defaultOptions = defaultStyleProps;\n        return _this;\n    }\n    Object.defineProperty(Component.prototype, \"offscreenGroup\", {\n        get: function () {\n            if (!this._offscreen)\n                this._offscreen = createOffscreenGroup(this);\n            return this._offscreen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Component.prototype, \"defaultOptions\", {\n        get: function () {\n            return this._defaultOptions;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Component.prototype.connectedCallback = function () {\n        this.render(this.attributes, this);\n        this.bindEvents(this.attributes, this);\n        this.initialized = true;\n    };\n    Component.prototype.disconnectedCallback = function () {\n        var _a;\n        (_a = this._offscreen) === null || _a === void 0 ? void 0 : _a.destroy();\n    };\n    Component.prototype.attributeChangedCallback = function (name) {\n        if (name === 'visibility') {\n            applyVisibility.call(this);\n        }\n    };\n    Component.prototype.update = function (attr, animate) {\n        var _a;\n        this.attr(deepAssign({}, this.attributes, attr || {}));\n        return (_a = this.render) === null || _a === void 0 ? void 0 : _a.call(this, this.attributes, this, animate);\n    };\n    Component.prototype.clear = function () {\n        this.removeChildren();\n    };\n    Component.prototype.bindEvents = function (attributes, container) { };\n    Component.prototype.getSubShapeStyle = function (attributes) {\n        var x = attributes.x, y = attributes.y, transform = attributes.transform, transformOrigin = attributes.transformOrigin, _class = attributes.class, className = attributes.className, zIndex = attributes.zIndex, style = __rest(attributes, [\"x\", \"y\", \"transform\", \"transformOrigin\", \"class\", \"className\", \"zIndex\"]);\n        return style;\n    };\n    return Component;\n}(CustomElement));\nexport { Component };\n//# sourceMappingURL=component.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { Text as GText } from '@antv/g';\nimport { createOffscreenGroup } from '../util/offscreen';\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text(_a) {\n        if (_a === void 0) { _a = {}; }\n        var style = _a.style, restOptions = __rest(_a, [\"style\"]);\n        return _super.call(this, __assign({ style: __assign({ text: '', fill: 'black', fontFamily: 'sans-serif', fontSize: 16, fontStyle: 'normal', fontVariant: 'normal', fontWeight: 'normal', lineWidth: 1, textAlign: 'start', textBaseline: 'middle' }, style) }, restOptions)) || this;\n    }\n    Object.defineProperty(Text.prototype, \"offscreenGroup\", {\n        get: function () {\n            if (!this._offscreen)\n                this._offscreen = createOffscreenGroup(this);\n            return this._offscreen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Text.prototype.disconnectedCallback = function () {\n        var _a;\n        (_a = this._offscreen) === null || _a === void 0 ? void 0 : _a.destroy();\n    };\n    return Text;\n}(GText));\nexport { Text };\n//# sourceMappingURL=Text.js.map","export function degToRad(deg) {\n    return (deg * Math.PI) / 180;\n}\nexport function radToDeg(rad) {\n    return Number(((rad * 180) / Math.PI).toPrecision(5));\n}\n//# sourceMappingURL=angle-converter.js.map","import { transition } from './utils';\nexport default function (element, options) {\n    if (!element.style.opacity)\n        element.style.opacity = 1;\n    return transition(element, { opacity: 0 }, options);\n}\n//# sourceMappingURL=fadeOut.js.map","export var PRIMILTIVE_ATTRIBUTES = [\n    '$el',\n    'cx',\n    'cy',\n    'd',\n    'dx',\n    'dy',\n    'fill',\n    'fillOpacity',\n    'filter',\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'fontWeight',\n    'height',\n    'img',\n    'increasedLineWidthForHitTesting',\n    'innerHTML',\n    'isBillboard',\n    'billboardRotation',\n    'isSizeAttenuation',\n    'isClosed',\n    'isOverflowing',\n    'leading',\n    'letterSpacing',\n    'lineDash',\n    'lineHeight',\n    'lineWidth',\n    'markerEnd',\n    'markerEndOffset',\n    'markerMid',\n    'markerStart',\n    'markerStartOffset',\n    'maxLines',\n    'metrics',\n    'miterLimit',\n    'offsetX',\n    'offsetY',\n    'opacity',\n    'path',\n    'points',\n    'r',\n    'radius',\n    'rx',\n    'ry',\n    'shadowColor',\n    'src',\n    'stroke',\n    'strokeOpacity',\n    'text',\n    'textAlign',\n    'textBaseline',\n    'textDecorationColor',\n    'textDecorationLine',\n    'textDecorationStyle',\n    'textOverflow',\n    'textPath',\n    'textPathSide',\n    'textPathStartOffset',\n    'transform',\n    'transformOrigin',\n    'visibility',\n    'width',\n    'wordWrap',\n    'wordWrapWidth',\n    'x',\n    'x1',\n    'x2',\n    'y',\n    'y1',\n    'y2',\n    'z1',\n    'z2',\n    'zIndex',\n];\nexport function isPrimitiveAttribute(key) {\n    return PRIMILTIVE_ATTRIBUTES.includes(key);\n}\nexport function getPrimitiveAttributes(attributes) {\n    var object = {};\n    for (var key in attributes) {\n        if (isPrimitiveAttribute(key))\n            object[key] = attributes[key];\n    }\n    return object;\n}\n//# sourceMappingURL=primitive.js.map","import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { fadeOut, onAnimateFinished, transition } from '../../animation';\nimport { Component } from '../../core';\nimport { classNames, distance, getCallbackValue, getPrimitiveAttributes, select } from '../../util';\nvar CLASS_NAMES = classNames({\n    lineGroup: 'line-group',\n    line: 'line',\n    regionGroup: 'region-group',\n    region: 'region',\n}, 'grid');\nfunction getStraightPath(points) {\n    return points.reduce(function (acc, curr, idx) {\n        acc.push(__spreadArray([idx === 0 ? 'M' : 'L'], __read(curr), false));\n        return acc;\n    }, []);\n}\nfunction getSurroundPath(points, attr, reversed) {\n    var _a = attr.connect, connect = _a === void 0 ? 'line' : _a, center = attr.center;\n    if (connect === 'line')\n        return getStraightPath(points);\n    if (!center)\n        return [];\n    var radius = distance(points[0], center);\n    var sweepFlag = reversed ? 0 : 1;\n    return points.reduce(function (r, p, idx) {\n        if (idx === 0)\n            r.push(__spreadArray(['M'], __read(p), false));\n        else\n            r.push(__spreadArray(['A', radius, radius, 0, 0, sweepFlag], __read(p), false));\n        return r;\n    }, []);\n}\nfunction getLinePath(points, cfg, reversed) {\n    if (cfg.type === 'surround')\n        return getSurroundPath(points, cfg, reversed);\n    return getStraightPath(points);\n}\nfunction connectPaths(from, to, cfg) {\n    var type = cfg.type, connect = cfg.connect, center = cfg.center, closed = cfg.closed;\n    var closeFlag = closed ? [['Z']] : [];\n    var _a = __read([getLinePath(from, cfg), getLinePath(to.slice().reverse(), cfg, true)], 2), path1 = _a[0], path2 = _a[1];\n    var _b = __read([from[0], to.slice(-1)[0]], 2), startOfFrom = _b[0], endOfTo = _b[1];\n    var createPath = function (insertA, insertB) {\n        return [path1, insertA, path2, insertB, closeFlag].flat();\n    };\n    if (connect === 'line' || type === 'surround') {\n        return createPath([__spreadArray(['L'], __read(endOfTo), false)], [__spreadArray(['L'], __read(startOfFrom), false)]);\n    }\n    if (!center)\n        throw new Error('Arc grid need to specified center');\n    var _c = __read([distance(endOfTo, center), distance(startOfFrom, center)], 2), raduis1 = _c[0], radius2 = _c[1];\n    return createPath([\n        __spreadArray(['A', raduis1, raduis1, 0, 0, 1], __read(endOfTo), false),\n        __spreadArray(['L'], __read(endOfTo), false),\n    ], [\n        __spreadArray(['A', radius2, radius2, 0, 0, 0], __read(startOfFrom), false),\n        __spreadArray(['L'], __read(startOfFrom), false),\n    ]);\n}\nfunction renderGridLine(container, data, attr, style) {\n    var animate = attr.animate, isBillboard = attr.isBillboard;\n    var lines = data.map(function (item, idx) {\n        return {\n            id: item.id || \"grid-line-\".concat(idx),\n            d: getLinePath(item.points, attr),\n        };\n    });\n    return container\n        .selectAll(CLASS_NAMES.line.class)\n        .data(lines, function (d) { return d.id; })\n        .join(function (enter) {\n        return enter.append('path').each(function (datum, index) {\n            var lineStyle = getCallbackValue(getPrimitiveAttributes(__assign({ d: datum.d }, style)), [datum, index, lines]);\n            this.attr(__assign({ class: CLASS_NAMES.line.name, stroke: '#D9D9D9', lineWidth: 1, lineDash: [4, 4], isBillboard: isBillboard }, lineStyle));\n        });\n    }, function (update) {\n        return update.transition(function (datum, index) {\n            var lineStyle = getCallbackValue(getPrimitiveAttributes(__assign({ d: datum.d }, style)), [datum, index, lines]);\n            return transition(this, lineStyle, animate.update);\n        });\n    }, function (exit) {\n        return exit.transition(function () {\n            var _this = this;\n            var animation = fadeOut(this, animate.exit);\n            onAnimateFinished(animation, function () { return _this.remove(); });\n            return animation;\n        });\n    })\n        .transitions();\n}\nfunction renderAlternateRegion(container, data, style) {\n    var animate = style.animate, connect = style.connect, areaFill = style.areaFill;\n    if (data.length < 2 || !areaFill || !connect)\n        return [];\n    var colors = Array.isArray(areaFill) ? areaFill : [areaFill, 'transparent'];\n    var getColor = function (idx) { return colors[idx % colors.length]; };\n    var regions = [];\n    for (var idx = 0; idx < data.length - 1; idx++) {\n        var _a = __read([data[idx].points, data[idx + 1].points], 2), prev = _a[0], curr = _a[1];\n        var path = connectPaths(prev, curr, style);\n        regions.push({ d: path, fill: getColor(idx) });\n    }\n    return container\n        .selectAll(CLASS_NAMES.region.class)\n        .data(regions, function (_, i) { return i; })\n        .join(function (enter) {\n        return enter\n            .append('path')\n            .each(function (datum, index) {\n            var regionStyle = getCallbackValue(datum, [datum, index, regions]);\n            this.attr(regionStyle);\n        })\n            .attr('className', CLASS_NAMES.region.name);\n    }, function (update) {\n        return update.transition(function (datum, index) {\n            var regionStyle = getCallbackValue(datum, [datum, index, regions]);\n            return transition(this, regionStyle, animate.update);\n        });\n    }, function (exit) {\n        return exit.transition(function () {\n            var _this = this;\n            var animation = fadeOut(this, animate.exit);\n            onAnimateFinished(animation, function () { return _this.remove(); });\n            return animation;\n        });\n    })\n        .transitions();\n}\nfunction getData(attr) {\n    var _a = attr.data, data = _a === void 0 ? [] : _a, closed = attr.closed;\n    if (!closed)\n        return data;\n    return data.map(function (datum) {\n        var points = datum.points;\n        var _a = __read(points, 1), start = _a[0];\n        return __assign(__assign({}, datum), { points: __spreadArray(__spreadArray([], __read(points), false), [start], false) });\n    });\n}\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    function Grid() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Grid.prototype.render = function (attributes, container) {\n        // @ts-ignore do no passBy className\n        var type = attributes.type, center = attributes.center, areaFill = attributes.areaFill, closed = attributes.closed, style = __rest(attributes, [\"type\", \"center\", \"areaFill\", \"closed\"]);\n        var data = getData(attributes);\n        var lineGroup = select(container).maybeAppendByClassName(CLASS_NAMES.lineGroup, 'g');\n        var regionGroup = select(container).maybeAppendByClassName(CLASS_NAMES.regionGroup, 'g');\n        var lineTransitions = renderGridLine(lineGroup, data, attributes, style);\n        var reigionTransitions = renderAlternateRegion(regionGroup, data, attributes);\n        return __spreadArray(__spreadArray([], __read(lineTransitions), false), __read(reigionTransitions), false);\n    };\n    return Grid;\n}(Component));\nexport { Grid };\n//# sourceMappingURL=index.js.map","import { __read } from \"tslib\";\nexport var numberInterpolate = function (from, to) {\n    return function (t) {\n        return from * (1 - t) + to * t;\n    };\n};\nexport function arrayInterpolate(from, to) {\n    var nb = to ? to.length : 0;\n    var na = from ? Math.min(nb, from.length) : 0;\n    return function (t) {\n        var x = new Array(na);\n        var c = new Array(nb);\n        var i = 0;\n        for (i = 0; i < na; ++i)\n            x[i] = interpolate(from[i], to[i]);\n        for (; i < nb; ++i)\n            c[i] = to[i];\n        for (i = 0; i < na; ++i)\n            c[i] = x[i](t);\n        return c;\n    };\n}\nexport function objectInterpolate(from, to) {\n    if (from === void 0) { from = {}; }\n    if (to === void 0) { to = {}; }\n    var i = {};\n    var c = {};\n    Object.entries(to).forEach(function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        if (k in from)\n            i[k] = interpolate(from[k], v);\n        else\n            c[k] = v;\n    });\n    return function (t) {\n        Object.entries(i).forEach(function (_a) {\n            var _b = __read(_a, 2), k = _b[0], v = _b[1];\n            return (c[k] = v(t));\n        });\n        return c;\n    };\n}\nexport function interpolate(from, to) {\n    if (typeof from === 'number' && typeof to === 'number') {\n        // @ts-ignore\n        return numberInterpolate(from, to);\n    }\n    if (Array.isArray(from) && Array.isArray(to)) {\n        // @ts-ignore\n        return arrayInterpolate(from, to);\n    }\n    if (typeof from === 'object' && typeof to === 'object') {\n        // @ts-ignore\n        return objectInterpolate(from, to);\n    }\n    return (function (t) { return from; });\n}\n//# sourceMappingURL=interpolate.js.map","export function omit(obj, keys) {\n    var res = {};\n    var innerKeys = Array.isArray(keys) ? keys : [keys];\n    for (var key in obj) {\n        if (!innerKeys.includes(key)) {\n            res[key] = obj[key];\n        }\n    }\n    return res;\n}\n//# sourceMappingURL=omit.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { isFunction } from '@antv/util';\nimport { degToRad, getCallbackValue, normalize, vertical } from '../../../util';\nexport function getCallbackStyle(style, params) {\n    return Object.fromEntries(Object.entries(style).map(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], val = _b[1];\n        return [key, getCallbackValue(val, params)];\n    }));\n}\nexport function baseDependencies(attr) {\n    if (attr.type === 'linear') {\n        var startPos = attr.startPos, endPos = attr.endPos;\n        return __spreadArray(__spreadArray([], __read(startPos), false), __read(endPos), false);\n    }\n    var startAngle = attr.startAngle, endAngle = attr.endAngle, center = attr.center, radius = attr.radius;\n    return __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false);\n}\nexport function filterExec(data, filter) {\n    return !!filter && isFunction(filter) ? data.filter(filter) : data;\n}\n/** ---- to avoid cycle dependency */\nexport function getLineAngle(value, attr) {\n    var startAngle = attr.startAngle, endAngle = attr.endAngle;\n    return (endAngle - startAngle) * value + startAngle;\n}\nexport function getLineTangentVector(value, attr) {\n    if (attr.type === 'linear') {\n        var _a = __read(attr.startPos, 2), startX = _a[0], startY = _a[1], _b = __read(attr.endPos, 2), endX = _b[0], endY = _b[1];\n        var _c = __read([endX - startX, endY - startY], 2), dx = _c[0], dy = _c[1];\n        return normalize([dx, dy]);\n    }\n    var angle = degToRad(getLineAngle(value, attr));\n    return [-Math.sin(angle), Math.cos(angle)];\n}\nexport function getDirectionVector(value, direction, attr) {\n    var tangentVector = getLineTangentVector(value, attr);\n    return vertical(tangentVector, direction !== 'positive');\n}\nexport function getLabelVector(value, attr) {\n    return getDirectionVector(value, attr.labelDirection, attr);\n}\n//# sourceMappingURL=utils.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { get } from '@antv/util';\nimport { transition } from '../../../animation';\nimport { degToRad, keyframeInterpolate, omit, renderExtDo, scaleToPixel, subStyleProps, } from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport { getLineAngle, getLineTangentVector } from './utils';\nexport function getLinearValuePos(value, attr) {\n    var _a = __read(attr.startPos, 2), sx = _a[0], sy = _a[1], _b = __read(attr.endPos, 2), ex = _b[0], ey = _b[1];\n    var _c = __read([ex - sx, ey - sy], 2), dx = _c[0], dy = _c[1];\n    return [sx + dx * value, sy + dy * value];\n}\nexport function getArcValuePos(value, attr) {\n    var radius = attr.radius, _a = __read(attr.center, 2), cx = _a[0], cy = _a[1];\n    var angle = degToRad(getLineAngle(value, attr));\n    return [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)];\n}\nexport function getValuePos(value, attr) {\n    if (attr.type === 'linear')\n        return getLinearValuePos(value, attr);\n    return getArcValuePos(value, attr);\n}\nexport function isAxisHorizontal(attr) {\n    return getLineTangentVector(0, attr)[1] === 0;\n}\nexport function isAxisVertical(attr) {\n    return getLineTangentVector(0, attr)[0] === 0;\n}\nfunction isCircle(startAngle, endAngle) {\n    return endAngle - startAngle === 360;\n}\nfunction getArcPath(startAngle, endAngle, cx, cy, radius) {\n    var diffAngle = endAngle - startAngle;\n    var _a = __read([radius, radius], 2), rx = _a[0], ry = _a[1];\n    var _b = __read([degToRad(startAngle), degToRad(endAngle)], 2), startAngleRadians = _b[0], endAngleRadians = _b[1];\n    var getPosByAngle = function (angle) { return [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)]; };\n    var _c = __read(getPosByAngle(startAngleRadians), 2), x1 = _c[0], y1 = _c[1];\n    var _d = __read(getPosByAngle(endAngleRadians), 2), x2 = _d[0], y2 = _d[1];\n    if (isCircle(startAngle, endAngle)) {\n        var middleAngleRadians = (endAngleRadians + startAngleRadians) / 2;\n        var _e = __read(getPosByAngle(middleAngleRadians), 2), xm = _e[0], ym = _e[1];\n        return [\n            ['M', x1, y1],\n            ['A', rx, ry, 0, 1, 0, xm, ym],\n            ['A', rx, ry, 0, 1, 0, x2, y2],\n        ];\n    }\n    // \n    var large = diffAngle > 180 ? 1 : 0;\n    // 1- 0-\n    var sweep = startAngle > endAngle ? 0 : 1;\n    var isClosePath = false;\n    return isClosePath\n        ? \"M\".concat(cx, \",\").concat(cy, \",L\").concat(x1, \",\").concat(y1, \",A\").concat(rx, \",\").concat(ry, \",0,\").concat(large, \",\").concat(sweep, \",\").concat(x2, \",\").concat(y2, \",L\").concat(cx, \",\").concat(cy)\n        : \"M\".concat(x1, \",\").concat(y1, \",A\").concat(rx, \",\").concat(ry, \",0,\").concat(large, \",\").concat(sweep, \",\").concat(x2, \",\").concat(y2);\n}\nfunction getArcAttr(arc) {\n    var _a = arc.attributes, startAngle = _a.startAngle, endAngle = _a.endAngle, center = _a.center, radius = _a.radius;\n    return __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false);\n}\nfunction renderArc(container, attr, style, animate) {\n    var startAngle = attr.startAngle, endAngle = attr.endAngle, center = attr.center, radius = attr.radius;\n    return container\n        .selectAll(CLASS_NAMES.line.class)\n        .data([{ d: getArcPath.apply(void 0, __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false)) }], function (d, i) { return i; })\n        .join(function (enter) {\n        return enter\n            .append('path')\n            .attr('className', CLASS_NAMES.line.name)\n            .styles(attr)\n            .styles({ d: function (d) { return d.d; } });\n    }, function (update) {\n        return update\n            .transition(function () {\n            var _this = this;\n            var animation = keyframeInterpolate(this, getArcAttr(this), __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false), animate.update);\n            if (animation) {\n                var layout = function () {\n                    var data = get(_this.attributes, '__keyframe_data__');\n                    _this.style.d = getArcPath.apply(void 0, __spreadArray([], __read(data), false));\n                };\n                animation.onframe = layout;\n                animation.onfinish = layout;\n            }\n            return animation;\n        })\n            .styles(attr);\n    }, function (exit) { return exit.remove(); })\n        .styles(style)\n        .transitions();\n}\nfunction renderTruncation(container, _a) {\n    var truncRange = _a.truncRange, truncShape = _a.truncShape, lineExtension = _a.lineExtension;\n    // TODO\n}\nfunction extendLine(startPos, endPos, range) {\n    if (range === void 0) { range = [0, 0]; }\n    var _a = __read([startPos, endPos, range], 3), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1], _d = __read(_a[2], 2), l1 = _d[0], l2 = _d[1];\n    var _e = __read([x2 - x1, y2 - y1], 2), x = _e[0], y = _e[1];\n    var L = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\n    var _f = __read([-l1 / L, l2 / L], 2), s1 = _f[0], s2 = _f[1];\n    return [s1 * x, s1 * y, s2 * x, s2 * y];\n}\nfunction getLinePath(points) {\n    var _a = __read(points, 2), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1];\n    return { x1: x1, y1: y1, x2: x2, y2: y2 };\n}\nfunction renderLinear(container, attr, style, animate) {\n    var showTrunc = attr.showTrunc, startPos = attr.startPos, endPos = attr.endPos, truncRange = attr.truncRange, lineExtension = attr.lineExtension;\n    var _a = __read([startPos, endPos], 2), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1];\n    var _d = __read(lineExtension ? extendLine(startPos, endPos, lineExtension) : new Array(4).fill(0), 4), ox1 = _d[0], oy1 = _d[1], ox2 = _d[2], oy2 = _d[3];\n    var renderLine = function (data) {\n        return container\n            .selectAll(CLASS_NAMES.line.class)\n            .data(data, function (d, i) { return i; })\n            .join(function (enter) {\n            return enter\n                .append('line')\n                .attr('className', function (d) { return \"\".concat(CLASS_NAMES.line.name, \" \").concat(d.className); })\n                .styles(style)\n                .transition(function (d) {\n                return transition(this, getLinePath(d.line), false);\n            });\n        }, function (update) {\n            return update.styles(style).transition(function (_a) {\n                var line = _a.line;\n                return transition(this, getLinePath(line), animate.update);\n            });\n        }, function (exit) { return exit.remove(); })\n            .transitions();\n    };\n    if (!showTrunc || !truncRange) {\n        return renderLine([\n            {\n                line: [\n                    [x1 + ox1, y1 + oy1],\n                    [x2 + ox2, y2 + oy2],\n                ],\n                className: CLASS_NAMES.line.name,\n            },\n        ]);\n    }\n    var _e = __read(truncRange, 2), r1 = _e[0], r2 = _e[1];\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var _f = __read([x1 + dx * r1, y1 + dy * r1], 2), x3 = _f[0], y3 = _f[1];\n    var _g = __read([x1 + dx * r2, y1 + dy * r2], 2), x4 = _g[0], y4 = _g[1];\n    var animation = renderLine([\n        {\n            line: [\n                [x1 + ox1, y1 + oy1],\n                [x3, y3],\n            ],\n            className: CLASS_NAMES.lineFirst.name,\n        },\n        {\n            line: [\n                [x4, y4],\n                [x2 + ox2, y2 + oy2],\n            ],\n            className: CLASS_NAMES.lineSecond.name,\n        },\n    ]);\n    renderTruncation(container, attr);\n    return animation;\n}\nfunction renderAxisArrow(container, type, attr, style) {\n    var showArrow = attr.showArrow, showTrunc = attr.showTrunc, lineArrow = attr.lineArrow, lineArrowOffset = attr.lineArrowOffset, lineArrowSize = attr.lineArrowSize;\n    var shapeToAddArrow;\n    if (type === 'arc')\n        shapeToAddArrow = container.select(CLASS_NAMES.line.class);\n    else if (showTrunc)\n        shapeToAddArrow = container.select(CLASS_NAMES.lineSecond.class);\n    else\n        shapeToAddArrow = container.select(CLASS_NAMES.line.class);\n    if (!showArrow || !lineArrow || (attr.type === 'arc' && isCircle(attr.startAngle, attr.endAngle))) {\n        var node = shapeToAddArrow.node();\n        if (node)\n            node.style.markerEnd = undefined;\n        return;\n    }\n    var arrow = renderExtDo(lineArrow);\n    arrow.attr(style);\n    scaleToPixel(arrow, lineArrowSize, true);\n    shapeToAddArrow.style('markerEnd', arrow).style('markerEndOffset', -lineArrowOffset);\n}\nexport function renderAxisLine(container, attr, animate) {\n    var type = attr.type;\n    var animation;\n    var style = subStyleProps(attr, 'line');\n    if (type === 'linear')\n        animation = renderLinear(container, attr, omit(style, 'arrow'), animate);\n    else\n        animation = renderArc(container, attr, omit(style, 'arrow'), animate);\n    renderAxisArrow(container, type, attr, style);\n    return animation;\n}\n//# sourceMappingURL=line.js.map","import { __assign } from \"tslib\";\nimport { interpolate } from './interpolate';\nexport function keyframeInterpolate(element, from, to, options) {\n    if (!options) {\n        element.attr('__keyframe_data__', to);\n        return null;\n    }\n    var _a = options.duration, duration = _a === void 0 ? 0 : _a;\n    var int = interpolate(from, to);\n    var count = Math.ceil(+duration / 16);\n    var keyframes = new Array(count)\n        .fill(0)\n        .map(function (datum, index, array) { return ({ __keyframe_data__: int(index / (array.length - 1)) }); });\n    // @ts-ignore\n    return element.animate(keyframes, __assign({ fill: 'both' }, options));\n}\n//# sourceMappingURL=keyframe-interpolate.js.map","import { __assign, __read } from \"tslib\";\nimport { isFunction } from '@antv/util';\nimport { degToRad, getCallbackValue, scale, subStyleProps } from '../../../util';\nimport { Grid } from '../../grid';\nimport { CLASS_NAMES } from '../constant';\nimport { getValuePos } from './line';\nimport { filterExec, getDirectionVector } from './utils';\nfunction getGridVector(value, attr) {\n    return getDirectionVector(value, attr.gridDirection, attr);\n}\nfunction getGridCenter(attr) {\n    var type = attr.type, gridCenter = attr.gridCenter;\n    if (type === 'linear')\n        return gridCenter;\n    return gridCenter || attr.center;\n}\nfunction renderStraight(data, attr) {\n    var gridLength = attr.gridLength;\n    return data.map(function (_a, index) {\n        var value = _a.value;\n        var _b = __read(getValuePos(value, attr), 2), x = _b[0], y = _b[1];\n        var _c = __read(scale(getGridVector(value, attr), gridLength), 2), dx = _c[0], dy = _c[1];\n        return {\n            id: index,\n            points: [\n                [x, y],\n                [x + dx, y + dy],\n            ],\n        };\n    });\n}\nfunction renderSurround(data, attr) {\n    var controlAngles = attr.gridControlAngles;\n    var center = getGridCenter(attr);\n    if (!center)\n        throw new Error('grid center is not provide');\n    if (data.length < 2)\n        throw new Error('Invalid grid data');\n    if (!controlAngles || controlAngles.length === 0)\n        throw new Error('Invalid gridControlAngles');\n    var _a = __read(center, 2), cx = _a[0], cy = _a[1];\n    return data.map(function (_a, index) {\n        var value = _a.value;\n        var _b = __read(getValuePos(value, attr), 2), sx = _b[0], sy = _b[1];\n        var _c = __read([sx - cx, sy - cy], 2), dx = _c[0], dy = _c[1];\n        var points = [];\n        controlAngles.forEach(function (angle) {\n            var angleInRad = degToRad(angle);\n            var _a = __read([Math.cos(angleInRad), Math.sin(angleInRad)], 2), cosa = _a[0], sina = _a[1];\n            var x = dx * cosa - dy * sina + cx;\n            var y = dx * sina + dy * cosa + cy;\n            points.push([x, y]);\n        });\n        return { points: points, id: index };\n    });\n}\nexport function renderGrid(container, data, attr, animate) {\n    var gridAttr = subStyleProps(attr, 'grid');\n    var type = gridAttr.type, areaFill = gridAttr.areaFill;\n    var center = getGridCenter(attr);\n    var finalData = filterExec(data, attr.gridFilter);\n    var gridItems = type === 'segment' ? renderStraight(finalData, attr) : renderSurround(finalData, attr);\n    var style = __assign(__assign({}, gridAttr), { center: center, areaFill: isFunction(areaFill)\n            ? finalData.map(function (datum, index) { return getCallbackValue(areaFill, [datum, index, finalData]); })\n            : areaFill, animate: animate, data: gridItems });\n    return container\n        .selectAll(CLASS_NAMES.grid.class)\n        .data([1])\n        .join(function (enter) { return enter.append(function () { return new Grid({ style: style }); }).attr('className', CLASS_NAMES.grid.name); }, function (update) {\n        return update.transition(function () {\n            return this.update(style);\n        });\n    }, function (exit) { return exit.remove(); })\n        .transitions();\n}\n//# sourceMappingURL=grid.js.map","export function inRange(n, start, end, includeLeft, includeRight) {\n    if (includeLeft === void 0) { includeLeft = true; }\n    if (includeRight === void 0) { includeRight = false; }\n    if ((includeLeft && n === start) || (includeRight && n === end))\n        return true;\n    return n > start && n < end;\n}\n//# sourceMappingURL=in-range.js.map","import { __read } from \"tslib\";\nexport function getTranslate(node, x, y) {\n    var _a = node.getBBox(), width = _a.width, height = _a.height;\n    var _b = __read([x, y].map(function (v, i) {\n        var _a;\n        return v.includes('%')\n            ? (parseFloat(((_a = v.match(/[+-]?([0-9]*[.])?[0-9]+/)) === null || _a === void 0 ? void 0 : _a[0]) || '0') / 100) * (i === 0 ? width : height)\n            : v;\n    }), 2), tx = _b[0], ty = _b[1];\n    return [tx, ty];\n}\n/**\n * transform that support translate percent value\n */\nexport function percentTransform(node, val) {\n    if (!val)\n        return;\n    try {\n        var reg = /translate\\(([+-]*[\\d]+[%]*),[ ]*([+-]*[\\d]+[%]*)\\)/g;\n        var computedVal = val.replace(reg, function (match, x, y) { return \"translate(\".concat(getTranslate(node, x, y), \")\"); });\n        node.attr('transform', computedVal);\n    }\n    catch (e) {\n        // do nothing\n    }\n}\n//# sourceMappingURL=transform.js.map","export var defined = function (x) { return x !== undefined && x != null && !Number.isNaN(x); };\n//# sourceMappingURL=defined.js.map","import { __read } from \"tslib\";\nimport { degToRad, parseSeriesAttr, textOf } from '../../../util';\nvar Bounds = /** @class */ (function () {\n    function Bounds(x1, y1, x2, y2) {\n        this.set(x1, y1, x2, y2);\n    }\n    Object.defineProperty(Bounds.prototype, \"left\", {\n        get: function () {\n            return this.x1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"top\", {\n        get: function () {\n            return this.y1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"right\", {\n        get: function () {\n            return this.x2;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"bottom\", {\n        get: function () {\n            return this.y2;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"width\", {\n        get: function () {\n            return this.defined('x2') && this.defined('x1') ? this.x2 - this.x1 : undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"height\", {\n        get: function () {\n            return this.defined('y2') && this.defined('y1') ? this.y2 - this.y1 : undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Bounds.prototype.rotatedPoints = function (radian, x, y) {\n        var _a = this, x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        var cx = x - x * cos + y * sin;\n        var cy = y - x * sin - y * cos;\n        var points = [\n            [cos * x1 - sin * y2 + cx, sin * x1 + cos * y2 + cy],\n            [cos * x2 - sin * y2 + cx, sin * x2 + cos * y2 + cy],\n            [cos * x1 - sin * y1 + cx, sin * x1 + cos * y1 + cy],\n            [cos * x2 - sin * y1 + cx, sin * x2 + cos * y1 + cy],\n        ];\n        return points;\n    };\n    Bounds.prototype.set = function (x1, y1, x2, y2) {\n        if (x2 < x1) {\n            this.x2 = x1;\n            this.x1 = x2;\n        }\n        else {\n            this.x1 = x1;\n            this.x2 = x2;\n        }\n        if (y2 < y1) {\n            this.y2 = y1;\n            this.y1 = y2;\n        }\n        else {\n            this.y1 = y1;\n            this.y2 = y2;\n        }\n        return this;\n    };\n    Bounds.prototype.defined = function (key) {\n        return this[key] !== Number.MAX_VALUE && this[key] !== -Number.MAX_VALUE;\n    };\n    return Bounds;\n}());\nexport { Bounds };\n/**\n * Can't use getBounds directly since we should not use AABB here.\n */\nexport function getBounds(item, margin) {\n    var angle = item.getEulerAngles() || 0;\n    item.setEulerAngles(0);\n    // get dimensions\n    var _a = item.getBounds(), _b = __read(_a.min, 2), x = _b[0], y = _b[1], _c = __read(_a.max, 2), right = _c[0], bottom = _c[1];\n    var _d = item.getBBox(), w = _d.width, h = _d.height;\n    var height = h;\n    var dx = 0;\n    var dy = 0;\n    var anchorX = x;\n    var anchorY = y;\n    var text = textOf(item);\n    if (text) {\n        // [to fix]  G  bbox \n        height -= 1.5;\n        var a = text.style.textAlign;\n        var b_1 = text.style.textBaseline;\n        // horizontal alignment\n        if (a === 'center') {\n            anchorX = (x + right) / 2;\n        }\n        else if (a === 'right' || a === 'end') {\n            anchorX = right;\n        }\n        else {\n            // left by default, do nothing\n        }\n        // vertical alignment\n        if (b_1 === 'middle') {\n            anchorY = (y + bottom) / 2;\n        }\n        else if (b_1 === 'bottom') {\n            anchorY = bottom;\n        }\n    }\n    var _e = __read(parseSeriesAttr(margin), 4), _f = _e[0], t = _f === void 0 ? 0 : _f, _g = _e[1], r = _g === void 0 ? 0 : _g, _h = _e[2], b = _h === void 0 ? t : _h, _j = _e[3], l = _j === void 0 ? r : _j;\n    var bounds = new Bounds((dx += x) - l, (dy += y) - t, dx + w + r, dy + height + b);\n    item.setEulerAngles(angle);\n    return bounds.rotatedPoints(degToRad(angle), anchorX, anchorY);\n}\n//# sourceMappingURL=bounds.js.map","import { getBounds } from './bounds';\nfunction onLine(line, point) {\n    return (point[0] <= Math.max(line[0][0], line[1][0]) &&\n        point[0] <= Math.min(line[0][0], line[1][0]) &&\n        point[1] <= Math.max(line[0][1], line[1][1]) &&\n        point[1] <= Math.min(line[0][1], line[1][1]));\n}\nfunction direction(a, b, c) {\n    var val = (b[1] - a[1]) * (c[0] - b[0]) - (b[0] - a[0]) * (c[1] - b[1]);\n    if (val === 0)\n        return 0;\n    return val < 0 ? 2 : 1;\n}\nfunction isIntersect(line1, line2) {\n    var dir1 = direction(line1[0], line1[1], line2[0]);\n    var dir2 = direction(line1[0], line1[1], line2[1]);\n    var dir3 = direction(line2[0], line2[1], line1[0]);\n    var dir4 = direction(line2[0], line2[1], line1[1]);\n    if (dir1 !== dir2 && dir3 !== dir4)\n        return true;\n    if (dir1 === 0 && onLine(line1, line2[0]))\n        return true;\n    if (dir2 === 0 && onLine(line1, line2[1]))\n        return true;\n    if (dir3 === 0 && onLine(line2, line1[0]))\n        return true;\n    if (dir4 === 0 && onLine(line2, line1[1]))\n        return true;\n    return false;\n}\nexport function isPointInsideRectangle(polygon, point) {\n    var n = polygon.length;\n    if (n < 3)\n        return false;\n    var lineToInfinity = [point, [9999, point[1]]];\n    var count = 0;\n    var i = 0;\n    do {\n        var side = [polygon[i], polygon[(i + 1) % n]];\n        if (isIntersect(side, lineToInfinity)) {\n            if (direction(side[0], point, side[1]) === 0)\n                return onLine(side, point);\n            count++;\n        }\n        i = (i + 1) % n;\n    } while (i !== 0);\n    return !!(count & 1);\n}\nexport function isRectangleBInsideA(rectA, rectB) {\n    return rectB.every(function (point) { return isPointInsideRectangle(rectA, point); });\n}\n/**\n *  child  container \n */\nexport function contain(container, child, margin) {\n    var x1 = container.x1, x2 = container.x2, y1 = container.y1, y2 = container.y2;\n    var parent = [\n        [x1, y1],\n        [x2, y1],\n        [x2, y2],\n        [x1, y2],\n    ];\n    var element = getBounds(child, margin);\n    return isRectangleBInsideA(parent, element);\n}\n//# sourceMappingURL=contain.js.map","import { __read, __values } from \"tslib\";\nimport { getBounds } from './bounds';\n/**\n * Detect whether line-line collision.\n * From: https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect\n */\nfunction lineToLine(line1, line2) {\n    var _a = __read(line1, 4), x0 = _a[0], y0 = _a[1], x1 = _a[2], y1 = _a[3];\n    var _b = __read(line2, 4), x2 = _b[0], y2 = _b[1], x3 = _b[2], y3 = _b[3];\n    var s10x = x1 - x0;\n    var s10y = y1 - y0;\n    var s32x = x3 - x2;\n    var s32y = y3 - y2;\n    var denom = s10x * s32y - s32x * s10y;\n    if (denom === 0)\n        return false;\n    var denomPositive = denom > 0;\n    var s02x = x0 - x2;\n    var s02y = y0 - y2;\n    var sNum = s10x * s02y - s10y * s02x;\n    if (sNum < 0 === denomPositive)\n        return false;\n    var tNum = s32x * s02y - s32y * s02x;\n    if (tNum < 0 === denomPositive)\n        return false;\n    if (sNum > denom === denomPositive || tNum > denom === denomPositive)\n        return false;\n    return true;\n}\nfunction intersectBoxLine(box /**  */, line) {\n    var lines = [\n        [box[0], box[1], box[2], box[3]],\n        [box[2], box[3], box[4], box[5]],\n        [box[4], box[5], box[6], box[7]],\n        [box[6], box[7], box[0], box[1]],\n    ];\n    return lines.some(function (boxLine) { return lineToLine(line, boxLine); });\n}\nexport var IntersectUtils = { lineToLine: lineToLine, intersectBoxLine: intersectBoxLine, getBounds: getBounds };\n/**\n *  DisplayObject \n */\nexport function intersect(a, b, margin) {\n    var e_1, _a;\n    var p = getBounds(a, margin).flat(1);\n    var q = getBounds(b, margin).flat(1);\n    var linesP = [\n        [p[0], p[1], p[2], p[3]],\n        [p[0], p[1], p[4], p[5]],\n        [p[4], p[5], p[6], p[7]],\n        [p[2], p[3], p[6], p[7]],\n    ];\n    try {\n        for (var linesP_1 = __values(linesP), linesP_1_1 = linesP_1.next(); !linesP_1_1.done; linesP_1_1 = linesP_1.next()) {\n            var line = linesP_1_1.value;\n            if (intersectBoxLine(q, line))\n                return true;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (linesP_1_1 && !linesP_1_1.done && (_a = linesP_1.return)) _a.call(linesP_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\n//# sourceMappingURL=intersect.js.map","import { __read, __values } from \"tslib\";\nimport { parseSeriesAttr, scale } from '../../../util';\nimport { getLabelVector } from '../guides/utils';\nimport { isAxisVertical } from '../guides/line';\nimport { Bounds } from './bounds';\nimport { contain } from './contain';\nimport { intersect } from './intersect';\n/**\n * \n * @returns return false if no crossSize, else croseBBox\n */\nfunction createCrossBBox(attr, padding) {\n    var type = attr.type, labelDirection = attr.labelDirection, crossSize = attr.crossSize;\n    if (!crossSize)\n        return false;\n    if (type === 'arc') {\n        var center = attr.center, radius = attr.radius;\n        var _a = __read(center, 2), cx = _a[0], cy = _a[1];\n        var size = labelDirection === 'negative' ? 0 : crossSize;\n        var dMin = -radius - size;\n        var dMax = radius + size;\n        var _b = __read(parseSeriesAttr(padding), 4), top_1 = _b[0], right_1 = _b[1], bottom_1 = _b[2], left_1 = _b[3];\n        // \n        return new Bounds(cx + dMin - left_1, cy + dMin - top_1, cx + dMax + right_1, cy + dMax + bottom_1);\n    }\n    var _c = __read(attr.startPos, 2), sx = _c[0], sy = _c[1], _d = __read(attr.endPos, 2), ex = _d[0], ey = _d[1];\n    // \n    var _e = __read(isAxisVertical(attr)\n        ? [-padding, 0, padding, 0]\n        : [0, padding, 0, -padding], 4), top = _e[0], right = _e[1], bottom = _e[2], left = _e[3];\n    var labelVector = getLabelVector(0, attr);\n    var diff = scale(labelVector, crossSize);\n    var bbox = new Bounds(sx, sy, ex, ey);\n    bbox.x1 += left;\n    bbox.y1 += top;\n    bbox.x2 += right + diff[0];\n    bbox.y2 += bottom + diff[1];\n    return bbox;\n}\nexport function boundTest(items, attr, margin) {\n    var e_1, _a;\n    var crossPadding = attr.crossPadding;\n    var resultSet = new Set();\n    var prev = null;\n    var crossBBox = createCrossBBox(attr, crossPadding);\n    var testContain = function (item) {\n        if (crossBBox)\n            return contain(crossBBox, item);\n        return true;\n    };\n    var testIntersect = function (prevItem, currItem) {\n        if (!prevItem || !prevItem.firstChild)\n            return true;\n        // Get the first child of the item(Text).\n        // @ts-ignore\n        return !intersect(prevItem.firstChild, currItem.firstChild, parseSeriesAttr(margin));\n    };\n    try {\n        for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n            var curr = items_1_1.value;\n            if (!testContain(curr)) {\n                resultSet.add(curr);\n            }\n            else if (!prev || testIntersect(prev, curr)) {\n                prev = curr;\n            }\n            else {\n                resultSet.add(prev);\n                resultSet.add(curr);\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return Array.from(resultSet);\n}\n//# sourceMappingURL=test.js.map","import { __read } from \"tslib\";\nimport { isNil } from '@antv/util';\nimport { getFont, measureTextWidth } from '../../../util';\nimport { boundTest } from '../utils/test';\nfunction parseLengthString(str, font) {\n    if (font === void 0) { font = {}; }\n    if (isNil(str))\n        return 0;\n    if (typeof str === 'number')\n        return str;\n    return Math.floor(measureTextWidth(str, font));\n}\nexport default function ellipseLabels(labels, overlapCfg, attr, utils) {\n    if (labels.length <= 1)\n        return;\n    var _a = overlapCfg.suffix, suffix = _a === void 0 ? '...' : _a, minLength = overlapCfg.minLength, _b = overlapCfg.maxLength, maxLength = _b === void 0 ? Infinity : _b, _c = overlapCfg.step, ellipsisStep = _c === void 0 ? ' ' : _c, _d = overlapCfg.margin, margin = _d === void 0 ? [0, 0, 0, 0] : _d;\n    var font = getFont(utils.getTextShape(labels[0]));\n    var step = parseLengthString(ellipsisStep, font);\n    var min = minLength ? parseLengthString(minLength, font) : step;\n    var max = parseLengthString(maxLength, font);\n    // Enable to ellipsis label when overlap.\n    if (isNil(max) || max === Infinity) {\n        max = Math.max.apply(null, labels.map(function (d) { return d.getBBox().width; }));\n    }\n    // Generally, 100 ticks cost less than 300ms. If cost time exceed, means ticks count is too large to see.\n    var source = labels.slice();\n    var _e = __read(margin, 4), _f = _e[0], top = _f === void 0 ? 0 : _f, _g = _e[1], right = _g === void 0 ? 0 : _g, _h = _e[2], bottom = _h === void 0 ? top : _h, _j = _e[3], left = _j === void 0 ? right : _j;\n    var _loop_1 = function (allowedLength) {\n        source.forEach(function (label) {\n            utils.ellipsis(utils.getTextShape(label), allowedLength, suffix);\n        });\n        source = boundTest(labels, attr, margin);\n        // \n        if (source.length < 1)\n            return { value: void 0 };\n    };\n    for (var allowedLength = max; allowedLength > min + step; allowedLength -= step) {\n        var state_1 = _loop_1(allowedLength);\n        if (typeof state_1 === \"object\")\n            return state_1.value;\n    }\n}\n//# sourceMappingURL=autoEllipsis.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { defined, getLocalBBox, hide } from '../../../util';\nimport { isAxisHorizontal, isAxisVertical } from '../guides/line';\nimport { boundTest } from '../utils/test';\nvar methods = {\n    parity: function (items, _a) {\n        var _b = _a.seq, seq = _b === void 0 ? 2 : _b;\n        return items.filter(function (item, i) { return (i % seq ? (hide(item), false) : true); });\n    },\n};\nvar filterDefined = function (arr) { return arr.filter(defined); };\nexport default function hideLabels(labels, overlapCfg, attr, utils) {\n    var count = labels.length;\n    var keepHeader = overlapCfg.keepHeader, keepTail = overlapCfg.keepTail;\n    if (count <= 1 || (count === 2 && keepHeader && keepTail))\n        return;\n    var parityHide = methods.parity;\n    var reset = function (els) { return (els.forEach(utils.show), els); };\n    var seq = 2;\n    var source = labels.slice();\n    var target = labels.slice();\n    var minLabelWidth = Math.min.apply(Math, __spreadArray([1], __read(labels.map(function (d) { return d.getBBox().width; })), false));\n    if (attr.type === 'linear' && (isAxisHorizontal(attr) || isAxisVertical(attr))) {\n        var minX = getLocalBBox(labels[0]).left;\n        var maxX = getLocalBBox(labels[count - 1]).right;\n        var distance = Math.abs(maxX - minX) || 1;\n        seq = Math.max(Math.floor((count * minLabelWidth) / distance), seq);\n    }\n    var first;\n    var last;\n    if (keepHeader)\n        first = source.splice(0, 1)[0];\n    if (keepTail) {\n        last = source.splice(-1, 1)[0];\n        source.reverse();\n    }\n    reset(source);\n    while (seq < labels.length &&\n        boundTest(filterDefined(last ? __spreadArray(__spreadArray([last], __read(target), false), [first], false) : __spreadArray([first], __read(target), false)), attr, overlapCfg === null || overlapCfg === void 0 ? void 0 : overlapCfg.margin).length) {\n        //  ( first)\n        if (last && !first && seq % 2 === 0) {\n            var rest = source.splice(0, 1);\n            rest.forEach(utils.hide);\n        }\n        else if (last && first) {\n            //  first \n            var rest = source.splice(0, 1);\n            rest.forEach(utils.hide);\n        }\n        target = parityHide(reset(source), { seq: seq });\n        seq++;\n    }\n}\n//# sourceMappingURL=autoHide.js.map","import { isInOffscreenGroup } from '../../../util';\nimport ellipsis from './autoEllipsis';\nimport hide from './autoHide';\nimport rotate from './autoRotate';\nimport wrap from './autoWrap';\nexport var OverlapUtils = new Map([\n    ['hide', hide],\n    ['rotate', rotate],\n    ['ellipsis', ellipsis],\n    ['wrap', wrap],\n]);\nexport function canProcessOverlap(labels, attr, type) {\n    if (attr.labelOverlap.length < 1)\n        return false;\n    if (type === 'hide')\n        return !isInOffscreenGroup(labels[0]);\n    if (type === 'rotate')\n        return !labels.some(function (label) { var _a; return !!((_a = label.attr('transform')) === null || _a === void 0 ? void 0 : _a.includes('rotate')); });\n    if (type === 'ellipsis' || type === 'wrap')\n        return labels.filter(function (item) { return item.querySelector('text'); }).length > 1;\n    return true;\n}\nexport function processOverlap(labels, attr, utils) {\n    var _a = attr.labelOverlap, labelOverlap = _a === void 0 ? [] : _a;\n    if (!labelOverlap.length)\n        return;\n    labelOverlap.forEach(function (overlapCfg) {\n        var type = overlapCfg.type;\n        var util = OverlapUtils.get(type);\n        if (canProcessOverlap(labels, attr, type))\n            util === null || util === void 0 ? void 0 : util(labels, overlapCfg, attr, utils);\n    });\n}\n//# sourceMappingURL=index.js.map","import { __values } from \"tslib\";\nimport { boundTest } from '../utils/test';\nexport default function rotateLabels(labels, overlapCfg, attr, utils) {\n    var e_1, _a;\n    var _b = overlapCfg.optionalAngles, optionalAngles = _b === void 0 ? [0, 45, 90] : _b, margin = overlapCfg.margin, _c = overlapCfg.recoverWhenFailed, recoverWhenFailed = _c === void 0 ? true : _c;\n    var defaultAngles = labels.map(function (label) { return label.getLocalEulerAngles(); });\n    var runAndPassed = function () { return boundTest(labels, attr, margin).length < 1; };\n    var setLabelsRotate = function (angle) {\n        return labels.forEach(function (label, index) {\n            var rotate = Array.isArray(angle) ? angle[index] : angle;\n            utils.rotate(label, +rotate);\n        });\n    };\n    try {\n        for (var optionalAngles_1 = __values(optionalAngles), optionalAngles_1_1 = optionalAngles_1.next(); !optionalAngles_1_1.done; optionalAngles_1_1 = optionalAngles_1.next()) {\n            var angle = optionalAngles_1_1.value;\n            setLabelsRotate(angle);\n            if (runAndPassed())\n                return;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (optionalAngles_1_1 && !optionalAngles_1_1.done && (_a = optionalAngles_1.return)) _a.call(optionalAngles_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    if (recoverWhenFailed) {\n        setLabelsRotate(defaultAngles);\n    }\n}\n//# sourceMappingURL=autoRotate.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { isAxisHorizontal } from '../guides/line';\nimport { boundTest } from '../utils/test';\nfunction inferTextBaseline(attr) {\n    var type = attr.type, labelDirection = attr.labelDirection;\n    if (type === 'linear' && isAxisHorizontal(attr)) {\n        return labelDirection === 'negative' ? 'bottom' : 'top';\n    }\n    return 'middle';\n}\nexport default function wrapLabels(labels, overlapCfg, attr, utils) {\n    var _a = overlapCfg.wordWrapWidth, wordWrapWidth = _a === void 0 ? 50 : _a, _b = overlapCfg.maxLines, maxLines = _b === void 0 ? 3 : _b, _c = overlapCfg.recoverWhenFailed, recoverWhenFailed = _c === void 0 ? true : _c, _d = overlapCfg.margin, margin = _d === void 0 ? [0, 0, 0, 0] : _d;\n    var defaultLines = labels.map(function (label) { return label.attr('maxLines') || 1; });\n    var minLines = Math.min.apply(Math, __spreadArray([], __read(defaultLines), false));\n    var runAndPassed = function () { return boundTest(labels, attr, margin).length < 1; };\n    var textBaseline = inferTextBaseline(attr);\n    var setLabelsWrap = function (lines) {\n        return labels.forEach(function (label, index) {\n            var maxLines = Array.isArray(lines) ? lines[index] : lines;\n            utils.wrap(label, wordWrapWidth, maxLines, textBaseline);\n        });\n    };\n    if (minLines > maxLines)\n        return;\n    for (var lines = minLines; lines <= maxLines; lines++) {\n        setLabelsWrap(lines);\n        if (runAndPassed())\n            return;\n    }\n    if (recoverWhenFailed) {\n        setLabelsWrap(defaultLines);\n    }\n}\n//# sourceMappingURL=autoWrap.js.map","export * from './test';\nexport function getFactor() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var fn = function (str) { return (str === 'positive' ? -1 : 1); };\n    return args.reduce(function (acc, cur) { return acc * fn(cur); }, 1);\n}\n//# sourceMappingURL=index.js.map","import { __assign, __read, __rest, __spreadArray } from \"tslib\";\nimport { get, isFunction } from '@antv/util';\nimport { fadeOut, onAnimateFinished, onAnimatesFinished, transition, transitionShape } from '../../../animation';\nimport { add, defined, ellipsisIt, getCallbackValue, hide, inRange, percentTransform, radToDeg, renderExtDo, scale, select, show, splitStyle, subStyleProps, wrapIt, } from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport { processOverlap } from '../overlap';\nimport { getFactor } from '../utils';\nimport { getValuePos } from './line';\nimport { filterExec, getCallbackStyle, getLabelVector, getLineTangentVector } from './utils';\nfunction angleNormalizer(angle) {\n    var normalizedAngle = angle;\n    while (normalizedAngle < 0)\n        normalizedAngle += 360;\n    return Math.round(normalizedAngle % 360);\n}\nfunction getAngle(v1, v2) {\n    var _a = __read(v1, 2), x1 = _a[0], y1 = _a[1];\n    var _b = __read(v2, 2), x2 = _b[0], y2 = _b[1];\n    var _c = __read([x1 * x2 + y1 * y2, x1 * y2 - y1 * x2], 2), dot = _c[0], det = _c[1];\n    return Math.atan2(det, dot);\n}\n/** to correct label rotation to avoid inverted character */\nfunction correctLabelRotation(_rotate) {\n    var rotate = (_rotate + 360) % 180;\n    if (!inRange(rotate, -90, 90))\n        rotate += 180;\n    return rotate;\n}\n/** get rotation from preset or layout */\nfunction getLabelRotation(datum, label, attr) {\n    var _a;\n    var labelAlign = attr.labelAlign;\n    // if label rotate is set, use it\n    var customRotate = (_a = label.style.transform) === null || _a === void 0 ? void 0 : _a.includes('rotate');\n    if (customRotate)\n        return label.getLocalEulerAngles();\n    var rotate = 0;\n    var labelVector = getLabelVector(datum.value, attr);\n    var tangentVector = getLineTangentVector(datum.value, attr);\n    if (labelAlign === 'horizontal')\n        return 0;\n    if (labelAlign === 'perpendicular')\n        rotate = getAngle([1, 0], labelVector);\n    else\n        rotate = getAngle([tangentVector[0] < 0 ? -1 : 1, 0], tangentVector);\n    return correctLabelRotation(radToDeg(rotate));\n}\n/** get the label align according to its tick and label angle  */\nfunction getLabelStyle(value, rotate, attr) {\n    var type = attr.type, labelAlign = attr.labelAlign;\n    var labelVector = getLabelVector(value, attr);\n    var labelAngle = angleNormalizer(rotate);\n    var tickAngle = angleNormalizer(radToDeg(getAngle([1, 0], labelVector)));\n    var textAlign = 'center';\n    var textBaseline = 'middle';\n    if (type === 'linear') {\n        // tick  label \n        if ([90, 270].includes(tickAngle) && labelAngle === 0) {\n            textAlign = 'center';\n            textBaseline = labelVector[1] === 1 ? 'top' : 'bottom';\n        }\n        else if (!(tickAngle % 180) && [90, 270].includes(labelAngle)) {\n            textAlign = 'center';\n        }\n        //  tick  label  label \n        else if (tickAngle === 0) {\n            if (inRange(labelAngle, 0, 90, false, true)) {\n                textAlign = 'start';\n            }\n            else if (inRange(labelAngle, 0, 90) || inRange(labelAngle, 270, 360)) {\n                textAlign = 'start';\n            }\n        }\n        else if (tickAngle === 90) {\n            if (inRange(labelAngle, 0, 90, false, true)) {\n                textAlign = 'start';\n            }\n            else if (inRange(labelAngle, 90, 180) || inRange(labelAngle, 270, 360)) {\n                textAlign = 'end';\n            }\n        }\n        else if (tickAngle === 270) {\n            if (inRange(labelAngle, 0, 90, false, true)) {\n                textAlign = 'end';\n            }\n            else if (inRange(labelAngle, 90, 180) || inRange(labelAngle, 270, 360)) {\n                textAlign = 'start';\n            }\n        }\n        else if (tickAngle === 180) {\n            if (labelAngle === 90) {\n                textAlign = 'start';\n            }\n            else if (inRange(labelAngle, 0, 90) || inRange(labelAngle, 270, 360)) {\n                textAlign = 'end';\n            }\n        }\n        /**\n         * todo tick \n         */\n    }\n    else {\n        //  label \n        if (labelAlign === 'parallel') {\n            if (inRange(tickAngle, 0, 180, true)) {\n                textBaseline = 'top';\n            }\n            else {\n                textBaseline = 'bottom';\n            }\n        }\n        else if (labelAlign === 'horizontal') {\n            if (inRange(tickAngle, 90, 270, false)) {\n                textAlign = 'end';\n            }\n            else if (inRange(tickAngle, 270, 360, false) || inRange(tickAngle, 0, 90)) {\n                textAlign = 'start';\n            }\n        }\n        else if (labelAlign === 'perpendicular') {\n            if (inRange(tickAngle, 90, 270)) {\n                textAlign = 'end';\n            }\n            else {\n                textAlign = 'start';\n            }\n        }\n    }\n    return { textAlign: textAlign, textBaseline: textBaseline };\n}\nfunction setRotateAndAdjustLabelAlign(rotate, group, attr) {\n    group.setLocalEulerAngles(rotate);\n    var value = group.__data__.value;\n    var textStyle = getLabelStyle(value, rotate, attr);\n    var label = group.querySelector(CLASS_NAMES.labelItem.class);\n    if (label)\n        applyTextStyle(label, textStyle);\n}\nfunction getLabelPos(datum, data, attr) {\n    var showTick = attr.showTick, tickLength = attr.tickLength, tickDirection = attr.tickDirection, labelDirection = attr.labelDirection, labelSpacing = attr.labelSpacing;\n    var index = data.indexOf(datum);\n    var finalLabelSpacing = getCallbackValue(labelSpacing, [datum, index, data]);\n    var _a = __read([getLabelVector(datum.value, attr), getFactor(labelDirection, tickDirection)], 2), labelVector = _a[0], unionFactor = _a[1];\n    var extraLength = unionFactor === 1 ? getCallbackValue(showTick ? tickLength : 0, [datum, index, data]) : 0;\n    var _b = __read(add(scale(labelVector, finalLabelSpacing + extraLength), getValuePos(datum.value, attr)), 2), x = _b[0], y = _b[1];\n    return { x: x, y: y };\n}\nfunction formatter(datum, index, data, attr) {\n    var labelFormatter = attr.labelFormatter;\n    var element = isFunction(labelFormatter)\n        ? function () { return renderExtDo(getCallbackValue(labelFormatter, [datum, index, data, getLabelVector(datum.value, attr)])); }\n        : function () { return renderExtDo(datum.label || ''); };\n    return element;\n}\nfunction applyTextStyle(node, style) {\n    if (node.nodeName === 'text')\n        node.attr(style);\n}\nfunction overlapHandler(attr) {\n    processOverlap(this.node().childNodes, attr, {\n        hide: hide,\n        show: show,\n        rotate: function (label, angle) {\n            setRotateAndAdjustLabelAlign(+angle, label, attr);\n        },\n        ellipsis: function (label, len, suffix) {\n            label && ellipsisIt(label, len || Infinity, suffix);\n        },\n        wrap: function (label, width, lines) {\n            label && wrapIt(label, width, lines);\n        },\n        getTextShape: function (label) { return label.querySelector('text'); },\n    });\n}\nfunction renderLabel(container, datum, data, style, attr) {\n    var index = data.indexOf(datum);\n    var label = select(container)\n        .append(formatter(datum, index, data, attr))\n        .attr('className', CLASS_NAMES.labelItem.name)\n        .node();\n    var _a = __read(splitStyle(getCallbackStyle(style, [datum, index, data])), 2), labelStyle = _a[0], _b = _a[1], transform = _b.transform, groupStyle = __rest(_b, [\"transform\"]);\n    percentTransform(label, transform);\n    var rotate = getLabelRotation(datum, label, attr);\n    if (!label.getLocalEulerAngles()) {\n        label.setLocalEulerAngles(rotate);\n    }\n    applyTextStyle(label, __assign(__assign({}, getLabelStyle(datum.value, rotate, attr)), labelStyle));\n    container.attr(groupStyle);\n    return label;\n}\nexport function renderLabels(container, data, attr, animate) {\n    var finalData = filterExec(data, attr.labelFilter);\n    var style = subStyleProps(attr, 'label');\n    return container\n        .selectAll(CLASS_NAMES.label.class)\n        .data(finalData, function (d, i) { return i; })\n        .join(function (enter) {\n        return enter\n            .append('g')\n            .attr('className', CLASS_NAMES.label.name)\n            .transition(function (datum) {\n            renderLabel(this, datum, data, style, attr);\n            var _a = getLabelPos(datum, data, attr), x = _a.x, y = _a.y;\n            // .axis-label\n            this.style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n            return null;\n        })\n            .call(function () {\n            overlapHandler.call(container, attr);\n        });\n    }, function (update) {\n        return update\n            .transition(function (datum) {\n            var prevLabel = this.querySelector(CLASS_NAMES.labelItem.class);\n            var label = renderLabel(this, datum, data, style, attr);\n            var shapeAnimation = transitionShape(prevLabel, label, animate.update);\n            var _a = getLabelPos(datum, data, attr), x = _a.x, y = _a.y;\n            var animation = transition(this, { transform: \"translate(\".concat(x, \", \").concat(y, \")\") }, animate.update);\n            return __spreadArray(__spreadArray([], __read(shapeAnimation), false), [animation], false);\n            // return [animation];\n        })\n            .call(function (selection) {\n            var transitions = get(selection, '_transitions').flat().filter(defined);\n            onAnimatesFinished(transitions, function () {\n                overlapHandler.call(container, attr);\n            });\n        });\n    }, function (exit) {\n        return exit.transition(function () {\n            var _this = this;\n            var animation = fadeOut(this.childNodes[0], animate.exit);\n            onAnimateFinished(animation, function () { return select(_this).remove(); });\n            return animation;\n        });\n    })\n        .transitions();\n}\n//# sourceMappingURL=labels.js.map","import { applyToText } from './text';\nexport function wrapIt(node, wordWrapWidth, maxLines, textBaseline) {\n    if (maxLines === void 0) { maxLines = 2; }\n    if (textBaseline === void 0) { textBaseline = 'top'; }\n    applyToText(node, { wordWrap: true, wordWrapWidth: wordWrapWidth, maxLines: maxLines, textBaseline: textBaseline });\n}\n//# sourceMappingURL=wrap.js.map","import { __assign, __read } from \"tslib\";\nimport { isFunction } from '@antv/util';\nimport { fadeOut, onAnimateFinished, transition } from '../../../animation';\nimport { getCallbackValue, select, splitStyle, subStyleProps } from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport { getValuePos } from './line';\nimport { filterExec, getCallbackStyle, getDirectionVector } from './utils';\nexport function getTickVector(value, attr) {\n    return getDirectionVector(value, attr.tickDirection, attr);\n}\nexport function getTickPoints(unitVector, tickLength) {\n    var _a = __read(unitVector, 2), dx = _a[0], dy = _a[1];\n    return [\n        [0, 0],\n        [dx * tickLength, dy * tickLength],\n    ];\n}\nfunction getTickLineLayout(datum, index, data, tickVector, attr) {\n    var tickLength = attr.tickLength;\n    var _a = __read(getTickPoints(tickVector, getCallbackValue(tickLength, [datum, index, data])), 2), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1];\n    return { x1: x1, x2: x2, y1: y1, y2: y2 };\n}\nfunction createTickEl(container, datum, index, data, attr) {\n    var formatter = attr.tickFormatter;\n    var tickVector = getTickVector(datum.value, attr);\n    var el = 'line';\n    if (isFunction(formatter))\n        el = function () { return getCallbackValue(formatter, [datum, index, data, tickVector]); };\n    return container.append(el).attr('className', CLASS_NAMES.tickItem.name);\n}\nfunction applyTickStyle(datum, index, data, tick, group, attr, style) {\n    var tickVector = getTickVector(datum.value, attr);\n    var _a = getTickLineLayout(datum, index, data, tickVector, attr), x1 = _a.x1, x2 = _a.x2, y1 = _a.y1, y2 = _a.y2;\n    var _b = __read(splitStyle(getCallbackStyle(style, [datum, index, data, tickVector])), 2), tickStyle = _b[0], groupStyle = _b[1];\n    tick.node().nodeName === 'line' && tick.styles(__assign({ x1: x1, x2: x2, y1: y1, y2: y2 }, tickStyle));\n    group.attr(groupStyle);\n    tick.styles(tickStyle);\n}\nfunction createTick(datum, index, data, attr, tickAttr, animate) {\n    var tick = createTickEl(select(this), datum, index, data, attr);\n    applyTickStyle(datum, index, data, tick, this, attr, tickAttr);\n    var _a = __read(getValuePos(datum.value, attr), 2), x = _a[0], y = _a[1];\n    return transition(this, { transform: \"translate(\".concat(x, \", \").concat(y, \")\") }, animate);\n}\nexport function renderTicks(container, axisData, attr, animate) {\n    var finalData = filterExec(axisData, attr.tickFilter);\n    var tickAttr = subStyleProps(attr, 'tick');\n    return container\n        .selectAll(CLASS_NAMES.tick.class)\n        .data(finalData, function (d) { return d.id || d.label; })\n        .join(function (enter) {\n        return enter\n            .append('g')\n            .attr('className', CLASS_NAMES.tick.name)\n            .transition(function (datum, index) {\n            return createTick.call(this, datum, index, finalData, attr, tickAttr, false);\n        });\n    }, function (update) {\n        return update.transition(function (datum, index) {\n            this.removeChildren();\n            return createTick.call(this, datum, index, finalData, attr, tickAttr, animate.update);\n        });\n    }, function (exit) {\n        return exit.transition(function () {\n            var _this = this;\n            var animation = fadeOut(this.childNodes[0], animate.exit);\n            onAnimateFinished(animation, function () { return _this.remove(); });\n            return animation;\n        });\n    })\n        .transitions();\n}\n//# sourceMappingURL=ticks.js.map","import { __assign, __read, __rest } from \"tslib\";\nimport { transition } from '../../../animation';\nimport { normalize, parseSeriesAttr, percentTransform, renderExtDo, scale, select, splitStyle, subStyleProps, } from '../../../util';\nimport { parsePosition } from '../../title';\nimport { CLASS_NAMES } from '../constant';\nfunction getTitlePosition(mainGroup, titleGroup, attr) {\n    var _a = attr.titlePosition, position = _a === void 0 ? 'lb' : _a, spacing = attr.titleSpacing;\n    var pos = parsePosition(position);\n    var _b = mainGroup.node().getLocalBounds(), _c = __read(_b.min, 2), mainX = _c[0], mainY = _c[1], _d = __read(_b.halfExtents, 2), mainHalfWidth = _d[0], mainHalfHeight = _d[1];\n    var _e = __read(titleGroup.node().getLocalBounds().halfExtents, 2), titleHalfWidth = _e[0], titleHalfHeight = _e[1];\n    var _f = __read([mainX + mainHalfWidth, mainY + mainHalfHeight], 2), x = _f[0], y = _f[1];\n    var _g = __read(parseSeriesAttr(spacing), 4), spacingTop = _g[0], spacingRight = _g[1], spacingBottom = _g[2], spacingLeft = _g[3];\n    if (['start', 'end'].includes(position) && attr.type === 'linear') {\n        var startPos = attr.startPos, endPos = attr.endPos;\n        // todo did not consider the truncate case\n        var _h = __read(position === 'start' ? [startPos, endPos] : [endPos, startPos], 2), from = _h[0], to = _h[1];\n        var direction = normalize([-to[0] + from[0], -to[1] + from[1]]);\n        var _j = __read(scale(direction, spacingTop), 2), dx = _j[0], dy = _j[1];\n        return { x: from[0] + dx, y: from[1] + dy };\n    }\n    if (pos.includes('t'))\n        y -= mainHalfHeight + titleHalfHeight + spacingTop;\n    if (pos.includes('r'))\n        x += mainHalfWidth + titleHalfWidth + spacingRight;\n    if (pos.includes('l'))\n        x -= mainHalfWidth + titleHalfWidth + spacingLeft;\n    if (pos.includes('b'))\n        y += mainHalfHeight + titleHalfHeight + spacingBottom;\n    return { x: x, y: y };\n}\nfunction inferTransform(n, direction, position) {\n    var halfExtents = n.getGeometryBounds().halfExtents;\n    var height = halfExtents[1] * 2;\n    if (direction === 'vertical') {\n        if (position === 'left')\n            return \"rotate(-90) translate(0, \".concat(height / 2, \")\");\n        if (position === 'right')\n            return \"rotate(-90) translate(0, -\".concat(height / 2, \")\");\n    }\n    return '';\n}\nfunction applyTitleStyle(title, group, axis, attr, animate) {\n    var style = subStyleProps(attr, 'title');\n    var _a = __read(splitStyle(style), 2), titleStyle = _a[0], _b = _a[1], specified = _b.transform, transformOrigin = _b.transformOrigin, groupStyle = __rest(_b, [\"transform\", \"transformOrigin\"]);\n    group.styles(groupStyle);\n    var transform = specified || inferTransform(title.node(), titleStyle.direction, titleStyle.position);\n    title.styles(__assign(__assign({}, titleStyle), { transformOrigin: transformOrigin }));\n    percentTransform(title.node(), transform);\n    var _c = getTitlePosition(\n    // @ts-ignore\n    select(axis._offscreen || axis.querySelector(CLASS_NAMES.mainGroup.class)), group, attr), x = _c.x, y = _c.y;\n    var animation = transition(group.node(), { transform: \"translate(\".concat(x, \", \").concat(y, \")\") }, animate);\n    return animation;\n}\nexport function renderTitle(container, axis, attr, animate) {\n    var titleText = attr.titleText;\n    return container\n        .selectAll(CLASS_NAMES.title.class)\n        .data([{ title: titleText }].filter(function (d) { return !!d.title; }), function (d, i) { return d.title; })\n        .join(function (enter) {\n        return enter\n            .append(function () { return renderExtDo(titleText); })\n            .attr('className', CLASS_NAMES.title.name)\n            .transition(function () {\n            return applyTitleStyle(select(this), container, axis, attr, animate.enter);\n        });\n    }, function (update) {\n        return update.transition(function () {\n            return applyTitleStyle(select(this), container, axis, attr, animate.update);\n        });\n    }, function (exit) { return exit.remove(); })\n        .transitions();\n}\n//# sourceMappingURL=title.js.map","import { __extends, __read, __spreadArray } from \"tslib\";\nimport { parseAnimationOption } from '../../animation';\nimport { Component } from '../../core';\nimport { ifShow, sampling, select } from '../../util';\nimport { AXIS_BASE_DEFAULT_ATTR, CLASS_NAMES } from './constant';\nimport { renderGrid } from './guides/grid';\nimport { renderLabels } from './guides/labels';\nimport { renderAxisLine } from './guides/line';\nimport { renderTicks } from './guides/ticks';\nimport { renderTitle } from './guides/title';\nfunction renderAxisMain(attributes, container, data, animation) {\n    var showLine = attributes.showLine, showTick = attributes.showTick, showLabel = attributes.showLabel;\n    /** line */\n    var lineGroup = container.maybeAppendByClassName(CLASS_NAMES.lineGroup, 'g');\n    var lineTransitions = ifShow(showLine, lineGroup, function (group) {\n        return renderAxisLine(group, attributes, animation);\n    }) || [];\n    /** tick */\n    var tickGroup = container.maybeAppendByClassName(CLASS_NAMES.tickGroup, 'g');\n    var tickTransitions = ifShow(showTick, tickGroup, function (group) {\n        return renderTicks(group, data, attributes, animation);\n    }) || [];\n    /** label */\n    var labelGroup = container.maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g');\n    var labelTransitions = ifShow(showLabel, labelGroup, function (group) {\n        return renderLabels(group, data, attributes, animation);\n    }) || [];\n    return __spreadArray(__spreadArray(__spreadArray([], __read(lineTransitions), false), __read(tickTransitions), false), __read(labelTransitions), false).filter(function (t) { return !!t; });\n}\nvar Axis = /** @class */ (function (_super) {\n    __extends(Axis, _super);\n    function Axis(options) {\n        return _super.call(this, options, AXIS_BASE_DEFAULT_ATTR) || this;\n    }\n    Axis.prototype.render = function (attributes, container, specificAnimation) {\n        var _this = this;\n        var titleText = attributes.titleText, data = attributes.data, animate = attributes.animate, showTitle = attributes.showTitle, showGrid = attributes.showGrid, dataThreshold = attributes.dataThreshold, truncRange = attributes.truncRange;\n        var sampledData = sampling(data, dataThreshold).filter(function (_a) {\n            var value = _a.value;\n            if (truncRange && value > truncRange[0] && value < truncRange[1])\n                return false;\n            return true;\n        });\n        var finalAnimation = parseAnimationOption(specificAnimation === undefined ? animate : specificAnimation);\n        /** grid */\n        var gridGroup = select(container).maybeAppendByClassName(CLASS_NAMES.gridGroup, 'g');\n        var gridTransitions = ifShow(showGrid, gridGroup, function (group) { return renderGrid(group, sampledData, attributes, finalAnimation); }) || [];\n        /** main group */\n        var mainGroup = select(container).maybeAppendByClassName(CLASS_NAMES.mainGroup, 'g');\n        if (titleText && ((!this.initialized && finalAnimation.enter) || (this.initialized && finalAnimation.update))) {\n            renderAxisMain(attributes, select(this.offscreenGroup), sampledData, parseAnimationOption(false));\n        }\n        // render\n        var mainTransitions = renderAxisMain(attributes, select(mainGroup.node()), sampledData, finalAnimation);\n        /** title */\n        var titleGroup = select(container).maybeAppendByClassName(CLASS_NAMES.titleGroup, 'g');\n        var titleTransitions = ifShow(showTitle, titleGroup, function (group) {\n            return renderTitle(group, _this, attributes, finalAnimation);\n        }) || [];\n        return __spreadArray(__spreadArray(__spreadArray([], __read(gridTransitions), false), __read(mainTransitions), false), __read(titleTransitions), false).flat().filter(function (t) { return !!t; });\n    };\n    return Axis;\n}(Component));\nexport { Axis };\n//# sourceMappingURL=axis.js.map","export function sampling(data, size) {\n    if (data.length <= size)\n        return data;\n    var step = Math.floor(data.length / size);\n    var result = [];\n    for (var i = 0; i < data.length; i += step) {\n        result.push(data[i]);\n    }\n    return result;\n}\n//# sourceMappingURL=sampling.js.map","import { deepMix } from '@antv/util';\nimport { Path } from '../../shapes';\nimport { classNames } from '../../util';\nexport var AXIS_BASE_DEFAULT_ATTR = {\n    data: [],\n    animate: {\n        enter: false,\n        update: {\n            duration: 100,\n            easing: 'ease-in-out-sine',\n            fill: 'both',\n        },\n        exit: {\n            duration: 100,\n            fill: 'both',\n        },\n    },\n    showArrow: true,\n    showGrid: true,\n    showLabel: true,\n    showLine: true,\n    showTick: true,\n    showTitle: true,\n    showTrunc: false,\n    dataThreshold: 100,\n    lineLineWidth: 1,\n    lineStroke: 'black',\n    crossPadding: 10,\n    titleFill: 'black',\n    titleFontSize: 12,\n    titlePosition: 'lb',\n    titleSpacing: 0,\n    titleTextAlign: 'center',\n    titleTextBaseline: 'middle',\n    lineArrow: function () {\n        return new Path({\n            style: {\n                d: [['M', 10, 10], ['L', -10, 0], ['L', 10, -10], ['L', 0, 0], ['L', 10, 10], ['Z']],\n                fill: 'black',\n                transformOrigin: 'center',\n            },\n        });\n    },\n    labelAlign: 'parallel',\n    labelDirection: 'positive',\n    labelFontSize: 12,\n    labelSpacing: 0,\n    gridConnect: 'line',\n    gridControlAngles: [],\n    gridDirection: 'positive',\n    gridLength: 0,\n    gridType: 'segment',\n    lineArrowOffset: 15,\n    lineArrowSize: 10,\n    tickDirection: 'positive',\n    tickLength: 5,\n    tickLineWidth: 1,\n    tickStroke: 'black',\n    labelOverlap: [\n    // { type: 'rotate', optionalAngles: [0, 45, 90] },\n    // { type: 'ellipsis', suffix: '...', minLength: 14, maxLength: 160 },\n    // { type: 'hide' },\n    ],\n};\nexport var ARC_DEFAULT_OPTIONS = deepMix({}, AXIS_BASE_DEFAULT_ATTR, {\n    style: {\n        type: 'arc',\n    },\n});\nexport var HELIX_DEFAULT_OPTIONS = deepMix({}, AXIS_BASE_DEFAULT_ATTR, {\n    style: {},\n});\nexport var CLASS_NAMES = classNames({\n    mainGroup: 'main-group',\n    gridGroup: 'grid-group',\n    grid: 'grid',\n    lineGroup: 'line-group',\n    line: 'line',\n    tickGroup: 'tick-group',\n    tick: 'tick',\n    tickItem: 'tick-item',\n    labelGroup: 'label-group',\n    label: 'label',\n    labelItem: 'label-item',\n    titleGroup: 'title-group',\n    title: 'title',\n    lineFirst: 'line-first',\n    lineSecond: 'line-second',\n}, 'axis');\n//# sourceMappingURL=constant.js.map","export var DEFAULT_INDICATOR_STYLE_PROPS = {\n    backgroundFill: '#262626',\n    backgroundLineCap: 'round',\n    backgroundLineWidth: 1,\n    backgroundStroke: '#333',\n    backgroundZIndex: -1,\n    formatter: function (val) { return val.toString(); },\n    labelFill: '#fff',\n    labelFontSize: 12,\n    labelTextBaseline: 'middle',\n    padding: [2, 4],\n    position: 'right',\n    radius: 0,\n    zIndex: 999,\n};\n//# sourceMappingURL=constant.js.map","import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { ElementEvent } from '@antv/g';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport { BBox, classNames, hide, isHorizontal, parseSeriesAttr, renderExtDo, select, show, splitStyle, subStyleProps, } from '../../util';\nimport { DEFAULT_INDICATOR_STYLE_PROPS } from './constant';\nvar CLASS_NAMES = classNames({\n    background: 'background',\n    labelGroup: 'label-group',\n    label: 'label',\n}, 'indicator');\nvar Indicator = /** @class */ (function (_super) {\n    __extends(Indicator, _super);\n    function Indicator(options) {\n        var _this = _super.call(this, options, DEFAULT_INDICATOR_STYLE_PROPS) || this;\n        _this.point = [0, 0];\n        _this.group = _this.appendChild(new Group({}));\n        _this.isMutationObserved = true;\n        return _this;\n    }\n    Indicator.prototype.renderBackground = function () {\n        if (!this.label)\n            return;\n        var _a = this.attributes, position = _a.position, padding = _a.padding;\n        var _b = __read(parseSeriesAttr(padding), 4), t = _b[0], r = _b[1], b = _b[2], l = _b[3];\n        var _c = this.label.node().getLocalBounds(), min = _c.min, max = _c.max;\n        var bbox = new BBox(min[0] - l, min[1] - t, max[0] + r - min[0] + l, max[1] + b - min[1] + t);\n        var path = this.getPath(position, bbox);\n        var style = subStyleProps(this.attributes, 'background');\n        this.background = select(this.group)\n            .maybeAppendByClassName(CLASS_NAMES.background, 'path')\n            .styles(__assign(__assign({}, style), { d: path }));\n        this.group.appendChild(this.label.node());\n    };\n    Indicator.prototype.renderLabel = function () {\n        var _a = this.attributes, formatter = _a.formatter, labelText = _a.labelText;\n        var style = subStyleProps(this.attributes, 'label');\n        var _b = __read(splitStyle(style), 2), _c = _b[0], groupStyle = _b[1], rawText = _c.text, textStyle = __rest(_c, [\"text\"]);\n        this.label = select(this.group).maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').styles(groupStyle);\n        if (!labelText)\n            return;\n        var text = this.label\n            .maybeAppendByClassName(CLASS_NAMES.label, function () { return renderExtDo(formatter(labelText)); })\n            .style('text', formatter(labelText).toString());\n        text.selectAll('text').styles(textStyle);\n    };\n    Indicator.prototype.adjustLayout = function () {\n        var _a = __read(this.point, 2), dx = _a[0], dy = _a[1];\n        var _b = this.attributes, x = _b.x, y = _b.y;\n        this.group.attr('transform', \"translate(\".concat(x - dx, \", \").concat(y - dy, \")\"));\n    };\n    Indicator.prototype.getPath = function (position, bbox) {\n        var r = this.attributes.radius;\n        var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n        var pathArray = [\n            // 0 \n            ['M', x + r, y],\n            // 1 \n            ['L', x + width - r, y],\n            // 2 \n            ['A', r, r, 0, 0, 1, x + width, y + r],\n            // 3 \n            ['L', x + width, y + height - r],\n            // 4 \n            ['A', r, r, 0, 0, 1, x + width - r, y + height],\n            // 5 \n            ['L', x + r, y + height],\n            // 6 \n            ['A', r, r, 0, 0, 1, x, y + height - r],\n            // 7 \n            ['L', x, y + r],\n            // 8 \n            ['A', r, r, 0, 0, 1, x + r, y],\n            // 9 \n            ['Z'],\n        ];\n        //  position \n        var revertPositionMap = { top: 4, right: 6, bottom: 0, left: 2 };\n        var index = revertPositionMap[position];\n        var newPath = this.createCorner([pathArray[index].slice(-2), pathArray[index + 1].slice(-2)]);\n        // \n        pathArray.splice.apply(pathArray, __spreadArray([index + 1, 1], __read(newPath), false));\n        pathArray[0][0] = 'M';\n        return pathArray;\n    };\n    Indicator.prototype.createCorner = function (edge, size) {\n        if (size === void 0) { size = 10; }\n        // intrinsic parameter\n        var cornerScale = 0.8;\n        var isH = isHorizontal.apply(void 0, __spreadArray([], __read(edge), false));\n        var _a = __read(edge, 2), _b = __read(_a[0], 2), x0 = _b[0], y0 = _b[1], _c = __read(_a[1], 2), x1 = _c[0], y1 = _c[1];\n        var _d = __read(isH ? [x1 - x0, [x0, x1]] : [y1 - y0, [y0, y1]], 2), len = _d[0], _e = __read(_d[1], 2), b0 = _e[0], b1 = _e[1];\n        var hL = len / 2;\n        var sign = len / Math.abs(len);\n        var cL = size * sign;\n        var hCL = cL / 2;\n        var cS = ((cL * Math.sqrt(3)) / 2) * cornerScale;\n        var _f = __read([b0, b0 + hL - hCL, b0 + hL, b0 + hL + hCL, b1], 5), a0 = _f[0], a1 = _f[1], a2 = _f[2], a3 = _f[3], a4 = _f[4];\n        if (isH) {\n            this.point = [a2, y0 - cS];\n            return [\n                ['L', a0, y0],\n                ['L', a1, y0],\n                ['L', a2, y0 - cS],\n                ['L', a3, y0],\n                ['L', a4, y0],\n            ];\n        }\n        this.point = [x0 + cS, a2];\n        return [\n            ['L', x0, a0],\n            ['L', x0, a1],\n            ['L', x0 + cS, a2],\n            ['L', x0, a3],\n            ['L', x0, a4],\n        ];\n    };\n    Indicator.prototype.applyVisibility = function () {\n        var visibility = this.attributes.visibility;\n        if (visibility === 'hidden')\n            hide(this);\n        else\n            show(this);\n    };\n    Indicator.prototype.bindEvents = function () {\n        this.label.on(ElementEvent.BOUNDS_CHANGED, this.renderBackground);\n    };\n    Indicator.prototype.render = function () {\n        this.renderLabel();\n        this.renderBackground();\n        this.adjustLayout();\n        this.applyVisibility();\n    };\n    return Indicator;\n}(Component));\nexport { Indicator };\n//# sourceMappingURL=indicator.js.map","export default (function () { });\n//# sourceMappingURL=noop.js.map","import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { ElementEvent } from '@antv/g';\nimport { clamp, debounce } from '@antv/util';\nimport { animate, onAnimateFinished } from '../../animation';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport { BBox, classNames, hide, scaleToPixel, select, show, splitStyle, subStyleProps, transpose, visibility, } from '../../util';\nimport { button } from '../marker/symbol';\nvar CLASS_NAMES = classNames({\n    prevBtnGroup: 'prev-btn-group',\n    prevBtn: 'prev-btn',\n    nextBtnGroup: 'next-btn-group',\n    nextBtn: 'next-btn',\n    pageInfoGroup: 'page-info-group',\n    pageInfo: 'page-info',\n    playWindow: 'play-window',\n    contentGroup: 'content-group',\n    controller: 'controller',\n    clipPath: 'clip-path',\n}, 'navigator');\nvar Navigator = /** @class */ (function (_super) {\n    __extends(Navigator, _super);\n    function Navigator(options) {\n        var _this = _super.call(this, options, {\n            x: 0,\n            y: 0,\n            animate: {\n                easing: 'linear',\n                duration: 200,\n                fill: 'both',\n            },\n            buttonCursor: 'pointer',\n            buttonFill: 'black',\n            buttonD: button(0, 0, 6),\n            buttonSize: 12,\n            controllerPadding: 5,\n            controllerSpacing: 5,\n            formatter: function (curr, total) { return \"\".concat(curr, \"/\").concat(total); },\n            defaultPage: 0,\n            loop: false,\n            orientation: 'horizontal',\n            pageNumFill: 'black',\n            pageNumFontSize: 12,\n            pageNumTextAlign: 'start',\n            pageNumTextBaseline: 'middle',\n        }) || this;\n        _this.playState = 'idle';\n        _this.contentGroup = _this.appendChild(new Group({ class: CLASS_NAMES.contentGroup.name }));\n        _this.playWindow = _this.contentGroup.appendChild(new Group({ class: CLASS_NAMES.playWindow.name }));\n        _this.innerCurrPage = _this.defaultPage;\n        return _this;\n    }\n    Object.defineProperty(Navigator.prototype, \"defaultPage\", {\n        get: function () {\n            var defaultPage = this.attributes.defaultPage;\n            return clamp(defaultPage, 0, Math.max(this.pageViews.length - 1, 0));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"pageViews\", {\n        get: function () {\n            return this.playWindow.children;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"controllerShape\", {\n        // todo fixme\n        get: function () {\n            return this.totalPages > 1 ? { width: 55, height: 0 } : { width: 0, height: 0 };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"pageShape\", {\n        get: function () {\n            var pageViews = this.pageViews;\n            var _a = __read(transpose(pageViews.map(function (pageView) {\n                var _a = pageView.getBBox(), width = _a.width, height = _a.height;\n                return [width, height];\n            })).map(function (arr) { return Math.max.apply(Math, __spreadArray([], __read(arr), false)); }), 2), maxWidth = _a[0], maxHeight = _a[1];\n            var _b = this.attributes, _c = _b.pageWidth, pageWidth = _c === void 0 ? maxWidth : _c, _d = _b.pageHeight, pageHeight = _d === void 0 ? maxHeight : _d;\n            return { pageWidth: pageWidth, pageHeight: pageHeight };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Navigator.prototype.getContainer = function () {\n        return this.playWindow;\n    };\n    Object.defineProperty(Navigator.prototype, \"totalPages\", {\n        get: function () {\n            return this.pageViews.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"currPage\", {\n        get: function () {\n            return this.innerCurrPage;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Navigator.prototype.getBBox = function () {\n        var _a = _super.prototype.getBBox.call(this), x = _a.x, y = _a.y;\n        var controllerShape = this.controllerShape;\n        var _b = this.pageShape, pageWidth = _b.pageWidth, pageHeight = _b.pageHeight;\n        return new BBox(x, y, pageWidth + controllerShape.width, pageHeight);\n    };\n    Navigator.prototype.goTo = function (pageNum) {\n        var _this = this;\n        var animateOptions = this.attributes.animate;\n        var _a = this, currPage = _a.currPage, playState = _a.playState, playWindow = _a.playWindow, pageViews = _a.pageViews;\n        if (playState !== 'idle' || pageNum < 0 || pageViews.length <= 0 || pageNum >= pageViews.length)\n            return null;\n        pageViews[currPage].setLocalPosition(0, 0);\n        this.prepareFollowingPage(pageNum);\n        var _b = __read(this.getFollowingPageDiff(pageNum), 2), dx = _b[0], dy = _b[1];\n        this.playState = 'running';\n        var animation = animate(playWindow, [{ transform: \"translate(0, 0)\" }, { transform: \"translate(\".concat(-dx, \", \").concat(-dy, \")\") }], animateOptions);\n        onAnimateFinished(animation, function () {\n            _this.innerCurrPage = pageNum;\n            _this.playState = 'idle';\n            _this.setVisiblePages([pageNum]);\n            _this.updatePageInfo();\n        });\n        return animation;\n    };\n    Navigator.prototype.prev = function () {\n        var loop = this.attributes.loop;\n        var pages = this.pageViews.length;\n        var page = this.currPage;\n        if (!loop && page <= 0)\n            return null;\n        var following = loop ? (page - 1 + pages) % pages : clamp(page - 1, 0, pages);\n        return this.goTo(following);\n    };\n    Navigator.prototype.next = function () {\n        var loop = this.attributes.loop;\n        var pages = this.pageViews.length;\n        var page = this.currPage;\n        if (!loop && page >= pages - 1)\n            return null;\n        var following = loop ? (page + 1) % pages : clamp(page + 1, 0, pages);\n        return this.goTo(following);\n    };\n    Navigator.prototype.renderClipPath = function (container) {\n        var _a = this.pageShape, pageWidth = _a.pageWidth, pageHeight = _a.pageHeight;\n        if (!pageWidth || !pageHeight) {\n            this.contentGroup.style.clipPath = undefined;\n            return;\n        }\n        this.clipPath = container.maybeAppendByClassName(CLASS_NAMES.clipPath, 'rect').styles({\n            width: pageWidth,\n            height: pageHeight,\n        });\n        this.contentGroup.attr('clipPath', this.clipPath.node());\n    };\n    Navigator.prototype.setVisiblePages = function (pages) {\n        this.playWindow.children.forEach(function (page, index) {\n            if (pages.includes(index))\n                show(page);\n            else\n                hide(page);\n        });\n    };\n    Navigator.prototype.adjustControllerLayout = function () {\n        var _a = this, prevBtn = _a.prevBtnGroup, nextBtn = _a.nextBtnGroup, pageNum = _a.pageInfoGroup;\n        var _b = this.attributes, orientation = _b.orientation, padding = _b.controllerPadding;\n        var _c = pageNum.getBBox(), pW = _c.width, pH = _c.height;\n        var _d = __read(orientation === 'horizontal' ? [-180, 0] : [-90, 90], 2), r1 = _d[0], r2 = _d[1];\n        prevBtn.setLocalEulerAngles(r1);\n        nextBtn.setLocalEulerAngles(r2);\n        var _e = prevBtn.getBBox(), bpW = _e.width, bpH = _e.height;\n        var _f = nextBtn.getBBox(), bnW = _f.width, bnH = _f.height;\n        var maxWidth = Math.max(bpW, pW, bnW);\n        var _g = orientation === 'horizontal'\n            ? {\n                offset: [\n                    [0, 0],\n                    [bpW / 2 + padding, 0],\n                    [bpW + pW + padding * 2, 0],\n                ],\n                textAlign: 'start',\n            }\n            : {\n                offset: [\n                    [maxWidth / 2, -bpH - padding],\n                    [maxWidth / 2, 0],\n                    [maxWidth / 2, bnH + padding],\n                ],\n                textAlign: 'center',\n            }, _h = __read(_g.offset, 3), _j = __read(_h[0], 2), o1x = _j[0], o1y = _j[1], _k = __read(_h[1], 2), o2x = _k[0], o2y = _k[1], _l = __read(_h[2], 2), o3x = _l[0], o3y = _l[1], textAlign = _g.textAlign;\n        var pageNumText = pageNum.querySelector('text');\n        pageNumText && (pageNumText.style.textAlign = textAlign);\n        prevBtn.setLocalPosition(o1x, o1y);\n        pageNum.setLocalPosition(o2x, o2y);\n        nextBtn.setLocalPosition(o3x, o3y);\n    };\n    Navigator.prototype.updatePageInfo = function () {\n        var _a;\n        var _b = this, currPage = _b.currPage, pageViews = _b.pageViews, formatter = _b.attributes.formatter;\n        if (pageViews.length < 2)\n            return;\n        (_a = this.pageInfoGroup.querySelector(CLASS_NAMES.pageInfo.class)) === null || _a === void 0 ? void 0 : _a.attr('text', formatter(currPage + 1, pageViews.length));\n        this.adjustControllerLayout();\n    };\n    Navigator.prototype.getFollowingPageDiff = function (pageNum) {\n        var currPage = this.currPage;\n        if (currPage === pageNum)\n            return [0, 0];\n        var orientation = this.attributes.orientation;\n        var _a = this.pageShape, pageWidth = _a.pageWidth, pageHeight = _a.pageHeight;\n        var sign = pageNum < currPage ? -1 : 1;\n        return orientation === 'horizontal' ? [sign * pageWidth, 0] : [0, sign * pageHeight];\n    };\n    Navigator.prototype.prepareFollowingPage = function (pageNum) {\n        var _a = this, currPage = _a.currPage, pageViews = _a.pageViews;\n        this.setVisiblePages([pageNum, currPage]);\n        if (pageNum !== currPage) {\n            var _b = __read(this.getFollowingPageDiff(pageNum), 2), dx = _b[0], dy = _b[1];\n            pageViews[pageNum].setLocalPosition(dx, dy);\n        }\n    };\n    Navigator.prototype.renderController = function (container) {\n        var _this = this;\n        var spacing = this.attributes.controllerSpacing;\n        var _a = this.pageShape, pageWidth = _a.pageWidth, pageHeight = _a.pageHeight;\n        var visible = this.pageViews.length >= 2;\n        var group = container.maybeAppendByClassName(CLASS_NAMES.controller, 'g');\n        visibility(group.node(), visible);\n        if (!visible)\n            return;\n        var style = subStyleProps(this.attributes, 'button');\n        var textStyle = subStyleProps(this.attributes, 'pageNum');\n        var _b = __read(splitStyle(style), 2), _c = _b[0], groupStyle = _b[1], size = _c.size, pathStyle = __rest(_c, [\"size\"]);\n        var whetherToAddEventListener = !group.select(CLASS_NAMES.prevBtnGroup.class).node();\n        var prevBtnGroup = group.maybeAppendByClassName(CLASS_NAMES.prevBtnGroup, 'g').styles(groupStyle);\n        this.prevBtnGroup = prevBtnGroup.node();\n        var prevBtn = prevBtnGroup.maybeAppendByClassName(CLASS_NAMES.prevBtn, 'path');\n        var nextBtnGroup = group.maybeAppendByClassName(CLASS_NAMES.nextBtnGroup, 'g').styles(groupStyle);\n        this.nextBtnGroup = nextBtnGroup.node();\n        var nextBtn = nextBtnGroup.maybeAppendByClassName(CLASS_NAMES.nextBtn, 'path');\n        [prevBtn, nextBtn].forEach(function (btn) {\n            btn.styles(__assign(__assign({}, pathStyle), { transformOrigin: 'center' }));\n            scaleToPixel(btn.node(), size, true);\n        });\n        var pageInfoGroup = group.maybeAppendByClassName(CLASS_NAMES.pageInfoGroup, 'g');\n        this.pageInfoGroup = pageInfoGroup.node();\n        pageInfoGroup.maybeAppendByClassName(CLASS_NAMES.pageInfo, 'text').styles(textStyle);\n        this.updatePageInfo();\n        // group.node().style.transform = `translate(${pageWidth + spacing}, ${pageHeight / 2})`;\n        // put it on the right side of the container\n        group.node().setLocalPosition(pageWidth + spacing, pageHeight / 2);\n        if (whetherToAddEventListener) {\n            this.prevBtnGroup.addEventListener('click', function () {\n                _this.prev();\n            });\n            this.nextBtnGroup.addEventListener('click', function () {\n                _this.next();\n            });\n        }\n    };\n    Navigator.prototype.render = function (attributes, container) {\n        var _a = attributes.x, x = _a === void 0 ? 0 : _a, _b = attributes.y, y = _b === void 0 ? 0 : _b;\n        this.attr('transform', \"translate(\".concat(x, \", \").concat(y, \")\"));\n        /**\n         * container\n         *  |- contentGroup (with clip path)\n         *    |- playWindow (with animation)\n         *      |- pages\n         *  |- clipPath\n         */\n        var containerSelection = select(container);\n        this.renderClipPath(containerSelection);\n        this.renderController(containerSelection);\n        this.setVisiblePages([this.defaultPage]);\n        this.goTo(this.defaultPage);\n    };\n    Navigator.prototype.bindEvents = function () {\n        var _this = this;\n        var render = debounce(function () { return _this.render(_this.attributes, _this); }, 50);\n        this.playWindow.addEventListener(ElementEvent.INSERTED, render);\n        this.playWindow.addEventListener(ElementEvent.REMOVED, render);\n    };\n    return Navigator;\n}(Component));\nexport { Navigator };\n//# sourceMappingURL=index.js.map","export function transpose(m) {\n    var _a;\n    return ((_a = m[0]) === null || _a === void 0 ? void 0 : _a.map(function (x, i) { return m.map(function (x) { return x[i]; }); })) || [];\n}\n//# sourceMappingURL=transpose.js.map","import { __assign, __extends, __read, __rest } from \"tslib\";\nimport { Circle, } from '@antv/g';\nimport { Marker } from '../../marker';\nimport { Component } from '../../../core';\nimport { classNames, copyAttributes, ellipsisIt, ifShow, parseSeriesAttr, renderExtDo, scaleToPixel, select, subStyleProps, } from '../../../util';\nvar CLASS_NAMES = classNames({\n    layout: 'flex',\n    markerGroup: 'marker-group',\n    marker: 'marker',\n    labelGroup: 'label-group',\n    label: 'label',\n    valueGroup: 'value-group',\n    value: 'value',\n    backgroundGroup: 'background-group',\n    background: 'background',\n}, 'legend-category-item');\nfunction styleOfMarker(group) {\n    var marker = group.querySelector(CLASS_NAMES.marker.class);\n    if (marker)\n        return marker.style;\n    return {};\n}\nvar CategoryItem = /** @class */ (function (_super) {\n    __extends(CategoryItem, _super);\n    function CategoryItem(options) {\n        return _super.call(this, options, {\n            span: [1, 1],\n            marker: function () { return new Circle({ style: { r: 6 } }); },\n            markerSize: 10,\n            labelFill: '#646464',\n            valueFill: '#646464',\n            labelFontSize: 12,\n            valueFontSize: 12,\n            labelTextBaseline: 'middle',\n            valueTextBaseline: 'middle',\n        }) || this;\n    }\n    Object.defineProperty(CategoryItem.prototype, \"showValue\", {\n        get: function () {\n            var valueText = this.attributes.valueText;\n            if (!valueText)\n                return false;\n            if (typeof valueText === 'string' || typeof valueText === 'number')\n                return valueText !== '';\n            if (typeof valueText === 'function')\n                return true;\n            return valueText.attr('text') !== '';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"actualSpace\", {\n        get: function () {\n            var label = this.labelGroup;\n            var value = this.valueGroup;\n            var markerSize = this.attributes.markerSize;\n            var _a = label.node().getBBox(), labelWidth = _a.width, labelHeight = _a.height;\n            var _b = value.node().getBBox(), valueWidth = _b.width, valueHeight = _b.height;\n            return {\n                markerWidth: markerSize,\n                labelWidth: labelWidth,\n                valueWidth: valueWidth,\n                height: Math.max(markerSize, labelHeight, valueHeight),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"span\", {\n        get: function () {\n            var span = this.attributes.span;\n            if (!span)\n                return [1, 1];\n            var _a = __read(parseSeriesAttr(span), 2), span1 = _a[0], innerSpan = _a[1];\n            var span2 = this.showValue ? innerSpan : 0;\n            var basis = span1 + span2;\n            return [span1 / basis, span2 / basis];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"shape\", {\n        get: function () {\n            var _a;\n            var _b = this.attributes, markerSize = _b.markerSize, fullWidth = _b.width;\n            var actualSpace = this.actualSpace;\n            var markerWidth = actualSpace.markerWidth, height = actualSpace.height;\n            var _c = this.actualSpace, labelWidth = _c.labelWidth, valueWidth = _c.valueWidth;\n            var _d = __read(this.spacing, 2), spacing1 = _d[0], spacing2 = _d[1];\n            if (fullWidth) {\n                var width_1 = fullWidth - markerSize - spacing1 - spacing2;\n                var _e = __read(this.span, 2), span1 = _e[0], span2 = _e[1];\n                _a = __read([span1 * width_1, span2 * width_1], 2), labelWidth = _a[0], valueWidth = _a[1];\n            }\n            var width = markerWidth + labelWidth + valueWidth + spacing1 + spacing2;\n            return { width: width, height: height, markerWidth: markerWidth, labelWidth: labelWidth, valueWidth: valueWidth };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"spacing\", {\n        get: function () {\n            var spacing = this.attributes.spacing;\n            if (!spacing)\n                return [0, 0];\n            var _a = __read(parseSeriesAttr(spacing), 2), spacing1 = _a[0], spacing2 = _a[1];\n            if (this.showValue)\n                return [spacing1, spacing2];\n            return [spacing1, 0];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"layout\", {\n        get: function () {\n            var _a = this.shape, markerWidth = _a.markerWidth, labelWidth = _a.labelWidth, valueWidth = _a.valueWidth, width = _a.width, height = _a.height;\n            var _b = __read(this.spacing, 2), spacing1 = _b[0], spacing2 = _b[1];\n            return {\n                height: height,\n                width: width,\n                markerWidth: markerWidth,\n                labelWidth: labelWidth,\n                valueWidth: valueWidth,\n                position: [markerWidth / 2, markerWidth + spacing1, markerWidth + labelWidth + spacing1 + spacing2],\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"scaleSize\", {\n        get: function () {\n            var markerShapeStyle = styleOfMarker(this.markerGroup.node());\n            var _a = this.attributes, markerSize = _a.markerSize, _b = _a.markerStrokeWidth, markerStrokeWidth = _b === void 0 ? markerShapeStyle.strokeWidth : _b, _c = _a.markerLineWidth, markerLineWidth = _c === void 0 ? markerShapeStyle.lineWidth : _c, _d = _a.markerStroke, markerStroke = _d === void 0 ? markerShapeStyle.stroke : _d;\n            // empirical value\n            var strokeWidth = +(markerStrokeWidth || markerLineWidth || (markerStroke ? 1 : 0)) * Math.sqrt(2);\n            var _e = this.markerGroup.node().getBBox(), width = _e.width, height = _e.height;\n            return (1 - strokeWidth / Math.max(width, height)) * markerSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CategoryItem.prototype.renderMarker = function (container) {\n        var _this = this;\n        var marker = this.attributes.marker;\n        var style = subStyleProps(this.attributes, 'marker');\n        this.markerGroup = container.maybeAppendByClassName(CLASS_NAMES.markerGroup, 'g').style('zIndex', 0);\n        ifShow(!!marker, this.markerGroup, function () {\n            var _a;\n            var parent = _this.markerGroup.node();\n            var oldMarker = (_a = parent.childNodes) === null || _a === void 0 ? void 0 : _a[0];\n            var newMarker = typeof marker === 'string'\n                ? new Marker({ style: { symbol: marker }, className: CLASS_NAMES.marker.name })\n                : marker();\n            if (!oldMarker) {\n                if (!(newMarker instanceof Marker))\n                    select(newMarker).attr('className', CLASS_NAMES.marker.name).styles(style);\n                parent.appendChild(newMarker);\n            }\n            else if (newMarker.nodeName === oldMarker.nodeName) {\n                if (oldMarker instanceof Marker)\n                    oldMarker.update(__assign(__assign({}, style), { symbol: marker }));\n                else {\n                    copyAttributes(oldMarker, newMarker);\n                    select(oldMarker).styles(style);\n                }\n            }\n            else {\n                oldMarker.remove();\n                select(newMarker).attr('className', CLASS_NAMES.marker.name).styles(style);\n                parent.appendChild(newMarker);\n            }\n            // record the scale of marker\n            _this.markerGroup.node().scale(1 / _this.markerGroup.node().getScale()[0]);\n            var scale = scaleToPixel(_this.markerGroup.node(), _this.scaleSize, true);\n            _this.markerGroup.node().style._transform = \"scale(\".concat(scale, \")\");\n        });\n    };\n    CategoryItem.prototype.renderLabel = function (container) {\n        var _a = subStyleProps(this.attributes, 'label'), label = _a.text, style = __rest(_a, [\"text\"]);\n        this.labelGroup = container.maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').style('zIndex', 0);\n        this.labelGroup.maybeAppendByClassName(CLASS_NAMES.label, function () { return renderExtDo(label); }).styles(style);\n    };\n    CategoryItem.prototype.renderValue = function (container) {\n        var _this = this;\n        var _a = subStyleProps(this.attributes, 'value'), value = _a.text, style = __rest(_a, [\"text\"]);\n        this.valueGroup = container.maybeAppendByClassName(CLASS_NAMES.valueGroup, 'g').style('zIndex', 0);\n        ifShow(this.showValue, this.valueGroup, function () {\n            _this.valueGroup.maybeAppendByClassName(CLASS_NAMES.value, function () { return renderExtDo(value); }).styles(style);\n        });\n    };\n    CategoryItem.prototype.renderBackground = function (container) {\n        var _a = this.shape, width = _a.width, height = _a.height;\n        var style = subStyleProps(this.attributes, 'background');\n        this.background = container.maybeAppendByClassName(CLASS_NAMES.backgroundGroup, 'g').style('zIndex', -1);\n        this.background.maybeAppendByClassName(CLASS_NAMES.background, 'rect').styles(__assign({ width: width, height: height }, style));\n    };\n    CategoryItem.prototype.adjustLayout = function () {\n        var _a = this.layout, labelWidth = _a.labelWidth, valueWidth = _a.valueWidth, height = _a.height, _b = __read(_a.position, 3), markerX = _b[0], labelX = _b[1], valueX = _b[2];\n        var halfHeight = height / 2;\n        // console.log(this.markerGroup.node().style._transform);\n        this.markerGroup.styles({\n            transform: \"translate(\".concat(markerX, \", \").concat(halfHeight, \")\").concat(this.markerGroup.node().style._transform),\n        });\n        this.labelGroup.styles({ transform: \"translate(\".concat(labelX, \", \").concat(halfHeight, \")\") });\n        ellipsisIt(this.labelGroup.select(CLASS_NAMES.label.class).node(), Math.ceil(labelWidth));\n        if (this.showValue) {\n            this.valueGroup.styles({ transform: \"translate(\".concat(valueX, \", \").concat(halfHeight, \")\") });\n            ellipsisIt(this.valueGroup.select(CLASS_NAMES.value.class).node(), Math.ceil(valueWidth));\n        }\n    };\n    CategoryItem.prototype.render = function (attributes, container) {\n        var ctn = select(container);\n        var _a = attributes.x, x = _a === void 0 ? 0 : _a, _b = attributes.y, y = _b === void 0 ? 0 : _b;\n        ctn.styles({ transform: \"translate(\".concat(x, \", \").concat(y, \")\") });\n        this.renderMarker(ctn);\n        this.renderLabel(ctn);\n        this.renderValue(ctn);\n        this.renderBackground(ctn);\n        this.adjustLayout();\n    };\n    return CategoryItem;\n}(Component));\nexport { CategoryItem };\n//# sourceMappingURL=item.js.map","import { __assign, __extends, __read, __spreadArray } from \"tslib\";\nimport { CustomEvent } from '@antv/g';\nimport { noop, set } from '@antv/util';\nimport { Component } from '../../../core';\nimport { Group } from '../../../shapes';\nimport { classNames, deepAssign, getCallbackValue, groupBy, select, subStyleProps, } from '../../../util';\nimport { Navigator } from '../../navigator';\nimport { ifHorizontal } from '../utils';\nimport { CategoryItem } from './item';\nvar CLASS_NAMES = classNames({\n    page: 'item-page',\n    navigator: 'navigator',\n    item: 'item',\n}, 'items');\n/**\n * if value exists, it need to follow rule, otherwise, return default value\n * @param value\n * @param rule\n * @param defaultValue\n * @returns\n */\nvar ifSatisfied = function (value, rule, defaultValue) {\n    if (defaultValue === void 0) { defaultValue = true; }\n    if (value) {\n        return rule(value);\n    }\n    return defaultValue;\n};\nvar CategoryItems = /** @class */ (function (_super) {\n    __extends(CategoryItems, _super);\n    function CategoryItems(options) {\n        var _this = _super.call(this, options, {\n            data: [],\n            gridRow: Infinity,\n            gridCol: undefined,\n            padding: 0,\n            width: 1000,\n            height: 100,\n            rowPadding: 0,\n            colPadding: 0,\n            layout: 'flex',\n            orientation: 'horizontal',\n            click: noop,\n            mouseenter: noop,\n            mouseleave: noop,\n        }) || this;\n        _this.navigatorShape = [0, 0];\n        return _this;\n    }\n    Object.defineProperty(CategoryItems.prototype, \"pageViews\", {\n        get: function () {\n            return this.navigator.getContainer();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItems.prototype, \"grid\", {\n        get: function () {\n            var _a = this.attributes, gridRow = _a.gridRow, gridCol = _a.gridCol, data = _a.data;\n            if (!gridRow && !gridCol)\n                throw new Error('gridRow and gridCol can not be set null at the same time');\n            if (!!gridRow && !!gridCol)\n                return [gridRow, gridCol];\n            if (gridRow)\n                return [gridRow, data.length];\n            return [data.length, gridCol]; // !!gridCol\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItems.prototype, \"renderData\", {\n        get: function () {\n            var _a = this.attributes, data = _a.data, layout = _a.layout;\n            var style = subStyleProps(this.attributes, 'item');\n            var d = data.map(function (datum, index) {\n                var _a = datum.id, id = _a === void 0 ? index : _a, labelText = datum.label, valueText = datum.value;\n                return {\n                    id: \"\".concat(id),\n                    index: index,\n                    style: __assign({ layout: layout, labelText: labelText, valueText: valueText }, Object.fromEntries(Object.entries(style).map(function (_a) {\n                        var _b = __read(_a, 2), key = _b[0], val = _b[1];\n                        return [key, getCallbackValue(val, [datum, index, data])];\n                    }))),\n                };\n            });\n            return d;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CategoryItems.prototype.getGridLayout = function () {\n        var _this = this;\n        var _a = this.attributes, orientation = _a.orientation, width = _a.width, rowPadding = _a.rowPadding, colPadding = _a.colPadding;\n        var _b = __read(this.navigatorShape, 1), navWidth = _b[0];\n        var _c = __read(this.grid, 2), gridRow = _c[0], gridCol = _c[1];\n        var pageSize = gridCol * gridRow;\n        var prevOffset = 0;\n        return this.pageViews.children.map(function (item, index) {\n            var _a, _b;\n            // calc page, row and column\n            var page = Math.floor(index / pageSize);\n            var pageIndex = index % pageSize;\n            var dir = _this.ifHorizontal(gridCol, gridRow);\n            var pos = [Math.floor(pageIndex / dir), pageIndex % dir];\n            if (orientation === 'vertical')\n                pos.reverse();\n            var _c = __read(pos, 2), row = _c[0], col = _c[1];\n            // calc x, y and shape\n            var colWidth = (width - navWidth - (gridCol - 1) * colPadding) / gridCol;\n            // const rowHeight = getRenderBBox(item).height;\n            var rowHeight = item.getBBox().height;\n            var _d = __read([0, 0], 2), x = _d[0], y = _d[1];\n            if (orientation === 'horizontal') {\n                _a = __read([prevOffset, row * (rowHeight + rowPadding)], 2), x = _a[0], y = _a[1];\n                prevOffset = col === gridCol - 1 ? 0 : prevOffset + colWidth + colPadding;\n            }\n            else {\n                _b = __read([col * (colWidth + colPadding), prevOffset], 2), x = _b[0], y = _b[1];\n                prevOffset = row === gridRow - 1 ? 0 : prevOffset + rowHeight + rowPadding;\n            }\n            return { page: page, index: index, row: row, col: col, pageIndex: pageIndex, width: colWidth, height: rowHeight, x: x, y: y };\n        });\n    };\n    CategoryItems.prototype.getFlexLayout = function () {\n        var _a = this.attributes, maxWidth = _a.width, maxHeight = _a.height, rowPadding = _a.rowPadding, cP = _a.colPadding;\n        var _b = __read(this.navigatorShape, 1), navWidth = _b[0];\n        var _c = __read(this.grid, 2), gridRow = _c[0], gridCol = _c[1];\n        var _d = __read([maxWidth - navWidth, maxHeight], 2), limitWidth = _d[0], limitHeight = _d[1];\n        var _e = __read([0, 0, 0, 0, 0, 0, 0, 0], 8), x = _e[0], y = _e[1], page = _e[2], pageIndex = _e[3], col = _e[4], row = _e[5], prevWidth = _e[6], prevHeight = _e[7];\n        return this.pageViews.children.map(function (item, index) {\n            var _a, _b, _c, _d;\n            // const { width, height } = getRenderBBox(item);\n            var _e = item.getBBox(), width = _e.width, height = _e.height;\n            var colPadding = prevWidth === 0 ? 0 : cP;\n            // assume that every item has the same height\n            var nextWidth = prevWidth + colPadding + width;\n            // inline\n            if (nextWidth <= limitWidth && ifSatisfied(col, function (c) { return c < gridCol; })) {\n                _a = __read([prevWidth + colPadding, prevHeight, nextWidth], 3), x = _a[0], y = _a[1], prevWidth = _a[2];\n                return { width: width, height: height, x: x, y: y, page: page, index: index, pageIndex: pageIndex++, row: row, col: col++ };\n            }\n            // wrap\n            _b = __read([row + 1, 0, 0, prevHeight + height + rowPadding], 4), row = _b[0], col = _b[1], prevWidth = _b[2], prevHeight = _b[3];\n            var nextHeight = prevHeight + height;\n            if (nextHeight <= limitHeight && ifSatisfied(row, function (r) { return r < gridRow; })) {\n                _c = __read([prevWidth, prevHeight, width], 3), x = _c[0], y = _c[1], prevWidth = _c[2];\n                return { width: width, height: height, x: x, y: y, page: page, index: index, pageIndex: pageIndex++, row: row, col: col++ };\n            }\n            // paging\n            _d = __read([0, 0, width, 0, page + 1, 0, 0, 0], 8), x = _d[0], y = _d[1], prevWidth = _d[2], prevHeight = _d[3], page = _d[4], pageIndex = _d[5], row = _d[6], col = _d[7];\n            return { width: width, height: height, x: x, y: y, page: page, index: index, pageIndex: pageIndex++, row: row, col: col++ };\n        });\n    };\n    Object.defineProperty(CategoryItems.prototype, \"itemsLayout\", {\n        get: function () {\n            this.navigatorShape = [0, 0];\n            var cb = this.attributes.layout === 'grid' ? this.getGridLayout : this.getFlexLayout;\n            var layout = cb.call(this);\n            // re layout\n            if (layout.slice(-1)[0].page > 0) {\n                this.navigatorShape = [55, 0];\n                return cb.call(this);\n            }\n            return layout;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CategoryItems.prototype.ifHorizontal = function (a, b) {\n        var orientation = this.attributes.orientation;\n        return ifHorizontal(orientation, a, b);\n    };\n    CategoryItems.prototype.flattenPage = function (container) {\n        container.querySelectorAll(CLASS_NAMES.item.class).forEach(function (item) {\n            container.appendChild(item);\n        });\n        container.querySelectorAll(CLASS_NAMES.page.class).forEach(function (page) {\n            var removedPage = container.removeChild(page);\n            removedPage.destroy();\n        });\n    };\n    CategoryItems.prototype.renderItems = function (container) {\n        var _a = this.attributes, click = _a.click, mouseenter = _a.mouseenter, mouseleave = _a.mouseleave;\n        this.flattenPage(container);\n        var dispatchCustomEvent = this.dispatchCustomEvent.bind(this);\n        select(container)\n            .selectAll(CLASS_NAMES.item.class)\n            .data(this.renderData, function (d) { return d.id; })\n            .join(function (enter) {\n            return enter\n                .append(function (_a) {\n                var style = _a.style;\n                return new CategoryItem({ style: style });\n            })\n                .attr('className', CLASS_NAMES.item.name)\n                .on('click', function () {\n                click === null || click === void 0 ? void 0 : click(this);\n                dispatchCustomEvent('itemClick', { item: this });\n            })\n                .on('pointerenter', function () {\n                mouseenter === null || mouseenter === void 0 ? void 0 : mouseenter(this);\n                dispatchCustomEvent('itemMouseenter', { item: this });\n            })\n                .on('pointerleave', function () {\n                mouseleave === null || mouseleave === void 0 ? void 0 : mouseleave(this);\n                dispatchCustomEvent('itemMouseleave', { item: this });\n            });\n        }, function (update) {\n            return update.each(function (_a) {\n                var style = _a.style;\n                this.update(style);\n            });\n        }, function (exit) { return exit.remove(); });\n    };\n    CategoryItems.prototype.relayoutNavigator = function () {\n        var _a;\n        var _b = this.attributes, layout = _b.layout, width = _b.width;\n        var height = ((_a = this.pageViews.children[0]) === null || _a === void 0 ? void 0 : _a.getBBox().height) || 0;\n        var _c = __read(this.navigatorShape, 2), navWidth = _c[0], navHeight = _c[1];\n        this.navigator.update(layout === 'grid' ? { pageWidth: width - navWidth, pageHeight: height - navHeight } : {});\n    };\n    CategoryItems.prototype.adjustLayout = function () {\n        var _this = this;\n        var itemsLayouts = Object.entries(groupBy(this.itemsLayout, 'page')).map(function (_a) {\n            var _b = __read(_a, 2), page = _b[0], layouts = _b[1];\n            return ({\n                page: page,\n                layouts: layouts,\n            });\n        });\n        var categoryItems = __spreadArray([], __read(this.navigator.getContainer().children), false);\n        itemsLayouts.forEach(function (_a) {\n            var layouts = _a.layouts;\n            var page = _this.pageViews.appendChild(new Group({ className: CLASS_NAMES.page.name }));\n            layouts.forEach(function (layout) {\n                var x = layout.x, y = layout.y, index = layout.index, width = layout.width, height = layout.height;\n                var item = categoryItems[index];\n                // @ts-ignore\n                page.appendChild(item);\n                set(item, '__layout__', layout);\n                item.update({ x: x, y: y, width: width, height: height });\n            });\n        });\n        this.relayoutNavigator();\n    };\n    CategoryItems.prototype.renderNavigator = function (container) {\n        var orientation = this.attributes.orientation;\n        var navStyle = subStyleProps(this.attributes, 'nav');\n        var style = deepAssign({ orientation: orientation }, navStyle);\n        var that = this;\n        container\n            .selectAll(CLASS_NAMES.navigator.class)\n            .data(['nav'])\n            .join(function (enter) {\n            return enter\n                .append(function () { return new Navigator({ style: style }); })\n                .attr('className', CLASS_NAMES.navigator.name)\n                .each(function () {\n                that.navigator = this;\n            });\n        }, function (update) {\n            return update.each(function () {\n                this.update(style);\n            });\n        }, function (exit) { return exit.remove(); });\n        return this.navigator;\n    };\n    CategoryItems.prototype.getBBox = function () {\n        return this.navigator.getBBox();\n    };\n    CategoryItems.prototype.render = function (attributes, container) {\n        var data = this.attributes.data;\n        if (!data || data.length === 0)\n            return;\n        /**\n         * 1. render items\n         * 2. paging\n         * 3. layout\n         */\n        var navigator = this.renderNavigator(select(container));\n        this.renderItems(navigator.getContainer());\n        this.adjustLayout();\n    };\n    CategoryItems.prototype.dispatchCustomEvent = function (type, payload) {\n        var evt = new CustomEvent(type, {\n            detail: payload,\n        });\n        this.dispatchEvent(evt);\n    };\n    return CategoryItems;\n}(Component));\nexport { CategoryItems };\n//# sourceMappingURL=items.js.map","export function groupBy(source, by) {\n    return source.reduce(function (acc, curr) {\n        (acc[curr[by]] = acc[curr[by]] || []).push(curr);\n        return acc;\n    }, {});\n}\n//# sourceMappingURL=group-by.js.map","import { __assign, __extends, __read } from \"tslib\";\nimport { Component } from '../../core';\nimport { BBox, select, splitStyle, subStyleProps } from '../../util';\nimport { getBBox, Title } from '../title';\nimport { CategoryItems } from './category/items';\nimport { CATEGORY_DEFAULT_OPTIONS, CLASS_NAMES } from './constant';\nvar Category = /** @class */ (function (_super) {\n    __extends(Category, _super);\n    function Category(options) {\n        return _super.call(this, options, CATEGORY_DEFAULT_OPTIONS) || this;\n    }\n    Category.prototype.renderTitle = function (container, width, height) {\n        var _a = this.attributes, showTitle = _a.showTitle, titleText = _a.titleText;\n        var style = subStyleProps(this.attributes, 'title');\n        var _b = __read(splitStyle(style), 2), titleStyle = _b[0], groupStyle = _b[1];\n        this.titleGroup = container.maybeAppendByClassName(CLASS_NAMES.titleGroup, 'g').styles(groupStyle);\n        var finalTitleStyle = __assign(__assign({ width: width, height: height }, titleStyle), { text: showTitle ? titleText : '' });\n        this.title = this.titleGroup\n            .maybeAppendByClassName(CLASS_NAMES.title, function () { return new Title({ style: finalTitleStyle }); })\n            .update(finalTitleStyle);\n    };\n    Category.prototype.renderItems = function (container, bbox) {\n        var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n        var style = subStyleProps(this.attributes, 'title', true);\n        var _a = __read(splitStyle(style), 2), partialItemStyle = _a[0], groupStyle = _a[1];\n        // overwrite width and height to available space\n        // overwrite x and y to 0\n        var itemStyle = __assign(__assign({}, partialItemStyle), { width: width, height: height, x: 0, y: 0 });\n        this.itemsGroup = container\n            .maybeAppendByClassName(CLASS_NAMES.itemsGroup, 'g')\n            .styles(__assign(__assign({}, groupStyle), { transform: \"translate(\".concat(x, \", \").concat(y, \")\") }));\n        var that = this;\n        this.itemsGroup\n            .selectAll(CLASS_NAMES.items.class)\n            .data(['items'])\n            .join(function (enter) {\n            return enter\n                .append(function () { return new CategoryItems({ style: itemStyle }); })\n                .attr('className', CLASS_NAMES.items.name)\n                .each(function () {\n                that.items = select(this);\n            });\n        }, function (update) { return update.update(itemStyle); }, function (exit) { return exit.remove(); });\n    };\n    Category.prototype.adjustLayout = function () {\n        var showTitle = this.attributes.showTitle;\n        if (showTitle) {\n            var _a = this.title.node().getAvailableSpace(), x = _a.x, y = _a.y;\n            this.itemsGroup.node().style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n        }\n    };\n    Object.defineProperty(Category.prototype, \"availableSpace\", {\n        get: function () {\n            var _a = this.attributes, showTitle = _a.showTitle, width = _a.width, height = _a.height;\n            if (!showTitle)\n                return new BBox(0, 0, width, height);\n            return this.title.node().getAvailableSpace();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Category.prototype.getBBox = function () {\n        var _a, _b;\n        var title = (_a = this.title) === null || _a === void 0 ? void 0 : _a.node();\n        var items = (_b = this.items) === null || _b === void 0 ? void 0 : _b.node();\n        if (!title || !items)\n            return _super.prototype.getBBox.call(this);\n        return getBBox(title, items);\n    };\n    Category.prototype.render = function (attributes, container) {\n        var _a = this.attributes, width = _a.width, height = _a.height, _b = _a.x, x = _b === void 0 ? 0 : _b, _c = _a.y, y = _c === void 0 ? 0 : _c;\n        var ctn = select(container);\n        container.style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n        this.renderTitle(ctn, width, height);\n        this.renderItems(ctn, this.availableSpace);\n        this.adjustLayout();\n    };\n    return Category;\n}(Component));\nexport { Category };\n//# sourceMappingURL=category.js.map","import { classNames, deepAssign, superStyleProps } from '../../util';\nimport { DEFAULT_HANDLE_CFG } from './continuous/handle';\nexport var LEGEND_BASE_DEFAULT_OPTIONS = {\n    showTitle: true,\n    padding: 0,\n    orientation: 'horizontal',\n    backgroundFill: 'transparent',\n    titleText: '',\n    titleSpacing: 4,\n    titlePosition: 'top-left',\n    titleFill: '#2C3542',\n    titleFontWeight: 'bold',\n    titleFontFamily: 'sans-serif',\n    titleFontSize: 12,\n};\nexport var CATEGORY_DEFAULT_OPTIONS = deepAssign({}, LEGEND_BASE_DEFAULT_OPTIONS, {});\nexport var CONTINUOUS_DEFAULT_OPTIONS = deepAssign({}, LEGEND_BASE_DEFAULT_OPTIONS, superStyleProps(DEFAULT_HANDLE_CFG, 'handle'), {\n    color: [\n        '#d0e3fa',\n        '#acc7f6',\n        '#8daaf2',\n        '#6d8eea',\n        '#4d73cd',\n        '#325bb1',\n        '#5a3e75',\n        '#8c3c79',\n        '#e23455',\n        '#e7655b',\n    ],\n    indicatorBackgroundFill: '#262626',\n    indicatorLabelFill: 'white',\n    indicatorLabelFontSize: 12,\n    indicatorVisibility: 'hidden',\n    labelAlign: 'value',\n    labelDirection: 'positive',\n    labelSpacing: 5,\n    showHandle: true,\n    showIndicator: true,\n    showLabel: true,\n    slidable: true,\n    titleText: '',\n    type: 'continuous',\n});\n// \nexport var STEP_RATIO = 0.01;\n// namevalue\nexport var NAME_VALUE_RATIO = 0.5;\nexport var CLASS_NAMES = classNames({\n    title: 'title',\n    titleGroup: 'title-group',\n    items: 'items',\n    itemsGroup: 'items-group',\n    contentGroup: 'content-group',\n    ribbonGroup: 'ribbon-group',\n    ribbon: 'ribbon',\n    handlesGroup: 'handles-group',\n    handle: 'handle',\n    startHandle: 'start-handle',\n    endHandle: 'end-handle',\n    labelGroup: 'label-group',\n    label: 'label',\n    indicator: 'indicator',\n}, 'legend');\n//# sourceMappingURL=constant.js.map","import { __assign, __extends, __read, __rest } from \"tslib\";\nimport { Component } from '../../../core';\nimport { classNames, ifShow, select, subStyleProps } from '../../../util';\nimport { Marker } from '../../marker';\nimport { ifHorizontal } from '../utils';\nvar CLASS_NAMES = classNames({\n    markerGroup: 'marker-group',\n    marker: 'marker',\n    labelGroup: 'label-group',\n    label: 'label',\n}, 'handle');\n// todo @xiaoiver,  TEXT_INHERITABLE_PROPS \nexport var DEFAULT_HANDLE_CFG = {\n    showLabel: true,\n    formatter: function (val) { return val.toString(); },\n    markerSize: 25,\n    markerStroke: '#c5c5c5',\n    markerFill: '#fff',\n    markerLineWidth: 1,\n    labelFontSize: 12,\n    labelFill: '#c5c5c5',\n    labelText: '',\n    orientation: 'vertical',\n    spacing: 0,\n};\nvar Handle = /** @class */ (function (_super) {\n    __extends(Handle, _super);\n    function Handle(options) {\n        return _super.call(this, options, DEFAULT_HANDLE_CFG) || this;\n    }\n    Handle.prototype.render = function (attributes, container) {\n        var markerGroup = select(container).maybeAppendByClassName(CLASS_NAMES.markerGroup, 'g');\n        this.renderMarker(markerGroup);\n        var labelGroup = select(container).maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g');\n        this.renderLabel(labelGroup);\n    };\n    Handle.prototype.renderMarker = function (container) {\n        var _this = this;\n        var _a = this.attributes, orientation = _a.orientation, _b = _a.markerSymbol, markerSymbol = _b === void 0 ? ifHorizontal(orientation, 'horizontalHandle', 'verticalHandle') : _b;\n        ifShow(!!markerSymbol, container, function (group) {\n            var handleStyle = subStyleProps(_this.attributes, 'marker');\n            var markerStyle = __assign({ symbol: markerSymbol }, handleStyle);\n            _this.marker = group\n                .maybeAppendByClassName(CLASS_NAMES.marker, function () { return new Marker({ style: markerStyle }); })\n                .update(markerStyle);\n        });\n    };\n    Handle.prototype.renderLabel = function (container) {\n        var _this = this;\n        var _a = this.attributes, showLabel = _a.showLabel, orientation = _a.orientation, _b = _a.spacing, spacing = _b === void 0 ? 0 : _b, formatter = _a.formatter;\n        ifShow(showLabel, container, function (group) {\n            var _a;\n            var _b = subStyleProps(_this.attributes, 'label'), text = _b.text, labelStyle = __rest(_b, [\"text\"]);\n            // adjust layout\n            var _c = ((_a = group.select(CLASS_NAMES.marker.class)) === null || _a === void 0 ? void 0 : _a.node().getBBox()) || {}, _d = _c.width, width = _d === void 0 ? 0 : _d, _e = _c.height, height = _e === void 0 ? 0 : _e;\n            var _f = __read(ifHorizontal(orientation, [0, height + spacing, 'center', 'top'], [width + spacing, 0, 'start', 'middle']), 4), x = _f[0], y = _f[1], textAlign = _f[2], textBaseline = _f[3];\n            group\n                .maybeAppendByClassName(CLASS_NAMES.label, 'text')\n                .styles(__assign(__assign({}, labelStyle), { x: x, y: y, text: formatter(text).toString(), textAlign: textAlign, textBaseline: textBaseline }));\n        });\n    };\n    return Handle;\n}(Component));\nexport { Handle };\n//# sourceMappingURL=handle.js.map","import { __read } from \"tslib\";\nimport { Marker } from '../marker';\n/**\n * tick\n */\nexport function getStepValueByValue(value, step, min) {\n    var count = Math.round((value - min) / step);\n    return min + count * step;\n}\nexport function hiddenHandle(x, y, r) {\n    // \n    var ratio = 1.4;\n    var diffY = ratio * r;\n    return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x + r, y + diffY], ['L', x - r, y + diffY], ['Z']];\n}\n// \nvar HANDLE_HEIGHT_RATIO = 1.4;\nvar HANDLE_TRIANGLE_RATIO = 0.4;\n// \nexport function verticalHandle(x, y, r) {\n    var width = r;\n    var height = width * HANDLE_HEIGHT_RATIO;\n    var halfWidth = width / 2;\n    var oneSixthWidth = width / 6;\n    var triangleX = x + height * HANDLE_TRIANGLE_RATIO;\n    return [\n        ['M', x, y],\n        ['L', triangleX, y + halfWidth],\n        ['L', x + height, y + halfWidth],\n        ['L', x + height, y - halfWidth],\n        ['L', triangleX, y - halfWidth],\n        ['Z'],\n        // \n        ['M', triangleX, y + oneSixthWidth],\n        ['L', x + height - 2, y + oneSixthWidth],\n        ['M', triangleX, y - oneSixthWidth],\n        ['L', x + height - 2, y - oneSixthWidth],\n    ];\n}\n// \nexport function horizontalHandle(x, y, r) {\n    var width = r;\n    var height = width * HANDLE_HEIGHT_RATIO;\n    var halfWidth = width / 2;\n    var oneSixthWidth = width / 6;\n    var triangleY = y + height * HANDLE_TRIANGLE_RATIO;\n    return [\n        ['M', x, y],\n        ['L', x - halfWidth, triangleY],\n        ['L', x - halfWidth, y + height],\n        ['L', x + halfWidth, y + height],\n        ['L', x + halfWidth, triangleY],\n        ['Z'],\n        // \n        ['M', x - oneSixthWidth, triangleY],\n        ['L', x - oneSixthWidth, y + height - 2],\n        ['M', x + oneSixthWidth, triangleY],\n        ['L', x + oneSixthWidth, y + height - 2],\n    ];\n}\nMarker.registerSymbol('hiddenHandle', hiddenHandle);\nMarker.registerSymbol('verticalHandle', verticalHandle);\nMarker.registerSymbol('horizontalHandle', horizontalHandle);\nexport var ifH = function (orientation, a, b) {\n    if (orientation === void 0) { orientation = 'horizontal'; }\n    return (orientation === 'horizontal' ? a : b);\n};\n// @chushen\nexport function getSafetySelections(domain, newSelection, oldSelection, precision) {\n    var _a;\n    if (precision === void 0) { precision = 4; }\n    var _b = __read(domain, 2), min = _b[0], max = _b[1];\n    var _c = __read(newSelection, 2), start = _c[0], end = _c[1];\n    var _d = __read(oldSelection, 2), prevStart = _d[0], prevEnd = _d[1];\n    var _e = __read([start, end], 2), startVal = _e[0], endVal = _e[1];\n    var range = endVal - startVal;\n    // startVal endVal\n    if (startVal > endVal) {\n        _a = __read([endVal, startVal], 2), startVal = _a[0], endVal = _a[1];\n    }\n    // \n    if (range > max - min) {\n        return [min, max];\n    }\n    if (startVal < min) {\n        if (prevStart === min && prevEnd === endVal) {\n            return [min, endVal];\n        }\n        return [min, range + min];\n    }\n    if (endVal > max) {\n        if (prevEnd === max && prevStart === startVal) {\n            return [startVal, max];\n        }\n        return [max - range, max];\n    }\n    // \n    return [startVal, endVal];\n}\nexport function ifHorizontal(orientation, a, b) {\n    if (orientation === void 0) { orientation = 'horizontal'; }\n    return orientation === 'horizontal' ? a : b;\n}\n//# sourceMappingURL=utils.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { isFunction } from '@antv/util';\nimport { Component } from '../../core';\nimport { ifShow, select } from '../../util';\nimport { bowtie, circle, cross, dash, diamond, dot, hexagon, hv, hvh, hyphen, line, plus, point, smooth, square, tick, triangle, triangleDown, vh, vhv, } from './symbol';\nimport { parseMarker } from './utils';\nfunction getType(symbol) {\n    var markerType = parseMarker(symbol);\n    if (['base64', 'url', 'image'].includes(markerType)) {\n        return 'image';\n    }\n    if (symbol && markerType === 'symbol') {\n        return 'path';\n    }\n    return null;\n}\nvar Marker = /** @class */ (function (_super) {\n    __extends(Marker, _super);\n    function Marker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Marker.prototype.render = function (attributes, container) {\n        var _a = attributes.x, x = _a === void 0 ? 0 : _a, _b = attributes.y, y = _b === void 0 ? 0 : _b;\n        var _c = this.getSubShapeStyle(attributes), symbol = _c.symbol, _d = _c.size, size = _d === void 0 ? 16 : _d, style = __rest(_c, [\"symbol\", \"size\"]);\n        var type = getType(symbol);\n        ifShow(!!type, select(container), function (group) {\n            group\n                .maybeAppendByClassName(\"marker\", type)\n                .attr('className', \"marker \".concat(type, \"-marker\"))\n                .call(function (selection) {\n                if (type === 'image') {\n                    // todo  path symbol \n                    var r = size * 2;\n                    selection.styles({\n                        img: symbol,\n                        width: r,\n                        height: r,\n                        x: x - size,\n                        y: y - size,\n                    });\n                }\n                else {\n                    var r = size / 2;\n                    var symbolFn = isFunction(symbol) ? symbol : Marker.getSymbol(symbol);\n                    selection.styles(__assign({ d: symbolFn === null || symbolFn === void 0 ? void 0 : symbolFn(x, y, r) }, style));\n                }\n            });\n        });\n    };\n    Marker.MARKER_SYMBOL_MAP = new Map();\n    /**\n     *  icon \n     * @param type\n     * @param path\n     */\n    Marker.registerSymbol = function (type, symbol) {\n        Marker.MARKER_SYMBOL_MAP.set(type, symbol);\n    };\n    /**\n     *  icon  path\n     */\n    Marker.getSymbol = function (type) {\n        return Marker.MARKER_SYMBOL_MAP.get(type);\n    };\n    /**\n     * @returns  icon \n     */\n    Marker.getSymbols = function () {\n        return Array.from(Marker.MARKER_SYMBOL_MAP.keys());\n    };\n    return Marker;\n}(Component));\nexport { Marker };\n/** Shapes for Point Geometry */\nMarker.registerSymbol('cross', cross);\nMarker.registerSymbol('hyphen', hyphen);\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('plus', plus);\nMarker.registerSymbol('tick', tick);\nMarker.registerSymbol('circle', circle);\nMarker.registerSymbol('point', point);\nMarker.registerSymbol('bowtie', bowtie);\nMarker.registerSymbol('hexagon', hexagon);\nMarker.registerSymbol('square', square);\nMarker.registerSymbol('diamond', diamond);\nMarker.registerSymbol('triangle', triangle);\nMarker.registerSymbol('triangle-down', triangleDown);\n/** LineSymbols */\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('dot', dot);\nMarker.registerSymbol('dash', dash);\nMarker.registerSymbol('smooth', smooth);\nMarker.registerSymbol('hv', hv);\nMarker.registerSymbol('vh', vh);\nMarker.registerSymbol('hvh', hvh);\nMarker.registerSymbol('vhv', vhv);\n//# sourceMappingURL=index.js.map","import { isObject, isString, isFunction } from '@antv/util';\n/**\n * marker\n */\nexport function parseMarker(icon) {\n    var type = 'default';\n    if (isObject(icon) && icon instanceof Image)\n        type = 'image';\n    else if (isFunction(icon))\n        type = 'symbol';\n    else if (isString(icon)) {\n        var dataURLsPattern = new RegExp('data:(image|text)');\n        if (icon.match(dataURLsPattern)) {\n            type = 'base64';\n        }\n        else if (/^(https?:\\/\\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\\.)+[a-zA-Z]+)(:\\d+)?(\\/.*)?(\\?.*)?(#.*)?$/.test(icon)) {\n            type = 'url';\n        }\n        else {\n            // symbol string \n            type = 'symbol';\n        }\n    }\n    return type;\n}\n//# sourceMappingURL=utils.js.map","/**\n * \n */\nexport var circle = function (x, y, r) {\n    return [['M', x - r, y], ['A', r, r, 0, 1, 0, x + r, y], ['A', r, r, 0, 1, 0, x - r, y], ['Z']];\n};\n/**\n * Cname circle to point.\n */\nexport var point = circle;\n/**\n * \n */\nexport var square = function (x, y, r) {\n    return [['M', x - r, y - r], ['L', x + r, y - r], ['L', x + r, y + r], ['L', x - r, y + r], ['Z']];\n};\n/**\n * \n */\nexport var diamond = function (x, y, r) {\n    return [['M', x - r, y], ['L', x, y - r], ['L', x + r, y], ['L', x, y + r], ['Z']];\n};\n/**\n * \n */\nexport var triangle = function (x, y, r) {\n    var diffY = r * Math.sin((1 / 3) * Math.PI);\n    return [['M', x - r, y + diffY], ['L', x, y - diffY], ['L', x + r, y + diffY], ['Z']];\n};\n/**\n * \n */\nexport var triangleDown = function (x, y, r) {\n    var diffY = r * Math.sin((1 / 3) * Math.PI);\n    return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x, y + diffY], ['Z']];\n};\n/**\n * \n */\nexport var hexagon = function (x, y, r) {\n    var diffX = (r / 2) * Math.sqrt(3);\n    return [\n        ['M', x, y - r],\n        ['L', x + diffX, y - r / 2],\n        ['L', x + diffX, y + r / 2],\n        ['L', x, y + r],\n        ['L', x - diffX, y + r / 2],\n        ['L', x - diffX, y - r / 2],\n        ['Z'],\n    ];\n};\n/**\n * \n */\nexport var bowtie = function (x, y, r) {\n    var diffY = r - 1.5;\n    return [['M', x - r, y - diffY], ['L', x + r, y + diffY], ['L', x + r, y - diffY], ['L', x - r, y + diffY], ['Z']];\n};\n/** --  ------------------------------------------------------------------------------- */\n/**\n * |\n */\nexport var line = function (x, y, r) {\n    return [\n        ['M', x, y + r],\n        ['L', x, y - r],\n    ];\n};\n/**\n * \n */\nexport var cross = function (x, y, r) {\n    return [\n        ['M', x - r, y - r],\n        ['L', x + r, y + r],\n        ['M', x + r, y - r],\n        ['L', x - r, y + r],\n    ];\n};\n/**\n * \n */\nexport var tick = function (x, y, r) {\n    return [\n        ['M', x - r / 2, y - r],\n        ['L', x + r / 2, y - r],\n        ['M', x, y - r],\n        ['L', x, y + r],\n        ['M', x - r / 2, y + r],\n        ['L', x + r / 2, y + r],\n    ];\n};\n/**\n * +\n */\nexport var plus = function (x, y, r) {\n    return [\n        ['M', x - r, y],\n        ['L', x + r, y],\n        ['M', x, y - r],\n        ['L', x, y + r],\n    ];\n};\n/**\n * -\n */\nexport var hyphen = function (x, y, r) {\n    return [\n        ['M', x - r, y],\n        ['L', x + r, y],\n    ];\n};\n/** --  marker ------------------------------------------------------------------------------- */\n/**\n * ---\n */\nexport var dot = function (x, y, r) {\n    return [\n        ['M', x - r, y],\n        ['L', x + r, y],\n    ];\n};\nexport var dash = dot;\nexport var smooth = function (x, y, r) {\n    return [\n        ['M', x - r, y],\n        ['A', r / 2, r / 2, 0, 1, 1, x, y],\n        ['A', r / 2, r / 2, 0, 1, 0, x + r, y],\n    ];\n};\nexport var hv = function (x, y, r) {\n    return [\n        ['M', x - r - 1, y - 2.5],\n        ['L', x, y - 2.5],\n        ['L', x, y + 2.5],\n        ['L', x + r + 1, y + 2.5],\n    ];\n};\nexport var vh = function (x, y, r) {\n    return [\n        ['M', x - r - 1, y + 2.5],\n        ['L', x, y + 2.5],\n        ['L', x, y - 2.5],\n        ['L', x + r + 1, y - 2.5],\n    ];\n};\nexport var hvh = function (x, y, r) {\n    return [\n        ['M', x - (r + 1), y + 2.5],\n        ['L', x - r / 2, y + 2.5],\n        ['L', x - r / 2, y - 2.5],\n        ['L', x + r / 2, y - 2.5],\n        ['L', x + r / 2, y + 2.5],\n        ['L', x + r + 1, y + 2.5],\n    ];\n};\nexport function vhv(x, y) {\n    //  13px 8px\n    return [\n        ['M', x - 5, y + 2.5],\n        ['L', x - 5, y],\n        ['L', x, y],\n        ['L', x, y - 3],\n        ['L', x, y + 3],\n        ['L', x + 6.5, y + 3],\n    ];\n}\n/** --------------------------------------------------------------------------------- */\nexport var button = function (x, y, r) {\n    return [['M', x - r, y - r], ['L', x + r, y], ['L', x - r, y + r], ['Z']];\n};\n//# sourceMappingURL=symbol.js.map","import { classNames } from '../../util';\nexport var HANDLE_ICON_DEFAULT_CFG = {\n    fill: '#fff',\n    lineWidth: 1,\n    radius: 2,\n    size: 10,\n    stroke: '#bfbfbf',\n    strokeOpacity: 1,\n    zIndex: 0,\n};\nexport var HANDLE_LABEL_DEFAULT_CFG = {\n    fill: '#000',\n    fillOpacity: 0.45,\n    fontSize: 12,\n    textAlign: 'center',\n    textBaseline: 'middle',\n    zIndex: 1,\n};\nexport var HANDLE_DEFAULT_CFG = {\n    x: 0,\n    y: 0,\n    orientation: 'horizontal',\n    showLabel: true,\n    type: 'start',\n};\nexport var CLASS_NAMES = classNames({\n    foreground: 'foreground',\n    handle: 'handle',\n    selection: 'selection',\n    sparkline: 'sparkline',\n    sparklineGroup: 'sparkline-group',\n    track: 'track',\n    brushArea: 'brush-area',\n}, 'slider');\n//# sourceMappingURL=constant.js.map","import { __assign, __extends, __read, __rest } from \"tslib\";\nimport { Component } from '../../core';\nimport { classNames, ifShow, select, splitStyle, subStyleProps } from '../../util';\nimport { HANDLE_DEFAULT_CFG, HANDLE_ICON_DEFAULT_CFG, HANDLE_LABEL_DEFAULT_CFG } from './constant';\nvar CLASS_NAMES = classNames({\n    labelGroup: 'label-group',\n    label: 'label',\n    iconGroup: 'icon-group',\n    icon: 'icon',\n    iconRect: 'icon-rect',\n    iconLine: 'icon-line',\n}, 'handle');\nvar HandleIcon = /** @class */ (function (_super) {\n    __extends(HandleIcon, _super);\n    function HandleIcon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HandleIcon.prototype.render = function (attributes, container) {\n        var x = attributes.x, y = attributes.y, _a = attributes.size, size = _a === void 0 ? 10 : _a, _b = attributes.radius, radius = _b === void 0 ? size / 4 : _b, orientation = attributes.orientation, iconStyle = __rest(attributes, [\"x\", \"y\", \"size\", \"radius\", \"orientation\"]);\n        // \n        var width = size;\n        var height = width * 2.4;\n        var rect = select(container)\n            .maybeAppendByClassName(CLASS_NAMES.iconRect, 'rect')\n            .styles(__assign(__assign({}, iconStyle), { width: width, height: height, radius: radius, x: x - width / 2, y: y - height / 2, transformOrigin: 'center' }));\n        var x1 = x + (1 / 3) * width - width / 2;\n        var x2 = x + (2 / 3) * width - width / 2;\n        var y1 = y + (1 / 4) * height - height / 2;\n        var y2 = y + (3 / 4) * height - height / 2;\n        rect.maybeAppendByClassName(\"\".concat(CLASS_NAMES.iconLine, \"-1\"), 'line').styles(__assign({ x1: x1, x2: x1, y1: y1, y2: y2 }, iconStyle));\n        rect.maybeAppendByClassName(\"\".concat(CLASS_NAMES.iconLine, \"-2\"), 'line').styles(__assign({ x1: x2, x2: x2, y1: y1, y2: y2 }, iconStyle));\n        if (orientation === 'vertical')\n            rect.node().style.transform = 'rotate(90)';\n    };\n    return HandleIcon;\n}(Component));\nvar Handle = /** @class */ (function (_super) {\n    __extends(Handle, _super);\n    function Handle(options) {\n        return _super.call(this, options, HANDLE_DEFAULT_CFG) || this;\n    }\n    Handle.prototype.renderLabel = function (container) {\n        var _this = this;\n        var _a = this.attributes, x = _a.x, y = _a.y, showLabel = _a.showLabel;\n        var _b = subStyleProps(this.attributes, 'label'), _c = _b.x, labelX = _c === void 0 ? 0 : _c, _d = _b.y, labelY = _d === void 0 ? 0 : _d, transform = _b.transform, transformOrigin = _b.transformOrigin, style = __rest(_b, [\"x\", \"y\", \"transform\", \"transformOrigin\"]);\n        var _e = __read(splitStyle(style, []), 2), labelStyle = _e[0], groupStyle = _e[1];\n        var labelGroup = select(container).maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').styles(groupStyle);\n        // @ts-ignore\n        var _f = __assign(__assign({}, HANDLE_LABEL_DEFAULT_CFG), labelStyle), text = _f.text, rest = __rest(_f, [\"text\"]);\n        ifShow(!!showLabel, labelGroup, function (group) {\n            _this.label = group.maybeAppendByClassName(CLASS_NAMES.label, 'text').styles(__assign(__assign({}, rest), { x: x + labelX, y: y + labelY, transform: transform, transformOrigin: transformOrigin, text: \"\".concat(text) }));\n            /** avoid trigger event on label */\n            _this.label.on('mousedown', function (e) {\n                e.stopPropagation();\n            });\n            _this.label.on('touchstart', function (e) {\n                e.stopPropagation();\n            });\n        });\n    };\n    Handle.prototype.renderIcon = function (container) {\n        var _a = this.attributes, x = _a.x, y = _a.y, orientation = _a.orientation, type = _a.type;\n        var iconStyle = __assign(__assign({ x: x, y: y, orientation: orientation }, HANDLE_ICON_DEFAULT_CFG), subStyleProps(this.attributes, 'icon'));\n        var _b = this.attributes.iconShape, iconShape = _b === void 0 ? function () { return new HandleIcon({ style: iconStyle }); } : _b;\n        var iconGroup = select(container).maybeAppendByClassName(CLASS_NAMES.iconGroup, 'g');\n        iconGroup\n            .selectAll(CLASS_NAMES.icon.class)\n            .data([iconShape])\n            .join(function (enter) {\n            return enter\n                .append(typeof iconShape === 'string' ? iconShape : function () { return iconShape(type); })\n                .attr('className', CLASS_NAMES.icon.name);\n        }, function (update) { return update.update(iconStyle); }, function (exit) { return exit.remove(); });\n    };\n    Handle.prototype.render = function (attributes, container) {\n        this.renderIcon(container);\n        this.renderLabel(container);\n    };\n    return Handle;\n}(Component));\nexport { Handle };\n//# sourceMappingURL=handle.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { deepMix } from '@antv/util';\nimport { DisplayObject, Group } from '../../shapes';\nimport { deepAssign, select } from '../../util';\nvar Columns = /** @class */ (function (_super) {\n    __extends(Columns, _super);\n    function Columns(_a) {\n        var _this = this;\n        var style = _a.style, rest = __rest(_a, [\"style\"]);\n        _this = _super.call(this, deepMix({}, { type: 'column' }, __assign({ style: style }, rest))) || this;\n        _this.columnsGroup = new Group({ name: 'columns' });\n        _this.appendChild(_this.columnsGroup);\n        _this.render();\n        return _this;\n    }\n    Columns.prototype.render = function () {\n        var _a = this.attributes, columns = _a.columns, x = _a.x, y = _a.y;\n        this.columnsGroup.style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n        select(this.columnsGroup)\n            .selectAll('.column')\n            .data(columns.flat())\n            .join(function (enter) {\n            return enter\n                .append('rect')\n                .attr('className', 'column')\n                .each(function (style) {\n                this.attr(style);\n            });\n        }, function (update) {\n            return update.each(function (style) {\n                this.attr(style);\n            });\n        }, function (exit) { return exit.remove(); });\n    };\n    Columns.prototype.update = function (attr) {\n        this.attr(deepAssign({}, this.attributes, attr));\n        this.render();\n    };\n    Columns.prototype.clear = function () {\n        this.removeChildren();\n    };\n    return Columns;\n}(DisplayObject));\nexport { Columns };\n//# sourceMappingURL=columns.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { deepMix } from '@antv/util';\nimport { DisplayObject, Group } from '../../shapes';\nimport { deepAssign, select } from '../../util';\nvar Lines = /** @class */ (function (_super) {\n    __extends(Lines, _super);\n    function Lines(_a) {\n        var _this = this;\n        var style = _a.style, rest = __rest(_a, [\"style\"]);\n        _this = _super.call(this, deepMix({}, { type: 'lines' }, __assign({ style: style }, rest))) || this;\n        _this.linesGroup = _this.appendChild(new Group());\n        _this.areasGroup = _this.appendChild(new Group());\n        _this.render();\n        return _this;\n    }\n    Lines.prototype.render = function () {\n        var _a = this.attributes, lines = _a.lines, areas = _a.areas, x = _a.x, y = _a.y;\n        this.style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n        if (lines)\n            this.renderLines(lines);\n        if (areas)\n            this.renderAreas(areas);\n    };\n    Lines.prototype.clear = function () {\n        this.linesGroup.removeChildren();\n        this.areasGroup.removeChildren();\n    };\n    Lines.prototype.update = function (attr) {\n        this.attr(deepAssign({}, this.attributes, attr));\n        this.render();\n    };\n    Lines.prototype.renderLines = function (lines) {\n        select(this.linesGroup)\n            .selectAll('.line')\n            .data(lines)\n            .join(function (enter) {\n            return enter\n                .append('path')\n                .attr('className', 'line')\n                .each(function (style) {\n                this.attr(style);\n            });\n        }, function (update) {\n            return update.each(function (style) {\n                this.attr(style);\n            });\n        }, function (exit) { return exit.remove(); });\n    };\n    Lines.prototype.renderAreas = function (areas) {\n        select(this.linesGroup)\n            .selectAll('.area')\n            .data(areas)\n            .join(function (enter) {\n            return enter\n                .append('path')\n                .attr('className', 'area')\n                .each(function (style) {\n                this.attr(style);\n            });\n        }, function (update) {\n            return update.each(function (style) {\n                this.style(style);\n            });\n        }, function (exit) { return exit.remove(); });\n    };\n    return Lines;\n}(DisplayObject));\nexport { Lines };\n//# sourceMappingURL=lines.js.map","import { __read } from \"tslib\";\nimport { add, sub, min as _min, max as _max, scale, distance } from './matrix';\nfunction smoothBezier(points, smooth, isLoop, constraint) {\n    var _a;\n    var cps = [];\n    var hasConstraint = !!constraint;\n    var prevPoint;\n    var nextPoint;\n    var min = [Infinity, Infinity];\n    var max = [-Infinity, -Infinity];\n    var nextCp0;\n    var cp1;\n    var cp0;\n    if (hasConstraint) {\n        _a = __read(constraint, 2), min = _a[0], max = _a[1];\n        for (var i = 0, l = points.length; i < l; i += 1) {\n            var point = points[i];\n            min = _min(min, point);\n            max = _max(max, point);\n        }\n    }\n    for (var i = 0, len = points.length; i < len; i += 1) {\n        var point = points[i];\n        if (i === 0 && !isLoop) {\n            cp0 = point;\n        }\n        else if (i === len - 1 && !isLoop) {\n            cp1 = point;\n            cps.push(cp0);\n            cps.push(cp1);\n        }\n        else {\n            var prevIdx = [i ? i - 1 : len - 1, i - 1][isLoop ? 0 : 1];\n            prevPoint = points[prevIdx];\n            nextPoint = points[isLoop ? (i + 1) % len : i + 1];\n            var v = [0, 0];\n            v = sub(nextPoint, prevPoint);\n            v = scale(v, smooth);\n            var d0 = distance(point, prevPoint);\n            var d1 = distance(point, nextPoint);\n            var sum = d0 + d1;\n            if (sum !== 0) {\n                d0 /= sum;\n                d1 /= sum;\n            }\n            var v1 = scale(v, -d0);\n            var v2 = scale(v, d1);\n            cp1 = add(point, v1);\n            nextCp0 = add(point, v2);\n            // \n            nextCp0 = _min(nextCp0, _max(nextPoint, point));\n            nextCp0 = _max(nextCp0, _min(nextPoint, point));\n            //  cp1 \n            v1 = sub(nextCp0, point);\n            v1 = scale(v1, -d0 / d1);\n            cp1 = add(point, v1);\n            // \n            cp1 = _min(cp1, _max(prevPoint, point));\n            cp1 = _max(cp1, _min(prevPoint, point));\n            //  nextCp0 \n            v2 = sub(point, cp1);\n            v2 = scale(v2, d1 / d0);\n            nextCp0 = add(point, v2);\n            if (hasConstraint) {\n                cp1 = _max(cp1, min);\n                cp1 = _min(cp1, max);\n                nextCp0 = _max(nextCp0, min);\n                nextCp0 = _min(nextCp0, max);\n            }\n            cps.push(cp0);\n            cps.push(cp1);\n            cp0 = nextCp0;\n        }\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n}\n/**\n * create bezier spline from catmull rom spline\n * @param {Array} crp Catmull Rom Points\n * @param {boolean} z Spline is loop\n * @param {Array} constraint Constraint\n */\nexport function catmullRom2Bezier(crp, z, constraint) {\n    var _a;\n    if (z === void 0) { z = false; }\n    if (constraint === void 0) { constraint = [\n        [0, 0],\n        [1, 1],\n    ]; }\n    var isLoop = !!z;\n    var pointList = [];\n    for (var i = 0, l = crp.length; i < l; i += 2) {\n        pointList.push([crp[i], crp[i + 1]]);\n    }\n    var controlPointList = smoothBezier(pointList, 0.4, isLoop, constraint);\n    var len = pointList.length;\n    var d1 = [];\n    var cp1;\n    var cp2;\n    var p;\n    for (var i = 0; i < len - 1; i += 1) {\n        cp1 = controlPointList[i * 2];\n        cp2 = controlPointList[i * 2 + 1];\n        p = pointList[i + 1];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n    }\n    if (isLoop) {\n        cp1 = controlPointList[len];\n        cp2 = controlPointList[len + 1];\n        _a = __read(pointList, 1), p = _a[0];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n    }\n    return d1;\n}\n//# sourceMappingURL=path.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { clone, isEqual, clamp } from '@antv/util';\nimport { catmullRom2Bezier } from '../../util';\n/**\n * xy\n */\nexport function dataToLines(data, scales) {\n    var _a;\n    var x = scales.x, y = scales.y;\n    var _b = __read((y.getOptions().range || [0, 0]), 2), max = _b[0], min = _b[1];\n    if (min > max)\n        _a = __read([max, min], 2), min = _a[0], max = _a[1];\n    return data.map(function (points) {\n        var lines = points.map(function (val, idx) {\n            return [x.map(idx), clamp(y.map(val), min, max)];\n        });\n        return lines;\n    });\n}\n/**\n * path\n */\nexport function lineToLinePath(line, reverse) {\n    if (reverse === void 0) { reverse = false; }\n    var M = reverse ? line.length - 1 : 0;\n    var linePath = line.map(function (point, idx) { return __spreadArray([idx === M ? 'M' : 'L'], __read(point), false); });\n    return reverse ? linePath.reverse() : linePath;\n}\n/**\n * path\n * @param points \n * @param reverse \n */\nexport function lineToCurvePath(line, reverse) {\n    if (reverse === void 0) { reverse = false; }\n    if (line.length <= 2) {\n        return lineToLinePath(line);\n    }\n    var data = [];\n    var len = line.length;\n    for (var idx = 0; idx < len; idx += 1) {\n        var point = reverse ? line[len - idx - 1] : line[idx];\n        if (!isEqual(point, data.slice(-2))) {\n            data.push.apply(data, __spreadArray([], __read(point), false));\n        }\n    }\n    var path = catmullRom2Bezier(data, false);\n    if (reverse) {\n        path.unshift(__spreadArray(['M'], __read(line[len - 1]), false));\n    }\n    else {\n        path.unshift(__spreadArray(['M'], __read(line[0]), false));\n    }\n    return path;\n}\n/**\n * baselinepath\n */\nexport function closePathByBaseLine(path, width, baseline) {\n    var closedPath = clone(path);\n    closedPath.push(['L', width, baseline], ['L', 0, baseline], ['Z']);\n    return closedPath;\n}\n/**\n * path\n * \n */\nexport function linesToAreaPaths(lines, smooth, width, baseline) {\n    return lines.map(function (line) {\n        return closePathByBaseLine(smooth ? lineToCurvePath(line) : lineToLinePath(line), width, baseline);\n    });\n}\n/**\n * \n */\nexport function linesToStackAreaPaths(lines, width, baseline) {\n    var paths = [];\n    for (var idx = lines.length - 1; idx >= 0; idx -= 1) {\n        var currLine = lines[idx];\n        var currCurvePath = lineToLinePath(currLine);\n        var path = void 0;\n        if (idx === 0) {\n            // y=0\n            path = closePathByBaseLine(currCurvePath, width, baseline);\n        }\n        else {\n            // \n            var belowLine = lines[idx - 1];\n            var belowCurvePath = lineToLinePath(belowLine, true);\n            belowCurvePath[0][0] = 'L';\n            // \n            path = __spreadArray(__spreadArray(__spreadArray([], __read(currCurvePath), false), __read(belowCurvePath), false), [['Z']], false);\n        }\n        paths.push(path);\n    }\n    return paths;\n}\n/**\n * \n */\nexport function linesToStackCurveAreaPaths(lines, width, baseline) {\n    var paths = [];\n    for (var idx = lines.length - 1; idx >= 0; idx -= 1) {\n        var currLine = lines[idx];\n        var currCurvePath = lineToCurvePath(currLine);\n        var path = void 0;\n        if (idx === 0) {\n            // y=0\n            path = closePathByBaseLine(currCurvePath, width, baseline);\n        }\n        else {\n            // \n            var belowLine = lines[idx - 1];\n            var belowCurvePath = lineToCurvePath(belowLine, true);\n            /**\n             * \n             *  M C C C C C\n             *  A  ->  B\n             *          \n             *  D  <-  C\n             *  C C C C C M\n             *\n             */\n            var A = currLine[0];\n            // const B = currLine[currLine.length - 1];\n            // const C = belowLine[belowLine.length - 1];\n            // const D = belowLine[0];\n            //  M X Y  L X Y\n            belowCurvePath[0][0] = 'L';\n            // \n            path = __spreadArray(__spreadArray(__spreadArray([], __read(currCurvePath), false), __read(belowCurvePath), false), [__spreadArray(['M'], __read(A), false), ['Z']], false);\n        }\n        paths.push(path);\n    }\n    return paths;\n}\n//# sourceMappingURL=path.js.map","import isArray from './is-array';\nimport isFunction from './is-function';\n/**\n * @param {Array} arr The array to iterate over.\n * @param {Function} [fn] The iteratee invoked per element.\n * @return {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nexport default (function (arr, fn) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    var minItem;\n    var min = Infinity;\n    for (var i = 0; i < arr.length; i++) {\n        var item = arr[i];\n        var v = isFunction(fn) ? fn(item) : item[fn];\n        if (v < min) {\n            minItem = item;\n            min = v;\n        }\n    }\n    return minItem;\n});\n//# sourceMappingURL=min-by.js.map","import isArray from './is-array';\nimport isFunction from './is-function';\n/**\n * @param {Array} arr The array to iterate over.\n * @param {Function} [fn] The iteratee invoked per element.\n * @return {*} Returns the maximum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * maxBy(objects, function(o) { return o.n; });\n * // => { 'n': 2 }\n *\n * maxBy(objects, 'n');\n * // => { 'n': 2 }\n */\nexport default (function (arr, fn) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    var maxItem;\n    var max = -Infinity;\n    for (var i = 0; i < arr.length; i++) {\n        var item = arr[i];\n        var v = isFunction(fn) ? fn(item) : item[fn];\n        if (v > max) {\n            maxItem = item;\n            max = v;\n        }\n    }\n    return maxItem;\n});\n//# sourceMappingURL=max-by.js.map","import { __read } from \"tslib\";\nimport { clone, min, minBy, max, maxBy } from '@antv/util';\n/**\n * \n */\nexport function getRange(data) {\n    if (data.length === 0)\n        return [0, 0];\n    return [\n        min(minBy(data, function (arr) { return min(arr) || 0; })),\n        max(maxBy(data, function (arr) { return max(arr) || 0; })),\n    ];\n}\n/**\n * \n */\nexport function getStackedData(_) {\n    var data = clone(_);\n    // \n    var datumLen = data[0].length;\n    // \n    var _a = __read([Array(datumLen).fill(0), Array(datumLen).fill(0)], 2), positivePrev = _a[0], negativePrev = _a[1];\n    for (var i = 0; i < data.length; i += 1) {\n        var datum = data[i];\n        for (var j = 0; j < datumLen; j += 1) {\n            if (datum[j] >= 0) {\n                datum[j] += positivePrev[j];\n                positivePrev[j] = datum[j];\n            }\n            else {\n                datum[j] += negativePrev[j];\n                negativePrev[j] = datum[j];\n            }\n        }\n    }\n    return data;\n}\n//# sourceMappingURL=utils.js.map","import { __assign, __extends, __read } from \"tslib\";\nimport { Band, Linear } from '@antv/scale';\nimport { clone, isArray, isFunction, isNumber } from '@antv/util';\nimport { Component } from '../../core';\nimport { maybeAppend, select, subStyleProps } from '../../util';\nimport { Columns } from './columns';\nimport { Lines } from './lines';\nimport { dataToLines, lineToCurvePath, lineToLinePath, linesToAreaPaths, linesToStackAreaPaths, linesToStackCurveAreaPaths, } from './path';\nimport { getRange, getStackedData } from './utils';\nvar Sparkline = /** @class */ (function (_super) {\n    __extends(Sparkline, _super);\n    function Sparkline(options) {\n        return _super.call(this, options, {\n            type: 'line',\n            x: 0,\n            y: 0,\n            width: 200,\n            height: 20,\n            isStack: false,\n            color: ['#83daad', '#edbf45', '#d2cef9', '#e290b3', '#6f63f4'],\n            smooth: true,\n            lineLineWidth: 1,\n            areaOpacity: 0,\n            isGroup: false,\n            columnLineWidth: 1,\n            columnStroke: '#fff',\n            scale: 1,\n            spacing: 0,\n        }) || this;\n    }\n    Object.defineProperty(Sparkline.prototype, \"rawData\", {\n        /**\n         * data\n         * \n         */\n        get: function () {\n            var rawData = this.attributes.data;\n            if (!rawData || (rawData === null || rawData === void 0 ? void 0 : rawData.length) === 0)\n                return [[]];\n            var data = clone(rawData);\n            // number[] -> number[][]\n            return isNumber(data[0]) ? [data] : data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"data\", {\n        get: function () {\n            if (this.attributes.isStack)\n                return getStackedData(this.rawData);\n            return this.rawData;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"scales\", {\n        get: function () {\n            return this.createScales(this.data);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"baseline\", {\n        /**\n         *  0\n         */\n        get: function () {\n            var y = this.scales.y;\n            var _a = __read(y.getOptions().domain || [0, 0], 2), y1 = _a[0], y2 = _a[1];\n            if (y2 < 0) {\n                return y.map(y2);\n            }\n            return y.map(y1 < 0 ? 0 : y1);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"containerShape\", {\n        get: function () {\n            var _a = this.attributes, width = _a.width, height = _a.height;\n            return { width: width, height: height };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"linesStyle\", {\n        get: function () {\n            var _this = this;\n            var _a = this.attributes, type = _a.type, isStack = _a.isStack, smooth = _a.smooth;\n            if (type !== 'line')\n                throw new Error('linesStyle can only be used in line type');\n            var areaStyle = subStyleProps(this.attributes, 'area');\n            var lineStyle = subStyleProps(this.attributes, 'line');\n            var width = this.containerShape.width;\n            var data = this.data;\n            if (data[0].length === 0)\n                return { lines: [], areas: [] };\n            var _b = this.scales, x = _b.x, y = _b.y;\n            // Path\n            var lines = dataToLines(data, { type: 'line', x: x, y: y });\n            // path\n            var areas = [];\n            if (areaStyle) {\n                var baseline = this.baseline;\n                if (isStack) {\n                    areas = smooth\n                        ? linesToStackCurveAreaPaths(lines, width, baseline)\n                        : linesToStackAreaPaths(lines, width, baseline);\n                }\n                else {\n                    areas = linesToAreaPaths(lines, smooth, width, baseline);\n                }\n            }\n            return {\n                lines: lines.map(function (line, idx) {\n                    return __assign({ stroke: _this.getColor(idx), d: smooth ? lineToCurvePath(line) : lineToLinePath(line) }, lineStyle);\n                }),\n                areas: areas.map(function (path, idx) {\n                    return __assign({ d: path, fill: _this.getColor(idx) }, areaStyle);\n                }),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"columnsStyle\", {\n        get: function () {\n            var _this = this;\n            var columnStyle = subStyleProps(this.attributes, 'column');\n            var _a = this.attributes, isStack = _a.isStack, type = _a.type, scale = _a.scale;\n            if (type !== 'column')\n                throw new Error('columnsStyle can only be used in column type');\n            var height = this.containerShape.height;\n            var data = this.rawData;\n            if (!data)\n                return { columns: [] };\n            if (isStack)\n                data = getStackedData(data);\n            var _b = this.createScales(data), x = _b.x, y = _b.y;\n            var _c = __read(getRange(data), 2), minVal = _c[0], maxVal = _c[1];\n            var heightScale = new Linear({\n                domain: [0, maxVal - (minVal > 0 ? 0 : minVal)],\n                range: [0, height * scale],\n            });\n            var bandWidth = x.getBandWidth();\n            var rawData = this.rawData;\n            return {\n                columns: data.map(function (column, i) {\n                    return column.map(function (val, j) {\n                        var barWidth = bandWidth / data.length;\n                        var getShape = function () {\n                            return {\n                                x: x.map(j) + barWidth * i,\n                                y: val >= 0 ? y.map(val) : y.map(0),\n                                width: barWidth,\n                                height: heightScale.map(Math.abs(val)),\n                            };\n                        };\n                        var getStackShape = function () {\n                            return {\n                                x: x.map(j),\n                                y: y.map(val),\n                                width: bandWidth,\n                                height: heightScale.map(rawData[i][j]),\n                            };\n                        };\n                        return __assign(__assign({ fill: _this.getColor(i) }, columnStyle), (isStack ? getStackShape() : getShape()));\n                    });\n                }),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Sparkline.prototype.render = function (attributes, container) {\n        maybeAppend(container, '.container', 'rect').attr('className', 'container').node();\n        var type = attributes.type, x = attributes.x, y = attributes.y;\n        var className = \"spark\".concat(type);\n        var style = __assign({ x: x, y: y }, (type === 'line' ? this.linesStyle : this.columnsStyle));\n        select(container)\n            .selectAll('.spark')\n            .data([type])\n            .join(function (enter) {\n            return enter\n                .append(function (type) {\n                if (type === 'line')\n                    return new Lines({ className: className, style: style });\n                return new Columns({ className: className, style: style });\n            })\n                .attr('className', \"spark \".concat(className));\n        }, function (update) { return update.update(style); }, function (exit) { return exit.remove(); });\n    };\n    /**\n     * color\n     */\n    Sparkline.prototype.getColor = function (index) {\n        var color = this.attributes.color;\n        if (isArray(color)) {\n            return color[index % color.length];\n        }\n        if (isFunction(color)) {\n            return color.call(null, index);\n        }\n        return color;\n    };\n    /**\n     * scale\n     */\n    Sparkline.prototype.createScales = function (data) {\n        var _a, _b;\n        var _c = this.attributes, type = _c.type, scale = _c.scale, _d = _c.range, range = _d === void 0 ? [] : _d, spacing = _c.spacing;\n        var _e = this.containerShape, width = _e.width, height = _e.height;\n        var _f = __read(getRange(data), 2), minVal = _f[0], maxVal = _f[1];\n        var yScale = new Linear({\n            domain: [(_a = range[0]) !== null && _a !== void 0 ? _a : minVal, (_b = range[1]) !== null && _b !== void 0 ? _b : maxVal],\n            range: [height, height * (1 - scale)],\n        });\n        if (type === 'line') {\n            return {\n                type: type,\n                x: new Linear({\n                    domain: [0, data[0].length - 1],\n                    range: [0, width],\n                }),\n                y: yScale,\n            };\n        }\n        return {\n            type: type,\n            x: new Band({\n                domain: data[0].map(function (val, idx) { return idx; }),\n                range: [0, width],\n                paddingInner: spacing,\n                paddingOuter: spacing / 2,\n                align: 0.5,\n            }),\n            y: yScale,\n        };\n    };\n    Sparkline.tag = 'sparkline';\n    return Sparkline;\n}(Component));\nexport { Sparkline };\n//# sourceMappingURL=index.js.map","import { __assign, __extends, __read } from \"tslib\";\nimport { CustomEvent } from '@antv/g';\nimport { clamp } from '@antv/util';\nimport { transition } from '../../animation';\nimport { Component } from '../../core';\nimport { Text } from '../../shapes';\nimport { getEventPos, ifShow, parseSeriesAttr, select, subStyleProps, superStyleProps, toPrecision } from '../../util';\nimport { Sparkline } from '../sparkline';\nimport { CLASS_NAMES, HANDLE_DEFAULT_CFG, HANDLE_ICON_DEFAULT_CFG, HANDLE_LABEL_DEFAULT_CFG } from './constant';\nimport { Handle } from './handle';\nvar Slider = /** @class */ (function (_super) {\n    __extends(Slider, _super);\n    function Slider(options) {\n        var _this = _super.call(this, options, __assign(__assign(__assign({ x: 0, y: 0, animate: { duration: 100, fill: 'both' }, brushable: true, formatter: function (val) { return val.toString(); }, handleSpacing: 2, orientation: 'horizontal', padding: 0, autoFitLabel: true, scrollable: true, selectionFill: '#5B8FF9', selectionFillOpacity: 0.45, selectionZIndex: 2, showHandle: true, showLabel: true, slidable: true, trackFill: '#416180', trackLength: 200, trackOpacity: 0.05, trackSize: 20, trackZIndex: -1, values: [0, 1], type: 'range', selectionType: 'select', handleIconOffset: 0 }, superStyleProps(HANDLE_DEFAULT_CFG, 'handle')), superStyleProps(HANDLE_ICON_DEFAULT_CFG, 'handleIcon')), superStyleProps(HANDLE_LABEL_DEFAULT_CFG, 'handleLabel'))) || this;\n        _this.range = [0, 1];\n        _this.onDragStart = function (target) { return function (e) {\n            e.stopPropagation();\n            _this.target = target;\n            _this.prevPos = _this.getOrientVal(getEventPos(e));\n            var _a = _this.availableSpace, x = _a.x, y = _a.y;\n            var _b = _this.getBBox(), X = _b.x, Y = _b.y;\n            _this.selectionStartPos = _this.getRatio(_this.prevPos - _this.getOrientVal([x, y]) - _this.getOrientVal([+X, +Y]));\n            _this.selectionWidth = 0;\n            document.addEventListener('pointermove', _this.onDragging);\n            document.addEventListener('pointerup', _this.onDragEnd);\n        }; };\n        _this.onDragging = function (e) {\n            var _a = _this.attributes, slidable = _a.slidable, brushable = _a.brushable, type = _a.type;\n            e.stopPropagation();\n            var currPos = _this.getOrientVal(getEventPos(e));\n            var diffPos = currPos - _this.prevPos;\n            if (!diffPos)\n                return;\n            var deltaVal = _this.getRatio(diffPos);\n            switch (_this.target) {\n                case 'start':\n                    if (slidable)\n                        _this.setValuesOffset(deltaVal);\n                    break;\n                case 'end':\n                    if (slidable)\n                        _this.setValuesOffset(0, deltaVal);\n                    break;\n                case 'selection':\n                    if (slidable)\n                        _this.setValuesOffset(deltaVal, deltaVal);\n                    break;\n                case 'track':\n                    if (!brushable)\n                        return;\n                    // \n                    _this.selectionWidth += deltaVal;\n                    if (type === 'range') {\n                        _this.innerSetValues([_this.selectionStartPos, _this.selectionStartPos + _this.selectionWidth].sort(), true);\n                    }\n                    else\n                        _this.innerSetValues([0, _this.selectionStartPos + _this.selectionWidth], true);\n                    break;\n                default:\n                    break;\n            }\n            _this.prevPos = currPos;\n        };\n        _this.onDragEnd = function () {\n            document.removeEventListener('pointermove', _this.onDragging);\n            document.removeEventListener('pointermove', _this.onDragging);\n            document.removeEventListener('pointerup', _this.onDragEnd);\n            _this.target = '';\n            //  handle \n            _this.updateHandlesPosition(false);\n        };\n        _this.onValueChange = function (oldValue) {\n            var _a = _this.attributes, onChange = _a.onChange, type = _a.type;\n            var internalOldValue = type === 'range' ? oldValue : oldValue[1];\n            var value = type === 'range' ? _this.getValues() : _this.getValues()[1];\n            var evt = new CustomEvent('valuechange', {\n                detail: { oldValue: internalOldValue, value: value },\n            });\n            _this.dispatchEvent(evt);\n            onChange === null || onChange === void 0 ? void 0 : onChange(value);\n        };\n        _this.selectionStartPos = 0;\n        _this.selectionWidth = 0;\n        _this.prevPos = 0;\n        _this.target = '';\n        return _this;\n    }\n    Object.defineProperty(Slider.prototype, \"values\", {\n        get: function () {\n            return this.attributes.values;\n        },\n        set: function (values) {\n            this.attributes.values = this.clampValues(values);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Slider.prototype, \"sparklineStyle\", {\n        get: function () {\n            var orientation = this.attributes.orientation;\n            if (orientation !== 'horizontal')\n                return null;\n            var attr = subStyleProps(this.attributes, 'sparkline');\n            return __assign(__assign({ zIndex: 0 }, this.availableSpace), attr);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Slider.prototype, \"shape\", {\n        get: function () {\n            var _a = this.attributes, trackLength = _a.trackLength, trackSize = _a.trackSize;\n            var _b = __read(this.getOrientVal([\n                [trackLength, trackSize],\n                [trackSize, trackLength],\n            ]), 2), width = _b[0], height = _b[1];\n            return { width: width, height: height };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Slider.prototype, \"availableSpace\", {\n        get: function () {\n            var _a = this.attributes, x = _a.x, y = _a.y, padding = _a.padding;\n            var _b = __read(parseSeriesAttr(padding), 4), top = _b[0], right = _b[1], bottom = _b[2], left = _b[3];\n            var _c = this.shape, width = _c.width, height = _c.height;\n            return {\n                x: left,\n                y: top,\n                width: width - (left + right),\n                height: height - (top + bottom),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Slider.prototype.getValues = function () {\n        return this.values;\n    };\n    /**  */\n    Slider.prototype.setValues = function (values, animate) {\n        if (values === void 0) { values = [0, 0]; }\n        if (animate === void 0) { animate = false; }\n        this.attributes.values = values;\n        var animation = animate === false ? false : this.attributes.animate;\n        this.updateSelectionArea(animation);\n        this.updateHandlesPosition(animation);\n    };\n    Slider.prototype.updateSelectionArea = function (animation) {\n        var newSelectionArea = this.calcSelectionArea();\n        this.foregroundGroup.selectAll(CLASS_NAMES.selection.class).each(function (datum, index) {\n            transition(this, newSelectionArea[index], animation);\n        });\n    };\n    Slider.prototype.updateHandlesPosition = function (animation) {\n        if (!this.attributes.showHandle)\n            return;\n        this.startHandle && transition(this.startHandle, this.getHandleStyle('start'), animation);\n        this.endHandle && transition(this.endHandle, this.getHandleStyle('end'), animation);\n    };\n    Slider.prototype.innerSetValues = function (values, trigger) {\n        if (values === void 0) { values = [0, 0]; }\n        if (trigger === void 0) { trigger = false; }\n        var oldValues = this.values;\n        var newValues = this.clampValues(values);\n        this.attributes.values = newValues;\n        this.setValues(newValues);\n        if (trigger) {\n            this.onValueChange(oldValues);\n        }\n    };\n    Slider.prototype.renderTrack = function (container) {\n        var _a = this.attributes, x = _a.x, y = _a.y;\n        var style = subStyleProps(this.attributes, 'track');\n        this.trackShape = select(container)\n            .maybeAppendByClassName(CLASS_NAMES.track, 'rect')\n            .styles(__assign(__assign({ x: x, y: y }, this.shape), style));\n    };\n    Slider.prototype.renderBrushArea = function (container) {\n        var _a = this.attributes, x = _a.x, y = _a.y, brushable = _a.brushable;\n        this.brushArea = select(container)\n            .maybeAppendByClassName(CLASS_NAMES.brushArea, 'rect')\n            .styles(__assign({ x: x, y: y, fill: 'transparent', cursor: brushable ? 'crosshair' : 'default' }, this.shape));\n    };\n    Slider.prototype.renderSparkline = function (container) {\n        var _this = this;\n        var _a = this.attributes, x = _a.x, y = _a.y, orientation = _a.orientation;\n        var sparklineGroup = select(container).maybeAppendByClassName(CLASS_NAMES.sparklineGroup, 'g');\n        ifShow(orientation === 'horizontal', sparklineGroup, function (group) {\n            var style = __assign(__assign({}, _this.sparklineStyle), { x: x, y: y });\n            group.maybeAppendByClassName(CLASS_NAMES.sparkline, function () { return new Sparkline({ style: style }); }).update(style);\n        });\n    };\n    Slider.prototype.renderHandles = function () {\n        var _this = this;\n        var _a;\n        var _b = this.attributes, showHandle = _b.showHandle, type = _b.type;\n        var availableHandle = type === 'range' ? ['start', 'end'] : ['end'];\n        var data = showHandle ? availableHandle : [];\n        var that = this;\n        (_a = this.foregroundGroup) === null || _a === void 0 ? void 0 : _a.selectAll(CLASS_NAMES.handle.class).data(data.map(function (type) { return ({ type: type }); }), function (d) { return d.type; }).join(function (enter) {\n            return enter\n                .append(function (_a) {\n                var type = _a.type;\n                return new Handle({ style: _this.getHandleStyle(type) });\n            })\n                .each(function (_a) {\n                var type = _a.type;\n                this.attr('class', \"\".concat(CLASS_NAMES.handle.name, \" \").concat(type, \"-handle\"));\n                var name = \"\".concat(type, \"Handle\");\n                that[name] = this;\n                this.addEventListener('pointerdown', that.onDragStart(type));\n            });\n        }, function (update) {\n            return update.each(function (_a) {\n                var type = _a.type;\n                this.update(that.getHandleStyle(type));\n            });\n        }, function (exit) {\n            return exit\n                .each(function (_a) {\n                var type = _a.type;\n                var name = \"\".concat(type, \"Handle\");\n                that[name] = undefined;\n            })\n                .remove();\n        });\n    };\n    Slider.prototype.renderSelection = function (container) {\n        var _a = this.attributes, x = _a.x, y = _a.y, type = _a.type, selectionType = _a.selectionType;\n        this.foregroundGroup = select(container).maybeAppendByClassName(CLASS_NAMES.foreground, 'g');\n        // value  slider \n        var selectionStyle = subStyleProps(this.attributes, 'selection');\n        var applyStyle = function (selection) {\n            return selection\n                .style('visibility', function (d) { return (d.show ? 'visible' : 'hidden'); })\n                .style('cursor', function (d) {\n                if (selectionType === 'select')\n                    return 'grab';\n                if (selectionType === 'invert')\n                    return 'crosshair';\n                return 'default';\n            })\n                .styles(__assign(__assign({}, selectionStyle), { transform: \"translate(\".concat(x, \", \").concat(y, \")\") }));\n        };\n        var that = this;\n        this.foregroundGroup\n            .selectAll(CLASS_NAMES.selection.class)\n            .data(type === 'value'\n            ? []\n            : this.calcSelectionArea().map(function (area, index) { return ({\n                style: __assign({}, area),\n                index: index,\n                // \n                show: selectionType === 'select' ? index === 1 : index !== 1,\n            }); }), function (d) { return d.index; })\n            .join(function (enter) {\n            return enter\n                .append('rect')\n                .attr('className', CLASS_NAMES.selection.name)\n                .call(applyStyle)\n                .each(function (datum, index) {\n                var _this = this;\n                if (index === 1) {\n                    that.selectionShape = select(this);\n                    // drag\n                    this.on('pointerdown', function (e) {\n                        _this.attr('cursor', 'grabbing');\n                        that.onDragStart('selection')(e);\n                    });\n                    // hover\n                    that.dispatchCustomEvent(this, 'pointerenter', 'selectionMouseenter');\n                    that.dispatchCustomEvent(this, 'pointerleave', 'selectionMouseleave');\n                    that.dispatchCustomEvent(this, 'click', 'selectionClick');\n                    // \n                    this.addEventListener('pointerdown', function () {\n                        _this.attr('cursor', 'grabbing');\n                    });\n                    this.addEventListener('pointerup', function () {\n                        _this.attr('cursor', 'pointer');\n                    });\n                    this.addEventListener('pointerover', function () {\n                        _this.attr('cursor', 'pointer');\n                    });\n                }\n                else {\n                    this.on('pointerdown', that.onDragStart('track'));\n                }\n            });\n        }, function (update) { return update.call(applyStyle); }, function (exit) { return exit.remove(); });\n        this.updateSelectionArea(false);\n        this.renderHandles();\n    };\n    Slider.prototype.render = function (attributes, container) {\n        this.renderTrack(container);\n        this.renderSparkline(container);\n        this.renderBrushArea(container);\n        this.renderSelection(container);\n    };\n    Slider.prototype.clampValues = function (values, precision) {\n        var _a;\n        if (precision === void 0) { precision = 4; }\n        var _b = __read(this.range, 2), min = _b[0], max = _b[1];\n        var _c = __read(this.getValues().map(function (num) { return toPrecision(num, precision); }), 2), prevStart = _c[0], prevEnd = _c[1];\n        var internalValues = Array.isArray(values) ? values : [prevStart, values !== null && values !== void 0 ? values : prevEnd];\n        var _d = __read((internalValues || [prevStart, prevEnd]).map(function (num) { return toPrecision(num, precision); }), 2), startVal = _d[0], endVal = _d[1];\n        if (this.attributes.type === 'value')\n            return [0, clamp(endVal, min, max)];\n        // startVal endVal\n        if (startVal > endVal) {\n            _a = __read([endVal, startVal], 2), startVal = _a[0], endVal = _a[1];\n        }\n        var range = endVal - startVal;\n        // \n        if (range > max - min)\n            return [min, max];\n        if (startVal < min) {\n            if (prevStart === min && prevEnd === endVal)\n                return [min, endVal];\n            return [min, range + min];\n        }\n        if (endVal > max) {\n            if (prevEnd === max && prevStart === startVal)\n                return [startVal, max];\n            return [max - range, max];\n        }\n        // \n        return [startVal, endVal];\n    };\n    /**\n     * \n     * \n     */\n    Slider.prototype.calcSelectionArea = function (values) {\n        var _a = __read(this.clampValues(values), 2), start = _a[0], end = _a[1];\n        var _b = this.availableSpace, x = _b.x, y = _b.y, width = _b.width, height = _b.height;\n        // \n        return this.getOrientVal([\n            [\n                { y: y, height: height, x: x, width: start * width },\n                { y: y, height: height, x: start * width + x, width: (end - start) * width },\n                { y: y, height: height, x: end * width, width: (1 - end) * width },\n            ],\n            [\n                { x: x, width: width, y: y, height: start * height },\n                { x: x, width: width, y: start * height + y, height: (end - start) * height },\n                { x: x, width: width, y: end * height, height: (1 - end) * height },\n            ],\n        ]);\n    };\n    /**\n     * x y\n     */\n    Slider.prototype.calcHandlePosition = function (handleType) {\n        var handleIconOffset = this.attributes.handleIconOffset;\n        var _a = this.availableSpace, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var _b = __read(this.clampValues(), 2), stVal = _b[0], endVal = _b[1];\n        var offset = handleType === 'start' ? -handleIconOffset : handleIconOffset;\n        var L = (handleType === 'start' ? stVal : endVal) * this.getOrientVal([width, height]) + offset;\n        return {\n            x: x + this.getOrientVal([L, width / 2]),\n            y: y + this.getOrientVal([height / 2, L]),\n        };\n    };\n    Slider.prototype.inferTextStyle = function (handleType) {\n        var orientation = this.attributes.orientation;\n        if (orientation === 'horizontal')\n            return {};\n        if (handleType === 'start')\n            return { transformOrigin: 'left center', transform: 'rotate(90)', textAlign: 'start' };\n        if (handleType === 'end')\n            return { transformOrigin: 'right center', transform: 'rotate(90)', textAlign: 'end' };\n        return {};\n    };\n    /**\n     * \n     * @param handleType startend\n     * @returns\n     */\n    Slider.prototype.calcHandleText = function (handleType) {\n        var _a;\n        var _b = this.attributes, type = _b.type, orientation = _b.orientation, formatter = _b.formatter, autoFitLabel = _b.autoFitLabel;\n        var handleStyle = subStyleProps(this.attributes, 'handle');\n        var labelStyle = subStyleProps(handleStyle, 'label');\n        var spacing = handleStyle.spacing;\n        var size = this.getHandleSize();\n        var values = this.clampValues();\n        var value = handleType === 'start' ? values[0] : values[1];\n        var text = formatter(value);\n        var temp = new Text({\n            style: __assign(__assign(__assign({}, labelStyle), this.inferTextStyle(handleType)), { text: text }),\n        });\n        // \n        var _c = temp.getBBox(), textWidth = _c.width, textHeight = _c.height;\n        temp.destroy();\n        if (!autoFitLabel) {\n            if (type === 'value')\n                return { text: text, x: 0, y: -textHeight - spacing };\n            var finaleWidth = spacing + size + (orientation === 'horizontal' ? textWidth / 2 : 0);\n            return _a = { text: text }, _a[orientation === 'horizontal' ? 'x' : 'y'] = handleType === 'start' ? -finaleWidth : finaleWidth, _a;\n        }\n        var x = 0;\n        var y = 0;\n        // \n        var _d = this.availableSpace, iW = _d.width, iH = _d.height;\n        var _e = this.calcSelectionArea()[1], fX = _e.x, fY = _e.y, fW = _e.width, fH = _e.height;\n        var totalSpacing = spacing + size;\n        if (orientation === 'horizontal') {\n            var finalWidth = totalSpacing + textWidth / 2;\n            if (handleType === 'start') {\n                var left = fX - totalSpacing - textWidth;\n                x = left > 0 ? -finalWidth : finalWidth;\n            }\n            else {\n                var sign = iW - fX - fW - totalSpacing > textWidth;\n                x = sign ? finalWidth : -finalWidth;\n            }\n        }\n        else {\n            var positiveSize = totalSpacing;\n            var negativeSize = textHeight + totalSpacing;\n            if (handleType === 'start') {\n                y = fY - size > textHeight ? -negativeSize : positiveSize;\n            }\n            else {\n                y = iH - (fY + fH) - size > textHeight ? negativeSize : -positiveSize;\n            }\n        }\n        return { x: x, y: y, text: text };\n    };\n    Slider.prototype.getHandleLabelStyle = function (handleType) {\n        var style = subStyleProps(this.attributes, 'handleLabel');\n        return __assign(__assign(__assign({}, style), this.calcHandleText(handleType)), this.inferTextStyle(handleType));\n    };\n    Slider.prototype.getHandleIconStyle = function () {\n        var shape = this.attributes.handleIconShape;\n        var style = subStyleProps(this.attributes, 'handleIcon');\n        var cursor = this.getOrientVal(['ew-resize', 'ns-resize']);\n        var size = this.getHandleSize();\n        return __assign({ cursor: cursor, shape: shape, size: size }, style);\n    };\n    Slider.prototype.getHandleStyle = function (handleType) {\n        var _a = this.attributes, ox = _a.x, oy = _a.y, showLabel = _a.showLabel, showLabelOnInteraction = _a.showLabelOnInteraction, orientation = _a.orientation;\n        var _b = this.calcHandlePosition(handleType), x = _b.x, y = _b.y;\n        var textStyle = this.calcHandleText(handleType);\n        var internalShowLabel = showLabel;\n        if (!showLabel && showLabelOnInteraction) {\n            if (this.target)\n                internalShowLabel = true;\n            else\n                internalShowLabel = false;\n        }\n        return __assign(__assign(__assign({}, superStyleProps(this.getHandleIconStyle(), 'icon')), superStyleProps(__assign(__assign({}, this.getHandleLabelStyle(handleType)), textStyle), 'label')), { transform: \"translate(\".concat(x + ox, \", \").concat(y + oy, \")\"), orientation: orientation, showLabel: internalShowLabel, type: handleType, zIndex: 3 });\n    };\n    Slider.prototype.getHandleSize = function () {\n        var _a = this.attributes, size = _a.handleIconSize, width = _a.width, height = _a.height;\n        if (size)\n            return size;\n        //  size  height + 4  1/ 2.4\n        return Math.floor((this.getOrientVal([+height, +width]) + 4) / 2.4);\n    };\n    Slider.prototype.getOrientVal = function (_a) {\n        var _b = __read(_a, 2), x = _b[0], y = _b[1];\n        var orientation = this.attributes.orientation;\n        return orientation === 'horizontal' ? x : y;\n    };\n    Slider.prototype.setValuesOffset = function (stOffset, endOffset, animate) {\n        if (endOffset === void 0) { endOffset = 0; }\n        if (animate === void 0) { animate = false; }\n        var type = this.attributes.type;\n        var _a = __read(this.getValues(), 2), oldStartVal = _a[0], oldEndVal = _a[1];\n        var internalStartOffset = type === 'range' ? stOffset : 0;\n        var values = [oldStartVal + internalStartOffset, oldEndVal + endOffset].sort();\n        if (animate)\n            this.setValues(values);\n        else\n            this.innerSetValues(values, true);\n    };\n    Slider.prototype.getRatio = function (val) {\n        var _a = this.availableSpace, width = _a.width, height = _a.height;\n        return val / this.getOrientVal([width, height]);\n    };\n    Slider.prototype.dispatchCustomEvent = function (target, event, name) {\n        var _this = this;\n        target.on(event, function (e) {\n            e.stopPropagation();\n            _this.dispatchEvent(new CustomEvent(name, { detail: e }));\n        });\n    };\n    Slider.prototype.bindEvents = function () {\n        // scroll \n        this.addEventListener('wheel', this.onScroll);\n        var brushArea = this.brushArea;\n        this.dispatchCustomEvent(brushArea, 'click', 'trackClick');\n        this.dispatchCustomEvent(brushArea, 'pointerenter', 'trackMouseenter');\n        this.dispatchCustomEvent(brushArea, 'pointerleave', 'trackMouseleave');\n        // Drag and brush\n        brushArea.on('pointerdown', this.onDragStart('track'));\n    };\n    Slider.prototype.onScroll = function (event) {\n        var scrollable = this.attributes.scrollable;\n        if (scrollable) {\n            var deltaX = event.deltaX, deltaY = event.deltaY;\n            var offset = deltaY || deltaX;\n            var deltaVal = this.getRatio(offset);\n            this.setValuesOffset(deltaVal, deltaVal, true);\n        }\n    };\n    Slider.tag = 'slider';\n    return Slider;\n}(Component));\nexport { Slider };\n//# sourceMappingURL=index.js.map","import { __extends, __read, __rest } from \"tslib\";\nimport { Component } from '../../core';\nimport { BBox, classNames, ifShow, parseSeriesAttr, select, splitStyle } from '../../util';\nvar CLASS_NAMES = classNames({\n    text: 'text',\n}, 'title');\n/**\n * @example\n * lt -> ['l', 't']\n * left-top -> ['l', 't']\n * inner -> i\n */\nexport function parsePosition(position) {\n    if (!/\\S+-\\S+/g.test(position))\n        return position.length > 2 ? [position[0]] : position.split('');\n    return position.split('-').map(function (str) {\n        return str[0];\n    });\n}\n/**\n * calculate the actual bbox of the element with title\n * @example a legend with width x, height y, but the real bbox is x1 < x, y1 < y\n */\nexport function getBBox(title, content) {\n    var _a = title.attributes, position = _a.position, spacing = _a.spacing, inset = _a.inset, text = _a.text;\n    var titleBBox = title.getBBox();\n    var contentBBox = content.getBBox();\n    var pos = parsePosition(position);\n    var _b = __read(parseSeriesAttr(text ? spacing : 0), 4), spacingTop = _b[0], spacingRight = _b[1], spacingBottom = _b[2], spacingLeft = _b[3];\n    var _c = __read(parseSeriesAttr(inset), 4), insetTop = _c[0], insetRight = _c[1], insetBottom = _c[2], insetLeft = _c[3];\n    var _d = __read([spacingLeft + spacingRight, spacingTop + spacingBottom], 2), spacingWidth = _d[0], spacingHeight = _d[1];\n    var _e = __read([insetLeft + insetRight, insetTop + insetBottom], 2), insetWidth = _e[0], insetHeight = _e[1];\n    //  pos \n    // \n    if (pos[0] === 'l') {\n        return new BBox(titleBBox.x, titleBBox.y, contentBBox.width + titleBBox.width + spacingWidth + insetWidth, Math.max(contentBBox.height + insetHeight, titleBBox.height));\n    }\n    if (pos[0] === 't') {\n        return new BBox(titleBBox.x, titleBBox.y, Math.max(contentBBox.width + insetWidth, titleBBox.width), contentBBox.height + titleBBox.height + spacingHeight + insetHeight);\n    }\n    //  content.width, content.height \n    var _f = __read([\n        content.attributes.width || contentBBox.width,\n        content.attributes.height || contentBBox.height,\n    ], 2), contentWidth = _f[0], contentHeight = _f[1];\n    return new BBox(contentBBox.x, contentBBox.y, contentWidth + titleBBox.width + spacingWidth + insetWidth, contentHeight + titleBBox.height + spacingHeight + insetHeight);\n}\nfunction mayApplyStyle(el, style) {\n    var finalStyle = Object.entries(style).reduce(function (acc, _a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        var currAttr = el.node().attr(key);\n        if (!currAttr)\n            acc[key] = value;\n        return acc;\n    }, {});\n    el.styles(finalStyle);\n}\nfunction getTitleLayout(cfg) {\n    var _a, _b, _c, _d;\n    var _e = cfg, width = _e.width, height = _e.height, position = _e.position;\n    var _f = __read([+width / 2, +height / 2], 2), hW = _f[0], hH = _f[1];\n    var _g = __read([+hW, +hH, 'center', 'middle'], 4), x = _g[0], y = _g[1], textAlign = _g[2], textBaseline = _g[3];\n    var pos = parsePosition(position);\n    if (pos.includes('l'))\n        _a = __read([0, 'start'], 2), x = _a[0], textAlign = _a[1];\n    if (pos.includes('r'))\n        _b = __read([+width, 'end'], 2), x = _b[0], textAlign = _b[1];\n    if (pos.includes('t'))\n        _c = __read([0, 'top'], 2), y = _c[0], textBaseline = _c[1];\n    if (pos.includes('b'))\n        _d = __read([+height, 'bottom'], 2), y = _d[0], textBaseline = _d[1];\n    return { x: x, y: y, textAlign: textAlign, textBaseline: textBaseline };\n}\nvar Title = /** @class */ (function (_super) {\n    __extends(Title, _super);\n    function Title(options) {\n        return _super.call(this, options, {\n            text: '',\n            width: 0,\n            height: 0,\n            fill: '#4a505a',\n            fontWeight: 'bold',\n            fontSize: 12,\n            fontFamily: 'sans-serif',\n            inset: 0,\n            spacing: 0,\n            position: 'top-left',\n        }) || this;\n    }\n    Title.prototype.getAvailableSpace = function () {\n        var container = this;\n        var _a = this.attributes, containerWidth = _a.width, containerHeight = _a.height, position = _a.position, spacing = _a.spacing, inset = _a.inset;\n        var title = container.querySelector(CLASS_NAMES.text.class);\n        if (!title)\n            return new BBox(0, 0, +containerWidth, +containerHeight);\n        var _b = title.getBBox(), titleWidth = _b.width, titleHeight = _b.height;\n        var _c = __read(parseSeriesAttr(spacing), 4), spacingTop = _c[0], spacingRight = _c[1], spacingBottom = _c[2], spacingLeft = _c[3];\n        var _d = __read([0, 0, +containerWidth, +containerHeight], 4), x = _d[0], y = _d[1], width = _d[2], height = _d[3];\n        var pos = parsePosition(position);\n        if (pos.includes('i'))\n            return new BBox(x, y, width, height);\n        pos.forEach(function (p, i) {\n            var _a, _b, _c, _d;\n            if (p === 't')\n                _a = __read(i === 0\n                    ? [titleHeight + spacingBottom, +containerHeight - titleHeight - spacingBottom]\n                    : [0, +containerHeight], 2), y = _a[0], height = _a[1];\n            if (p === 'r')\n                _b = __read([+containerWidth - titleWidth - spacingLeft], 1), width = _b[0];\n            if (p === 'b')\n                _c = __read([+containerHeight - titleHeight - spacingTop], 1), height = _c[0];\n            if (p === 'l')\n                _d = __read(i === 0 ? [titleWidth + spacingRight, +containerWidth - titleWidth - spacingRight] : [0, +containerWidth], 2), x = _d[0], width = _d[1];\n        });\n        var _e = __read(parseSeriesAttr(inset), 4), insetTop = _e[0], insetRight = _e[1], insetBottom = _e[2], insetLeft = _e[3];\n        var _f = __read([insetLeft + insetRight, insetTop + insetBottom], 2), insetWidth = _f[0], insetHeight = _f[1];\n        return new BBox(x + insetLeft, y + insetTop, width - insetWidth, height - insetHeight);\n    };\n    Title.prototype.getBBox = function () {\n        if (this.title)\n            return this.title.getBBox();\n        return new BBox(0, 0, 0, 0);\n    };\n    Title.prototype.render = function (attributes, container) {\n        var _this = this;\n        var width = attributes.width, height = attributes.height, position = attributes.position, spacing = attributes.spacing, restStyle = __rest(attributes, [\"width\", \"height\", \"position\", \"spacing\"]);\n        var _a = __read(splitStyle(restStyle), 1), titleStyle = _a[0];\n        var _b = getTitleLayout(attributes), x = _b.x, y = _b.y, textAlign = _b.textAlign, textBaseline = _b.textBaseline;\n        ifShow(!!restStyle.text, select(container), function (group) {\n            _this.title = group\n                .maybeAppendByClassName(CLASS_NAMES.text, 'text')\n                .styles(titleStyle)\n                .call(mayApplyStyle, { x: x, y: y, textAlign: textAlign, textBaseline: textBaseline })\n                .node();\n        });\n    };\n    return Title;\n}(Component));\nexport { Title };\n//# sourceMappingURL=index.js.map","function substitute(str, o) {\n    if (!str || !o) {\n        return str;\n    }\n    return str.replace(/\\\\?\\{([^{}]+)\\}/g, function (match, name) {\n        if (match.charAt(0) === '\\\\') {\n            return match.slice(1);\n        }\n        return o[name] === undefined ? '' : o[name];\n    });\n}\nexport default substitute;\n//# sourceMappingURL=substitute.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var replaceChildren = function (el, content) {\n    if (content == null) {\n        el.innerHTML = '';\n        return;\n    }\n    if (el.replaceChildren) {\n        if (Array.isArray(content)) {\n            el.replaceChildren.apply(el, __spreadArray([], __read(content), false));\n        }\n        else {\n            el.replaceChildren(content);\n        }\n    }\n    else {\n        el.innerHTML = '';\n        if (Array.isArray(content)) {\n            content.forEach(function (child) { return el.appendChild(child); });\n        }\n        else {\n            el.appendChild(content);\n        }\n    }\n};\n//# sourceMappingURL=replace-children.js.map","import { __assign } from \"tslib\";\nexport function getClassNames(prefixCls) {\n    if (prefixCls === void 0) { prefixCls = ''; }\n    return {\n        CONTAINER: \"\".concat(prefixCls, \"tooltip\"),\n        TITLE: \"\".concat(prefixCls, \"tooltip-title\"),\n        LIST: \"\".concat(prefixCls, \"tooltip-list\"),\n        LIST_ITEM: \"\".concat(prefixCls, \"tooltip-list-item\"),\n        NAME: \"\".concat(prefixCls, \"tooltip-list-item-name\"),\n        MARKER: \"\".concat(prefixCls, \"tooltip-list-item-marker\"),\n        NAME_LABEL: \"\".concat(prefixCls, \"tooltip-list-item-name-label\"),\n        VALUE: \"\".concat(prefixCls, \"tooltip-list-item-value\"),\n        CROSSHAIR_X: \"\".concat(prefixCls, \"tooltip-crosshair-x\"),\n        CROSSHAIR_Y: \"\".concat(prefixCls, \"tooltip-crosshair-y\"),\n    };\n}\nvar TEXT_OVERFLOW_STYLE = {\n    overflow: 'hidden',\n    'white-space': 'nowrap',\n    'text-overflow': 'ellipsis',\n};\nexport function getDefaultTooltipStyle(prefixCls) {\n    var _a;\n    if (prefixCls === void 0) { prefixCls = ''; }\n    var CLASS_NAME = getClassNames(prefixCls);\n    return _a = {},\n        _a[\".\".concat(CLASS_NAME.CONTAINER)] = {\n            position: 'absolute',\n            visibility: 'visible',\n            // 'white-space': 'nowrap',\n            'z-index': 8,\n            transition: 'visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), ' +\n                'left 0.4s cubic-bezier(0.23, 1, 0.32, 1), ' +\n                'top 0.4s cubic-bezier(0.23, 1, 0.32, 1)',\n            'background-color': 'rgba(255, 255, 255, 0.96)',\n            'box-shadow': '0 6px 12px 0 rgba(0, 0, 0, 0.12)',\n            'border-radius': '4px',\n            color: 'rgba(0, 0, 0, 0.65)',\n            'font-size': '12px',\n            // 'font-family': ,\n            'line-height': '20px',\n            padding: '12px',\n            'min-width': '120px',\n            'max-width': '360px',\n            'font-family': 'Roboto-Regular',\n        },\n        _a[\".\".concat(CLASS_NAME.TITLE)] = {\n            color: 'rgba(0, 0, 0, 0.45)',\n        },\n        _a[\".\".concat(CLASS_NAME.LIST)] = {\n            margin: '0px',\n            'list-style-type': 'none',\n            padding: '0px',\n        },\n        _a[\".\".concat(CLASS_NAME.LIST_ITEM)] = {\n            'list-style-type': 'none',\n            display: 'flex',\n            'line-height': '2em',\n            'align-items': 'center',\n            'justify-content': 'space-between',\n            'white-space': 'nowrap',\n        },\n        _a[\".\".concat(CLASS_NAME.MARKER)] = {\n            width: '8px',\n            height: '8px',\n            'border-radius': '50%',\n            display: 'inline-block',\n            'margin-right': '4px',\n        },\n        _a[\".\".concat(CLASS_NAME.NAME)] = {\n            display: 'flex',\n            'align-items': 'center',\n            'max-width': '216px',\n        },\n        _a[\".\".concat(CLASS_NAME.NAME_LABEL)] = __assign({ flex: 1 }, TEXT_OVERFLOW_STYLE),\n        _a[\".\".concat(CLASS_NAME.VALUE)] = __assign({ display: 'inline-block', float: 'right', flex: 1, 'text-align': 'right', 'min-width': '28px', 'margin-left': '30px', color: 'rgba(0, 0, 0, 0.85)' }, TEXT_OVERFLOW_STYLE),\n        _a[\".\".concat(CLASS_NAME.CROSSHAIR_X)] = {\n            position: 'absolute',\n            width: '1px',\n            'background-color': 'rgba(0, 0, 0, 0.25)',\n        },\n        _a[\".\".concat(CLASS_NAME.CROSSHAIR_Y)] = {\n            position: 'absolute',\n            height: '1px',\n            'background-color': 'rgba(0, 0, 0, 0.25)',\n        },\n        _a;\n}\n//# sourceMappingURL=constant.js.map","import { __assign, __extends, __read, __rest } from \"tslib\";\nimport { substitute, createDOM } from '@antv/util';\nimport { Component } from '../../core';\nimport { BBox, applyStyleSheet, replaceChildren } from '../../util';\nimport { getClassNames, getDefaultTooltipStyle } from './constant';\nvar Tooltip = /** @class */ (function (_super) {\n    __extends(Tooltip, _super);\n    function Tooltip(options) {\n        var _this = this;\n        var _a, _b;\n        var prefixCls = (_b = (_a = options.style) === null || _a === void 0 ? void 0 : _a.template) === null || _b === void 0 ? void 0 : _b.prefixCls;\n        var CLASS_NAME = getClassNames(prefixCls);\n        _this = _super.call(this, options, {\n            data: [],\n            x: 0,\n            y: 0,\n            visibility: 'visible',\n            title: '',\n            position: 'bottom-right',\n            offset: [5, 5],\n            enterable: false,\n            container: {\n                x: 0,\n                y: 0,\n            },\n            bounding: null,\n            template: {\n                prefixCls: '',\n                container: \"<div class=\\\"\".concat(CLASS_NAME.CONTAINER, \"\\\"></div>\"),\n                title: \"<div class=\\\"\".concat(CLASS_NAME.TITLE, \"\\\"></div>\"),\n                item: \"<li class=\\\"\".concat(CLASS_NAME.LIST_ITEM, \"\\\" data-index={index}>\\n        <span class=\\\"\").concat(CLASS_NAME.NAME, \"\\\">\\n          <span class=\\\"\").concat(CLASS_NAME.MARKER, \"\\\" style=\\\"background:{color}\\\"></span>\\n          <span class=\\\"\").concat(CLASS_NAME.NAME_LABEL, \"\\\" title=\\\"{name}\\\">{name}</span>\\n        </span>\\n        <span class=\\\"\").concat(CLASS_NAME.VALUE, \"\\\" title=\\\"{value}\\\">{value}</span>\\n      </li>\"),\n            },\n            style: getDefaultTooltipStyle(prefixCls),\n        }) || this;\n        _this.timestamp = -1;\n        _this.prevCustomContentKey = _this.attributes.contentKey;\n        _this.initShape();\n        _this.render(_this.attributes, _this);\n        return _this;\n    }\n    Object.defineProperty(Tooltip.prototype, \"HTMLTooltipElement\", {\n        get: function () {\n            return this.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Tooltip.prototype.getContainer = function () {\n        return this.element;\n    };\n    Object.defineProperty(Tooltip.prototype, \"elementSize\", {\n        get: function () {\n            var width = this.element.offsetWidth;\n            var height = this.element.offsetHeight;\n            return { width: width, height: height };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Tooltip.prototype, \"HTMLTooltipItemsElements\", {\n        get: function () {\n            var _a = this.attributes, data = _a.data, template = _a.template;\n            return data.map(function (_a, idx) {\n                var _b = _a.name, name = _b === void 0 ? '' : _b, _c = _a.color, color = _c === void 0 ? 'black' : _c, index = _a.index, rest = __rest(_a, [\"name\", \"color\", \"index\"]);\n                var datum = __assign({ name: name, color: color, index: index !== null && index !== void 0 ? index : idx }, rest);\n                return createDOM(substitute(template.item, datum));\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Tooltip.prototype.render = function (attributes, container) {\n        this.renderHTMLTooltipElement();\n        this.updatePosition();\n    };\n    Tooltip.prototype.destroy = function () {\n        var _a;\n        (_a = this.element) === null || _a === void 0 ? void 0 : _a.remove();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * \n     */\n    Tooltip.prototype.show = function (x, y) {\n        var _this = this;\n        if (x !== undefined && y !== undefined) {\n            var isToggle = this.element.style.visibility === 'hidden';\n            var setPosition = function () {\n                _this.attributes.x = x !== null && x !== void 0 ? x : _this.attributes.x;\n                _this.attributes.y = y !== null && y !== void 0 ? y : _this.attributes.y;\n                _this.updatePosition();\n            };\n            //  hidden  visible \n            isToggle ? this.closeTransition(setPosition) : setPosition();\n        }\n        this.element.style.visibility = 'visible';\n    };\n    /**\n     *  hide  tooltip \n     *  enterable = true  x y x y\n     * @param x\n     * @param y\n     * @returns\n     */\n    Tooltip.prototype.hide = function (x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        var enterable = this.attributes.enterable;\n        //  tooltip \n        if (enterable && this.isCursorEntered(x, y))\n            return;\n        this.element.style.visibility = 'hidden';\n    };\n    /**\n     * \n     */\n    Tooltip.prototype.initShape = function () {\n        var template = this.attributes.template;\n        this.element = createDOM(template.container);\n        if (this.id)\n            this.element.setAttribute('id', this.id);\n    };\n    Tooltip.prototype.renderCustomContent = function () {\n        if (this.prevCustomContentKey !== undefined && this.prevCustomContentKey === this.attributes.contentKey)\n            return;\n        this.prevCustomContentKey = this.attributes.contentKey;\n        var content = this.attributes.content;\n        if (!content)\n            return;\n        if (typeof content === 'string')\n            this.element.innerHTML = content;\n        else\n            replaceChildren(this.element, content);\n    };\n    /**\n     *  HTML \n     */\n    Tooltip.prototype.renderHTMLTooltipElement = function () {\n        var _a, _b;\n        var _c = this.attributes, template = _c.template, title = _c.title, enterable = _c.enterable, style = _c.style, content = _c.content;\n        var CLASS_NAME = getClassNames(template.prefixCls);\n        var container = this.element;\n        this.element.style.pointerEvents = enterable ? 'auto' : 'none';\n        if (content)\n            this.renderCustomContent();\n        else {\n            if (title) {\n                container.innerHTML = template.title;\n                container.getElementsByClassName(CLASS_NAME.TITLE)[0].innerHTML = title;\n            }\n            else\n                (_b = (_a = container.getElementsByClassName(CLASS_NAME.TITLE)) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.remove();\n            var itemsElements = this.HTMLTooltipItemsElements;\n            var ul = document.createElement('ul');\n            ul.className = CLASS_NAME.LIST;\n            replaceChildren(ul, itemsElements);\n            var list = this.element.querySelector(\".\".concat(CLASS_NAME.LIST));\n            if (list)\n                list.replaceWith(ul);\n            else\n                container.appendChild(ul);\n        }\n        applyStyleSheet(container, style);\n    };\n    /**\n     *  position  tooltip \n     * @param assignPosition {TooltipPosition} tooltip\n     */\n    Tooltip.prototype.getRelativeOffsetFromCursor = function (assignPosition) {\n        var _a = this.attributes, position = _a.position, offset = _a.offset;\n        var interPosition = assignPosition || position;\n        var finalPosition = interPosition.split('-');\n        var positionScore = { left: [-1, 0], right: [1, 0], top: [0, -1], bottom: [0, 1] };\n        var _b = this.elementSize, width = _b.width, height = _b.height;\n        var absolutelyOffset = [-width / 2, -height / 2];\n        finalPosition.forEach(function (pos) {\n            var _a = __read(absolutelyOffset, 2), abs1 = _a[0], abs2 = _a[1];\n            var _b = __read(positionScore[pos], 2), pos1 = _b[0], pos2 = _b[1];\n            absolutelyOffset = [abs1 + (width / 2 + offset[0]) * pos1, abs2 + (height / 2 + offset[1]) * pos2];\n        });\n        return absolutelyOffset;\n    };\n    /**\n     * dom\n     */\n    Tooltip.prototype.setOffsetPosition = function (_a) {\n        var _b = __read(_a, 2), offsetX = _b[0], offsetY = _b[1];\n        var _c = this.attributes, _d = _c.x, x = _d === void 0 ? 0 : _d, _e = _c.y, y = _e === void 0 ? 0 : _e, _f = _c.container, cx = _f.x, cy = _f.y;\n        this.element.style.left = \"\".concat(+x + cx + offsetX, \"px\");\n        this.element.style.top = \"\".concat(+y + cy + offsetY, \"px\");\n    };\n    /**\n     * tooltip\n     */\n    Tooltip.prototype.updatePosition = function () {\n        var _a = this.attributes.showDelay, showDelay = _a === void 0 ? 60 : _a;\n        var currentTimestamp = Date.now();\n        if (this.timestamp > 0 && currentTimestamp - this.timestamp < showDelay)\n            return;\n        this.timestamp = currentTimestamp;\n        //  position \n        //  position\n        /**\n         * \n         *    \n         * \n         *    \n         * \n         */\n        this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor()));\n    };\n    /**\n     * \n     * @param offsetX position\n     * @param offsetY position\n     */\n    Tooltip.prototype.autoPosition = function (_a) {\n        var _b = __read(_a, 2), offsetX = _b[0], offsetY = _b[1];\n        var _c = this.attributes, cursorX = _c.x, cursorY = _c.y, bounding = _c.bounding, position = _c.position;\n        //  bounds\n        if (!bounding)\n            return [offsetX, offsetY];\n        // \n        var _d = this.element, offsetWidth = _d.offsetWidth, offsetHeight = _d.offsetHeight;\n        // \n        var _e = __read([+cursorX + offsetX, +cursorY + offsetY], 2), expectLeft = _e[0], expectTop = _e[1];\n        // \n        var inversion = {\n            left: 'right',\n            right: 'left',\n            top: 'bottom',\n            bottom: 'top',\n        };\n        // \n        var boundingX = bounding.x, boundingY = bounding.y, boundingWidth = bounding.width, boundingHeight = bounding.height;\n        var edgeCompare = {\n            left: expectLeft < boundingX,\n            right: expectLeft + offsetWidth > boundingX + boundingWidth,\n            top: expectTop < boundingY,\n            bottom: expectTop + offsetHeight > boundingY + boundingHeight,\n        };\n        // \n        var correctivePosition = [];\n        // \n        position.split('-').forEach(function (pos) {\n            // \n            if (edgeCompare[pos])\n                correctivePosition.push(inversion[pos]);\n            else\n                correctivePosition.push(pos);\n        });\n        var correctedPositionString = correctivePosition.join('-');\n        return this.getRelativeOffsetFromCursor(correctedPositionString);\n    };\n    Tooltip.prototype.isCursorEntered = function (clientX, clientY) {\n        //  tooltip dom \n        if (this.element) {\n            var _a = this.element.getBoundingClientRect(), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n            // const { container } = this.attributes;\n            // const { x: cx, y: cy } = container;\n            // console.log(1113, [clientX, clientY], [x, y, width, height], [cx, cy], new BBox(x - cx, y - cy, width, height).isPointIn(cursorX, cursorY));\n            return new BBox(x, y, width, height).isPointIn(clientX, clientY);\n        }\n        return false;\n    };\n    Tooltip.prototype.closeTransition = function (callback) {\n        var _this = this;\n        var transition = this.element.style.transition;\n        this.element.style.transition = 'none';\n        callback();\n        setTimeout(function () {\n            _this.element.style.transition = transition;\n        }, 10);\n    };\n    Tooltip.tag = 'tooltip';\n    return Tooltip;\n}(Component));\nexport { Tooltip };\n//# sourceMappingURL=index.js.map","import { __read } from \"tslib\";\nvar BBox = /** @class */ (function () {\n    function BBox(x, y, width, height) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (width === void 0) { width = 0; }\n        if (height === void 0) { height = 0; }\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    Object.defineProperty(BBox.prototype, \"bottom\", {\n        get: function () {\n            return this.y + this.height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"left\", {\n        get: function () {\n            return this.x;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"right\", {\n        get: function () {\n            return this.x + this.width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"top\", {\n        get: function () {\n            return this.y;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BBox.fromRect = function (other) {\n        return new BBox(other.x, other.y, other.width, other.height);\n    };\n    BBox.prototype.toJSON = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height,\n            top: this.top,\n            right: this.right,\n            bottom: this.bottom,\n            left: this.left,\n        };\n    };\n    /**\n     *  bbox \n     * @param p\n     */\n    BBox.prototype.isPointIn = function (x, y) {\n        return x >= this.left && x <= this.right && y >= this.top && y <= this.bottom;\n    };\n    return BBox;\n}());\nexport { BBox };\nexport function getRenderBBox(element) {\n    var _a = element.getRenderBounds(), _b = __read(_a.min, 2), minX = _b[0], minY = _b[1], _c = __read(_a.max, 2), maxX = _c[0], maxY = _c[1];\n    var width = maxX - minX;\n    var height = maxY - minY;\n    return new BBox(minX, minY, width, height);\n}\n//# sourceMappingURL=bbox.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { isFunction } from '@antv/util';\nexport function getCallbackValue(value, params) {\n    return isFunction(value) ? value.apply(void 0, __spreadArray([], __read(params), false)) : value;\n}\n//# sourceMappingURL=callback.js.map","import { __read } from \"tslib\";\nexport var classNames = function (cls, prefix) {\n    var PREFIX = function (str) { return \"\".concat(prefix, \"-\").concat(str); };\n    var obj = Object.fromEntries(Object.entries(cls).map(function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        var name = PREFIX(v);\n        return [\n            k,\n            {\n                name: name,\n                class: \".\".concat(name),\n                id: \"#\".concat(name),\n                toString: function () {\n                    return name;\n                },\n            },\n        ];\n    }));\n    Object.assign(obj, { prefix: PREFIX });\n    return obj;\n};\n//# sourceMappingURL=classnames.js.map","import { __read } from \"tslib\";\nimport { isPlainObject, isArray } from '@antv/util';\nvar MAX_MIX_LEVEL = 5;\nvar deep = function (dist, src, level, maxLevel) {\n    if (level === void 0) { level = 0; }\n    if (maxLevel === void 0) { maxLevel = MAX_MIX_LEVEL; }\n    Object.entries(src).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        var res = dist;\n        if (Object.prototype.hasOwnProperty.call(src, key)) {\n            if (!value) {\n                // null  undefined \n                res[key] = value;\n            }\n            else if (isPlainObject(value)) {\n                if (!isPlainObject(dist[key])) {\n                    res[key] = {};\n                }\n                if (level < maxLevel) {\n                    deep(dist[key], value, level + 1, maxLevel);\n                }\n                else {\n                    // \n                    res[key] = src[key];\n                }\n            }\n            else if (isArray(value)) {\n                res[key] = [];\n                res[key] = res[key].concat(value);\n            }\n            else {\n                res[key] = value;\n            }\n        }\n    });\n};\nexport var deepAssign = function (rst) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i += 1) {\n        deep(rst, args[i]);\n    }\n    return rst;\n};\n//# sourceMappingURL=deep-assign.js.map","import { applyToText } from './text';\nexport function ellipsisIt(node, w, suffix) {\n    if (suffix === void 0) { suffix = '...'; }\n    applyToText(node, { wordWrap: true, wordWrapWidth: w, maxLines: 1, textOverflow: suffix });\n}\n//# sourceMappingURL=ellipsis.js.map","/**\n * \n */\nexport function getEventPos(e) {\n    var canvas = e.canvas, touches = e.touches, offsetX = e.offsetX, offsetY = e.offsetY;\n    if (canvas) {\n        var x = canvas.x, y = canvas.y;\n        return [x, y];\n    }\n    if (touches) {\n        var _a = touches[0], clientX = _a.clientX, clientY = _a.clientY;\n        return [clientX, clientY];\n    }\n    if (offsetX && offsetY)\n        return [offsetX, offsetY];\n    return [0, 0];\n}\n//# sourceMappingURL=event.js.map","import { isNumber, isString } from '@antv/util';\nimport { Text } from '../shapes';\nexport function renderExtDo(el) {\n    if (typeof el === 'function')\n        return el();\n    return isString(el) || isNumber(el) ? new Text({ style: { text: String(el) } }) : el;\n}\n//# sourceMappingURL=extend-display-object.js.map","export function ifShow(show, container, creator, removeChildren, removeHandler) {\n    if (removeChildren === void 0) { removeChildren = true; }\n    if (removeHandler === void 0) { removeHandler = function (g) {\n        g.node().removeChildren();\n    }; }\n    if (show) {\n        return creator(container);\n    }\n    if (removeChildren)\n        removeHandler(container);\n    return null;\n}\n//# sourceMappingURL=if-show.js.map","import { __read } from \"tslib\";\n/**\n * @param vec\n * @param s\n */\nexport function scale(vec, s) {\n    return [vec[0] * s, vec[1] * s];\n}\nexport function add(vec1, vec2) {\n    return [vec1[0] + vec2[0], vec1[1] + vec2[1]];\n}\nexport function sub(vec1, vec2) {\n    return [vec1[0] - vec2[0], vec1[1] - vec2[1]];\n}\nexport function min(vec1, vec2) {\n    return [Math.min(vec1[0], vec2[0]), Math.min(vec1[1], vec2[1])];\n}\nexport function max(vec1, vec2) {\n    return [Math.max(vec1[0], vec2[0]), Math.max(vec1[1], vec2[1])];\n}\nexport function distance(vec1, vec2) {\n    return Math.sqrt(Math.pow((vec1[0] - vec2[0]), 2) + Math.pow((vec1[1] - vec2[1]), 2));\n}\nexport function normalize(vec) {\n    if (vec[0] === 0 && vec[1] === 0)\n        return [0, 0];\n    var len = Math.sqrt(Math.pow(vec[0], 2) + Math.pow(vec[1], 2));\n    return [vec[0] / len, vec[1] / len];\n}\n/**\n * \n * @param vec\n * @param origin \n * @param angle \n */\nexport function rotate(vec, origin, angle) {\n    var _a = __read(vec, 2), x = _a[0], y = _a[1];\n    var _b = __read(origin, 2), ox = _b[0], oy = _b[1];\n    var dx = x - ox;\n    var dy = y - oy;\n    var sin = Math.sin(angle);\n    var cos = Math.cos(angle);\n    return [dx * cos - dy * sin + ox, dx * sin + dy * cos + oy];\n}\nexport function vertical(vec, flag) {\n    return flag ? [vec[1], -vec[0]] : [-vec[1], vec[0]];\n}\n//# sourceMappingURL=matrix.js.map","/**\n * x\n */\nexport function toPrecision(num, precision) {\n    return +num.toPrecision(precision);\n}\n/**\n * \n * 100000 -> 10,000\n */\nexport function toThousands(num) {\n    return num.toLocaleString();\n}\n/**\n * \n * 1000000 = 1e6\n */\nexport function toScientificNotation(num) {\n    return num.toExponential();\n}\n/**\n * k\n * 1234 -> 1K\n * 12345 -> 12K\n */\nexport function toKNotation(num, precision) {\n    if (precision === void 0) { precision = 0; }\n    if (Math.abs(num) < 1000)\n        return String(num);\n    return \"\".concat(toPrecision(num / 1000, precision).toLocaleString(), \"K\");\n}\n// Condition if x is smaller than zero.\nexport var ifNegative = function (x, a, b) { return (x < 0 && Number.isFinite(x) ? a : b); };\n// Condition if x is greater than zero.\nexport var ifPositive = function (x, a, b) { return (x > 0 && Number.isFinite(x) ? a : b); };\n// Calculate the result of  a * b.\nexport var multi = function (a, b) { return a * b; };\n// Calculate the result of  (a + b) / 2.\nexport var mid = function (a, b) { return a / 2 + (b || 0) / 2; };\n//# sourceMappingURL=number.js.map","import { __extends, __read, __spreadArray } from \"tslib\";\nimport { ElementEvent } from '@antv/g';\nimport { Group } from '../shapes/Group';\nimport { hide } from './visibility';\nvar OffscreenGroup = /** @class */ (function (_super) {\n    __extends(OffscreenGroup, _super);\n    function OffscreenGroup() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var _this = _super.apply(this, __spreadArray([], __read(args), false)) || this;\n        _this.isMutationObserved = true;\n        _this.addEventListener(ElementEvent.INSERTED, function () {\n            hide(_this);\n        });\n        return _this;\n    }\n    return OffscreenGroup;\n}(Group));\nexport function createOffscreenGroup(container) {\n    var group = container.appendChild(new OffscreenGroup({\n        class: 'offscreen',\n    }));\n    hide(group);\n    return group;\n}\nexport function isInOffscreenGroup(group) {\n    var ancestor = group;\n    while (ancestor) {\n        if (ancestor.className === 'offscreen') {\n            return true;\n        }\n        ancestor = ancestor.parent;\n    }\n    return false;\n}\n//# sourceMappingURL=offscreen.js.map","/**\n * scale a shape to a given size\n */\nexport function scaleToPixel(el, size, applyScale) {\n    if (applyScale === void 0) { applyScale = false; }\n    var _a = el.getBBox(), width = _a.width, height = _a.height;\n    var scale = size / Math.max(width, height);\n    if (applyScale) {\n        el.style.transform = \"scale(\".concat(scale, \")\");\n    }\n    return scale;\n}\n//# sourceMappingURL=scale-to-pixel.js.map","import { __classPrivateFieldGet, __read, __spreadArray, __values } from \"tslib\";\nimport { Circle, Ellipse, Group, HTML, Image, Line, Path, Polygon, Polyline, Rect, Text } from '../shapes';\nimport { group } from './group';\nfunction error(msg) {\n    throw new Error(msg);\n}\n/**\n * A simple implementation of d3-selection for @antv/g.\n * It has the core features of d3-selection and extended ability.\n * Every methods of selection returns new selection if elements\n * are mutated(e.g. append, remove), otherwise return the selection itself(e.g. attr, style).\n * @see https://github.com/d3/d3-selection\n * @see https://github.com/antvis/g\n * @todo Nested selections.\n * @todo More useful functor.\n */\nvar Selection = /** @class */ (function () {\n    function Selection(elements, data, parent, document, selections, transitions, updateElements) {\n        if (elements === void 0) { elements = null; }\n        if (data === void 0) { data = null; }\n        if (parent === void 0) { parent = null; }\n        if (document === void 0) { document = null; }\n        if (selections === void 0) { selections = [null, null, null, null, null]; }\n        if (transitions === void 0) { transitions = []; }\n        if (updateElements === void 0) { updateElements = []; }\n        _Selection_instances.add(this);\n        this._elements = Array.from(elements);\n        this._data = data;\n        this._parent = parent;\n        this._document = document;\n        this._enter = selections[0];\n        this._update = selections[1];\n        this._exit = selections[2];\n        this._merge = selections[3];\n        this._split = selections[4];\n        this._transitions = transitions;\n        this._facetElements = updateElements;\n    }\n    Selection.prototype.selectAll = function (selector) {\n        var elements = typeof selector === 'string' ? this._parent.querySelectorAll(selector) : selector;\n        return new _a(elements, null, this._elements[0], this._document);\n    };\n    Selection.prototype.selectFacetAll = function (selector) {\n        var elements = typeof selector === 'string' ? this._parent.querySelectorAll(selector) : selector;\n        return new _a(this._elements, null, this._parent, this._document, undefined, undefined, elements);\n    };\n    /**\n     * @todo Replace with querySelector which has bug now.\n     */\n    Selection.prototype.select = function (selector) {\n        var element = typeof selector === 'string' ? this._parent.querySelectorAll(selector)[0] || null : selector;\n        return new _a([element], null, element, this._document);\n    };\n    Selection.prototype.append = function (node) {\n        var _this = this;\n        var callback = typeof node === 'function' ? node : function () { return _this.createElement(node); };\n        var elements = [];\n        if (this._data !== null) {\n            // For empty selection, append new element to parent.\n            // Each element is bind with datum.\n            for (var i = 0; i < this._data.length; i++) {\n                var d = this._data[i];\n                var _b = __read(Array.isArray(d) ? d : [d, null], 2), datum = _b[0], from = _b[1];\n                var newElement = callback(datum, i);\n                newElement.__data__ = datum;\n                if (from !== null)\n                    newElement.__fromElements__ = from;\n                this._parent.appendChild(newElement);\n                elements.push(newElement);\n            }\n            return new _a(elements, null, this._parent, this._document);\n        }\n        // For non-empty selection, append new element to\n        // selected element and return new selection.\n        for (var i = 0; i < this._elements.length; i++) {\n            var element = this._elements[i];\n            var datum = element.__data__;\n            var newElement = callback(datum, i);\n            element.appendChild(newElement);\n            elements.push(newElement);\n        }\n        return new _a(elements, null, elements[0], this._document);\n    };\n    Selection.prototype.maybeAppend = function (id, node) {\n        var element = __classPrivateFieldGet(this, _Selection_instances, \"m\", _Selection_maybeAppend).call(this, id[0] === '#' ? id : \"#\".concat(id), node);\n        element.attr('id', id);\n        return element;\n    };\n    Selection.prototype.maybeAppendByClassName = function (className, node) {\n        var cls = className.toString();\n        var element = __classPrivateFieldGet(this, _Selection_instances, \"m\", _Selection_maybeAppend).call(this, cls[0] === '.' ? cls : \".\".concat(cls), node);\n        element.attr('className', cls);\n        return element;\n    };\n    Selection.prototype.maybeAppendByName = function (name, node) {\n        var element = __classPrivateFieldGet(this, _Selection_instances, \"m\", _Selection_maybeAppend).call(this, \"[name=\\\"\".concat(name, \"\\\"]\"), node);\n        element.attr('name', name);\n        return element;\n    };\n    /**\n     * Bind data to elements, and produce three selection:\n     * Enter: Selection with empty elements and data to be bind to elements.\n     * Update: Selection with elements to be updated.\n     * Exit: Selection with elements to be removed.\n     */\n    Selection.prototype.data = function (data, id, groupId) {\n        var e_1, _b;\n        if (id === void 0) { id = function (d) { return d; }; }\n        if (groupId === void 0) { groupId = function () { return null; }; }\n        // An Array of new data.\n        var enter = [];\n        // An Array of elements to be updated.\n        var update = [];\n        // A Set of elements to be removed.\n        var exit = new Set(this._elements);\n        // An Array of data to be merged into one element.\n        var merge = [];\n        // A Set of elements to be split into multiple datum.\n        var split = new Set();\n        // A Map from key to each element.\n        var keyElement = new Map(this._elements.map(function (d, i) { return [id(d.__data__, i), d]; }));\n        // A Map from key to exist element. The Update Selection\n        // can get element from this map, this is for diff among\n        // facets.\n        var keyUpdateElement = new Map(this._facetElements.map(function (d, i) { return [id(d.__data__, i), d]; }));\n        // A Map from groupKey to a group of elements.\n        var groupKeyElements = group(this._elements, function (d) { return groupId(d.__data__); });\n        // Diff data with selection(elements with data).\n        // !!! Note\n        // The switch is strictly ordered, not not change the order of them.\n        for (var i = 0; i < data.length; i++) {\n            var datum = data[i];\n            var key = id(datum, i);\n            var groupKey = groupId(datum, i);\n            // Append element to update selection if incoming data has\n            // exactly the same key with elements.\n            if (keyElement.has(key)) {\n                var element = keyElement.get(key);\n                element.__data__ = datum;\n                element.__facet__ = false;\n                update.push(element);\n                exit.delete(element);\n                keyElement.delete(key);\n                // Append element to update selection if incoming data has\n                // exactly the same key with updateElements.\n            }\n            else if (keyUpdateElement.has(key)) {\n                var element = keyUpdateElement.get(key);\n                element.__data__ = datum;\n                // Flag this element should update its parentNode.\n                element.__facet__ = true;\n                update.push(element);\n                keyUpdateElement.delete(key);\n                // Append datum to merge selection if existed elements has\n                // its key as groupKey.\n            }\n            else if (groupKeyElements.has(key)) {\n                var group_2 = groupKeyElements.get(key);\n                merge.push([datum, group_2]);\n                try {\n                    for (var group_1 = (e_1 = void 0, __values(group_2)), group_1_1 = group_1.next(); !group_1_1.done; group_1_1 = group_1.next()) {\n                        var element = group_1_1.value;\n                        exit.delete(element);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (group_1_1 && !group_1_1.done && (_b = group_1.return)) _b.call(group_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                groupKeyElements.delete(key);\n                // Append element to split selection if incoming data has\n                // groupKey as its key, and bind to datum for it.\n            }\n            else if (keyElement.has(groupKey)) {\n                var element = keyElement.get(groupKey);\n                if (element.__toData__)\n                    element.__toData__.push(datum);\n                else\n                    element.__toData__ = [datum];\n                split.add(element);\n                exit.delete(element);\n            }\n            else {\n                enter.push(datum);\n            }\n        }\n        // Create new selection with enter, update and exit.\n        var S = [\n            new _a([], enter, this._parent, this._document),\n            new _a(update, null, this._parent, this._document),\n            new _a(exit, null, this._parent, this._document),\n            new _a([], merge, this._parent, this._document),\n            new _a(split, null, this._parent, this._document),\n        ];\n        return new _a(this._elements, null, this._parent, this._document, S);\n    };\n    Selection.prototype.merge = function (other) {\n        var elements = __spreadArray(__spreadArray([], __read(this._elements), false), __read(other._elements), false);\n        var transitions = __spreadArray(__spreadArray([], __read(this._transitions), false), __read(other._transitions), false);\n        return new _a(elements, null, this._parent, this._document, undefined, transitions);\n    };\n    Selection.prototype.createElement = function (type) {\n        if (this._document) {\n            return this._document.createElement(type, {});\n        }\n        var Ctor = _a.registry[type];\n        if (Ctor)\n            return new Ctor();\n        return error(\"Unknown node type: \".concat(type));\n    };\n    /**\n     * Apply callback for each selection(enter, update, exit)\n     * and merge them into one selection.\n     */\n    Selection.prototype.join = function (enter, update, exit, merge, split) {\n        if (enter === void 0) { enter = function (d) { return d; }; }\n        if (update === void 0) { update = function (d) { return d; }; }\n        if (exit === void 0) { exit = function (d) { return d.remove(); }; }\n        if (merge === void 0) { merge = function (d) { return d; }; }\n        if (split === void 0) { split = function (d) { return d.remove(); }; }\n        var newEnter = enter(this._enter);\n        var newUpdate = update(this._update);\n        var newExit = exit(this._exit);\n        var newMerge = merge(this._merge);\n        var newSplit = split(this._split);\n        return newUpdate.merge(newEnter).merge(newExit).merge(newMerge).merge(newSplit);\n    };\n    Selection.prototype.remove = function () {\n        var _loop_1 = function (i) {\n            var element = this_1._elements[i];\n            var transition = this_1._transitions[i];\n            if (transition) {\n                transition.then(function () { return element.remove(); });\n            }\n            else {\n                element.remove();\n            }\n        };\n        var this_1 = this;\n        // Remove node immediately if there is no transition,\n        // otherwise wait until transition finished.\n        for (var i = 0; i < this._elements.length; i++) {\n            _loop_1(i);\n        }\n        return new _a([], null, this._parent, this._document, undefined, this._transitions);\n    };\n    Selection.prototype.each = function (callback) {\n        for (var i = 0; i < this._elements.length; i++) {\n            var element = this._elements[i];\n            var datum = element.__data__;\n            callback.call(element, datum, i);\n        }\n        return this;\n    };\n    Selection.prototype.attr = function (key, value) {\n        var callback = typeof value !== 'function' ? function () { return value; } : value;\n        return this.each(function (d, i) {\n            if (value !== undefined)\n                this[key] = callback.call(this, d, i);\n        });\n    };\n    Selection.prototype.style = function (key, value, callable) {\n        if (callable === void 0) { callable = true; }\n        var callback = typeof value !== 'function' || !callable ? function () { return value; } : value;\n        return this.each(function (d, i) {\n            if (value !== undefined)\n                this.style[key] = callback.call(this, d, i);\n        });\n    };\n    Selection.prototype.styles = function (style, callable) {\n        if (style === void 0) { style = {}; }\n        if (callable === void 0) { callable = true; }\n        return this.each(function (d, i) {\n            var _this = this;\n            Object.entries(style).forEach(function (_b) {\n                var _c = __read(_b, 2), key = _c[0], value = _c[1];\n                var callback = typeof value !== 'function' || !callable ? function () { return value; } : value;\n                if (value !== undefined)\n                    _this.attr(key, callback.call(_this, d, i));\n            });\n        });\n    };\n    Selection.prototype.update = function (option, callable) {\n        if (callable === void 0) { callable = true; }\n        var callback = typeof option !== 'function' || !callable ? function () { return option; } : option;\n        return this.each(function (d, i) {\n            if (option && this.update)\n                this.update(callback.call(this, d, i));\n        });\n    };\n    /** if current stage is maybeAppend, skip update stage */\n    Selection.prototype.maybeUpdate = function (option, callable) {\n        if (callable === void 0) { callable = true; }\n        var callback = typeof option !== 'function' || !callable ? function () { return option; } : option;\n        return this.each(function (d, i) {\n            if (option && this.update)\n                this.update(callback.call(this, d, i));\n        });\n    };\n    Selection.prototype.transition = function (callback) {\n        var T = this._transitions;\n        return this.each(function (d, i) {\n            T[i] = callback.call(this, d, i);\n        });\n    };\n    Selection.prototype.on = function (event, handler) {\n        this.each(function () {\n            this.addEventListener(event, handler);\n        });\n        return this;\n    };\n    Selection.prototype.call = function (callback) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        callback.call.apply(callback, __spreadArray([this._parent, this], __read(args), false));\n        return this;\n    };\n    Selection.prototype.node = function () {\n        return this._elements[0];\n    };\n    Selection.prototype.nodes = function () {\n        return this._elements;\n    };\n    Selection.prototype.transitions = function () {\n        return this._transitions.filter(function (t) { return !!t; });\n    };\n    Selection.prototype.parent = function () {\n        return this._parent;\n    };\n    var _Selection_instances, _a, _Selection_maybeAppend;\n    _a = Selection, _Selection_instances = new WeakSet(), _Selection_maybeAppend = function _Selection_maybeAppend(selector, node) {\n        var element = this._elements[0];\n        var child = element.querySelector(selector);\n        if (child)\n            return new _a([child], null, this._parent, this._document);\n        var newChild = typeof node === 'string' ? this.createElement(node) : node();\n        element.appendChild(newChild);\n        return new _a([newChild], null, this._parent, this._document);\n    };\n    Selection.registry = {\n        g: Group,\n        rect: Rect,\n        circle: Circle,\n        path: Path,\n        text: Text,\n        ellipse: Ellipse,\n        image: Image,\n        line: Line,\n        polygon: Polygon,\n        polyline: Polyline,\n        html: HTML,\n    };\n    return Selection;\n}());\nexport { Selection };\nexport function select(node) {\n    return new Selection([node], null, node, node.ownerDocument);\n}\nexport function maybeAppend(parent, selector, node) {\n    if (!parent.querySelector(selector)) {\n        return select(parent).append(node);\n    }\n    return select(parent).select(selector);\n}\n//# sourceMappingURL=selection.js.map","export function group(array, keyFunc) {\n    var grouped = new Map();\n    array.forEach(function (item) {\n        var key = keyFunc(item);\n        if (!grouped.has(key)) {\n            grouped.set(key, []);\n        }\n        grouped.get(key).push(item);\n    });\n    return grouped;\n}\n//# sourceMappingURL=group.js.map","import { isNumber, isArray } from '@antv/util';\n/**\n * padding\n */\nexport function parseSeriesAttr(series) {\n    if (isNumber(series)) {\n        return [series, series, series, series];\n    }\n    if (isArray(series)) {\n        var len = series.length;\n        if (len === 1) {\n            return [series[0], series[0], series[0], series[0]];\n        }\n        if (len === 2) {\n            return [series[0], series[1], series[0], series[1]];\n        }\n        if (len === 3) {\n            return [series[0], series[1], series[2], series[1]];\n        }\n        if (len === 4) {\n            return series;\n        }\n    }\n    return [0, 0, 0, 0];\n}\n//# sourceMappingURL=series.js.map","import { __assign, __read, __values } from \"tslib\";\nimport { select } from './selection';\n/**\n * xywidthheight\n */\nexport function getShapeSpace(shape) {\n    var bounds = shape && shape.getRenderBounds();\n    if (!bounds)\n        return {\n            width: 0,\n            height: 0,\n        };\n    var max = bounds.getMax();\n    var min = bounds.getMin();\n    return {\n        width: max[0] - min[0],\n        height: max[1] - min[1],\n    };\n}\nexport function getLocalBBox(shape) {\n    var _a = shape.getLocalBounds(), min = _a.min, max = _a.max;\n    var _b = __read([min, max], 2), _c = __read(_b[0], 2), x1 = _c[0], y1 = _c[1], _d = __read(_b[1], 2), x2 = _d[0], y2 = _d[1];\n    return { x: x1, y: y1, width: x2 - x1, height: y2 - y1, left: x1, bottom: y2, top: y1, right: x2 };\n}\nexport function createTempText(group, attrs) {\n    var textNode = select(group).append('text').node();\n    textNode.attr(__assign(__assign({}, attrs), { visibility: 'hidden' }));\n    return textNode;\n}\nexport function isHorizontal(p1, p2) {\n    var _a = __read(p1, 2), x1 = _a[0], y1 = _a[1];\n    var _b = __read(p2, 2), x2 = _b[0], y2 = _b[1];\n    return x1 !== x2 && y1 === y2;\n}\nexport function isVertical(p1, p2) {\n    var _a = __read(p1, 2), x1 = _a[0], y1 = _a[1];\n    var _b = __read(p2, 2), x2 = _b[0], y2 = _b[1];\n    return x1 === x2 && y1 !== y2;\n}\nexport function copyAttributes(target, source) {\n    var e_1, _a;\n    var attributes = source.attributes;\n    try {\n        for (var _b = __values(Object.entries(attributes)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var _d = __read(_c.value, 2), key = _d[0], value = _d[1];\n            if (key !== 'id' && key !== 'className')\n                target.attr(key, value);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n}\n//# sourceMappingURL=shape.js.map","export function toUppercaseFirstLetter(string) {\n    return string.toString().charAt(0).toUpperCase() + string.toString().slice(1);\n}\nexport function toLowercaseFirstLetter(string) {\n    return string.toString().charAt(0).toLowerCase() + string.toString().slice(1);\n}\nexport function addPrefix(string, prefix) {\n    return \"\".concat(prefix).concat(toUppercaseFirstLetter(string));\n}\nexport function removePrefix(string, prefix, lowercaseFirstLetter) {\n    var _a;\n    if (lowercaseFirstLetter === void 0) { lowercaseFirstLetter = true; }\n    var inferPrefix = prefix || ((_a = string.match(/^([a-z][a-z0-9]+)/)) === null || _a === void 0 ? void 0 : _a[0]) || '';\n    var withoutPrefix = string.replace(new RegExp(\"^(\".concat(inferPrefix, \")\")), '');\n    return lowercaseFirstLetter ? toLowercaseFirstLetter(withoutPrefix) : withoutPrefix;\n}\n//# sourceMappingURL=string.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { addPrefix, removePrefix, toUppercaseFirstLetter } from './string';\n/**\n * HTML\n * @param style {[key: string]: Object}\n * \n * {\n *  '.selector': {\n *   'attrName': 'attr',\n *   'padding': '0 0 0 0',\n *   'background-color': 'red'\n *  }\n * }\n */\nexport function applyStyleSheet(element, style) {\n    Object.entries(style).forEach(function (_a) {\n        var _b = __read(_a, 2), selector = _b[0], styleString = _b[1];\n        // apply styles to element and children\n        __spreadArray([element], __read(element.querySelectorAll(selector)), false).filter(function (el) { return el.matches(selector); })\n            .forEach(function (target) {\n            if (!target)\n                return;\n            var temp = target;\n            temp.style.cssText += Object.entries(styleString).reduce(function (total, currVal) {\n                return \"\".concat(total).concat(currVal.join(':'), \";\");\n            }, '');\n        });\n    });\n}\nvar startsWith = function (text, prefix) {\n    if (!(text === null || text === void 0 ? void 0 : text.startsWith(prefix)))\n        return false;\n    var nextChart = text[prefix.length];\n    return nextChart >= 'A' && nextChart <= 'Z';\n};\nexport function subStyleProps(style, prefix, invert) {\n    if (invert === void 0) { invert = false; }\n    var result = {};\n    Object.entries(style).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        // never transfer class property\n        if (key === 'className' || key === 'class') {\n            // do nothing\n        }\n        // @example showHandle -> showHandle, showHandleLabel -> showLabel\n        else if (startsWith(key, 'show') && startsWith(removePrefix(key, 'show'), prefix) !== invert) {\n            if (key === addPrefix(prefix, 'show'))\n                result[key] = value;\n            else\n                result[key.replace(new RegExp(toUppercaseFirstLetter(prefix)), '')] = value;\n        }\n        // @example navFormatter -> formatter\n        else if (!startsWith(key, 'show') && startsWith(key, prefix) !== invert) {\n            var name_1 = removePrefix(key, prefix);\n            // don't transfer filter if it represents \n            if (name_1 === 'filter' && typeof value === 'function') {\n                // do nothing\n            }\n            else\n                result[name_1] = value;\n        }\n    });\n    return result;\n}\nexport function superStyleProps(style, prefix) {\n    return Object.entries(style).reduce(function (acc, _a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        if (key.startsWith('show'))\n            acc[\"show\".concat(prefix).concat(key.slice(4))] = value;\n        else\n            acc[\"\".concat(prefix).concat(toUppercaseFirstLetter(key))] = value;\n        return acc;\n    }, {});\n}\n/**\n * extract group style from mixin style\n * @param style\n * @param ignoreStyleDict style will be ignore from style\n * @returns shape style and rest style\n */\nexport function splitStyle(style, ignoreStyleDict) {\n    if (ignoreStyleDict === void 0) { ignoreStyleDict = ['x', 'y', 'class', 'className']; }\n    var groupStyleDict = [\n        'transform',\n        'transformOrigin',\n        'anchor',\n        'visibility',\n        'pointerEvents',\n        'zIndex',\n        'cursor',\n        'clipPath',\n        'clipPathTargets',\n        'offsetPath',\n        'offsetPathTargets',\n        'offsetDistance',\n        'draggable',\n        'droppable',\n    ];\n    var output = {};\n    var groupStyle = {};\n    Object.entries(style).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], val = _b[1];\n        if (ignoreStyleDict.includes(key)) {\n            // do nothing\n        }\n        else if (groupStyleDict.indexOf(key) !== -1)\n            groupStyle[key] = val;\n        else\n            output[key] = val;\n    });\n    return [output, groupStyle];\n}\n//# sourceMappingURL=style.js.map","import { runtime } from '@antv/g';\nimport { memoize } from '@antv/util';\nvar ctx;\nvar mockMeasureTextWidth;\nexport function setMockMeasureTextWidth(mock) {\n    mockMeasureTextWidth = mock;\n}\n/**\n * \n */\nexport var measureTextWidth = memoize(function (text, font) {\n    var fontSize = font.fontSize, fontFamily = font.fontFamily, fontWeight = font.fontWeight, fontStyle = font.fontStyle, fontVariant = font.fontVariant;\n    if (mockMeasureTextWidth) {\n        return mockMeasureTextWidth(text, fontSize);\n    }\n    if (!ctx) {\n        // @ts-ignore\n        ctx = runtime.offscreenCanvasCreator.getOrCreateContext(undefined);\n    }\n    ctx.font = [fontStyle, fontVariant, fontWeight, \"\".concat(fontSize, \"px\"), fontFamily].join(' ');\n    return ctx.measureText(text).width;\n}, function (text, font) { return [text, Object.values(font || getFont(text)).join()].join(''); }, 4096);\nexport var getFont = function (textShape) {\n    var fontFamily = textShape.style.fontFamily || 'sans-serif';\n    var fontWeight = textShape.style.fontWeight || 'normal';\n    var fontStyle = textShape.style.fontStyle || 'normal';\n    var fontVariant = textShape.style.fontVariant;\n    var fontSize = textShape.style.fontSize;\n    fontSize = typeof fontSize === 'object' ? fontSize.value : fontSize;\n    return { fontSize: fontSize, fontFamily: fontFamily, fontWeight: fontWeight, fontStyle: fontStyle, fontVariant: fontVariant };\n};\nexport function textOf(node) {\n    if (node.nodeName === 'text') {\n        return node;\n    }\n    if (node.nodeName === 'g' && node.children.length === 1 && node.children[0].nodeName === 'text') {\n        return node.children[0];\n    }\n    return null;\n}\nexport function applyToText(node, style) {\n    var text = textOf(node);\n    if (text)\n        text.attr(style);\n}\n//# sourceMappingURL=text.js.map","export function traverse(element, callback) {\n    callback(element);\n    if (element.children) {\n        element.children.forEach(function (child) {\n            if (child)\n                traverse(child, callback);\n        });\n    }\n}\n//# sourceMappingURL=traverse.js.map","import { traverse } from './traverse';\nexport function show(element) {\n    visibility(element, true);\n}\nexport function hide(element) {\n    visibility(element, false);\n}\nexport function visibility(element, visible) {\n    var value = visible ? 'visible' : 'hidden';\n    traverse(element, function (node) {\n        node.attr('visibility', value);\n    });\n}\n//# sourceMappingURL=visibility.js.map","var WILDCARD = '*';\n/* event-emitter */\nvar EventEmitter = /** @class */ (function () {\n    function EventEmitter() {\n        this._events = {};\n    }\n    /**\n     * \n     * @param evt\n     * @param callback\n     * @param once\n     */\n    EventEmitter.prototype.on = function (evt, callback, once) {\n        if (!this._events[evt]) {\n            this._events[evt] = [];\n        }\n        this._events[evt].push({\n            callback: callback,\n            once: !!once,\n        });\n        return this;\n    };\n    /**\n     * \n     * @param evt\n     * @param callback\n     */\n    EventEmitter.prototype.once = function (evt, callback) {\n        return this.on(evt, callback, true);\n    };\n    /**\n     * \n     * @param evt\n     * @param args\n     */\n    EventEmitter.prototype.emit = function (evt) {\n        var _this = this;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var events = this._events[evt] || [];\n        var wildcardEvents = this._events[WILDCARD] || [];\n        //  emit \n        var doEmit = function (es) {\n            var length = es.length;\n            for (var i = 0; i < length; i++) {\n                if (!es[i]) {\n                    continue;\n                }\n                var _a = es[i], callback = _a.callback, once = _a.once;\n                if (once) {\n                    es.splice(i, 1);\n                    if (es.length === 0) {\n                        delete _this._events[evt];\n                    }\n                    length--;\n                    i--;\n                }\n                callback.apply(_this, args);\n            }\n        };\n        doEmit(events);\n        doEmit(wildcardEvents);\n    };\n    /**\n     * channel\n     * @param evt\n     * @param callback\n     */\n    EventEmitter.prototype.off = function (evt, callback) {\n        if (!evt) {\n            // evt \n            this._events = {};\n        }\n        else {\n            if (!callback) {\n                // evt callback \n                delete this._events[evt];\n            }\n            else {\n                // evt callback \n                var events = this._events[evt] || [];\n                var length_1 = events.length;\n                for (var i = 0; i < length_1; i++) {\n                    if (events[i].callback === callback) {\n                        events.splice(i, 1);\n                        length_1--;\n                        i--;\n                    }\n                }\n                if (events.length === 0) {\n                    delete this._events[evt];\n                }\n            }\n        }\n        return this;\n    };\n    /*  */\n    EventEmitter.prototype.getEvents = function () {\n        return this._events;\n    };\n    return EventEmitter;\n}());\nexport default EventEmitter;\n//# sourceMappingURL=index.js.map","/*!\n * @antv/g-plugin-canvas-path-generator\n * @description A G plugin of path generator with Canvas2D API\n * @version 2.1.18\n * @date 4/14/2025, 2:54:31 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { isDisplayObject, Shape, AbstractRendererPlugin } from '@antv/g-lite';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { clamp } from '@antv/util';\n\nfunction generatePath$6(context, parsedStyle) {\n  var _parsedStyle$cx = parsedStyle.cx,\n    cx = _parsedStyle$cx === void 0 ? 0 : _parsedStyle$cx,\n    _parsedStyle$cy = parsedStyle.cy,\n    cy = _parsedStyle$cy === void 0 ? 0 : _parsedStyle$cy,\n    r = parsedStyle.r;\n  context.arc(cx, cy, r, 0, Math.PI * 2, false);\n}\n\nfunction generatePath$5(context, parsedStyle) {\n  var _parsedStyle$cx = parsedStyle.cx,\n    cx = _parsedStyle$cx === void 0 ? 0 : _parsedStyle$cx,\n    _parsedStyle$cy = parsedStyle.cy,\n    cy = _parsedStyle$cy === void 0 ? 0 : _parsedStyle$cy,\n    rx = parsedStyle.rx,\n    ry = parsedStyle.ry;\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n  if (context.ellipse) {\n    context.ellipse(cx, cy, rx, ry, 0, 0, Math.PI * 2, false);\n  } else {\n    // \n    var r = rx > ry ? rx : ry;\n    var scaleX = rx > ry ? 1 : rx / ry;\n    var scaleY = rx > ry ? ry / rx : 1;\n    context.save();\n    context.scale(scaleX, scaleY);\n    context.arc(cx, cy, r, 0, Math.PI * 2);\n  }\n}\n\nfunction generatePath$4(context, parsedStyle) {\n  var x1 = parsedStyle.x1,\n    y1 = parsedStyle.y1,\n    x2 = parsedStyle.x2,\n    y2 = parsedStyle.y2,\n    markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = x2 - x1;\n    y = y2 - y1;\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = x1 - x2;\n    y = y1 - y2;\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\n\nfunction generatePath$3(context, parsedStyle) {\n  var markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var _parsedStyle$d = parsedStyle.d,\n    absolutePath = _parsedStyle$d.absolutePath,\n    segments = _parsedStyle$d.segments;\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    var _getStartTangent = markerStart.parentNode.getStartTangent(),\n      _getStartTangent2 = _slicedToArray(_getStartTangent, 2),\n      p1 = _getStartTangent2[0],\n      p2 = _getStartTangent2[1];\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    var _getEndTangent = markerEnd.parentNode.getEndTangent(),\n      _getEndTangent2 = _slicedToArray(_getEndTangent, 2),\n      _p = _getEndTangent2[0],\n      _p2 = _getEndTangent2[1];\n    x = _p[0] - _p2[0];\n    y = _p[1] - _p2[1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  for (var i = 0; i < absolutePath.length; i++) {\n    var params = absolutePath[i];\n    var command = params[0];\n    var nextSegment = absolutePath[i + 1];\n    var useStartOffset = i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n    var useEndOffset = (i === absolutePath.length - 1 || nextSegment && (nextSegment[0] === 'M' || nextSegment[0] === 'Z')) && endOffsetX !== 0 && endOffsetY !== 0;\n    var _ref = useStartOffset ? [startOffsetX, startOffsetY] : [0, 0],\n      _ref2 = _slicedToArray(_ref, 2),\n      startOffsetXTemp = _ref2[0],\n      startOffsetYTemp = _ref2[1];\n    var _ref3 = useEndOffset ? [endOffsetX, endOffsetY] : [0, 0],\n      _ref4 = _slicedToArray(_ref3, 2),\n      endOffsetXTemp = _ref4[0],\n      endOffsetYTemp = _ref4[1];\n    switch (command) {\n      case 'M':\n        // Use start marker offset\n        context.moveTo(params[1] + startOffsetXTemp, params[2] + startOffsetYTemp);\n        break;\n      case 'L':\n        context.lineTo(params[1] + endOffsetXTemp, params[2] + endOffsetYTemp);\n        break;\n      case 'Q':\n        context.quadraticCurveTo(params[1], params[2], params[3] + endOffsetXTemp, params[4] + endOffsetYTemp);\n        break;\n      case 'C':\n        context.bezierCurveTo(params[1], params[2], params[3], params[4], params[5] + endOffsetXTemp, params[6] + endOffsetYTemp);\n        break;\n      case 'A':\n        {\n          // FIXME startOffset / endOffset\n          var arcParams = segments[i].arcParams;\n          var cx = arcParams.cx,\n            cy = arcParams.cy,\n            rx = arcParams.rx,\n            ry = arcParams.ry,\n            startAngle = arcParams.startAngle,\n            endAngle = arcParams.endAngle,\n            xRotation = arcParams.xRotation,\n            sweepFlag = arcParams.sweepFlag;\n          // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n          if (context.ellipse) {\n            context.ellipse(cx, cy, rx, ry, xRotation, startAngle, endAngle, !!(1 - sweepFlag));\n          } else {\n            // @see https://stackoverflow.com/a/47494351\n            var r = rx > ry ? rx : ry;\n            var scaleX = rx > ry ? 1 : rx / ry;\n            var scaleY = rx > ry ? ry / rx : 1;\n            context.translate(cx, cy);\n            context.rotate(xRotation);\n            context.scale(scaleX, scaleY);\n            context.arc(0, 0, r, startAngle, endAngle, !!(1 - sweepFlag));\n            context.scale(1 / scaleX, 1 / scaleY);\n            context.rotate(-xRotation);\n            context.translate(-cx, -cy);\n          }\n          if (useEndOffset) {\n            context.lineTo(params[6] + endOffsetX, params[7] + endOffsetY);\n          }\n          break;\n        }\n      case 'Z':\n        context.closePath();\n        break;\n    }\n  }\n}\n\nfunction generatePath$2(context, parsedStyle) {\n  var markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var points = parsedStyle.points.points;\n  var length = points.length;\n  var x1 = points[0][0];\n  var y1 = points[0][1];\n  var x2 = points[length - 1][0];\n  var y2 = points[length - 1][1];\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 1][0] - points[0][0];\n    y = points[length - 1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  context.moveTo(x1 + (startOffsetX || endOffsetX), y1 + (startOffsetY || endOffsetY));\n  for (var i = 1; i < length - 1; i++) {\n    var point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2, y2);\n}\n\nfunction generatePath$1(context, parsedStyle) {\n  var markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var points = parsedStyle.points.points;\n  var length = points.length;\n  var x1 = points[0][0];\n  var y1 = points[0][1];\n  var x2 = points[length - 1][0];\n  var y2 = points[length - 1][1];\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 2][0] - points[length - 1][0];\n    y = points[length - 2][1] - points[length - 1][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  for (var i = 1; i < length - 1; i++) {\n    var point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\n\nfunction generatePath(context, parsedStyle) {\n  var _parsedStyle$x = parsedStyle.x,\n    x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n    _parsedStyle$y = parsedStyle.y,\n    y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n    radius = parsedStyle.radius,\n    width = parsedStyle.width,\n    height = parsedStyle.height;\n  var w = width;\n  var h = height;\n  var hasRadius = radius && radius.some(function (r) {\n    return r !== 0;\n  });\n  if (!hasRadius) {\n    // Canvas support negative width/height of rect\n    context.rect(x, y, w, h);\n  } else {\n    var signX = width > 0 ? 1 : -1;\n    var signY = height > 0 ? 1 : -1;\n    var sweepFlag = signX + signY === 0;\n    var _radius$map = radius.map(function (r) {\n        return clamp(r, 0, Math.min(Math.abs(w) / 2, Math.abs(h) / 2));\n      }),\n      _radius$map2 = _slicedToArray(_radius$map, 4),\n      tlr = _radius$map2[0],\n      trr = _radius$map2[1],\n      brr = _radius$map2[2],\n      blr = _radius$map2[3];\n    context.moveTo(signX * tlr + x, y);\n    context.lineTo(w - signX * trr + x, y);\n    if (trr !== 0) {\n      context.arc(w - signX * trr + x, signY * trr + y, trr, -signY * Math.PI / 2, signX > 0 ? 0 : Math.PI, sweepFlag);\n    }\n    context.lineTo(w + x, h - signY * brr + y);\n    if (brr !== 0) {\n      context.arc(w - signX * brr + x, h - signY * brr + y, brr, signX > 0 ? 0 : Math.PI, signY > 0 ? Math.PI / 2 : 1.5 * Math.PI, sweepFlag);\n    }\n    context.lineTo(signX * blr + x, h + y);\n    if (blr !== 0) {\n      context.arc(signX * blr + x, h - signY * blr + y, blr, signY > 0 ? Math.PI / 2 : -Math.PI / 2, signX > 0 ? Math.PI : 0, sweepFlag);\n    }\n    context.lineTo(x, signY * tlr + y);\n    if (tlr !== 0) {\n      context.arc(signX * tlr + x, signY * tlr + y, tlr, signX > 0 ? Math.PI : 0, signY > 0 ? Math.PI * 1.5 : Math.PI / 2, sweepFlag);\n    }\n  }\n}\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'canvas-path-generator';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      var _pathGeneratorFactory;\n      var pathGeneratorFactory = (_pathGeneratorFactory = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_pathGeneratorFactory, Shape.CIRCLE, generatePath$6), Shape.ELLIPSE, generatePath$5), Shape.RECT, generatePath), Shape.LINE, generatePath$4), Shape.POLYLINE, generatePath$1), Shape.POLYGON, generatePath$2), Shape.PATH, generatePath$3), Shape.TEXT, undefined), Shape.GROUP, undefined), Shape.IMAGE, undefined), _defineProperty(_defineProperty(_defineProperty(_pathGeneratorFactory, Shape.HTML, undefined), Shape.MESH, undefined), Shape.FRAGMENT, undefined));\n\n      // @ts-ignore\n      this.context.pathGeneratorFactory = pathGeneratorFactory;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // @ts-ignore\n      delete this.context.pathGeneratorFactory;\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-plugin-canvas-picker\n * @description A G plugin for picking in canvas\n * @version 2.1.21\n * @date 4/14/2025, 2:56:35 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { findClosestClipPathTarget, Point, isFillOrStrokeAffected, getOrCalculatePathTotalLength, Shape, AbstractRendererPlugin } from '@antv/g-lite';\nimport _createForOfIteratorHelper from '@babel/runtime/helpers/createForOfIteratorHelper';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport { vec3, mat4 } from 'gl-matrix';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { distance, linePointToLine, cubicPointDistance, quadPointDistance } from '@antv/g-math';\nimport { arcToCubic, clamp } from '@antv/util';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\n\nvar tmpVec3a = vec3.create();\nvar tmpVec3b = vec3.create();\nvar tmpVec3c = vec3.create();\nvar tmpMat4 = mat4.create();\n/**\n * pick shape(s) with Mouse/Touch event\n *\n * 1. find AABB with r-tree\n * 2. do math calculation with geometry in an accurate way\n */\nvar CanvasPickerPlugin = /*#__PURE__*/function () {\n  function CanvasPickerPlugin() {\n    var _this = this;\n    _classCallCheck(this, CanvasPickerPlugin);\n    this.isHit = function (displayObject, position, worldTransform, isClipPath) {\n      // use picker for current shape's type\n      var pick = _this.context.pointInPathPickerFactory[displayObject.nodeName];\n      if (pick) {\n        // invert with world matrix\n        var invertWorldMat = mat4.invert(tmpMat4, worldTransform);\n\n        // transform client position to local space, do picking in local space\n        var localPosition = vec3.transformMat4(tmpVec3b, vec3.set(tmpVec3c, position[0], position[1], 0), invertWorldMat);\n        if (pick(displayObject, new Point(localPosition[0], localPosition[1]), isClipPath, _this.isPointInPath, _this.context, _this.runtime)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    /**\n     * use native picking method\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/isPointInPath\n     */\n    this.isPointInPath = function (displayObject, position) {\n      var context = _this.runtime.offscreenCanvasCreator.getOrCreateContext(_this.context.config.offscreenCanvas);\n      var generatePath = _this.context.pathGeneratorFactory[displayObject.nodeName];\n      if (generatePath) {\n        context.beginPath();\n        generatePath(context, displayObject.parsedStyle);\n        context.closePath();\n      }\n      return context.isPointInPath(position.x, position.y);\n    };\n  }\n  return _createClass(CanvasPickerPlugin, [{\n    key: \"apply\",\n    value: function apply(context, runtime) {\n      var _renderingContext$roo,\n        _this2 = this;\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext;\n      this.context = context;\n      this.runtime = runtime;\n      var document = (_renderingContext$roo = renderingContext.root) === null || _renderingContext$roo === void 0 ? void 0 : _renderingContext$roo.ownerDocument;\n      renderingService.hooks.pick.tapPromise(CanvasPickerPlugin.tag, /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(result) {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", _this2.pick(document, result));\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        }));\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n      renderingService.hooks.pickSync.tap(CanvasPickerPlugin.tag, function (result) {\n        return _this2.pick(document, result);\n      });\n    }\n  }, {\n    key: \"pick\",\n    value: function pick(document, result) {\n      var topmost = result.topmost,\n        _result$position = result.position,\n        x = _result$position.x,\n        y = _result$position.y;\n\n      // position in world space\n      var position = vec3.set(tmpVec3a, x, y, 0);\n\n      // query by AABB first with spatial index(r-tree)\n      var hitTestList = document.elementsFromBBox(position[0], position[1], position[0], position[1]);\n\n      // test with clip path & origin shape\n      // @see https://github.com/antvis/g/issues/1064\n      var pickedDisplayObjects = [];\n      var _iterator = _createForOfIteratorHelper(hitTestList),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _displayObject = _step.value;\n          var worldTransform = _displayObject.getWorldTransform();\n          var isHitOriginShape = this.isHit(_displayObject, position, worldTransform, false);\n          if (isHitOriginShape) {\n            // should look up in the ancestor node\n            var clipped = findClosestClipPathTarget(_displayObject);\n            if (clipped) {\n              var clipPath = clipped.parsedStyle.clipPath;\n              var isHitClipPath = this.isHit(clipPath, position, clipPath.getWorldTransform(), true);\n              if (isHitClipPath) {\n                if (topmost) {\n                  result.picked = [_displayObject];\n                  return result;\n                }\n                pickedDisplayObjects.push(_displayObject);\n              }\n            } else {\n              if (topmost) {\n                result.picked = [_displayObject];\n                return result;\n              }\n              pickedDisplayObjects.push(_displayObject);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      result.picked = pickedDisplayObjects;\n      return result;\n    }\n  }]);\n}();\nCanvasPickerPlugin.tag = 'CanvasPicker';\n\nfunction isPointInPath$8(displayObject, position, isClipPath) {\n  var _ref = displayObject.parsedStyle,\n    _ref$cx = _ref.cx,\n    cx = _ref$cx === void 0 ? 0 : _ref$cx,\n    _ref$cy = _ref.cy,\n    cy = _ref$cy === void 0 ? 0 : _ref$cy,\n    r = _ref.r,\n    fill = _ref.fill,\n    stroke = _ref.stroke,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents;\n  var halfLineWidth = (lineWidth + increasedLineWidthForHitTesting) / 2;\n  var absDistance = distance(cx, cy, position.x, position.y);\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasFill = _isFillOrStrokeAffect2[0],\n    hasStroke = _isFillOrStrokeAffect2[1];\n  if (hasFill && hasStroke || isClipPath) {\n    return absDistance <= r + halfLineWidth;\n  }\n  if (hasFill) {\n    return absDistance <= r;\n  }\n  if (hasStroke) {\n    return absDistance >= r - halfLineWidth && absDistance <= r + halfLineWidth;\n  }\n  return false;\n}\n\nfunction ellipseDistance(squareX, squareY, rx, ry) {\n  return squareX / (rx * rx) + squareY / (ry * ry);\n}\nfunction isPointInPath$7(displayObject, position, isClipPath) {\n  var _ref = displayObject.parsedStyle,\n    _ref$cx = _ref.cx,\n    cx = _ref$cx === void 0 ? 0 : _ref$cx,\n    _ref$cy = _ref.cy,\n    cy = _ref$cy === void 0 ? 0 : _ref$cy,\n    rx = _ref.rx,\n    ry = _ref.ry,\n    fill = _ref.fill,\n    stroke = _ref.stroke,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents;\n  var x = position.x,\n    y = position.y;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasFill = _isFillOrStrokeAffect2[0],\n    hasStroke = _isFillOrStrokeAffect2[1];\n  var halfLineWith = (lineWidth + increasedLineWidthForHitTesting) / 2;\n  var squareX = (x - cx) * (x - cx);\n  var squareY = (y - cy) * (y - cy);\n  //  x*x/rx*rx + y*y/ry*ry = 1;\n  if (hasFill && hasStroke || isClipPath) {\n    return ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <= 1;\n  }\n  if (hasFill) {\n    return ellipseDistance(squareX, squareY, rx, ry) <= 1;\n  }\n  if (hasStroke) {\n    return ellipseDistance(squareX, squareY, rx - halfLineWith, ry - halfLineWith) >= 1 && ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <= 1;\n  }\n  return false;\n}\n\nfunction inBox(minX, minY, width, height, x, y) {\n  return x >= minX && x <= minX + width && y >= minY && y <= minY + height;\n}\nfunction inRect(minX, minY, width, height, lineWidth, x, y) {\n  var halfWidth = lineWidth / 2;\n  // \n  return inBox(minX - halfWidth, minY - halfWidth, width, lineWidth, x, y) ||\n  // \n  inBox(minX + width - halfWidth, minY - halfWidth, lineWidth, height, x, y) ||\n  // \n  inBox(minX + halfWidth, minY + height - halfWidth, width, lineWidth, x, y) ||\n  // \n  inBox(minX - halfWidth, minY + halfWidth, lineWidth, height, x, y); // \n}\nfunction inArc(cx, cy, r, startAngle, endAngle, lineWidth, x, y) {\n  var angle = (Math.atan2(y - cy, x - cx) + Math.PI * 2) % (Math.PI * 2); //  0 - 2 * Math.PI \n  // if (angle < startAngle || angle > endAngle) {\n  //   return false;\n  // }\n  var point = {\n    x: cx + r * Math.cos(angle),\n    y: cy + r * Math.sin(angle)\n  };\n  return distance(point.x, point.y, x, y) <= lineWidth / 2;\n}\nfunction inLine(x1, y1, x2, y2, lineWidth, x, y) {\n  var minX = Math.min(x1, x2);\n  var maxX = Math.max(x1, x2);\n  var minY = Math.min(y1, y2);\n  var maxY = Math.max(y1, y2);\n  var halfWidth = lineWidth / 2;\n  // \n  //  lineWidth \n  if (!(x >= minX - halfWidth && x <= maxX + halfWidth && y >= minY - halfWidth && y <= maxY + halfWidth)) {\n    return false;\n  }\n  // \n  return linePointToLine(x1, y1, x2, y2, x, y) <= lineWidth / 2;\n}\nfunction inPolyline(points, lineWidth, x, y, isClose) {\n  var count = points.length;\n  if (count < 2) {\n    return false;\n  }\n  for (var i = 0; i < count - 1; i++) {\n    var x1 = points[i][0];\n    var y1 = points[i][1];\n    var x2 = points[i + 1][0];\n    var y2 = points[i + 1][1];\n    if (inLine(x1, y1, x2, y2, lineWidth, x, y)) {\n      return true;\n    }\n  }\n\n  // \n  if (isClose) {\n    var first = points[0];\n    var last = points[count - 1];\n    if (inLine(first[0], first[1], last[0], last[1], lineWidth, x, y)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// https://blog.csdn.net/WilliamSun0122/article/details/77994526\nvar tolerance = 1e-6;\n// doubleeps\nfunction dcmp(x) {\n  if (Math.abs(x) < tolerance) {\n    return 0;\n  }\n  return x < 0 ? -1 : 1;\n}\n\n// Qp1p2\nfunction onSegment(p1, p2, q) {\n  if ((q[0] - p1[0]) * (p2[1] - p1[1]) === (p2[0] - p1[0]) * (q[1] - p1[1]) && Math.min(p1[0], p2[0]) <= q[0] && q[0] <= Math.max(p1[0], p2[0]) && Math.min(p1[1], p2[1]) <= q[1] && q[1] <= Math.max(p1[1], p2[1])) {\n    return true;\n  }\n  return false;\n}\n\n// P-\nfunction inPolygon(points, x, y) {\n  var isHit = false;\n  var n = points.length;\n  if (n <= 2) {\n    // svg  3 \n    return false;\n  }\n  for (var i = 0; i < n; i++) {\n    var p1 = points[i];\n    var p2 = points[(i + 1) % n];\n    if (onSegment(p1, p2, [x, y])) {\n      // \n      return true;\n    }\n    // min(p1[1],p2[1])<P.y<=max(p1[1],p2[1])\n    //    \n    if (dcmp(p1[1] - y) > 0 !== dcmp(p2[1] - y) > 0 && dcmp(x - (y - p1[1]) * (p1[0] - p2[0]) / (p1[1] - p2[1]) - p1[0]) < 0) {\n      isHit = !isHit;\n    }\n  }\n  return isHit;\n}\nfunction inPolygons(polygons, x, y) {\n  var isHit = false;\n  for (var i = 0; i < polygons.length; i++) {\n    var points = polygons[i];\n    isHit = inPolygon(points, x, y);\n    if (isHit) {\n      break;\n    }\n  }\n  return isHit;\n}\n\nfunction isPointInPath$6(displayObject, position, isClipPath) {\n  var _ref = displayObject.parsedStyle,\n    x1 = _ref.x1,\n    y1 = _ref.y1,\n    x2 = _ref.x2,\n    y2 = _ref.y2,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents,\n    fill = _ref.fill,\n    stroke = _ref.stroke;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasStroke = _isFillOrStrokeAffect2[1];\n  if (!hasStroke && !isClipPath || !lineWidth) {\n    return false;\n  }\n  return inLine(x1, y1, x2, y2, lineWidth + increasedLineWidthForHitTesting, position.x, position.y);\n}\n\n// TODO: replace it with method in @antv/util\nfunction isPointInStroke(segments, lineWidth, px, py, length) {\n  var isHit = false;\n  var halfWidth = lineWidth / 2;\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n    var currentPoint = segment.currentPoint,\n      params = segment.params,\n      prePoint = segment.prePoint,\n      box = segment.box;\n    // \n    if (box && !inBox(box.x - halfWidth, box.y - halfWidth, box.width + lineWidth, box.height + lineWidth, px, py)) {\n      continue;\n    }\n    switch (segment.command) {\n      // L  Z  M \n      case 'L':\n      case 'Z':\n        isHit = inLine(prePoint[0], prePoint[1], currentPoint[0], currentPoint[1], lineWidth, px, py);\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'Q':\n        var qDistance = quadPointDistance(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], px, py);\n        isHit = qDistance <= lineWidth / 2;\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'C':\n        var cDistance = cubicPointDistance(prePoint[0],\n        // ,  C \n        prePoint[1], params[1],\n        // 'C' 12 34 56 \n        params[2], params[3], params[4], params[5], params[6], px, py, length);\n        isHit = cDistance <= lineWidth / 2;\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'A':\n        // cache conversion result\n        if (!segment.cubicParams) {\n          segment.cubicParams = arcToCubic(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], params[5], params[6], params[7], undefined);\n        }\n        var args = segment.cubicParams;\n\n        // fixArc\n        var prePointInCubic = prePoint;\n        for (var _i = 0; _i < args.length; _i += 6) {\n          var _cDistance = cubicPointDistance(prePointInCubic[0],\n          // ,  C \n          prePointInCubic[1], args[_i], args[_i + 1], args[_i + 2], args[_i + 3], args[_i + 4], args[_i + 5], px, py, length);\n          prePointInCubic = [args[_i + 4], args[_i + 5]];\n          isHit = _cDistance <= lineWidth / 2;\n          if (isHit) {\n            return true;\n          }\n        }\n        break;\n    }\n  }\n  return isHit;\n}\nfunction isPointInPath$5(displayObject, position, isClipPath, isPointInPath, renderingPluginContext, runtime) {\n  var _ref = displayObject.parsedStyle,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    stroke = _ref.stroke,\n    fill = _ref.fill,\n    d = _ref.d,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents;\n  var segments = d.segments,\n    hasArc = d.hasArc,\n    polylines = d.polylines,\n    polygons = d.polygons;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents,\n    // Only a closed path can be filled.\n    (polygons === null || polygons === void 0 ? void 0 : polygons.length) && fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasFill = _isFillOrStrokeAffect2[0],\n    hasStroke = _isFillOrStrokeAffect2[1];\n  var totalLength = getOrCalculatePathTotalLength(displayObject);\n  var isHit = false;\n  if (hasFill || isClipPath) {\n    if (hasArc) {\n      //  canvas  api \n      isHit = isPointInPath(displayObject, position);\n    } else {\n      // \n      isHit = inPolygons(polygons, position.x, position.y) || inPolygons(polylines, position.x, position.y);\n    }\n    return isHit;\n  }\n  if (hasStroke || isClipPath) {\n    isHit = isPointInStroke(segments, lineWidth + increasedLineWidthForHitTesting, position.x, position.y, totalLength);\n  }\n  return isHit;\n}\n\nfunction isPointInPath$4(displayObject, position, isClipPath) {\n  var _ref = displayObject.parsedStyle,\n    stroke = _ref.stroke,\n    fill = _ref.fill,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    points = _ref.points,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasFill = _isFillOrStrokeAffect2[0],\n    hasStroke = _isFillOrStrokeAffect2[1];\n  var isHit = false;\n  if (hasStroke || isClipPath) {\n    isHit = inPolyline(points.points, lineWidth + increasedLineWidthForHitTesting, position.x, position.y, true);\n  }\n  if (!isHit && (hasFill || isClipPath)) {\n    isHit = inPolygon(points.points, position.x, position.y);\n  }\n  return isHit;\n}\n\nfunction isPointInPath$3(displayObject, position, isClipPath) {\n  var _ref = displayObject.parsedStyle,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    points = _ref.points,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents,\n    fill = _ref.fill,\n    stroke = _ref.stroke;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasStroke = _isFillOrStrokeAffect2[1];\n  if (!hasStroke && !isClipPath || !lineWidth) {\n    return false;\n  }\n  return inPolyline(points.points, lineWidth + increasedLineWidthForHitTesting, position.x, position.y, false);\n}\n\nfunction isPointInPath$2(displayObject, position, isClipPath, isPointInPath, runtime) {\n  var _ref = displayObject.parsedStyle,\n    radius = _ref.radius,\n    fill = _ref.fill,\n    stroke = _ref.stroke,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    _ref$x = _ref.x,\n    x = _ref$x === void 0 ? 0 : _ref$x,\n    _ref$y = _ref.y,\n    y = _ref$y === void 0 ? 0 : _ref$y,\n    width = _ref.width,\n    height = _ref.height,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasFill = _isFillOrStrokeAffect2[0],\n    hasStroke = _isFillOrStrokeAffect2[1];\n  var hasRadius = radius && radius.some(function (r) {\n    return r !== 0;\n  });\n  var lineWidthForHitTesting = lineWidth + increasedLineWidthForHitTesting;\n\n  // \n  if (!hasRadius) {\n    var halfWidth = lineWidthForHitTesting / 2;\n    // \n    if (hasFill && hasStroke || isClipPath) {\n      return inBox(x - halfWidth, y - halfWidth, width + halfWidth, height + halfWidth, position.x, position.y);\n    }\n    // \n    if (hasFill) {\n      return inBox(x, y, width, height, position.x, position.y);\n    }\n    if (hasStroke) {\n      return inRect(x, y, width, height, lineWidthForHitTesting, position.x, position.y);\n    }\n  } else {\n    var isHit = false;\n    if (hasStroke || isClipPath) {\n      isHit = inRectWithRadius(x, y, width, height, radius.map(function (r) {\n        return clamp(r, 0, Math.min(Math.abs(width) / 2, Math.abs(height) / 2));\n      }), lineWidthForHitTesting, position.x, position.y);\n    }\n    // \n    // \n    if (!isHit && (hasFill || isClipPath)) {\n      isHit = isPointInPath(displayObject, position);\n    }\n    return isHit;\n  }\n  return false;\n}\nfunction inRectWithRadius(minX, minY, width, height, radiusArray, lineWidth, x, y) {\n  var _radiusArray = _slicedToArray(radiusArray, 4),\n    tlr = _radiusArray[0],\n    trr = _radiusArray[1],\n    brr = _radiusArray[2],\n    blr = _radiusArray[3];\n  return inLine(minX + tlr, minY, minX + width - trr, minY, lineWidth, x, y) || inLine(minX + width, minY + trr, minX + width, minY + height - brr, lineWidth, x, y) || inLine(minX + width - brr, minY + height, minX + blr, minY + height, lineWidth, x, y) || inLine(minX, minY + height - blr, minX, minY + tlr, lineWidth, x, y) || inArc(minX + width - trr, minY + trr, trr, 1.5 * Math.PI, 2 * Math.PI, lineWidth, x, y) || inArc(minX + width - brr, minY + height - brr, brr, 0, 0.5 * Math.PI, lineWidth, x, y) || inArc(minX + blr, minY + height - blr, blr, 0.5 * Math.PI, Math.PI, lineWidth, x, y) || inArc(minX + tlr, minY + tlr, tlr, Math.PI, 1.5 * Math.PI, lineWidth, x, y);\n}\n\nfunction isPointInPath$1(displayObject, position, isClipPath, isPointInPath, renderingPluginContext, runtime) {\n  var _ref = displayObject.parsedStyle,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents,\n    _ref$x = _ref.x,\n    x = _ref$x === void 0 ? 0 : _ref$x,\n    _ref$y = _ref.y,\n    y = _ref$y === void 0 ? 0 : _ref$y,\n    width = _ref.width,\n    height = _ref.height;\n  if (pointerEvents === 'non-transparent-pixel') {\n    var offscreenCanvas = renderingPluginContext.config.offscreenCanvas;\n    var canvas = runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n    var context = runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas, {\n      willReadFrequently: true\n    });\n    canvas.width = width;\n    canvas.height = height;\n    renderingPluginContext.defaultStyleRendererFactory[Shape.IMAGE].render(context, _objectSpread(_objectSpread({}, displayObject.parsedStyle), {}, {\n      x: 0,\n      y: 0\n    }), displayObject, undefined, undefined, undefined);\n    var imagedata = context.getImageData(position.x - x, position.y - y, 1, 1).data;\n    return imagedata.every(function (component) {\n      return component !== 0;\n    });\n  }\n  return true;\n}\n\nfunction isPointInPath(displayObject, position, isClipPath, isPointInPath) {\n  var bounds = displayObject.getGeometryBounds();\n\n  // @see https://stackoverflow.com/questions/28706989/how-do-i-check-if-a-mouse-click-is-inside-a-rotated-text-on-the-html5-canvas-in\n  return position.x >= bounds.min[0] && position.y >= bounds.min[1] && position.x <= bounds.max[0] && position.y <= bounds.max[1];\n}\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'canvas-picker';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      var _pointInPathPickerFac;\n      var pointInPathPickerFactory = (_pointInPathPickerFac = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_pointInPathPickerFac, Shape.CIRCLE, isPointInPath$8), Shape.ELLIPSE, isPointInPath$7), Shape.RECT, isPointInPath$2), Shape.LINE, isPointInPath$6), Shape.POLYLINE, isPointInPath$3), Shape.POLYGON, isPointInPath$4), Shape.PATH, isPointInPath$5), Shape.TEXT, isPointInPath), Shape.GROUP, null), Shape.IMAGE, isPointInPath$1), _defineProperty(_defineProperty(_pointInPathPickerFac, Shape.HTML, null), Shape.MESH, null));\n\n      // @ts-ignore\n      this.context.pointInPathPickerFactory = pointInPathPickerFactory;\n      this.addRenderingPlugin(new CanvasPickerPlugin());\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // @ts-ignore\n      delete this.context.pointInPathPickerFactory;\n      this.removeAllRenderingPlugins();\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","function _classPrivateFieldBase(e, t) {\n  if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\");\n  return e;\n}\nexport { _classPrivateFieldBase as default };","var id = 0;\nfunction _classPrivateFieldKey(e) {\n  return \"__private_\" + id++ + \"_\" + e;\n}\nexport { _classPrivateFieldKey as default };","/*!\n * @antv/g-plugin-image-loader\n * @description A G plugin for loading image\n * @version 2.1.21\n * @date 4/14/2025, 2:54:58 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { ElementEvent, OffscreenCanvasCreator, parsedTransformToMat4, parseTransform, DisplayObject, GradientType, computeLinearGradient, computeRadialGradient, UnitType, Shape, AbstractRendererPlugin } from '@antv/g-lite';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport { isString } from '@antv/util';\nimport { mat4 } from 'gl-matrix';\n\nvar RefCountCache = /*#__PURE__*/function () {\n  function RefCountCache() {\n    _classCallCheck(this, RefCountCache);\n    this.cacheStore = new Map();\n  }\n  return _createClass(RefCountCache, [{\n    key: \"onRefAdded\",\n    value: function onRefAdded(ref) {}\n  }, {\n    key: \"has\",\n    value: function has(key) {\n      return this.cacheStore.has(key);\n    }\n  }, {\n    key: \"put\",\n    value: function put(key, item, ref) {\n      if (this.cacheStore.has(key)) {\n        return false;\n      }\n      this.cacheStore.set(key, {\n        value: item,\n        counter: new Set([ref])\n      });\n      this.onRefAdded(ref);\n      return true;\n    }\n  }, {\n    key: \"get\",\n    value: function get(key, ref) {\n      var cacheItem = this.cacheStore.get(key);\n      if (!cacheItem) {\n        return null;\n      }\n      if (!cacheItem.counter.has(ref)) {\n        cacheItem.counter.add(ref);\n        this.onRefAdded(ref);\n      }\n      return cacheItem.value;\n    }\n  }, {\n    key: \"update\",\n    value: function update(key, value, ref) {\n      var cacheItem = this.cacheStore.get(key);\n      if (!cacheItem) {\n        return false;\n      }\n      cacheItem.value = _objectSpread(_objectSpread({}, cacheItem.value), value);\n      if (!cacheItem.counter.has(ref)) {\n        cacheItem.counter.add(ref);\n        this.onRefAdded(ref);\n      }\n      return true;\n    }\n  }, {\n    key: \"release\",\n    value: function release(key, ref) {\n      var cacheItem = this.cacheStore.get(key);\n      if (!cacheItem) {\n        return false;\n      }\n      cacheItem.counter[\"delete\"](ref);\n      if (cacheItem.counter.size <= 0) {\n        this.cacheStore[\"delete\"](key);\n      }\n      return true;\n    }\n  }, {\n    key: \"releaseRef\",\n    value: function releaseRef(ref) {\n      var _this = this;\n      Array.from(this.cacheStore.keys()).forEach(function (key) {\n        _this.release(key, ref);\n      });\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      return this.cacheStore.size;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.cacheStore.clear();\n    }\n  }]);\n}();\n\nvar tasks = [];\nvar nextFrameTasks = [];\nvar ImageSlicer = /*#__PURE__*/function () {\n  function ImageSlicer() {\n    _classCallCheck(this, ImageSlicer);\n  }\n  return _createClass(ImageSlicer, null, [{\n    key: \"stop\",\n    value: function stop() {\n      var api = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ImageSlicer.api;\n      if (ImageSlicer.rafId) {\n        api.cancelAnimationFrame(ImageSlicer.rafId);\n        ImageSlicer.rafId = null;\n      }\n    }\n  }, {\n    key: \"executeTask\",\n    value: function executeTask() {\n      var api = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ImageSlicer.api;\n      if (tasks.length <= 0 && nextFrameTasks.length <= 0) {\n        return;\n      }\n      nextFrameTasks.forEach(function (task) {\n        return task();\n      });\n      nextFrameTasks = tasks.splice(0, ImageSlicer.TASK_NUM_PER_FRAME);\n      ImageSlicer.rafId = api.requestAnimationFrame(function () {\n        ImageSlicer.executeTask(api);\n      });\n    }\n  }, {\n    key: \"sliceImage\",\n    value: function sliceImage(image, sliceWidth, sliceHeight, rerender) {\n      var overlap = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n      var api = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : ImageSlicer.api;\n      var imageWidth = image.naturalWidth || image.width;\n      var imageHeight = image.naturalHeight || image.height;\n\n      // ()\n      var strideW = sliceWidth - overlap;\n      var strideH = sliceHeight - overlap;\n\n      // \n      var gridCols = Math.ceil(imageWidth / strideW);\n      var gridRows = Math.ceil(imageHeight / strideH);\n      var result = {\n        tileSize: [sliceWidth, sliceHeight],\n        gridSize: [gridRows, gridCols],\n        tiles: Array(gridRows).fill(null).map(function () {\n          return Array(gridCols).fill(null);\n        })\n      };\n\n      // \n      var _loop = function _loop(row) {\n        var _loop2 = function _loop2(col) {\n          tasks.push(function () {\n            // \n            var startX = col * strideW;\n            var startY = row * strideH;\n\n            // /\n            var _ref = [Math.min(sliceWidth, imageWidth - startX), Math.min(sliceHeight, imageHeight - startY)],\n              tempSliceWidth = _ref[0],\n              tempSliceHeight = _ref[1];\n\n            // canvas\n            var sliceCanvas = api.createCanvas();\n            sliceCanvas.width = sliceWidth;\n            sliceCanvas.height = sliceHeight;\n            var sliceCtx = sliceCanvas.getContext('2d');\n\n            // canvas\n            sliceCtx.drawImage(image, startX, startY, tempSliceWidth, tempSliceHeight, 0, 0, tempSliceWidth, tempSliceHeight);\n\n            // \n            result.tiles[row][col] = {\n              x: startX,\n              y: startY,\n              tileX: col,\n              tileY: row,\n              data: sliceCanvas\n            };\n            rerender();\n          });\n        };\n        for (var col = 0; col < gridCols; col++) {\n          _loop2(col);\n        }\n      };\n      for (var row = 0; row < gridRows; row++) {\n        _loop(row);\n      }\n      ImageSlicer.stop();\n      ImageSlicer.executeTask();\n      return result;\n    }\n  }]);\n}();\nImageSlicer.TASK_NUM_PER_FRAME = 10;\n\nvar IMAGE_CACHE = new RefCountCache();\nIMAGE_CACHE.onRefAdded = function onRefAdded(ref) {\n  var _this = this;\n  ref.addEventListener(ElementEvent.DESTROY, function () {\n    _this.releaseRef(ref);\n  }, {\n    once: true\n  });\n};\nvar ImagePool = /*#__PURE__*/function () {\n  function ImagePool(context, runtime) {\n    _classCallCheck(this, ImagePool);\n    this.gradientCache = {};\n    this.patternCache = {};\n    this.context = context;\n    this.runtime = runtime;\n  }\n  return _createClass(ImagePool, [{\n    key: \"getImageSync\",\n    value: function getImageSync(src, ref, callback) {\n      var imageSource = isString(src) ? src : src.src;\n      if (IMAGE_CACHE.has(imageSource)) {\n        var imageCache = IMAGE_CACHE.get(imageSource, ref);\n        if (imageCache.img.complete) {\n          callback === null || callback === void 0 || callback(imageCache);\n          return imageCache;\n        }\n      }\n      this.getOrCreateImage(src, ref).then(function (cache) {\n        callback === null || callback === void 0 || callback(cache);\n      })[\"catch\"](function (reason) {\n        console.error(reason);\n      });\n      return null;\n    }\n  }, {\n    key: \"getOrCreateImage\",\n    value: function getOrCreateImage(src, ref) {\n      var _this2 = this;\n      var imageSource = isString(src) ? src : src.src;\n      if (!isString(src) && !IMAGE_CACHE.has(imageSource)) {\n        var imageCache = {\n          img: src,\n          size: [src.naturalWidth || src.width, src.naturalHeight || src.height],\n          tileSize: calculateImageTileSize(src)\n        };\n        IMAGE_CACHE.put(imageSource, imageCache, ref);\n      }\n      if (IMAGE_CACHE.has(imageSource)) {\n        var _imageCache = IMAGE_CACHE.get(imageSource, ref);\n        if (_imageCache.img.complete) {\n          return Promise.resolve(_imageCache);\n        }\n        return new Promise(function (resolve, reject) {\n          _imageCache.img.addEventListener('load', function () {\n            _imageCache.size = [_imageCache.img.naturalWidth || _imageCache.img.width, _imageCache.img.naturalHeight || _imageCache.img.height];\n            _imageCache.tileSize = calculateImageTileSize(_imageCache.img);\n            resolve(_imageCache);\n          });\n          _imageCache.img.addEventListener('error', function (ev) {\n            reject(ev);\n          });\n        });\n      }\n      return new Promise(function (resolve, reject) {\n        // @see https://github.com/antvis/g/issues/938\n        var image = _this2.context.config.createImage();\n        if (image) {\n          var _imageCache2 = {\n            img: image,\n            size: [0, 0],\n            tileSize: calculateImageTileSize(image)\n          };\n          IMAGE_CACHE.put(imageSource, _imageCache2, ref);\n          image.onload = function () {\n            _imageCache2.size = [image.naturalWidth || image.width, image.naturalHeight || image.height];\n            _imageCache2.tileSize = calculateImageTileSize(_imageCache2.img);\n            resolve(_imageCache2);\n          };\n          image.onerror = function (ev) {\n            reject(ev);\n          };\n          image.crossOrigin = 'Anonymous';\n          image.src = imageSource;\n        }\n      });\n    }\n  }, {\n    key: \"createDownSampledImage\",\n    value: function () {\n      var _createDownSampledImage = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(src, ref) {\n        var imageCache, enableLargeImageOptimization, _ref, _ref$maxDownSampledIm, maxDownSampledImageSize, _ref$downSamplingRate, downSamplingRateThreshold, createImageBitmapFunc, _imageCache$size, originWidth, originHeight, resizedImage, downSamplingRate, updateCache;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.getOrCreateImage(src, ref);\n            case 2:\n              imageCache = _context.sent;\n              if (!(typeof imageCache.downSamplingRate !== 'undefined')) {\n                _context.next = 5;\n                break;\n              }\n              return _context.abrupt(\"return\", imageCache);\n            case 5:\n              enableLargeImageOptimization = this.context.config.enableLargeImageOptimization;\n              _ref = typeof enableLargeImageOptimization === 'boolean' ? {} : enableLargeImageOptimization, _ref$maxDownSampledIm = _ref.maxDownSampledImageSize, maxDownSampledImageSize = _ref$maxDownSampledIm === void 0 ? 2048 : _ref$maxDownSampledIm, _ref$downSamplingRate = _ref.downSamplingRateThreshold, downSamplingRateThreshold = _ref$downSamplingRate === void 0 ? 0.5 : _ref$downSamplingRate;\n              createImageBitmapFunc = this.runtime.globalThis.createImageBitmap;\n              _imageCache$size = _slicedToArray(imageCache.size, 2), originWidth = _imageCache$size[0], originHeight = _imageCache$size[1];\n              resizedImage = imageCache.img;\n              downSamplingRate = Math.min((maxDownSampledImageSize + maxDownSampledImageSize) / (originWidth + originHeight), Math.max(0.01, Math.min(downSamplingRateThreshold, 0.5)));\n              updateCache = _objectSpread(_objectSpread({}, imageCache), {}, {\n                downSamplingRate: downSamplingRate\n              });\n              IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n              if (!createImageBitmapFunc) {\n                _context.next = 25;\n                break;\n              }\n              _context.prev = 14;\n              _context.next = 17;\n              return createImageBitmapFunc(imageCache.img, {\n                resizeWidth: originWidth * downSamplingRate,\n                resizeHeight: originHeight * downSamplingRate\n              });\n            case 17:\n              resizedImage = _context.sent;\n              _context.next = 23;\n              break;\n            case 20:\n              _context.prev = 20;\n              _context.t0 = _context[\"catch\"](14);\n              downSamplingRate = 1;\n            case 23:\n              _context.next = 26;\n              break;\n            case 25:\n              downSamplingRate = 1;\n            case 26:\n              updateCache = _objectSpread(_objectSpread({}, this.getImageSync(src, ref)), {}, {\n                downSampled: resizedImage,\n                downSamplingRate: downSamplingRate\n              });\n              IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n              return _context.abrupt(\"return\", updateCache);\n            case 29:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[14, 20]]);\n      }));\n      function createDownSampledImage(_x, _x2) {\n        return _createDownSampledImage.apply(this, arguments);\n      }\n      return createDownSampledImage;\n    }()\n  }, {\n    key: \"createImageTiles\",\n    value: function () {\n      var _createImageTiles = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(src, tiles, rerender, ref) {\n        var imageCache, _ref$ownerDocument$de, requestAnimationFrame, cancelAnimationFrame, updateCache;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.getOrCreateImage(src, ref);\n            case 2:\n              imageCache = _context2.sent;\n              _ref$ownerDocument$de = ref.ownerDocument.defaultView, requestAnimationFrame = _ref$ownerDocument$de.requestAnimationFrame, cancelAnimationFrame = _ref$ownerDocument$de.cancelAnimationFrame;\n              ImageSlicer.api = {\n                requestAnimationFrame: requestAnimationFrame,\n                cancelAnimationFrame: cancelAnimationFrame,\n                createCanvas: function createCanvas() {\n                  return OffscreenCanvasCreator.createCanvas();\n                }\n              };\n              updateCache = _objectSpread(_objectSpread({}, imageCache), ImageSlicer.sliceImage(imageCache.img, imageCache.tileSize[0], imageCache.tileSize[0], rerender));\n              IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n              return _context2.abrupt(\"return\", updateCache);\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function createImageTiles(_x3, _x4, _x5, _x6) {\n        return _createImageTiles.apply(this, arguments);\n      }\n      return createImageTiles;\n    }()\n  }, {\n    key: \"releaseImage\",\n    value: function releaseImage(src, ref) {\n      IMAGE_CACHE.release(isString(src) ? src : src.src, ref);\n    }\n  }, {\n    key: \"releaseImageRef\",\n    value: function releaseImageRef(ref) {\n      IMAGE_CACHE.releaseRef(ref);\n    }\n  }, {\n    key: \"getOrCreatePatternSync\",\n    value: function getOrCreatePatternSync(object, pattern, context, $offscreenCanvas, dpr, min, callback) {\n      var patternKey = this.generatePatternKey(pattern);\n      if (patternKey && this.patternCache[patternKey]) {\n        return this.patternCache[patternKey];\n      }\n      var image = pattern.image,\n        repetition = pattern.repetition,\n        transform = pattern.transform;\n      var src;\n      var needScaleWithDPR = false;\n      // Image URL\n      if (isString(image)) {\n        var imageCache = this.getImageSync(image, object, callback);\n        src = imageCache === null || imageCache === void 0 ? void 0 : imageCache.img;\n      } else if ($offscreenCanvas) {\n        src = $offscreenCanvas;\n        needScaleWithDPR = true;\n      } else {\n        src = image;\n      }\n\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createPattern\n      var canvasPattern = src && context.createPattern(src, repetition);\n      if (canvasPattern) {\n        var mat;\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasPattern/setTransform\n        if (transform) {\n          mat = parsedTransformToMat4(parseTransform(transform), new DisplayObject({}));\n        } else {\n          mat = mat4.identity(mat4.create());\n        }\n        if (needScaleWithDPR) {\n          mat4.scale(mat, mat, [1 / dpr, 1 / dpr, 1]);\n        }\n        canvasPattern.setTransform({\n          a: mat[0],\n          b: mat[1],\n          c: mat[4],\n          d: mat[5],\n          e: mat[12] + min[0],\n          f: mat[13] + min[1]\n        });\n      }\n      if (patternKey && canvasPattern) {\n        this.patternCache[patternKey] = canvasPattern;\n      }\n      return canvasPattern;\n    }\n  }, {\n    key: \"getOrCreateGradient\",\n    value: function getOrCreateGradient(params, context) {\n      var key = this.generateGradientKey(params);\n      var type = params.type,\n        steps = params.steps,\n        min = params.min,\n        width = params.width,\n        height = params.height,\n        angle = params.angle,\n        cx = params.cx,\n        cy = params.cy,\n        size = params.size;\n      if (this.gradientCache[key]) {\n        return this.gradientCache[key];\n      }\n      var gradient = null;\n      if (type === GradientType.LinearGradient) {\n        var _computeLinearGradien = computeLinearGradient(min, width, height, angle),\n          x1 = _computeLinearGradien.x1,\n          y1 = _computeLinearGradien.y1,\n          x2 = _computeLinearGradien.x2,\n          y2 = _computeLinearGradien.y2;\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createLinearGradient\n        gradient = context.createLinearGradient(x1, y1, x2, y2);\n      } else if (type === GradientType.RadialGradient) {\n        var _computeRadialGradien = computeRadialGradient(min, width, height, cx, cy, size),\n          x = _computeRadialGradien.x,\n          y = _computeRadialGradien.y,\n          r = _computeRadialGradien.r;\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createRadialGradient\n        gradient = context.createRadialGradient(x, y, 0, x, y, r);\n      }\n      if (gradient) {\n        steps.forEach(function (_ref2) {\n          var offset = _ref2.offset,\n            color = _ref2.color;\n          if (offset.unit === UnitType.kPercentage) {\n            var _gradient;\n            (_gradient = gradient) === null || _gradient === void 0 || _gradient.addColorStop(offset.value / 100, color.toString());\n          }\n        });\n        this.gradientCache[key] = gradient;\n      }\n      return this.gradientCache[key];\n    }\n  }, {\n    key: \"generateGradientKey\",\n    value: function generateGradientKey(params) {\n      var type = params.type,\n        min = params.min,\n        width = params.width,\n        height = params.height,\n        steps = params.steps,\n        angle = params.angle,\n        cx = params.cx,\n        cy = params.cy,\n        size = params.size;\n      return \"gradient-\".concat(type, \"-\").concat((angle === null || angle === void 0 ? void 0 : angle.toString()) || 0, \"-\").concat((cx === null || cx === void 0 ? void 0 : cx.toString()) || 0, \"-\").concat((cy === null || cy === void 0 ? void 0 : cy.toString()) || 0, \"-\").concat((size === null || size === void 0 ? void 0 : size.toString()) || 0, \"-\").concat(min[0], \"-\").concat(min[1], \"-\").concat(width, \"-\").concat(height, \"-\").concat(steps.map(function (_ref3) {\n        var offset = _ref3.offset,\n          color = _ref3.color;\n        return \"\".concat(offset).concat(color);\n      }).join('-'));\n    }\n  }, {\n    key: \"generatePatternKey\",\n    value: function generatePatternKey(pattern) {\n      var image = pattern.image,\n        repetition = pattern.repetition;\n      // only generate cache for Image\n      if (isString(image)) {\n        return \"pattern-\".concat(image, \"-\").concat(repetition);\n      }\n      if (image.nodeName === 'rect') {\n        return \"pattern-\".concat(image.entity, \"-\").concat(repetition);\n      }\n    }\n  }]);\n}();\nImagePool.isSupportTile = !!OffscreenCanvasCreator.createCanvas();\nfunction calculateImageTileSize(img) {\n  if (!img.complete) {\n    return [0, 0];\n  }\n  var width = img.naturalWidth || img.width,\n    height = img.naturalHeight || img.height;\n  var tileSize = 256;\n  [256, 512].forEach(function (size) {\n    var rows = Math.ceil(height / size);\n    var cols = Math.ceil(width / size);\n    if (rows * cols < 1e3) {\n      tileSize = size;\n    }\n  });\n  return [tileSize, tileSize];\n}\n\nvar LoadImagePlugin = /*#__PURE__*/function () {\n  function LoadImagePlugin() {\n    _classCallCheck(this, LoadImagePlugin);\n  }\n  return _createClass(LoadImagePlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext,\n        imagePool = context.imagePool;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      var calculateWithAspectRatio = function calculateWithAspectRatio(object, imageWidth, imageHeight) {\n        var _object$parsedStyle = object.parsedStyle,\n          width = _object$parsedStyle.width,\n          height = _object$parsedStyle.height;\n        if (width && !height) {\n          object.setAttribute('height', imageHeight / imageWidth * width);\n        } else if (!width && height) {\n          object.setAttribute('width', imageWidth / imageHeight * height);\n        }\n      };\n      var handleMounted = function handleMounted(e) {\n        var object = e.target;\n        var nodeName = object.nodeName,\n          attributes = object.attributes;\n        if (nodeName === Shape.IMAGE) {\n          var src = attributes.src,\n            keepAspectRatio = attributes.keepAspectRatio;\n          imagePool.getImageSync(src, object, function (_ref) {\n            var _ref$img = _ref.img,\n              width = _ref$img.width,\n              height = _ref$img.height;\n            if (keepAspectRatio) {\n              calculateWithAspectRatio(object, width, height);\n            }\n\n            // set dirty rectangle flag\n            object.renderable.dirty = true;\n            renderingService.dirtify();\n          });\n        }\n      };\n      var handleAttributeChanged = function handleAttributeChanged(e) {\n        var object = e.target;\n        var attrName = e.attrName,\n          prevValue = e.prevValue,\n          newValue = e.newValue;\n        if (object.nodeName !== Shape.IMAGE || attrName !== 'src') {\n          return;\n        }\n        if (prevValue !== newValue) {\n          imagePool.releaseImage(prevValue, object);\n        }\n        if (isString(newValue)) {\n          imagePool.getOrCreateImage(newValue, object).then(function (_ref2) {\n            var _ref2$img = _ref2.img,\n              width = _ref2$img.width,\n              height = _ref2$img.height;\n            if (object.attributes.keepAspectRatio) {\n              calculateWithAspectRatio(object, width, height);\n            }\n\n            // set dirty rectangle flag\n            object.renderable.dirty = true;\n            renderingService.dirtify();\n          })[\"catch\"](function () {\n            //\n          });\n        }\n      };\n      renderingService.hooks.init.tap(LoadImagePlugin.tag, function () {\n        canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.addEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n      });\n      renderingService.hooks.destroy.tap(LoadImagePlugin.tag, function () {\n        canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.removeEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n      });\n    }\n  }]);\n}();\nLoadImagePlugin.tag = 'LoadImage';\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'image-loader';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init(runtime) {\n      // @ts-ignore\n      this.context.imagePool = new ImagePool(this.context, runtime);\n      this.addRenderingPlugin(new LoadImagePlugin());\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { ImagePool, Plugin };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-plugin-canvas-renderer\n * @description A G plugin of renderer implementation with Canvas2D API\n * @version 2.2.21\n * @date 4/14/2025, 2:55:44 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { ElementEvent, AABB, CustomEvent, CanvasEvent, Shape, Node, GradientType, isPattern, AbstractRendererPlugin } from '@antv/g-lite';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _classPrivateFieldLooseBase from '@babel/runtime/helpers/classPrivateFieldLooseBase';\nimport _classPrivateFieldLooseKey from '@babel/runtime/helpers/classPrivateFieldLooseKey';\nimport { mat4, vec3 } from 'gl-matrix';\nimport { isNil } from '@antv/util';\nimport { ImagePool } from '@antv/g-plugin-image-loader';\n\nvar _renderState = /*#__PURE__*/_classPrivateFieldLooseKey(\"renderState\");\n/**\n * support 2 modes in rendering:\n * * immediate\n * * delayed: render at the end of frame with dirty-rectangle\n */\nvar CanvasRendererPlugin = /*#__PURE__*/function () {\n  /**\n   * RBush used in dirty rectangle rendering\n   */\n\n  function CanvasRendererPlugin(canvasRendererPluginOptions // private styleRendererFactory: Record<Shape, StyleRenderer>,\n  ) {\n    _classCallCheck(this, CanvasRendererPlugin);\n    this.removedRBushNodeAABBs = [];\n    this.renderQueue = [];\n    Object.defineProperty(this, _renderState, {\n      writable: true,\n      value: {\n        restoreStack: [],\n        prevObject: null,\n        currentContext: new Map()\n      }\n    });\n    this.clearFullScreenLastFrame = false;\n    this.clearFullScreen = false;\n    /**\n     * view projection matrix\n     */\n    this.vpMatrix = mat4.create();\n    this.dprMatrix = mat4.create();\n    this.tmpMat4 = mat4.create();\n    this.vec3a = vec3.create();\n    this.vec3b = vec3.create();\n    this.vec3c = vec3.create();\n    this.vec3d = vec3.create();\n    this.canvasRendererPluginOptions = canvasRendererPluginOptions;\n  }\n  return _createClass(CanvasRendererPlugin, [{\n    key: \"apply\",\n    value: function apply(context, runtime) {\n      var _this = this;\n      this.context = context;\n      var _this$context = this.context,\n        config = _this$context.config,\n        camera = _this$context.camera,\n        renderingService = _this$context.renderingService,\n        renderingContext = _this$context.renderingContext,\n        rBushRoot = _this$context.rBushRoot,\n        pathGeneratorFactory = _this$context.pathGeneratorFactory;\n      var enableRenderingOptimization = config.renderer.getConfig().enableRenderingOptimization;\n      config.renderer.getConfig().enableDirtyCheck = false;\n      config.renderer.getConfig().enableDirtyRectangleRendering = false;\n      this.rBush = rBushRoot;\n      this.pathGeneratorFactory = pathGeneratorFactory;\n      var contextService = context.contextService;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      var handleUnmounted = function handleUnmounted(e) {\n        var object = e.target;\n\n        // remove r-bush node\n        // @ts-ignore\n        var rBushNode = object.rBushNode;\n        if (rBushNode.aabb) {\n          // save removed aabbs for dirty-rectangle rendering later\n          _this.removedRBushNodeAABBs.push(rBushNode.aabb);\n        }\n      };\n      var handleCulled = function handleCulled(e) {\n        var object = e.target;\n        // @ts-ignore\n        var rBushNode = object.rBushNode;\n        if (rBushNode.aabb) {\n          // save removed aabbs for dirty-rectangle rendering later\n          _this.removedRBushNodeAABBs.push(rBushNode.aabb);\n        }\n      };\n      renderingService.hooks.init.tap(CanvasRendererPlugin.tag, function () {\n        canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.addEventListener(ElementEvent.CULLED, handleCulled);\n\n        // clear fullscreen\n        var dpr = contextService.getDPR();\n        var width = config.width,\n          height = config.height;\n        var context = contextService.getContext();\n        _this.clearRect(context, 0, 0, width * dpr, height * dpr, config.background);\n      });\n      renderingService.hooks.destroy.tap(CanvasRendererPlugin.tag, function () {\n        canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.removeEventListener(ElementEvent.CULLED, handleCulled);\n        _this.renderQueue = [];\n        _this.removedRBushNodeAABBs = [];\n        _classPrivateFieldLooseBase(_this, _renderState)[_renderState] = {\n          restoreStack: [],\n          prevObject: null,\n          currentContext: null\n        };\n      });\n      renderingService.hooks.beginFrame.tap(CanvasRendererPlugin.tag, function () {\n        var _canvas$context$rende;\n        var context = contextService.getContext();\n        var dpr = contextService.getDPR();\n        var width = config.width,\n          height = config.height;\n        var _this$canvasRendererP = _this.canvasRendererPluginOptions,\n          dirtyObjectNumThreshold = _this$canvasRendererP.dirtyObjectNumThreshold,\n          dirtyObjectRatioThreshold = _this$canvasRendererP.dirtyObjectRatioThreshold;\n\n        // some heuristic conditions such as 80% object changed\n        var _renderingService$get = renderingService.getStats(),\n          total = _renderingService$get.total,\n          rendered = _renderingService$get.rendered;\n        var ratio = rendered / total;\n        _this.clearFullScreen = _this.clearFullScreenLastFrame ||\n        // @ts-ignore\n        !((_canvas$context$rende = canvas.context.renderingPlugins[1]) !== null && _canvas$context$rende !== void 0 && _canvas$context$rende.isFirstTimeRenderingFinished) || renderingService.disableDirtyRectangleRendering() || rendered > dirtyObjectNumThreshold && ratio > dirtyObjectRatioThreshold;\n        if (context) {\n          if (typeof context.resetTransform === 'function') {\n            context.resetTransform();\n          } else {\n            context.setTransform(1, 0, 0, 1, 0, 0);\n          }\n          if (_this.clearFullScreen) {\n            _this.clearRect(context, 0, 0, width * dpr, height * dpr, config.background);\n          }\n        }\n      });\n\n      /**\n       * render objects by z-index\n       *\n       * - The level of the child node will be affected by the level of the parent node\n       */\n      var renderByZIndex = function renderByZIndex(object, context) {\n        var stack = [object];\n        while (stack.length > 0) {\n          var _currentObject$sortab;\n          var currentObject = stack.pop();\n          if (currentObject.isVisible() && !currentObject.isCulled()) {\n            if (enableRenderingOptimization) {\n              _this.renderDisplayObjectOptimized(currentObject, context, _this.context, _classPrivateFieldLooseBase(_this, _renderState)[_renderState], runtime);\n            } else {\n              _this.renderDisplayObject(currentObject, context, _this.context, _classPrivateFieldLooseBase(_this, _renderState)[_renderState], runtime);\n            }\n          }\n          var objects = ((_currentObject$sortab = currentObject.sortable) === null || _currentObject$sortab === void 0 || (_currentObject$sortab = _currentObject$sortab.sorted) === null || _currentObject$sortab === void 0 ? void 0 : _currentObject$sortab.length) > 0 ? currentObject.sortable.sorted : currentObject.childNodes;\n          // should account for z-index\n          for (var i = objects.length - 1; i >= 0; i--) {\n            stack.push(objects[i]);\n          }\n        }\n      };\n\n      // render at the end of frame\n      renderingService.hooks.endFrame.tap(CanvasRendererPlugin.tag, function () {\n        // Skip rendering.\n        if (renderingContext.root.childNodes.length === 0) {\n          _this.clearFullScreenLastFrame = true;\n          return;\n        }\n        enableRenderingOptimization = config.renderer.getConfig().enableRenderingOptimization;\n\n        // init\n        _classPrivateFieldLooseBase(_this, _renderState)[_renderState] = {\n          restoreStack: [],\n          prevObject: null,\n          currentContext: _classPrivateFieldLooseBase(_this, _renderState)[_renderState].currentContext\n        };\n        _classPrivateFieldLooseBase(_this, _renderState)[_renderState].currentContext.clear();\n        _this.clearFullScreenLastFrame = false;\n        var context = contextService.getContext();\n        // clear & clip dirty rectangle\n        var dpr = contextService.getDPR();\n        mat4.fromScaling(_this.dprMatrix, [dpr, dpr, 1]);\n        mat4.multiply(_this.vpMatrix, _this.dprMatrix, camera.getOrthoMatrix());\n        if (_this.clearFullScreen) {\n          // console.time('renderByZIndex');\n          if (enableRenderingOptimization) {\n            context.save();\n            renderByZIndex(renderingContext.root, context);\n            context.restore();\n          } else {\n            renderByZIndex(renderingContext.root, context);\n          }\n          // console.timeEnd('renderByZIndex');\n\n          _this.removedRBushNodeAABBs = [];\n        } else {\n          // console.log('canvas renderer next...', this.renderQueue);\n          // merge removed AABB\n          var dirtyRenderBounds = _this.safeMergeAABB.apply(_this, [_this.mergeDirtyAABBs(_this.renderQueue)].concat(_toConsumableArray(_this.removedRBushNodeAABBs.map(function (_ref) {\n            var minX = _ref.minX,\n              minY = _ref.minY,\n              maxX = _ref.maxX,\n              maxY = _ref.maxY;\n            var aabb = new AABB();\n            aabb.setMinMax(\n            // vec3.fromValues(minX, minY, 0),\n            // vec3.fromValues(maxX, maxY, 0),\n            [minX, minY, 0], [maxX, maxY, 0]);\n            return aabb;\n          }))));\n          _this.removedRBushNodeAABBs = [];\n          if (AABB.isEmpty(dirtyRenderBounds)) {\n            _this.renderQueue = [];\n            return;\n          }\n          var dirtyRect = _this.convertAABB2Rect(dirtyRenderBounds);\n          var x = dirtyRect.x,\n            y = dirtyRect.y,\n            width = dirtyRect.width,\n            height = dirtyRect.height;\n          var tl = vec3.transformMat4(_this.vec3a, [x, y, 0], _this.vpMatrix);\n          var tr = vec3.transformMat4(_this.vec3b, [x + width, y, 0], _this.vpMatrix);\n          var bl = vec3.transformMat4(_this.vec3c, [x, y + height, 0], _this.vpMatrix);\n          var br = vec3.transformMat4(_this.vec3d, [x + width, y + height, 0], _this.vpMatrix);\n          var minx = Math.min(tl[0], tr[0], br[0], bl[0]);\n          var miny = Math.min(tl[1], tr[1], br[1], bl[1]);\n          var maxx = Math.max(tl[0], tr[0], br[0], bl[0]);\n          var maxy = Math.max(tl[1], tr[1], br[1], bl[1]);\n          var ix = Math.floor(minx);\n          var iy = Math.floor(miny);\n          var iwidth = Math.ceil(maxx - minx);\n          var iheight = Math.ceil(maxy - miny);\n          context.save();\n          _this.clearRect(context, ix, iy, iwidth, iheight, config.background);\n          context.beginPath();\n          context.rect(ix, iy, iwidth, iheight);\n          context.clip();\n\n          // @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations\n          context.setTransform(_this.vpMatrix[0], _this.vpMatrix[1], _this.vpMatrix[4], _this.vpMatrix[5], _this.vpMatrix[12], _this.vpMatrix[13]);\n\n          // draw dirty rectangle\n          var _config$renderer$getC = config.renderer.getConfig(),\n            enableDirtyRectangleRenderingDebug = _config$renderer$getC.enableDirtyRectangleRenderingDebug;\n          if (enableDirtyRectangleRenderingDebug) {\n            canvas.dispatchEvent(new CustomEvent(CanvasEvent.DIRTY_RECTANGLE, {\n              dirtyRect: {\n                x: ix,\n                y: iy,\n                width: iwidth,\n                height: iheight\n              }\n            }));\n          }\n\n          // search objects intersect with dirty rectangle\n          var dirtyObjects = _this.searchDirtyObjects(dirtyRenderBounds);\n\n          // do rendering\n          dirtyObjects\n          // sort by z-index\n          .sort(function (a, b) {\n            return a.sortable.renderOrder - b.sortable.renderOrder;\n          }).forEach(function (object) {\n            // culled object should not be rendered\n            if (object && object.isVisible() && !object.isCulled()) {\n              _this.renderDisplayObject(object, context, _this.context, _classPrivateFieldLooseBase(_this, _renderState)[_renderState], runtime);\n            }\n          });\n          context.restore();\n\n          // save dirty AABBs in last frame\n          _this.renderQueue.forEach(function (object) {\n            _this.saveDirtyAABB(object);\n          });\n\n          // clear queue\n          _this.renderQueue = [];\n        }\n\n        // pop restore stack, eg. root -> parent -> child\n        _classPrivateFieldLooseBase(_this, _renderState)[_renderState].restoreStack.forEach(function () {\n          context.restore();\n        });\n        // clear restore stack\n        _classPrivateFieldLooseBase(_this, _renderState)[_renderState].restoreStack = [];\n      });\n      renderingService.hooks.render.tap(CanvasRendererPlugin.tag, function (object) {\n        if (!_this.clearFullScreen) {\n          // render at the end of frame\n          _this.renderQueue.push(object);\n        }\n      });\n    }\n  }, {\n    key: \"clearRect\",\n    value: function clearRect(context, x, y, width, height, background) {\n      // clearRect is faster than fillRect @see https://stackoverflow.com/a/30830253\n      context.clearRect(x, y, width, height);\n      if (background) {\n        context.fillStyle = background;\n        context.fillRect(x, y, width, height);\n      }\n    }\n  }, {\n    key: \"renderDisplayObjectOptimized\",\n    value: function renderDisplayObjectOptimized(object, context, canvasContext, renderState, runtime) {\n      var nodeName = object.nodeName;\n      var updateTransform = false;\n      var clipDraw = false;\n\n      // @ts-ignore\n      var styleRenderer = this.context.styleRendererFactory[nodeName];\n      var generatePath = this.pathGeneratorFactory[nodeName];\n\n      // clip path\n      var clipPath = object.parsedStyle.clipPath;\n      if (clipPath) {\n        updateTransform = !renderState.prevObject || !mat4.exactEquals(clipPath.getWorldTransform(), renderState.prevObject.getWorldTransform());\n        if (updateTransform) {\n          this.applyWorldTransform(context, clipPath);\n          renderState.prevObject = null;\n        }\n\n        // generate path in local space\n        var _generatePath = this.pathGeneratorFactory[clipPath.nodeName];\n        if (_generatePath) {\n          context.save();\n          clipDraw = true;\n          context.beginPath();\n          _generatePath(context, clipPath.parsedStyle);\n          context.closePath();\n          context.clip();\n        }\n      }\n\n      // fill & stroke\n\n      if (styleRenderer) {\n        updateTransform = !renderState.prevObject || !mat4.exactEquals(object.getWorldTransform(), renderState.prevObject.getWorldTransform());\n        if (updateTransform) {\n          this.applyWorldTransform(context, object);\n        }\n        var forceUpdateStyle = !renderState.prevObject;\n        if (!forceUpdateStyle) {\n          var prevNodeName = renderState.prevObject.nodeName;\n          if (nodeName === Shape.TEXT) {\n            forceUpdateStyle = prevNodeName !== Shape.TEXT;\n          } else if (nodeName === Shape.IMAGE) {\n            forceUpdateStyle = prevNodeName !== Shape.IMAGE;\n          } else {\n            forceUpdateStyle = prevNodeName === Shape.TEXT || prevNodeName === Shape.IMAGE;\n          }\n        }\n        styleRenderer.applyStyleToContext(context, object, forceUpdateStyle, renderState);\n        renderState.prevObject = object;\n      }\n      if (generatePath) {\n        context.beginPath();\n        generatePath(context, object.parsedStyle);\n        if (nodeName !== Shape.LINE && nodeName !== Shape.PATH && nodeName !== Shape.POLYLINE) {\n          context.closePath();\n        }\n      }\n\n      // fill & stroke\n      if (styleRenderer) {\n        styleRenderer.drawToContext(context, object, _classPrivateFieldLooseBase(this, _renderState)[_renderState], this, runtime);\n      }\n      if (clipDraw) {\n        context.restore();\n      }\n\n      // finish rendering, clear dirty flag\n      object.renderable.dirty = false;\n    }\n  }, {\n    key: \"renderDisplayObject\",\n    value: function renderDisplayObject(object, context, canvasContext, renderState, runtime) {\n      var nodeName = object.nodeName;\n\n      // restore to its ancestor\n\n      var parent = renderState.restoreStack[renderState.restoreStack.length - 1];\n      if (parent && !(object.compareDocumentPosition(parent) & Node.DOCUMENT_POSITION_CONTAINS)) {\n        context.restore();\n        renderState.restoreStack.pop();\n      }\n\n      // @ts-ignore\n      var styleRenderer = this.context.styleRendererFactory[nodeName];\n      var generatePath = this.pathGeneratorFactory[nodeName];\n\n      // clip path\n      var clipPath = object.parsedStyle.clipPath;\n      if (clipPath) {\n        this.applyWorldTransform(context, clipPath);\n\n        // generate path in local space\n        var _generatePath2 = this.pathGeneratorFactory[clipPath.nodeName];\n        if (_generatePath2) {\n          context.save();\n\n          // save clip\n          renderState.restoreStack.push(object);\n          context.beginPath();\n          _generatePath2(context, clipPath.parsedStyle);\n          context.closePath();\n          context.clip();\n        }\n      }\n\n      // fill & stroke\n\n      if (styleRenderer) {\n        this.applyWorldTransform(context, object);\n        context.save();\n\n        // apply attributes to context\n        this.applyAttributesToContext(context, object);\n      }\n      if (generatePath) {\n        context.beginPath();\n        generatePath(context, object.parsedStyle);\n        if (nodeName !== Shape.LINE && nodeName !== Shape.PATH && nodeName !== Shape.POLYLINE) {\n          context.closePath();\n        }\n      }\n\n      // fill & stroke\n      if (styleRenderer) {\n        styleRenderer.render(context, object.parsedStyle, object, canvasContext, this, runtime);\n\n        // restore applied attributes, eg. shadowBlur shadowColor...\n        context.restore();\n      }\n\n      // finish rendering, clear dirty flag\n      object.renderable.dirty = false;\n    }\n  }, {\n    key: \"applyAttributesToContext\",\n    value: function applyAttributesToContext(context, object) {\n      var _ref2 = object.parsedStyle,\n        stroke = _ref2.stroke,\n        fill = _ref2.fill,\n        opacity = _ref2.opacity,\n        lineDash = _ref2.lineDash,\n        lineDashOffset = _ref2.lineDashOffset;\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/setLineDash\n      if (lineDash) {\n        context.setLineDash(lineDash);\n      }\n\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/lineDashOffset\n      if (!isNil(lineDashOffset)) {\n        context.lineDashOffset = lineDashOffset;\n      }\n      if (!isNil(opacity)) {\n        context.globalAlpha *= opacity;\n      }\n      if (!isNil(stroke) && !Array.isArray(stroke) && !stroke.isNone) {\n        context.strokeStyle = object.attributes.stroke;\n      }\n      if (!isNil(fill) && !Array.isArray(fill) && !fill.isNone) {\n        context.fillStyle = object.attributes.fill;\n      }\n    }\n  }, {\n    key: \"convertAABB2Rect\",\n    value: function convertAABB2Rect(aabb) {\n      var min = aabb.getMin();\n      var max = aabb.getMax();\n      // expand the rectangle a bit to avoid artifacts\n      // @see https://www.yuque.com/antv/ou292n/bi8nix#ExvCu\n      var minX = Math.floor(min[0]);\n      var minY = Math.floor(min[1]);\n      var maxX = Math.ceil(max[0]);\n      var maxY = Math.ceil(max[1]);\n      var width = maxX - minX;\n      var height = maxY - minY;\n      return {\n        x: minX,\n        y: minY,\n        width: width,\n        height: height\n      };\n    }\n\n    /**\n     * TODO: merge dirty rectangles with some strategies.\n     * For now, we just simply merge all the rectangles into one.\n     * @see https://idom.me/articles/841.html\n     */\n  }, {\n    key: \"mergeDirtyAABBs\",\n    value: function mergeDirtyAABBs(dirtyObjects) {\n      // merge into a big AABB\n      // TODO: skip descendant if ancestor is caculated, but compareNodePosition is really slow\n      var aabb = new AABB();\n      dirtyObjects.forEach(function (object) {\n        var renderBounds = object.getRenderBounds();\n        aabb.add(renderBounds);\n        var dirtyRenderBounds = object.renderable.dirtyRenderBounds;\n        if (dirtyRenderBounds) {\n          aabb.add(dirtyRenderBounds);\n        }\n      });\n      return aabb;\n    }\n  }, {\n    key: \"searchDirtyObjects\",\n    value: function searchDirtyObjects(dirtyRectangle) {\n      // search in r-tree, get all affected nodes\n      var _dirtyRectangle$getMi = dirtyRectangle.getMin(),\n        _dirtyRectangle$getMi2 = _slicedToArray(_dirtyRectangle$getMi, 2),\n        minX = _dirtyRectangle$getMi2[0],\n        minY = _dirtyRectangle$getMi2[1];\n      var _dirtyRectangle$getMa = dirtyRectangle.getMax(),\n        _dirtyRectangle$getMa2 = _slicedToArray(_dirtyRectangle$getMa, 2),\n        maxX = _dirtyRectangle$getMa2[0],\n        maxY = _dirtyRectangle$getMa2[1];\n      var rBushNodes = this.rBush.search({\n        minX: minX,\n        minY: minY,\n        maxX: maxX,\n        maxY: maxY\n      });\n      return rBushNodes.map(function (_ref3) {\n        var displayObject = _ref3.displayObject;\n        return displayObject;\n      });\n    }\n  }, {\n    key: \"saveDirtyAABB\",\n    value: function saveDirtyAABB(object) {\n      var renderable = object.renderable;\n      if (!renderable.dirtyRenderBounds) {\n        renderable.dirtyRenderBounds = new AABB();\n      }\n      var renderBounds = object.getRenderBounds();\n      if (renderBounds) {\n        // save last dirty aabb\n        renderable.dirtyRenderBounds.update(renderBounds.center, renderBounds.halfExtents);\n      }\n    }\n  }, {\n    key: \"applyWorldTransform\",\n    value: function applyWorldTransform(context, object, matrix) {\n      // apply clip shape's RTS\n      if (matrix) {\n        mat4.copy(this.tmpMat4, object.getLocalTransform());\n        mat4.multiply(this.tmpMat4, matrix, this.tmpMat4);\n        mat4.multiply(this.tmpMat4, this.vpMatrix, this.tmpMat4);\n      } else {\n        // apply RTS transformation in world space\n        mat4.copy(this.tmpMat4, object.getWorldTransform());\n        mat4.multiply(this.tmpMat4, this.vpMatrix, this.tmpMat4);\n      }\n\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations\n      context.setTransform(this.tmpMat4[0], this.tmpMat4[1], this.tmpMat4[4], this.tmpMat4[5], this.tmpMat4[12], this.tmpMat4[13]);\n    }\n  }, {\n    key: \"safeMergeAABB\",\n    value: function safeMergeAABB() {\n      var merged = new AABB();\n      for (var _len = arguments.length, aabbs = new Array(_len), _key = 0; _key < _len; _key++) {\n        aabbs[_key] = arguments[_key];\n      }\n      aabbs.forEach(function (aabb) {\n        merged.add(aabb);\n      });\n      return merged;\n    }\n  }]);\n}();\nCanvasRendererPlugin.tag = 'CanvasRenderer';\n\nfunction getPattern(pattern, object, context, canvasContext, plugin, runtime, imagePool) {\n  var $offscreenCanvas;\n  var dpr;\n  if (pattern.image.nodeName === 'rect') {\n    var _parsedStyle = pattern.image.parsedStyle,\n      width = _parsedStyle.width,\n      height = _parsedStyle.height;\n    dpr = canvasContext.contextService.getDPR();\n    var offscreenCanvas = canvasContext.config.offscreenCanvas;\n    $offscreenCanvas = runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n    $offscreenCanvas.width = width * dpr;\n    $offscreenCanvas.height = height * dpr;\n    var offscreenCanvasContext = runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n    var renderState = {\n      restoreStack: [],\n      prevObject: null,\n      currentContext: new Map()\n    };\n\n    // offscreenCanvasContext.scale(1 / dpr, 1 / dpr);\n\n    pattern.image.forEach(function (object) {\n      plugin.renderDisplayObject(object, offscreenCanvasContext, canvasContext, renderState, runtime);\n    });\n    renderState.restoreStack.forEach(function () {\n      offscreenCanvasContext.restore();\n    });\n  }\n  var canvasPattern = imagePool.getOrCreatePatternSync(object, pattern, context, $offscreenCanvas, dpr, object.getGeometryBounds().min, function () {\n    // set dirty rectangle flag\n    object.renderable.dirty = true;\n    canvasContext.renderingService.dirtify();\n  });\n  return canvasPattern;\n}\nfunction getColor(parsedColor, object, context, imagePool) {\n  var color;\n  if (parsedColor.type === GradientType.LinearGradient || parsedColor.type === GradientType.RadialGradient) {\n    var bounds = object.getGeometryBounds();\n    var width = bounds && bounds.halfExtents[0] * 2 || 1;\n    var height = bounds && bounds.halfExtents[1] * 2 || 1;\n    var min = bounds && bounds.min || [0, 0];\n    color = imagePool.getOrCreateGradient(_objectSpread(_objectSpread({\n      type: parsedColor.type\n    }, parsedColor.value), {}, {\n      min: min,\n      width: width,\n      height: height\n    }), context);\n  }\n  return color;\n}\n\nvar SHADOW_NUMBER_STYLE = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nvar STROKE_STYLE = ['lineCap', 'lineJoin', 'miterLimit'];\nvar DEFAULT_STYLE = {\n  // common\n  globalAlpha: 1,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  shadowColor: '#000',\n  filter: 'none',\n  globalCompositeOperation: 'source-over',\n  // stroke/fill\n  strokeStyle: '#000',\n  strokeOpacity: 1,\n  lineWidth: 1,\n  lineDash: [],\n  lineDashOffset: 0,\n  lineCap: 'butt',\n  lineJoin: 'miter',\n  miterLimit: 10,\n  fillStyle: '#000',\n  fillOpacity: 1\n\n  // image\n};\nvar defaultParsedStyle = {};\n\n/**\n * Updating the canvas context is an expensive operation. The state of the context is cached and the actual update operation is performed only when the cache is not hit.\n *\n * In any case, the previous value is returned, which is convenient for temporarily updating the context and restoring it later.\n */\nfunction updateContextIfNotHitCache(context, key, value, cache) {\n  var prevValue = cache.has(key) ? cache.get(key) : DEFAULT_STYLE[key];\n  if (prevValue !== value) {\n    // console.log('not hit cache', key, value, prevValue, cache);\n    if (key === 'lineDash') {\n      context.setLineDash(value);\n    } else {\n      // @ts-ignore\n      context[key] = value;\n    }\n    cache.set(key, value);\n  }\n  return prevValue;\n}\nvar OptimizedDefaultRenderer = /*#__PURE__*/function () {\n  function OptimizedDefaultRenderer(imagePool) {\n    _classCallCheck(this, OptimizedDefaultRenderer);\n    this.imagePool = imagePool;\n  }\n  return _createClass(OptimizedDefaultRenderer, [{\n    key: \"applyAttributesToContext\",\n    value: function applyAttributesToContext(context, object) {}\n  }, {\n    key: \"render\",\n    value: function render(context, parsedStyle, object, canvasContext, plugin, runtime) {}\n\n    // #region common style\n  }, {\n    key: \"applyCommonStyleToContext\",\n    value: function applyCommonStyleToContext(context, object, forceUpdate, renderState) {\n      // const dpr = object.ownerDocument.defaultView.getContextService().getDPR();\n      var prevStyle = forceUpdate ? defaultParsedStyle : renderState.prevObject.parsedStyle;\n      var style = object.parsedStyle;\n      if (forceUpdate || style.opacity !== prevStyle.opacity) {\n        updateContextIfNotHitCache(context, 'globalAlpha', !isNil(style.opacity) ? style.opacity : DEFAULT_STYLE.globalAlpha, renderState.currentContext);\n      }\n\n      // TODO blend prop\n      // @ts-ignore\n      if (forceUpdate || style.blend !== prevStyle.blend) {\n        updateContextIfNotHitCache(context, 'globalCompositeOperation',\n        // @ts-ignore\n        !isNil(style.blend) ?\n        // @ts-ignore\n        style.blend : DEFAULT_STYLE.globalCompositeOperation, renderState.currentContext);\n      }\n    }\n    // #endregion common style\n\n    // #region stroke/fill style\n  }, {\n    key: \"applyStrokeFillStyleToContext\",\n    value: function applyStrokeFillStyleToContext(context, object, forceUpdate, renderState) {\n      var prevStyle = forceUpdate ? defaultParsedStyle : renderState.prevObject.parsedStyle;\n      var style = object.parsedStyle;\n      var _style$lineWidth = style.lineWidth,\n        lineWidth = _style$lineWidth === void 0 ? DEFAULT_STYLE.lineWidth : _style$lineWidth;\n      var hasFill = style.fill && !style.fill.isNone;\n      var hasStroke = style.stroke && !style.stroke.isNone && lineWidth > 0;\n      if (hasStroke) {\n        if (forceUpdate || object.attributes.stroke !== renderState.prevObject.attributes.stroke) {\n          var value = !isNil(style.stroke) && !Array.isArray(style.stroke) && !style.stroke.isNone ? object.attributes.stroke : DEFAULT_STYLE.strokeStyle;\n          updateContextIfNotHitCache(context, 'strokeStyle', value, renderState.currentContext);\n        }\n        if (forceUpdate || style.lineWidth !== prevStyle.lineWidth) {\n          updateContextIfNotHitCache(context, 'lineWidth', !isNil(style.lineWidth) ? style.lineWidth : DEFAULT_STYLE.lineWidth, renderState.currentContext);\n        }\n        if (forceUpdate || style.lineDash !== prevStyle.lineDash) {\n          updateContextIfNotHitCache(context, 'lineDash', style.lineDash || DEFAULT_STYLE.lineDash, renderState.currentContext);\n        }\n        if (forceUpdate || style.lineDashOffset !== prevStyle.lineDashOffset) {\n          updateContextIfNotHitCache(context, 'lineDashOffset', !isNil(style.lineDashOffset) ? style.lineDashOffset : DEFAULT_STYLE.lineDashOffset, renderState.currentContext);\n        }\n        for (var i = 0; i < STROKE_STYLE.length; i++) {\n          var styleName = STROKE_STYLE[i];\n          if (forceUpdate || style[styleName] !== prevStyle[styleName]) {\n            updateContextIfNotHitCache(context, styleName, !isNil(style[styleName]) ? style[styleName] : DEFAULT_STYLE[styleName], renderState.currentContext);\n          }\n        }\n      }\n      if (hasFill && (forceUpdate || object.attributes.fill !== renderState.prevObject.attributes.fill)) {\n        var _value = !isNil(style.fill) && !Array.isArray(style.fill) && !style.fill.isNone ? object.attributes.fill : DEFAULT_STYLE.fillStyle;\n        updateContextIfNotHitCache(context, 'fillStyle', _value, renderState.currentContext);\n      }\n    }\n    // #endregion stroke/fill style\n  }, {\n    key: \"applyStyleToContext\",\n    value: function applyStyleToContext(context, object, forceUpdate, renderState) {\n      var nodeName = object.nodeName;\n      this.applyCommonStyleToContext(context, object, forceUpdate, renderState);\n      if (nodeName === Shape.IMAGE) ; else {\n        this.applyStrokeFillStyleToContext(context, object, forceUpdate, renderState);\n      }\n    }\n  }, {\n    key: \"applyShadowAndFilterStyleToContext\",\n    value: function applyShadowAndFilterStyleToContext(context, object, hasShadow, renderState) {\n      var style = object.parsedStyle;\n      if (hasShadow) {\n        updateContextIfNotHitCache(context, 'shadowColor', style.shadowColor.toString(), renderState.currentContext);\n        for (var i = 0; i < SHADOW_NUMBER_STYLE.length; i++) {\n          var styleName = SHADOW_NUMBER_STYLE[i];\n          updateContextIfNotHitCache(context, styleName, style[styleName] || DEFAULT_STYLE[styleName], renderState.currentContext);\n        }\n      }\n      if (style.filter && style.filter.length) {\n        updateContextIfNotHitCache(context, 'filter',\n        // use raw filter string\n        object.attributes.filter, renderState.currentContext);\n      }\n    }\n  }, {\n    key: \"clearShadowAndFilterStyleForContext\",\n    value: function clearShadowAndFilterStyleForContext(context, hasShadow, hasFilter, renderState) {\n      var onlyClearShadowFilter = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      if (hasShadow) {\n        updateContextIfNotHitCache(context, 'shadowColor', DEFAULT_STYLE.shadowColor, renderState.currentContext);\n        for (var i = 0; i < SHADOW_NUMBER_STYLE.length; i++) {\n          var styleName = SHADOW_NUMBER_STYLE[i];\n          updateContextIfNotHitCache(context, styleName, DEFAULT_STYLE[styleName], renderState.currentContext);\n        }\n      }\n      if (hasFilter) {\n        if (hasShadow && onlyClearShadowFilter) {\n          // save drop-shadow filter\n          var oldFilter = context.filter;\n          if (!isNil(oldFilter) && oldFilter.indexOf('drop-shadow') > -1) {\n            updateContextIfNotHitCache(context, 'filter', oldFilter.replace(/drop-shadow\\([^)]*\\)/, '').trim() || DEFAULT_STYLE.filter, renderState.currentContext);\n          }\n        } else {\n          updateContextIfNotHitCache(context, 'filter', DEFAULT_STYLE.filter, renderState.currentContext);\n        }\n      }\n    }\n  }, {\n    key: \"fillToContext\",\n    value: function fillToContext(context, object, renderState, plugin, runtime) {\n      var _this = this;\n      var _object$parsedStyle = object.parsedStyle,\n        fill = _object$parsedStyle.fill,\n        fillRule = _object$parsedStyle.fillRule;\n      var resetStyle = null;\n      if (Array.isArray(fill) && fill.length > 0) {\n        fill.forEach(function (gradient) {\n          var prevStyle = updateContextIfNotHitCache(context, 'fillStyle', getColor(gradient, object, context, _this.imagePool), renderState.currentContext);\n          resetStyle = resetStyle !== null && resetStyle !== void 0 ? resetStyle : prevStyle;\n          if (fillRule) {\n            context.fill(fillRule);\n          } else {\n            context.fill();\n          }\n        });\n      } else {\n        if (isPattern(fill)) {\n          var pattern = getPattern(fill, object, context, object.ownerDocument.defaultView.context, plugin, runtime, this.imagePool);\n          if (pattern) {\n            context.fillStyle = pattern;\n            resetStyle = true;\n          }\n        }\n        if (fillRule) {\n          context.fill(fillRule);\n        } else {\n          context.fill();\n        }\n      }\n      if (resetStyle !== null) {\n        updateContextIfNotHitCache(context, 'fillStyle', resetStyle, renderState.currentContext);\n      }\n    }\n  }, {\n    key: \"strokeToContext\",\n    value: function strokeToContext(context, object, renderState, plugin, runtime) {\n      var _this2 = this;\n      var stroke = object.parsedStyle.stroke;\n      var resetStyle = null;\n      if (Array.isArray(stroke) && stroke.length > 0) {\n        stroke.forEach(function (gradient) {\n          var prevStyle = updateContextIfNotHitCache(context, 'strokeStyle', getColor(gradient, object, context, _this2.imagePool), renderState.currentContext);\n          resetStyle = resetStyle !== null && resetStyle !== void 0 ? resetStyle : prevStyle;\n          context.stroke();\n        });\n      } else {\n        if (isPattern(stroke)) {\n          var pattern = getPattern(stroke, object, context, object.ownerDocument.defaultView.context, plugin, runtime, this.imagePool);\n          if (pattern) {\n            var prevStyle = updateContextIfNotHitCache(context, 'strokeStyle', pattern, renderState.currentContext);\n            resetStyle = resetStyle !== null && resetStyle !== void 0 ? resetStyle : prevStyle;\n          }\n        }\n        context.stroke();\n      }\n      if (resetStyle !== null) {\n        updateContextIfNotHitCache(context, 'strokeStyle', resetStyle, renderState.currentContext);\n      }\n    }\n  }, {\n    key: \"drawToContext\",\n    value: function drawToContext(context, object, renderState, plugin, runtime) {\n      var _style$fill;\n      var nodeName = object.nodeName;\n      var style = object.parsedStyle;\n      var _style$opacity = style.opacity,\n        opacity = _style$opacity === void 0 ? DEFAULT_STYLE.globalAlpha : _style$opacity,\n        _style$fillOpacity = style.fillOpacity,\n        fillOpacity = _style$fillOpacity === void 0 ? DEFAULT_STYLE.fillOpacity : _style$fillOpacity,\n        _style$strokeOpacity = style.strokeOpacity,\n        strokeOpacity = _style$strokeOpacity === void 0 ? DEFAULT_STYLE.strokeOpacity : _style$strokeOpacity,\n        _style$lineWidth2 = style.lineWidth,\n        lineWidth = _style$lineWidth2 === void 0 ? DEFAULT_STYLE.lineWidth : _style$lineWidth2;\n      var hasFill = style.fill && !style.fill.isNone;\n      var hasStroke = style.stroke && !style.stroke.isNone && lineWidth > 0;\n      if (!hasFill && !hasStroke) {\n        return;\n      }\n      var hasShadow = !isNil(style.shadowColor) && style.shadowBlur > 0;\n      var isInnerShadow = style.shadowType === 'inner';\n      var isFillTransparent = ((_style$fill = style.fill) === null || _style$fill === void 0 ? void 0 : _style$fill.alpha) === 0;\n      var hasFilter = !!(style.filter && style.filter.length);\n      // Shadows can only be applied to fill() or stroke(), the default is fill()\n      var shouldDrawShadowWithStroke = hasShadow && hasStroke && (nodeName === Shape.PATH || nodeName === Shape.LINE || nodeName === Shape.POLYLINE || isFillTransparent || isInnerShadow);\n\n      // TODO https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/paint-order\n\n      var originGlobalAlpha = null;\n      if (hasFill) {\n        if (!shouldDrawShadowWithStroke) {\n          this.applyShadowAndFilterStyleToContext(context, object, hasShadow, renderState);\n        }\n        var updateOpacity = opacity * fillOpacity;\n        originGlobalAlpha = updateContextIfNotHitCache(context, 'globalAlpha', updateOpacity, renderState.currentContext);\n        this.fillToContext(context, object, renderState, plugin, runtime);\n        if (!shouldDrawShadowWithStroke) {\n          this.clearShadowAndFilterStyleForContext(context, hasShadow, hasFilter, renderState);\n        }\n      }\n      if (hasStroke) {\n        var clearShadowAndFilter = false;\n        var _updateOpacity = opacity * strokeOpacity;\n        var prevOpacity = updateContextIfNotHitCache(context, 'globalAlpha', _updateOpacity, renderState.currentContext);\n        originGlobalAlpha = hasFill ? originGlobalAlpha : prevOpacity;\n        if (shouldDrawShadowWithStroke) {\n          this.applyShadowAndFilterStyleToContext(context, object, hasShadow, renderState);\n          clearShadowAndFilter = true;\n          if (isInnerShadow) {\n            var originBlend = context.globalCompositeOperation;\n            context.globalCompositeOperation = 'source-atop';\n            this.strokeToContext(context, object, renderState, plugin, runtime);\n            context.globalCompositeOperation = originBlend;\n            this.clearShadowAndFilterStyleForContext(context, hasShadow, hasFilter, renderState, true);\n          }\n        }\n        this.strokeToContext(context, object, renderState, plugin, runtime);\n        if (clearShadowAndFilter) {\n          this.clearShadowAndFilterStyleForContext(context, hasShadow, hasFilter, renderState);\n        }\n      }\n\n      // clear\n      if (originGlobalAlpha !== null) {\n        updateContextIfNotHitCache(context, 'globalAlpha', originGlobalAlpha, renderState.currentContext);\n      }\n    }\n  }]);\n}();\n\nvar DefaultRenderer = /*#__PURE__*/function (_OptimizedDefaultRend) {\n  function DefaultRenderer() {\n    _classCallCheck(this, DefaultRenderer);\n    return _callSuper(this, DefaultRenderer, arguments);\n  }\n  _inherits(DefaultRenderer, _OptimizedDefaultRend);\n  return _createClass(DefaultRenderer, [{\n    key: \"render\",\n    value: function render(context, parsedStyle, object, canvasContext, plugin, runtime) {\n      var fill = parsedStyle.fill,\n        fillRule = parsedStyle.fillRule,\n        _parsedStyle$opacity = parsedStyle.opacity,\n        opacity = _parsedStyle$opacity === void 0 ? 1 : _parsedStyle$opacity,\n        _parsedStyle$fillOpac = parsedStyle.fillOpacity,\n        fillOpacity = _parsedStyle$fillOpac === void 0 ? 1 : _parsedStyle$fillOpac,\n        stroke = parsedStyle.stroke,\n        _parsedStyle$strokeOp = parsedStyle.strokeOpacity,\n        strokeOpacity = _parsedStyle$strokeOp === void 0 ? 1 : _parsedStyle$strokeOp,\n        _parsedStyle$lineWidt = parsedStyle.lineWidth,\n        lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n        lineCap = parsedStyle.lineCap,\n        lineJoin = parsedStyle.lineJoin,\n        shadowType = parsedStyle.shadowType,\n        shadowColor = parsedStyle.shadowColor,\n        shadowBlur = parsedStyle.shadowBlur,\n        filter = parsedStyle.filter,\n        miterLimit = parsedStyle.miterLimit;\n      var hasFill = fill && !fill.isNone;\n      var hasStroke = stroke && !stroke.isNone && lineWidth > 0;\n      var isFillTransparent = (fill === null || fill === void 0 ? void 0 : fill.alpha) === 0;\n      var hasFilter = !!(filter && filter.length);\n      var hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n      var nodeName = object.nodeName;\n      var isInnerShadow = shadowType === 'inner';\n      var shouldDrawShadowWithStroke = hasStroke && hasShadow && (nodeName === Shape.PATH || nodeName === Shape.LINE || nodeName === Shape.POLYLINE || isFillTransparent || isInnerShadow);\n      if (hasFill) {\n        context.globalAlpha = opacity * fillOpacity;\n        if (!shouldDrawShadowWithStroke) {\n          setShadowAndFilter(object, context, hasShadow);\n        }\n        applyFill(context, object, fill, fillRule, canvasContext, plugin, runtime, this.imagePool);\n        if (!shouldDrawShadowWithStroke) {\n          this.clearShadowAndFilter(context, hasFilter, hasShadow);\n        }\n      }\n      if (hasStroke) {\n        context.globalAlpha = opacity * strokeOpacity;\n        context.lineWidth = lineWidth;\n        if (!isNil(miterLimit)) {\n          context.miterLimit = miterLimit;\n        }\n        if (!isNil(lineCap)) {\n          context.lineCap = lineCap;\n        }\n        if (!isNil(lineJoin)) {\n          context.lineJoin = lineJoin;\n        }\n        if (shouldDrawShadowWithStroke) {\n          if (isInnerShadow) {\n            context.globalCompositeOperation = 'source-atop';\n          }\n          setShadowAndFilter(object, context, true);\n          if (isInnerShadow) {\n            applyStroke(context, object, stroke, canvasContext, plugin, runtime, this.imagePool);\n            context.globalCompositeOperation = DEFAULT_STYLE.globalCompositeOperation;\n            this.clearShadowAndFilter(context, hasFilter, true);\n          }\n        }\n        applyStroke(context, object, stroke, canvasContext, plugin, runtime, this.imagePool);\n      }\n    }\n  }, {\n    key: \"clearShadowAndFilter\",\n    value: function clearShadowAndFilter(context, hasFilter, hasShadow) {\n      if (hasShadow) {\n        context.shadowColor = 'transparent';\n        context.shadowBlur = 0;\n      }\n      if (hasFilter) {\n        // save drop-shadow filter\n        var oldFilter = context.filter;\n        if (!isNil(oldFilter) && oldFilter.indexOf('drop-shadow') > -1) {\n          context.filter = oldFilter.replace(/drop-shadow\\([^)]*\\)/, '').trim() || 'none';\n        }\n      }\n    }\n  }]);\n}(OptimizedDefaultRenderer);\n\n/**\n * apply before fill and stroke but only once\n */\nfunction setShadowAndFilter(object, context, hasShadow) {\n  var _object$parsedStyle = object.parsedStyle,\n    filter = _object$parsedStyle.filter,\n    shadowColor = _object$parsedStyle.shadowColor,\n    shadowBlur = _object$parsedStyle.shadowBlur,\n    shadowOffsetX = _object$parsedStyle.shadowOffsetX,\n    shadowOffsetY = _object$parsedStyle.shadowOffsetY;\n  if (filter && filter.length) {\n    // use raw filter string\n    context.filter = object.style.filter;\n  }\n  if (hasShadow) {\n    context.shadowColor = shadowColor.toString();\n    context.shadowBlur = shadowBlur || 0;\n    context.shadowOffsetX = shadowOffsetX || 0;\n    context.shadowOffsetY = shadowOffsetY || 0;\n  }\n}\nfunction applyFill(context, object, fill, fillRule, canvasContext, plugin, runtime, imagePool) {\n  var skipFill = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : false;\n  if (Array.isArray(fill)) {\n    fill.forEach(function (gradient) {\n      context.fillStyle = getColor(gradient, object, context, imagePool);\n      if (!skipFill) {\n        fillRule ? context.fill(fillRule) : context.fill();\n      }\n    });\n  } else {\n    if (isPattern(fill)) {\n      context.fillStyle = getPattern(fill, object, context, canvasContext, plugin, runtime, imagePool);\n    }\n    if (!skipFill) {\n      fillRule ? context.fill(fillRule) : context.fill();\n    }\n  }\n}\nfunction applyStroke(context, object, stroke, canvasContext, plugin, runtime, imagePool) {\n  var skipStroke = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : false;\n  if (Array.isArray(stroke)) {\n    stroke.forEach(function (gradient) {\n      context.strokeStyle = getColor(gradient, object, context, imagePool);\n      if (!skipStroke) {\n        context.stroke();\n      }\n    });\n  } else {\n    if (isPattern(stroke)) {\n      context.strokeStyle = getPattern(stroke, object, context, canvasContext, plugin, runtime, imagePool);\n    }\n    if (!skipStroke) {\n      context.stroke();\n    }\n  }\n}\n\nfunction calculateOverlapRect(rect1, rect2) {\n  var _rect = _slicedToArray(rect1, 4),\n    x1 = _rect[0],\n    y1 = _rect[1],\n    w1 = _rect[2],\n    h1 = _rect[3];\n  var _rect2 = _slicedToArray(rect2, 4),\n    x2 = _rect2[0],\n    y2 = _rect2[1],\n    w2 = _rect2[2],\n    h2 = _rect2[3];\n\n  // \n  var overlapLeft = Math.max(x1, x2);\n  var overlapTop = Math.max(y1, y2);\n  var overlapRight = Math.min(x1 + w1, x2 + w2);\n  var overlapBottom = Math.min(y1 + h1, y2 + h2);\n  if (overlapRight <= overlapLeft || overlapBottom <= overlapTop) {\n    return null;\n  }\n  return [overlapLeft, overlapTop, overlapRight - overlapLeft, overlapBottom - overlapTop];\n}\nfunction transformRect(rect, matrix) {\n  var tl = vec3.transformMat4(vec3.create(), [rect[0], rect[1], 0], matrix);\n  var tr = vec3.transformMat4(vec3.create(), [rect[0] + rect[2], rect[1], 0], matrix);\n  var bl = vec3.transformMat4(vec3.create(), [rect[0], rect[1] + rect[3], 0], matrix);\n  var br = vec3.transformMat4(vec3.create(), [rect[0] + rect[2], rect[1] + rect[3], 0], matrix);\n  return [Math.min(tl[0], tr[0], bl[0], br[0]), Math.min(tl[1], tr[1], bl[1], br[1]), Math.max(tl[0], tr[0], bl[0], br[0]) - Math.min(tl[0], tr[0], bl[0], br[0]), Math.max(tl[1], tr[1], bl[1], br[1]) - Math.min(tl[1], tr[1], bl[1], br[1])];\n}\n\nvar ImageRenderer = /*#__PURE__*/function (_DefaultRenderer) {\n  function ImageRenderer() {\n    _classCallCheck(this, ImageRenderer);\n    return _callSuper(this, ImageRenderer, arguments);\n  }\n  _inherits(ImageRenderer, _DefaultRenderer);\n  return _createClass(ImageRenderer, [{\n    key: \"renderDownSampled\",\n    value: function renderDownSampled(context, parsedStyle, object, data) {\n      var src = data.src,\n        imageCache = data.imageCache;\n      if (!imageCache.downSampled) {\n        this.imagePool.createDownSampledImage(src, object).then(function () {\n          // be removed from dom tree\n          if (!object.ownerDocument) {\n            return;\n          }\n\n          // rerender\n          // object.dirty();\n          object.renderable.dirty = true;\n          object.ownerDocument.defaultView.context.renderingService.dirtify();\n        })[\"catch\"](function (reason) {\n          console.error(reason);\n        });\n        return;\n      }\n      context.drawImage(imageCache.downSampled, Math.floor(data.drawRect[0]), Math.floor(data.drawRect[1]), Math.ceil(data.drawRect[2]), Math.ceil(data.drawRect[3]));\n    }\n  }, {\n    key: \"renderTile\",\n    value: function renderTile(context, parsedStyle, object, data) {\n      var src = data.src,\n        imageCache = data.imageCache,\n        imageRect = data.imageRect,\n        drawRect = data.drawRect;\n      var originalSize = imageCache.size;\n      var _context$getTransform = context.getTransform(),\n        a = _context$getTransform.a,\n        b = _context$getTransform.b,\n        c = _context$getTransform.c,\n        d = _context$getTransform.d,\n        e = _context$getTransform.e,\n        f = _context$getTransform.f;\n      context.resetTransform();\n      if (!(imageCache !== null && imageCache !== void 0 && imageCache.gridSize)) {\n        this.imagePool.createImageTiles(src, [], function () {\n          // be removed from dom tree\n          if (!object.ownerDocument) {\n            return;\n          }\n\n          // rerender\n          // object.dirty();\n          object.renderable.dirty = true;\n          object.ownerDocument.defaultView.context.renderingService.dirtify();\n        }, object)[\"catch\"](function (reason) {\n          console.error(reason);\n        });\n        return;\n      }\n      var scaleToOrigin = [originalSize[0] / imageRect[2], originalSize[1] / imageRect[3]];\n      var scaledTileSize = [imageCache.tileSize[0] / scaleToOrigin[0], imageCache.tileSize[1] / scaleToOrigin[1]];\n      var _ref = [Math.floor((drawRect[0] - imageRect[0]) / scaledTileSize[0]), Math.ceil((drawRect[0] + drawRect[2] - imageRect[0]) / scaledTileSize[0])],\n        startTileX = _ref[0],\n        endTileX = _ref[1];\n      var _ref2 = [Math.floor((drawRect[1] - imageRect[1]) / scaledTileSize[1]), Math.ceil((drawRect[1] + drawRect[3] - imageRect[1]) / scaledTileSize[1])],\n        startTileY = _ref2[0],\n        endTileY = _ref2[1];\n      for (var tileY = startTileY; tileY <= endTileY; tileY++) {\n        for (var tileX = startTileX; tileX <= endTileX; tileX++) {\n          var item = imageCache.tiles[tileY][tileX];\n          if (item) {\n            var tileRect = [Math.floor(imageRect[0] + item.tileX * scaledTileSize[0]), Math.floor(imageRect[1] + item.tileY * scaledTileSize[1]), Math.ceil(scaledTileSize[0]), Math.ceil(scaledTileSize[1])];\n            context.drawImage(item.data, tileRect[0], tileRect[1], tileRect[2], tileRect[3]);\n          }\n        }\n      }\n      context.setTransform(a, b, c, d, e, f);\n    }\n  }, {\n    key: \"render\",\n    value: function render(context, parsedStyle, object) {\n      var _parsedStyle$x = parsedStyle.x,\n        x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = parsedStyle.y,\n        y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n        width = parsedStyle.width,\n        height = parsedStyle.height,\n        src = parsedStyle.src,\n        shadowColor = parsedStyle.shadowColor,\n        shadowBlur = parsedStyle.shadowBlur;\n      var imageCache = this.imagePool.getImageSync(src, object);\n      var image = imageCache === null || imageCache === void 0 ? void 0 : imageCache.img;\n      var iw = width;\n      var ih = height;\n      if (!image) {\n        return;\n      }\n      iw || (iw = image.width);\n      ih || (ih = image.height);\n      var hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n      setShadowAndFilter(object, context, hasShadow);\n\n      // node-canvas will throw the following err:\n      // Error: Image given has not completed loading\n      try {\n        var _object$ownerDocument = object.ownerDocument.defaultView.getContextService().getDomElement(),\n          viewWidth = _object$ownerDocument.width,\n          viewHeight = _object$ownerDocument.height;\n        var currentTransform = context.getTransform();\n        var a = currentTransform.a,\n          b = currentTransform.b,\n          c = currentTransform.c,\n          d = currentTransform.d,\n          e = currentTransform.e,\n          f = currentTransform.f;\n        //  mat4 \n        // prettier-ignore\n        var transformMatrix = mat4.fromValues(a, c, 0, 0, b, d, 0, 0, 0, 0, 1, 0, e, f, 0, 1);\n        var imageRect = transformRect([x, y, iw, ih], transformMatrix);\n        var drawRect = calculateOverlapRect([0, 0, viewWidth, viewHeight], imageRect);\n        if (!drawRect) {\n          return;\n        }\n        if (!object.ownerDocument.defaultView.getConfig().enableLargeImageOptimization) {\n          ImageRenderer.renderFull(context, parsedStyle, object, {\n            image: image,\n            drawRect: [x, y, iw, ih]\n          });\n          return;\n        }\n        var sizeOfOrigin = imageRect[2] / imageCache.size[0];\n        if (sizeOfOrigin < (imageCache.downSamplingRate || 0.5)) {\n          this.renderDownSampled(context, parsedStyle, object, {\n            src: src,\n            imageCache: imageCache,\n            drawRect: [x, y, iw, ih]\n          });\n          return;\n        }\n        if (!ImagePool.isSupportTile) {\n          ImageRenderer.renderFull(context, parsedStyle, object, {\n            image: image,\n            drawRect: [x, y, iw, ih]\n          });\n          return;\n        }\n        this.renderTile(context, parsedStyle, object, {\n          src: src,\n          imageCache: imageCache,\n          imageRect: imageRect,\n          drawRect: drawRect\n        });\n      } catch (_unused) {\n        // expected error\n      }\n    }\n\n    // ---\n  }, {\n    key: \"drawToContext\",\n    value: function drawToContext(context, object, renderState, plugin, runtime) {\n      this.render(context, object.parsedStyle, object);\n    }\n  }], [{\n    key: \"renderFull\",\n    value: function renderFull(context, parsedStyle, object, data) {\n      context.drawImage(data.image, Math.floor(data.drawRect[0]), Math.floor(data.drawRect[1]), Math.ceil(data.drawRect[2]), Math.ceil(data.drawRect[3]));\n    }\n  }]);\n}(DefaultRenderer);\n\nvar TextRenderer = /*#__PURE__*/function (_DefaultRenderer) {\n  function TextRenderer() {\n    _classCallCheck(this, TextRenderer);\n    return _callSuper(this, TextRenderer, arguments);\n  }\n  _inherits(TextRenderer, _DefaultRenderer);\n  return _createClass(TextRenderer, [{\n    key: \"render\",\n    value: function render(context, parsedStyle, object, canvasContext, plugin, runtime) {\n      // Trigger text geometry calculation.\n      object.getBounds();\n      var _parsedStyle$lineWidt = parsedStyle.lineWidth,\n        lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n        _parsedStyle$textAlig = parsedStyle.textAlign,\n        textAlign = _parsedStyle$textAlig === void 0 ? 'start' : _parsedStyle$textAlig,\n        _parsedStyle$textBase = parsedStyle.textBaseline,\n        textBaseline = _parsedStyle$textBase === void 0 ? 'alphabetic' : _parsedStyle$textBase,\n        _parsedStyle$lineJoin = parsedStyle.lineJoin,\n        lineJoin = _parsedStyle$lineJoin === void 0 ? 'miter' : _parsedStyle$lineJoin,\n        _parsedStyle$miterLim = parsedStyle.miterLimit,\n        miterLimit = _parsedStyle$miterLim === void 0 ? 10 : _parsedStyle$miterLim,\n        _parsedStyle$letterSp = parsedStyle.letterSpacing,\n        letterSpacing = _parsedStyle$letterSp === void 0 ? 0 : _parsedStyle$letterSp,\n        stroke = parsedStyle.stroke,\n        fill = parsedStyle.fill,\n        fillRule = parsedStyle.fillRule,\n        _parsedStyle$fillOpac = parsedStyle.fillOpacity,\n        fillOpacity = _parsedStyle$fillOpac === void 0 ? 1 : _parsedStyle$fillOpac,\n        _parsedStyle$strokeOp = parsedStyle.strokeOpacity,\n        strokeOpacity = _parsedStyle$strokeOp === void 0 ? 1 : _parsedStyle$strokeOp,\n        _parsedStyle$opacity = parsedStyle.opacity,\n        opacity = _parsedStyle$opacity === void 0 ? 1 : _parsedStyle$opacity,\n        metrics = parsedStyle.metrics,\n        _parsedStyle$x = parsedStyle.x,\n        x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = parsedStyle.y,\n        y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n        dx = parsedStyle.dx,\n        dy = parsedStyle.dy,\n        shadowColor = parsedStyle.shadowColor,\n        shadowBlur = parsedStyle.shadowBlur;\n      var font = metrics.font,\n        lines = metrics.lines,\n        height = metrics.height,\n        lineHeight = metrics.lineHeight,\n        lineMetrics = metrics.lineMetrics;\n      context.font = font;\n      context.lineWidth = lineWidth;\n      context.textAlign = textAlign === 'middle' ? 'center' : textAlign;\n      var formattedTextBaseline = textBaseline;\n      if (formattedTextBaseline === 'alphabetic') {\n        formattedTextBaseline = 'bottom';\n      }\n      context.lineJoin = lineJoin;\n      if (!isNil(miterLimit)) {\n        context.miterLimit = miterLimit;\n      }\n      var linePositionY = y;\n      // handle vertical text baseline\n      if (textBaseline === 'middle') {\n        linePositionY += -height / 2 - lineHeight / 2;\n      } else if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n        linePositionY += -height;\n      } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n        linePositionY += -lineHeight;\n      }\n\n      // account for dx & dy\n      var offsetX = x + (dx || 0);\n      linePositionY += dy || 0;\n      if (lines.length === 1) {\n        if (formattedTextBaseline === 'bottom') {\n          formattedTextBaseline = 'middle';\n          linePositionY -= 0.5 * height;\n        } else if (formattedTextBaseline === 'top') {\n          formattedTextBaseline = 'middle';\n          linePositionY += 0.5 * height;\n        }\n      }\n      context.textBaseline = formattedTextBaseline;\n      var hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n      setShadowAndFilter(object, context, hasShadow);\n\n      // draw lines line by line\n      for (var i = 0; i < lines.length; i++) {\n        var linePositionX = lineWidth / 2 + offsetX;\n        linePositionY += lineHeight;\n\n        // no need to re-position X, cause we already set text align\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textAlign\n        if (!isNil(stroke) && !stroke.isNone && lineWidth) {\n          this.drawLetterSpacing(context, object, lines[i], lineMetrics[i], textAlign, linePositionX, linePositionY, letterSpacing, fill, fillRule, fillOpacity, stroke, strokeOpacity, opacity, true, canvasContext, plugin, runtime);\n        }\n        if (!isNil(fill)) {\n          this.drawLetterSpacing(context, object, lines[i], lineMetrics[i], textAlign, linePositionX, linePositionY, letterSpacing, fill, fillRule, fillOpacity, stroke, strokeOpacity, opacity, false, canvasContext, plugin, runtime);\n        }\n      }\n    }\n  }, {\n    key: \"drawLetterSpacing\",\n    value: function drawLetterSpacing(context, object, text, lineMetrics, textAlign, x, y, letterSpacing, fill, fillRule, fillOpacity, stroke, strokeOpacity, opacity, isStroke, canvasContext, plugin, runtime) {\n      // letterSpacing of 0 means normal, render all texts directly\n      if (letterSpacing === 0) {\n        if (isStroke) {\n          this.strokeText(context, object, text, x, y, stroke, strokeOpacity, canvasContext, plugin, runtime);\n        } else {\n          this.fillText(context, object, text, x, y, fill, fillRule, fillOpacity, opacity, canvasContext, plugin, runtime);\n        }\n        return;\n      }\n\n      // draw text using left align\n      var currentTextAlign = context.textAlign;\n      context.textAlign = 'left';\n      var currentPosition = x;\n      if (textAlign === 'center' || textAlign === 'middle') {\n        currentPosition = x - lineMetrics.width / 2;\n      } else if (textAlign === 'right' || textAlign === 'end') {\n        currentPosition = x - lineMetrics.width;\n      }\n      var stringArray = Array.from(text);\n      var previousWidth = context.measureText(text).width;\n      var currentWidth = 0;\n      for (var i = 0; i < stringArray.length; ++i) {\n        var currentChar = stringArray[i];\n        if (isStroke) {\n          this.strokeText(context, object, currentChar, currentPosition, y, stroke, strokeOpacity, canvasContext, plugin, runtime);\n        } else {\n          this.fillText(context, object, currentChar, currentPosition, y, fill, fillRule, fillOpacity, opacity, canvasContext, plugin, runtime);\n        }\n        currentWidth = context.measureText(text.substring(i + 1)).width;\n        currentPosition += previousWidth - currentWidth + letterSpacing;\n        previousWidth = currentWidth;\n      }\n      context.textAlign = currentTextAlign;\n    }\n  }, {\n    key: \"fillText\",\n    value: function fillText(context, object, text, x, y, fill, fillRule, fillOpacity, opacity, canvasContext, plugin, runtime) {\n      applyFill(context, object, fill, fillRule, canvasContext, plugin, runtime, this.imagePool, true);\n      var currentGlobalAlpha;\n      var applyOpacity = !isNil(fillOpacity) && fillOpacity !== 1;\n      if (applyOpacity) {\n        currentGlobalAlpha = context.globalAlpha;\n        context.globalAlpha = fillOpacity * opacity;\n      }\n      context.fillText(text, x, y);\n      if (applyOpacity) {\n        context.globalAlpha = currentGlobalAlpha;\n      }\n    }\n  }, {\n    key: \"strokeText\",\n    value: function strokeText(context, object, text, x, y, stroke, strokeOpacity, canvasContext, plugin, runtime) {\n      applyStroke(context, object, stroke, canvasContext, plugin, runtime, this.imagePool, true);\n      var currentGlobalAlpha;\n      var applyOpacity = !isNil(strokeOpacity) && strokeOpacity !== 1;\n      if (applyOpacity) {\n        currentGlobalAlpha = context.globalAlpha;\n        context.globalAlpha = strokeOpacity;\n      }\n      context.strokeText(text, x, y);\n      if (applyOpacity) {\n        context.globalAlpha = currentGlobalAlpha;\n      }\n    }\n\n    // ---\n  }, {\n    key: \"drawToContext\",\n    value: function drawToContext(context, object, renderState, plugin, runtime) {\n      this.render(context, object.parsedStyle, object, object.ownerDocument.defaultView.context, plugin, runtime);\n    }\n  }]);\n}(DefaultRenderer);\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Plugin);\n    _this = _callSuper(this, Plugin);\n    _this.name = 'canvas-renderer';\n    _this.options = options;\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      var _defaultStyleRenderer;\n      var canvasRendererPluginOptions = _objectSpread({\n        dirtyObjectNumThreshold: 500,\n        dirtyObjectRatioThreshold: 0.8\n      }, this.options);\n\n      // @ts-ignore\n      var imagePool = this.context.imagePool;\n      var defaultRenderer = new DefaultRenderer(imagePool);\n      var defaultStyleRendererFactory = (_defaultStyleRenderer = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defaultStyleRenderer, Shape.CIRCLE, defaultRenderer), Shape.ELLIPSE, defaultRenderer), Shape.RECT, defaultRenderer), Shape.IMAGE, new ImageRenderer(imagePool)), Shape.TEXT, new TextRenderer(imagePool)), Shape.LINE, defaultRenderer), Shape.POLYLINE, defaultRenderer), Shape.POLYGON, defaultRenderer), Shape.PATH, defaultRenderer), Shape.GROUP, undefined), _defineProperty(_defineProperty(_defineProperty(_defaultStyleRenderer, Shape.HTML, undefined), Shape.MESH, undefined), Shape.FRAGMENT, undefined));\n      this.context.defaultStyleRendererFactory = defaultStyleRendererFactory;\n      this.context.styleRendererFactory = defaultStyleRendererFactory;\n      this.addRenderingPlugin(new CanvasRendererPlugin(canvasRendererPluginOptions));\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n      delete this.context.defaultStyleRendererFactory;\n      delete this.context.styleRendererFactory;\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { DefaultRenderer as CircleRenderer, DefaultRenderer, DefaultRenderer as EllipseRenderer, ImageRenderer, DefaultRenderer as LineRenderer, DefaultRenderer as PathRenderer, Plugin, DefaultRenderer as PolygonRenderer, DefaultRenderer as PolylineRenderer, DefaultRenderer as RectRenderer, TextRenderer };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-plugin-dom-interaction\n * @description A G plugin\n * @version 2.1.23\n * @date 4/14/2025, 2:54:44 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { AbstractRendererPlugin } from '@antv/g-lite';\n\n// const MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\n/**\n * listen to mouse/touch/pointer events on DOM wrapper, trigger pointer events\n */\nvar DOMInteractionPlugin = /*#__PURE__*/function () {\n  function DOMInteractionPlugin() {\n    _classCallCheck(this, DOMInteractionPlugin);\n  }\n  return _createClass(DOMInteractionPlugin, [{\n    key: \"apply\",\n    value: function apply(context, runtime) {\n      var _this = this;\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext,\n        config = context.config;\n      this.context = context;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      // const SUPPORT_ONLY_TOUCH = canvas.supportsTouchEvents && MOBILE_REGEX.test(navigator.userAgent);\n\n      var onPointerMove = function onPointerMove(ev) {\n        renderingService.hooks.pointerMove.call(ev);\n      };\n      var onPointerUp = function onPointerUp(ev) {\n        renderingService.hooks.pointerUp.call(ev);\n      };\n      var onPointerDown = function onPointerDown(ev) {\n        renderingService.hooks.pointerDown.call(ev);\n      };\n      var onPointerOver = function onPointerOver(ev) {\n        renderingService.hooks.pointerOver.call(ev);\n      };\n      var onPointerOut = function onPointerOut(ev) {\n        renderingService.hooks.pointerOut.call(ev);\n      };\n      var onPointerCancel = function onPointerCancel(ev) {\n        renderingService.hooks.pointerCancel.call(ev);\n      };\n      var onPointerWheel = function onPointerWheel(ev) {\n        renderingService.hooks.pointerWheel.call(ev);\n      };\n      var onClick = function onClick(ev) {\n        renderingService.hooks.click.call(ev);\n      };\n      var addPointerEventListener = function addPointerEventListener($el) {\n        runtime.globalThis.document.addEventListener('pointermove', onPointerMove, true);\n        $el.addEventListener('pointerdown', onPointerDown, true);\n        $el.addEventListener('pointerleave', onPointerOut, true);\n        $el.addEventListener('pointerover', onPointerOver, true);\n        runtime.globalThis.addEventListener('pointerup', onPointerUp, true);\n        runtime.globalThis.addEventListener('pointercancel', onPointerCancel, true);\n      };\n      var addTouchEventListener = function addTouchEventListener($el) {\n        $el.addEventListener('touchstart', onPointerDown, true);\n        $el.addEventListener('touchend', onPointerUp, true);\n        $el.addEventListener('touchmove', onPointerMove, true);\n        $el.addEventListener('touchcancel', onPointerCancel, true);\n      };\n      var addMouseEventListener = function addMouseEventListener($el) {\n        runtime.globalThis.document.addEventListener('mousemove', onPointerMove, true);\n        $el.addEventListener('mousedown', onPointerDown, true);\n        $el.addEventListener('mouseout', onPointerOut, true);\n        $el.addEventListener('mouseover', onPointerOver, true);\n        runtime.globalThis.addEventListener('mouseup', onPointerUp, true);\n      };\n      var removePointerEventListener = function removePointerEventListener($el) {\n        runtime.globalThis.document.removeEventListener('pointermove', onPointerMove, true);\n        $el.removeEventListener('pointerdown', onPointerDown, true);\n        $el.removeEventListener('pointerleave', onPointerOut, true);\n        $el.removeEventListener('pointerover', onPointerOver, true);\n        runtime.globalThis.removeEventListener('pointerup', onPointerUp, true);\n        runtime.globalThis.removeEventListener('pointercancel', onPointerCancel, true);\n      };\n      var removeTouchEventListener = function removeTouchEventListener($el) {\n        $el.removeEventListener('touchstart', onPointerDown, true);\n        $el.removeEventListener('touchend', onPointerUp, true);\n        $el.removeEventListener('touchmove', onPointerMove, true);\n        $el.removeEventListener('touchcancel', onPointerCancel, true);\n      };\n      var removeMouseEventListener = function removeMouseEventListener($el) {\n        runtime.globalThis.document.removeEventListener('mousemove', onPointerMove, true);\n        $el.removeEventListener('mousedown', onPointerDown, true);\n        $el.removeEventListener('mouseout', onPointerOut, true);\n        $el.removeEventListener('mouseover', onPointerOver, true);\n        runtime.globalThis.removeEventListener('mouseup', onPointerUp, true);\n      };\n      renderingService.hooks.init.tap(DOMInteractionPlugin.tag, function () {\n        var $el = _this.context.contextService.getDomElement();\n\n        // @ts-ignore\n        if (runtime.globalThis.navigator.msPointerEnabled) {\n          // @ts-ignore\n          $el.style.msContentZooming = 'none';\n          // @ts-ignore\n          $el.style.msTouchAction = 'none';\n        } else if (canvas.supportsPointerEvents) {\n          $el.style.touchAction = 'none';\n        }\n        if (canvas.supportsPointerEvents) {\n          addPointerEventListener($el);\n        } else {\n          addMouseEventListener($el);\n        }\n        if (canvas.supportsTouchEvents) {\n          addTouchEventListener($el);\n        }\n        if (config.useNativeClickEvent) {\n          $el.addEventListener('click', onClick, true);\n        }\n\n        // use passive event listeners\n        // @see https://zhuanlan.zhihu.com/p/24555031\n        $el.addEventListener('wheel', onPointerWheel, {\n          passive: true,\n          capture: true\n        });\n      });\n      renderingService.hooks.destroy.tap(DOMInteractionPlugin.tag, function () {\n        var $el = _this.context.contextService.getDomElement();\n\n        // @ts-ignore\n        if (runtime.globalThis.navigator.msPointerEnabled) {\n          // @ts-ignore\n          $el.style.msContentZooming = '';\n          // @ts-ignore\n          $el.style.msTouchAction = '';\n        } else if (canvas.supportsPointerEvents) {\n          $el.style.touchAction = '';\n        }\n        if (canvas.supportsPointerEvents) {\n          removePointerEventListener($el);\n        } else {\n          removeMouseEventListener($el);\n        }\n        if (canvas.supportsTouchEvents) {\n          removeTouchEventListener($el);\n        }\n        if (config.useNativeClickEvent) {\n          $el.removeEventListener('click', onClick, true);\n        }\n        $el.removeEventListener('wheel', onPointerWheel, true);\n      });\n    }\n  }]);\n}();\nDOMInteractionPlugin.tag = 'DOMInteraction';\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'dom-interaction';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      this.addRenderingPlugin(new DOMInteractionPlugin());\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-plugin-html-renderer\n * @description A G plugin for rendering HTML\n * @version 2.1.23\n * @date 4/14/2025, 2:54:54 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { CanvasEvent, ElementEvent, RenderReason, isCSSRGB, isPattern, Shape, AbstractRendererPlugin } from '@antv/g-lite';\nimport { isNil, isNumber, isString } from '@antv/util';\n\nvar CANVAS_CAMERA_ID = 'g-canvas-camera';\nvar HTMLRenderingPlugin = /*#__PURE__*/function () {\n  function HTMLRenderingPlugin() {\n    _classCallCheck(this, HTMLRenderingPlugin);\n    this.displayObjectHTMLElementMap = new WeakMap();\n  }\n  return _createClass(HTMLRenderingPlugin, [{\n    key: \"joinTransformMatrix\",\n    value:\n    /**\n     * ! The reason for adding `offset` is that the `transform-origin` coordinate system of DOM is the local coordinate system of the element, while the `transform-origin` coordinate system of canvas drawing is the local coordinate system of the element's parent element. At the same time, the `transform` attribute value of the DOM element does not include `transform-origin`.\n     */\n    function joinTransformMatrix(matrix) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      return \"matrix(\".concat([matrix[0], matrix[1], matrix[4], matrix[5], matrix[12] + offset[0], matrix[13] + offset[1]].join(','), \")\");\n    }\n  }, {\n    key: \"apply\",\n    value: function apply(context, runtime) {\n      var _this = this;\n      var camera = context.camera,\n        renderingContext = context.renderingContext,\n        renderingService = context.renderingService;\n      this.context = context;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      var nativeHTMLMap = canvas.context.eventService.nativeHTMLMap;\n      var setTransform = function setTransform(object, $el) {\n        $el.style.transform = _this.joinTransformMatrix(object.getWorldTransform(), object.getOrigin());\n      };\n      var handleMounted = function handleMounted(e) {\n        var object = e.target;\n        if (object.nodeName === Shape.HTML) {\n          if (!_this.$camera) {\n            _this.$camera = _this.createCamera(camera);\n          }\n\n          // create DOM element\n          var $el = _this.getOrCreateEl(object);\n          _this.$camera.appendChild($el);\n          Object.keys(object.attributes).forEach(function (name) {\n            _this.updateAttribute(name, object);\n          });\n          setTransform(object, $el);\n          nativeHTMLMap.set($el, object);\n        }\n      };\n      var handleUnmounted = function handleUnmounted(e) {\n        var object = e.target;\n        if (object.nodeName === Shape.HTML && _this.$camera) {\n          var $el = _this.getOrCreateEl(object);\n          if ($el) {\n            $el.remove();\n            nativeHTMLMap[\"delete\"]($el);\n          }\n        }\n      };\n      var handleAttributeChanged = function handleAttributeChanged(e) {\n        var object = e.target;\n        if (object.nodeName === Shape.HTML) {\n          var attrName = e.attrName;\n          _this.updateAttribute(attrName, object);\n        }\n      };\n      var handleBoundsChanged = function handleBoundsChanged(e) {\n        var object = e.target;\n        var nodes = object.nodeName === Shape.FRAGMENT ? object.childNodes : [object];\n        nodes.forEach(function (node) {\n          if (node.nodeName === Shape.HTML) {\n            var $el = _this.getOrCreateEl(node);\n            setTransform(node, $el);\n          }\n        });\n      };\n      var handleCanvasResize = function handleCanvasResize() {\n        if (_this.$camera) {\n          var _this$context$config = _this.context.config,\n            width = _this$context$config.width,\n            height = _this$context$config.height;\n          _this.$camera.parentElement.style.width = \"\".concat(width || 0, \"px\");\n          _this.$camera.parentElement.style.height = \"\".concat(height || 0, \"px\");\n        }\n      };\n      renderingService.hooks.init.tap(HTMLRenderingPlugin.tag, function () {\n        canvas.addEventListener(CanvasEvent.RESIZE, handleCanvasResize);\n        canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.addEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n      });\n      renderingService.hooks.endFrame.tap(HTMLRenderingPlugin.tag, function () {\n        if (_this.$camera && renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED)) {\n          _this.$camera.style.transform = _this.joinTransformMatrix(camera.getOrthoMatrix());\n        }\n      });\n      renderingService.hooks.destroy.tap(HTMLRenderingPlugin.tag, function () {\n        // remove camera\n        if (_this.$camera) {\n          _this.$camera.remove();\n        }\n        canvas.removeEventListener(CanvasEvent.RESIZE, handleCanvasResize);\n        canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.removeEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        canvas.removeEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n      });\n    }\n  }, {\n    key: \"createCamera\",\n    value: function createCamera(camera) {\n      var _this$context$config2 = this.context.config,\n        doc = _this$context$config2.document,\n        width = _this$context$config2.width,\n        height = _this$context$config2.height;\n      var $canvas = this.context.contextService.getDomElement();\n      var $container = $canvas.parentNode;\n      if ($container) {\n        var cameraId = CANVAS_CAMERA_ID;\n        var $existedCamera = $container.querySelector(\"#\".concat(cameraId));\n        if (!$existedCamera) {\n          // fix @see https://github.com/antvis/G/issues/1702\n          var $cameraContainer = (doc || document).createElement('div');\n          // HTML elements should not overflow with canvas @see https://github.com/antvis/G/issues/1163\n          $cameraContainer.style.overflow = 'hidden';\n          $cameraContainer.style.pointerEvents = 'none';\n          $cameraContainer.style.position = 'absolute';\n          $cameraContainer.style.left = \"0px\";\n          $cameraContainer.style.top = \"0px\";\n          $cameraContainer.style.width = \"\".concat(width || 0, \"px\");\n          $cameraContainer.style.height = \"\".concat(height || 0, \"px\");\n          var $camera = (doc || document).createElement('div');\n          $existedCamera = $camera;\n          $camera.id = cameraId;\n          // use absolute position\n          $camera.style.position = 'absolute';\n          // account for DOM element's offset @see https://github.com/antvis/G/issues/1150\n          $camera.style.left = \"\".concat($canvas.offsetLeft || 0, \"px\");\n          $camera.style.top = \"\".concat($canvas.offsetTop || 0, \"px\");\n          $camera.style.transformOrigin = 'left top';\n          $camera.style.transform = this.joinTransformMatrix(camera.getOrthoMatrix());\n          $camera.style.pointerEvents = 'none';\n          $camera.style.width = \"100%\";\n          $camera.style.height = \"100%\";\n          $cameraContainer.appendChild($camera);\n          $container.appendChild($cameraContainer);\n        }\n        return $existedCamera;\n      }\n      return null;\n    }\n  }, {\n    key: \"getOrCreateEl\",\n    value: function getOrCreateEl(object) {\n      var doc = this.context.config.document;\n      var $existedElement = this.displayObjectHTMLElementMap.get(object);\n      if (!$existedElement) {\n        $existedElement = (doc || document).createElement('div');\n        object.parsedStyle.$el = $existedElement;\n        this.displayObjectHTMLElementMap.set(object, $existedElement);\n        if (object.id) {\n          $existedElement.id = object.id;\n        }\n        if (object.name) {\n          $existedElement.setAttribute('name', object.name);\n        }\n        if (object.className) {\n          $existedElement.className = object.className;\n        }\n\n        // use absolute position\n        $existedElement.style.position = 'absolute';\n        // @see https://github.com/antvis/G/issues/1150\n        $existedElement.style['will-change'] = 'transform';\n        $existedElement.style.transform = this.joinTransformMatrix(object.getWorldTransform(), object.getOrigin());\n      }\n      return $existedElement;\n    }\n  }, {\n    key: \"updateAttribute\",\n    value: function updateAttribute(name, object) {\n      var $el = this.getOrCreateEl(object);\n      switch (name) {\n        case 'innerHTML':\n          var innerHTML = object.parsedStyle.innerHTML;\n          if (isString(innerHTML)) {\n            $el.innerHTML = innerHTML;\n          } else {\n            $el.innerHTML = '';\n            $el.appendChild(innerHTML);\n          }\n          break;\n        case 'x':\n          $el.style.left = \"\".concat(object.parsedStyle.x, \"px\");\n          break;\n        case 'y':\n          $el.style.top = \"\".concat(object.parsedStyle.y, \"px\");\n          break;\n        case 'transformOrigin':\n          var transformOrigin = object.parsedStyle.transformOrigin;\n          $el.style['transform-origin'] = \"\".concat(transformOrigin[0].buildCSSText(null, null, ''), \" \").concat(transformOrigin[1].buildCSSText(null, null, ''));\n          break;\n        case 'width':\n          var width = object.parsedStyle.width;\n          $el.style.width = isNumber(width) ? \"\".concat(width, \"px\") : width.toString();\n          break;\n        case 'height':\n          var height = object.parsedStyle.height;\n          $el.style.height = isNumber(height) ? \"\".concat(height, \"px\") : height.toString();\n          break;\n        case 'zIndex':\n          var zIndex = object.parsedStyle.zIndex;\n          $el.style['z-index'] = \"\".concat(zIndex);\n          break;\n        case 'visibility':\n          var visibility = object.parsedStyle.visibility;\n          $el.style.visibility = visibility;\n          break;\n        case 'pointerEvents':\n          var _object$parsedStyle$p = object.parsedStyle.pointerEvents,\n            pointerEvents = _object$parsedStyle$p === void 0 ? 'auto' : _object$parsedStyle$p;\n          $el.style.pointerEvents = pointerEvents;\n          break;\n        case 'opacity':\n          var opacity = object.parsedStyle.opacity;\n          $el.style.opacity = \"\".concat(opacity);\n          break;\n        case 'fill':\n          var fill = object.parsedStyle.fill;\n          var color = '';\n          if (isCSSRGB(fill)) {\n            if (fill.isNone) {\n              color = 'transparent';\n            } else {\n              color = object.getAttribute('fill');\n            }\n          } else if (Array.isArray(fill)) {\n            color = object.getAttribute('fill');\n          } else if (isPattern(fill)) ;\n          $el.style.background = color;\n          break;\n        case 'stroke':\n          var stroke = object.parsedStyle.stroke;\n          var borderColor = '';\n          if (isCSSRGB(stroke)) {\n            if (stroke.isNone) {\n              borderColor = 'transparent';\n            } else {\n              borderColor = object.getAttribute('stroke');\n            }\n          } else if (Array.isArray(stroke)) {\n            borderColor = object.getAttribute('stroke');\n          } else if (isPattern(stroke)) ;\n          $el.style['border-color'] = borderColor;\n          $el.style['border-style'] = 'solid';\n          break;\n        case 'lineWidth':\n          var lineWidth = object.parsedStyle.lineWidth;\n          $el.style['border-width'] = \"\".concat(lineWidth || 0, \"px\");\n          break;\n        case 'lineDash':\n          $el.style['border-style'] = 'dashed';\n          break;\n        case 'filter':\n          var filter = object.style.filter;\n          $el.style.filter = filter;\n          break;\n        default:\n          if (!isNil(object.style[name]) && object.style[name] !== '') {\n            $el.style[name] = object.style[name];\n          }\n      }\n    }\n  }]);\n}();\nHTMLRenderingPlugin.tag = 'HTMLRendering';\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'html-renderer';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      this.addRenderingPlugin(new HTMLRenderingPlugin());\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-canvas\n * @description A renderer implemented by Canvas 2D API\n * @version 2.0.42\n * @date 4/14/2025, 2:57:21 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { setDOMSize, RenderReason, AbstractRendererPlugin, AbstractRenderer } from '@antv/g-lite';\nimport * as CanvasPathGenerator from '@antv/g-plugin-canvas-path-generator';\nexport { CanvasPathGenerator };\nimport * as CanvasPicker from '@antv/g-plugin-canvas-picker';\nexport { CanvasPicker };\nimport * as CanvasRenderer from '@antv/g-plugin-canvas-renderer';\nexport { CanvasRenderer };\nimport * as DomInteraction from '@antv/g-plugin-dom-interaction';\nexport { DomInteraction };\nimport * as HTMLRenderer from '@antv/g-plugin-html-renderer';\nexport { HTMLRenderer };\nimport * as ImageLoader from '@antv/g-plugin-image-loader';\nexport { ImageLoader };\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport { isString } from '@antv/util';\n\nvar Canvas2DContextService = /*#__PURE__*/function () {\n  function Canvas2DContextService(context) {\n    _classCallCheck(this, Canvas2DContextService);\n    this.renderingContext = context.renderingContext;\n    this.canvasConfig = context.config;\n  }\n  return _createClass(Canvas2DContextService, [{\n    key: \"init\",\n    value: function init() {\n      var _this$canvasConfig = this.canvasConfig,\n        container = _this$canvasConfig.container,\n        canvas = _this$canvasConfig.canvas;\n      if (canvas) {\n        this.$canvas = canvas;\n        if (container && canvas.parentElement !== container) {\n          container.appendChild(canvas);\n        }\n        this.$container = canvas.parentElement;\n        this.canvasConfig.container = this.$container;\n      } else if (container) {\n        // create container\n        this.$container = isString(container) ? document.getElementById(container) : container;\n        if (this.$container) {\n          // create canvas\n          var $canvas = document.createElement('canvas');\n          this.$container.appendChild($canvas);\n          if (!this.$container.style.position) {\n            this.$container.style.position = 'relative';\n          }\n          this.$canvas = $canvas;\n        }\n      }\n      this.context = this.$canvas.getContext('2d');\n      this.resize(this.canvasConfig.width, this.canvasConfig.height);\n    }\n  }, {\n    key: \"getContext\",\n    value: function getContext() {\n      return this.context;\n    }\n  }, {\n    key: \"getDomElement\",\n    value: function getDomElement() {\n      return this.$canvas;\n    }\n  }, {\n    key: \"getDPR\",\n    value: function getDPR() {\n      return this.dpr;\n    }\n  }, {\n    key: \"getBoundingClientRect\",\n    value: function getBoundingClientRect() {\n      if (this.$canvas.getBoundingClientRect) {\n        return this.$canvas.getBoundingClientRect();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // @ts-ignore\n      if (this.$container && this.$canvas && this.$canvas.parentNode) {\n        // destroy context\n        // @ts-ignore\n        this.$container.removeChild(this.$canvas);\n      }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(width, height) {\n      var dpr = this.canvasConfig.devicePixelRatio;\n      this.dpr = dpr;\n      if (this.$canvas) {\n        // set canvas width & height\n        this.$canvas.width = this.dpr * width;\n        this.$canvas.height = this.dpr * height;\n\n        // set CSS style width & height\n        setDOMSize(this.$canvas, width, height);\n\n        // const dpr = this.getDPR();\n        // scale all drawing operations by the dpr\n        // @see https://www.html5rocks.com/en/tutorials/canvas/hidpi/\n        // this.context.scale(dpr, dpr);\n      }\n      this.renderingContext.renderReasons.add(RenderReason.CAMERA_CHANGED);\n    }\n  }, {\n    key: \"applyCursorStyle\",\n    value: function applyCursorStyle(cursor) {\n      if (this.$container && this.$container.style) {\n        this.$container.style.cursor = cursor;\n      }\n    }\n  }, {\n    key: \"toDataURL\",\n    value: function () {\n      var _toDataURL = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var options,\n          type,\n          encoderOptions,\n          _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n              type = options.type, encoderOptions = options.encoderOptions;\n              return _context.abrupt(\"return\", this.context.canvas.toDataURL(type, encoderOptions));\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function toDataURL() {\n        return _toDataURL.apply(this, arguments);\n      }\n      return toDataURL;\n    }()\n  }]);\n}();\n\nvar ContextRegisterPlugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function ContextRegisterPlugin() {\n    var _this;\n    _classCallCheck(this, ContextRegisterPlugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, ContextRegisterPlugin, [].concat(args));\n    _this.name = 'canvas-context-register';\n    return _this;\n  }\n  _inherits(ContextRegisterPlugin, _AbstractRendererPlug);\n  return _createClass(ContextRegisterPlugin, [{\n    key: \"init\",\n    value: function init() {\n      this.context.ContextService = Canvas2DContextService;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      delete this.context.ContextService;\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nvar Renderer = /*#__PURE__*/function (_AbstractRenderer) {\n  function Renderer(config) {\n    var _this;\n    _classCallCheck(this, Renderer);\n    _this = _callSuper(this, Renderer, [config]);\n\n    // register Canvas2DContext\n    _this.registerPlugin(new ContextRegisterPlugin());\n    _this.registerPlugin(new ImageLoader.Plugin());\n    _this.registerPlugin(new CanvasPathGenerator.Plugin());\n    // enable rendering with Canvas2D API\n    _this.registerPlugin(new CanvasRenderer.Plugin());\n    _this.registerPlugin(new DomInteraction.Plugin());\n    // enable picking with Canvas2D API\n    _this.registerPlugin(new CanvasPicker.Plugin());\n\n    // render HTML component\n    _this.registerPlugin(new HTMLRenderer.Plugin());\n    return _this;\n  }\n  _inherits(Renderer, _AbstractRenderer);\n  return _createClass(Renderer);\n}(AbstractRenderer);\n\nexport { Renderer };\n//# sourceMappingURL=index.esm.js.map\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n","export var paramsCount = {\n    a: 7,\n    c: 6,\n    h: 1,\n    l: 2,\n    m: 2,\n    r: 4,\n    q: 4,\n    s: 4,\n    t: 2,\n    v: 1,\n    z: 0,\n};\n//# sourceMappingURL=params-count.js.map","import { paramsCount } from '../parser/params-count';\n/**\n * Iterates an array to check if it's an actual `PathArray`.\n */\nexport function isPathArray(path) {\n    return (Array.isArray(path) &&\n        path.every(function (seg) {\n            var lk = seg[0].toLowerCase();\n            return paramsCount[lk] === seg.length - 1 && 'achlmqstvz'.includes(lk);\n        }));\n}\n//# sourceMappingURL=is-path-array.js.map","import { isPathArray } from './is-path-array';\n/**\n * Iterates an array to check if it's a `PathArray`\n * with all absolute values.\n */\nexport function isAbsoluteArray(path) {\n    return (isPathArray(path) &&\n        // @ts-ignore -- `isPathArray` also checks if it's `Array`\n        path.every(function (_a) {\n            var x = _a[0];\n            return x === x.toUpperCase();\n        }));\n}\n//# sourceMappingURL=is-absolute-array.js.map","import { isAbsoluteArray } from './is-absolute-array';\n/**\n * Iterates an array to check if it's a `PathArray`\n * with all segments are in non-shorthand notation\n * with absolute values.\n */\nexport function isNormalizedArray(path) {\n    return isAbsoluteArray(path) && path.every(function (_a) {\n        var pc = _a[0];\n        return 'ACLMQZ'.includes(pc);\n    });\n}\n//# sourceMappingURL=is-normalized-array.js.map","export var paramsParser = {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    x: 0,\n    y: 0,\n    qx: null,\n    qy: null,\n};\n//# sourceMappingURL=params-parser.js.map","import { paramsCount } from './params-count';\n/**\n * Breaks the parsing of a pathString once a segment is finalized.\n */\nexport function finalizeSegment(path) {\n    var pathCommand = path.pathValue[path.segmentStart];\n    var LK = pathCommand.toLowerCase();\n    var data = path.data;\n    while (data.length >= paramsCount[LK]) {\n        // overloaded `moveTo`\n        // https://github.com/rveciana/svg-path-properties/blob/master/src/parse.ts\n        if (LK === 'm' && data.length > 2) {\n            // @ts-ignore\n            path.segments.push([pathCommand].concat(data.splice(0, 2)));\n            LK = 'l';\n            pathCommand = pathCommand === 'm' ? 'l' : 'L';\n        }\n        else {\n            // @ts-ignore\n            path.segments.push([pathCommand].concat(data.splice(0, paramsCount[LK])));\n        }\n        if (!paramsCount[LK]) {\n            break;\n        }\n    }\n}\n//# sourceMappingURL=finalize-segment.js.map","/**\n * Validates an A (arc-to) specific path command value.\n * Usually a `large-arc-flag` or `sweep-flag`.\n */\nexport function scanFlag(path) {\n    var index = path.index, pathValue = path.pathValue;\n    var code = pathValue.charCodeAt(index);\n    if (code === 0x30 /* 0 */) {\n        path.param = 0;\n        path.index += 1;\n        return;\n    }\n    if (code === 0x31 /* 1 */) {\n        path.param = 1;\n        path.index += 1;\n        return;\n    }\n    path.err = \"[path-util]: invalid Arc flag \\\"\".concat(pathValue[index], \"\\\", expecting 0 or 1 at index \").concat(index);\n}\n//# sourceMappingURL=scan-flag.js.map","/**\n * Checks if the character is or belongs to a number.\n * [0-9]|+|-|.\n */\nexport function isDigitStart(code) {\n    return ((code >= 48 && code <= 57) /* 0..9 */ || code === 0x2b /* + */ || code === 0x2d /* - */ || code === 0x2e); /* . */\n}\nexport function isDigit(code) {\n    return code >= 48 && code <= 57; // 0..9\n}\n//# sourceMappingURL=is-digit-start.js.map","import { isDigit } from './is-digit-start';\n/**\n * Validates every character of the path string,\n * every path command, negative numbers or floating point numbers.\n */\nexport function scanParam(path) {\n    var max = path.max, pathValue = path.pathValue, start = path.index;\n    var index = start;\n    var zeroFirst = false;\n    var hasCeiling = false;\n    var hasDecimal = false;\n    var hasDot = false;\n    var ch;\n    if (index >= max) {\n        // path.err = 'SvgPath: missed param (at pos ' + index + ')';\n        path.err = \"[path-util]: Invalid path value at index \".concat(index, \", \\\"pathValue\\\" is missing param\");\n        return;\n    }\n    ch = pathValue.charCodeAt(index);\n    if (ch === 0x2b /* + */ || ch === 0x2d /* - */) {\n        index += 1;\n        // ch = (index < max) ? pathValue.charCodeAt(index) : 0;\n        ch = pathValue.charCodeAt(index);\n    }\n    // This logic is shamelessly borrowed from Esprima\n    // https://github.com/ariya/esprimas\n    if (!isDigit(ch) && ch !== 0x2e /* . */) {\n        // path.err = 'SvgPath: param should start with 0..9 or `.` (at pos ' + index + ')';\n        path.err = \"[path-util]: Invalid path value at index \".concat(index, \", \\\"\").concat(pathValue[index], \"\\\" is not a number\");\n        return;\n    }\n    if (ch !== 0x2e /* . */) {\n        zeroFirst = ch === 0x30 /* 0 */;\n        index += 1;\n        ch = pathValue.charCodeAt(index);\n        if (zeroFirst && index < max) {\n            // decimal number starts with '0' such as '09' is illegal.\n            if (ch && isDigit(ch)) {\n                // path.err = 'SvgPath: numbers started with `0` such as `09`\n                // are illegal (at pos ' + start + ')';\n                path.err = \"[path-util]: Invalid path value at index \".concat(start, \", \\\"\").concat(pathValue[start], \"\\\" illegal number\");\n                return;\n            }\n        }\n        while (index < max && isDigit(pathValue.charCodeAt(index))) {\n            index += 1;\n            hasCeiling = true;\n        }\n        ch = pathValue.charCodeAt(index);\n    }\n    if (ch === 0x2e /* . */) {\n        hasDot = true;\n        index += 1;\n        while (isDigit(pathValue.charCodeAt(index))) {\n            index += 1;\n            hasDecimal = true;\n        }\n        ch = pathValue.charCodeAt(index);\n    }\n    if (ch === 0x65 /* e */ || ch === 0x45 /* E */) {\n        if (hasDot && !hasCeiling && !hasDecimal) {\n            path.err = \"[path-util]: Invalid path value at index \".concat(index, \", \\\"\").concat(pathValue[index], \"\\\" invalid float exponent\");\n            return;\n        }\n        index += 1;\n        ch = pathValue.charCodeAt(index);\n        if (ch === 0x2b /* + */ || ch === 0x2d /* - */) {\n            index += 1;\n        }\n        if (index < max && isDigit(pathValue.charCodeAt(index))) {\n            while (index < max && isDigit(pathValue.charCodeAt(index))) {\n                index += 1;\n            }\n        }\n        else {\n            path.err = \"[path-util]: Invalid path value at index \".concat(index, \", \\\"\").concat(pathValue[index], \"\\\" invalid integer exponent\");\n            return;\n        }\n    }\n    path.index = index;\n    path.param = +path.pathValue.slice(start, index);\n}\n//# sourceMappingURL=scan-param.js.map","import { isSpace } from './is-space';\n/**\n * Points the parser to the next character in the\n * path string every time it encounters any kind of\n * space character.\n */\nexport function skipSpaces(path) {\n    var pathValue = path.pathValue, max = path.max;\n    while (path.index < max && isSpace(pathValue.charCodeAt(path.index))) {\n        path.index += 1;\n    }\n}\n//# sourceMappingURL=skip-spaces.js.map","/**\n * Checks if the character is a space.\n */\nexport function isSpace(ch) {\n    var specialSpaces = [\n        0x1680, 0x180e, 0x2000, 0x2001, 0x2002, 0x2003, 0x2004, 0x2005, 0x2006, 0x2007, 0x2008, 0x2009, 0x200a, 0x202f,\n        0x205f, 0x3000, 0xfeff,\n    ];\n    /* istanbul ignore next */\n    return (ch === 0x0a ||\n        ch === 0x0d ||\n        ch === 0x2028 ||\n        ch === 0x2029 || // Line terminators\n        // White spaces\n        ch === 0x20 ||\n        ch === 0x09 ||\n        ch === 0x0b ||\n        ch === 0x0c ||\n        ch === 0xa0 ||\n        (ch >= 0x1680 && specialSpaces.includes(ch)));\n}\n//# sourceMappingURL=is-space.js.map","import { finalizeSegment } from './finalize-segment';\nimport { paramsCount } from './params-count';\nimport { scanFlag } from './scan-flag';\nimport { scanParam } from './scan-param';\nimport { skipSpaces } from './skip-spaces';\nimport { isPathCommand } from './is-path-command';\nimport { isDigitStart } from './is-digit-start';\nimport { isArcCommand } from './is-arc-command';\n/**\n * Scans every character in the path string to determine\n * where a segment starts and where it ends.\n */\nexport function scanSegment(path) {\n    var max = path.max, pathValue = path.pathValue, index = path.index;\n    var cmdCode = pathValue.charCodeAt(index);\n    var reqParams = paramsCount[pathValue[index].toLowerCase()];\n    path.segmentStart = index;\n    if (!isPathCommand(cmdCode)) {\n        path.err = \"[path-util]: Invalid path value \\\"\".concat(pathValue[index], \"\\\" is not a path command\");\n        return;\n    }\n    path.index += 1;\n    skipSpaces(path);\n    path.data = [];\n    if (!reqParams) {\n        // Z\n        finalizeSegment(path);\n        return;\n    }\n    for (;;) {\n        for (var i = reqParams; i > 0; i -= 1) {\n            if (isArcCommand(cmdCode) && (i === 3 || i === 4))\n                scanFlag(path);\n            else\n                scanParam(path);\n            if (path.err.length) {\n                return;\n            }\n            path.data.push(path.param);\n            skipSpaces(path);\n            // after ',' param is mandatory\n            if (path.index < max && pathValue.charCodeAt(path.index) === 0x2c /* , */) {\n                path.index += 1;\n                skipSpaces(path);\n            }\n        }\n        if (path.index >= path.max) {\n            break;\n        }\n        // Stop on next segment\n        if (!isDigitStart(pathValue.charCodeAt(path.index))) {\n            break;\n        }\n    }\n    finalizeSegment(path);\n}\n//# sourceMappingURL=scan-segment.js.map","/**\n * Checks if the character is a path command.\n */\nexport function isPathCommand(code) {\n    // eslint-disable-next-line no-bitwise -- Impossible to satisfy\n    switch (code | 0x20) {\n        case 0x6d /* m */:\n        case 0x7a /* z */:\n        case 0x6c /* l */:\n        case 0x68 /* h */:\n        case 0x76 /* v */:\n        case 0x63 /* c */:\n        case 0x73 /* s */:\n        case 0x71 /* q */:\n        case 0x74 /* t */:\n        case 0x61 /* a */:\n            // case 0x72/* r */:\n            return true;\n        default:\n            return false;\n    }\n}\n//# sourceMappingURL=is-path-command.js.map","/**\n * Checks if the character is an A (arc-to) path command.\n */\nexport function isArcCommand(code) {\n    return (code | 0x20) === 0x61;\n}\n//# sourceMappingURL=is-arc-command.js.map","/**\n * The `PathParser` is used by the `parsePathString` static method\n * to generate a `pathArray`.\n */\nvar PathParser = /** @class */ (function () {\n    function PathParser(pathString) {\n        this.pathValue = pathString;\n        // @ts-ignore\n        this.segments = [];\n        this.max = pathString.length;\n        this.index = 0;\n        this.param = 0.0;\n        this.segmentStart = 0;\n        this.data = [];\n        this.err = '';\n    }\n    return PathParser;\n}());\nexport { PathParser };\n//# sourceMappingURL=path-parser.js.map","import { isAbsoluteArray } from '../util/is-absolute-array';\nimport { parsePathString } from '../parser/parse-path-string';\nexport function path2Absolute(pathInput) {\n    if (isAbsoluteArray(pathInput)) {\n        return [].concat(pathInput);\n    }\n    var path = parsePathString(pathInput);\n    // if (!path || !path.length) {\n    //   return [['M', 0, 0]];\n    // }\n    var x = 0;\n    var y = 0;\n    var mx = 0;\n    var my = 0;\n    // @ts-ignore\n    return path.map(function (segment) {\n        var values = segment.slice(1).map(Number);\n        var pathCommand = segment[0];\n        var absCommand = pathCommand.toUpperCase();\n        if (pathCommand === 'M') {\n            x = values[0], y = values[1];\n            mx = x;\n            my = y;\n            return ['M', x, y];\n        }\n        var absoluteSegment;\n        if (pathCommand !== absCommand) {\n            switch (absCommand) {\n                case 'A':\n                    absoluteSegment = [\n                        absCommand,\n                        values[0],\n                        values[1],\n                        values[2],\n                        values[3],\n                        values[4],\n                        values[5] + x,\n                        values[6] + y,\n                    ];\n                    break;\n                case 'V':\n                    absoluteSegment = [absCommand, values[0] + y];\n                    break;\n                case 'H':\n                    absoluteSegment = [absCommand, values[0] + x];\n                    break;\n                default: {\n                    // use brakets for `eslint: no-case-declaration`\n                    // https://stackoverflow.com/a/50753272/803358\n                    var absValues = values.map(function (n, j) { return n + (j % 2 ? y : x); });\n                    // for n, l, c, s, q, t\n                    // @ts-ignore\n                    absoluteSegment = [absCommand].concat(absValues);\n                }\n            }\n        }\n        else {\n            // @ts-ignore\n            absoluteSegment = [absCommand].concat(values);\n        }\n        var segLength = absoluteSegment.length;\n        switch (absCommand) {\n            case 'Z':\n                x = mx;\n                y = my;\n                break;\n            case 'H':\n                x = absoluteSegment[1];\n                break;\n            case 'V':\n                y = absoluteSegment[1];\n                break;\n            default:\n                x = absoluteSegment[segLength - 2];\n                y = absoluteSegment[segLength - 1];\n                if (absCommand === 'M') {\n                    mx = x;\n                    my = y;\n                }\n        }\n        return absoluteSegment;\n    });\n}\n//# sourceMappingURL=path-2-absolute.js.map","import { isPathArray } from '../util/is-path-array';\nimport { scanSegment } from './scan-segment';\nimport { skipSpaces } from './skip-spaces';\nimport { PathParser } from './path-parser';\n/**\n * Parses a path string value and returns an array\n * of segments we like to call `pathArray`.\n */\nexport function parsePathString(pathInput) {\n    if (isPathArray(pathInput)) {\n        return [].concat(pathInput);\n    }\n    var path = new PathParser(pathInput);\n    skipSpaces(path);\n    while (path.index < path.max && !path.err.length) {\n        scanSegment(path);\n    }\n    return path.err ? path.err : path.segments;\n}\n//# sourceMappingURL=parse-path-string.js.map","/**\n * Normalizes a single segment of a `PathArray` object.\n * eg. H/V -> L, T -> Q\n */\nexport function normalizeSegment(segment, params) {\n    var pathCommand = segment[0];\n    var px1 = params.x1, py1 = params.y1, px2 = params.x2, py2 = params.y2;\n    var values = segment.slice(1).map(Number);\n    var result = segment;\n    if (!'TQ'.includes(pathCommand)) {\n        // optional but good to be cautious\n        params.qx = null;\n        params.qy = null;\n    }\n    if (pathCommand === 'H') {\n        result = ['L', segment[1], py1];\n    }\n    else if (pathCommand === 'V') {\n        result = ['L', px1, segment[1]];\n    }\n    else if (pathCommand === 'S') {\n        var x1 = px1 * 2 - px2;\n        var y1 = py1 * 2 - py2;\n        params.x1 = x1;\n        params.y1 = y1;\n        result = ['C', x1, y1].concat(values);\n    }\n    else if (pathCommand === 'T') {\n        var qx = px1 * 2 - params.qx;\n        var qy = py1 * 2 - params.qy;\n        params.qx = qx;\n        params.qy = qy;\n        result = ['Q', qx, qy].concat(values);\n    }\n    else if (pathCommand === 'Q') {\n        var nqx = values[0], nqy = values[1];\n        params.qx = nqx;\n        params.qy = nqy;\n    }\n    return result;\n}\n//# sourceMappingURL=normalize-segment.js.map","import { __assign } from \"tslib\";\nimport { isNormalizedArray } from '../util/is-normalized-array';\nimport { paramsParser } from '../parser/params-parser';\nimport { path2Absolute } from '../convert/path-2-absolute';\nimport { normalizeSegment } from './normalize-segment';\n/**\n * @example\n * const path = 'M0 0 H50';\n * const normalizedPath = SVGPathCommander.normalizePath(path);\n * // result => [['M', 0, 0], ['L', 50, 0]]\n */\nexport function normalizePath(pathInput) {\n    if (isNormalizedArray(pathInput)) {\n        return [].concat(pathInput);\n    }\n    var path = path2Absolute(pathInput);\n    var params = __assign({}, paramsParser);\n    for (var i = 0; i < path.length; i += 1) {\n        // Save current path command\n        path[i] = normalizeSegment(path[i], params);\n        var segment = path[i];\n        var seglen = segment.length;\n        params.x1 = +segment[seglen - 2];\n        params.y1 = +segment[seglen - 1];\n        params.x2 = +segment[seglen - 4] || params.x1;\n        params.y2 = +segment[seglen - 3] || params.y1;\n    }\n    return path;\n}\n//# sourceMappingURL=normalize-path.js.map","export function midPoint(a, b, t) {\n    var ax = a[0];\n    var ay = a[1];\n    var bx = b[0];\n    var by = b[1];\n    return [ax + (bx - ax) * t, ay + (by - ay) * t];\n}\n//# sourceMappingURL=mid-point.js.map","import { midPoint } from './mid-point';\nimport { distanceSquareRoot } from './distance-square-root';\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a line (L,V,H,Z) segment.\n */\nexport function segmentLineFactory(x1, y1, x2, y2, distance) {\n    var length = distanceSquareRoot([x1, y1], [x2, y2]);\n    var point = { x: 0, y: 0 };\n    if (typeof distance === 'number') {\n        if (distance <= 0) {\n            point = { x: x1, y: y1 };\n        }\n        else if (distance >= length) {\n            point = { x: x2, y: y2 };\n        }\n        else {\n            var _a = midPoint([x1, y1], [x2, y2], distance / length), x = _a[0], y = _a[1];\n            point = { x: x, y: y };\n        }\n    }\n    return {\n        length: length,\n        point: point,\n        min: {\n            x: Math.min(x1, x2),\n            y: Math.min(y1, y2),\n        },\n        max: {\n            x: Math.max(x1, x2),\n            y: Math.max(y1, y2),\n        },\n    };\n}\n//# sourceMappingURL=segment-line-factory.js.map","import { segmentLineFactory } from './segment-line-factory';\nimport { distanceSquareRoot } from './distance-square-root';\nfunction angleBetween(v0, v1) {\n    var v0x = v0.x, v0y = v0.y;\n    var v1x = v1.x, v1y = v1.y;\n    var p = v0x * v1x + v0y * v1y;\n    var n = Math.sqrt((Math.pow(v0x, 2) + Math.pow(v0y, 2)) * (Math.pow(v1x, 2) + Math.pow(v1y, 2)));\n    var sign = v0x * v1y - v0y * v1x < 0 ? -1 : 1;\n    var angle = sign * Math.acos(p / n);\n    return angle;\n}\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a C (cubic-bezier) segment.\n * @see https://github.com/MadLittleMods/svg-curve-lib/blob/master/src/js/svg-curve-lib.js\n */\nfunction getPointAtArcSegmentLength(x1, y1, RX, RY, angle, LAF, SF, x, y, t) {\n    var abs = Math.abs, sin = Math.sin, cos = Math.cos, sqrt = Math.sqrt, PI = Math.PI;\n    var rx = abs(RX);\n    var ry = abs(RY);\n    var xRot = ((angle % 360) + 360) % 360;\n    var xRotRad = xRot * (PI / 180);\n    if (x1 === x && y1 === y) {\n        return { x: x1, y: y1 };\n    }\n    if (rx === 0 || ry === 0) {\n        return segmentLineFactory(x1, y1, x, y, t).point;\n    }\n    var dx = (x1 - x) / 2;\n    var dy = (y1 - y) / 2;\n    var transformedPoint = {\n        x: cos(xRotRad) * dx + sin(xRotRad) * dy,\n        y: -sin(xRotRad) * dx + cos(xRotRad) * dy,\n    };\n    var radiiCheck = Math.pow(transformedPoint.x, 2) / Math.pow(rx, 2) + Math.pow(transformedPoint.y, 2) / Math.pow(ry, 2);\n    if (radiiCheck > 1) {\n        rx *= sqrt(radiiCheck);\n        ry *= sqrt(radiiCheck);\n    }\n    var cSquareNumerator = Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(transformedPoint.y, 2) - Math.pow(ry, 2) * Math.pow(transformedPoint.x, 2);\n    var cSquareRootDenom = Math.pow(rx, 2) * Math.pow(transformedPoint.y, 2) + Math.pow(ry, 2) * Math.pow(transformedPoint.x, 2);\n    var cRadicand = cSquareNumerator / cSquareRootDenom;\n    cRadicand = cRadicand < 0 ? 0 : cRadicand;\n    var cCoef = (LAF !== SF ? 1 : -1) * sqrt(cRadicand);\n    var transformedCenter = {\n        x: cCoef * ((rx * transformedPoint.y) / ry),\n        y: cCoef * (-(ry * transformedPoint.x) / rx),\n    };\n    var center = {\n        x: cos(xRotRad) * transformedCenter.x - sin(xRotRad) * transformedCenter.y + (x1 + x) / 2,\n        y: sin(xRotRad) * transformedCenter.x + cos(xRotRad) * transformedCenter.y + (y1 + y) / 2,\n    };\n    var startVector = {\n        x: (transformedPoint.x - transformedCenter.x) / rx,\n        y: (transformedPoint.y - transformedCenter.y) / ry,\n    };\n    var startAngle = angleBetween({ x: 1, y: 0 }, startVector);\n    var endVector = {\n        x: (-transformedPoint.x - transformedCenter.x) / rx,\n        y: (-transformedPoint.y - transformedCenter.y) / ry,\n    };\n    var sweepAngle = angleBetween(startVector, endVector);\n    if (!SF && sweepAngle > 0) {\n        sweepAngle -= 2 * PI;\n    }\n    else if (SF && sweepAngle < 0) {\n        sweepAngle += 2 * PI;\n    }\n    sweepAngle %= 2 * PI;\n    var alpha = startAngle + sweepAngle * t;\n    var ellipseComponentX = rx * cos(alpha);\n    var ellipseComponentY = ry * sin(alpha);\n    var point = {\n        x: cos(xRotRad) * ellipseComponentX - sin(xRotRad) * ellipseComponentY + center.x,\n        y: sin(xRotRad) * ellipseComponentX + cos(xRotRad) * ellipseComponentY + center.y,\n    };\n    // to be used later\n    // point.ellipticalArcStartAngle = startAngle;\n    // point.ellipticalArcEndAngle = startAngle + sweepAngle;\n    // point.ellipticalArcAngle = alpha;\n    // point.ellipticalArcCenter = center;\n    // point.resultantRx = rx;\n    // point.resultantRy = ry;\n    return point;\n}\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the shape minimum and maximum {x,y} coordinates of an A (arc-to) segment.\n *\n * For better performance, it can skip calculate bbox or length in some scenario.\n */\nexport function segmentArcFactory(X1, Y1, RX, RY, angle, LAF, SF, X2, Y2, distance, options) {\n    var _a;\n    var _b = options.bbox, bbox = _b === void 0 ? true : _b, _c = options.length, length = _c === void 0 ? true : _c, _d = options.sampleSize, sampleSize = _d === void 0 ? 30 : _d;\n    var distanceIsNumber = typeof distance === 'number';\n    var x = X1;\n    var y = Y1;\n    var LENGTH = 0;\n    var prev = [x, y, LENGTH];\n    var cur = [x, y];\n    var t = 0;\n    var POINT = { x: 0, y: 0 };\n    var POINTS = [{ x: x, y: y }];\n    if (distanceIsNumber && distance <= 0) {\n        POINT = { x: x, y: y };\n    }\n    // bad perf when size > 100\n    for (var j = 0; j <= sampleSize; j += 1) {\n        t = j / sampleSize;\n        (_a = getPointAtArcSegmentLength(X1, Y1, RX, RY, angle, LAF, SF, X2, Y2, t), x = _a.x, y = _a.y);\n        if (bbox) {\n            POINTS.push({ x: x, y: y });\n        }\n        if (length) {\n            LENGTH += distanceSquareRoot(cur, [x, y]);\n        }\n        cur = [x, y];\n        if (distanceIsNumber && LENGTH >= distance && distance > prev[2]) {\n            var dv = (LENGTH - distance) / (LENGTH - prev[2]);\n            POINT = {\n                x: cur[0] * (1 - dv) + prev[0] * dv,\n                y: cur[1] * (1 - dv) + prev[1] * dv,\n            };\n        }\n        prev = [x, y, LENGTH];\n    }\n    if (distanceIsNumber && distance >= LENGTH) {\n        POINT = { x: X2, y: Y2 };\n    }\n    return {\n        length: LENGTH,\n        point: POINT,\n        min: {\n            x: Math.min.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.min.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n        max: {\n            x: Math.max.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.max.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n    };\n}\n//# sourceMappingURL=segment-arc-factory.js.map","import { distanceSquareRoot } from './distance-square-root';\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a C (cubic-bezier) segment.\n */\nfunction getPointAtCubicSegmentLength(x1, y1, c1x, c1y, c2x, c2y, x2, y2, t) {\n    var t1 = 1 - t;\n    return {\n        x: Math.pow(t1, 3) * x1 + 3 * Math.pow(t1, 2) * t * c1x + 3 * t1 * Math.pow(t, 2) * c2x + Math.pow(t, 3) * x2,\n        y: Math.pow(t1, 3) * y1 + 3 * Math.pow(t1, 2) * t * c1y + 3 * t1 * Math.pow(t, 2) * c2y + Math.pow(t, 3) * y2,\n    };\n}\n/**\n * Returns the length of a C (cubic-bezier) segment\n * or an {x,y} point at a given length.\n */\nexport function segmentCubicFactory(x1, y1, c1x, c1y, c2x, c2y, x2, y2, distance, options) {\n    var _a;\n    var _b = options.bbox, bbox = _b === void 0 ? true : _b, _c = options.length, length = _c === void 0 ? true : _c, _d = options.sampleSize, sampleSize = _d === void 0 ? 10 : _d;\n    var distanceIsNumber = typeof distance === 'number';\n    var x = x1;\n    var y = y1;\n    var LENGTH = 0;\n    var prev = [x, y, LENGTH];\n    var cur = [x, y];\n    var t = 0;\n    var POINT = { x: 0, y: 0 };\n    var POINTS = [{ x: x, y: y }];\n    if (distanceIsNumber && distance <= 0) {\n        POINT = { x: x, y: y };\n    }\n    // bad perf when size = 300\n    for (var j = 0; j <= sampleSize; j += 1) {\n        t = j / sampleSize;\n        (_a = getPointAtCubicSegmentLength(x1, y1, c1x, c1y, c2x, c2y, x2, y2, t), x = _a.x, y = _a.y);\n        if (bbox) {\n            POINTS.push({ x: x, y: y });\n        }\n        if (length) {\n            LENGTH += distanceSquareRoot(cur, [x, y]);\n        }\n        cur = [x, y];\n        if (distanceIsNumber && LENGTH >= distance && distance > prev[2]) {\n            var dv = (LENGTH - distance) / (LENGTH - prev[2]);\n            POINT = {\n                x: cur[0] * (1 - dv) + prev[0] * dv,\n                y: cur[1] * (1 - dv) + prev[1] * dv,\n            };\n        }\n        prev = [x, y, LENGTH];\n    }\n    if (distanceIsNumber && distance >= LENGTH) {\n        POINT = { x: x2, y: y2 };\n    }\n    return {\n        length: LENGTH,\n        point: POINT,\n        min: {\n            x: Math.min.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.min.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n        max: {\n            x: Math.max.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.max.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n    };\n}\n//# sourceMappingURL=segment-cubic-factory.js.map","import { distanceSquareRoot } from './distance-square-root';\n/**\n * Returns the {x,y} coordinates of a point at a\n * given length of a quadratic-bezier segment.\n *\n * @see https://github.com/substack/point-at-length\n */\nfunction getPointAtQuadSegmentLength(x1, y1, cx, cy, x2, y2, t) {\n    var t1 = 1 - t;\n    return {\n        x: Math.pow(t1, 2) * x1 + 2 * t1 * t * cx + Math.pow(t, 2) * x2,\n        y: Math.pow(t1, 2) * y1 + 2 * t1 * t * cy + Math.pow(t, 2) * y2,\n    };\n}\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a Q (quadratic-bezier) segment.\n */\nexport function segmentQuadFactory(x1, y1, qx, qy, x2, y2, distance, options) {\n    var _a;\n    var _b = options.bbox, bbox = _b === void 0 ? true : _b, _c = options.length, length = _c === void 0 ? true : _c, _d = options.sampleSize, sampleSize = _d === void 0 ? 10 : _d;\n    var distanceIsNumber = typeof distance === 'number';\n    var x = x1;\n    var y = y1;\n    var LENGTH = 0;\n    var prev = [x, y, LENGTH];\n    var cur = [x, y];\n    var t = 0;\n    var POINT = { x: 0, y: 0 };\n    var POINTS = [{ x: x, y: y }];\n    if (distanceIsNumber && distance <= 0) {\n        POINT = { x: x, y: y };\n    }\n    for (var j = 0; j <= sampleSize; j += 1) {\n        t = j / sampleSize;\n        (_a = getPointAtQuadSegmentLength(x1, y1, qx, qy, x2, y2, t), x = _a.x, y = _a.y);\n        if (bbox) {\n            POINTS.push({ x: x, y: y });\n        }\n        if (length) {\n            LENGTH += distanceSquareRoot(cur, [x, y]);\n        }\n        cur = [x, y];\n        if (distanceIsNumber && LENGTH >= distance && distance > prev[2]) {\n            var dv = (LENGTH - distance) / (LENGTH - prev[2]);\n            POINT = {\n                x: cur[0] * (1 - dv) + prev[0] * dv,\n                y: cur[1] * (1 - dv) + prev[1] * dv,\n            };\n        }\n        prev = [x, y, LENGTH];\n    }\n    /* istanbul ignore else */\n    if (distanceIsNumber && distance >= LENGTH) {\n        POINT = { x: x2, y: y2 };\n    }\n    return {\n        length: LENGTH,\n        point: POINT,\n        min: {\n            x: Math.min.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.min.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n        max: {\n            x: Math.max.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.max.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n    };\n}\n//# sourceMappingURL=segment-quad-factory.js.map","import { normalizePath } from '../process/normalize-path';\nimport { segmentLineFactory } from './segment-line-factory';\nimport { segmentArcFactory } from './segment-arc-factory';\nimport { segmentCubicFactory } from './segment-cubic-factory';\nimport { segmentQuadFactory } from './segment-quad-factory';\n/**\n * Returns a {x,y} point at a given length\n * of a shape, the shape total length and\n * the shape minimum and maximum {x,y} coordinates.\n */\nexport function pathLengthFactory(pathInput, distance, options) {\n    var _a, _b, _c, _d, _e, _f;\n    var path = normalizePath(pathInput);\n    var distanceIsNumber = typeof distance === 'number';\n    var isM;\n    var data = [];\n    var pathCommand;\n    var x = 0;\n    var y = 0;\n    var mx = 0;\n    var my = 0;\n    var seg;\n    var MIN = [];\n    var MAX = [];\n    var length = 0;\n    var min = { x: 0, y: 0 };\n    var max = min;\n    var point = min;\n    var POINT = min;\n    var LENGTH = 0;\n    for (var i = 0, ll = path.length; i < ll; i += 1) {\n        seg = path[i];\n        pathCommand = seg[0];\n        isM = pathCommand === 'M';\n        data = !isM ? [x, y].concat(seg.slice(1)) : data;\n        // this segment is always ZERO\n        /* istanbul ignore else */\n        if (isM) {\n            // remember mx, my for Z\n            mx = seg[1], my = seg[2];\n            min = { x: mx, y: my };\n            max = min;\n            length = 0;\n            if (distanceIsNumber && distance < 0.001) {\n                POINT = min;\n            }\n        }\n        else if (pathCommand === 'L') {\n            (_a = segmentLineFactory(data[0], data[1], data[2], data[3], (distance || 0) - LENGTH), length = _a.length, min = _a.min, max = _a.max, point = _a.point);\n        }\n        else if (pathCommand === 'A') {\n            (_b = segmentArcFactory(data[0], data[1], data[2], data[3], data[4], data[5], data[6], data[7], data[8], (distance || 0) - LENGTH, options || {}), length = _b.length, min = _b.min, max = _b.max, point = _b.point);\n        }\n        else if (pathCommand === 'C') {\n            (_c = segmentCubicFactory(data[0], data[1], data[2], data[3], data[4], data[5], data[6], data[7], (distance || 0) - LENGTH, options || {}), length = _c.length, min = _c.min, max = _c.max, point = _c.point);\n        }\n        else if (pathCommand === 'Q') {\n            (_d = segmentQuadFactory(data[0], data[1], data[2], data[3], data[4], data[5], (distance || 0) - LENGTH, options || {}), length = _d.length, min = _d.min, max = _d.max, point = _d.point);\n        }\n        else if (pathCommand === 'Z') {\n            data = [x, y, mx, my];\n            (_e = segmentLineFactory(data[0], data[1], data[2], data[3], (distance || 0) - LENGTH), length = _e.length, min = _e.min, max = _e.max, point = _e.point);\n        }\n        if (distanceIsNumber && LENGTH < distance && LENGTH + length >= distance) {\n            POINT = point;\n        }\n        MAX.push(max);\n        MIN.push(min);\n        LENGTH += length;\n        _f = pathCommand !== 'Z' ? seg.slice(-2) : [mx, my], x = _f[0], y = _f[1];\n    }\n    // native `getPointAtLength` behavior when the given distance\n    // is higher than total length\n    if (distanceIsNumber && distance >= LENGTH) {\n        POINT = { x: x, y: y };\n    }\n    return {\n        length: LENGTH,\n        point: POINT,\n        min: {\n            x: Math.min.apply(null, MIN.map(function (n) { return n.x; })),\n            y: Math.min.apply(null, MIN.map(function (n) { return n.y; })),\n        },\n        max: {\n            x: Math.max.apply(null, MAX.map(function (n) { return n.x; })),\n            y: Math.max.apply(null, MAX.map(function (n) { return n.y; })),\n        },\n    };\n}\n//# sourceMappingURL=path-length-factory.js.map","var mod = function (n, m) {\n    return ((n % m) + m) % m;\n};\nexport default mod;\n//# sourceMappingURL=mod.js.map","export function fixArc(pathArray, allPathCommands, i) {\n    if (pathArray[i].length > 7) {\n        pathArray[i].shift();\n        var pi = pathArray[i];\n        // const ni = i + 1;\n        var ni = i;\n        while (pi.length) {\n            // if created multiple C:s, their original seg is saved\n            allPathCommands[i] = 'A';\n            // @ts-ignore\n            pathArray.splice((ni += 1), 0, ['C'].concat(pi.splice(0, 6)));\n        }\n        pathArray.splice(i, 1);\n    }\n}\n//# sourceMappingURL=fix-arc.js.map","import { __spreadArray } from \"tslib\";\nimport { midPoint } from '../util/mid-point';\nexport var lineToCubic = function (x1, y1, x2, y2) {\n    var t = 0.5;\n    var mid = midPoint([x1, y1], [x2, y2], t);\n    return __spreadArray(__spreadArray([], mid, true), [x2, y2, x2, y2], false);\n};\n//# sourceMappingURL=line-2-cubic.js.map","import { arcToCubic } from './arc-2-cubic';\nimport { quadToCubic } from './quad-2-cubic';\nimport { lineToCubic } from './line-2-cubic';\nexport function segmentToCubic(segment, params) {\n    var pathCommand = segment[0];\n    var values = segment.slice(1).map(Number);\n    var x = values[0], y = values[1];\n    var args;\n    var px1 = params.x1, py1 = params.y1, px = params.x, py = params.y;\n    if (!'TQ'.includes(pathCommand)) {\n        params.qx = null;\n        params.qy = null;\n    }\n    switch (pathCommand) {\n        case 'M':\n            params.x = x;\n            params.y = y;\n            return segment;\n        case 'A':\n            args = [px1, py1].concat(values);\n            // @ts-ignore\n            return ['C'].concat(arcToCubic(args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7], args[8], args[9]));\n        case 'Q':\n            params.qx = x;\n            params.qy = y;\n            args = [px1, py1].concat(values);\n            // @ts-ignore\n            return ['C'].concat(quadToCubic(args[0], args[1], args[2], args[3], args[4], args[5]));\n        case 'L':\n            // @ts-ignore\n            return ['C'].concat(lineToCubic(px1, py1, x, y));\n        case 'Z':\n            // prevent NaN from divide 0\n            if (px1 === px && py1 === py) {\n                return ['C', px1, py1, px, py, px, py];\n            }\n            // @ts-ignore\n            return ['C'].concat(lineToCubic(px1, py1, px, py));\n        default:\n    }\n    return segment;\n}\n//# sourceMappingURL=segment-2-cubic.js.map","export function quadToCubic(x1, y1, qx, qy, x2, y2) {\n    var r13 = 1 / 3;\n    var r23 = 2 / 3;\n    return [\n        r13 * x1 + r23 * qx, // cpx1\n        r13 * y1 + r23 * qy, // cpy1\n        r13 * x2 + r23 * qx, // cpx2\n        r13 * y2 + r23 * qy, // cpy2\n        x2,\n        y2, // x,y\n    ];\n}\n//# sourceMappingURL=quad-2-cubic.js.map","import { __assign } from \"tslib\";\nimport { paramsParser } from '../parser/params-parser';\nimport { fixArc } from '../process/fix-arc';\nimport { normalizePath } from '../process/normalize-path';\nimport { isCurveArray } from '../util/is-curve-array';\nimport { segmentToCubic } from '../process/segment-2-cubic';\n// import { fixPath } from '../process/fix-path';\nexport function path2Curve(pathInput, needZCommandIndexes) {\n    if (needZCommandIndexes === void 0) { needZCommandIndexes = false; }\n    if (isCurveArray(pathInput)) {\n        var cloned = [].concat(pathInput);\n        if (needZCommandIndexes) {\n            return [cloned, []];\n        }\n        else {\n            return cloned;\n        }\n    }\n    // fixPath will remove 'Z' command\n    // const path = fixPath(normalizePath(pathInput));\n    var path = normalizePath(pathInput);\n    var params = __assign({}, paramsParser);\n    var allPathCommands = [];\n    var pathCommand = '';\n    var ii = path.length;\n    var segment;\n    var seglen;\n    var zCommandIndexes = [];\n    for (var i = 0; i < ii; i += 1) {\n        if (path[i])\n            pathCommand = path[i][0];\n        allPathCommands[i] = pathCommand;\n        var curveSegment = segmentToCubic(path[i], params);\n        path[i] = curveSegment;\n        fixArc(path, allPathCommands, i);\n        ii = path.length; // solves curveArrays ending in Z\n        // keep Z command account for lineJoin\n        // @see https://github.com/antvis/util/issues/68\n        if (pathCommand === 'Z') {\n            zCommandIndexes.push(i);\n        }\n        segment = path[i];\n        seglen = segment.length;\n        params.x1 = +segment[seglen - 2];\n        params.y1 = +segment[seglen - 1];\n        params.x2 = +segment[seglen - 4] || params.x1;\n        params.y2 = +segment[seglen - 3] || params.y1;\n    }\n    // validate\n    if (needZCommandIndexes) {\n        return [path, zCommandIndexes];\n    }\n    else {\n        return path;\n    }\n}\n//# sourceMappingURL=path-2-curve.js.map","import { isNormalizedArray } from './is-normalized-array';\n/**\n * Iterates an array to check if it's a `PathArray`\n * with all C (cubic bezier) segments.\n *\n * @param {string | PathArray} path the `Array` to be checked\n * @returns {boolean} iteration result\n */\nexport function isCurveArray(path) {\n    return isNormalizedArray(path) && path.every(function (_a) {\n        var pc = _a[0];\n        return 'MC'.includes(pc);\n    });\n}\n//# sourceMappingURL=is-curve-array.js.map","import { midPoint } from './mid-point';\nimport { segmentCubicFactory } from './segment-cubic-factory';\nfunction splitCubic(pts, t) {\n    if (t === void 0) { t = 0.5; }\n    var p0 = pts.slice(0, 2);\n    var p1 = pts.slice(2, 4);\n    var p2 = pts.slice(4, 6);\n    var p3 = pts.slice(6, 8);\n    var p4 = midPoint(p0, p1, t);\n    var p5 = midPoint(p1, p2, t);\n    var p6 = midPoint(p2, p3, t);\n    var p7 = midPoint(p4, p5, t);\n    var p8 = midPoint(p5, p6, t);\n    var p9 = midPoint(p7, p8, t);\n    return [\n        // @ts-ignore\n        ['C'].concat(p4, p7, p9),\n        // @ts-ignore\n        ['C'].concat(p8, p6, p3),\n    ];\n}\nfunction getCurveArray(segments) {\n    return segments.map(function (segment, i, pathArray) {\n        // @ts-ignore\n        var segmentData = i && pathArray[i - 1].slice(-2).concat(segment.slice(1));\n        // @ts-ignore\n        var curveLength = i\n            ? segmentCubicFactory(segmentData[0], segmentData[1], segmentData[2], segmentData[3], segmentData[4], segmentData[5], segmentData[6], segmentData[7], segmentData[8], { bbox: false }).length\n            : 0;\n        var subsegs;\n        if (i) {\n            // must be [segment,segment]\n            subsegs = curveLength ? splitCubic(segmentData) : [segment, segment];\n        }\n        else {\n            subsegs = [segment];\n        }\n        return {\n            s: segment,\n            ss: subsegs,\n            l: curveLength,\n        };\n    });\n}\nexport function equalizeSegments(path1, path2, TL) {\n    var c1 = getCurveArray(path1);\n    var c2 = getCurveArray(path2);\n    var L1 = c1.length;\n    var L2 = c2.length;\n    var l1 = c1.filter(function (x) { return x.l; }).length;\n    var l2 = c2.filter(function (x) { return x.l; }).length;\n    var m1 = c1.filter(function (x) { return x.l; }).reduce(function (a, _a) {\n        var l = _a.l;\n        return a + l;\n    }, 0) / l1 || 0;\n    var m2 = c2.filter(function (x) { return x.l; }).reduce(function (a, _a) {\n        var l = _a.l;\n        return a + l;\n    }, 0) / l2 || 0;\n    var tl = TL || Math.max(L1, L2);\n    var mm = [m1, m2];\n    var dif = [tl - L1, tl - L2];\n    var canSplit = 0;\n    var result = [c1, c2].map(function (x, i) {\n        // @ts-ignore\n        return x.l === tl\n            ? x.map(function (y) { return y.s; })\n            : x\n                .map(function (y, j) {\n                canSplit = j && dif[i] && y.l >= mm[i];\n                dif[i] -= canSplit ? 1 : 0;\n                return canSplit ? y.ss : [y.s];\n            })\n                .flat();\n    });\n    return result[0].length === result[1].length ? result : equalizeSegments(result[0], result[1], tl);\n}\n//# sourceMappingURL=equalize-segments.js.map","import { getPathArea } from './get-path-area';\nexport function getDrawDirection(pathArray) {\n    return getPathArea(pathArray) >= 0;\n}\n//# sourceMappingURL=get-draw-direction.js.map","import { path2Curve } from '../convert/path-2-curve';\n/**\n * Returns the area of a single cubic-bezier segment.\n *\n * http://objectmix.com/graphics/133553-area-closed-bezier-curve.html\n */\nfunction getCubicSegArea(x1, y1, c1x, c1y, c2x, c2y, x2, y2) {\n    // https://stackoverflow.com/a/15845996\n    return ((3 *\n        ((y2 - y1) * (c1x + c2x) -\n            (x2 - x1) * (c1y + c2y) +\n            c1y * (x1 - c2x) -\n            c1x * (y1 - c2y) +\n            y2 * (c2x + x1 / 3) -\n            x2 * (c2y + y1 / 3))) /\n        20);\n}\n/**\n * Returns the area of a shape.\n * @author Jrg Lehni & Jonathan Puckey\n *\n * @see https://github.com/paperjs/paper.js/blob/develop/src/path/Path.js\n */\nexport function getPathArea(path) {\n    var x = 0;\n    var y = 0;\n    var len = 0;\n    return path2Curve(path)\n        .map(function (seg) {\n        var _a;\n        switch (seg[0]) {\n            case 'M':\n                x = seg[1], y = seg[2];\n                return 0;\n            default:\n                // @ts-ignore\n                var _b = seg.slice(1), c1x = _b[0], c1y = _b[1], c2x = _b[2], c2y = _b[3], x2 = _b[4], y2 = _b[5];\n                len = getCubicSegArea(x, y, c1x, c1y, c2x, c2y, x2, y2);\n                _a = seg.slice(-2), x = _a[0], y = _a[1];\n                return len;\n        }\n    })\n        .reduce(function (a, b) { return a + b; }, 0);\n}\n// export function getPathArea(pathArray: AbsoluteArray) {\n//   let x = 0;\n//   let y = 0;\n//   let mx = 0;\n//   let my = 0;\n//   let len = 0;\n//   return pathArray\n//     .map((seg) => {\n//       switch (seg[0]) {\n//         case 'M':\n//         case 'Z':\n//           mx = seg[0] === 'M' ? seg[1] : mx;\n//           my = seg[0] === 'M' ? seg[2] : my;\n//           x = mx;\n//           y = my;\n//           return 0;\n//         default:\n//           // @ts-ignore\n//           len = getCubicSegArea.apply(0, [x, y].concat(seg.slice(1)));\n//           [x, y] = seg.slice(-2) as [number, number];\n//           return len;\n//       }\n//     })\n//     .reduce((a, b) => a + b, 0);\n// }\n//# sourceMappingURL=get-path-area.js.map","import superPropBase from \"./superPropBase.js\";\nfunction _get() {\n  return _get = \"undefined\" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) {\n    var p = superPropBase(e, t);\n    if (p) {\n      var n = Object.getOwnPropertyDescriptor(p, t);\n      return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value;\n    }\n  }, _get.apply(null, arguments);\n}\nexport { _get as default };","import getPrototypeOf from \"./getPrototypeOf.js\";\nfunction _superPropBase(t, o) {\n  for (; !{}.hasOwnProperty.call(t, o) && null !== (t = getPrototypeOf(t)););\n  return t;\n}\nexport { _superPropBase as default };","import get from \"./get.js\";\nimport getPrototypeOf from \"./getPrototypeOf.js\";\nfunction _superPropGet(t, o, e, r) {\n  var p = get(getPrototypeOf(1 & r ? t.prototype : t), o, e);\n  return 2 & r && \"function\" == typeof p ? function (t) {\n    return p.apply(e, t);\n  } : p;\n}\nexport { _superPropGet as default };","/*!\n * @antv/g-lite\n * @description A core module for rendering engine implements DOM API.\n * @version 2.2.18\n * @date 4/14/2025, 2:53:27 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport EventEmitter from 'eventemitter3';\nimport { vec3, vec4, mat4, mat3, quat as quat$1, vec2 } from 'gl-matrix';\nimport '@babel/runtime/helpers/readOnlyError';\nimport { isNumber, distanceSquareRoot, isString, isNil, clamp, getTotalLength, min, max, isNumberEqual, mod, normalizePath, path2Curve, equalizeSegments, getDrawDirection, reverseCurve, clonePath, getRotatedCurve, isUndefined, isArray, isBoolean, isFunction, isObject, getPointAtLength } from '@antv/util';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _superPropGet from '@babel/runtime/helpers/superPropGet';\nimport { polylineLength, arcBox, cubicBox, quadBox, linePointAt, lineLength } from '@antv/g-math';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _createForOfIteratorHelper from '@babel/runtime/helpers/createForOfIteratorHelper';\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nvar rbush = {exports: {}};\n\n(function (module, exports) {\n(function (global, factory) {\nmodule.exports = factory() ;\n}(commonjsGlobal, function () {\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) { swap(arr, left, right); }\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) { i++; }\n            while (compare(arr[j], t) > 0) { j--; }\n        }\n\n        if (compare(arr[left], t) === 0) { swap(arr, left, j); }\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) { left = j + 1; }\n        if (k <= j) { right = j - 1; }\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nvar RBush = function RBush(maxEntries) {\n    if ( maxEntries === void 0 ) maxEntries = 9;\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n    this.clear();\n};\n\nRBush.prototype.all = function all () {\n    return this._all(this.data, []);\n};\n\nRBush.prototype.search = function search (bbox) {\n    var node = this.data;\n    var result = [];\n\n    if (!intersects(bbox, node)) { return result; }\n\n    var toBBox = this.toBBox;\n    var nodesToSearch = [];\n\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf) { result.push(child); }\n                else if (contains(bbox, childBBox)) { this._all(child, result); }\n                else { nodesToSearch.push(child); }\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return result;\n};\n\nRBush.prototype.collides = function collides (bbox) {\n    var node = this.data;\n\n    if (!intersects(bbox, node)) { return false; }\n\n    var nodesToSearch = [];\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? this.toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf || contains(bbox, childBBox)) { return true; }\n                nodesToSearch.push(child);\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return false;\n};\n\nRBush.prototype.load = function load (data) {\n    if (!(data && data.length)) { return this; }\n\n    if (data.length < this._minEntries) {\n        for (var i = 0; i < data.length; i++) {\n            this.insert(data[i]);\n        }\n        return this;\n    }\n\n    // recursively build the tree with the given data from scratch using OMT algorithm\n    var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n    if (!this.data.children.length) {\n        // save as is if tree is empty\n        this.data = node;\n\n    } else if (this.data.height === node.height) {\n        // split root if trees have the same height\n        this._splitRoot(this.data, node);\n\n    } else {\n        if (this.data.height < node.height) {\n            // swap trees if inserted one is bigger\n            var tmpNode = this.data;\n            this.data = node;\n            node = tmpNode;\n        }\n\n        // insert the small tree into the large tree at appropriate level\n        this._insert(node, this.data.height - node.height - 1, true);\n    }\n\n    return this;\n};\n\nRBush.prototype.insert = function insert (item) {\n    if (item) { this._insert(item, this.data.height - 1); }\n    return this;\n};\n\nRBush.prototype.clear = function clear () {\n    this.data = createNode([]);\n    return this;\n};\n\nRBush.prototype.remove = function remove (item, equalsFn) {\n    if (!item) { return this; }\n\n    var node = this.data;\n    var bbox = this.toBBox(item);\n    var path = [];\n    var indexes = [];\n    var i, parent, goingUp;\n\n    // depth-first iterative tree traversal\n    while (node || path.length) {\n\n        if (!node) { // go up\n            node = path.pop();\n            parent = path[path.length - 1];\n            i = indexes.pop();\n            goingUp = true;\n        }\n\n        if (node.leaf) { // check current node\n            var index = findItem(item, node.children, equalsFn);\n\n            if (index !== -1) {\n                // item found, remove the item and condense tree upwards\n                node.children.splice(index, 1);\n                path.push(node);\n                this._condense(path);\n                return this;\n            }\n        }\n\n        if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n            path.push(node);\n            indexes.push(i);\n            i = 0;\n            parent = node;\n            node = node.children[0];\n\n        } else if (parent) { // go right\n            i++;\n            node = parent.children[i];\n            goingUp = false;\n\n        } else { node = null; } // nothing found\n    }\n\n    return this;\n};\n\nRBush.prototype.toBBox = function toBBox (item) { return item; };\n\nRBush.prototype.compareMinX = function compareMinX (a, b) { return a.minX - b.minX; };\nRBush.prototype.compareMinY = function compareMinY (a, b) { return a.minY - b.minY; };\n\nRBush.prototype.toJSON = function toJSON () { return this.data; };\n\nRBush.prototype.fromJSON = function fromJSON (data) {\n    this.data = data;\n    return this;\n};\n\nRBush.prototype._all = function _all (node, result) {\n    var nodesToSearch = [];\n    while (node) {\n        if (node.leaf) { result.push.apply(result, node.children); }\n        else { nodesToSearch.push.apply(nodesToSearch, node.children); }\n\n        node = nodesToSearch.pop();\n    }\n    return result;\n};\n\nRBush.prototype._build = function _build (items, left, right, height) {\n\n    var N = right - left + 1;\n    var M = this._maxEntries;\n    var node;\n\n    if (N <= M) {\n        // reached leaf level; return leaf\n        node = createNode(items.slice(left, right + 1));\n        calcBBox(node, this.toBBox);\n        return node;\n    }\n\n    if (!height) {\n        // target height of the bulk-loaded tree\n        height = Math.ceil(Math.log(N) / Math.log(M));\n\n        // target number of root entries to maximize storage utilization\n        M = Math.ceil(N / Math.pow(M, height - 1));\n    }\n\n    node = createNode([]);\n    node.leaf = false;\n    node.height = height;\n\n    // split the items into M mostly square tiles\n\n    var N2 = Math.ceil(N / M);\n    var N1 = N2 * Math.ceil(Math.sqrt(M));\n\n    multiSelect(items, left, right, N1, this.compareMinX);\n\n    for (var i = left; i <= right; i += N1) {\n\n        var right2 = Math.min(i + N1 - 1, right);\n\n        multiSelect(items, i, right2, N2, this.compareMinY);\n\n        for (var j = i; j <= right2; j += N2) {\n\n            var right3 = Math.min(j + N2 - 1, right2);\n\n            // pack each entry recursively\n            node.children.push(this._build(items, j, right3, height - 1));\n        }\n    }\n\n    calcBBox(node, this.toBBox);\n\n    return node;\n};\n\nRBush.prototype._chooseSubtree = function _chooseSubtree (bbox, node, level, path) {\n    while (true) {\n        path.push(node);\n\n        if (node.leaf || path.length - 1 === level) { break; }\n\n        var minArea = Infinity;\n        var minEnlargement = Infinity;\n        var targetNode = (void 0);\n\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var area = bboxArea(child);\n            var enlargement = enlargedArea(bbox, child) - area;\n\n            // choose entry with the least area enlargement\n            if (enlargement < minEnlargement) {\n                minEnlargement = enlargement;\n                minArea = area < minArea ? area : minArea;\n                targetNode = child;\n\n            } else if (enlargement === minEnlargement) {\n                // otherwise choose one with the smallest area\n                if (area < minArea) {\n                    minArea = area;\n                    targetNode = child;\n                }\n            }\n        }\n\n        node = targetNode || node.children[0];\n    }\n\n    return node;\n};\n\nRBush.prototype._insert = function _insert (item, level, isNode) {\n    var bbox = isNode ? item : this.toBBox(item);\n    var insertPath = [];\n\n    // find the best node for accommodating the item, saving all nodes along the path too\n    var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n    // put the item into the node\n    node.children.push(item);\n    extend(node, bbox);\n\n    // split on node overflow; propagate upwards if necessary\n    while (level >= 0) {\n        if (insertPath[level].children.length > this._maxEntries) {\n            this._split(insertPath, level);\n            level--;\n        } else { break; }\n    }\n\n    // adjust bboxes along the insertion path\n    this._adjustParentBBoxes(bbox, insertPath, level);\n};\n\n// split overflowed node into two\nRBush.prototype._split = function _split (insertPath, level) {\n    var node = insertPath[level];\n    var M = node.children.length;\n    var m = this._minEntries;\n\n    this._chooseSplitAxis(node, m, M);\n\n    var splitIndex = this._chooseSplitIndex(node, m, M);\n\n    var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n    newNode.height = node.height;\n    newNode.leaf = node.leaf;\n\n    calcBBox(node, this.toBBox);\n    calcBBox(newNode, this.toBBox);\n\n    if (level) { insertPath[level - 1].children.push(newNode); }\n    else { this._splitRoot(node, newNode); }\n};\n\nRBush.prototype._splitRoot = function _splitRoot (node, newNode) {\n    // split root node\n    this.data = createNode([node, newNode]);\n    this.data.height = node.height + 1;\n    this.data.leaf = false;\n    calcBBox(this.data, this.toBBox);\n};\n\nRBush.prototype._chooseSplitIndex = function _chooseSplitIndex (node, m, M) {\n    var index;\n    var minOverlap = Infinity;\n    var minArea = Infinity;\n\n    for (var i = m; i <= M - m; i++) {\n        var bbox1 = distBBox(node, 0, i, this.toBBox);\n        var bbox2 = distBBox(node, i, M, this.toBBox);\n\n        var overlap = intersectionArea(bbox1, bbox2);\n        var area = bboxArea(bbox1) + bboxArea(bbox2);\n\n        // choose distribution with minimum overlap\n        if (overlap < minOverlap) {\n            minOverlap = overlap;\n            index = i;\n\n            minArea = area < minArea ? area : minArea;\n\n        } else if (overlap === minOverlap) {\n            // otherwise choose distribution with minimum area\n            if (area < minArea) {\n                minArea = area;\n                index = i;\n            }\n        }\n    }\n\n    return index || M - m;\n};\n\n// sorts node children by the best axis for split\nRBush.prototype._chooseSplitAxis = function _chooseSplitAxis (node, m, M) {\n    var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n    var compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n    var xMargin = this._allDistMargin(node, m, M, compareMinX);\n    var yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n    // if total distributions margin value is minimal for x, sort by minX,\n    // otherwise it's already sorted by minY\n    if (xMargin < yMargin) { node.children.sort(compareMinX); }\n};\n\n// total margin of all possible split distributions where each node is at least m full\nRBush.prototype._allDistMargin = function _allDistMargin (node, m, M, compare) {\n    node.children.sort(compare);\n\n    var toBBox = this.toBBox;\n    var leftBBox = distBBox(node, 0, m, toBBox);\n    var rightBBox = distBBox(node, M - m, M, toBBox);\n    var margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n    for (var i = m; i < M - m; i++) {\n        var child = node.children[i];\n        extend(leftBBox, node.leaf ? toBBox(child) : child);\n        margin += bboxMargin(leftBBox);\n    }\n\n    for (var i$1 = M - m - 1; i$1 >= m; i$1--) {\n        var child$1 = node.children[i$1];\n        extend(rightBBox, node.leaf ? toBBox(child$1) : child$1);\n        margin += bboxMargin(rightBBox);\n    }\n\n    return margin;\n};\n\nRBush.prototype._adjustParentBBoxes = function _adjustParentBBoxes (bbox, path, level) {\n    // adjust bboxes along the given tree path\n    for (var i = level; i >= 0; i--) {\n        extend(path[i], bbox);\n    }\n};\n\nRBush.prototype._condense = function _condense (path) {\n    // go through the path, removing empty nodes and updating bboxes\n    for (var i = path.length - 1, siblings = (void 0); i >= 0; i--) {\n        if (path[i].children.length === 0) {\n            if (i > 0) {\n                siblings = path[i - 1].children;\n                siblings.splice(siblings.indexOf(path[i]), 1);\n\n            } else { this.clear(); }\n\n        } else { calcBBox(path[i], this.toBBox); }\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) { return items.indexOf(item); }\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) { return i; }\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) { destNode = createNode(null); }\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k; i < p; i++) {\n        var child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX);\n    var minY = Math.max(a.minY, b.minY);\n    var maxX = Math.min(a.maxX, b.maxX);\n    var maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right];\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) { continue; }\n\n        var mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n\nreturn RBush;\n\n}));\n}(rbush));\n\nvar RBush = rbush.exports;\n\nvar Shape = /*#__PURE__*/function (Shape) {\n  Shape[\"GROUP\"] = \"g\";\n  Shape[\"FRAGMENT\"] = \"fragment\";\n  Shape[\"CIRCLE\"] = \"circle\";\n  Shape[\"ELLIPSE\"] = \"ellipse\";\n  Shape[\"IMAGE\"] = \"image\";\n  Shape[\"RECT\"] = \"rect\";\n  Shape[\"LINE\"] = \"line\";\n  Shape[\"POLYLINE\"] = \"polyline\";\n  Shape[\"POLYGON\"] = \"polygon\";\n  Shape[\"TEXT\"] = \"text\";\n  Shape[\"PATH\"] = \"path\";\n  Shape[\"HTML\"] = \"html\";\n  Shape[\"MESH\"] = \"mesh\";\n  return Shape;\n}({});\n\n// prettier-ignore\n\n// prettier-ignore\n\n// Cursor style\n// See: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor\n\nvar ClipSpaceNearZ = /*#__PURE__*/function (ClipSpaceNearZ) {\n  ClipSpaceNearZ[ClipSpaceNearZ[\"ZERO\"] = 0] = \"ZERO\";\n  ClipSpaceNearZ[ClipSpaceNearZ[\"NEGATIVE_ONE\"] = 1] = \"NEGATIVE_ONE\";\n  return ClipSpaceNearZ;\n}({});\n\n/**\n * eg. NodeCanvas, OffscreenCanvas, HTMLCanvasElement\n */\n\n/**\n * The format to use when defining custom easing functions\n */\n\n// @see https://github.com/zhanba/pailye/blob/master/packages/flex/src/types.ts\n\nvar AbstractRendererPlugin = /*#__PURE__*/function () {\n  function AbstractRendererPlugin() {\n    _classCallCheck(this, AbstractRendererPlugin);\n    this.plugins = [];\n  }\n  return _createClass(AbstractRendererPlugin, [{\n    key: \"addRenderingPlugin\",\n    value: function addRenderingPlugin(plugin) {\n      this.plugins.push(plugin);\n      this.context.renderingPlugins.push(plugin);\n    }\n  }, {\n    key: \"removeAllRenderingPlugins\",\n    value: function removeAllRenderingPlugins() {\n      var _this = this;\n      this.plugins.forEach(function (plugin) {\n        var index = _this.context.renderingPlugins.indexOf(plugin);\n        if (index >= 0) {\n          _this.context.renderingPlugins.splice(index, 1);\n        }\n      });\n    }\n  }]);\n}();\nvar AbstractRenderer = /*#__PURE__*/function () {\n  function AbstractRenderer(config) {\n    _classCallCheck(this, AbstractRenderer);\n    this.clipSpaceNearZ = ClipSpaceNearZ.NEGATIVE_ONE;\n    this.plugins = [];\n    this.config = _objectSpread({\n      /**\n       * only dirty object will cause re-render\n       */\n      enableDirtyCheck: true,\n      enableCulling: false,\n      /**\n       * enable auto rendering by default\n       */\n      enableAutoRendering: true,\n      /**\n       * enable dirty rectangle rendering by default\n       */\n      enableDirtyRectangleRendering: true,\n      enableDirtyRectangleRenderingDebug: false,\n      enableSizeAttenuation: true,\n      enableRenderingOptimization: false\n    }, config);\n  }\n  return _createClass(AbstractRenderer, [{\n    key: \"registerPlugin\",\n    value: function registerPlugin(plugin) {\n      var index = this.plugins.findIndex(function (p) {\n        return p === plugin;\n      });\n      if (index === -1) {\n        this.plugins.push(plugin);\n      }\n    }\n  }, {\n    key: \"unregisterPlugin\",\n    value: function unregisterPlugin(plugin) {\n      var index = this.plugins.findIndex(function (p) {\n        return p === plugin;\n      });\n      if (index > -1) {\n        this.plugins.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getPlugins\",\n    value: function getPlugins() {\n      return this.plugins;\n    }\n  }, {\n    key: \"getPlugin\",\n    value: function getPlugin(name) {\n      return this.plugins.find(function (plugin) {\n        return plugin.name === name;\n      });\n    }\n  }, {\n    key: \"getConfig\",\n    value: function getConfig() {\n      return this.config;\n    }\n  }, {\n    key: \"setConfig\",\n    value: function setConfig(config) {\n      Object.assign(this.config, config);\n    }\n  }]);\n}();\n\nvar addVec3 = vec3.add,\n  copyVec3 = vec3.copy,\n  maxVec3 = vec3.max,\n  minVec3 = vec3.min,\n  scaleVec3 = vec3.scale,\n  subVec3 = vec3.sub;\n\n/**\n * Axis-Aligned Bounding Box\n *  Frustum Culling p-vertex  n-vertex\n * @see https://github.com/antvis/GWebGPUEngine/issues/3\n */\nvar AABB = /*#__PURE__*/function () {\n  function AABB() {\n    _classCallCheck(this, AABB);\n    this.center = [0, 0, 0];\n    this.halfExtents = [0, 0, 0];\n    this.min = [0, 0, 0];\n    this.max = [0, 0, 0];\n  }\n  return _createClass(AABB, [{\n    key: \"update\",\n    value: function update(center, halfExtents) {\n      copyVec3(this.center, center);\n      copyVec3(this.halfExtents, halfExtents);\n      subVec3(this.min, this.center, this.halfExtents);\n      addVec3(this.max, this.center, this.halfExtents);\n    }\n  }, {\n    key: \"setMinMax\",\n    value: function setMinMax(min, max) {\n      addVec3(this.center, max, min);\n      scaleVec3(this.center, this.center, 0.5);\n      subVec3(this.halfExtents, max, min);\n      scaleVec3(this.halfExtents, this.halfExtents, 0.5);\n      copyVec3(this.min, min);\n      copyVec3(this.max, max);\n    }\n  }, {\n    key: \"getMin\",\n    value: function getMin() {\n      return this.min;\n    }\n  }, {\n    key: \"getMax\",\n    value: function getMax() {\n      return this.max;\n    }\n  }, {\n    key: \"add\",\n    value: function add(aabb) {\n      if (AABB.isEmpty(aabb)) {\n        return;\n      }\n      if (AABB.isEmpty(this)) {\n        this.setMinMax(aabb.getMin(), aabb.getMax());\n        return;\n      }\n      var tc = this.center;\n      var tcx = tc[0];\n      var tcy = tc[1];\n      var tcz = tc[2];\n      var th = this.halfExtents;\n      var thx = th[0];\n      var thy = th[1];\n      var thz = th[2];\n      var tminx = tcx - thx;\n      var tmaxx = tcx + thx;\n      var tminy = tcy - thy;\n      var tmaxy = tcy + thy;\n      var tminz = tcz - thz;\n      var tmaxz = tcz + thz;\n      var oc = aabb.center;\n      var ocx = oc[0];\n      var ocy = oc[1];\n      var ocz = oc[2];\n      var oh = aabb.halfExtents;\n      var ohx = oh[0];\n      var ohy = oh[1];\n      var ohz = oh[2];\n      var ominx = ocx - ohx;\n      var omaxx = ocx + ohx;\n      var ominy = ocy - ohy;\n      var omaxy = ocy + ohy;\n      var ominz = ocz - ohz;\n      var omaxz = ocz + ohz;\n      if (ominx < tminx) {\n        tminx = ominx;\n      }\n      if (omaxx > tmaxx) {\n        tmaxx = omaxx;\n      }\n      if (ominy < tminy) {\n        tminy = ominy;\n      }\n      if (omaxy > tmaxy) {\n        tmaxy = omaxy;\n      }\n      if (ominz < tminz) {\n        tminz = ominz;\n      }\n      if (omaxz > tmaxz) {\n        tmaxz = omaxz;\n      }\n      tc[0] = (tminx + tmaxx) * 0.5;\n      tc[1] = (tminy + tmaxy) * 0.5;\n      tc[2] = (tminz + tmaxz) * 0.5;\n      th[0] = (tmaxx - tminx) * 0.5;\n      th[1] = (tmaxy - tminy) * 0.5;\n      th[2] = (tmaxz - tminz) * 0.5;\n      this.min[0] = tminx;\n      this.min[1] = tminy;\n      this.min[2] = tminz;\n      this.max[0] = tmaxx;\n      this.max[1] = tmaxy;\n      this.max[2] = tmaxz;\n    }\n  }, {\n    key: \"setFromTransformedAABB\",\n    value: function setFromTransformedAABB(aabb, m) {\n      var bc = this.center;\n      var br = this.halfExtents;\n      var ac = aabb.center;\n      var ar = aabb.halfExtents;\n      var mx0 = m[0];\n      var mx1 = m[4];\n      var mx2 = m[8];\n      var my0 = m[1];\n      var my1 = m[5];\n      var my2 = m[9];\n      var mz0 = m[2];\n      var mz1 = m[6];\n      var mz2 = m[10];\n      var mx0a = Math.abs(mx0);\n      var mx1a = Math.abs(mx1);\n      var mx2a = Math.abs(mx2);\n      var my0a = Math.abs(my0);\n      var my1a = Math.abs(my1);\n      var my2a = Math.abs(my2);\n      var mz0a = Math.abs(mz0);\n      var mz1a = Math.abs(mz1);\n      var mz2a = Math.abs(mz2);\n      bc[0] = m[12] + mx0 * ac[0] + mx1 * ac[1] + mx2 * ac[2];\n      bc[1] = m[13] + my0 * ac[0] + my1 * ac[1] + my2 * ac[2];\n      bc[2] = m[14] + mz0 * ac[0] + mz1 * ac[1] + mz2 * ac[2];\n\n      // vec3.set(\n      //   bc,\n      //   m[12] + mx0 * ac[0] + mx1 * ac[1] + mx2 * ac[2],\n      //   m[13] + my0 * ac[0] + my1 * ac[1] + my2 * ac[2],\n      //   m[14] + mz0 * ac[0] + mz1 * ac[1] + mz2 * ac[2],\n      // );\n\n      br[0] = mx0a * ar[0] + mx1a * ar[1] + mx2a * ar[2];\n      br[1] = my0a * ar[0] + my1a * ar[1] + my2a * ar[2];\n      br[2] = mz0a * ar[0] + mz1a * ar[1] + mz2a * ar[2];\n\n      // vec3.set(\n      //   br,\n      //   mx0a * ar[0] + mx1a * ar[1] + mx2a * ar[2],\n      //   my0a * ar[0] + my1a * ar[1] + my2a * ar[2],\n      //   mz0a * ar[0] + mz1a * ar[1] + mz2a * ar[2],\n      // );\n\n      // this.min = vec3.sub(this.min, bc, br);\n      // this.max = vec3.add(this.max, bc, br);\n\n      subVec3(this.min, bc, br);\n      addVec3(this.max, bc, br);\n    }\n  }, {\n    key: \"intersects\",\n    value: function intersects(aabb) {\n      var aMax = this.getMax();\n      var aMin = this.getMin();\n      var bMax = aabb.getMax();\n      var bMin = aabb.getMin();\n      return aMin[0] <= bMax[0] && aMax[0] >= bMin[0] && aMin[1] <= bMax[1] && aMax[1] >= bMin[1] && aMin[2] <= bMax[2] && aMax[2] >= bMin[2];\n    }\n  }, {\n    key: \"intersection\",\n    value: function intersection(aabb) {\n      if (!this.intersects(aabb)) {\n        return null;\n      }\n      var intersection = new AABB();\n      var min = maxVec3([0, 0, 0], this.getMin(), aabb.getMin());\n      var max = minVec3([0, 0, 0], this.getMax(), aabb.getMax());\n      intersection.setMinMax(min, max);\n      return intersection;\n    }\n\n    /**\n     * get n-vertex\n     * @param plane plane of CullingVolume\n     */\n  }, {\n    key: \"getNegativeFarPoint\",\n    value: function getNegativeFarPoint(plane) {\n      if (plane.pnVertexFlag === 0x111) {\n        return copyVec3([0, 0, 0], this.min);\n        // return vec3.copy(vec3.create(), this.min);\n      }\n      if (plane.pnVertexFlag === 0x110) {\n        return [this.min[0], this.min[1], this.max[2]];\n        // return vec3.fromValues(this.min[0], this.min[1], this.max[2]);\n      }\n      if (plane.pnVertexFlag === 0x101) {\n        return [this.min[0], this.max[1], this.min[2]];\n        // return vec3.fromValues(this.min[0], this.max[1], this.min[2]);\n      }\n      if (plane.pnVertexFlag === 0x100) {\n        return [this.min[0], this.max[1], this.max[2]];\n        // return vec3.fromValues(this.min[0], this.max[1], this.max[2]);\n      }\n      if (plane.pnVertexFlag === 0x011) {\n        return [this.max[0], this.min[1], this.min[2]];\n        // return vec3.fromValues(this.max[0], this.min[1], this.min[2]);\n      }\n      if (plane.pnVertexFlag === 0x010) {\n        return [this.max[0], this.min[1], this.max[2]];\n        // return vec3.fromValues(this.max[0], this.min[1], this.max[2]);\n      }\n      if (plane.pnVertexFlag === 0x001) {\n        return [this.max[0], this.max[1], this.min[2]];\n        // return vec3.fromValues(this.max[0], this.max[1], this.min[2]);\n      }\n      return [this.max[0], this.max[1], this.max[2]];\n      // return vec3.fromValues(this.max[0], this.max[1], this.max[2]);\n    }\n\n    /**\n     * get p-vertex\n     * @param plane plane of CullingVolume\n     */\n  }, {\n    key: \"getPositiveFarPoint\",\n    value: function getPositiveFarPoint(plane) {\n      if (plane.pnVertexFlag === 0x111) {\n        return copyVec3([0, 0, 0], this.max);\n        // return vec3.copy(vec3.create(), this.max);\n      }\n      if (plane.pnVertexFlag === 0x110) {\n        return [this.max[0], this.max[1], this.min[2]];\n        // return vec3.fromValues(this.max[0], this.max[1], this.min[2]);\n      }\n      if (plane.pnVertexFlag === 0x101) {\n        return [this.max[0], this.min[1], this.max[2]];\n        // return vec3.fromValues(this.max[0], this.min[1], this.max[2]);\n      }\n      if (plane.pnVertexFlag === 0x100) {\n        return [this.max[0], this.min[1], this.min[2]];\n        // return vec3.fromValues(this.max[0], this.min[1], this.min[2]);\n      }\n      if (plane.pnVertexFlag === 0x011) {\n        return [this.min[0], this.max[1], this.max[2]];\n        // return vec3.fromValues(this.min[0], this.max[1], this.max[2]);\n      }\n      if (plane.pnVertexFlag === 0x010) {\n        return [this.min[0], this.max[1], this.min[2]];\n        // return vec3.fromValues(this.min[0], this.max[1], this.min[2]);\n      }\n      if (plane.pnVertexFlag === 0x001) {\n        return [this.min[0], this.min[1], this.max[2]];\n        // return vec3.fromValues(this.min[0], this.min[1], this.max[2]);\n      }\n      return [this.min[0], this.min[1], this.min[2]];\n      // return vec3.fromValues(this.min[0], this.min[1], this.min[2]);\n    }\n  }], [{\n    key: \"isEmpty\",\n    value: function isEmpty(aabb) {\n      return !aabb || aabb.halfExtents[0] === 0 && aabb.halfExtents[1] === 0 && aabb.halfExtents[2] === 0;\n    }\n  }]);\n}();\n\nvar Plane = /*#__PURE__*/function () {\n  /**\n   * lookup table for p-vertex & n-vertex when doing frustum culling\n   */\n\n  function Plane(distance, normal) {\n    _classCallCheck(this, Plane);\n    this.distance = distance || 0;\n    this.normal = normal || vec3.fromValues(0, 1, 0);\n    this.updatePNVertexFlag();\n  }\n  return _createClass(Plane, [{\n    key: \"updatePNVertexFlag\",\n    value: function updatePNVertexFlag() {\n      this.pnVertexFlag = (Number(this.normal[0] >= 0) << 8) + (Number(this.normal[1] >= 0) << 4) + Number(this.normal[2] >= 0);\n    }\n  }, {\n    key: \"distanceToPoint\",\n    value: function distanceToPoint(point) {\n      return vec3.dot(point, this.normal) - this.distance;\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var invLen = 1 / vec3.len(this.normal);\n      vec3.scale(this.normal, this.normal, invLen);\n      this.distance *= invLen;\n    }\n  }, {\n    key: \"intersectsLine\",\n    value: function intersectsLine(start, end, point) {\n      var d0 = this.distanceToPoint(start);\n      var d1 = this.distanceToPoint(end);\n      var t = d0 / (d0 - d1);\n      var intersects = t >= 0 && t <= 1;\n      if (intersects && point) {\n        vec3.lerp(point, start, end, t);\n      }\n      return intersects;\n    }\n  }]);\n}();\n\nvar Mask = /*#__PURE__*/function (Mask) {\n  Mask[Mask[\"OUTSIDE\"] = 4294967295] = \"OUTSIDE\";\n  Mask[Mask[\"INSIDE\"] = 0] = \"INSIDE\";\n  Mask[Mask[\"INDETERMINATE\"] = 2147483647] = \"INDETERMINATE\";\n  return Mask;\n}({});\nvar Frustum = /*#__PURE__*/function () {\n  function Frustum(planes) {\n    _classCallCheck(this, Frustum);\n    this.planes = [];\n    if (planes) {\n      this.planes = planes;\n    } else {\n      for (var i = 0; i < 6; i++) {\n        this.planes.push(new Plane());\n      }\n    }\n  }\n\n  /**\n   * extract 6 planes from projectionMatrix\n   * @see http://www8.cs.umu.se/kurser/5DV051/HT12/lab/plane_extraction.pdf\n   */\n  return _createClass(Frustum, [{\n    key: \"extractFromVPMatrix\",\n    value: function extractFromVPMatrix(projectionMatrix) {\n      // @ts-ignore\n      var _projectionMatrix = _slicedToArray(projectionMatrix, 16),\n        m0 = _projectionMatrix[0],\n        m1 = _projectionMatrix[1],\n        m2 = _projectionMatrix[2],\n        m3 = _projectionMatrix[3],\n        m4 = _projectionMatrix[4],\n        m5 = _projectionMatrix[5],\n        m6 = _projectionMatrix[6],\n        m7 = _projectionMatrix[7],\n        m8 = _projectionMatrix[8],\n        m9 = _projectionMatrix[9],\n        m10 = _projectionMatrix[10],\n        m11 = _projectionMatrix[11],\n        m12 = _projectionMatrix[12],\n        m13 = _projectionMatrix[13],\n        m14 = _projectionMatrix[14],\n        m15 = _projectionMatrix[15];\n\n      // right\n      vec3.set(this.planes[0].normal, m3 - m0, m7 - m4, m11 - m8);\n      this.planes[0].distance = m15 - m12;\n\n      // left\n      vec3.set(this.planes[1].normal, m3 + m0, m7 + m4, m11 + m8);\n      this.planes[1].distance = m15 + m12;\n\n      // bottom\n      vec3.set(this.planes[2].normal, m3 + m1, m7 + m5, m11 + m9);\n      this.planes[2].distance = m15 + m13;\n\n      // top\n      vec3.set(this.planes[3].normal, m3 - m1, m7 - m5, m11 - m9);\n      this.planes[3].distance = m15 - m13;\n\n      // far\n      vec3.set(this.planes[4].normal, m3 - m2, m7 - m6, m11 - m10);\n      this.planes[4].distance = m15 - m14;\n\n      // near\n      vec3.set(this.planes[5].normal, m3 + m2, m7 + m6, m11 + m10);\n      this.planes[5].distance = m15 + m14;\n      this.planes.forEach(function (plane) {\n        plane.normalize();\n        plane.updatePNVertexFlag();\n      });\n    }\n  }]);\n}();\n\nvar Point = /*#__PURE__*/function () {\n  function Point() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    _classCallCheck(this, Point);\n    this.x = 0;\n    this.y = 0;\n    this.x = x;\n    this.y = y;\n  }\n  return _createClass(Point, [{\n    key: \"clone\",\n    value: function clone() {\n      return new Point(this.x, this.y);\n    }\n  }, {\n    key: \"copyFrom\",\n    value: function copyFrom(p) {\n      this.x = p.x;\n      this.y = p.y;\n    }\n  }]);\n}();\n\nvar Rectangle = /*#__PURE__*/function () {\n  function Rectangle(x, y, width, height) {\n    _classCallCheck(this, Rectangle);\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.left = x;\n    this.right = x + width;\n    this.top = y;\n    this.bottom = y + height;\n  }\n  return _createClass(Rectangle, [{\n    key: \"toJSON\",\n    value: function toJSON() {}\n  }], [{\n    key: \"fromRect\",\n    value:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMRect/fromRect_static\n     */\n    function fromRect(rect) {\n      return new Rectangle(rect.x, rect.y, rect.width, rect.height);\n    }\n\n    /**\n     * will return a new rect instance\n     */\n  }, {\n    key: \"applyTransform\",\n    value: function applyTransform(rect, matrix) {\n      var topLeft = vec4.fromValues(rect.x, rect.y, 0, 1);\n      var topRight = vec4.fromValues(rect.x + rect.width, rect.y, 0, 1);\n      var bottomLeft = vec4.fromValues(rect.x, rect.y + rect.height, 0, 1);\n      var bottomRight = vec4.fromValues(rect.x + rect.width, rect.y + rect.height, 0, 1);\n      var transformedTopLeft = vec4.create();\n      var transformedTopRight = vec4.create();\n      var transformedBottomLeft = vec4.create();\n      var transformedBottomRight = vec4.create();\n      vec4.transformMat4(transformedTopLeft, topLeft, matrix);\n      vec4.transformMat4(transformedTopRight, topRight, matrix);\n      vec4.transformMat4(transformedBottomLeft, bottomLeft, matrix);\n      vec4.transformMat4(transformedBottomRight, bottomRight, matrix);\n      var minX = Math.min(transformedTopLeft[0], transformedTopRight[0], transformedBottomLeft[0], transformedBottomRight[0]);\n      var minY = Math.min(transformedTopLeft[1], transformedTopRight[1], transformedBottomLeft[1], transformedBottomRight[1]);\n      var maxX = Math.max(transformedTopLeft[0], transformedTopRight[0], transformedBottomLeft[0], transformedBottomRight[0]);\n      var maxY = Math.max(transformedTopLeft[1], transformedTopRight[1], transformedBottomLeft[1], transformedBottomRight[1]);\n      return Rectangle.fromRect({\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY\n      });\n    }\n  }]);\n}();\n\nvar ERROR_MSG_METHOD_NOT_IMPLEMENTED = 'Method not implemented.';\nvar ERROR_MSG_USE_DOCUMENT_ELEMENT = 'Use document.documentElement instead.';\nvar ERROR_MSG_APPEND_DESTROYED_ELEMENT = 'Cannot append a destroyed element.';\n\nfunction getAngle(angle) {\n  if (angle === undefined) {\n    return 0;\n  }\n  if (angle > 360 || angle < -360) {\n    return angle % 360;\n  }\n  return angle;\n}\nvar $vec3$2 = vec3.create();\nfunction createVec3(x) {\n  var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var clone = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  if (Array.isArray(x) && x.length === 3) {\n    return clone ? vec3.clone(x) : vec3.copy($vec3$2, x);\n  }\n  if (isNumber(x)) {\n    return clone ? vec3.fromValues(x, y, z) : vec3.set($vec3$2, x, y, z);\n  }\n  return clone ? vec3.fromValues(x[0], x[1] || y, x[2] || z) : vec3.set($vec3$2, x[0], x[1] || y, x[2] || z);\n}\nvar DEG_RAD = Math.PI / 180;\nfunction deg2rad(deg) {\n  return deg * DEG_RAD;\n}\nvar RAD_DEG = 180 / Math.PI;\nfunction rad2deg(rad) {\n  return rad * RAD_DEG;\n}\nvar GRAD_DEG = 0.9; // 360 / 400;\nfunction grad2deg(grads) {\n  grads %= 400;\n  if (grads < 0) {\n    grads += 400;\n  }\n  return grads * GRAD_DEG;\n}\nfunction deg2turn(deg) {\n  return deg / 360;\n}\nfunction turn2deg(turn) {\n  return 360 * turn;\n}\nvar HALF_PI = Math.PI / 2;\nfunction getEulerFromQuat(out, quat) {\n  var x = quat[0];\n  var y = quat[1];\n  var z = quat[2];\n  var w = quat[3];\n  var x2 = x * x;\n  var y2 = y * y;\n  var z2 = z * z;\n  var w2 = w * w;\n  var unit = x2 + y2 + z2 + w2;\n  var test = x * w - y * z;\n  if (test > 0.499995 * unit) {\n    // TODO: Use glmatrix.EPSILON\n    // singularity at the north pole\n    out[0] = HALF_PI;\n    out[1] = 2 * Math.atan2(y, x);\n    out[2] = 0;\n  } else if (test < -0.499995 * unit) {\n    // TODO: Use glmatrix.EPSILON\n    // singularity at the south pole\n    out[0] = -HALF_PI;\n    out[1] = 2 * Math.atan2(y, x);\n    out[2] = 0;\n  } else {\n    out[0] = Math.asin(2 * (x * z - w * y));\n    out[1] = Math.atan2(2 * (x * w + y * z), 1 - 2 * (z2 + w2));\n    out[2] = Math.atan2(2 * (x * y + z * w), 1 - 2 * (y2 + z2));\n  }\n  // TODO: Return them as degrees and not as radians\n  return out;\n}\nfunction getEulerFromMat4(out, m) {\n  var x;\n  var z;\n  var _mat4$getScaling = mat4.getScaling(vec3.create(), m),\n    _mat4$getScaling2 = _slicedToArray(_mat4$getScaling, 3),\n    sx = _mat4$getScaling2[0],\n    sy = _mat4$getScaling2[1],\n    sz = _mat4$getScaling2[2];\n  var y = Math.asin(-m[2] / sx);\n  if (y < HALF_PI) {\n    if (y > -HALF_PI) {\n      x = Math.atan2(m[6] / sy, m[10] / sz);\n      z = Math.atan2(m[1] / sx, m[0] / sx);\n    } else {\n      // Not a unique solution\n      z = 0;\n      x = -Math.atan2(m[4] / sy, m[5] / sy);\n    }\n  } else {\n    // Not a unique solution\n    z = 0;\n    x = Math.atan2(m[4] / sy, m[5] / sy);\n  }\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * @see https://github.com/toji/gl-matrix/issues/329\n * @see https://doc.babylonjs.com/divingDeeper/mesh/transforms/center_origin/rotation_conventions\n */\nfunction getEuler(out, quat) {\n  if (quat.length === 16) {\n    return getEulerFromMat4(out, quat);\n  }\n  return getEulerFromQuat(out, quat);\n}\nfunction fromRotationTranslationScale(rotation, x, y, scaleX, scaleY) {\n  var cos = Math.cos(rotation);\n  var sin = Math.sin(rotation);\n  return mat3.fromValues(scaleX * cos, scaleY * sin, 0, -scaleX * sin, scaleY * cos, 0, x, y, 1);\n}\nfunction makePerspective(out, left, right, top, bottom, near, far) {\n  var zero = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : false;\n  var twoNear = 2 * near;\n  var rightMinusLeft = right - left;\n  var topMinusBottom = top - bottom;\n  var x = twoNear / rightMinusLeft;\n  var y = twoNear / topMinusBottom;\n  var a = (right + left) / rightMinusLeft;\n  var b = (top + bottom) / topMinusBottom;\n  var c;\n  var d;\n  var farMinusNear = far - near;\n  var farMulNear = far * near;\n  if (zero) {\n    c = -far / farMinusNear;\n    d = -farMulNear / farMinusNear;\n  } else {\n    c = -(far + near) / farMinusNear;\n    d = -2 * farMulNear / farMinusNear;\n  }\n  out[0] = x;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = y;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = a;\n  out[9] = b;\n  out[10] = c;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = d;\n  out[15] = 0;\n  return out;\n}\nfunction decompose(mat) {\n  var row0x = mat[0];\n  var row0y = mat[1];\n  var row1x = mat[3];\n  var row1y = mat[4];\n  // decompose 3x3 matrix\n  // @see https://www.w3.org/TR/css-transforms-1/#decomposing-a-2d-matrix\n  var scalingX = Math.sqrt(row0x * row0x + row0y * row0y);\n  var scalingY = Math.sqrt(row1x * row1x + row1y * row1y);\n\n  // If determinant is negative, one axis was flipped.\n  var determinant = row0x * row1y - row0y * row1x;\n  if (determinant < 0) {\n    // Flip axis with minimum unit vector dot product.\n    if (row0x < row1y) {\n      scalingX = -scalingX;\n    } else {\n      scalingY = -scalingY;\n    }\n  }\n\n  // Renormalize matrix to remove scale.\n  if (scalingX) {\n    var invScalingX = 1 / scalingX;\n    row0x *= invScalingX;\n    row0y *= invScalingX;\n  }\n  if (scalingY) {\n    var invScalingY = 1 / scalingY;\n    row1x *= invScalingY;\n    row1y *= invScalingY;\n  }\n\n  // Compute rotation and renormalize matrix.\n  var rotation = Math.atan2(row0y, row0x);\n  var angle = rad2deg(rotation);\n  return [mat[6], mat[7], scalingX, scalingY, angle];\n}\nvar tmp = mat4.create();\nvar perspectiveMatrix = mat4.create();\nvar tmpVec4 = vec4.create();\nvar row = [vec3.create(), vec3.create(), vec3.create()];\nvar pdum3 = vec3.create();\n\n/*\nInput:  matrix      ; a 4x4 matrix\nOutput: translation ; a 3 component vector\n        scale       ; a 3 component vector\n        skew        ; skew factors XY,XZ,YZ represented as a 3 component vector\n        perspective ; a 4 component vector\n        quaternion  ; a 4 component vector\nReturns false if the matrix cannot be decomposed, true if it can\n\n\nReferences:\nhttps://github.com/kamicane/matrix3d/blob/master/lib/Matrix3d.js\nhttps://github.com/ChromiumWebApps/chromium/blob/master/ui/gfx/transform_util.cc\nhttp://www.w3.org/TR/css3-transforms/#decomposing-a-3d-matrix\n*/\nfunction decomposeMat4(matrix, translation, scale, skew, perspective, quaternion) {\n  // normalize, if not possible then bail out early\n  if (!normalize(tmp, matrix)) return false;\n\n  // perspectiveMatrix is used to solve for perspective, but it also provides\n  // an easy way to test for singularity of the upper 3x3 component.\n  mat4.copy(perspectiveMatrix, tmp);\n  perspectiveMatrix[3] = 0;\n  perspectiveMatrix[7] = 0;\n  perspectiveMatrix[11] = 0;\n  perspectiveMatrix[15] = 1;\n\n  // If the perspectiveMatrix is not invertible, we are also unable to\n  // decompose, so we'll bail early. Constant taken from SkMatrix44::invert.\n  if (Math.abs(mat4.determinant(perspectiveMatrix)) < 1e-8) return false;\n  var a03 = tmp[3];\n  var a13 = tmp[7];\n  var a23 = tmp[11];\n  var a30 = tmp[12];\n  var a31 = tmp[13];\n  var a32 = tmp[14];\n  var a33 = tmp[15];\n\n  // First, isolate perspective.\n  if (a03 !== 0 || a13 !== 0 || a23 !== 0) {\n    tmpVec4[0] = a03;\n    tmpVec4[1] = a13;\n    tmpVec4[2] = a23;\n    tmpVec4[3] = a33;\n\n    // Solve the equation by inverting perspectiveMatrix and multiplying\n    // rightHandSide by the inverse.\n    // resuing the perspectiveMatrix here since it's no longer needed\n    var ret = mat4.invert(perspectiveMatrix, perspectiveMatrix);\n    if (!ret) return false;\n    mat4.transpose(perspectiveMatrix, perspectiveMatrix);\n\n    // multiply by transposed inverse perspective matrix, into perspective vec4\n    vec4.transformMat4(perspective, tmpVec4, perspectiveMatrix);\n  } else {\n    // no perspective\n    perspective[0] = perspective[1] = perspective[2] = 0;\n    perspective[3] = 1;\n  }\n\n  // Next take care of translation\n  translation[0] = a30;\n  translation[1] = a31;\n  translation[2] = a32;\n\n  // Now get scale and shear. 'row' is a 3 element array of 3 component vectors\n  mat3from4(row, tmp);\n\n  // Compute X scale factor and normalize first row.\n  scale[0] = vec3.length(row[0]);\n  vec3.normalize(row[0], row[0]);\n\n  // Compute XY shear factor and make 2nd row orthogonal to 1st.\n  skew[0] = vec3.dot(row[0], row[1]);\n  combine(row[1], row[1], row[0], 1.0, -skew[0]);\n\n  // Now, compute Y scale and normalize 2nd row.\n  scale[1] = vec3.length(row[1]);\n  vec3.normalize(row[1], row[1]);\n  skew[0] /= scale[1];\n\n  // Compute XZ and YZ shears, orthogonalize 3rd row\n  skew[1] = vec3.dot(row[0], row[2]);\n  combine(row[2], row[2], row[0], 1.0, -skew[1]);\n  skew[2] = vec3.dot(row[1], row[2]);\n  combine(row[2], row[2], row[1], 1.0, -skew[2]);\n\n  // Next, get Z scale and normalize 3rd row.\n  scale[2] = vec3.length(row[2]);\n  vec3.normalize(row[2], row[2]);\n  skew[1] /= scale[2];\n  skew[2] /= scale[2];\n\n  // At this point, the matrix (in rows) is orthonormal.\n  // Check for a coordinate system flip.  If the determinant\n  // is -1, then negate the matrix and the scaling factors.\n  vec3.cross(pdum3, row[1], row[2]);\n  if (vec3.dot(row[0], pdum3) < 0) {\n    for (var i = 0; i < 3; i++) {\n      scale[i] *= -1;\n      row[i][0] *= -1;\n      row[i][1] *= -1;\n      row[i][2] *= -1;\n    }\n  }\n\n  // Now, get the rotations out\n  quaternion[0] = 0.5 * Math.sqrt(Math.max(1 + row[0][0] - row[1][1] - row[2][2], 0));\n  quaternion[1] = 0.5 * Math.sqrt(Math.max(1 - row[0][0] + row[1][1] - row[2][2], 0));\n  quaternion[2] = 0.5 * Math.sqrt(Math.max(1 - row[0][0] - row[1][1] + row[2][2], 0));\n  quaternion[3] = 0.5 * Math.sqrt(Math.max(1 + row[0][0] + row[1][1] + row[2][2], 0));\n  if (row[2][1] > row[1][2]) quaternion[0] = -quaternion[0];\n  if (row[0][2] > row[2][0]) quaternion[1] = -quaternion[1];\n  if (row[1][0] > row[0][1]) quaternion[2] = -quaternion[2];\n  return true;\n}\nfunction normalize(out, mat) {\n  var m44 = mat[15];\n  // Cannot normalize.\n  if (m44 === 0) return false;\n  var scale = 1 / m44;\n  for (var i = 0; i < 16; i++) out[i] = mat[i] * scale;\n  return true;\n}\n\n// gets upper-left of a 4x4 matrix into a 3x3 of vectors\nfunction mat3from4(out, mat4x4) {\n  out[0][0] = mat4x4[0];\n  out[0][1] = mat4x4[1];\n  out[0][2] = mat4x4[2];\n  out[1][0] = mat4x4[4];\n  out[1][1] = mat4x4[5];\n  out[1][2] = mat4x4[6];\n  out[2][0] = mat4x4[8];\n  out[2][1] = mat4x4[9];\n  out[2][2] = mat4x4[10];\n}\nfunction combine(out, a, b, scale1, scale2) {\n  out[0] = a[0] * scale1 + b[0] * scale2;\n  out[1] = a[1] * scale1 + b[1] * scale2;\n  out[2] = a[2] * scale1 + b[2] * scale2;\n}\n\n/**\n * Different type of cameras, eg. simple camera used in 2D scene or\n * advanced camera which can do actions & switch between landmarks.\n */\n\nvar CameraType = /*#__PURE__*/function (CameraType) {\n  /**\n   * Performs all the rotational operations with the focal point instead of the camera position.\n   * This type of camera is useful in applications(like CAD) where 3D objects are being designed or explored.\n   * Camera cannot orbits over the north & south poles.\n   * @see http://voxelent.com/tutorial-cameras/\n   *\n   * In Three.js it's used in OrbitControls.\n   * @see https://threejs.org/docs/#examples/zh/controls/OrbitControls\n   */\n  CameraType[CameraType[\"ORBITING\"] = 0] = \"ORBITING\";\n  /**\n   * It's similar to the ORBITING camera, but it allows the camera to orbit over the north or south poles.\n   *\n   * In Three.js it's used in OrbitControls.\n   * @see https://threejs.org/docs/#examples/en/controls/TrackballControls\n   */\n  CameraType[CameraType[\"EXPLORING\"] = 1] = \"EXPLORING\";\n  /**\n   * Performs all the rotational operations with the camera position.\n   * It's useful in first person shooting games.\n   * Camera cannot orbits over the north & south poles.\n   *\n   * In Three.js it's used in FirstPersonControls.\n   * @see https://threejs.org/docs/#examples/en/controls/FirstPersonControls\n   */\n  CameraType[CameraType[\"TRACKING\"] = 2] = \"TRACKING\";\n  return CameraType;\n}({});\n\n/**\n * CameraType must be TRACKING\n */\nvar CameraTrackingMode = /*#__PURE__*/function (CameraTrackingMode) {\n  CameraTrackingMode[CameraTrackingMode[\"DEFAULT\"] = 0] = \"DEFAULT\";\n  CameraTrackingMode[CameraTrackingMode[\"ROTATIONAL\"] = 1] = \"ROTATIONAL\";\n  CameraTrackingMode[CameraTrackingMode[\"TRANSLATIONAL\"] = 2] = \"TRANSLATIONAL\";\n  CameraTrackingMode[CameraTrackingMode[\"CINEMATIC\"] = 3] = \"CINEMATIC\";\n  return CameraTrackingMode;\n}({});\nvar CameraProjectionMode = /*#__PURE__*/function (CameraProjectionMode) {\n  CameraProjectionMode[CameraProjectionMode[\"ORTHOGRAPHIC\"] = 0] = \"ORTHOGRAPHIC\";\n  CameraProjectionMode[CameraProjectionMode[\"PERSPECTIVE\"] = 1] = \"PERSPECTIVE\";\n  return CameraProjectionMode;\n}({});\nvar CameraEvent = {\n  UPDATED: 'updated'\n};\n\nvar MIN_DISTANCE = 0.0002;\n\n/**\n * WebGL Insights - 23.Designing Cameras for WebGL Applications Responsible Camera \n * @see https://github.com/d13g0/nucleo.js/blob/master/source/camera/Camera.js\n *\n * \n * 1. dolly  n \n * 2. pan  u v \n * 3. rotate \n * 4.  Landmark\n */\n\nvar Camera = /*#__PURE__*/function () {\n  function Camera() {\n    _classCallCheck(this, Camera);\n    /**\n     * Clip space near Z, default to range `[-1, 1]`\n     */\n    this.clipSpaceNearZ = ClipSpaceNearZ.NEGATIVE_ONE;\n    this.eventEmitter = new EventEmitter();\n    /**\n     * Matrix of camera\n     */\n    this.matrix = mat4.create();\n    /**\n     * u axis +X is right\n     * @see http://learnwebgl.brown37.net/07_cameras/camera_introduction.html#a-camera-definition\n     */\n    this.right = vec3.fromValues(1, 0, 0);\n    /**\n     * v axis +Y is up\n     */\n    this.up = vec3.fromValues(0, 1, 0);\n    /**\n     * n axis +Z is inside\n     */\n    this.forward = vec3.fromValues(0, 0, 1);\n    /**\n     * Position of camera.\n     */\n    this.position = vec3.fromValues(0, 0, 1);\n    /**\n     * Position of focal point.\n     */\n    this.focalPoint = vec3.fromValues(0, 0, 0);\n    /**\n     * vector from focalPoint to position\n     */\n    this.distanceVector = vec3.fromValues(0, 0, -1);\n    /**\n     * length(focalPoint - position)\n     */\n    this.distance = 1;\n    /**\n     * @see https://en.wikipedia.org/wiki/Azimuth\n     */\n    this.azimuth = 0;\n    this.elevation = 0;\n    this.roll = 0;\n    this.relAzimuth = 0;\n    this.relElevation = 0;\n    this.relRoll = 0;\n    /**\n     *  n \n     */\n    this.dollyingStep = 0;\n    this.maxDistance = Infinity;\n    this.minDistance = -Infinity;\n    /**\n     * zoom factor of the camera, default is 1\n     * eg. https://threejs.org/docs/#api/en/cameras/OrthographicCamera.zoom\n     */\n    this.zoom = 1;\n    /**\n     * invert the horizontal coordinate system HCS\n     */\n    this.rotateWorld = false;\n    /**\n     * \n     */\n    /**\n     * field of view [0-360]\n     * @see http://en.wikipedia.org/wiki/Angle_of_view\n     */\n    this.fov = 30;\n    this.near = 0.1;\n    this.far = 1000;\n    this.aspect = 1;\n    this.projectionMatrix = mat4.create();\n    this.projectionMatrixInverse = mat4.create();\n    this.jitteredProjectionMatrix = undefined;\n    this.enableUpdate = true;\n    // protected following = undefined;\n    this.type = CameraType.EXPLORING;\n    this.trackingMode = CameraTrackingMode.DEFAULT;\n    this.projectionMode = CameraProjectionMode.PERSPECTIVE;\n    /**\n     * for culling use\n     */\n    this.frustum = new Frustum();\n    /**\n     * ortho matrix for Canvas2D & SVG\n     */\n    this.orthoMatrix = mat4.create();\n  }\n  return _createClass(Camera, [{\n    key: \"isOrtho\",\n    value:\n    // constructor(type = CameraType.EXPLORING, trackingMode = CameraTrackingMode.DEFAULT) {\n    //   this.setType(type, trackingMode);\n    // }\n\n    function isOrtho() {\n      return this.projectionMode === CameraProjectionMode.ORTHOGRAPHIC;\n    }\n  }, {\n    key: \"getProjectionMode\",\n    value: function getProjectionMode() {\n      return this.projectionMode;\n    }\n  }, {\n    key: \"getPerspective\",\n    value: function getPerspective() {\n      // account for TAA\n      return this.jitteredProjectionMatrix || this.projectionMatrix;\n    }\n  }, {\n    key: \"getPerspectiveInverse\",\n    value: function getPerspectiveInverse() {\n      return this.projectionMatrixInverse;\n    }\n  }, {\n    key: \"getFrustum\",\n    value: function getFrustum() {\n      return this.frustum;\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      return this.position;\n    }\n  }, {\n    key: \"getFocalPoint\",\n    value: function getFocalPoint() {\n      return this.focalPoint;\n    }\n  }, {\n    key: \"getDollyingStep\",\n    value: function getDollyingStep() {\n      return this.dollyingStep;\n    }\n  }, {\n    key: \"getNear\",\n    value: function getNear() {\n      return this.near;\n    }\n  }, {\n    key: \"getFar\",\n    value: function getFar() {\n      return this.far;\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.zoom;\n    }\n  }, {\n    key: \"getOrthoMatrix\",\n    value: function getOrthoMatrix() {\n      return this.orthoMatrix;\n    }\n  }, {\n    key: \"getView\",\n    value: function getView() {\n      return this.view;\n    }\n  }, {\n    key: \"setEnableUpdate\",\n    value: function setEnableUpdate(enabled) {\n      this.enableUpdate = enabled;\n    }\n  }, {\n    key: \"setType\",\n    value: function setType(type, trackingMode) {\n      this.type = type;\n      if (this.type === CameraType.EXPLORING) {\n        this.setWorldRotation(true);\n      } else {\n        this.setWorldRotation(false);\n      }\n      this._getAngles();\n      if (this.type === CameraType.TRACKING && trackingMode !== undefined) {\n        this.setTrackingMode(trackingMode);\n      }\n      return this;\n    }\n  }, {\n    key: \"setProjectionMode\",\n    value: function setProjectionMode(projectionMode) {\n      this.projectionMode = projectionMode;\n      return this;\n    }\n  }, {\n    key: \"setTrackingMode\",\n    value: function setTrackingMode(trackingMode) {\n      if (this.type !== CameraType.TRACKING) {\n        throw new Error('Impossible to set a tracking mode if the camera is not of tracking type');\n      }\n      this.trackingMode = trackingMode;\n      return this;\n    }\n\n    /**\n     * If flag is true, it reverses the azimuth and elevation angles.\n     * Subsequent calls to rotate, setAzimuth, setElevation,\n     * changeAzimuth or changeElevation will cause the inverted effect.\n     * setRoll or changeRoll is not affected by this method.\n     *\n     * This inversion is useful when one wants to simulate that the world\n     * is moving, instead of the camera.\n     *\n     * By default the camera angles are not reversed.\n     * @param {Boolean} flag the boolean flag to reverse the angles.\n     */\n  }, {\n    key: \"setWorldRotation\",\n    value: function setWorldRotation(flag) {\n      this.rotateWorld = flag;\n      this._getAngles();\n      return this;\n    }\n\n    /**\n     *  MV \n     */\n  }, {\n    key: \"getViewTransform\",\n    value: function getViewTransform() {\n      // mat4.scale(this.matrix, this.matrix, vec3.fromValues(1, -1, 1));\n\n      return mat4.invert(mat4.create(), this.matrix);\n    }\n  }, {\n    key: \"getWorldTransform\",\n    value: function getWorldTransform() {\n      return this.matrix;\n    }\n  }, {\n    key: \"jitterProjectionMatrix\",\n    value: function jitterProjectionMatrix(x, y) {\n      var translation = mat4.fromTranslation(mat4.create(), [x, y, 0]);\n      this.jitteredProjectionMatrix = mat4.multiply(mat4.create(), translation, this.projectionMatrix);\n    }\n  }, {\n    key: \"clearJitterProjectionMatrix\",\n    value: function clearJitterProjectionMatrix() {\n      this.jitteredProjectionMatrix = undefined;\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"setMatrix\",\n    value: function setMatrix(matrix) {\n      this.matrix = matrix;\n      this._update();\n      return this;\n    }\n\n    /**\n     * Set projection matrix manually.\n     */\n  }, {\n    key: \"setProjectionMatrix\",\n    value: function setProjectionMatrix(matrix) {\n      this.projectionMatrix = matrix;\n    }\n  }, {\n    key: \"setFov\",\n    value: function setFov(fov) {\n      this.setPerspective(this.near, this.far, fov, this.aspect);\n      return this;\n    }\n  }, {\n    key: \"setAspect\",\n    value: function setAspect(aspect) {\n      this.setPerspective(this.near, this.far, this.fov, aspect);\n      return this;\n    }\n  }, {\n    key: \"setNear\",\n    value: function setNear(near) {\n      if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n        this.setPerspective(near, this.far, this.fov, this.aspect);\n      } else {\n        this.setOrthographic(this.left, this.rright, this.top, this.bottom, near, this.far);\n      }\n      return this;\n    }\n  }, {\n    key: \"setFar\",\n    value: function setFar(far) {\n      if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n        this.setPerspective(this.near, far, this.fov, this.aspect);\n      } else {\n        this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, far);\n      }\n      return this;\n    }\n\n    /**\n     * Sets an offset in a larger frustum, used in PixelPicking\n     */\n  }, {\n    key: \"setViewOffset\",\n    value: function setViewOffset(fullWidth, fullHeight, x, y, width, height) {\n      this.aspect = fullWidth / fullHeight;\n      if (this.view === undefined) {\n        this.view = {\n          enabled: true,\n          fullWidth: 1,\n          fullHeight: 1,\n          offsetX: 0,\n          offsetY: 0,\n          width: 1,\n          height: 1\n        };\n      }\n      this.view.enabled = true;\n      this.view.fullWidth = fullWidth;\n      this.view.fullHeight = fullHeight;\n      this.view.offsetX = x;\n      this.view.offsetY = y;\n      this.view.width = width;\n      this.view.height = height;\n      if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n        this.setPerspective(this.near, this.far, this.fov, this.aspect);\n      } else {\n        this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, this.far);\n      }\n      return this;\n    }\n  }, {\n    key: \"clearViewOffset\",\n    value: function clearViewOffset() {\n      if (this.view !== undefined) {\n        this.view.enabled = false;\n      }\n      if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n        this.setPerspective(this.near, this.far, this.fov, this.aspect);\n      } else {\n        this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, this.far);\n      }\n      return this;\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom) {\n      this.zoom = zoom;\n      if (this.projectionMode === CameraProjectionMode.ORTHOGRAPHIC) {\n        this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, this.far);\n      } else if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n        this.setPerspective(this.near, this.far, this.fov, this.aspect);\n      }\n      return this;\n    }\n\n    /**\n     * Zoom by specified point in viewport coordinates.\n     */\n  }, {\n    key: \"setZoomByViewportPoint\",\n    value: function setZoomByViewportPoint(zoom, viewportPoint) {\n      var _this$canvas$viewport = this.canvas.viewport2Canvas({\n          x: viewportPoint[0],\n          y: viewportPoint[1]\n        }),\n        ox = _this$canvas$viewport.x,\n        oy = _this$canvas$viewport.y;\n      var roll = this.roll;\n      this.rotate(0, 0, -roll);\n      this.setPosition(ox, oy);\n      this.setFocalPoint(ox, oy);\n      this.setZoom(zoom);\n      this.rotate(0, 0, roll);\n      var _this$canvas$viewport2 = this.canvas.viewport2Canvas({\n          x: viewportPoint[0],\n          y: viewportPoint[1]\n        }),\n        cx = _this$canvas$viewport2.x,\n        cy = _this$canvas$viewport2.y;\n\n      // project to rotated axis\n      var dvec = vec3.fromValues(cx - ox, cy - oy, 0);\n      var dx = vec3.dot(dvec, this.right) / vec3.length(this.right);\n      var dy = vec3.dot(dvec, this.up) / vec3.length(this.up);\n      var _this$getPosition = this.getPosition(),\n        _this$getPosition2 = _slicedToArray(_this$getPosition, 2),\n        px = _this$getPosition2[0],\n        py = _this$getPosition2[1];\n      var _this$getFocalPoint = this.getFocalPoint(),\n        _this$getFocalPoint2 = _slicedToArray(_this$getFocalPoint, 2),\n        fx = _this$getFocalPoint2[0],\n        fy = _this$getFocalPoint2[1];\n      this.setPosition(px - dx, py - dy);\n      this.setFocalPoint(fx - dx, fy - dy);\n      return this;\n    }\n  }, {\n    key: \"setPerspective\",\n    value: function setPerspective(near, far, fov, aspect) {\n      var _this$view;\n      this.projectionMode = CameraProjectionMode.PERSPECTIVE;\n      this.fov = fov;\n      this.near = near;\n      this.far = far;\n      this.aspect = aspect;\n      var top = this.near * Math.tan(deg2rad(0.5 * this.fov)) / this.zoom;\n      var height = 2 * top;\n      var width = this.aspect * height;\n      var left = -0.5 * width;\n      if ((_this$view = this.view) !== null && _this$view !== void 0 && _this$view.enabled) {\n        var fullWidth = this.view.fullWidth;\n        var fullHeight = this.view.fullHeight;\n        left += this.view.offsetX * width / fullWidth;\n        top -= this.view.offsetY * height / fullHeight;\n        width *= this.view.width / fullWidth;\n        height *= this.view.height / fullHeight;\n      }\n      makePerspective(this.projectionMatrix, left, left + width, top - height, top, near, this.far, this.clipSpaceNearZ === ClipSpaceNearZ.ZERO);\n      mat4.invert(this.projectionMatrixInverse, this.projectionMatrix);\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"setOrthographic\",\n    value: function setOrthographic(l, r, t, b, near, far) {\n      var _this$view2;\n      this.projectionMode = CameraProjectionMode.ORTHOGRAPHIC;\n      this.rright = r;\n      this.left = l;\n      this.top = t;\n      this.bottom = b;\n      this.near = near;\n      this.far = far;\n      var dx = (this.rright - this.left) / (2 * this.zoom);\n      var dy = (this.top - this.bottom) / (2 * this.zoom);\n      var cx = (this.rright + this.left) / 2;\n      var cy = (this.top + this.bottom) / 2;\n      var left = cx - dx;\n      var right = cx + dx;\n      var top = cy + dy;\n      var bottom = cy - dy;\n      if ((_this$view2 = this.view) !== null && _this$view2 !== void 0 && _this$view2.enabled) {\n        var scaleW = (this.rright - this.left) / this.view.fullWidth / this.zoom;\n        var scaleH = (this.top - this.bottom) / this.view.fullHeight / this.zoom;\n        left += scaleW * this.view.offsetX;\n        right = left + scaleW * this.view.width;\n        top -= scaleH * this.view.offsetY;\n        bottom = top - scaleH * this.view.height;\n      }\n      if (this.clipSpaceNearZ === ClipSpaceNearZ.NEGATIVE_ONE) {\n        // FlipY with switching bottom & top.\n        // @see https://stackoverflow.com/a/4886656\n        mat4.ortho(this.projectionMatrix, left, right, top, bottom, near, far);\n      } else {\n        mat4.orthoZO(this.projectionMatrix, left, right, top, bottom, near, far);\n      }\n      mat4.invert(this.projectionMatrixInverse, this.projectionMatrix);\n      this._getOrthoMatrix();\n      this.triggerUpdate();\n      return this;\n    }\n\n    /**\n     * Move the camera in world coordinates.\n     * It will keep looking at the current focal point.\n     *\n     * support scalars or vectors.\n     * @example\n     * setPosition(1, 2, 3);\n     * setPosition([1, 2, 3]);\n     */\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.position[1];\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.position[2];\n      var position = createVec3(x, y, z);\n      this._setPosition(position);\n      this.setFocalPoint(this.focalPoint);\n      this.triggerUpdate();\n      return this;\n    }\n\n    /**\n     * Sets the focal point of this camera in world coordinates.\n     *\n     * support scalars or vectors.\n     * @example\n     * setFocalPoint(1, 2, 3);\n     * setFocalPoint([1, 2, 3]);\n     */\n  }, {\n    key: \"setFocalPoint\",\n    value: function setFocalPoint(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.focalPoint[1];\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.focalPoint[2];\n      var up = vec3.fromValues(0, 1, 0);\n      this.focalPoint = createVec3(x, y, z);\n      if (this.trackingMode === CameraTrackingMode.CINEMATIC) {\n        var d = vec3.subtract(vec3.create(), this.focalPoint, this.position);\n        x = d[0];\n        y = d[1];\n        z = d[2];\n        var r = vec3.length(d);\n        var el = rad2deg(Math.asin(y / r));\n        var az = 90 + rad2deg(Math.atan2(z, x));\n        var m = mat4.create();\n        mat4.rotateY(m, m, deg2rad(az));\n        mat4.rotateX(m, m, deg2rad(el));\n        up = vec3.transformMat4(vec3.create(), [0, 1, 0], m);\n      }\n      mat4.invert(this.matrix, mat4.lookAt(mat4.create(), this.position, this.focalPoint, up));\n      this._getAxes();\n      this._getDistance();\n      this._getAngles();\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"getDistance\",\n    value: function getDistance() {\n      return this.distance;\n    }\n  }, {\n    key: \"getDistanceVector\",\n    value: function getDistanceVector() {\n      return this.distanceVector;\n    }\n\n    /**\n     * Moves the camera towards/from the focal point.\n     */\n  }, {\n    key: \"setDistance\",\n    value: function setDistance(d) {\n      if (this.distance === d || d < 0) {\n        return this;\n      }\n      this.distance = d;\n      if (this.distance < MIN_DISTANCE) {\n        this.distance = MIN_DISTANCE;\n      }\n      this.dollyingStep = this.distance / 100;\n      var pos = vec3.create();\n      d = this.distance;\n      var n = this.forward;\n      var f = this.focalPoint;\n      pos[0] = d * n[0] + f[0];\n      pos[1] = d * n[1] + f[1];\n      pos[2] = d * n[2] + f[2];\n      this._setPosition(pos);\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"setMaxDistance\",\n    value: function setMaxDistance(d) {\n      this.maxDistance = d;\n      return this;\n    }\n  }, {\n    key: \"setMinDistance\",\n    value: function setMinDistance(d) {\n      this.minDistance = d;\n      return this;\n    }\n\n    /**\n     * \n     * the azimuth in degrees\n     */\n  }, {\n    key: \"setAzimuth\",\n    value: function setAzimuth(az) {\n      this.azimuth = getAngle(az);\n      this.computeMatrix();\n      this._getAxes();\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        this._getPosition();\n      } else if (this.type === CameraType.TRACKING) {\n        this._getFocalPoint();\n      }\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"getAzimuth\",\n    value: function getAzimuth() {\n      return this.azimuth;\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"setElevation\",\n    value: function setElevation(el) {\n      this.elevation = getAngle(el);\n      this.computeMatrix();\n      this._getAxes();\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        this._getPosition();\n      } else if (this.type === CameraType.TRACKING) {\n        this._getFocalPoint();\n      }\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"getElevation\",\n    value: function getElevation() {\n      return this.elevation;\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"setRoll\",\n    value: function setRoll(angle) {\n      this.roll = getAngle(angle);\n      this.computeMatrix();\n      this._getAxes();\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        this._getPosition();\n      } else if (this.type === CameraType.TRACKING) {\n        this._getFocalPoint();\n      }\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"getRoll\",\n    value: function getRoll() {\n      return this.roll;\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      this._getAxes();\n      this._getPosition();\n      this._getDistance();\n      this._getAngles();\n      this._getOrthoMatrix();\n      this.triggerUpdate();\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"computeMatrix\",\n    value: function computeMatrix() {\n      //  3D \n      // @see https://xiaoiver.github.io/coding/2018/12/28/Camera-%E8%AE%BE%E8%AE%A1-%E4%B8%80.html\n      var rotZ = quat$1.setAxisAngle(quat$1.create(), [0, 0, 1], deg2rad(this.roll));\n      mat4.identity(this.matrix);\n\n      // only consider HCS for EXPLORING and ORBITING cameras\n      var rotX = quat$1.setAxisAngle(quat$1.create(), [1, 0, 0], deg2rad((this.rotateWorld && this.type !== CameraType.TRACKING || this.type === CameraType.TRACKING ? 1 : -1) * this.elevation));\n      var rotY = quat$1.setAxisAngle(quat$1.create(), [0, 1, 0], deg2rad((this.rotateWorld && this.type !== CameraType.TRACKING || this.type === CameraType.TRACKING ? 1 : -1) * this.azimuth));\n      var rotQ = quat$1.multiply(quat$1.create(), rotY, rotX);\n      rotQ = quat$1.multiply(quat$1.create(), rotQ, rotZ);\n      var rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        mat4.translate(this.matrix, this.matrix, this.focalPoint);\n        mat4.multiply(this.matrix, this.matrix, rotMatrix);\n        mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n      } else if (this.type === CameraType.TRACKING) {\n        mat4.translate(this.matrix, this.matrix, this.position);\n        mat4.multiply(this.matrix, this.matrix, rotMatrix);\n      }\n    }\n\n    /**\n     * Sets the camera position in the camera matrix\n     */\n  }, {\n    key: \"_setPosition\",\n    value: function _setPosition(x, y, z) {\n      this.position = createVec3(x, y, z);\n      var m = this.matrix;\n      m[12] = this.position[0];\n      m[13] = this.position[1];\n      m[14] = this.position[2];\n      m[15] = 1;\n      this._getOrthoMatrix();\n    }\n\n    /**\n     * Recalculates axes based on the current matrix\n     */\n  }, {\n    key: \"_getAxes\",\n    value: function _getAxes() {\n      vec3.copy(this.right, createVec3(vec4.transformMat4(vec4.create(), [1, 0, 0, 0], this.matrix)));\n      vec3.copy(this.up, createVec3(vec4.transformMat4(vec4.create(), [0, 1, 0, 0], this.matrix)));\n      vec3.copy(this.forward, createVec3(vec4.transformMat4(vec4.create(), [0, 0, 1, 0], this.matrix)));\n      vec3.normalize(this.right, this.right);\n      vec3.normalize(this.up, this.up);\n      vec3.normalize(this.forward, this.forward);\n    }\n\n    /**\n     * Recalculates euler angles based on the current state\n     */\n  }, {\n    key: \"_getAngles\",\n    value: function _getAngles() {\n      // Recalculates angles\n      var x = this.distanceVector[0];\n      var y = this.distanceVector[1];\n      var z = this.distanceVector[2];\n      var r = vec3.length(this.distanceVector);\n\n      // FAST FAIL: If there is no distance we cannot compute angles\n      if (r === 0) {\n        this.elevation = 0;\n        this.azimuth = 0;\n        return;\n      }\n      if (this.type === CameraType.TRACKING) {\n        this.elevation = rad2deg(Math.asin(y / r));\n        this.azimuth = rad2deg(Math.atan2(-x, -z));\n      } else if (this.rotateWorld) {\n        this.elevation = rad2deg(Math.asin(y / r));\n        this.azimuth = rad2deg(Math.atan2(-x, -z));\n      } else {\n        this.elevation = -rad2deg(Math.asin(y / r));\n        this.azimuth = -rad2deg(Math.atan2(-x, -z));\n      }\n    }\n\n    /**\n     *  ORBITING \n     */\n  }, {\n    key: \"_getPosition\",\n    value: function _getPosition() {\n      vec3.copy(this.position, createVec3(vec4.transformMat4(vec4.create(), [0, 0, 0, 1], this.matrix)));\n\n      // \n      this._getDistance();\n    }\n\n    /**\n     *  TRACKING \n     */\n  }, {\n    key: \"_getFocalPoint\",\n    value: function _getFocalPoint() {\n      vec3.transformMat3(this.distanceVector, [0, 0, -this.distance], mat3.fromMat4(mat3.create(), this.matrix));\n      vec3.add(this.focalPoint, this.position, this.distanceVector);\n\n      // \n      this._getDistance();\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"_getDistance\",\n    value: function _getDistance() {\n      this.distanceVector = vec3.subtract(vec3.create(), this.focalPoint, this.position);\n      this.distance = vec3.length(this.distanceVector);\n      this.dollyingStep = this.distance / 100;\n    }\n  }, {\n    key: \"_getOrthoMatrix\",\n    value: function _getOrthoMatrix() {\n      if (this.projectionMode !== CameraProjectionMode.ORTHOGRAPHIC) {\n        return;\n      }\n      var position = this.position;\n      var rotZ = quat$1.setAxisAngle(quat$1.create(), [0, 0, 1], -this.roll * Math.PI / 180);\n      mat4.fromRotationTranslationScaleOrigin(this.orthoMatrix, rotZ, vec3.fromValues((this.rright - this.left) / 2 - position[0], (this.top - this.bottom) / 2 - position[1], 0), vec3.fromValues(this.zoom, this.zoom, 1), position);\n    }\n  }, {\n    key: \"triggerUpdate\",\n    value: function triggerUpdate() {\n      if (this.enableUpdate) {\n        // update frustum\n        var viewMatrix = this.getViewTransform();\n        var vpMatrix = mat4.multiply(mat4.create(), this.getPerspective(), viewMatrix);\n        this.getFrustum().extractFromVPMatrix(vpMatrix);\n        this.eventEmitter.emit(CameraEvent.UPDATED);\n      }\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(azimuth, elevation, roll) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"pan\",\n    value: function pan(tx, ty) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"dolly\",\n    value: function dolly(value) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"createLandmark\",\n    value: function createLandmark(name, params) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"gotoLandmark\",\n    value: function gotoLandmark(name, options) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"cancelLandmarkAnimation\",\n    value: function cancelLandmarkAnimation() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }]);\n}();\n\n/**\n * @see https://doc.babylonjs.com/how_to/optimizing_your_scene#changing-mesh-culling-strategy\n */\nvar Strategy = /*#__PURE__*/function (Strategy) {\n  Strategy[Strategy[\"Standard\"] = 0] = \"Standard\";\n  return Strategy;\n}({});\n\nvar SortReason = /*#__PURE__*/function (SortReason) {\n  SortReason[SortReason[\"ADDED\"] = 0] = \"ADDED\";\n  SortReason[SortReason[\"REMOVED\"] = 1] = \"REMOVED\";\n  SortReason[SortReason[\"Z_INDEX_CHANGED\"] = 2] = \"Z_INDEX_CHANGED\";\n  return SortReason;\n}({});\n\nvar EMPTY_PARSED_PATH = {\n  absolutePath: [],\n  hasArc: false,\n  segments: [],\n  polygons: [],\n  polylines: [],\n  curve: null,\n  totalLength: 0,\n  rect: new Rectangle(0, 0, 0, 0)\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type\n */\nvar PropertySyntax = /*#__PURE__*/function (PropertySyntax) {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#coordinate\n   */\n  PropertySyntax[\"COORDINATE\"] = \"<coordinate>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#color\n   */\n  PropertySyntax[\"COLOR\"] = \"<color>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#paint\n   */\n  PropertySyntax[\"PAINT\"] = \"<paint>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#number\n   */\n  PropertySyntax[\"NUMBER\"] = \"<number>\";\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/angle\n   */\n  PropertySyntax[\"ANGLE\"] = \"<angle>\";\n  /**\n   * <number> with range 0..1\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#opacity_value\n   */\n  PropertySyntax[\"OPACITY_VALUE\"] = \"<opacity-value>\";\n  /**\n   * <number> with range 0..Infinity\n   */\n  PropertySyntax[\"SHADOW_BLUR\"] = \"<shadow-blur>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#length\n   */\n  PropertySyntax[\"LENGTH\"] = \"<length>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#percentage\n   */\n  PropertySyntax[\"PERCENTAGE\"] = \"<percentage>\";\n  PropertySyntax[\"LENGTH_PERCENTAGE\"] = \"<length> | <percentage>\";\n  PropertySyntax[\"LENGTH_PERCENTAGE_12\"] = \"[<length> | <percentage>]{1,2}\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/margin#formal_syntax\n   */\n  PropertySyntax[\"LENGTH_PERCENTAGE_14\"] = \"[<length> | <percentage>]{1,4}\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#list-of-ts\n   */\n  PropertySyntax[\"LIST_OF_POINTS\"] = \"<list-of-points>\";\n  PropertySyntax[\"PATH\"] = \"<path>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/filter#formal_syntax\n   */\n  PropertySyntax[\"FILTER\"] = \"<filter>\";\n  PropertySyntax[\"Z_INDEX\"] = \"<z-index>\";\n  PropertySyntax[\"OFFSET_DISTANCE\"] = \"<offset-distance>\";\n  PropertySyntax[\"DEFINED_PATH\"] = \"<defined-path>\";\n  PropertySyntax[\"MARKER\"] = \"<marker>\";\n  PropertySyntax[\"TRANSFORM\"] = \"<transform>\";\n  PropertySyntax[\"TRANSFORM_ORIGIN\"] = \"<transform-origin>\";\n  PropertySyntax[\"TEXT\"] = \"<text>\";\n  PropertySyntax[\"TEXT_TRANSFORM\"] = \"<text-transform>\";\n  return PropertySyntax;\n}({});\n\nfunction define(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nfunction extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n\nfunction Color() {}\n\nvar darker = 0.7;\nvar brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nfunction color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nfunction rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nfunction rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nfunction Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nfunction hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nfunction hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n\nfunction memoize(func, resolver) {\n  if (typeof func !== 'function' || resolver != null && typeof resolver !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n  var _memoized = function memoized() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var key = resolver ? resolver.apply(this, args) : args[0];\n    var cache = _memoized.cache;\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    _memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  _memoized.cache = new (memoize.Cache || Map)();\n  memoize.cacheList.push(_memoized.cache);\n  return _memoized;\n}\nmemoize.Cache = Map;\nmemoize.cacheList = [];\nmemoize.clearCache = function () {\n  memoize.cacheList.forEach(function (cache) {\n    return cache.clear();\n  });\n};\n\n// These units are iterated through, so be careful when adding or changing the\n// order.\nvar UnitType = /*#__PURE__*/function (UnitType) {\n  UnitType[UnitType[\"kUnknown\"] = 0] = \"kUnknown\";\n  UnitType[UnitType[\"kNumber\"] = 1] = \"kNumber\";\n  UnitType[UnitType[\"kPercentage\"] = 2] = \"kPercentage\";\n  // Length units\n  UnitType[UnitType[\"kEms\"] = 3] = \"kEms\";\n  // kExs,\n  UnitType[UnitType[\"kPixels\"] = 4] = \"kPixels\";\n  // kCentimeters,\n  // kMillimeters,\n  // kInches,\n  // kPoints,\n  // kPicas,\n  // kQuarterMillimeters,\n  // https://drafts.csswg.org/css-values-4/#viewport-relative-lengths\n  //\n  // See also IsViewportPercentageLength.\n  // kViewportWidth,\n  // kViewportHeight,\n  // kViewportInlineSize,\n  // kViewportBlockSize,\n  // kViewportMin,\n  // kViewportMax,\n  // kSmallViewportWidth,\n  // kSmallViewportHeight,\n  // kSmallViewportInlineSize,\n  // kSmallViewportBlockSize,\n  // kSmallViewportMin,\n  // kSmallViewportMax,\n  // kLargeViewportWidth,\n  // kLargeViewportHeight,\n  // kLargeViewportInlineSize,\n  // kLargeViewportBlockSize,\n  // kLargeViewportMin,\n  // kLargeViewportMax,\n  // kDynamicViewportWidth,\n  // kDynamicViewportHeight,\n  // kDynamicViewportInlineSize,\n  // kDynamicViewportBlockSize,\n  // kDynamicViewportMin,\n  // kDynamicViewportMax,\n  // https://drafts.csswg.org/css-contain-3/#container-lengths\n  //\n  // See also IsContainerPercentageLength.\n  // kContainerWidth,\n  // kContainerHeight,\n  // kContainerInlineSize,\n  // kContainerBlockSize,\n  // kContainerMin,\n  // kContainerMax,\n  UnitType[UnitType[\"kRems\"] = 5] = \"kRems\";\n  // kChs,\n  // kUserUnits, // The SVG term for unitless lengths\n  // Angle units\n  UnitType[UnitType[\"kDegrees\"] = 6] = \"kDegrees\";\n  UnitType[UnitType[\"kRadians\"] = 7] = \"kRadians\";\n  UnitType[UnitType[\"kGradians\"] = 8] = \"kGradians\";\n  UnitType[UnitType[\"kTurns\"] = 9] = \"kTurns\";\n  // Time units\n  UnitType[UnitType[\"kMilliseconds\"] = 10] = \"kMilliseconds\";\n  UnitType[UnitType[\"kSeconds\"] = 11] = \"kSeconds\";\n  // kHertz,\n  // kKilohertz,\n  // Resolution\n  // kDotsPerPixel,\n  // kDotsPerInch,\n  // kDotsPerCentimeter,\n  // Other units\n  // kFraction,\n  UnitType[UnitType[\"kInteger\"] = 12] = \"kInteger\"; // This value is used to handle quirky margins in reflow roots (body, td,\n  // and th) like WinIE. The basic idea is that a stylesheet can use the value\n  // __qem (for quirky em) instead of em. When the quirky value is used, if\n  // you're in quirks mode, the margin will collapse away inside a table cell.\n  // This quirk is specified in the HTML spec but our impl is different.\n  // TODO: Remove this. crbug.com/443952\n  // kQuirkyEms,\n  return UnitType;\n}({});\nvar UnitCategory = /*#__PURE__*/function (UnitCategory) {\n  UnitCategory[UnitCategory[\"kUNumber\"] = 0] = \"kUNumber\";\n  UnitCategory[UnitCategory[\"kUPercent\"] = 1] = \"kUPercent\";\n  UnitCategory[UnitCategory[\"kULength\"] = 2] = \"kULength\";\n  UnitCategory[UnitCategory[\"kUAngle\"] = 3] = \"kUAngle\";\n  UnitCategory[UnitCategory[\"kUTime\"] = 4] = \"kUTime\";\n  // kUFrequency,\n  // kUResolution,\n  UnitCategory[UnitCategory[\"kUOther\"] = 5] = \"kUOther\";\n  return UnitCategory;\n}({});\nvar Nested = /*#__PURE__*/function (Nested) {\n  Nested[Nested[\"kYes\"] = 0] = \"kYes\";\n  Nested[Nested[\"kNo\"] = 1] = \"kNo\";\n  return Nested;\n}({});\nvar ParenLess = /*#__PURE__*/function (ParenLess) {\n  ParenLess[ParenLess[\"kYes\"] = 0] = \"kYes\";\n  ParenLess[ParenLess[\"kNo\"] = 1] = \"kNo\";\n  return ParenLess;\n}({});\n\n// This file specifies the unit strings used in CSSPrimitiveValues.\nvar data = [{\n  name: 'em',\n  unit_type: UnitType.kEms\n},\n// {\n//   name: 'ex',\n//   unit_type: UnitType.kExs,\n// },\n{\n  name: 'px',\n  unit_type: UnitType.kPixels\n},\n// {\n//   name: \"cm\",\n//   unit_type: UnitType.kCentimeters,\n// },\n// {\n//   name: \"mm\",\n//   unit_type: UnitType.kMillimeters,\n// },\n// {\n//   name: \"q\",\n//   unit_type: UnitType.kQuarterMillimeters,\n// },\n// {\n//   name: \"in\",\n//   unit_type: UnitType.kInches,\n// },\n// {\n//   name: \"pt\",\n//   unit_type: UnitType.kPoints,\n// },\n// {\n//   name: \"pc\",\n//   unit_type: UnitType.kPicas,\n// },\n{\n  name: 'deg',\n  unit_type: UnitType.kDegrees\n}, {\n  name: 'rad',\n  unit_type: UnitType.kRadians\n}, {\n  name: 'grad',\n  unit_type: UnitType.kGradians\n}, {\n  name: 'ms',\n  unit_type: UnitType.kMilliseconds\n}, {\n  name: 's',\n  unit_type: UnitType.kSeconds\n},\n// {\n//   name: \"hz\",\n//   unit_type: UnitType.kHertz,\n// },\n// {\n//   name: \"khz\",\n//   unit_type: UnitType.kKilohertz,\n// },\n// {\n//   name: \"dpi\",\n//   unit_type: \"kDotsPerInch\",\n// },\n// {\n//   name: \"dpcm\",\n//   unit_type: \"kDotsPerCentimeter\",\n// },\n// {\n//   name: \"dppx\",\n//   unit_type: \"kDotsPerPixel\",\n// },\n// {\n//   name: \"x\",\n//   unit_type: \"kDotsPerPixel\",\n// },\n// {\n//   name: \"vw\",\n//   unit_type: \"kViewportWidth\",\n// },\n// {\n//   name: \"vh\",\n//   unit_type: \"kViewportHeight\",\n// },\n// {\n//   name: \"vi\",\n//   unit_type: \"kViewportInlineSize\",\n// },\n// {\n//   name: \"vb\",\n//   unit_type: \"kViewportBlockSize\",\n// },\n// {\n//   name: \"vmin\",\n//   unit_type: UnitType.kViewportMin,\n// },\n// {\n//   name: \"vmax\",\n//   unit_type: UnitType.kViewportMax,\n// },\n// {\n//   name: \"svw\",\n//   unit_type: \"kSmallViewportWidth\",\n// },\n// {\n//   name: \"svh\",\n//   unit_type: \"kSmallViewportHeight\",\n// },\n// {\n//   name: \"svi\",\n//   unit_type: \"kSmallViewportInlineSize\",\n// },\n// {\n//   name: \"svb\",\n//   unit_type: \"kSmallViewportBlockSize\",\n// },\n// {\n//   name: \"svmin\",\n//   unit_type: \"kSmallViewportMin\",\n// },\n// {\n//   name: \"svmax\",\n//   unit_type: \"kSmallViewportMax\",\n// },\n// {\n//   name: \"lvw\",\n//   unit_type: \"kLargeViewportWidth\",\n// },\n// {\n//   name: \"lvh\",\n//   unit_type: \"kLargeViewportHeight\",\n// },\n// {\n//   name: \"lvi\",\n//   unit_type: \"kLargeViewportInlineSize\",\n// },\n// {\n//   name: \"lvb\",\n//   unit_type: \"kLargeViewportBlockSize\",\n// },\n// {\n//   name: \"lvmin\",\n//   unit_type: UnitType.kLargeViewportMin,\n// },\n// {\n//   name: \"lvmax\",\n//   unit_type: UnitType.kLargeViewportMax,\n// },\n// {\n//   name: \"dvw\",\n//   unit_type: UnitType.kDynamicViewportWidth,\n// },\n// {\n//   name: \"dvh\",\n//   unit_type: UnitType.kDynamicViewportHeight,\n// },\n// {\n//   name: \"dvi\",\n//   unit_type: UnitType.kDynamicViewportInlineSize,\n// },\n// {\n//   name: \"dvb\",\n//   unit_type: UnitType.kDynamicViewportBlockSize,\n// },\n// {\n//   name: \"dvmin\",\n//   unit_type: UnitType.kDynamicViewportMin,\n// },\n// {\n//   name: \"dvmax\",\n//   unit_type: UnitType.kDynamicViewportMax,\n// },\n// {\n//   name: \"cqw\",\n//   unit_type: UnitType.kContainerWidth,\n// },\n// {\n//   name: \"cqh\",\n//   unit_type: UnitType.kContainerHeight,\n// },\n// {\n//   name: \"cqi\",\n//   unit_type: UnitType.kContainerInlineSize,\n// },\n// {\n//   name: \"cqb\",\n//   unit_type: UnitType.kContainerBlockSize,\n// },\n// {\n//   name: \"cqmin\",\n//   unit_type: UnitType.kContainerMin,\n// },\n// {\n//   name: \"cqmax\",\n//   unit_type: UnitType.kContainerMax,\n// },\n{\n  name: 'rem',\n  unit_type: UnitType.kRems\n},\n// {\n//   name: 'fr',\n//   unit_type: UnitType.kFraction,\n// },\n{\n  name: 'turn',\n  unit_type: UnitType.kTurns\n}\n// {\n//   name: 'ch',\n//   unit_type: UnitType.kChs,\n// },\n// {\n//   name: '__qem',\n//   unit_type: UnitType.kQuirkyEms,\n// },\n];\nvar CSSStyleValueType = /*#__PURE__*/function (CSSStyleValueType) {\n  CSSStyleValueType[CSSStyleValueType[\"kUnknownType\"] = 0] = \"kUnknownType\";\n  CSSStyleValueType[CSSStyleValueType[\"kUnparsedType\"] = 1] = \"kUnparsedType\";\n  CSSStyleValueType[CSSStyleValueType[\"kKeywordType\"] = 2] = \"kKeywordType\";\n  // Start of CSSNumericValue subclasses\n  CSSStyleValueType[CSSStyleValueType[\"kUnitType\"] = 3] = \"kUnitType\";\n  CSSStyleValueType[CSSStyleValueType[\"kSumType\"] = 4] = \"kSumType\";\n  CSSStyleValueType[CSSStyleValueType[\"kProductType\"] = 5] = \"kProductType\";\n  CSSStyleValueType[CSSStyleValueType[\"kNegateType\"] = 6] = \"kNegateType\";\n  CSSStyleValueType[CSSStyleValueType[\"kInvertType\"] = 7] = \"kInvertType\";\n  CSSStyleValueType[CSSStyleValueType[\"kMinType\"] = 8] = \"kMinType\";\n  CSSStyleValueType[CSSStyleValueType[\"kMaxType\"] = 9] = \"kMaxType\";\n  CSSStyleValueType[CSSStyleValueType[\"kClampType\"] = 10] = \"kClampType\";\n  // End of CSSNumericValue subclasses\n  CSSStyleValueType[CSSStyleValueType[\"kTransformType\"] = 11] = \"kTransformType\";\n  CSSStyleValueType[CSSStyleValueType[\"kPositionType\"] = 12] = \"kPositionType\";\n  CSSStyleValueType[CSSStyleValueType[\"kURLImageType\"] = 13] = \"kURLImageType\";\n  CSSStyleValueType[CSSStyleValueType[\"kColorType\"] = 14] = \"kColorType\";\n  CSSStyleValueType[CSSStyleValueType[\"kUnsupportedColorType\"] = 15] = \"kUnsupportedColorType\";\n  return CSSStyleValueType;\n}({});\n\n// function parseCSSStyleValue(propertyName: string, value: string): CSSStyleValue[] {\n//   // const propertyId = cssPropertyID(propertyName);\n\n//   // if (propertyId === CSSPropertyID.kInvalid) {\n//   //   return [];\n//   // }\n\n//   // const customPropertyName = propertyId === CSSPropertyID.kVariable ? propertyName : null;\n//   // return fromString(propertyId, customPropertyName, value);\n//   return [];\n// }\n\nvar stringToUnitType = function stringToUnitType(name) {\n  return data.find(function (item) {\n    return item.name === name;\n  }).unit_type;\n};\nvar unitFromName = function unitFromName(name) {\n  if (!name) {\n    return UnitType.kUnknown;\n  }\n  if (name === 'number') {\n    return UnitType.kNumber;\n  }\n  if (name === 'percent' || name === '%') {\n    return UnitType.kPercentage;\n  }\n  return stringToUnitType(name);\n};\nvar unitTypeToUnitCategory = function unitTypeToUnitCategory(type) {\n  switch (type) {\n    case UnitType.kNumber:\n    case UnitType.kInteger:\n      return UnitCategory.kUNumber;\n    case UnitType.kPercentage:\n      return UnitCategory.kUPercent;\n    case UnitType.kPixels:\n      // case UnitType.kCentimeters:\n      // case UnitType.kMillimeters:\n      // case UnitType.kQuarterMillimeters:\n      // case UnitType.kInches:\n      // case UnitType.kPoints:\n      // case UnitType.kPicas:\n      // case UnitType.kUserUnits:\n      return UnitCategory.kULength;\n    case UnitType.kMilliseconds:\n    case UnitType.kSeconds:\n      return UnitCategory.kUTime;\n    case UnitType.kDegrees:\n    case UnitType.kRadians:\n    case UnitType.kGradians:\n    case UnitType.kTurns:\n      return UnitCategory.kUAngle;\n    // case UnitType.kHertz:\n    // case UnitType.kKilohertz:\n    //   return UnitCategory.kUFrequency;\n    // case UnitType.kDotsPerPixel:\n    // case UnitType.kDotsPerInch:\n    // case UnitType.kDotsPerCentimeter:\n    //   return UnitCategory.kUResolution;\n    default:\n      return UnitCategory.kUOther;\n  }\n};\nvar canonicalUnitTypeForCategory = function canonicalUnitTypeForCategory(category) {\n  // The canonical unit type is chosen according to the way\n  // CSSPropertyParser.ValidUnit() chooses the default unit in each category\n  // (based on unitflags).\n  switch (category) {\n    case UnitCategory.kUNumber:\n      return UnitType.kNumber;\n    case UnitCategory.kULength:\n      return UnitType.kPixels;\n    case UnitCategory.kUPercent:\n      return UnitType.kPercentage;\n    // return UnitType.kUnknown; // Cannot convert between numbers and percent.\n    case UnitCategory.kUTime:\n      return UnitType.kSeconds;\n    case UnitCategory.kUAngle:\n      return UnitType.kDegrees;\n    // case UnitCategory.kUFrequency:\n    //   return UnitType.kHertz;\n    // case UnitCategory.kUResolution:\n    //   return UnitType.kDotsPerPixel;\n    default:\n      return UnitType.kUnknown;\n  }\n};\n\n/**\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/css_primitive_value.cc#353\n */\nvar conversionToCanonicalUnitsScaleFactor = function conversionToCanonicalUnitsScaleFactor(unit_type) {\n  var factor = 1.0;\n  // FIXME: the switch can be replaced by an array of scale factors.\n  switch (unit_type) {\n    // These are \"canonical\" units in their respective categories.\n    case UnitType.kPixels:\n    // case UnitType.kUserUnits:\n    case UnitType.kDegrees:\n    case UnitType.kSeconds:\n      // case UnitType.kHertz:\n      break;\n    case UnitType.kMilliseconds:\n      factor = 0.001;\n      break;\n    // case UnitType.kCentimeters:\n    //   // factor = kCssPixelsPerCentimeter;\n    //   break;\n    // case UnitType.kDotsPerCentimeter:\n    //   // factor = 1 / kCssPixelsPerCentimeter;\n    //   break;\n    // case UnitType.kMillimeters:\n    //   // factor = kCssPixelsPerMillimeter;\n    //   break;\n    // case UnitType.kQuarterMillimeters:\n    //   // factor = kCssPixelsPerQuarterMillimeter;\n    //   break;\n    // case UnitType.kInches:\n    //   // factor = kCssPixelsPerInch;\n    //   break;\n    // case UnitType.kDotsPerInch:\n    //   // factor = 1 / kCssPixelsPerInch;\n    //   break;\n    // case UnitType.kPoints:\n    //   // factor = kCssPixelsPerPoint;\n    //   break;\n    // case UnitType.kPicas:\n    //   // factor = kCssPixelsPerPica;\n    //   break;\n    case UnitType.kRadians:\n      factor = 180 / Math.PI;\n      break;\n    case UnitType.kGradians:\n      factor = 0.9;\n      break;\n    case UnitType.kTurns:\n      factor = 360;\n      break;\n  }\n  return factor;\n};\nvar unitTypeToString = function unitTypeToString(type) {\n  switch (type) {\n    case UnitType.kNumber:\n    case UnitType.kInteger:\n      // case UnitType.kUserUnits:\n      return '';\n    case UnitType.kPercentage:\n      return '%';\n    case UnitType.kEms:\n      // case UnitType.kQuirkyEms:\n      return 'em';\n    // case UnitType.kExs:\n    //   return 'ex';\n    case UnitType.kRems:\n      return 'rem';\n    // case UnitType.kChs:\n    //   return 'ch';\n    case UnitType.kPixels:\n      return 'px';\n    // case UnitType.kCentimeters:\n    //   return 'cm';\n    // case UnitType.kDotsPerPixel:\n    //   return 'dppx';\n    // case UnitType.kDotsPerInch:\n    //   return 'dpi';\n    // case UnitType.kDotsPerCentimeter:\n    //   return 'dpcm';\n    // case UnitType.kMillimeters:\n    //   return 'mm';\n    // case UnitType.kQuarterMillimeters:\n    //   return 'q';\n    // case UnitType.kInches:\n    //   return 'in';\n    // case UnitType.kPoints:\n    //   return 'pt';\n    // case UnitType.kPicas:\n    //   return 'pc';\n    case UnitType.kDegrees:\n      return 'deg';\n    case UnitType.kRadians:\n      return 'rad';\n    case UnitType.kGradians:\n      return 'grad';\n    case UnitType.kMilliseconds:\n      return 'ms';\n    case UnitType.kSeconds:\n      return 's';\n    // case UnitType.kHertz:\n    //   return 'hz';\n    // case UnitType.kKilohertz:\n    //   return 'khz';\n    case UnitType.kTurns:\n      return 'turn';\n  }\n  return '';\n};\n\n/**\n * CSSStyleValue is the base class for all CSS values accessible from Typed OM.\n * Values that are not yet supported as specific types are also returned as base CSSStyleValues.\n *\n * Spec @see https://drafts.css-houdini.org/css-typed-om/#stylevalue-objects\n * Docs @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleValue\n */\nvar CSSStyleValue = /*#__PURE__*/function () {\n  function CSSStyleValue() {\n    _classCallCheck(this, CSSStyleValue);\n  }\n  return _createClass(CSSStyleValue, [{\n    key: \"toString\",\n    value:\n    // protected abstract toCSSValue(): CSSValue;\n\n    function toString() {\n      return this.buildCSSText(Nested.kNo, ParenLess.kNo, '');\n    }\n  }, {\n    key: \"isNumericValue\",\n    value: function isNumericValue() {\n      return this.getType() >= CSSStyleValueType.kUnitType && this.getType() <= CSSStyleValueType.kClampType;\n    }\n  }], [{\n    key: \"isAngle\",\n    value:\n    // static parse(propertyName: string, value: string): CSSStyleValue {\n    //   return parseCSSStyleValue(propertyName, value)[0];\n    // }\n\n    // static parseAll(propertyName: string, value: string): CSSStyleValue[] {\n    //   return parseCSSStyleValue(propertyName, value);\n    // }\n\n    function isAngle(unit) {\n      return unit === UnitType.kDegrees || unit === UnitType.kRadians || unit === UnitType.kGradians || unit === UnitType.kTurns;\n    }\n\n    // static isViewportPercentageLength(type: UnitType) {\n    //   return type >= UnitType.kViewportWidth && type <= UnitType.kDynamicViewportMax;\n    // }\n\n    // static isContainerPercentageLength(type: UnitType) {\n    //   return type >= UnitType.kContainerWidth && type <= UnitType.kContainerMax;\n    // }\n  }, {\n    key: \"isLength\",\n    value: function isLength(type) {\n      // return (type >= UnitType.kEms && type <= UnitType.kUserUnits) || type == UnitType.kQuirkyEms;\n      return type >= UnitType.kEms && type < UnitType.kDegrees;\n    }\n  }, {\n    key: \"isRelativeUnit\",\n    value: function isRelativeUnit(type) {\n      return type === UnitType.kPercentage || type === UnitType.kEms ||\n      // type === UnitType.kExs ||\n      type === UnitType.kRems\n      // type === UnitType.kChs ||\n      // this.isViewportPercentageLength(type) ||\n      // this.isContainerPercentageLength(type)\n      ;\n    }\n  }, {\n    key: \"isTime\",\n    value: function isTime(unit) {\n      return unit === UnitType.kSeconds || unit === UnitType.kMilliseconds;\n    }\n\n    // static isFrequency(unit: UnitType) {\n    //   return unit == UnitType.kHertz || unit == UnitType.kKilohertz;\n    // }\n\n    // static isResolution(type: UnitType) {\n    //   return type >= UnitType.kDotsPerPixel && type <= UnitType.kDotsPerCentimeter;\n    // }\n\n    // static isFlex(unit: UnitType) {\n    //   return unit === UnitType.kFraction;\n    // }\n  }]);\n}();\n\n/**\n * @see https://drafts.css-houdini.org/css-typed-om-1/#dom-csscolorvalue-colorspace\n */\n\n/**\n * CSSColorValue is the base class used for the various CSS color interfaces.\n *\n * @see https://drafts.css-houdini.org/css-typed-om-1/#colorvalue-objects\n */\nvar CSSColorValue = /*#__PURE__*/function (_CSSStyleValue) {\n  function CSSColorValue(colorSpace) {\n    var _this;\n    _classCallCheck(this, CSSColorValue);\n    _this = _callSuper(this, CSSColorValue);\n    _this.colorSpace = colorSpace;\n    return _this;\n  }\n  _inherits(CSSColorValue, _CSSStyleValue);\n  return _createClass(CSSColorValue, [{\n    key: \"getType\",\n    value: function getType() {\n      return CSSStyleValueType.kColorType;\n    }\n\n    /**\n     * @see https://drafts.css-houdini.org/css-typed-om-1/#dom-csscolorvalue-to\n     */\n  }, {\n    key: \"to\",\n    value: function to(colorSpace) {\n      return this;\n    }\n  }]);\n}(CSSStyleValue);\n\nvar GradientType = /*#__PURE__*/function (GradientType) {\n  GradientType[GradientType[\"Constant\"] = 0] = \"Constant\";\n  GradientType[GradientType[\"LinearGradient\"] = 1] = \"LinearGradient\";\n  GradientType[GradientType[\"RadialGradient\"] = 2] = \"RadialGradient\";\n  return GradientType;\n}({});\nvar CSSGradientValue = /*#__PURE__*/function (_CSSStyleValue) {\n  function CSSGradientValue(type, value) {\n    var _this;\n    _classCallCheck(this, CSSGradientValue);\n    _this = _callSuper(this, CSSGradientValue);\n    _this.type = type;\n    _this.value = value;\n    return _this;\n  }\n  _inherits(CSSGradientValue, _CSSStyleValue);\n  return _createClass(CSSGradientValue, [{\n    key: \"clone\",\n    value: function clone() {\n      return new CSSGradientValue(this.type, this.value);\n    }\n  }, {\n    key: \"buildCSSText\",\n    value: function buildCSSText(n, p, result) {\n      return result;\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return CSSStyleValueType.kColorType;\n    }\n  }]);\n}(CSSStyleValue);\n\n/**\n * CSSKeywordValue represents CSS Values that are specified as keywords\n * eg. 'initial'\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSKeywordValue\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/cssom/css_keyword_value.idl\n */\nvar CSSKeywordValue = /*#__PURE__*/function (_CSSStyleValue) {\n  function CSSKeywordValue(value) {\n    var _this;\n    _classCallCheck(this, CSSKeywordValue);\n    _this = _callSuper(this, CSSKeywordValue);\n    _this.value = value;\n    return _this;\n  }\n  _inherits(CSSKeywordValue, _CSSStyleValue);\n  return _createClass(CSSKeywordValue, [{\n    key: \"clone\",\n    value: function clone() {\n      return new CSSKeywordValue(this.value);\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return CSSStyleValueType.kKeywordType;\n    }\n  }, {\n    key: \"buildCSSText\",\n    value: function buildCSSText(n, p, result) {\n      return result + this.value;\n    }\n  }]);\n}(CSSStyleValue);\n\nvar formatInfinityOrNaN = function formatInfinityOrNaN(number) {\n  var suffix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var result = '';\n  if (!Number.isFinite(number)) {\n    if (number > 0) result = 'infinity';else result = '-infinity';\n  } else {\n    result = 'NaN';\n  }\n  return result += suffix;\n};\nvar toCanonicalUnit = function toCanonicalUnit(unit) {\n  return canonicalUnitTypeForCategory(unitTypeToUnitCategory(unit));\n};\n\n/**\n * CSSNumericValue is the base class for numeric and length typed CSS Values.\n * @see https://drafts.css-houdini.org/css-typed-om/#numeric-objects\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSNumericValue\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/cssom/css_numeric_value.idl\n */\n\n/**\n * Represents numeric values that can be expressed as a single number plus a\n * unit (or a naked number or percentage).\n * @see https://drafts.css-houdini.org/css-typed-om/#cssunitvalue\n */\nvar CSSUnitValue = /*#__PURE__*/function (_CSSStyleValue) {\n  function CSSUnitValue(value) {\n    var _this;\n    var unitOrName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : UnitType.kNumber;\n    _classCallCheck(this, CSSUnitValue);\n    _this = _callSuper(this, CSSUnitValue);\n    var unit;\n    if (typeof unitOrName === 'string') {\n      unit = unitFromName(unitOrName);\n    } else {\n      unit = unitOrName;\n    }\n    _this.unit = unit;\n    _this.value = value;\n    return _this;\n  }\n  _inherits(CSSUnitValue, _CSSStyleValue);\n  return _createClass(CSSUnitValue, [{\n    key: \"clone\",\n    value: function clone() {\n      return new CSSUnitValue(this.value, this.unit);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(other) {\n      var other_unit_value = other;\n      return this.value === other_unit_value.value && this.unit === other_unit_value.unit;\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return CSSStyleValueType.kUnitType;\n    }\n  }, {\n    key: \"convertTo\",\n    value: function convertTo(target_unit) {\n      if (this.unit === target_unit) {\n        return new CSSUnitValue(this.value, this.unit);\n      }\n\n      // Instead of defining the scale factors for every unit to every other unit,\n      // we simply convert to the canonical unit and back since we already have\n      // the scale factors for canonical units.\n      var canonical_unit = toCanonicalUnit(this.unit);\n      if (canonical_unit !== toCanonicalUnit(target_unit) || canonical_unit === UnitType.kUnknown) {\n        return null;\n      }\n      var scale_factor = conversionToCanonicalUnitsScaleFactor(this.unit) / conversionToCanonicalUnitsScaleFactor(target_unit);\n      return new CSSUnitValue(this.value * scale_factor, target_unit);\n    }\n  }, {\n    key: \"buildCSSText\",\n    value: function buildCSSText(n, p, result) {\n      var text;\n      switch (this.unit) {\n        case UnitType.kUnknown:\n          // FIXME\n          break;\n        case UnitType.kInteger:\n          text = Number(this.value).toFixed(0);\n          break;\n        case UnitType.kNumber:\n        case UnitType.kPercentage:\n        case UnitType.kEms:\n        // case UnitType.kQuirkyEms:\n        // case UnitType.kExs:\n        case UnitType.kRems:\n        // case UnitType.kChs:\n        case UnitType.kPixels:\n        // case UnitType.kCentimeters:\n        // case UnitType.kDotsPerPixel:\n        // case UnitType.kDotsPerInch:\n        // case UnitType.kDotsPerCentimeter:\n        // case UnitType.kMillimeters:\n        // case UnitType.kQuarterMillimeters:\n        // case UnitType.kInches:\n        // case UnitType.kPoints:\n        // case UnitType.kPicas:\n        // case UnitType.kUserUnits:\n        case UnitType.kDegrees:\n        case UnitType.kRadians:\n        case UnitType.kGradians:\n        case UnitType.kMilliseconds:\n        case UnitType.kSeconds:\n        // case UnitType.kHertz:\n        // case UnitType.kKilohertz:\n        case UnitType.kTurns:\n          {\n            // case UnitType.kContainerMax: { // case UnitType.kContainerMin: // case UnitType.kContainerBlockSize: // case UnitType.kContainerInlineSize: // case UnitType.kContainerHeight: // case UnitType.kContainerWidth: // case UnitType.kDynamicViewportMax: // case UnitType.kDynamicViewportMin: // case UnitType.kDynamicViewportBlockSize: // case UnitType.kDynamicViewportInlineSize: // case UnitType.kDynamicViewportHeight: // case UnitType.kDynamicViewportWidth: // case UnitType.kLargeViewportMax: // case UnitType.kLargeViewportMin: // case UnitType.kLargeViewportBlockSize: // case UnitType.kLargeViewportInlineSize: // case UnitType.kLargeViewportHeight: // case UnitType.kLargeViewportWidth: // case UnitType.kSmallViewportMax: // case UnitType.kSmallViewportMin: // case UnitType.kSmallViewportBlockSize: // case UnitType.kSmallViewportInlineSize: // case UnitType.kSmallViewportHeight: // case UnitType.kSmallViewportWidth: // case UnitType.kViewportMax: // case UnitType.kViewportMin: // case UnitType.kViewportBlockSize: // case UnitType.kViewportInlineSize: // case UnitType.kViewportHeight: // case UnitType.kViewportWidth: // case UnitType.kFraction:\n            var kMinInteger = -999999;\n            var kMaxInteger = 999999;\n            var value = this.value;\n            var unit = unitTypeToString(this.unit);\n            if (value < kMinInteger || value > kMaxInteger) {\n              var _unit = unitTypeToString(this.unit);\n              if (!Number.isFinite(value) || Number.isNaN(value)) {\n                text = formatInfinityOrNaN(value, _unit);\n              } else {\n                text = value + (_unit || '');\n              }\n            } else {\n              text = \"\".concat(value).concat(unit);\n            }\n          }\n      }\n      result += text;\n      return result;\n    }\n  }]);\n}(CSSStyleValue);\nvar Opx = new CSSUnitValue(0, 'px');\nnew CSSUnitValue(1, 'px');\nvar Odeg = new CSSUnitValue(0, 'deg');\n\n/**\n * The CSSRGB class represents the CSS rgb()/rgba() functions.\n *\n * @see https://drafts.css-houdini.org/css-typed-om-1/#cssrgb\n */\nvar CSSRGB = /*#__PURE__*/function (_CSSColorValue) {\n  function CSSRGB(r, g, b) {\n    var _this;\n    var alpha = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    var isNone = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    _classCallCheck(this, CSSRGB);\n    _this = _callSuper(this, CSSRGB, ['rgb']);\n    _this.r = r;\n    _this.g = g;\n    _this.b = b;\n    _this.alpha = alpha;\n    _this.isNone = isNone;\n    return _this;\n  }\n  _inherits(CSSRGB, _CSSColorValue);\n  return _createClass(CSSRGB, [{\n    key: \"clone\",\n    value: function clone() {\n      return new CSSRGB(this.r, this.g, this.b, this.alpha);\n    }\n  }, {\n    key: \"buildCSSText\",\n    value: function buildCSSText(n, p, result) {\n      return \"\".concat(result, \"rgba(\").concat(this.r, \",\").concat(this.g, \",\").concat(this.b, \",\").concat(this.alpha, \")\");\n    }\n  }]);\n}(CSSColorValue);\n\n/**\n * CSSKeywordValue\n */\nvar unsetKeywordValue = new CSSKeywordValue('unset');\nvar initialKeywordValue = new CSSKeywordValue('initial');\nvar inheritKeywordValue = new CSSKeywordValue('inherit');\nvar keywordCache = {\n  '': unsetKeywordValue,\n  unset: unsetKeywordValue,\n  initial: initialKeywordValue,\n  inherit: inheritKeywordValue\n};\nvar getOrCreateKeyword = function getOrCreateKeyword(name) {\n  if (!keywordCache[name]) {\n    keywordCache[name] = new CSSKeywordValue(name);\n  }\n  return keywordCache[name];\n};\n\n/**\n * CSSColor\n */\nvar noneColor = new CSSRGB(0, 0, 0, 0, true);\nvar transparentColor = new CSSRGB(0, 0, 0, 0);\nvar getOrCreateRGBA = memoize(function (r, g, b, a) {\n  return new CSSRGB(r, g, b, a);\n}, function (r, g, b, a) {\n  return \"rgba(\".concat(r, \",\").concat(g, \",\").concat(b, \",\").concat(a, \")\");\n});\n\n// export const getOrCreateUnitValue = memoize(\n//   (value: number, unitOrName: UnitType | string = UnitType.kNumber) => {\n//     return new CSSUnitValue(value, unitOrName);\n//   },\n//   (value: number, unitOrName: UnitType | string = UnitType.kNumber) => {\n//     return `${value}${unitOrName}`;\n//   },\n// );\n\nvar getOrCreateUnitValue = function getOrCreateUnitValue(value) {\n  var unitOrName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : UnitType.kNumber;\n  return new CSSUnitValue(value, unitOrName);\n};\nnew CSSUnitValue(50, '%');\n\n/**\n * borrow from gradient-parser, but we delete some browser compatible prefix such as `-webkit-`\n * @see https://github.com/rafaelcaricio/gradient-parser\n */\n\nfunction colorStopToString(colorStop) {\n  var type = colorStop.type,\n    value = colorStop.value;\n  if (type === 'hex') {\n    return \"#\".concat(value);\n  }\n  if (type === 'literal') {\n    return value;\n  }\n  if (type === 'rgb') {\n    return \"rgb(\".concat(value.join(','), \")\");\n  }\n  return \"rgba(\".concat(value.join(','), \")\");\n}\nvar parseGradient$1 = function () {\n  var tokens = {\n    linearGradient: /^(linear\\-gradient)/i,\n    repeatingLinearGradient: /^(repeating\\-linear\\-gradient)/i,\n    radialGradient: /^(radial\\-gradient)/i,\n    repeatingRadialGradient: /^(repeating\\-radial\\-gradient)/i,\n    /**\n     * @see https://projects.verou.me/conic-gradient/\n     */\n    conicGradient: /^(conic\\-gradient)/i,\n    sideOrCorner: /^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,\n    extentKeywords: /^(closest\\-side|closest\\-corner|farthest\\-side|farthest\\-corner|contain|cover)/,\n    positionKeywords: /^(left|center|right|top|bottom)/i,\n    pixelValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))px/,\n    percentageValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))\\%/,\n    emValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))em/,\n    angleValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))deg/,\n    startCall: /^\\(/,\n    endCall: /^\\)/,\n    comma: /^,/,\n    hexColor: /^\\#([0-9a-fA-F]+)/,\n    literalColor: /^([a-zA-Z]+)/,\n    rgbColor: /^rgb/i,\n    rgbaColor: /^rgba/i,\n    number: /^(([0-9]*\\.[0-9]+)|([0-9]+\\.?))/\n  };\n  var input = '';\n  function error(msg) {\n    throw new Error(\"\".concat(input, \": \").concat(msg));\n  }\n  function getAST() {\n    var ast = matchListDefinitions();\n    if (input.length > 0) {\n      error('Invalid input not EOF');\n    }\n    return ast;\n  }\n  function matchListDefinitions() {\n    return matchListing(matchDefinition);\n  }\n  function matchDefinition() {\n    return matchGradient('linear-gradient', tokens.linearGradient, matchLinearOrientation) || matchGradient('repeating-linear-gradient', tokens.repeatingLinearGradient, matchLinearOrientation) || matchGradient('radial-gradient', tokens.radialGradient, matchListRadialOrientations) || matchGradient('repeating-radial-gradient', tokens.repeatingRadialGradient, matchListRadialOrientations) || matchGradient('conic-gradient', tokens.conicGradient, matchListRadialOrientations);\n  }\n  function matchGradient(gradientType, pattern, orientationMatcher) {\n    return matchCall(pattern, function (captures) {\n      var orientation = orientationMatcher();\n      if (orientation) {\n        if (!scan(tokens.comma)) {\n          error('Missing comma before color stops');\n        }\n      }\n      return {\n        type: gradientType,\n        orientation: orientation,\n        colorStops: matchListing(matchColorStop)\n      };\n    });\n  }\n  function matchCall(pattern, callback) {\n    var captures = scan(pattern);\n    if (captures) {\n      if (!scan(tokens.startCall)) {\n        error('Missing (');\n      }\n      var result = callback(captures);\n      if (!scan(tokens.endCall)) {\n        error('Missing )');\n      }\n      return result;\n    }\n  }\n  function matchLinearOrientation() {\n    return matchSideOrCorner() || matchAngle();\n  }\n  function matchSideOrCorner() {\n    return match('directional', tokens.sideOrCorner, 1);\n  }\n  function matchAngle() {\n    return match('angular', tokens.angleValue, 1);\n  }\n  function matchListRadialOrientations() {\n    var radialOrientations;\n    var radialOrientation = matchRadialOrientation();\n    var lookaheadCache;\n    if (radialOrientation) {\n      radialOrientations = [];\n      radialOrientations.push(radialOrientation);\n      lookaheadCache = input;\n      if (scan(tokens.comma)) {\n        radialOrientation = matchRadialOrientation();\n        if (radialOrientation) {\n          radialOrientations.push(radialOrientation);\n        } else {\n          input = lookaheadCache;\n        }\n      }\n    }\n    return radialOrientations;\n  }\n  function matchRadialOrientation() {\n    var radialType = matchCircle() || matchEllipse();\n    if (radialType) {\n      // @ts-ignore\n      radialType.at = matchAtPosition();\n    } else {\n      var extent = matchExtentKeyword();\n      if (extent) {\n        radialType = extent;\n        var positionAt = matchAtPosition();\n        if (positionAt) {\n          // @ts-ignore\n          radialType.at = positionAt;\n        }\n      } else {\n        var defaultPosition = matchPositioning();\n        if (defaultPosition) {\n          radialType = {\n            type: 'default-radial',\n            // @ts-ignore\n            at: defaultPosition\n          };\n        }\n      }\n    }\n    return radialType;\n  }\n  function matchCircle() {\n    var circle = match('shape', /^(circle)/i, 0);\n    if (circle) {\n      // @ts-ignore\n      circle.style = matchLength() || matchExtentKeyword();\n    }\n    return circle;\n  }\n  function matchEllipse() {\n    var ellipse = match('shape', /^(ellipse)/i, 0);\n    if (ellipse) {\n      // @ts-ignore\n      ellipse.style = matchDistance() || matchExtentKeyword();\n    }\n    return ellipse;\n  }\n  function matchExtentKeyword() {\n    return match('extent-keyword', tokens.extentKeywords, 1);\n  }\n  function matchAtPosition() {\n    if (match('position', /^at/, 0)) {\n      var positioning = matchPositioning();\n      if (!positioning) {\n        error('Missing positioning value');\n      }\n      return positioning;\n    }\n  }\n  function matchPositioning() {\n    var location = matchCoordinates();\n    if (location.x || location.y) {\n      return {\n        type: 'position',\n        value: location\n      };\n    }\n  }\n  function matchCoordinates() {\n    return {\n      x: matchDistance(),\n      y: matchDistance()\n    };\n  }\n  function matchListing(matcher) {\n    var captures = matcher();\n    var result = [];\n    if (captures) {\n      result.push(captures);\n      while (scan(tokens.comma)) {\n        captures = matcher();\n        if (captures) {\n          result.push(captures);\n        } else {\n          error('One extra comma');\n        }\n      }\n    }\n    return result;\n  }\n  function matchColorStop() {\n    var color = matchColor();\n    if (!color) {\n      error('Expected color definition');\n    }\n    color.length = matchDistance();\n    return color;\n  }\n  function matchColor() {\n    return matchHexColor() || matchRGBAColor() || matchRGBColor() || matchLiteralColor();\n  }\n  function matchLiteralColor() {\n    return match('literal', tokens.literalColor, 0);\n  }\n  function matchHexColor() {\n    return match('hex', tokens.hexColor, 1);\n  }\n  function matchRGBColor() {\n    return matchCall(tokens.rgbColor, function () {\n      return {\n        type: 'rgb',\n        value: matchListing(matchNumber)\n      };\n    });\n  }\n  function matchRGBAColor() {\n    return matchCall(tokens.rgbaColor, function () {\n      return {\n        type: 'rgba',\n        value: matchListing(matchNumber)\n      };\n    });\n  }\n  function matchNumber() {\n    return scan(tokens.number)[1];\n  }\n  function matchDistance() {\n    return match('%', tokens.percentageValue, 1) || matchPositionKeyword() || matchLength();\n  }\n  function matchPositionKeyword() {\n    return match('position-keyword', tokens.positionKeywords, 1);\n  }\n  function matchLength() {\n    return match('px', tokens.pixelValue, 1) || match('em', tokens.emValue, 1);\n  }\n  function match(type, pattern, captureIndex) {\n    var captures = scan(pattern);\n    if (captures) {\n      return {\n        type: type,\n        value: captures[captureIndex]\n      };\n    }\n  }\n  function scan(regexp) {\n    var blankCaptures = /^[\\n\\r\\t\\s]+/.exec(input);\n    if (blankCaptures) {\n      consume(blankCaptures[0].length);\n    }\n    var captures = regexp.exec(input);\n    if (captures) {\n      consume(captures[0].length);\n    }\n    return captures;\n  }\n  function consume(size) {\n    input = input.substring(size);\n  }\n  return function (code) {\n    input = code;\n    return getAST();\n  };\n}();\nfunction computeLinearGradient(min, width, height, angle) {\n  var rad = deg2rad(angle.value);\n  var rx = 0;\n  var ry = 0;\n  var rcx = rx + width / 2;\n  var rcy = ry + height / 2;\n  // get the length of gradient line\n  // @see https://observablehq.com/@danburzo/css-gradient-line\n  var length = Math.abs(width * Math.cos(rad)) + Math.abs(height * Math.sin(rad));\n  var x1 = min[0] + rcx - Math.cos(rad) * length / 2;\n  var y1 = min[1] + rcy - Math.sin(rad) * length / 2;\n  var x2 = min[0] + rcx + Math.cos(rad) * length / 2;\n  var y2 = min[1] + rcy + Math.sin(rad) * length / 2;\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2\n  };\n}\nfunction computeRadialGradient(min, width, height, cx, cy, size) {\n  // 'px'\n  var x = cx.value;\n  var y = cy.value;\n\n  // TODO: 'em'\n\n  // '%'\n  if (cx.unit === UnitType.kPercentage) {\n    x = cx.value / 100 * width;\n  }\n  if (cy.unit === UnitType.kPercentage) {\n    y = cy.value / 100 * height;\n  }\n\n  // default to farthest-side\n  var r = Math.max(distanceSquareRoot([0, 0], [x, y]), distanceSquareRoot([0, height], [x, y]), distanceSquareRoot([width, height], [x, y]), distanceSquareRoot([width, 0], [x, y]));\n  if (size) {\n    if (size instanceof CSSUnitValue) {\n      r = size.value;\n    } else if (size instanceof CSSKeywordValue) {\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Images/Using_CSS_gradients#example_closest-side_for_circles\n      if (size.value === 'closest-side') {\n        r = Math.min(x, width - x, y, height - y);\n      } else if (size.value === 'farthest-side') {\n        r = Math.max(x, width - x, y, height - y);\n      } else if (size.value === 'closest-corner') {\n        r = Math.min(distanceSquareRoot([0, 0], [x, y]), distanceSquareRoot([0, height], [x, y]), distanceSquareRoot([width, height], [x, y]), distanceSquareRoot([width, 0], [x, y]));\n      }\n    }\n  }\n  return {\n    x: x + min[0],\n    y: y + min[1],\n    r: r\n  };\n}\n\nvar regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\nfunction spaceColorStops(colorStops) {\n  var _colorStops$length;\n  var length = colorStops.length;\n  colorStops[length - 1].length = (_colorStops$length = colorStops[length - 1].length) !== null && _colorStops$length !== void 0 ? _colorStops$length : {\n    type: '%',\n    value: '100'\n  };\n  if (length > 1) {\n    var _colorStops$0$length;\n    colorStops[0].length = (_colorStops$0$length = colorStops[0].length) !== null && _colorStops$0$length !== void 0 ? _colorStops$0$length : {\n      type: '%',\n      value: '0'\n    };\n  }\n  var previousIndex = 0;\n  var previousOffset = Number(colorStops[0].length.value);\n  for (var i = 1; i < length; i++) {\n    var _colorStops$i$length;\n    // support '%' & 'px'\n    var offset = (_colorStops$i$length = colorStops[i].length) === null || _colorStops$i$length === void 0 ? void 0 : _colorStops$i$length.value;\n    if (!isNil(offset) && !isNil(previousOffset)) {\n      for (var j = 1; j < i - previousIndex; j++) colorStops[previousIndex + j].length = {\n        type: '%',\n        value: \"\".concat(previousOffset + (Number(offset) - previousOffset) * j / (i - previousIndex))\n      };\n      previousIndex = i;\n      previousOffset = Number(offset);\n    }\n  }\n}\n\n// The position of the gradient line's starting point.\n// different from CSS side(to top) @see https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/linear-gradient#values\nvar SideOrCornerToDegMap = {\n  left: 270 - 90,\n  top: 0 - 90,\n  bottom: 180 - 90,\n  right: 90 - 90,\n  'left top': 315 - 90,\n  'top left': 315 - 90,\n  'left bottom': 225 - 90,\n  'bottom left': 225 - 90,\n  'right top': 45 - 90,\n  'top right': 45 - 90,\n  'right bottom': 135 - 90,\n  'bottom right': 135 - 90\n};\nvar angleToDeg = memoize(function (orientation) {\n  var angle;\n  if (orientation.type === 'angular') {\n    angle = Number(orientation.value);\n  } else {\n    angle = SideOrCornerToDegMap[orientation.value] || 0;\n  }\n  return getOrCreateUnitValue(angle, 'deg');\n});\nvar positonToCSSUnitValue = memoize(function (position) {\n  var cx = 50;\n  var cy = 50;\n  var unitX = '%';\n  var unitY = '%';\n  if ((position === null || position === void 0 ? void 0 : position.type) === 'position') {\n    var _position$value = position.value,\n      x = _position$value.x,\n      y = _position$value.y;\n    if ((x === null || x === void 0 ? void 0 : x.type) === 'position-keyword') {\n      if (x.value === 'left') {\n        cx = 0;\n      } else if (x.value === 'center') {\n        cx = 50;\n      } else if (x.value === 'right') {\n        cx = 100;\n      } else if (x.value === 'top') {\n        cy = 0;\n      } else if (x.value === 'bottom') {\n        cy = 100;\n      }\n    }\n    if ((y === null || y === void 0 ? void 0 : y.type) === 'position-keyword') {\n      if (y.value === 'left') {\n        cx = 0;\n      } else if (y.value === 'center') {\n        cy = 50;\n      } else if (y.value === 'right') {\n        cx = 100;\n      } else if (y.value === 'top') {\n        cy = 0;\n      } else if (y.value === 'bottom') {\n        cy = 100;\n      }\n    }\n    if ((x === null || x === void 0 ? void 0 : x.type) === 'px' || (x === null || x === void 0 ? void 0 : x.type) === '%' || (x === null || x === void 0 ? void 0 : x.type) === 'em') {\n      unitX = x === null || x === void 0 ? void 0 : x.type;\n      cx = Number(x.value);\n    }\n    if ((y === null || y === void 0 ? void 0 : y.type) === 'px' || (y === null || y === void 0 ? void 0 : y.type) === '%' || (y === null || y === void 0 ? void 0 : y.type) === 'em') {\n      unitY = y === null || y === void 0 ? void 0 : y.type;\n      cy = Number(y.value);\n    }\n  }\n  return {\n    cx: getOrCreateUnitValue(cx, unitX),\n    cy: getOrCreateUnitValue(cy, unitY)\n  };\n});\nvar parseGradient = memoize(function (colorStr) {\n  if (colorStr.indexOf('linear') > -1 || colorStr.indexOf('radial') > -1) {\n    var ast = parseGradient$1(colorStr);\n    return ast.map(function (_ref) {\n      var type = _ref.type,\n        orientation = _ref.orientation,\n        colorStops = _ref.colorStops;\n      spaceColorStops(colorStops);\n      var steps = colorStops.map(function (colorStop) {\n        // TODO: only support % for now, should calc percentage of axis length when using px/em\n        return {\n          offset: getOrCreateUnitValue(Number(colorStop.length.value), '%'),\n          color: colorStopToString(colorStop)\n        };\n      });\n      if (type === 'linear-gradient') {\n        return new CSSGradientValue(GradientType.LinearGradient, {\n          angle: orientation ? angleToDeg(orientation) : Odeg,\n          steps: steps\n        });\n      }\n      if (type === 'radial-gradient') {\n        if (!orientation) {\n          orientation = [{\n            type: 'shape',\n            value: 'circle'\n          }];\n        }\n        if (orientation[0].type === 'shape' && orientation[0].value === 'circle') {\n          var _positonToCSSUnitValu = positonToCSSUnitValue(orientation[0].at),\n            cx = _positonToCSSUnitValu.cx,\n            cy = _positonToCSSUnitValu.cy;\n          var size;\n          if (orientation[0].style) {\n            var _orientation$0$style = orientation[0].style,\n              _type = _orientation$0$style.type,\n              value = _orientation$0$style.value;\n            if (_type === 'extent-keyword') {\n              size = getOrCreateKeyword(value);\n            } else {\n              size = getOrCreateUnitValue(value, _type);\n            }\n          }\n          return new CSSGradientValue(GradientType.RadialGradient, {\n            cx: cx,\n            cy: cy,\n            size: size,\n            steps: steps\n          });\n        }\n        // TODO: support ellipse shape\n        // TODO: repeating-linear-gradient & repeating-radial-gradient\n        // } else if (type === 'repeating-linear-gradient') {\n        // } else if (type === 'repeating-radial-gradient') {\n      }\n      return undefined;\n    });\n  }\n\n  // legacy format, should be deprecated later\n  var type = colorStr[0];\n  if (colorStr[1] === '(' || colorStr[2] === '(') {\n    if (type === 'l') {\n      var arr = regexLG.exec(colorStr);\n      if (arr) {\n        var _arr$2$match;\n        var steps = ((_arr$2$match = arr[2].match(regexColorStop)) === null || _arr$2$match === void 0 ? void 0 : _arr$2$match.map(function (stop) {\n          return stop.split(':');\n        })) || [];\n        return [new CSSGradientValue(GradientType.LinearGradient, {\n          angle: getOrCreateUnitValue(parseFloat(arr[1]), 'deg'),\n          steps: steps.map(function (_ref2) {\n            var _ref3 = _slicedToArray(_ref2, 2),\n              offset = _ref3[0],\n              color = _ref3[1];\n            return {\n              offset: getOrCreateUnitValue(Number(offset) * 100, '%'),\n              color: color\n            };\n          })\n        })];\n      }\n    } else if (type === 'r') {\n      var parsedRadialGradient = parseRadialGradient(colorStr);\n      if (parsedRadialGradient) {\n        if (isString(parsedRadialGradient)) {\n          colorStr = parsedRadialGradient;\n        } else {\n          return [new CSSGradientValue(GradientType.RadialGradient, parsedRadialGradient)];\n        }\n      }\n    } else if (type === 'p') {\n      return parsePattern(colorStr);\n    }\n  }\n});\nfunction parseRadialGradient(gradientStr) {\n  var arr = regexRG.exec(gradientStr);\n  if (arr) {\n    var _arr$4$match;\n    var steps = ((_arr$4$match = arr[4].match(regexColorStop)) === null || _arr$4$match === void 0 ? void 0 : _arr$4$match.map(function (stop) {\n      return stop.split(':');\n    })) || [];\n    return {\n      cx: getOrCreateUnitValue(50, '%'),\n      cy: getOrCreateUnitValue(50, '%'),\n      steps: steps.map(function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 2),\n          offset = _ref5[0],\n          color = _ref5[1];\n        return {\n          offset: getOrCreateUnitValue(Number(offset) * 100, '%'),\n          color: color\n        };\n      })\n    };\n  }\n  return null;\n}\nfunction parsePattern(patternStr) {\n  var arr = regexPR.exec(patternStr);\n  if (arr) {\n    var repetition = arr[1];\n    var src = arr[2];\n    switch (repetition) {\n      case 'a':\n        repetition = 'repeat';\n        break;\n      case 'x':\n        repetition = 'repeat-x';\n        break;\n      case 'y':\n        repetition = 'repeat-y';\n        break;\n      case 'n':\n        repetition = 'no-repeat';\n        break;\n      default:\n        repetition = 'no-repeat';\n    }\n    return {\n      image: src,\n      // @ts-ignore\n      repetition: repetition\n    };\n  }\n  return null;\n}\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createPattern\n */\n\nfunction isCSSGradientValue(object) {\n  return !!object.type && !!object.value;\n}\nfunction isPattern(object) {\n  return object && !!object.image;\n}\nfunction isCSSRGB(object) {\n  return object && !isNil(object.r) && !isNil(object.g) && !isNil(object.b);\n}\n\n/**\n * @see https://github.com/WebKit/WebKit/blob/main/Source/WebCore/css/parser/CSSParser.cpp#L97\n */\nvar parseColor = memoize(function (colorStr) {\n  if (isPattern(colorStr)) {\n    return _objectSpread({\n      repetition: 'repeat'\n    }, colorStr);\n  }\n  if (isNil(colorStr)) {\n    colorStr = '';\n  }\n  if (colorStr === 'transparent') {\n    // transparent black\n    return transparentColor;\n  }\n  if (colorStr === 'currentColor') {\n    // @see https://github.com/adobe-webplatform/Snap.svg/issues/526\n    colorStr = 'black';\n  } else if (colorStr === 'none') {\n    return noneColor;\n  }\n\n  // support CSS gradient syntax\n  var g = parseGradient(colorStr);\n  if (g) {\n    return g;\n  }\n\n  // constants\n  var color$1 = color(colorStr);\n  var rgba = [0, 0, 0, 0];\n  if (color$1 !== null) {\n    rgba[0] = color$1.r || 0;\n    rgba[1] = color$1.g || 0;\n    rgba[2] = color$1.b || 0;\n    rgba[3] = color$1.opacity;\n  }\n\n  // return new CSSRGB(...rgba);\n  return getOrCreateRGBA.apply(void 0, rgba);\n});\nfunction mergeColors(left, right) {\n  // only support constant value, exclude gradient & pattern\n  if (!isCSSRGB(left) || !isCSSRGB(right)) {\n    return;\n  }\n  return [[Number(left.r), Number(left.g), Number(left.b), Number(left.alpha)], [Number(right.r), Number(right.g), Number(right.b), Number(right.alpha)], function (color) {\n    var rgba = color.slice();\n    if (rgba[3]) {\n      for (var i = 0; i < 3; i++) rgba[i] = Math.round(clamp(rgba[i], 0, 255));\n    }\n    rgba[3] = clamp(rgba[3], 0, 1);\n    return \"rgba(\".concat(rgba.join(','), \")\");\n  }];\n}\n\nfunction parseDimension(unitRegExp, string) {\n  if (isNil(string)) {\n    return getOrCreateUnitValue(0, 'px');\n  }\n  string = \"\".concat(string).trim().toLowerCase();\n  if (isFinite(Number(string))) {\n    if ('px'.search(unitRegExp) >= 0) {\n      return getOrCreateUnitValue(Number(string), 'px');\n    }\n    if ('deg'.search(unitRegExp) >= 0) {\n      return getOrCreateUnitValue(Number(string), 'deg');\n    }\n  }\n  var matchedUnits = [];\n  string = string.replace(unitRegExp, function (match) {\n    matchedUnits.push(match);\n    return \"U\".concat(match);\n  });\n  var taggedUnitRegExp = \"U(\".concat(unitRegExp.source, \")\");\n  return matchedUnits.map(function (unit) {\n    return getOrCreateUnitValue(Number(string.replace(new RegExp(\"U\".concat(unit), 'g'), '').replace(new RegExp(taggedUnitRegExp, 'g'), '*0')), unit);\n  })[0];\n}\n\n/**\n * <length>\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/length\n * length with only absolute unit, eg. 1px\n */\nvar parseLengthUnmemoize = function parseLengthUnmemoize(css) {\n  return parseDimension(new RegExp('px', 'g'), css);\n};\nvar parseLength = memoize(parseLengthUnmemoize);\n\n/**\n * <percentage>\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/percentage\n */\nvar parserPercentageUnmemoize = function parserPercentageUnmemoize(css) {\n  return parseDimension(new RegExp('%', 'g'), css);\n};\nmemoize(parserPercentageUnmemoize);\n\n/**\n * length with absolute or relative unit,\n * eg. 1px, 0.7em, 50%, calc(100% - 200px);\n *\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/length-percentage\n */\nvar parseLengthOrPercentageUnmemoize = function parseLengthOrPercentageUnmemoize(css) {\n  if (isNumber(css) || isFinite(Number(css))) {\n    // Number(css) is NaN\n    return getOrCreateUnitValue(Number(css) || 0, 'px');\n    // return Number(css);\n  }\n  return parseDimension(new RegExp('px|%|em|rem', 'g'), css);\n};\nvar parseLengthOrPercentage = memoize(parseLengthOrPercentageUnmemoize);\nvar parseAngleUnmemoize = function parseAngleUnmemoize(css) {\n  return parseDimension(new RegExp('deg|rad|grad|turn', 'g'), css);\n};\nvar parseAngle = memoize(parseAngleUnmemoize);\n\n/**\n * merge CSSUnitValue\n *\n * @example\n * 10px + 20px = 30px\n * 10deg + 10rad\n * 10% + 20% = 30%\n */\nfunction mergeDimensions(left, right, target, nonNegative) {\n  var index = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  var unit = '';\n  var leftValue = left.value || 0;\n  var rightValue = right.value || 0;\n  var canonicalUnit = toCanonicalUnit(left.unit);\n  var leftCanonicalUnitValue = left.convertTo(canonicalUnit);\n  var rightCanonicalUnitValue = right.convertTo(canonicalUnit);\n  if (leftCanonicalUnitValue && rightCanonicalUnitValue) {\n    leftValue = leftCanonicalUnitValue.value;\n    rightValue = rightCanonicalUnitValue.value;\n    unit = unitTypeToString(left.unit);\n  }\n  // format '%' to 'px'\n  else if (CSSUnitValue.isLength(left.unit) || CSSUnitValue.isLength(right.unit)) {\n    leftValue = convertPercentUnit(left, index, target);\n    rightValue = convertPercentUnit(right, index, target);\n    unit = 'px';\n  }\n  return [leftValue, rightValue, function (value) {\n    if (nonNegative) {\n      value = Math.max(value, 0);\n    }\n    return value + unit;\n  }];\n}\nfunction convertAngleUnit(value) {\n  var deg = 0;\n  if (value.unit === UnitType.kDegrees) {\n    deg = value.value;\n  } else if (value.unit === UnitType.kRadians) {\n    deg = rad2deg(Number(value.value));\n  } else if (value.unit === UnitType.kTurns) {\n    deg = turn2deg(Number(value.value));\n  } else if (value.value) {\n    deg = value.value;\n  }\n  return deg;\n}\nfunction parseDimensionArrayFormat(string, size) {\n  var parsed;\n  if (Array.isArray(string)) {\n    // [1, '2px', 3]\n    parsed = string.map(function (segment) {\n      return Number(segment);\n    });\n  } else if (isString(string)) {\n    parsed = string.split(' ').map(function (segment) {\n      return Number(segment);\n    });\n  } else if (isNumber(string)) {\n    parsed = [string];\n  }\n  if (size === 2) {\n    if (parsed.length === 1) {\n      return [parsed[0], parsed[0]];\n    }\n    return [parsed[0], parsed[1]];\n  }\n  if (size === 4) {\n    if (parsed.length === 1) {\n      return [parsed[0], parsed[0], parsed[0], parsed[0]];\n    }\n    if (parsed.length === 2) {\n      return [parsed[0], parsed[1], parsed[0], parsed[1]];\n    }\n    if (parsed.length === 3) {\n      return [parsed[0], parsed[1], parsed[2], parsed[1]];\n    }\n    return [parsed[0], parsed[1], parsed[2], parsed[3]];\n  }\n  if (size === 'even' && parsed.length % 2 === 1) {\n    return [].concat(_toConsumableArray(parsed), _toConsumableArray(parsed));\n  }\n  return parsed;\n}\n\n// export function mergeDimensionList(\n//   left: CSSUnitValue[],\n//   right: CSSUnitValue[],\n//   target: IElement | null,\n// ): [number[], number[], (list: number[]) => string] | undefined {\n//   if (left.length !== right.length) {\n//     return;\n//   }\n\n//   const unit = left[0].unit;\n\n//   return [\n//     left.map((l) => l.value),\n//     right.map((l) => l.value),\n//     (values: number[]) => {\n//       return values.map((n) => new CSSUnitValue(n, unit)).join(' ');\n//     },\n//   ];\n// }\n\nfunction convertPercentUnit(valueWithUnit, vec3Index, target) {\n  var useMin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  if (valueWithUnit.unit === UnitType.kPixels) {\n    return Number(valueWithUnit.value);\n  }\n  if (valueWithUnit.unit === UnitType.kPercentage && target) {\n    var bounds = target.nodeName === Shape.GROUP ? target.getLocalBounds() : target.getGeometryBounds();\n    return (useMin ? bounds.min[vec3Index] : 0) + valueWithUnit.value / 100 * bounds.halfExtents[vec3Index] * 2;\n  }\n  return 0;\n}\n\nvar parseParam = function parseParam(css) {\n  return parseDimension(/deg|rad|grad|turn|px|%/g, css);\n};\nvar supportedFilters = ['blur', 'brightness', 'drop-shadow', 'contrast', 'grayscale', 'sepia', 'saturate', 'hue-rotate', 'invert'];\nfunction parseFilter() {\n  var filterStr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  filterStr = filterStr.toLowerCase().trim();\n  if (filterStr === 'none') {\n    return [];\n  }\n  var filterRegExp = /\\s*([\\w-]+)\\(([^)]*)\\)/g;\n  var result = [];\n  var match;\n  var prevLastIndex = 0;\n  while (match = filterRegExp.exec(filterStr)) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    if (supportedFilters.indexOf(match[1]) > -1) {\n      result.push({\n        name: match[1],\n        params: match[2].split(' ').map(function (p) {\n          return parseParam(p) || parseColor(p);\n        })\n      });\n    }\n    if (filterRegExp.lastIndex === filterStr.length) {\n      return result;\n    }\n  }\n  return [];\n}\n\nfunction numberToString(x) {\n  // scale(0.00000001) -> scale(0)\n  // return x.toFixed(6).replace(/0+$/, '').replace(/\\.$/, '');\n  return x.toString();\n}\n\n/**\n * parse string or number to CSSUnitValue(numeric)\n *\n * eg.\n * * 0 -> CSSUnitValue(0)\n * * '2' -> CSSUnitValue(2)\n */\nvar parseNumberUnmemoize = function parseNumberUnmemoize(string) {\n  if (typeof string === 'number') {\n    return getOrCreateUnitValue(string);\n  }\n  if (/^\\s*[-+]?(\\d*\\.)?\\d+\\s*$/.test(string)) {\n    return getOrCreateUnitValue(Number(string));\n  }\n  return getOrCreateUnitValue(0);\n};\nvar parseNumber = memoize(parseNumberUnmemoize);\nmemoize(function (string) {\n  if (isString(string)) {\n    return string.split(' ').map(parseNumber);\n  }\n  return string.map(parseNumber);\n});\nfunction mergeNumbers(left, right) {\n  return [left, right, numberToString];\n}\nfunction clampedMergeNumbers(min, max) {\n  return function (left, right) {\n    return [left, right, function (x) {\n      return numberToString(clamp(x, min, max));\n    }];\n  };\n}\nfunction mergeNumberLists(left, right) {\n  if (left.length !== right.length) {\n    return;\n  }\n  return [left, right, function (numberList) {\n    return numberList;\n  }];\n}\n\nfunction getOrCalculatePathTotalLength(path) {\n  if (path.parsedStyle.d.totalLength === 0) {\n    path.parsedStyle.d.totalLength = getTotalLength(path.parsedStyle.d.absolutePath);\n  }\n  return path.parsedStyle.d.totalLength;\n}\nfunction getOrCalculatePolylineTotalLength(polyline) {\n  if (polyline.parsedStyle.points.totalLength === 0) {\n    polyline.parsedStyle.points.totalLength = polylineLength(polyline.parsedStyle.points.points);\n  }\n  return polyline.parsedStyle.points.totalLength;\n}\nfunction removeRedundantMCommand(path) {\n  for (var i = 0; i < path.length; i++) {\n    var prevSegment = path[i - 1];\n    var segment = path[i];\n    var cmd = segment[0];\n    if (cmd === 'M') {\n      if (prevSegment) {\n        var prevCmd = prevSegment[0];\n        var srcPoint = [segment[1], segment[2]];\n        var destPoint = void 0;\n        if (prevCmd === 'L' || prevCmd === 'M') {\n          destPoint = [prevSegment[1], prevSegment[2]];\n        } else if (prevCmd === 'C' || prevCmd === 'A' || prevCmd === 'Q') {\n          destPoint = [prevSegment[prevSegment.length - 2], prevSegment[prevSegment.length - 1]];\n        }\n        if (destPoint && isSamePoint(srcPoint, destPoint)) {\n          path.splice(i, 1);\n          i--;\n        }\n      }\n    }\n  }\n}\nfunction hasArcOrBezier(path) {\n  var hasArc = false;\n  var count = path.length;\n  for (var i = 0; i < count; i++) {\n    var params = path[i];\n    var cmd = params[0];\n    if (cmd === 'C' || cmd === 'A' || cmd === 'Q') {\n      hasArc = true;\n      break;\n    }\n  }\n  return hasArc;\n}\nfunction extractPolygons(pathArray) {\n  var polygons = [];\n  var polylines = [];\n  var points = []; //  'M'\n  for (var i = 0; i < pathArray.length; i++) {\n    var params = pathArray[i];\n    var cmd = params[0];\n    if (cmd === 'M') {\n      //  'M' \n      if (points.length) {\n        //  'Z'\n        polylines.push(points);\n        points = []; // \n      }\n      points.push([params[1], params[2]]);\n    } else if (cmd === 'Z') {\n      if (points.length) {\n        // \n        polygons.push(points);\n        points = []; // \n      }\n      //  'Z'\n    } else {\n      points.push([params[1], params[2]]);\n    }\n  }\n  //  points  polygons  polyline\n  //  M Z \n  if (points.length > 0) {\n    polylines.push(points);\n  }\n  return {\n    polygons: polygons,\n    polylines: polylines\n  };\n}\nfunction isSamePoint(point1, point2) {\n  return point1[0] === point2[0] && point1[1] === point2[1];\n}\nfunction getPathBBox(segments, lineWidth) {\n  var xArr = [];\n  var yArr = [];\n  var segmentsWithAngle = [];\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n    var currentPoint = segment.currentPoint,\n      params = segment.params,\n      prePoint = segment.prePoint;\n    var box = void 0;\n    switch (segment.command) {\n      case 'Q':\n        box = quadBox(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4]);\n        break;\n      case 'C':\n        box = cubicBox(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], params[5], params[6]);\n        break;\n      case 'A':\n        var arcParams = segment.arcParams;\n        box = arcBox(arcParams.cx, arcParams.cy, arcParams.rx, arcParams.ry, arcParams.xRotation, arcParams.startAngle, arcParams.endAngle);\n        break;\n      default:\n        xArr.push(currentPoint[0]);\n        yArr.push(currentPoint[1]);\n        break;\n    }\n    if (box) {\n      segment.box = box;\n      xArr.push(box.x, box.x + box.width);\n      yArr.push(box.y, box.y + box.height);\n    }\n    if (lineWidth && (segment.command === 'L' || segment.command === 'M') && segment.prePoint && segment.nextPoint) {\n      segmentsWithAngle.push(segment);\n    }\n  }\n  // bbox calculation should ignore NaN for path attribute\n  // ref: https://github.com/antvis/g/issues/210\n  // ref: https://github.com/antvis/G2/issues/3109\n  xArr = xArr.filter(function (item) {\n    return !Number.isNaN(item) && item !== Infinity && item !== -Infinity;\n  });\n  yArr = yArr.filter(function (item) {\n    return !Number.isNaN(item) && item !== Infinity && item !== -Infinity;\n  });\n  var minX = min(xArr);\n  var minY = min(yArr);\n  var maxX = max(xArr);\n  var maxY = max(yArr);\n  if (segmentsWithAngle.length === 0) {\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  }\n  for (var _i = 0; _i < segmentsWithAngle.length; _i++) {\n    var _segment = segmentsWithAngle[_i];\n    var _currentPoint = _segment.currentPoint;\n    var extra = void 0;\n    if (_currentPoint[0] === minX) {\n      extra = getExtraFromSegmentWithAngle(_segment, lineWidth);\n      minX -= extra.xExtra;\n    } else if (_currentPoint[0] === maxX) {\n      extra = getExtraFromSegmentWithAngle(_segment, lineWidth);\n      maxX += extra.xExtra;\n    }\n    if (_currentPoint[1] === minY) {\n      extra = getExtraFromSegmentWithAngle(_segment, lineWidth);\n      minY -= extra.yExtra;\n    } else if (_currentPoint[1] === maxY) {\n      extra = getExtraFromSegmentWithAngle(_segment, lineWidth);\n      maxY += extra.yExtra;\n    }\n  }\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getExtraFromSegmentWithAngle(segment, lineWidth) {\n  var prePoint = segment.prePoint,\n    currentPoint = segment.currentPoint,\n    nextPoint = segment.nextPoint;\n  var currentAndPre = Math.pow(currentPoint[0] - prePoint[0], 2) + Math.pow(currentPoint[1] - prePoint[1], 2);\n  var currentAndNext = Math.pow(currentPoint[0] - nextPoint[0], 2) + Math.pow(currentPoint[1] - nextPoint[1], 2);\n  var preAndNext = Math.pow(prePoint[0] - nextPoint[0], 2) + Math.pow(prePoint[1] - nextPoint[1], 2);\n  //  currentPoint \n  var currentAngle = Math.acos((currentAndPre + currentAndNext - preAndNext) / (2 * Math.sqrt(currentAndPre) * Math.sqrt(currentAndNext)));\n  //  0  PI \n  // :  0  0 \n  if (!currentAngle || Math.sin(currentAngle) === 0 || isNumberEqual(currentAngle, 0)) {\n    return {\n      xExtra: 0,\n      yExtra: 0\n    };\n  }\n  var xAngle = Math.abs(Math.atan2(nextPoint[1] - currentPoint[1], nextPoint[0] - currentPoint[0]));\n  var yAngle = Math.abs(Math.atan2(nextPoint[0] - currentPoint[0], nextPoint[1] - currentPoint[1]));\n  // \n  xAngle = xAngle > Math.PI / 2 ? Math.PI - xAngle : xAngle;\n  yAngle = yAngle > Math.PI / 2 ? Math.PI - yAngle : yAngle;\n  // \n  // \n  var extra = {\n    // \n    xExtra: Math.cos(currentAngle / 2 - xAngle) * (lineWidth / 2 * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0,\n    // \n    yExtra: Math.cos(yAngle - currentAngle / 2) * (lineWidth / 2 * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0\n  };\n  return extra;\n}\n\n// \nfunction toSymmetry(point, center) {\n  return [center[0] + (center[0] - point[0]), center[1] + (center[1] - point[1])];\n}\nvar angleBetween = function angleBetween(v0, v1) {\n  var p = v0.x * v1.x + v0.y * v1.y;\n  var n = Math.sqrt((Math.pow(v0.x, 2) + Math.pow(v0.y, 2)) * (Math.pow(v1.x, 2) + Math.pow(v1.y, 2)));\n  var sign = v0.x * v1.y - v0.y * v1.x < 0 ? -1 : 1;\n  var angle = sign * Math.acos(p / n);\n  return angle;\n};\n/**\n * @see https://github.com/rveciana/svg-path-properties/blob/b6bd9a322966f6ef7a311872d80c56e3718de861/src/arc.ts#L121\n */\nvar pointOnEllipticalArc = function pointOnEllipticalArc(p0, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, p1, t) {\n  // In accordance to: http://www.w3.org/TR/SVG/implnote.html#ArcOutOfRangeParameters\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  xAxisRotation = mod(xAxisRotation, 360);\n  var xAxisRotationRadians = deg2rad(xAxisRotation);\n  // If the endpoints are identical, then this is equivalent to omitting the elliptical arc segment entirely.\n  if (p0.x === p1.x && p0.y === p1.y) {\n    return {\n      x: p0.x,\n      y: p0.y,\n      ellipticalArcAngle: 0\n    }; // Check if angle is correct\n  }\n\n  // If rx = 0 or ry = 0 then this arc is treated as a straight line segment joining the endpoints.\n  if (rx === 0 || ry === 0) {\n    // return this.pointOnLine(p0, p1, t);\n    return {\n      x: 0,\n      y: 0,\n      ellipticalArcAngle: 0\n    }; // Check if angle is correct\n  }\n\n  // Following \"Conversion from endpoint to center parameterization\"\n  // http://www.w3.org/TR/SVG/implnote.html#ArcConversionEndpointToCenter\n\n  // Step #1: Compute transformedPoint\n  var dx = (p0.x - p1.x) / 2;\n  var dy = (p0.y - p1.y) / 2;\n  var transformedPoint = {\n    x: Math.cos(xAxisRotationRadians) * dx + Math.sin(xAxisRotationRadians) * dy,\n    y: -Math.sin(xAxisRotationRadians) * dx + Math.cos(xAxisRotationRadians) * dy\n  };\n  // Ensure radii are large enough\n  var radiiCheck = Math.pow(transformedPoint.x, 2) / Math.pow(rx, 2) + Math.pow(transformedPoint.y, 2) / Math.pow(ry, 2);\n  if (radiiCheck > 1) {\n    rx *= Math.sqrt(radiiCheck);\n    ry *= Math.sqrt(radiiCheck);\n  }\n\n  // Step #2: Compute transformedCenter\n  var cSquareNumerator = Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(transformedPoint.y, 2) - Math.pow(ry, 2) * Math.pow(transformedPoint.x, 2);\n  var cSquareRootDenom = Math.pow(rx, 2) * Math.pow(transformedPoint.y, 2) + Math.pow(ry, 2) * Math.pow(transformedPoint.x, 2);\n  var cRadicand = cSquareNumerator / cSquareRootDenom;\n  // Make sure this never drops below zero because of precision\n  cRadicand = cRadicand < 0 ? 0 : cRadicand;\n  var cCoef = (largeArcFlag !== sweepFlag ? 1 : -1) * Math.sqrt(cRadicand);\n  var transformedCenter = {\n    x: cCoef * (rx * transformedPoint.y / ry),\n    y: cCoef * (-(ry * transformedPoint.x) / rx)\n  };\n\n  // Step #3: Compute center\n  var center = {\n    x: Math.cos(xAxisRotationRadians) * transformedCenter.x - Math.sin(xAxisRotationRadians) * transformedCenter.y + (p0.x + p1.x) / 2,\n    y: Math.sin(xAxisRotationRadians) * transformedCenter.x + Math.cos(xAxisRotationRadians) * transformedCenter.y + (p0.y + p1.y) / 2\n  };\n\n  // Step #4: Compute start/sweep angles\n  // Start angle of the elliptical arc prior to the stretch and rotate operations.\n  // Difference between the start and end angles\n  var startVector = {\n    x: (transformedPoint.x - transformedCenter.x) / rx,\n    y: (transformedPoint.y - transformedCenter.y) / ry\n  };\n  var startAngle = angleBetween({\n    x: 1,\n    y: 0\n  }, startVector);\n  var endVector = {\n    x: (-transformedPoint.x - transformedCenter.x) / rx,\n    y: (-transformedPoint.y - transformedCenter.y) / ry\n  };\n  var sweepAngle = angleBetween(startVector, endVector);\n  if (!sweepFlag && sweepAngle > 0) {\n    sweepAngle -= 2 * Math.PI;\n  } else if (sweepFlag && sweepAngle < 0) {\n    sweepAngle += 2 * Math.PI;\n  }\n  // We use % instead of `mod(..)` because we want it to be -360deg to 360deg(but actually in radians)\n  sweepAngle %= 2 * Math.PI;\n\n  // From http://www.w3.org/TR/SVG/implnote.html#ArcParameterizationAlternatives\n  var angle = startAngle + sweepAngle * t;\n  var ellipseComponentX = rx * Math.cos(angle);\n  var ellipseComponentY = ry * Math.sin(angle);\n  var point = {\n    x: Math.cos(xAxisRotationRadians) * ellipseComponentX - Math.sin(xAxisRotationRadians) * ellipseComponentY + center.x,\n    y: Math.sin(xAxisRotationRadians) * ellipseComponentX + Math.cos(xAxisRotationRadians) * ellipseComponentY + center.y,\n    ellipticalArcStartAngle: startAngle,\n    ellipticalArcEndAngle: startAngle + sweepAngle,\n    ellipticalArcAngle: angle,\n    ellipticalArcCenter: center,\n    resultantRx: rx,\n    resultantRy: ry\n  };\n  return point;\n};\nfunction path2Segments(path) {\n  var segments = [];\n  var currentPoint = null; // \n  var nextParams = null; //  path \n  var startMovePoint = null; //  M \n  var lastStartMovePointIndex = 0; //  M \n  var count = path.length;\n  for (var i = 0; i < count; i++) {\n    var params = path[i];\n    nextParams = path[i + 1];\n    var command = params[0];\n    // \n    var segment = {\n      command: command,\n      prePoint: currentPoint,\n      params: params,\n      startTangent: null,\n      endTangent: null,\n      currentPoint: null,\n      nextPoint: null,\n      arcParams: null,\n      box: null,\n      cubicParams: null\n    };\n    switch (command) {\n      case 'M':\n        startMovePoint = [params[1], params[2]];\n        lastStartMovePointIndex = i;\n        break;\n      case 'A':\n        var arcParams = getArcParams(currentPoint, params);\n        segment.arcParams = arcParams;\n        break;\n    }\n    if (command === 'Z') {\n      //  Z  M \n      currentPoint = startMovePoint;\n      //  Z M  M \n      nextParams = path[lastStartMovePointIndex + 1];\n    } else {\n      var len = params.length;\n      currentPoint = [params[len - 2], params[len - 1]];\n    }\n    if (nextParams && nextParams[0] === 'Z') {\n      //  Z M \n      nextParams = path[lastStartMovePointIndex];\n      if (segments[lastStartMovePointIndex]) {\n        //  Z M \n        segments[lastStartMovePointIndex].prePoint = currentPoint;\n      }\n    }\n    segment.currentPoint = currentPoint;\n    //  M  M \n    if (segments[lastStartMovePointIndex] && isSamePoint(currentPoint, segments[lastStartMovePointIndex].currentPoint)) {\n      segments[lastStartMovePointIndex].prePoint = segment.prePoint;\n    }\n    var nextPoint = nextParams ? [nextParams[nextParams.length - 2], nextParams[nextParams.length - 1]] : null;\n    segment.nextPoint = nextPoint;\n    // Add startTangent and endTangent\n    var prePoint = segment.prePoint;\n    if (['L', 'H', 'V'].includes(command)) {\n      segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\n      segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\n    } else if (command === 'Q') {\n      // \n      var cp = [params[1], params[2]];\n      //  currentPoint\n      segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n      segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n    } else if (command === 'T') {\n      var preSegment = segments[i - 1];\n      var _cp = toSymmetry(preSegment.currentPoint, prePoint);\n      if (preSegment.command === 'Q') {\n        segment.command = 'Q';\n        segment.startTangent = [prePoint[0] - _cp[0], prePoint[1] - _cp[1]];\n        segment.endTangent = [currentPoint[0] - _cp[0], currentPoint[1] - _cp[1]];\n      } else {\n        // @ts-ignore\n        segment.command = 'TL';\n        segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\n        segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\n      }\n    } else if (command === 'C') {\n      // \n      var cp1 = [params[1], params[2]];\n      var cp2 = [params[3], params[4]];\n      segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n      segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n\n      // horizontal line, eg. ['C', 100, 100, 100, 100, 200, 200]\n      if (segment.startTangent[0] === 0 && segment.startTangent[1] === 0) {\n        segment.startTangent = [cp1[0] - cp2[0], cp1[1] - cp2[1]];\n      }\n      if (segment.endTangent[0] === 0 && segment.endTangent[1] === 0) {\n        segment.endTangent = [cp2[0] - cp1[0], cp2[1] - cp1[1]];\n      }\n    } else if (command === 'S') {\n      var _preSegment = segments[i - 1];\n      var _cp2 = toSymmetry(_preSegment.currentPoint, prePoint);\n      var _cp3 = [params[1], params[2]];\n      if (_preSegment.command === 'C') {\n        segment.command = 'C'; //  S  C \n        segment.startTangent = [prePoint[0] - _cp2[0], prePoint[1] - _cp2[1]];\n        segment.endTangent = [currentPoint[0] - _cp3[0], currentPoint[1] - _cp3[1]];\n      } else {\n        // @ts-ignore\n        segment.command = 'SQ'; //  S  SQ \n        segment.startTangent = [prePoint[0] - _cp3[0], prePoint[1] - _cp3[1]];\n        segment.endTangent = [currentPoint[0] - _cp3[0], currentPoint[1] - _cp3[1]];\n      }\n    } else if (command === 'A') {\n      var _getTangentAtRatio = getTangentAtRatio(segment, 0),\n        dx1 = _getTangentAtRatio.x,\n        dy1 = _getTangentAtRatio.y;\n      var _getTangentAtRatio2 = getTangentAtRatio(segment, 1, false),\n        dx2 = _getTangentAtRatio2.x,\n        dy2 = _getTangentAtRatio2.y;\n      segment.startTangent = [dx1, dy1];\n      segment.endTangent = [dx2, dy2];\n    }\n    segments.push(segment);\n  }\n  return segments;\n}\n\n/**\n * Use length instead of ratio\n */\nfunction getTangentAtRatio(segment, ratio) {\n  var sign = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var _segment$arcParams = segment.arcParams,\n    _segment$arcParams$rx = _segment$arcParams.rx,\n    rx = _segment$arcParams$rx === void 0 ? 0 : _segment$arcParams$rx,\n    _segment$arcParams$ry = _segment$arcParams.ry,\n    ry = _segment$arcParams$ry === void 0 ? 0 : _segment$arcParams$ry,\n    xRotation = _segment$arcParams.xRotation,\n    arcFlag = _segment$arcParams.arcFlag,\n    sweepFlag = _segment$arcParams.sweepFlag;\n  var p1 = pointOnEllipticalArc({\n    x: segment.prePoint[0],\n    y: segment.prePoint[1]\n  }, rx, ry, xRotation, !!arcFlag, !!sweepFlag, {\n    x: segment.currentPoint[0],\n    y: segment.currentPoint[1]\n  }, ratio);\n  var p2 = pointOnEllipticalArc({\n    x: segment.prePoint[0],\n    y: segment.prePoint[1]\n  }, rx, ry, xRotation, !!arcFlag, !!sweepFlag, {\n    x: segment.currentPoint[0],\n    y: segment.currentPoint[1]\n  }, sign ? ratio + 0.005 : ratio - 0.005);\n  var xDist = p2.x - p1.x;\n  var yDist = p2.y - p1.y;\n  var dist = Math.sqrt(xDist * xDist + yDist * yDist);\n  return {\n    x: -xDist / dist,\n    y: -yDist / dist\n  };\n}\n\n// \nfunction vMag(v) {\n  return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n\n// u.v/|u||v|\nfunction vRatio(u, v) {\n  //  0  0 1\n  return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;\n}\n\n// \nfunction vAngle(u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\nfunction getArcParams(startPoint, params) {\n  var rx = params[1];\n  var ry = params[2];\n  var xRotation = mod(deg2rad(params[3]), Math.PI * 2);\n  var arcFlag = params[4];\n  var sweepFlag = params[5];\n  // \n  var x1 = startPoint[0];\n  var y1 = startPoint[1];\n  // \n  var x2 = params[6];\n  var y2 = params[7];\n  var xp = Math.cos(xRotation) * (x1 - x2) / 2.0 + Math.sin(xRotation) * (y1 - y2) / 2.0;\n  var yp = -1 * Math.sin(xRotation) * (x1 - x2) / 2.0 + Math.cos(xRotation) * (y1 - y2) / 2.0;\n  var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n  var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n  if (arcFlag === sweepFlag) {\n    f *= -1;\n  }\n  if (isNaN(f)) {\n    f = 0;\n  }\n\n  //  0  (0, 0) \n  var cxp = ry ? f * rx * yp / ry : 0;\n  var cyp = rx ? f * -ry * xp / rx : 0;\n\n  // \n  var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n  var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n\n  // \n  var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n  // \n  var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n  //  x \n  var theta = vAngle([1, 0], u);\n\n  // \n  var dTheta = vAngle(u, v);\n  if (vRatio(u, v) <= -1) {\n    dTheta = Math.PI;\n  }\n  if (vRatio(u, v) >= 1) {\n    dTheta = 0;\n  }\n  if (sweepFlag === 0 && dTheta > 0) {\n    dTheta -= 2 * Math.PI;\n  }\n  if (sweepFlag === 1 && dTheta < 0) {\n    dTheta += 2 * Math.PI;\n  }\n  return {\n    cx: cx,\n    cy: cy,\n    //  0 \n    rx: isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n    ry: isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n    startAngle: theta,\n    endAngle: theta + dTheta,\n    xRotation: xRotation,\n    arcFlag: arcFlag,\n    sweepFlag: sweepFlag\n  };\n}\nfunction commandsToPathString(commands, object, transform) {\n  return commands.reduce(function (prev, cur) {\n    var path = '';\n    if (cur[0] === 'M' || cur[0] === 'L') {\n      var p = vec3.fromValues(cur[1], cur[2], 0);\n      if (transform) {\n        vec3.transformMat4(p, p, transform);\n      }\n      path = \"\".concat(cur[0]).concat(p[0], \",\").concat(p[1]);\n    } else if (cur[0] === 'Z') {\n      path = cur[0];\n    } else if (cur[0] === 'C') {\n      var p1 = vec3.fromValues(cur[1], cur[2], 0);\n      var p2 = vec3.fromValues(cur[3], cur[4], 0);\n      var p3 = vec3.fromValues(cur[5], cur[6], 0);\n      if (transform) {\n        vec3.transformMat4(p1, p1, transform);\n        vec3.transformMat4(p2, p2, transform);\n        vec3.transformMat4(p3, p3, transform);\n      }\n      path = \"\".concat(cur[0]).concat(p1[0], \",\").concat(p1[1], \",\").concat(p2[0], \",\").concat(p2[1], \",\").concat(p3[0], \",\").concat(p3[1]);\n    } else if (cur[0] === 'A') {\n      var c = vec3.fromValues(cur[6], cur[7], 0);\n      if (transform) {\n        vec3.transformMat4(c, c, transform);\n      }\n      path = \"\".concat(cur[0]).concat(cur[1], \",\").concat(cur[2], \",\").concat(cur[3], \",\").concat(cur[4], \",\").concat(cur[5], \",\").concat(c[0], \",\").concat(c[1]);\n    } else if (cur[0] === 'Q') {\n      var _p = vec3.fromValues(cur[1], cur[2], 0);\n      var _p2 = vec3.fromValues(cur[3], cur[4], 0);\n      if (transform) {\n        vec3.transformMat4(_p, _p, transform);\n        vec3.transformMat4(_p2, _p2, transform);\n      }\n      path = \"\".concat(cur[0]).concat(cur[1], \",\").concat(cur[2], \",\").concat(cur[3], \",\").concat(cur[4], \"}\");\n    }\n    return prev += path;\n  }, '');\n}\nfunction lineToCommands(x1, y1, x2, y2) {\n  return [['M', x1, y1], ['L', x2, y2]];\n}\nfunction ellipseToCommands(rx, ry, cx, cy) {\n  var factor = (-1 + Math.sqrt(2)) / 3 * 4;\n  var dx = rx * factor;\n  var dy = ry * factor;\n  var left = cx - rx;\n  var right = cx + rx;\n  var top = cy - ry;\n  var bottom = cy + ry;\n  return [['M', left, cy], ['C', left, cy - dy, cx - dx, top, cx, top], ['C', cx + dx, top, right, cy - dy, right, cy], ['C', right, cy + dy, cx + dx, bottom, cx, bottom], ['C', cx - dx, bottom, left, cy + dy, left, cy], ['Z']];\n}\nfunction polygonToCommands(points, closed) {\n  var result = points.map(function (point, i) {\n    return [i === 0 ? 'M' : 'L', point[0], point[1]];\n  });\n  if (closed) {\n    result.push(['Z']);\n  }\n  return result;\n}\nfunction rectToCommands(width, height, x, y, radius) {\n  // @see https://gist.github.com/danielpquinn/dd966af424030d47e476\n  if (radius) {\n    var _radius = _slicedToArray(radius, 4),\n      tlr = _radius[0],\n      trr = _radius[1],\n      brr = _radius[2],\n      blr = _radius[3];\n    var signX = width > 0 ? 1 : -1;\n    var signY = height > 0 ? 1 : -1;\n    // sweep-flag @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths#arcs\n    var sweepFlag = signX + signY !== 0 ? 1 : 0;\n    return [['M', signX * tlr + x, y], ['L', width - signX * trr + x, y], trr ? ['A', trr, trr, 0, 0, sweepFlag, width + x, signY * trr + y] : null, ['L', width + x, height - signY * brr + y], brr ? ['A', brr, brr, 0, 0, sweepFlag, width + x - signX * brr, height + y] : null, ['L', x + signX * blr, height + y], blr ? ['A', blr, blr, 0, 0, sweepFlag, x, height + y - signY * blr] : null, ['L', x, signY * tlr + y], tlr ? ['A', tlr, tlr, 0, 0, sweepFlag, signX * tlr + x, y] : null, ['Z']].filter(function (command) {\n      return command;\n    });\n  }\n  return [['M', x, y], ['L', x + width, y], ['L', x + width, y + height], ['L', x, y + height], ['Z']];\n}\n\n/**\n * convert object to path, should account for:\n * * transform & origin\n * * lineWidth\n */\nfunction convertToPath(object) {\n  var transform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : object.getLocalTransform();\n  var commands = [];\n  switch (object.nodeName) {\n    case Shape.LINE:\n      var _parsedStyle = object.parsedStyle,\n        _parsedStyle$x = _parsedStyle.x1,\n        x1 = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = _parsedStyle.y1,\n        y1 = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n        _parsedStyle$x2 = _parsedStyle.x2,\n        x2 = _parsedStyle$x2 === void 0 ? 0 : _parsedStyle$x2,\n        _parsedStyle$y2 = _parsedStyle.y2,\n        y2 = _parsedStyle$y2 === void 0 ? 0 : _parsedStyle$y2;\n      commands = lineToCommands(x1, y1, x2, y2);\n      break;\n    case Shape.CIRCLE:\n      {\n        var _parsedStyle2 = object.parsedStyle,\n          _parsedStyle2$r = _parsedStyle2.r,\n          r = _parsedStyle2$r === void 0 ? 0 : _parsedStyle2$r,\n          _parsedStyle2$cx = _parsedStyle2.cx,\n          cx = _parsedStyle2$cx === void 0 ? 0 : _parsedStyle2$cx,\n          _parsedStyle2$cy = _parsedStyle2.cy,\n          cy = _parsedStyle2$cy === void 0 ? 0 : _parsedStyle2$cy;\n        commands = ellipseToCommands(r, r, cx, cy);\n        break;\n      }\n    case Shape.ELLIPSE:\n      {\n        var _parsedStyle3 = object.parsedStyle,\n          _parsedStyle3$rx = _parsedStyle3.rx,\n          rx = _parsedStyle3$rx === void 0 ? 0 : _parsedStyle3$rx,\n          _parsedStyle3$ry = _parsedStyle3.ry,\n          ry = _parsedStyle3$ry === void 0 ? 0 : _parsedStyle3$ry,\n          _parsedStyle3$cx = _parsedStyle3.cx,\n          _cx = _parsedStyle3$cx === void 0 ? 0 : _parsedStyle3$cx,\n          _parsedStyle3$cy = _parsedStyle3.cy,\n          _cy = _parsedStyle3$cy === void 0 ? 0 : _parsedStyle3$cy;\n        commands = ellipseToCommands(rx, ry, _cx, _cy);\n        break;\n      }\n    case Shape.POLYLINE:\n    case Shape.POLYGON:\n      var points = object.parsedStyle.points;\n      commands = polygonToCommands(points.points, object.nodeName === Shape.POLYGON);\n      break;\n    case Shape.RECT:\n      var _parsedStyle4 = object.parsedStyle,\n        _parsedStyle4$width = _parsedStyle4.width,\n        width = _parsedStyle4$width === void 0 ? 0 : _parsedStyle4$width,\n        _parsedStyle4$height = _parsedStyle4.height,\n        height = _parsedStyle4$height === void 0 ? 0 : _parsedStyle4$height,\n        _parsedStyle4$x = _parsedStyle4.x,\n        x = _parsedStyle4$x === void 0 ? 0 : _parsedStyle4$x,\n        _parsedStyle4$y = _parsedStyle4.y,\n        y = _parsedStyle4$y === void 0 ? 0 : _parsedStyle4$y,\n        radius = _parsedStyle4.radius;\n      var hasRadius = radius && radius.some(function (r) {\n        return r !== 0;\n      });\n      commands = rectToCommands(width, height, x, y, hasRadius && radius.map(function (r) {\n        return clamp(r, 0, Math.min(Math.abs(width) / 2, Math.abs(height) / 2));\n      }));\n      break;\n    case Shape.PATH:\n      var absolutePath = object.parsedStyle.d.absolutePath;\n      commands = _toConsumableArray(absolutePath);\n      break;\n  }\n  if (commands.length) {\n    return commandsToPathString(commands, object, transform);\n  }\n}\nfunction translatePathToString(absolutePath) {\n  var startOffsetX = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var startOffsetY = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var endOffsetX = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  var endOffsetY = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  var newValue = absolutePath.map(function (params, i) {\n    var command = params[0];\n    var nextSegment = absolutePath[i + 1];\n    var useStartOffset = i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n    var useEndOffset = (i === absolutePath.length - 1 || nextSegment && (nextSegment[0] === 'M' || nextSegment[0] === 'Z')) && endOffsetX !== 0 && endOffsetY !== 0;\n    var _ref = useStartOffset ? [startOffsetX, startOffsetY] : [0, 0],\n      _ref2 = _slicedToArray(_ref, 2),\n      startOffsetXTemp = _ref2[0],\n      startOffsetYTemp = _ref2[1];\n    var _ref3 = useEndOffset ? [endOffsetX, endOffsetY] : [0, 0],\n      _ref4 = _slicedToArray(_ref3, 2),\n      endOffsetXTemp = _ref4[0],\n      endOffsetYTemp = _ref4[1];\n    switch (command) {\n      case 'M':\n        return \"M \".concat(params[1] + startOffsetXTemp, \",\").concat(params[2] + startOffsetYTemp);\n      case 'L':\n        return \"L \".concat(params[1] + endOffsetXTemp, \",\").concat(params[2] + endOffsetYTemp);\n      case 'Q':\n        return \"Q \".concat(params[1], \" \").concat(params[2], \",\").concat(params[3] + endOffsetXTemp, \" \").concat(params[4] + endOffsetYTemp);\n      case 'C':\n        return \"C \".concat(params[1], \" \").concat(params[2], \",\").concat(params[3], \" \").concat(params[4], \",\").concat(params[5] + endOffsetXTemp, \" \").concat(params[6] + endOffsetYTemp);\n      case 'A':\n        return \"A \".concat(params[1], \" \").concat(params[2], \" \").concat(params[3], \" \").concat(params[4], \" \").concat(params[5], \" \").concat(params[6], \" \").concat(params[7]).concat(useEndOffset ? \" L \".concat(params[6] + endOffsetX, \",\").concat(params[7] + endOffsetY) : '');\n      case 'Z':\n        return 'Z';\n      default:\n        return null;\n    }\n  }).filter(function (item) {\n    return item !== null;\n  }).join(' ');\n  if (~newValue.indexOf('NaN')) {\n    return '';\n  }\n  return newValue;\n}\n\nvar internalParsePath = function internalParsePath(path) {\n  // empty path\n  if (path === '' || Array.isArray(path) && path.length === 0) {\n    return {\n      absolutePath: [],\n      hasArc: false,\n      segments: [],\n      polygons: [],\n      polylines: [],\n      curve: null,\n      totalLength: 0,\n      rect: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      }\n    };\n  }\n  var absolutePath;\n  try {\n    absolutePath = normalizePath(path);\n  } catch (_unused) {\n    absolutePath = normalizePath('');\n    console.error(\"[g]: Invalid SVG Path definition: \".concat(path));\n  }\n  removeRedundantMCommand(absolutePath);\n  var hasArc = hasArcOrBezier(absolutePath);\n  var _extractPolygons = extractPolygons(absolutePath),\n    polygons = _extractPolygons.polygons,\n    polylines = _extractPolygons.polylines;\n\n  // for later use\n  var segments = path2Segments(absolutePath);\n\n  // Only calculate bbox here since we don't need length now.\n  var _getPathBBox = getPathBBox(segments, 0),\n    x = _getPathBBox.x,\n    y = _getPathBBox.y,\n    width = _getPathBBox.width,\n    height = _getPathBBox.height;\n  return {\n    absolutePath: absolutePath,\n    hasArc: hasArc,\n    segments: segments,\n    polygons: polygons,\n    polylines: polylines,\n    // curve,\n    // Delay the calculation of length.\n    totalLength: 0,\n    rect: {\n      x: Number.isFinite(x) ? x : 0,\n      y: Number.isFinite(y) ? y : 0,\n      width: Number.isFinite(width) ? width : 0,\n      height: Number.isFinite(height) ? height : 0\n    }\n  };\n};\nvar memoizedParsePath = memoize(internalParsePath);\nfunction parsePath(path) {\n  return isString(path) ? memoizedParsePath(path) : internalParsePath(path);\n}\nfunction mergePaths(left, right, object) {\n  var curve1 = left.curve;\n  var curve2 = right.curve;\n  if (!curve1 || curve1.length === 0) {\n    // convert to curves to do morphing & picking later\n    // @see http://thednp.github.io/kute.js/svgCubicMorph.html\n    curve1 = path2Curve(left.absolutePath, false);\n    left.curve = curve1;\n  }\n  if (!curve2 || curve2.length === 0) {\n    curve2 = path2Curve(right.absolutePath, false);\n    right.curve = curve2;\n  }\n  var curves = [curve1, curve2];\n  if (curve1.length !== curve2.length) {\n    curves = equalizeSegments(curve1, curve2);\n  }\n  var curve0 = getDrawDirection(curves[0]) !== getDrawDirection(curves[1]) ? reverseCurve(curves[0]) : clonePath(curves[0]);\n  return [curve0, getRotatedCurve(curves[1], curve0), function (pathArray) {\n    // need converting to path string?\n    return pathArray;\n  }];\n}\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/points\n *\n * @example\n * points=\"100,10 250,150 200,110\"\n */\nfunction parsePoints(pointsOrStr, object) {\n  var points;\n  if (isString(pointsOrStr)) {\n    points = pointsOrStr.split(' ').map(function (pointStr) {\n      var _pointStr$split = pointStr.split(','),\n        _pointStr$split2 = _slicedToArray(_pointStr$split, 2),\n        x = _pointStr$split2[0],\n        y = _pointStr$split2[1];\n      return [Number(x), Number(y)];\n    });\n  } else {\n    points = pointsOrStr;\n  }\n  return {\n    points: points,\n    totalLength: 0,\n    segments: []\n  };\n}\nfunction mergePoints(left, right) {\n  return [left.points, right.points, function (points) {\n    return points;\n  }];\n}\n\n// eg. { t: 'scale', d: [CSSUnitValue(1), CSSUnitValue(2)] }\n\nvar _ = null;\nvar TRANSFORM_REGEXP = /\\s*(\\w+)\\(([^)]*)\\)/g;\nfunction cast(pattern) {\n  return function (contents) {\n    var i = 0;\n    return pattern.map(function (x) {\n      return x === _ ? contents[i++] : x;\n    });\n  };\n}\nfunction id(x) {\n  return x;\n}\n\n// type: [argTypes, convertTo3D, convertTo2D]\n// In the argument types string, lowercase characters represent optional arguments\nvar transformFunctions = {\n  // @ts-ignore\n  matrix: ['NNNNNN', [_, _, 0, 0, _, _, 0, 0, 0, 0, 1, 0, _, _, 0, 1], id],\n  matrix3d: ['NNNNNNNNNNNNNNNN', id],\n  rotate: ['A'],\n  rotateX: ['A'],\n  rotateY: ['A'],\n  rotateZ: ['A'],\n  rotate3d: ['NNNA'],\n  perspective: ['L'],\n  scale: ['Nn', cast([_, _, new CSSUnitValue(1)]), id],\n  scaleX: ['N', cast([_, new CSSUnitValue(1), new CSSUnitValue(1)]), cast([_, new CSSUnitValue(1)])],\n  scaleY: ['N', cast([new CSSUnitValue(1), _, new CSSUnitValue(1)]), cast([new CSSUnitValue(1), _])],\n  scaleZ: ['N', cast([new CSSUnitValue(1), new CSSUnitValue(1), _])],\n  scale3d: ['NNN', id],\n  skew: ['Aa', null, id],\n  skewX: ['A', null, cast([_, Odeg])],\n  skewY: ['A', null, cast([Odeg, _])],\n  translate: ['Tt', cast([_, _, Opx]), id],\n  translateX: ['T', cast([_, Opx, Opx]), cast([_, Opx])],\n  translateY: ['T', cast([Opx, _, Opx]), cast([Opx, _])],\n  translateZ: ['L', cast([Opx, Opx, _])],\n  translate3d: ['TTL', id]\n};\nfunction parseArrayTransform(transform) {\n  var result = [];\n  var length = transform.length;\n  for (var i = 0; i < length; i++) {\n    var item = transform[i];\n    var name = item[0];\n    var args = item.slice(1);\n    // infer default value\n    if (name === 'translate' || name === 'skew') {\n      if (args.length === 1) args.push(0);\n    } else if (name === 'scale') {\n      if (args.length === 1) args.push(args[0]);\n    }\n    var functionData = transformFunctions[name];\n    if (!functionData) return [];\n    var parsedArgs = args.map(function (value) {\n      return getOrCreateUnitValue(value);\n    });\n    result.push({\n      t: name,\n      d: parsedArgs\n    });\n  }\n  return result;\n}\n\n/**\n * none\n * scale(1) scale(1, 2)\n * scaleX(1)\n */\nfunction parseTransform(transform) {\n  if (Array.isArray(transform)) {\n    return parseArrayTransform(transform);\n  }\n  transform = (transform || 'none').trim();\n  if (transform === 'none') {\n    return [];\n  }\n  var result = [];\n  var match;\n  var prevLastIndex = 0;\n  TRANSFORM_REGEXP.lastIndex = 0;\n  while (match = TRANSFORM_REGEXP.exec(transform)) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    var functionName = match[1]; // scale\n    var functionData = transformFunctions[functionName]; // scale(1, 2)\n    if (!functionData) {\n      // invalid, eg. scale()\n      return [];\n    }\n    var args = match[2].split(','); // 1,2\n    var argTypes = functionData[0]; // Nn\n    if (argTypes.length < args.length) {\n      // scale(N, n)\n      return [];\n    }\n    var parsedArgs = [];\n    for (var i = 0; i < argTypes.length; i++) {\n      var arg = args[i];\n      var type = argTypes[i];\n      var parsedArg = void 0;\n      if (!arg) {\n        // @ts-ignore\n        parsedArg = {\n          a: Odeg,\n          n: parsedArgs[0],\n          t: Opx\n        }[type];\n      } else {\n        // @ts-ignore\n        parsedArg = {\n          A: function A(s) {\n            return s.trim() === '0' ? Odeg : parseAngle(s);\n          },\n          N: parseNumber,\n          T: parseLengthOrPercentage,\n          L: parseLength\n        }[type.toUpperCase()](arg);\n      }\n      if (parsedArg === undefined) {\n        return [];\n      }\n      parsedArgs.push(parsedArg);\n    }\n    result.push({\n      t: functionName,\n      d: parsedArgs\n    }); // { t: scale, d: [1, 2] }\n\n    if (TRANSFORM_REGEXP.lastIndex === transform.length) {\n      return result;\n    }\n  }\n  return [];\n}\nfunction parseTransformUnmemoize(transform) {\n  if (Array.isArray(transform)) {\n    return parseArrayTransform(transform);\n  }\n  transform = (transform || 'none').trim();\n  if (transform === 'none') {\n    return [];\n  }\n  var result = [];\n  var match;\n  var prevLastIndex = 0;\n  TRANSFORM_REGEXP.lastIndex = 0;\n  while (match = TRANSFORM_REGEXP.exec(transform)) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    var functionName = match[1]; // scale\n    var functionData = transformFunctions[functionName]; // scale(1, 2)\n    if (!functionData) {\n      // invalid, eg. scale()\n      return [];\n    }\n    var args = match[2].split(','); // 1,2\n    var argTypes = functionData[0]; // Nn\n    if (argTypes.length < args.length) {\n      // scale(N, n)\n      return [];\n    }\n    var parsedArgs = [];\n    for (var i = 0; i < argTypes.length; i++) {\n      var arg = args[i];\n      var type = argTypes[i];\n      var parsedArg = void 0;\n      if (!arg) {\n        // @ts-ignore\n        parsedArg = {\n          a: Odeg,\n          n: parsedArgs[0],\n          t: Opx\n        }[type];\n      } else {\n        // @ts-ignore\n        parsedArg = {\n          A: function A(s) {\n            return s.trim() === '0' ? Odeg : parseAngleUnmemoize(s);\n          },\n          N: parseNumberUnmemoize,\n          T: parseLengthOrPercentageUnmemoize,\n          L: parseLengthUnmemoize\n        }[type.toUpperCase()](arg);\n      }\n      if (parsedArg === undefined) {\n        return [];\n      }\n      parsedArgs.push(parsedArg);\n    }\n    result.push({\n      t: functionName,\n      d: parsedArgs\n    }); // { t: scale, d: [1, 2] }\n\n    if (TRANSFORM_REGEXP.lastIndex === transform.length) {\n      return result;\n    }\n  }\n  return [];\n}\nfunction convertItemToMatrix(item) {\n  var x;\n  var y;\n  var z;\n  var angle;\n  switch (item.t) {\n    case 'rotateX':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, 0, 0, 0, 0, Math.cos(angle), Math.sin(angle), 0, 0, -Math.sin(angle), Math.cos(angle), 0, 0, 0, 0, 1];\n    case 'rotateY':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [Math.cos(angle), 0, -Math.sin(angle), 0, 0, 1, 0, 0, Math.sin(angle), 0, Math.cos(angle), 0, 0, 0, 0, 1];\n    case 'rotate':\n    case 'rotateZ':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [Math.cos(angle), Math.sin(angle), 0, 0, -Math.sin(angle), Math.cos(angle), 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'rotate3d':\n      x = item.d[0].value;\n      y = item.d[1].value;\n      z = item.d[2].value;\n      angle = deg2rad(convertAngleUnit(item.d[3]));\n      var sqrLength = x * x + y * y + z * z;\n      if (sqrLength === 0) {\n        x = 1;\n        y = 0;\n        z = 0;\n      } else if (sqrLength !== 1) {\n        var length = Math.sqrt(sqrLength);\n        x /= length;\n        y /= length;\n        z /= length;\n      }\n      var s = Math.sin(angle / 2);\n      var sc = s * Math.cos(angle / 2);\n      var sq = s * s;\n      return [1 - 2 * (y * y + z * z) * sq, 2 * (x * y * sq + z * sc), 2 * (x * z * sq - y * sc), 0, 2 * (x * y * sq - z * sc), 1 - 2 * (x * x + z * z) * sq, 2 * (y * z * sq + x * sc), 0, 2 * (x * z * sq + y * sc), 2 * (y * z * sq - x * sc), 1 - 2 * (x * x + y * y) * sq, 0, 0, 0, 0, 1];\n    case 'scale':\n      return [item.d[0].value, 0, 0, 0, 0, item.d[1].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaleX':\n      return [item.d[0].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaleY':\n      return [1, 0, 0, 0, 0, item.d[0].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaleZ':\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, item.d[0].value, 0, 0, 0, 0, 1];\n    case 'scale3d':\n      return [item.d[0].value, 0, 0, 0, 0, item.d[1].value, 0, 0, 0, 0, item.d[2].value, 0, 0, 0, 0, 1];\n    case 'skew':\n      var xAngle = deg2rad(convertAngleUnit(item.d[0]));\n      var yAngle = deg2rad(convertAngleUnit(item.d[1]));\n      return [1, Math.tan(yAngle), 0, 0, Math.tan(xAngle), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'skewX':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, 0, 0, 0, Math.tan(angle), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'skewY':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, Math.tan(angle), 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'translate':\n      // TODO: pass target\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      y = convertPercentUnit(item.d[1], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, 0, 1];\n    case 'translateX':\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, 0, 0, 1];\n    case 'translateY':\n      y = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, y, 0, 1];\n    case 'translateZ':\n      z = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, z, 1];\n    case 'translate3d':\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      y = convertPercentUnit(item.d[1], 0, null) || 0;\n      z = convertPercentUnit(item.d[2], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, z, 1];\n    case 'perspective':\n      var t = convertPercentUnit(item.d[0], 0, null) || 0;\n      var p = t ? -1 / t : 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, p, 0, 0, 0, 1];\n    case 'matrix':\n      return [item.d[0].value, item.d[1].value, 0, 0, item.d[2].value, item.d[3].value, 0, 0, 0, 0, 1, 0, item.d[4].value, item.d[5].value, 0, 1];\n    case 'matrix3d':\n      return item.d.map(function (d) {\n        return d.value;\n      });\n  }\n}\nfunction multiplyMatrices(a, b) {\n  return [a[0] * b[0] + a[4] * b[1] + a[8] * b[2] + a[12] * b[3], a[1] * b[0] + a[5] * b[1] + a[9] * b[2] + a[13] * b[3], a[2] * b[0] + a[6] * b[1] + a[10] * b[2] + a[14] * b[3], a[3] * b[0] + a[7] * b[1] + a[11] * b[2] + a[15] * b[3], a[0] * b[4] + a[4] * b[5] + a[8] * b[6] + a[12] * b[7], a[1] * b[4] + a[5] * b[5] + a[9] * b[6] + a[13] * b[7], a[2] * b[4] + a[6] * b[5] + a[10] * b[6] + a[14] * b[7], a[3] * b[4] + a[7] * b[5] + a[11] * b[6] + a[15] * b[7], a[0] * b[8] + a[4] * b[9] + a[8] * b[10] + a[12] * b[11], a[1] * b[8] + a[5] * b[9] + a[9] * b[10] + a[13] * b[11], a[2] * b[8] + a[6] * b[9] + a[10] * b[10] + a[14] * b[11], a[3] * b[8] + a[7] * b[9] + a[11] * b[10] + a[15] * b[11], a[0] * b[12] + a[4] * b[13] + a[8] * b[14] + a[12] * b[15], a[1] * b[12] + a[5] * b[13] + a[9] * b[14] + a[13] * b[15], a[2] * b[12] + a[6] * b[13] + a[10] * b[14] + a[14] * b[15], a[3] * b[12] + a[7] * b[13] + a[11] * b[14] + a[15] * b[15]];\n}\nfunction convertToMatrix(transformList) {\n  if (transformList.length === 0) {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n  }\n  return transformList.map(convertItemToMatrix).reduce(multiplyMatrices);\n}\nfunction makeMatrixDecomposition(transformList) {\n  var translate = [0, 0, 0];\n  var scale = [1, 1, 1];\n  var skew = [0, 0, 0];\n  var perspective = [0, 0, 0, 1];\n  var quaternion = [0, 0, 0, 1];\n  decomposeMat4(\n  // @ts-ignore\n  convertToMatrix(transformList), translate, scale, skew, perspective, quaternion);\n  return [[translate, scale, skew, quaternion, perspective]];\n}\nvar composeMatrix = function () {\n  function multiply(a, b) {\n    var result = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]];\n    for (var i = 0; i < 4; i++) {\n      for (var j = 0; j < 4; j++) {\n        for (var k = 0; k < 4; k++) {\n          result[i][j] += b[i][k] * a[k][j];\n        }\n      }\n    }\n    return result;\n  }\n  function is2D(m) {\n    return m[0][2] === 0 && m[0][3] === 0 && m[1][2] === 0 && m[1][3] === 0 && m[2][0] === 0 && m[2][1] === 0 && m[2][2] === 1 && m[2][3] === 0 && m[3][2] === 0 && m[3][3] === 1;\n  }\n  function composeMatrix(translate, scale, skew, quat, perspective) {\n    var matrix = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    for (var i = 0; i < 4; i++) {\n      matrix[i][3] = perspective[i];\n    }\n    for (var _i = 0; _i < 3; _i++) {\n      for (var j = 0; j < 3; j++) {\n        matrix[3][_i] += translate[j] * matrix[j][_i];\n      }\n    }\n    var x = quat[0];\n    var y = quat[1];\n    var z = quat[2];\n    var w = quat[3];\n    var rotMatrix = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    rotMatrix[0][0] = 1 - 2 * (y * y + z * z);\n    rotMatrix[0][1] = 2 * (x * y - z * w);\n    rotMatrix[0][2] = 2 * (x * z + y * w);\n    rotMatrix[1][0] = 2 * (x * y + z * w);\n    rotMatrix[1][1] = 1 - 2 * (x * x + z * z);\n    rotMatrix[1][2] = 2 * (y * z - x * w);\n    rotMatrix[2][0] = 2 * (x * z - y * w);\n    rotMatrix[2][1] = 2 * (y * z + x * w);\n    rotMatrix[2][2] = 1 - 2 * (x * x + y * y);\n    matrix = multiply(matrix, rotMatrix);\n    var temp = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    if (skew[2]) {\n      temp[2][1] = skew[2];\n      matrix = multiply(matrix, temp);\n    }\n    if (skew[1]) {\n      temp[2][1] = 0;\n      temp[2][0] = skew[0];\n      matrix = multiply(matrix, temp);\n    }\n    if (skew[0]) {\n      temp[2][0] = 0;\n      temp[1][0] = skew[0];\n      matrix = multiply(matrix, temp);\n    }\n    for (var _i2 = 0; _i2 < 3; _i2++) {\n      for (var _j = 0; _j < 3; _j++) {\n        matrix[_i2][_j] *= scale[_i2];\n      }\n    }\n    if (is2D(matrix)) {\n      return [matrix[0][0], matrix[0][1], matrix[1][0], matrix[1][1], matrix[3][0], matrix[3][1]];\n    }\n    return matrix[0].concat(matrix[1], matrix[2], matrix[3]);\n  }\n  return composeMatrix;\n}();\nfunction numberToLongString(x) {\n  return x.toFixed(6).replace('.000000', '');\n}\nfunction mergeMatrices(left, right) {\n  var leftArgs;\n  var rightArgs;\n  // @ts-ignore\n  if (left.decompositionPair !== right) {\n    // @ts-ignore\n    left.decompositionPair = right;\n    // @ts-ignore\n    leftArgs = makeMatrixDecomposition(left);\n  }\n  // @ts-ignore\n  if (right.decompositionPair !== left) {\n    // @ts-ignore\n    right.decompositionPair = left;\n    // @ts-ignore\n    rightArgs = makeMatrixDecomposition(right);\n  }\n  if (leftArgs[0] === null || rightArgs[0] === null) return [\n  // @ts-ignore\n  [false],\n  // @ts-ignore\n  [true],\n  // @ts-ignore\n  function (x) {\n    return x ? right[0].d : left[0].d;\n  }];\n  leftArgs[0].push(0);\n  rightArgs[0].push(1);\n  return [leftArgs, rightArgs,\n  // @ts-ignore\n  function (list) {\n    // @ts-ignore\n    var q = quat(leftArgs[0][3], rightArgs[0][3], list[5]);\n    var mat = composeMatrix(list[0], list[1], list[2], q, list[4]);\n    var stringifiedArgs = mat.map(numberToLongString).join(',');\n    return stringifiedArgs;\n  }];\n}\nfunction dot(v1, v2) {\n  var result = 0;\n  for (var i = 0; i < v1.length; i++) {\n    result += v1[i] * v2[i];\n  }\n  return result;\n}\nfunction quat(fromQ, toQ, f) {\n  var product = dot(fromQ, toQ);\n  product = clamp(product, -1.0, 1.0);\n  var quat = [];\n  if (product === 1.0) {\n    quat = fromQ;\n  } else {\n    var theta = Math.acos(product);\n    var w = Math.sin(f * theta) * 1 / Math.sqrt(1 - product * product);\n    for (var i = 0; i < 4; i++) {\n      quat.push(fromQ[i] * (Math.cos(f * theta) - product * w) + toQ[i] * w);\n    }\n  }\n  return quat;\n}\n\n// scaleX/Y/Z -> scale\nfunction typeTo2D(type) {\n  return type.replace(/[XY]/, '');\n}\n\n// scaleX/Y/Z -> scale3d\nfunction typeTo3D(type) {\n  return type.replace(/(X|Y|Z|3d)?$/, '3d');\n}\nvar isMatrixOrPerspective = function isMatrixOrPerspective(lt, rt) {\n  return lt === 'perspective' && rt === 'perspective' || (lt === 'matrix' || lt === 'matrix3d') && (rt === 'matrix' || rt === 'matrix3d');\n};\nfunction mergeTransforms(left, right, target) {\n  var flipResults = false;\n  // padding empty transform, eg. merge 'scale(10)' with 'none' -> scale(1)\n  if (!left.length || !right.length) {\n    if (!left.length) {\n      flipResults = true;\n      left = right;\n      right = [];\n    }\n    var _loop = function _loop() {\n      var _left$i = left[i],\n        type = _left$i.t,\n        args = _left$i.d;\n      // none -> scale(1)/translateX(0)\n      var defaultValue = type.substring(0, 5) === 'scale' ? 1 : 0;\n      right.push({\n        t: type,\n        d: args.map(function (arg) {\n          if (typeof arg === 'number') {\n            return getOrCreateUnitValue(defaultValue);\n          }\n          return getOrCreateUnitValue(defaultValue, arg.unit);\n          //   {\n          //     unit: arg.unit,\n          //     value: defaultValue,\n          //   };\n        })\n      });\n    };\n    for (var i = 0; i < left.length; i++) {\n      _loop();\n    }\n  }\n  var leftResult = [];\n  var rightResult = [];\n  var types = [];\n\n  // merge matrix() with matrix3d()\n  if (left.length !== right.length) {\n    var merged = mergeMatrices(left, right);\n    // @ts-ignore\n    leftResult = [merged[0]];\n    // @ts-ignore\n    rightResult = [merged[1]];\n    types = [['matrix', [merged[2]]]];\n  } else {\n    for (var _i3 = 0; _i3 < left.length; _i3++) {\n      var leftType = left[_i3].t;\n      var rightType = right[_i3].t;\n      var leftArgs = left[_i3].d;\n      var rightArgs = right[_i3].d;\n      var leftFunctionData = transformFunctions[leftType];\n      var rightFunctionData = transformFunctions[rightType];\n      var type = void 0;\n      if (isMatrixOrPerspective(leftType, rightType)) {\n        var _merged = mergeMatrices([left[_i3]], [right[_i3]]);\n        // @ts-ignore\n        leftResult.push(_merged[0]);\n        // @ts-ignore\n        rightResult.push(_merged[1]);\n        types.push(['matrix', [_merged[2]]]);\n        continue;\n      } else if (leftType === rightType) {\n        type = leftType;\n      } else if (leftFunctionData[2] && rightFunctionData[2] && typeTo2D(leftType) === typeTo2D(rightType)) {\n        type = typeTo2D(leftType);\n        // @ts-ignore\n        leftArgs = leftFunctionData[2](leftArgs);\n        // @ts-ignore\n        rightArgs = rightFunctionData[2](rightArgs);\n      } else if (leftFunctionData[1] && rightFunctionData[1] && typeTo3D(leftType) === typeTo3D(rightType)) {\n        type = typeTo3D(leftType);\n        // @ts-ignore\n        leftArgs = leftFunctionData[1](leftArgs);\n        // @ts-ignore\n        rightArgs = rightFunctionData[1](rightArgs);\n      } else {\n        var _merged2 = mergeMatrices(left, right);\n        // @ts-ignore\n        leftResult = [_merged2[0]];\n        // @ts-ignore\n        rightResult = [_merged2[1]];\n        types = [['matrix', [_merged2[2]]]];\n        break;\n      }\n      var leftArgsCopy = [];\n      var rightArgsCopy = [];\n      var stringConversions = [];\n      for (var j = 0; j < leftArgs.length; j++) {\n        // const merge = leftArgs[j].unit === UnitType.kNumber ? mergeDimensions : mergeDimensions;\n        var _merged3 = mergeDimensions(leftArgs[j], rightArgs[j], target, false, j);\n        leftArgsCopy[j] = _merged3[0];\n        rightArgsCopy[j] = _merged3[1];\n        stringConversions.push(_merged3[2]);\n      }\n      leftResult.push(leftArgsCopy);\n      rightResult.push(rightArgsCopy);\n      types.push([type, stringConversions]);\n    }\n  }\n  if (flipResults) {\n    var tmp = leftResult;\n    leftResult = rightResult;\n    rightResult = tmp;\n  }\n  return [leftResult, rightResult, function (list) {\n    return list.map(function (args, i) {\n      var stringifiedArgs = args.map(function (arg, j) {\n        return types[i][1][j](arg);\n      }).join(',');\n      if (types[i][0] === 'matrix' && stringifiedArgs.split(',').length === 16) {\n        types[i][0] = 'matrix3d';\n      }\n      if (types[i][0] === 'matrix3d' && stringifiedArgs.split(',').length === 6) {\n        types[i][0] = 'matrix';\n      }\n      return \"\".concat(types[i][0], \"(\").concat(stringifiedArgs, \")\");\n    }).join(' ');\n  }];\n}\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin\n * eg. 'center' 'top left' '50px 50px'\n */\nvar parseTransformOrigin = memoize(function (value) {\n  if (isString(value)) {\n    if (value === 'text-anchor') {\n      return [getOrCreateUnitValue(0, 'px'), getOrCreateUnitValue(0, 'px')];\n    }\n    var values = value.split(' ');\n    if (values.length === 1) {\n      if (values[0] === 'top' || values[0] === 'bottom') {\n        // 'top' -> 'center top'\n        values[1] = values[0];\n        values[0] = 'center';\n      } else {\n        // '50px' -> '50px center'\n        values[1] = 'center';\n      }\n    }\n    if (values.length !== 2) {\n      return null;\n    }\n\n    // eg. center bottom\n    return [parseLengthOrPercentage(convertKeyword2Percent(values[0])), parseLengthOrPercentage(convertKeyword2Percent(values[1]))];\n  }\n  return [getOrCreateUnitValue(value[0] || 0, 'px'), getOrCreateUnitValue(value[1] || 0, 'px')];\n});\nfunction convertKeyword2Percent(keyword) {\n  if (keyword === 'center') {\n    return '50%';\n  }\n  if (keyword === 'left' || keyword === 'top') {\n    return '0%';\n  }\n  if (keyword === 'right' || keyword === 'bottom') {\n    return '100%';\n  }\n  return keyword;\n}\n\n/**\n * Blink used them in code generation(css_properties.json5)\n */\nvar BUILT_IN_PROPERTIES = [{\n  /**\n   * used in CSS Layout API\n   * eg. `display: 'flex'`\n   */\n  n: 'display',\n  k: ['none']\n}, {\n  /**\n   * range [0.0, 1.0]\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/opacity\n   */\n  n: 'opacity',\n  \"int\": true,\n  inh: true,\n  d: '1',\n  syntax: PropertySyntax.OPACITY_VALUE\n}, {\n  /**\n   * inheritable, range [0.0, 1.0]\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-opacity\n   * @see https://svgwg.org/svg2-draft/painting.html#FillOpacity\n   */\n  n: 'fillOpacity',\n  \"int\": true,\n  inh: true,\n  d: '1',\n  syntax: PropertySyntax.OPACITY_VALUE\n}, {\n  /**\n   * inheritable, range [0.0, 1.0]\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-opacity\n   * @see https://svgwg.org/svg2-draft/painting.html#StrokeOpacity\n   */\n  n: 'strokeOpacity',\n  \"int\": true,\n  inh: true,\n  d: '1',\n  syntax: PropertySyntax.OPACITY_VALUE\n}, {\n  /**\n   * background-color is not inheritable\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Fills_and_Strokes\n   */\n  n: 'fill',\n  \"int\": true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.PAINT\n}, {\n  n: 'fillRule',\n  k: ['nonzero', 'evenodd'],\n  d: 'nonzero'\n},\n/**\n * default to none\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke#usage_notes\n */\n{\n  n: 'stroke',\n  \"int\": true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.PAINT,\n  /**\n   * Stroke 'none' won't affect geometry but others will.\n   */\n  l: true\n}, {\n  n: 'shadowType',\n  k: ['inner', 'outer', 'both'],\n  d: 'outer',\n  l: true\n}, {\n  n: 'shadowColor',\n  \"int\": true,\n  syntax: PropertySyntax.COLOR\n}, {\n  n: 'shadowOffsetX',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'shadowOffsetY',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'shadowBlur',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.SHADOW_BLUR\n}, {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-width\n   */\n  n: 'lineWidth',\n  \"int\": true,\n  inh: true,\n  d: '1',\n  l: true,\n  a: ['strokeWidth'],\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'increasedLineWidthForHitTesting',\n  inh: true,\n  d: '0',\n  l: true,\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'lineJoin',\n  inh: true,\n  l: true,\n  a: ['strokeLinejoin'],\n  k: ['miter', 'bevel', 'round'],\n  d: 'miter'\n}, {\n  n: 'lineCap',\n  inh: true,\n  l: true,\n  a: ['strokeLinecap'],\n  k: ['butt', 'round', 'square'],\n  d: 'butt'\n}, {\n  n: 'lineDash',\n  \"int\": true,\n  inh: true,\n  k: ['none'],\n  a: ['strokeDasharray'],\n  syntax: PropertySyntax.LENGTH_PERCENTAGE_12\n}, {\n  n: 'lineDashOffset',\n  \"int\": true,\n  inh: true,\n  d: '0',\n  a: ['strokeDashoffset'],\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'offsetPath',\n  syntax: PropertySyntax.DEFINED_PATH\n}, {\n  n: 'offsetDistance',\n  \"int\": true,\n  syntax: PropertySyntax.OFFSET_DISTANCE\n}, {\n  n: 'dx',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'dy',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'zIndex',\n  ind: true,\n  \"int\": true,\n  d: '0',\n  k: ['auto'],\n  syntax: PropertySyntax.Z_INDEX\n}, {\n  n: 'visibility',\n  k: ['visible', 'hidden'],\n  ind: true,\n  inh: true,\n  /**\n   * support interpolation\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/visibility#interpolation\n   */\n  \"int\": true,\n  d: 'visible'\n}, {\n  n: 'pointerEvents',\n  inh: true,\n  k: ['none', 'auto', 'stroke', 'fill', 'painted', 'visible', 'visiblestroke', 'visiblefill', 'visiblepainted',\n  // 'bounding-box',\n  'all'],\n  d: 'auto'\n}, {\n  n: 'filter',\n  ind: true,\n  l: true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.FILTER\n}, {\n  n: 'clipPath',\n  syntax: PropertySyntax.DEFINED_PATH\n}, {\n  n: 'textPath',\n  syntax: PropertySyntax.DEFINED_PATH\n}, {\n  n: 'textPathSide',\n  k: ['left', 'right'],\n  d: 'left'\n}, {\n  n: 'textPathStartOffset',\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'transform',\n  p: 100,\n  \"int\": true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.TRANSFORM\n}, {\n  n: 'transformOrigin',\n  p: 100,\n  d: '0 0',\n  // // int: true,\n  // d: (nodeName: string) => {\n  //   if (nodeName === Shape.CIRCLE || nodeName === Shape.ELLIPSE) {\n  //     return 'center';\n  //   }\n  //   if (nodeName === Shape.TEXT) {\n  //     return 'text-anchor';\n  //   }\n  //   return 'left top';\n  // },\n  l: true,\n  syntax: PropertySyntax.TRANSFORM_ORIGIN\n}, {\n  n: 'cx',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'cy',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'cz',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'r',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'rx',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'ry',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n},\n// Rect Image Group\n{\n  // x in local space\n  n: 'x',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  // y in local space\n  n: 'y',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  // z in local space\n  n: 'z',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'width',\n  \"int\": true,\n  l: true,\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/width\n   */\n  k: ['auto', 'fit-content', 'min-content', 'max-content'],\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'height',\n  \"int\": true,\n  l: true,\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/height\n   */\n  k: ['auto', 'fit-content', 'min-content', 'max-content'],\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'radius',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE_14\n},\n// Line\n{\n  n: 'x1',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'y1',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'z1',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'x2',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'y2',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'z2',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n},\n// Path\n{\n  n: 'd',\n  \"int\": true,\n  l: true,\n  d: '',\n  syntax: PropertySyntax.PATH,\n  p: 50\n},\n// Polyline & Polygon\n{\n  n: 'points',\n  /**\n   * support interpolation\n   */\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.LIST_OF_POINTS,\n  p: 50\n},\n// Text\n{\n  n: 'text',\n  l: true,\n  d: '',\n  syntax: PropertySyntax.TEXT,\n  p: 50\n}, {\n  n: 'textTransform',\n  l: true,\n  inh: true,\n  k: ['capitalize', 'uppercase', 'lowercase', 'none'],\n  d: 'none',\n  syntax: PropertySyntax.TEXT_TRANSFORM,\n  p: 51 // it must get parsed after text\n}, {\n  n: 'font',\n  l: true\n}, {\n  n: 'fontSize',\n  \"int\": true,\n  inh: true,\n  /**\n   * @see https://www.w3schools.com/css/css_font_size.asp\n   */\n  d: '16px',\n  l: true,\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'fontFamily',\n  l: true,\n  inh: true,\n  d: 'sans-serif'\n}, {\n  n: 'fontStyle',\n  l: true,\n  inh: true,\n  k: ['normal', 'italic', 'oblique'],\n  d: 'normal'\n}, {\n  n: 'fontWeight',\n  l: true,\n  inh: true,\n  k: ['normal', 'bold', 'bolder', 'lighter'],\n  d: 'normal'\n}, {\n  n: 'fontVariant',\n  l: true,\n  inh: true,\n  k: ['normal', 'small-caps'],\n  d: 'normal'\n}, {\n  n: 'lineHeight',\n  l: true,\n  syntax: PropertySyntax.LENGTH,\n  \"int\": true,\n  d: '0'\n}, {\n  n: 'letterSpacing',\n  l: true,\n  syntax: PropertySyntax.LENGTH,\n  \"int\": true,\n  d: '0'\n}, {\n  n: 'miterLimit',\n  l: true,\n  syntax: PropertySyntax.NUMBER,\n  d: function d(nodeName) {\n    if (nodeName === Shape.PATH || nodeName === Shape.POLYGON || nodeName === Shape.POLYLINE) {\n      return '4';\n    }\n    return '10';\n  }\n}, {\n  n: 'wordWrap',\n  l: true\n}, {\n  n: 'wordWrapWidth',\n  l: true\n}, {\n  n: 'maxLines',\n  l: true\n}, {\n  n: 'textOverflow',\n  l: true,\n  d: 'clip'\n}, {\n  n: 'leading',\n  l: true\n}, {\n  n: 'textBaseline',\n  l: true,\n  inh: true,\n  k: ['top', 'hanging', 'middle', 'alphabetic', 'ideographic', 'bottom'],\n  d: 'alphabetic'\n}, {\n  n: 'textAlign',\n  l: true,\n  inh: true,\n  k: ['start', 'center', 'middle', 'end', 'left', 'right'],\n  d: 'start'\n},\n// {\n//   n: 'whiteSpace',\n//   l: true,\n// },\n{\n  n: 'markerStart',\n  syntax: PropertySyntax.MARKER\n}, {\n  n: 'markerEnd',\n  syntax: PropertySyntax.MARKER\n}, {\n  n: 'markerMid',\n  syntax: PropertySyntax.MARKER\n}, {\n  n: 'markerStartOffset',\n  syntax: PropertySyntax.LENGTH,\n  l: true,\n  \"int\": true,\n  d: '0'\n}, {\n  n: 'markerEndOffset',\n  syntax: PropertySyntax.LENGTH,\n  l: true,\n  \"int\": true,\n  d: '0'\n}];\nvar GEOMETRY_ATTRIBUTE_NAMES = new Set(BUILT_IN_PROPERTIES.filter(function (n) {\n  return !!n.l;\n}).map(function (n) {\n  return n.n;\n}));\nvar propertyMetadataCache = {};\nvar DefaultStyleValueRegistry = /*#__PURE__*/function () {\n  function DefaultStyleValueRegistry(runtime) {\n    var _this = this;\n    _classCallCheck(this, DefaultStyleValueRegistry);\n    this.runtime = runtime;\n    BUILT_IN_PROPERTIES.forEach(function (property) {\n      _this.registerMetadata(property);\n    });\n  }\n  return _createClass(DefaultStyleValueRegistry, [{\n    key: \"registerMetadata\",\n    value: function registerMetadata(metadata) {\n      [metadata.n].concat(_toConsumableArray(metadata.a || [])).forEach(function (name) {\n        propertyMetadataCache[name] = metadata;\n      });\n    }\n  }, {\n    key: \"getPropertySyntax\",\n    value: function getPropertySyntax(syntax) {\n      return this.runtime.CSSPropertySyntaxFactory[syntax];\n    }\n\n    /**\n     * * parse value, eg.\n     * fill: 'red' => CSSRGB\n     * translateX: '10px' => CSSUnitValue { unit: 'px', value: 10 }\n     * fontSize: '2em' => { unit: 'px', value: 32 }\n     *\n     * * calculate used value\n     * * post process\n     */\n  }, {\n    key: \"processProperties\",\n    value: function processProperties(object, attributes) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        skipUpdateAttribute: false,\n        skipParse: false,\n        forceUpdateGeometry: false,\n        usedAttributes: [],\n        memoize: true\n      };\n      Object.assign(object.attributes, attributes);\n\n      // clipPath\n      var oldClipPath = object.parsedStyle.clipPath;\n      var oldOffsetPath = object.parsedStyle.offsetPath;\n      assignParsedStyle(object, attributes);\n      var needUpdateGeometry = !!options.forceUpdateGeometry;\n      if (!needUpdateGeometry) {\n        for (var i in attributes) {\n          if (GEOMETRY_ATTRIBUTE_NAMES.has(i)) {\n            needUpdateGeometry = true;\n            break;\n          }\n        }\n      }\n      var list = getParsedStyleListOf(object);\n      if (list.has('fill') && attributes.fill) {\n        object.parsedStyle.fill = parseColor(attributes.fill);\n      }\n      if (list.has('stroke') && attributes.stroke) {\n        object.parsedStyle.stroke = parseColor(attributes.stroke);\n      }\n      if (list.has('shadowColor') && attributes.shadowColor) {\n        object.parsedStyle.shadowColor = parseColor(attributes.shadowColor);\n      }\n      if (list.has('filter') && attributes.filter) {\n        object.parsedStyle.filter = parseFilter(attributes.filter);\n      }\n      // Rect\n      // @ts-ignore\n      if (list.has('radius') && !isNil(attributes.radius)) {\n        // @ts-ignore\n        object.parsedStyle.radius = parseDimensionArrayFormat(\n        // @ts-ignore\n        attributes.radius, 4);\n      }\n      // Polyline\n      if (list.has('lineDash') && !isNil(attributes.lineDash)) {\n        // dom,webgl\n        object.parsedStyle.lineDash = parseDimensionArrayFormat(attributes.lineDash, 'even');\n      }\n      // @ts-ignore\n      if (list.has('points') && attributes.points) {\n        // @ts-ignore\n        object.parsedStyle.points = parsePoints(attributes.points);\n      }\n      // Path\n      // @ts-ignore\n      if (list.has('d') && attributes.d === '') {\n        object.parsedStyle.d = _objectSpread({}, EMPTY_PARSED_PATH);\n      }\n      // @ts-ignore\n      if (list.has('d') && attributes.d) {\n        object.parsedStyle.d = parsePath(\n        // @ts-ignore\n        attributes.d);\n      }\n      // Text\n      if (list.has('textTransform') && attributes.textTransform) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.TEXT_TRANSFORM].calculator(null, null, {\n          value: attributes.textTransform\n        }, object, null);\n      }\n      if (list.has('clipPath') && !isUndefined(attributes.clipPath)) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.DEFINED_PATH].calculator('clipPath', oldClipPath, attributes.clipPath, object, this.runtime);\n      }\n      if (list.has('offsetPath') && attributes.offsetPath) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.DEFINED_PATH].calculator('offsetPath', oldOffsetPath, attributes.offsetPath, object, this.runtime);\n      }\n      if (list.has('transform') && attributes.transform) {\n        object.parsedStyle.transform = parseTransform(attributes.transform);\n      }\n      if (list.has('transformOrigin') && attributes.transformOrigin) {\n        object.parsedStyle.transformOrigin = parseTransformOrigin(attributes.transformOrigin);\n      }\n      // Marker\n      // @ts-ignore\n      if (list.has('markerStart') && attributes.markerStart) {\n        object.parsedStyle.markerStart = this.runtime.CSSPropertySyntaxFactory[PropertySyntax.MARKER].calculator(null,\n        // @ts-ignore\n        attributes.markerStart,\n        // @ts-ignore\n        attributes.markerStart, null, null);\n      }\n      // @ts-ignore\n      if (list.has('markerEnd') && attributes.markerEnd) {\n        object.parsedStyle.markerEnd = this.runtime.CSSPropertySyntaxFactory[PropertySyntax.MARKER].calculator(null,\n        // @ts-ignore\n        attributes.markerEnd,\n        // @ts-ignore\n        attributes.markerEnd, null, null);\n      }\n      // @ts-ignore\n      if (list.has('markerMid') && attributes.markerMid) {\n        object.parsedStyle.markerMid = this.runtime.CSSPropertySyntaxFactory[PropertySyntax.MARKER].calculator('',\n        // @ts-ignore\n        attributes.markerMid,\n        // @ts-ignore\n        attributes.markerMid, null, null);\n      }\n      if (list.has('zIndex') && !isNil(attributes.zIndex)) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.Z_INDEX].postProcessor(object);\n      }\n      if (list.has('offsetDistance') && !isNil(attributes.offsetDistance)) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.OFFSET_DISTANCE].postProcessor(object);\n      }\n      if (list.has('transform') && attributes.transform) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.TRANSFORM].postProcessor(object);\n      }\n      if (list.has('transformOrigin') && attributes.transformOrigin) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.TRANSFORM_ORIGIN].postProcessor(object);\n      }\n      if (needUpdateGeometry) {\n        object.geometry.dirty = true;\n        object.renderable.boundsDirty = true;\n        object.renderable.renderBoundsDirty = true;\n        if (!options.forceUpdateGeometry) {\n          this.runtime.sceneGraphService.dirtifyToRoot(object);\n        }\n      }\n    }\n\n    /**\n     * update geometry when relative props changed,\n     * eg. r of Circle, width/height of Rect\n     */\n  }, {\n    key: \"updateGeometry\",\n    value: function updateGeometry(object) {\n      var nodeName = object.nodeName;\n      var geometryUpdater = this.runtime.geometryUpdaterFactory[nodeName];\n      if (geometryUpdater) {\n        var geometry = object.geometry;\n        if (!geometry.contentBounds) {\n          geometry.contentBounds = new AABB();\n        }\n        if (!geometry.renderBounds) {\n          geometry.renderBounds = new AABB();\n        }\n        var parsedStyle = object.parsedStyle;\n        var _geometryUpdater$upda = geometryUpdater.update(parsedStyle, object),\n          _geometryUpdater$upda2 = _geometryUpdater$upda.cx,\n          cx = _geometryUpdater$upda2 === void 0 ? 0 : _geometryUpdater$upda2,\n          _geometryUpdater$upda3 = _geometryUpdater$upda.cy,\n          cy = _geometryUpdater$upda3 === void 0 ? 0 : _geometryUpdater$upda3,\n          _geometryUpdater$upda4 = _geometryUpdater$upda.cz,\n          cz = _geometryUpdater$upda4 === void 0 ? 0 : _geometryUpdater$upda4,\n          _geometryUpdater$upda5 = _geometryUpdater$upda.hwidth,\n          hwidth = _geometryUpdater$upda5 === void 0 ? 0 : _geometryUpdater$upda5,\n          _geometryUpdater$upda6 = _geometryUpdater$upda.hheight,\n          hheight = _geometryUpdater$upda6 === void 0 ? 0 : _geometryUpdater$upda6,\n          _geometryUpdater$upda7 = _geometryUpdater$upda.hdepth,\n          hdepth = _geometryUpdater$upda7 === void 0 ? 0 : _geometryUpdater$upda7;\n        // init with content box\n        var halfExtents = [Math.abs(hwidth), Math.abs(hheight), hdepth];\n        // anchor is center by default, don't account for lineWidth here\n        var stroke = parsedStyle.stroke,\n          _parsedStyle$lineWidt = parsedStyle.lineWidth,\n          lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n          _parsedStyle$increase = parsedStyle.increasedLineWidthForHitTesting,\n          increasedLineWidthForHitTesting = _parsedStyle$increase === void 0 ? 0 : _parsedStyle$increase,\n          _parsedStyle$shadowTy = parsedStyle.shadowType,\n          shadowType = _parsedStyle$shadowTy === void 0 ? 'outer' : _parsedStyle$shadowTy,\n          shadowColor = parsedStyle.shadowColor,\n          _parsedStyle$filter = parsedStyle.filter,\n          filter = _parsedStyle$filter === void 0 ? [] : _parsedStyle$filter,\n          transformOrigin = parsedStyle.transformOrigin;\n        var center = [cx, cy, cz];\n        // update geometry's AABB\n        geometry.contentBounds.update(center, halfExtents);\n        // @see https://github.molgen.mpg.de/git-mirror/cairo/blob/master/src/cairo-stroke-style.c#L97..L128\n        var expansion = nodeName === Shape.POLYLINE || nodeName === Shape.POLYGON || nodeName === Shape.PATH ? Math.SQRT2 : 0.5;\n        // append border only if stroke existed\n        var hasStroke = stroke && !stroke.isNone;\n        if (hasStroke) {\n          var halfLineWidth = ((lineWidth || 0) + (increasedLineWidthForHitTesting || 0)) * expansion;\n          halfExtents[0] += halfLineWidth;\n          halfExtents[1] += halfLineWidth;\n        }\n        geometry.renderBounds.update(center, halfExtents);\n        // account for shadow, only support constant value now\n        if (shadowColor && shadowType && shadowType !== 'inner') {\n          var _geometry$renderBound = geometry.renderBounds,\n            min = _geometry$renderBound.min,\n            max = _geometry$renderBound.max;\n          var shadowBlur = parsedStyle.shadowBlur,\n            shadowOffsetX = parsedStyle.shadowOffsetX,\n            shadowOffsetY = parsedStyle.shadowOffsetY;\n          var shadowBlurInPixels = shadowBlur || 0;\n          var shadowOffsetXInPixels = shadowOffsetX || 0;\n          var shadowOffsetYInPixels = shadowOffsetY || 0;\n          var shadowLeft = min[0] - shadowBlurInPixels + shadowOffsetXInPixels;\n          var shadowRight = max[0] + shadowBlurInPixels + shadowOffsetXInPixels;\n          var shadowTop = min[1] - shadowBlurInPixels + shadowOffsetYInPixels;\n          var shadowBottom = max[1] + shadowBlurInPixels + shadowOffsetYInPixels;\n          min[0] = Math.min(min[0], shadowLeft);\n          max[0] = Math.max(max[0], shadowRight);\n          min[1] = Math.min(min[1], shadowTop);\n          max[1] = Math.max(max[1], shadowBottom);\n          geometry.renderBounds.setMinMax(min, max);\n        }\n        // account for filter, eg. blur(5px), drop-shadow()\n        filter.forEach(function (_ref) {\n          var name = _ref.name,\n            params = _ref.params;\n          if (name === 'blur') {\n            var blurRadius = params[0].value;\n            geometry.renderBounds.update(geometry.renderBounds.center, vec3.add(geometry.renderBounds.halfExtents, geometry.renderBounds.halfExtents, [blurRadius, blurRadius, 0]));\n          } else if (name === 'drop-shadow') {\n            var _shadowOffsetX = params[0].value;\n            var _shadowOffsetY = params[1].value;\n            var _shadowBlur = params[2].value;\n            var _geometry$renderBound2 = geometry.renderBounds,\n              _min = _geometry$renderBound2.min,\n              _max = _geometry$renderBound2.max;\n            var _shadowLeft = _min[0] - _shadowBlur + _shadowOffsetX;\n            var _shadowRight = _max[0] + _shadowBlur + _shadowOffsetX;\n            var _shadowTop = _min[1] - _shadowBlur + _shadowOffsetY;\n            var _shadowBottom = _max[1] + _shadowBlur + _shadowOffsetY;\n            _min[0] = Math.min(_min[0], _shadowLeft);\n            _max[0] = Math.max(_max[0], _shadowRight);\n            _min[1] = Math.min(_min[1], _shadowTop);\n            _max[1] = Math.max(_max[1], _shadowBottom);\n            geometry.renderBounds.setMinMax(_min, _max);\n          }\n        });\n        object.geometry.dirty = false;\n\n        // @see https://github.com/antvis/g/issues/957\n        var flipY = hwidth < 0;\n        var flipX = hheight < 0;\n        // set transform origin\n        var usedOriginXValue = (flipY ? -1 : 1) * (transformOrigin ? convertPercentUnit(transformOrigin[0], 0, object, true) : 0);\n        var usedOriginYValue = (flipX ? -1 : 1) * (transformOrigin ? convertPercentUnit(transformOrigin[1], 1, object, true) : 0);\n        if (usedOriginXValue || usedOriginYValue) {\n          object.setOrigin(usedOriginXValue, usedOriginYValue);\n        }\n      }\n    }\n  }, {\n    key: \"updateSizeAttenuation\",\n    value: function updateSizeAttenuation(node, zoom) {\n      if (node.style.isSizeAttenuation) {\n        if (!node.style.rawLineWidth) {\n          node.style.rawLineWidth = node.style.lineWidth;\n        }\n        node.style.lineWidth = (node.style.rawLineWidth || 1) / zoom;\n        if (node.nodeName === Shape.CIRCLE) {\n          if (!node.style.rawR) {\n            node.style.rawR = node.style.r;\n          }\n          node.style.r = (node.style.rawR || 1) / zoom;\n        }\n      } else {\n        if (node.style.rawLineWidth) {\n          node.style.lineWidth = node.style.rawLineWidth;\n          delete node.style.rawLineWidth;\n        }\n        if (node.nodeName === Shape.CIRCLE) {\n          if (node.style.rawR) {\n            node.style.r = node.style.rawR;\n            delete node.style.rawR;\n          }\n        }\n      }\n    }\n  }]);\n}();\nfunction assignParsedStyle(object, attributes) {\n  var list = getParsedStyleListOf(object);\n  for (var key in attributes) {\n    if (list.has(key)) {\n      object.parsedStyle[key] = attributes[key];\n    }\n  }\n}\nfunction getParsedStyleListOf(object) {\n  return object.constructor.PARSED_STYLE_LIST;\n}\n\nvar CSSPropertyAngle = /*#__PURE__*/function () {\n  function CSSPropertyAngle() {\n    _classCallCheck(this, CSSPropertyAngle);\n    this.mixer = mergeNumbers;\n  }\n  return _createClass(CSSPropertyAngle, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed, object) {\n      return convertAngleUnit(parsed);\n    }\n  }]);\n}();\n\n/**\n * clipPath / textPath / offsetPath\n */\nvar CSSPropertyClipPath = /*#__PURE__*/function () {\n  function CSSPropertyClipPath() {\n    _classCallCheck(this, CSSPropertyClipPath);\n  }\n  return _createClass(CSSPropertyClipPath, [{\n    key: \"calculator\",\n    value: function calculator(name, oldPath, newPath, object, runtime) {\n      // unset\n      if (newPath instanceof CSSKeywordValue) {\n        newPath = null;\n      }\n      runtime.sceneGraphService.updateDisplayObjectDependency(name, oldPath, newPath, object);\n      if (name === 'clipPath') {\n        // should affect children\n        object.forEach(function (leaf) {\n          if (leaf.childNodes.length === 0) {\n            runtime.sceneGraphService.dirtifyToRoot(leaf);\n          }\n        });\n      }\n      return newPath;\n    }\n  }]);\n}();\n\nvar CSSPropertyColor = /*#__PURE__*/function () {\n  function CSSPropertyColor() {\n    _classCallCheck(this, CSSPropertyColor);\n    this.parser = parseColor;\n    this.mixer = mergeColors;\n  }\n  return _createClass(CSSPropertyColor, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed, object) {\n      if (parsed instanceof CSSKeywordValue) {\n        // 'unset' 'none'\n        return parsed.value === 'none' ? noneColor : transparentColor;\n      }\n      return parsed;\n    }\n  }]);\n}();\n\nvar CSSPropertyFilter = /*#__PURE__*/function () {\n  function CSSPropertyFilter() {\n    _classCallCheck(this, CSSPropertyFilter);\n  }\n  return _createClass(CSSPropertyFilter, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed) {\n      // unset or none\n      if (parsed instanceof CSSKeywordValue) {\n        return [];\n      }\n      return parsed;\n    }\n  }]);\n}();\n\nfunction getFontSize(object) {\n  var _ref = object.parsedStyle,\n    fontSize = _ref.fontSize;\n  return isNil(fontSize) ? null : fontSize;\n}\n\n/**\n * <length> & <percentage>\n */\nvar CSSPropertyLengthOrPercentage = /*#__PURE__*/function () {\n  function CSSPropertyLengthOrPercentage() {\n    _classCallCheck(this, CSSPropertyLengthOrPercentage);\n    this.mixer = mergeNumbers;\n  }\n  return _createClass(CSSPropertyLengthOrPercentage, [{\n    key: \"calculator\",\n    value:\n    /**\n     * according to parent's bounds\n     *\n     * @example\n     * CSS.percent(50) -> CSS.px(0.5 * parent.width)\n     */\n    function calculator(name, oldParsed, computed, object, runtime) {\n      if (isNumber(computed)) {\n        return computed;\n      }\n      if (CSSUnitValue.isRelativeUnit(computed.unit)) {\n        if (computed.unit === UnitType.kPercentage) {\n          // TODO: merge dimensions\n          return 0;\n        }\n        if (computed.unit === UnitType.kEms) {\n          if (object.parentNode) {\n            var fontSize = getFontSize(object.parentNode);\n            if (fontSize) {\n              fontSize *= computed.value;\n              return fontSize;\n            }\n          }\n          return 0;\n        }\n        if (computed.unit === UnitType.kRems) {\n          var _object$ownerDocument;\n          if (object !== null && object !== void 0 && (_object$ownerDocument = object.ownerDocument) !== null && _object$ownerDocument !== void 0 && _object$ownerDocument.documentElement) {\n            var _fontSize = getFontSize(object.ownerDocument.documentElement);\n            if (_fontSize) {\n              _fontSize *= computed.value;\n              return _fontSize;\n            }\n          }\n          return 0;\n        }\n      } else {\n        // remove listener if exists\n        // registry.unregisterParentGeometryBoundsChangedHandler(object, name);\n\n        // return absolute value\n        return computed.value;\n      }\n    }\n  }]);\n}();\n\n/**\n * format to Tuple2<CSSUnitValue>\n *\n * @example\n * rect.style.lineDash = 10;\n * rect.style.lineDash = [10, 10];\n * rect.style.lineDash = '10 10';\n */\nvar CSSPropertyLengthOrPercentage12 = /*#__PURE__*/function () {\n  function CSSPropertyLengthOrPercentage12() {\n    _classCallCheck(this, CSSPropertyLengthOrPercentage12);\n    this.mixer = mergeNumberLists;\n  }\n  return _createClass(CSSPropertyLengthOrPercentage12, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed) {\n      return computed.map(function (c) {\n        return c.value;\n      });\n    }\n  }]);\n}();\n\n/**\n * used in rounded rect\n *\n * @example\n * rect.style.radius = 10;\n * rect.style.radius = '10 10';\n * rect.style.radius = '10 10 10 10';\n */\nvar CSSPropertyLengthOrPercentage14 = /*#__PURE__*/function () {\n  function CSSPropertyLengthOrPercentage14() {\n    _classCallCheck(this, CSSPropertyLengthOrPercentage14);\n    this.mixer = mergeNumberLists;\n  }\n  return _createClass(CSSPropertyLengthOrPercentage14, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed) {\n      return computed.map(function (c) {\n        return c.value;\n      });\n    }\n  }]);\n}();\n\nvar CSSPropertyMarker = /*#__PURE__*/function () {\n  function CSSPropertyMarker() {\n    _classCallCheck(this, CSSPropertyMarker);\n  }\n  return _createClass(CSSPropertyMarker, [{\n    key: \"calculator\",\n    value: function calculator(name, oldMarker, newMarker, object) {\n      var _newMarker;\n      // unset\n      if (newMarker instanceof CSSKeywordValue) {\n        newMarker = null;\n      }\n      var cloned = (_newMarker = newMarker) === null || _newMarker === void 0 ? void 0 : _newMarker.cloneNode(true);\n      if (cloned) {\n        // FIXME: SVG should not inherit parent's style, add a flag here\n        cloned.style.isMarker = true;\n      }\n      return cloned;\n    }\n  }]);\n}();\n\nvar CSSPropertyNumber = /*#__PURE__*/function () {\n  function CSSPropertyNumber() {\n    _classCallCheck(this, CSSPropertyNumber);\n    this.mixer = mergeNumbers;\n  }\n  return _createClass(CSSPropertyNumber, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed) {\n      return computed.value;\n    }\n  }]);\n}();\n\nvar CSSPropertyOffsetDistance = /*#__PURE__*/function () {\n  function CSSPropertyOffsetDistance() {\n    _classCallCheck(this, CSSPropertyOffsetDistance);\n    this.mixer = clampedMergeNumbers(0, 1);\n  }\n  return _createClass(CSSPropertyOffsetDistance, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed) {\n      return computed.value;\n    }\n  }, {\n    key: \"postProcessor\",\n    value: function postProcessor(object) {\n      var _object$parsedStyle = object.parsedStyle,\n        offsetPath = _object$parsedStyle.offsetPath,\n        offsetDistance = _object$parsedStyle.offsetDistance;\n      if (!offsetPath) {\n        return;\n      }\n      var nodeName = offsetPath.nodeName;\n      if (nodeName === Shape.LINE || nodeName === Shape.PATH || nodeName === Shape.POLYLINE) {\n        // set position in world space\n        var point = offsetPath.getPoint(offsetDistance);\n        if (point) {\n          object.setLocalPosition(point.x, point.y);\n        }\n      }\n    }\n  }]);\n}();\n\n/**\n * opacity\n */\nvar CSSPropertyOpacity = /*#__PURE__*/function () {\n  function CSSPropertyOpacity() {\n    _classCallCheck(this, CSSPropertyOpacity);\n    this.mixer = clampedMergeNumbers(0, 1);\n  }\n  return _createClass(CSSPropertyOpacity, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed) {\n      return computed.value;\n    }\n  }]);\n}();\n\nvar CSSPropertyPath = /*#__PURE__*/function () {\n  function CSSPropertyPath() {\n    _classCallCheck(this, CSSPropertyPath);\n    /**\n     * path2Curve\n     */\n    this.parser = parsePath;\n    this.mixer = mergePaths;\n  }\n  return _createClass(CSSPropertyPath, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed) {\n      // unset\n      if (parsed instanceof CSSKeywordValue && parsed.value === 'unset') {\n        return {\n          absolutePath: [],\n          hasArc: false,\n          segments: [],\n          polygons: [],\n          polylines: [],\n          curve: null,\n          totalLength: 0,\n          rect: new Rectangle(0, 0, 0, 0)\n        };\n      }\n      return parsed;\n    }\n  }]);\n}();\n\nvar CSSPropertyPoints = /*#__PURE__*/_createClass(function CSSPropertyPoints() {\n  _classCallCheck(this, CSSPropertyPoints);\n  this.mixer = mergePoints;\n});\n\nvar CSSPropertyShadowBlur = /*#__PURE__*/function (_CSSPropertyLengthOrP) {\n  function CSSPropertyShadowBlur() {\n    var _this;\n    _classCallCheck(this, CSSPropertyShadowBlur);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, CSSPropertyShadowBlur, [].concat(args));\n    _this.mixer = clampedMergeNumbers(0, Infinity);\n    return _this;\n  }\n  _inherits(CSSPropertyShadowBlur, _CSSPropertyLengthOrP);\n  return _createClass(CSSPropertyShadowBlur);\n}(CSSPropertyLengthOrPercentage);\n\nvar CSSPropertyText = /*#__PURE__*/function () {\n  function CSSPropertyText() {\n    _classCallCheck(this, CSSPropertyText);\n  }\n  return _createClass(CSSPropertyText, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed, object) {\n      if (parsed instanceof CSSKeywordValue) {\n        if (parsed.value === 'unset') {\n          return '';\n        }\n        return parsed.value;\n      }\n\n      // allow number as valid text content\n      return \"\".concat(parsed);\n    }\n  }, {\n    key: \"postProcessor\",\n    value: function postProcessor(object) {\n      object.nodeValue = \"\".concat(object.parsedStyle.text) || '';\n    }\n  }]);\n}();\n\n/**\n * it must transform after text get parsed\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/text-transform\n */\nvar CSSPropertyTextTransform = /*#__PURE__*/function () {\n  function CSSPropertyTextTransform() {\n    _classCallCheck(this, CSSPropertyTextTransform);\n  }\n  return _createClass(CSSPropertyTextTransform, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed, object) {\n      var rawText = object.getAttribute('text');\n      if (rawText) {\n        var transformedText = rawText;\n        if (parsed.value === 'capitalize') {\n          transformedText = rawText.charAt(0).toUpperCase() + rawText.slice(1);\n        } else if (parsed.value === 'lowercase') {\n          transformedText = rawText.toLowerCase();\n        } else if (parsed.value === 'uppercase') {\n          transformedText = rawText.toUpperCase();\n        }\n        object.parsedStyle.text = transformedText;\n      }\n      return parsed.value;\n    }\n  }]);\n}();\n\nvar definedProps = function definedProps(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      v = _ref2[1];\n    return v !== undefined;\n  }));\n};\n\nvar CANVAS_Map = new WeakMap();\n\n/**\n * destroy existed canvas with the same id\n */\nfunction cleanExistedCanvas(container, canvas, cleanUp) {\n  if (container) {\n    var $dom = typeof container === 'string' ? document.getElementById(container) : container;\n    if (CANVAS_Map.has($dom)) CANVAS_Map.get($dom).destroy(cleanUp);\n    CANVAS_Map.set($dom, canvas);\n  }\n}\nvar isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\nfunction isElement(target) {\n  return !!target.getAttribute;\n}\nfunction sortedIndex(array, value) {\n  var low = 0;\n  var high = array.length;\n  while (low < high) {\n    var mid = low + high >>> 1;\n    if (sortByZIndex(array[mid], value) < 0) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return low;\n}\nfunction sortByZIndex(o1, o2) {\n  var zIndex1 = Number(o1.parsedStyle.zIndex || 0);\n  var zIndex2 = Number(o2.parsedStyle.zIndex || 0);\n  if (zIndex1 === zIndex2) {\n    var parent = o1.parentNode;\n    if (parent) {\n      var children = parent.childNodes || [];\n      return children.indexOf(o1) - children.indexOf(o2);\n    }\n  }\n  return zIndex1 - zIndex2;\n}\nfunction findClosestClipPathTarget(object) {\n  var el = object;\n  do {\n    var _el$parsedStyle;\n    var clipPath = (_el$parsedStyle = el.parsedStyle) === null || _el$parsedStyle === void 0 ? void 0 : _el$parsedStyle.clipPath;\n    if (clipPath) return el;\n    el = el.parentElement;\n  } while (el !== null);\n  return null;\n}\nvar PX_SUFFIX = 'px';\nfunction setDOMSize($el, width, height) {\n  if (isBrowser && $el.style) {\n    $el.style.width = width + PX_SUFFIX;\n    $el.style.height = height + PX_SUFFIX;\n  }\n}\nfunction getStyle($el, property) {\n  if (isBrowser) {\n    return document.defaultView.getComputedStyle($el, null).getPropertyValue(property);\n  }\n}\nfunction getWidth($el) {\n  var width = getStyle($el, 'width');\n  if (width === 'auto') {\n    return $el.offsetWidth;\n  }\n  return parseFloat(width);\n}\nfunction getHeight($el) {\n  var height = getStyle($el, 'height');\n  if (height === 'auto') {\n    return $el.offsetHeight;\n  }\n  return parseFloat(height);\n}\n\n// borrow from hammer.js\nvar MOUSE_POINTER_ID = 1;\nvar TOUCH_TO_POINTER = {\n  touchstart: 'pointerdown',\n  touchend: 'pointerup',\n  touchendoutside: 'pointerupoutside',\n  touchmove: 'pointermove',\n  touchcancel: 'pointercancel'\n};\nvar clock = typeof performance === 'object' && performance.now ? performance : Date;\n\nfunction isInFragment(node) {\n  if (node.nodeName === Shape.FRAGMENT) return true;\n  return node.getRootNode().nodeName === Shape.FRAGMENT;\n}\n\nfunction isFillOrStrokeAffected() {\n  var pointerEvents = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'auto';\n  var fill = arguments.length > 1 ? arguments[1] : undefined;\n  var stroke = arguments.length > 2 ? arguments[2] : undefined;\n  // account for pointerEvents\n  // @see https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\n\n  var hasFill = false;\n  var hasStroke = false;\n  var isFillOtherThanNone = !!fill && !fill.isNone;\n  var isStrokeOtherThanNone = !!stroke && !stroke.isNone;\n  if (pointerEvents === 'visiblepainted' || pointerEvents === 'painted' || pointerEvents === 'auto') {\n    hasFill = isFillOtherThanNone;\n    hasStroke = isStrokeOtherThanNone;\n  } else if (pointerEvents === 'visiblefill' || pointerEvents === 'fill') {\n    hasFill = true;\n  } else if (pointerEvents === 'visiblestroke' || pointerEvents === 'stroke') {\n    hasStroke = true;\n  } else if (pointerEvents === 'visible' || pointerEvents === 'all') {\n    // The values of the fill and stroke do not affect event processing.\n    hasFill = true;\n    hasStroke = true;\n  }\n  return [hasFill, hasStroke];\n}\n\n/**\n * Thanks for following contributor of codes\n * https://gist.github.com/1866474\n * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n * https://github.com/Financial-Times/polyfill-library/blob/master/polyfills/requestAnimationFrame/polyfill.js\n * */\n\nvar uId = 1;\nvar uniqueId = function uniqueId() {\n  return uId++;\n};\n\n// We use `self` instead of `window` for `WebWorker` support.\nvar root =\n// eslint-disable-next-line no-nested-ternary\ntypeof self === 'object' && self.self === self ? self :\n// @ts-ignore\ntypeof global === 'object' && global.global === global ?\n// @ts-ignore\nglobal : {};\nvar nowOffset = Date.now();\n\n// use performance api if exist, otherwise use Date.now.\n// Date.now polyfill required.\nvar pnow = function pnow() {\n  if (root.performance && typeof root.performance.now === 'function') {\n    return root.performance.now();\n  }\n\n  // fallback\n  return Date.now() - nowOffset;\n};\nvar reservedCBs = {};\nvar lastTime = Date.now();\nvar polyfillRaf = function polyfillRaf(callback) {\n  if (typeof callback !== 'function') {\n    throw new TypeError(\"\".concat(callback, \" is not a function\"));\n  }\n  var currentTime = Date.now();\n  var gap = currentTime - lastTime;\n  var delay = gap > 16 ? 0 : 16 - gap;\n  var id = uniqueId();\n  reservedCBs[id] = callback;\n\n  // keys(reservedCBs).length > 1   setTimeout   .\n  //  callback     reservedCBs   return\n  if (Object.keys(reservedCBs).length > 1) return id;\n  setTimeout(function () {\n    lastTime = currentTime;\n    var copied = reservedCBs;\n    reservedCBs = {};\n    Object.keys(copied).forEach(function (key) {\n      return copied[key](pnow());\n    });\n  }, delay);\n  return id;\n};\nvar polyfillCaf = function polyfillCaf(id) {\n  delete reservedCBs[id];\n};\nvar vendorPrefixes = ['', 'webkit', 'moz', 'ms', 'o'];\nvar getRequestAnimationFrame = function getRequestAnimationFrame(vp) {\n  if (typeof vp !== 'string') return polyfillRaf;\n  if (vp === '') return root.requestAnimationFrame;\n  return root[\"\".concat(vp, \"RequestAnimationFrame\")];\n};\nvar getCancelAnimationFrame = function getCancelAnimationFrame(vp) {\n  if (typeof vp !== 'string') return polyfillCaf;\n  if (vp === '') return root.cancelAnimationFrame;\n  return root[\"\".concat(vp, \"CancelAnimationFrame\")] || root[\"\".concat(vp, \"CancelRequestAnimationFrame\")];\n};\nvar find = function find(arr, predicate) {\n  var i = 0;\n  while (arr[i] !== undefined) {\n    if (predicate(arr[i])) return arr[i];\n    i += 1;\n  }\n};\nvar vp = find(vendorPrefixes, function (vp) {\n  return !!getRequestAnimationFrame(vp);\n});\nvar raf = getRequestAnimationFrame(vp);\nvar caf = getCancelAnimationFrame(vp);\nroot.requestAnimationFrame = raf;\nroot.cancelAnimationFrame = caf;\n\nvar AsyncParallelHook = /*#__PURE__*/function () {\n  function AsyncParallelHook() {\n    _classCallCheck(this, AsyncParallelHook);\n    this.callbacks = [];\n  }\n  return _createClass(AsyncParallelHook, [{\n    key: \"getCallbacksNum\",\n    value: function getCallbacksNum() {\n      return this.callbacks.length;\n    }\n  }, {\n    key: \"tapPromise\",\n    value: function tapPromise(options, fn) {\n      this.callbacks.push(fn);\n    }\n  }, {\n    key: \"promise\",\n    value: function promise() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return Promise.all(this.callbacks.map(function (callback) {\n        return callback.apply(void 0, args);\n      }));\n    }\n  }]);\n}();\n\nvar AsyncSeriesWaterfallHook = /*#__PURE__*/function () {\n  function AsyncSeriesWaterfallHook() {\n    _classCallCheck(this, AsyncSeriesWaterfallHook);\n    this.callbacks = [];\n  }\n  return _createClass(AsyncSeriesWaterfallHook, [{\n    key: \"tapPromise\",\n    value: function tapPromise(options, fn) {\n      this.callbacks.push(fn);\n    }\n  }, {\n    key: \"promise\",\n    value: function () {\n      var _promise = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this$callbacks,\n          result,\n          i,\n          callback,\n          _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!this.callbacks.length) {\n                _context.next = 14;\n                break;\n              }\n              _context.next = 3;\n              return (_this$callbacks = this.callbacks)[0].apply(_this$callbacks, _args);\n            case 3:\n              result = _context.sent;\n              i = 0;\n            case 5:\n              if (!(i < this.callbacks.length - 1)) {\n                _context.next = 13;\n                break;\n              }\n              callback = this.callbacks[i]; // @ts-ignore\n              // eslint-disable-next-line no-await-in-loop\n              _context.next = 9;\n              return callback(result);\n            case 9:\n              result = _context.sent;\n            case 10:\n              i++;\n              _context.next = 5;\n              break;\n            case 13:\n              return _context.abrupt(\"return\", result);\n            case 14:\n              return _context.abrupt(\"return\", null);\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function promise() {\n        return _promise.apply(this, arguments);\n      }\n      return promise;\n    }()\n  }]);\n}();\n\nvar SyncHook = /*#__PURE__*/function () {\n  function SyncHook() {\n    _classCallCheck(this, SyncHook);\n    this.callbacks = [];\n  }\n  return _createClass(SyncHook, [{\n    key: \"tap\",\n    value: function tap(options, fn) {\n      this.callbacks.push(fn);\n    }\n  }, {\n    key: \"call\",\n    value: function call() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      /* eslint-disable-next-line prefer-rest-params */\n      var argsArr = arguments;\n      this.callbacks.forEach(function (callback) {\n        /* eslint-disable-next-line prefer-spread */\n        callback.apply(undefined, argsArr);\n      });\n    }\n  }]);\n}();\n\nvar SyncWaterfallHook = /*#__PURE__*/function () {\n  function SyncWaterfallHook() {\n    _classCallCheck(this, SyncWaterfallHook);\n    this.callbacks = [];\n  }\n  return _createClass(SyncWaterfallHook, [{\n    key: \"tap\",\n    value: function tap(options, fn) {\n      this.callbacks.push(fn);\n    }\n  }, {\n    key: \"call\",\n    value: function call() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      if (this.callbacks.length) {\n        /* eslint-disable-next-line prefer-rest-params */\n        var argsArr = arguments;\n        /* eslint-disable-next-line prefer-spread */\n        var result = this.callbacks[0].apply(undefined, argsArr);\n        for (var i = 0; i < this.callbacks.length - 1; i++) {\n          var callback = this.callbacks[i];\n          // @ts-ignore\n          result = callback(result);\n        }\n        return result;\n      }\n      return null;\n    }\n  }]);\n}();\n\nvar genericFontFamilies = ['serif', 'sans-serif', 'monospace', 'cursive', 'fantasy', 'system-ui'];\nvar stringRegExp = /([\\\"\\'])[^\\'\\\"]+\\1/;\nfunction toFontString(attributes) {\n  var _attributes$fontSize = attributes.fontSize,\n    fontSize = _attributes$fontSize === void 0 ? 16 : _attributes$fontSize,\n    _attributes$fontFamil = attributes.fontFamily,\n    fontFamily = _attributes$fontFamil === void 0 ? 'sans-serif' : _attributes$fontFamil,\n    _attributes$fontStyle = attributes.fontStyle,\n    fontStyle = _attributes$fontStyle === void 0 ? 'normal' : _attributes$fontStyle,\n    _attributes$fontVaria = attributes.fontVariant,\n    fontVariant = _attributes$fontVaria === void 0 ? 'normal' : _attributes$fontVaria,\n    _attributes$fontWeigh = attributes.fontWeight,\n    fontWeight = _attributes$fontWeigh === void 0 ? 'normal' : _attributes$fontWeigh;\n\n  // build canvas api font setting from individual components. Convert a numeric this.fontSize to px\n  // const fontSizeString: string = isNumber(fontSize) ? `${fontSize}px` : fontSize.toString();\n  var fontSizeString = isNumber(fontSize) && \"\".concat(fontSize, \"px\") || '16px';\n  // Clean-up fontFamily property by quoting each font name\n  // this will support font names with spaces\n\n  var fontFamilies = fontFamily.split(',');\n  for (var i = fontFamilies.length - 1; i >= 0; i--) {\n    // Trim any extra white-space\n    var _fontFamily = fontFamilies[i].trim();\n    // Check if font already contains strings\n    if (!stringRegExp.test(_fontFamily) && genericFontFamilies.indexOf(_fontFamily) < 0) {\n      _fontFamily = \"\\\"\".concat(_fontFamily, \"\\\"\");\n    }\n    fontFamilies[i] = _fontFamily;\n  }\n  return \"\".concat(fontStyle, \" \").concat(fontVariant, \" \").concat(fontWeight, \" \").concat(fontSizeString, \" \").concat(fontFamilies.join(','));\n}\n\nfunction createSkewMatrix(skewMatrix, skewX, skewY) {\n  // Create an identity matrix\n  mat4.identity(skewMatrix);\n  // Apply skew to the matrix\n  skewMatrix[4] = Math.tan(skewX); // Skew Y axis in X direction\n  skewMatrix[1] = Math.tan(skewY); // Skew X axis in Y direction\n\n  return skewMatrix;\n}\nvar $mat4_1 = mat4.create();\nvar $mat4_2 = mat4.create();\nvar parser = {\n  scale: function scale(d) {\n    mat4.fromScaling($mat4_1, [d[0].value, d[1].value, 1]);\n  },\n  scaleX: function scaleX(d) {\n    mat4.fromScaling($mat4_1, [d[0].value, 1, 1]);\n  },\n  scaleY: function scaleY(d) {\n    mat4.fromScaling($mat4_1, [1, d[0].value, 1]);\n  },\n  scaleZ: function scaleZ(d) {\n    mat4.fromScaling($mat4_1, [1, 1, d[0].value]);\n  },\n  scale3d: function scale3d(d) {\n    mat4.fromScaling($mat4_1, [d[0].value, d[1].value, d[2].value]);\n  },\n  translate: function translate(d) {\n    mat4.fromTranslation($mat4_1, [d[0].value, d[1].value, 0]);\n  },\n  translateX: function translateX(d) {\n    mat4.fromTranslation($mat4_1, [d[0].value, 0, 0]);\n  },\n  translateY: function translateY(d) {\n    mat4.fromTranslation($mat4_1, [0, d[0].value, 0]);\n  },\n  translateZ: function translateZ(d) {\n    mat4.fromTranslation($mat4_1, [0, 0, d[0].value]);\n  },\n  translate3d: function translate3d(d) {\n    mat4.fromTranslation($mat4_1, [d[0].value, d[1].value, d[2].value]);\n  },\n  rotate: function rotate(d) {\n    mat4.fromZRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateX: function rotateX(d) {\n    mat4.fromXRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateY: function rotateY(d) {\n    mat4.fromYRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateZ: function rotateZ(d) {\n    mat4.fromZRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotate3d: function rotate3d(d) {\n    mat4.fromRotation($mat4_1, deg2rad(convertAngleUnit(d[3])), [d[0].value, d[1].value, d[2].value]);\n  },\n  skew: function skew(d) {\n    createSkewMatrix($mat4_1, deg2rad(d[0].value), deg2rad(d[1].value));\n  },\n  skewX: function skewX(d) {\n    createSkewMatrix($mat4_1, deg2rad(d[0].value), 0);\n  },\n  skewY: function skewY(d) {\n    createSkewMatrix($mat4_1, 0, deg2rad(d[0].value));\n  },\n  matrix: function matrix(d) {\n    // prettier-ignore\n    mat4.set($mat4_1, d[0].value, d[1].value, 0, 0, d[2].value, d[3].value, 0, 0, 0, 0, 1, 0, d[4].value, d[5].value, 0, 1);\n  },\n  matrix3d: function matrix3d(d) {\n    // @ts-ignore\n    mat4.set.apply(mat4, [$mat4_1].concat(_toConsumableArray(d.map(function (s) {\n      return s.value;\n    }))));\n  }\n};\nvar $vec3One$1 = vec3.fromValues(1, 1, 1);\nvar $vec3Zero$1 = vec3.create();\nvar optimizer = {\n  translate: function translate(object, d) {\n    runtime.sceneGraphService.setLocalScale(object, $vec3One$1, false);\n    runtime.sceneGraphService.setLocalEulerAngles(object, $vec3Zero$1, undefined, undefined, false);\n    runtime.sceneGraphService.setLocalPosition(object, [d[0].value, d[1].value, 0], false);\n    runtime.sceneGraphService.dirtifyLocal(object, object.transformable);\n  }\n};\nfunction parsedTransformToMat4(transform, object) {\n  if (transform.length) {\n    if (transform.length === 1 && optimizer[transform[0].t]) {\n      optimizer[transform[0].t](object, transform[0].d);\n      return;\n    }\n    var m = mat4.identity($mat4_2);\n    for (var i = 0; i < transform.length; i++) {\n      var _transform$i = transform[i],\n        t = _transform$i.t,\n        d = _transform$i.d;\n      var p = parser[t];\n      if (p) {\n        p(d);\n        mat4.mul(m, m, $mat4_1);\n      }\n    }\n    object.setLocalTransform(m);\n  } else {\n    object.resetLocalTransform();\n  }\n  return object.getLocalTransform();\n}\n\n/**\n * @see /zh/docs/api/animation#\n *\n * support the following formats like CSS Transform:\n *\n * scale\n * * scale(x, y)\n * * scaleX(x)\n * * scaleY(x)\n * * scaleZ(z)\n * * scale3d(x, y, z)\n *\n * translate (unit: none, px, %(relative to its bounds))\n * * translate(x, y) eg. translate(0, 0) translate(0, 30px) translate(100%, 100%)\n * * translateX(0)\n * * translateY(0)\n * * translateZ(0)\n * * translate3d(0, 0, 0)\n *\n * rotate (unit: deg rad turn)\n * * rotate(0.5turn) rotate(30deg) rotate(1rad)\n *\n * none\n *\n * unsupported for now:\n * * calc() eg. translate(calc(100% + 10px))\n * * matrix/matrix3d()\n * * skew/skewX/skewY\n * * perspective\n */\nvar CSSPropertyTransform = /*#__PURE__*/function () {\n  function CSSPropertyTransform() {\n    _classCallCheck(this, CSSPropertyTransform);\n    this.parser = parseTransformUnmemoize;\n    this.mixer = mergeTransforms;\n  }\n  return _createClass(CSSPropertyTransform, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed, object) {\n      // 'none'\n      if (parsed instanceof CSSKeywordValue) {\n        return [];\n      }\n      return parsed;\n    }\n  }, {\n    key: \"postProcessor\",\n    value: function postProcessor(object) {\n      parsedTransformToMat4(object.parsedStyle.transform, object);\n    }\n  }]);\n}();\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin\n * @example\n * [10px, 10px] [10%, 10%]\n */\nvar CSSPropertyTransformOrigin = /*#__PURE__*/function () {\n  function CSSPropertyTransformOrigin() {\n    _classCallCheck(this, CSSPropertyTransformOrigin);\n  }\n  return _createClass(CSSPropertyTransformOrigin, [{\n    key: \"postProcessor\",\n    value: function postProcessor(object) {\n      var transformOrigin = object.parsedStyle.transformOrigin;\n      if (transformOrigin[0].unit === UnitType.kPixels && transformOrigin[1].unit === UnitType.kPixels) {\n        object.setOrigin(transformOrigin[0].value, transformOrigin[1].value);\n      } else {\n        // Relative to geometry bounds, calculate later.\n        object.getGeometryBounds();\n      }\n    }\n  }]);\n}();\n\nvar CSSPropertyZIndex = /*#__PURE__*/function () {\n  function CSSPropertyZIndex() {\n    _classCallCheck(this, CSSPropertyZIndex);\n  }\n  return _createClass(CSSPropertyZIndex, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed, object) {\n      return computed.value;\n    }\n  }, {\n    key: \"postProcessor\",\n    value: function postProcessor(object) {\n      if (object.parentNode) {\n        var parentEntity = object.parentNode;\n        var parentRenderable = parentEntity.renderable;\n        var parentSortable = parentEntity.sortable;\n        if (parentRenderable) {\n          parentRenderable.dirty = true;\n        }\n        // need re-sort on parent\n        if (parentSortable) {\n          parentSortable.dirty = true;\n          parentSortable.dirtyReason = SortReason.Z_INDEX_CHANGED;\n        }\n      }\n    }\n  }]);\n}();\n\nvar CircleUpdater = /*#__PURE__*/function () {\n  function CircleUpdater() {\n    _classCallCheck(this, CircleUpdater);\n  }\n  return _createClass(CircleUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      var _parsedStyle$cx = parsedStyle.cx,\n        cx = _parsedStyle$cx === void 0 ? 0 : _parsedStyle$cx,\n        _parsedStyle$cy = parsedStyle.cy,\n        cy = _parsedStyle$cy === void 0 ? 0 : _parsedStyle$cy,\n        _parsedStyle$r = parsedStyle.r,\n        r = _parsedStyle$r === void 0 ? 0 : _parsedStyle$r;\n      return {\n        cx: cx,\n        cy: cy,\n        hwidth: r,\n        hheight: r\n      };\n    }\n  }]);\n}();\n\nvar EllipseUpdater = /*#__PURE__*/function () {\n  function EllipseUpdater() {\n    _classCallCheck(this, EllipseUpdater);\n  }\n  return _createClass(EllipseUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      var _parsedStyle$cx = parsedStyle.cx,\n        cx = _parsedStyle$cx === void 0 ? 0 : _parsedStyle$cx,\n        _parsedStyle$cy = parsedStyle.cy,\n        cy = _parsedStyle$cy === void 0 ? 0 : _parsedStyle$cy,\n        _parsedStyle$rx = parsedStyle.rx,\n        rx = _parsedStyle$rx === void 0 ? 0 : _parsedStyle$rx,\n        _parsedStyle$ry = parsedStyle.ry,\n        ry = _parsedStyle$ry === void 0 ? 0 : _parsedStyle$ry;\n      return {\n        cx: cx,\n        cy: cy,\n        hwidth: rx,\n        hheight: ry\n      };\n    }\n  }]);\n}();\n\nvar LineUpdater = /*#__PURE__*/function () {\n  function LineUpdater() {\n    _classCallCheck(this, LineUpdater);\n  }\n  return _createClass(LineUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle) {\n      var x1 = parsedStyle.x1,\n        y1 = parsedStyle.y1,\n        x2 = parsedStyle.x2,\n        y2 = parsedStyle.y2;\n      var minX = Math.min(x1, x2);\n      var maxX = Math.max(x1, x2);\n      var minY = Math.min(y1, y2);\n      var maxY = Math.max(y1, y2);\n      var width = maxX - minX;\n      var height = maxY - minY;\n      var hwidth = width / 2;\n      var hheight = height / 2;\n      return {\n        cx: minX + hwidth,\n        cy: minY + hheight,\n        hwidth: hwidth,\n        hheight: hheight\n      };\n    }\n  }]);\n}();\n\nvar PathUpdater = /*#__PURE__*/function () {\n  function PathUpdater() {\n    _classCallCheck(this, PathUpdater);\n  }\n  return _createClass(PathUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle) {\n      var d = parsedStyle.d;\n      var _d$rect = d.rect,\n        x = _d$rect.x,\n        y = _d$rect.y,\n        width = _d$rect.width,\n        height = _d$rect.height;\n      var hwidth = width / 2;\n      var hheight = height / 2;\n      return {\n        cx: x + hwidth,\n        cy: y + hheight,\n        hwidth: hwidth,\n        hheight: hheight\n      };\n    }\n  }]);\n}();\n\nvar PolylineUpdater = /*#__PURE__*/function () {\n  function PolylineUpdater() {\n    _classCallCheck(this, PolylineUpdater);\n  }\n  return _createClass(PolylineUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle) {\n      if (parsedStyle.points && isArray(parsedStyle.points.points)) {\n        var points = parsedStyle.points.points;\n\n        // FIXME: account for miter lineJoin\n        var minX = Math.min.apply(Math, _toConsumableArray(points.map(function (point) {\n          return point[0];\n        })));\n        var maxX = Math.max.apply(Math, _toConsumableArray(points.map(function (point) {\n          return point[0];\n        })));\n        var minY = Math.min.apply(Math, _toConsumableArray(points.map(function (point) {\n          return point[1];\n        })));\n        var maxY = Math.max.apply(Math, _toConsumableArray(points.map(function (point) {\n          return point[1];\n        })));\n        var width = maxX - minX;\n        var height = maxY - minY;\n        var hwidth = width / 2;\n        var hheight = height / 2;\n        return {\n          cx: minX + hwidth,\n          cy: minY + hheight,\n          hwidth: hwidth,\n          hheight: hheight\n        };\n      }\n      return {\n        cx: 0,\n        cy: 0,\n        hwidth: 0,\n        hheight: 0\n      };\n    }\n  }]);\n}();\n\nvar RectUpdater = /*#__PURE__*/function () {\n  function RectUpdater() {\n    _classCallCheck(this, RectUpdater);\n  }\n  return _createClass(RectUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      var _parsedStyle$x = parsedStyle.x,\n        x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = parsedStyle.y,\n        y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n        src = parsedStyle.src,\n        _parsedStyle$width = parsedStyle.width,\n        width = _parsedStyle$width === void 0 ? 0 : _parsedStyle$width,\n        _parsedStyle$height = parsedStyle.height,\n        height = _parsedStyle$height === void 0 ? 0 : _parsedStyle$height;\n      var contentWidth = width;\n      var contentHeight = height;\n\n      // resize with HTMLImageElement's size\n      if (src && !isString(src)) {\n        if (!contentWidth) {\n          contentWidth = src.width;\n          parsedStyle.width = contentWidth;\n        }\n        if (!contentHeight) {\n          contentHeight = src.height;\n          parsedStyle.height = contentHeight;\n        }\n      }\n      return {\n        cx: x + contentWidth / 2,\n        cy: y + contentHeight / 2,\n        hwidth: contentWidth / 2,\n        hheight: contentHeight / 2\n      };\n    }\n  }]);\n}();\n\nvar TextUpdater = /*#__PURE__*/function () {\n  function TextUpdater(globalRuntime) {\n    _classCallCheck(this, TextUpdater);\n    this.globalRuntime = globalRuntime;\n  }\n  return _createClass(TextUpdater, [{\n    key: \"isReadyToMeasure\",\n    value: function isReadyToMeasure(parsedStyle, object) {\n      var text = parsedStyle.text;\n      return text;\n    }\n  }, {\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      var _object$ownerDocument;\n      var text = parsedStyle.text,\n        _parsedStyle$textAlig = parsedStyle.textAlign,\n        textAlign = _parsedStyle$textAlig === void 0 ? 'start' : _parsedStyle$textAlig,\n        _parsedStyle$lineWidt = parsedStyle.lineWidth,\n        lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n        _parsedStyle$textBase = parsedStyle.textBaseline,\n        textBaseline = _parsedStyle$textBase === void 0 ? 'alphabetic' : _parsedStyle$textBase,\n        _parsedStyle$dx = parsedStyle.dx,\n        dx = _parsedStyle$dx === void 0 ? 0 : _parsedStyle$dx,\n        _parsedStyle$dy = parsedStyle.dy,\n        dy = _parsedStyle$dy === void 0 ? 0 : _parsedStyle$dy,\n        _parsedStyle$x = parsedStyle.x,\n        x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = parsedStyle.y,\n        y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y;\n      if (!this.isReadyToMeasure(parsedStyle, object)) {\n        parsedStyle.metrics = {\n          font: '',\n          width: 0,\n          height: 0,\n          lines: [],\n          lineWidths: [],\n          lineHeight: 0,\n          maxLineWidth: 0,\n          fontProperties: {\n            ascent: 0,\n            descent: 0,\n            fontSize: 0\n          },\n          lineMetrics: []\n        };\n        return {\n          hwidth: 0,\n          hheight: 0,\n          cx: 0,\n          cy: 0\n        };\n      }\n      var _ref = (object === null || object === void 0 || (_object$ownerDocument = object.ownerDocument) === null || _object$ownerDocument === void 0 || (_object$ownerDocument = _object$ownerDocument.defaultView) === null || _object$ownerDocument === void 0 ? void 0 : _object$ownerDocument.getConfig()) || {},\n        offscreenCanvas = _ref.offscreenCanvas;\n      var metrics = this.globalRuntime.textService.measureText(text, parsedStyle, offscreenCanvas);\n      parsedStyle.metrics = metrics;\n      var width = metrics.width,\n        height = metrics.height;\n      var hwidth = width / 2;\n      var hheight = height / 2;\n\n      // default 'left'\n      var lineXOffset = x + hwidth;\n      if (textAlign === 'center' || textAlign === 'middle') {\n        lineXOffset += lineWidth / 2 - hwidth;\n      } else if (textAlign === 'right' || textAlign === 'end') {\n        lineXOffset += lineWidth - hwidth * 2;\n      }\n      var lineYOffset = y - hheight;\n      if (textBaseline === 'middle') {\n        lineYOffset += hheight;\n      } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n        lineYOffset += hheight * 2;\n      } else if (textBaseline === 'alphabetic') ; else if (textBaseline === 'bottom' || textBaseline === 'ideographic') {\n        lineYOffset += 0;\n      }\n      // TODO: ideographic & bottom\n\n      if (dx) {\n        lineXOffset += dx;\n      }\n      if (dy) {\n        lineYOffset += dy;\n      }\n      return {\n        cx: lineXOffset,\n        cy: lineYOffset,\n        hwidth: hwidth,\n        hheight: hheight\n      };\n    }\n  }]);\n}();\n\nvar GroupUpdater = /*#__PURE__*/function () {\n  function GroupUpdater() {\n    _classCallCheck(this, GroupUpdater);\n  }\n  return _createClass(GroupUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      return {\n        cx: 0,\n        cy: 0,\n        hwidth: 0,\n        hheight: 0\n      };\n    }\n  }]);\n}();\n\nvar HTMLUpdater = /*#__PURE__*/function () {\n  function HTMLUpdater() {\n    _classCallCheck(this, HTMLUpdater);\n  }\n  return _createClass(HTMLUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      var _parsedStyle$x = parsedStyle.x,\n        x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = parsedStyle.y,\n        y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n        _parsedStyle$width = parsedStyle.width,\n        width = _parsedStyle$width === void 0 ? 0 : _parsedStyle$width,\n        _parsedStyle$height = parsedStyle.height,\n        height = _parsedStyle$height === void 0 ? 0 : _parsedStyle$height;\n      return {\n        cx: x + width / 2,\n        cy: y + height / 2,\n        hwidth: width / 2,\n        hheight: height / 2\n      };\n    }\n  }]);\n}();\n\nfunction isFederatedEvent(value) {\n  return !!value.type;\n}\n\n/**\n * An DOM-compatible synthetic event implementation that is \"forwarded\" on behalf of an original\n * FederatedEvent or native Event.\n */\nvar FederatedEvent = /*#__PURE__*/function () {\n  /**\n   * The event boundary which manages this event. Propagation can only occur\n   *  within the boundary's jurisdiction.\n   */\n  function FederatedEvent(manager) {\n    _classCallCheck(this, FederatedEvent);\n    /**\n     * The propagation phase.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/eventPhase\n     */\n    this.eventPhase = FederatedEvent.prototype.NONE;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/bubbles\n     */\n    this.bubbles = true;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/cancelBubble\n     */\n    this.cancelBubble = true;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/cancelable\n     */\n    this.cancelable = false;\n    /** Flags whether the default response of the user agent was prevent through this event. */\n    this.defaultPrevented = false;\n    /** Flags whether propagation was stopped. */\n    this.propagationStopped = false;\n    /** Flags whether propagation was immediately stopped. */\n    this.propagationImmediatelyStopped = false;\n    /**\n     * The coordinates of the evnet relative to the nearest DOM layer.\n     * This is a non-standard property.\n     */\n    this.layer = new Point();\n    /**\n     * The coordinates of the event relative to the DOM document.\n     * This is a non-standard property.\n     * relative to the DOM document.\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/pageX\n     */\n    this.page = new Point();\n    /**\n     * relative to Canvas, origin is left-top\n     */\n    this.canvas = new Point();\n    /**\n     * relative to Viewport, account for Camera\n     */\n    this.viewport = new Point();\n    this.composed = false;\n    this.NONE = 0;\n    this.CAPTURING_PHASE = 1;\n    this.AT_TARGET = 2;\n    this.BUBBLING_PHASE = 3;\n    this.manager = manager;\n  }\n  return _createClass(FederatedEvent, [{\n    key: \"name\",\n    get:\n    /**\n     * The type of event, supports the following:\n     * * pointerdown\n     * * touchstart\n     * * mousedown\n     * * rightdown\n     * * ...\n     */\n\n    /**\n     * @deprecated\n     */\n    function get() {\n      return this.type;\n    }\n  }, {\n    key: \"layerX\",\n    get: function get() {\n      return this.layer.x;\n    }\n  }, {\n    key: \"layerY\",\n    get: function get() {\n      return this.layer.y;\n    }\n  }, {\n    key: \"pageX\",\n    get: function get() {\n      return this.page.x;\n    }\n  }, {\n    key: \"pageY\",\n    get: function get() {\n      return this.page.y;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.canvas.x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.canvas.y;\n    }\n  }, {\n    key: \"canvasX\",\n    get: function get() {\n      return this.canvas.x;\n    }\n  }, {\n    key: \"canvasY\",\n    get: function get() {\n      return this.canvas.y;\n    }\n  }, {\n    key: \"viewportX\",\n    get: function get() {\n      return this.viewport.x;\n    }\n  }, {\n    key: \"viewportY\",\n    get: function get() {\n      return this.viewport.y;\n    }\n  }, {\n    key: \"composedPath\",\n    value:\n    /**\n     * The propagation path for this event\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/composedPath\n     *\n     * So composedPath()[0] represents the original target.\n     * @see https://polymer-library.polymer-project.org/3.0/docs/devguide/events#retargeting\n     */\n    function composedPath() {\n      if (this.manager && (!this.path || this.path[0] !== this.target)) {\n        this.path = this.target ? this.manager.propagationPath(this.target) : [];\n      }\n      return this.path;\n    }\n    /**\n     * @deprecated\n     */\n  }, {\n    key: \"propagationPath\",\n    get: function get() {\n      return this.composedPath();\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/preventDefault\n     */\n  }, {\n    key: \"preventDefault\",\n    value: function preventDefault() {\n      if (this.nativeEvent instanceof Event && this.nativeEvent.cancelable) {\n        this.nativeEvent.preventDefault();\n      }\n      this.defaultPrevented = true;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopImmediatePropagation\n     */\n  }, {\n    key: \"stopImmediatePropagation\",\n    value: function stopImmediatePropagation() {\n      this.propagationImmediatelyStopped = true;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopPropagation\n     */\n  }, {\n    key: \"stopPropagation\",\n    value: function stopPropagation() {\n      this.propagationStopped = true;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/view\n     */\n  }, {\n    key: \"initEvent\",\n    value:\n    /**\n     * added for compatibility with DOM Event,\n     * deprecated props and methods\n     */\n    function initEvent() {}\n  }, {\n    key: \"initUIEvent\",\n    value: function initUIEvent() {}\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }]);\n}();\n\nvar FederatedMouseEvent = /*#__PURE__*/function (_ref) {\n  function FederatedMouseEvent() {\n    var _this;\n    _classCallCheck(this, FederatedMouseEvent);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, FederatedMouseEvent, [].concat(args));\n    /** Whether the \"alt\" key was pressed when this mouse event occurred. */\n    /** The specific button that was pressed in this mouse event. */\n    /** The button depressed when this event occurred. */\n    /** Whether the \"control\" key was pressed when this mouse event occurred. */\n    /** Whether the \"meta\" key was pressed when this mouse event occurred. */\n    /** This is currently not implemented in the Federated Events API. */\n    // @ts-ignore\n    /** Whether the \"shift\" key was pressed when this mouse event occurred. */\n    /**\n     * The coordinates of the mouse event relative to the canvas.\n     */\n    _this.client = new Point();\n    /**\n     * The movement in this pointer relative to the last `mousemove` event.\n     */\n    _this.movement = new Point();\n    /**\n     * The offset of the pointer coordinates w.r.t. target DisplayObject in world space. This is\n     * not supported at the moment.\n     */\n    _this.offset = new Point();\n    /**\n     * The pointer coordinates in world space.\n     */\n    _this.global = new Point();\n    /**\n     * The pointer coordinates in sceen space.\n     */\n    _this.screen = new Point();\n    return _this;\n  }\n  _inherits(FederatedMouseEvent, _ref);\n  return _createClass(FederatedMouseEvent, [{\n    key: \"clientX\",\n    get: function get() {\n      return this.client.x;\n    }\n  }, {\n    key: \"clientY\",\n    get: function get() {\n      return this.client.y;\n    }\n  }, {\n    key: \"movementX\",\n    get: function get() {\n      return this.movement.x;\n    }\n  }, {\n    key: \"movementY\",\n    get: function get() {\n      return this.movement.y;\n    }\n  }, {\n    key: \"offsetX\",\n    get: function get() {\n      return this.offset.x;\n    }\n  }, {\n    key: \"offsetY\",\n    get: function get() {\n      return this.offset.y;\n    }\n  }, {\n    key: \"globalX\",\n    get: function get() {\n      return this.global.x;\n    }\n  }, {\n    key: \"globalY\",\n    get: function get() {\n      return this.global.y;\n    }\n  }, {\n    key: \"screenX\",\n    get: function get() {\n      return this.screen.x;\n    }\n  }, {\n    key: \"screenY\",\n    get: function get() {\n      return this.screen.y;\n    }\n  }, {\n    key: \"getModifierState\",\n    value: function getModifierState(key) {\n      return 'getModifierState' in this.nativeEvent && this.nativeEvent.getModifierState(key);\n    }\n  }, {\n    key: \"initMouseEvent\",\n    value: function initMouseEvent() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }]);\n}(FederatedEvent);\n\n// @ts-ignore\nvar FederatedPointerEvent = /*#__PURE__*/function (_FederatedMouseEvent) {\n  function FederatedPointerEvent() {\n    var _this;\n    _classCallCheck(this, FederatedPointerEvent);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, FederatedPointerEvent, [].concat(args));\n    /**\n     * The unique identifier of the pointer.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerId\n     */\n    /**\n     * The width of the pointer's contact along the x-axis, measured in CSS pixels.\n     * radiusX of TouchEvents will be represented by this value.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/width\n     */\n    _this.width = 0;\n    /**\n     * The height of the pointer's contact along the y-axis, measured in CSS pixels.\n     * radiusY of TouchEvents will be represented by this value.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/height\n     */\n    _this.height = 0;\n    /**\n     * Indicates whether or not the pointer device that created the event is the primary pointer.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/isPrimary\n     */\n    _this.isPrimary = false;\n    return _this;\n  }\n  _inherits(FederatedPointerEvent, _FederatedMouseEvent);\n  return _createClass(FederatedPointerEvent, [{\n    key: \"getCoalescedEvents\",\n    value:\n    /**\n     * The type of pointer that triggered the event.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerType\n     */\n\n    /**\n     * Pressure applied by the pointing device during the event.\n     *s\n     * A Touch's force property will be represented by this value.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pressure\n     */\n\n    /**\n     * Barrel pressure on a stylus pointer.\n     *\n     * @see https://w3c.github.io/pointerevents/#pointerevent-interface\n     */\n\n    /**\n     * The angle, in degrees, between the pointer device and the screen.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/tiltX\n     */\n\n    /**\n     * The angle, in degrees, between the pointer device and the screen.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/tiltY\n     */\n\n    /**\n     * Twist of a stylus pointer.\n     *\n     * @see https://w3c.github.io/pointerevents/#pointerevent-interface\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/getCoalescedEvents\n     */\n    function getCoalescedEvents() {\n      if (this.type === 'pointermove' || this.type === 'mousemove' || this.type === 'touchmove') {\n        // @ts-ignore\n        return [this];\n      }\n      return [];\n    }\n\n    /**\n     * @see https://chromestatus.com/feature/5765569655603200\n     */\n  }, {\n    key: \"getPredictedEvents\",\n    value: function getPredictedEvents() {\n      throw new Error('getPredictedEvents is not supported!');\n    }\n\n    /**\n     * @see https://github.com/antvis/G/issues/1115\n     * We currently reuses event objects in the event system,\n     * avoiding the creation of a large number of event objects.\n     * Reused objects are only used to carry different data,\n     * such as coordinate information, native event objects,\n     * and therefore the lifecycle is limited to the event handler,\n     * which can lead to unintended consequences if an attempt is made to cache the entire event object.\n     *\n     * Therefore, while keeping the above performance considerations in mind, it is possible to provide a clone method that creates a new object when the user really wants to cache it, e.g.\n     */\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return this.manager.clonePointerEvent(this);\n    }\n  }]);\n}(FederatedMouseEvent);\n\n// @ts-ignore\nvar FederatedWheelEvent = /*#__PURE__*/function (_FederatedMouseEvent) {\n  function FederatedWheelEvent() {\n    _classCallCheck(this, FederatedWheelEvent);\n    return _callSuper(this, FederatedWheelEvent, arguments);\n  }\n  _inherits(FederatedWheelEvent, _FederatedMouseEvent);\n  return _createClass(FederatedWheelEvent, [{\n    key: \"clone\",\n    value:\n    /**\n     * The units of `deltaX`, `deltaY`, and `deltaZ`. This is one of `DOM_DELTA_LINE`,\n     * `DOM_DELTA_PAGE`, `DOM_DELTA_PIXEL`.\n     */\n\n    /** Horizontal scroll amount */\n\n    /** Vertical scroll amount */\n\n    /** z-axis scroll amount. */\n\n    function clone() {\n      return this.manager.cloneWheelEvent(this);\n    }\n  }]);\n}(FederatedMouseEvent);\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events\n *\n * @example\n  const event = new CustomEvent('build', { detail: { prop1: 'xx' } });\n  circle.addEventListener('build', (e) => {\n    e.target; // circle\n    e.detail; // { prop1: 'xx' }\n  });\n\n  circle.dispatchEvent(event);\n */\nvar CustomEvent = /*#__PURE__*/function (_FederatedEvent) {\n  function CustomEvent(eventName, object) {\n    var _this;\n    _classCallCheck(this, CustomEvent);\n    _this = _callSuper(this, CustomEvent, [null]);\n    _this.type = eventName;\n    _this.detail = object;\n\n    // compatible with G 3.0\n    Object.assign(_this, object);\n    return _this;\n  }\n  _inherits(CustomEvent, _FederatedEvent);\n  return _createClass(CustomEvent);\n}(FederatedEvent);\n\nvar CANVAS_CACHE = new WeakMap();\n\n/**\n * Objects that can receive events and may have listeners for them.\n * eg. Element, Canvas, DisplayObject\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n */\nvar EventTarget = /*#__PURE__*/function () {\n  function EventTarget() {\n    _classCallCheck(this, EventTarget);\n    /**\n     * event emitter\n     */\n    this.emitter = new EventEmitter();\n  }\n  return _createClass(EventTarget, [{\n    key: \"on\",\n    value:\n    /**\n     * @deprecated\n     * @alias addEventListener\n     */\n    function on(type, listener, options) {\n      this.addEventListener(type, listener, options);\n      return this;\n    }\n    /**\n     * support `capture` & `once` in options\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener\n     */\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(type, listener, options) {\n      var capture = false;\n      var once = false;\n      if (isBoolean(options)) capture = options;else if (options) {\n        var _options$capture = options.capture;\n        capture = _options$capture === void 0 ? false : _options$capture;\n        var _options$once = options.once;\n        once = _options$once === void 0 ? false : _options$once;\n      }\n      if (capture) type += 'capture';\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      listener = isFunction(listener) ? listener : listener.handleEvent;\n      var context = isFunction(listener) ? undefined : listener;\n      if (once) this.emitter.once(type, listener, context);else this.emitter.on(type, listener, context);\n      return this;\n    }\n    /**\n     * @deprecated\n     * @alias removeEventListener\n     */\n  }, {\n    key: \"off\",\n    value: function off(type, listener, options) {\n      if (type) {\n        this.removeEventListener(type, listener, options);\n      } else {\n        // remove all listeners\n        this.removeAllEventListeners();\n      }\n      return this;\n    }\n  }, {\n    key: \"removeAllEventListeners\",\n    value: function removeAllEventListeners() {\n      var _this$emitter;\n      (_this$emitter = this.emitter) === null || _this$emitter === void 0 || _this$emitter.removeAllListeners();\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type, listener, options) {\n      var _listener;\n      if (!this.emitter) return this;\n      var capture = isBoolean(options) ? options : options === null || options === void 0 ? void 0 : options.capture;\n      if (capture) type += 'capture';\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      listener = isFunction(listener) ? listener : (_listener = listener) === null || _listener === void 0 ? void 0 : _listener.handleEvent;\n      var context = isFunction(listener) ? undefined : listener;\n      this.emitter.off(type, listener, context);\n      return this;\n    }\n    /**\n     * @deprecated\n     * @alias dispatchEvent\n     */\n  }, {\n    key: \"emit\",\n    value: function emit(eventName, object) {\n      this.dispatchEvent(new CustomEvent(eventName, object));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n     */\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(e) {\n      var skipPropagate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var canvas = CANVAS_CACHE.get(this);\n      if (!canvas) {\n        var _ownerDocument;\n        // @ts-expect-error document may be defined in inherited class\n        if (this.document) canvas = this;\n        // @ts-expect-error defaultView may be defined in inherited class\n        else if (this.defaultView) canvas = this.defaultView;else canvas = (_ownerDocument = this.ownerDocument) === null || _ownerDocument === void 0 ? void 0 : _ownerDocument.defaultView;\n        if (canvas) CANVAS_CACHE.set(this, canvas);\n      }\n      if (canvas) {\n        e.manager = canvas.getEventService();\n        if (!e.manager) return false;\n        e.defaultPrevented = false;\n        if (e.path) e.path.length = 0;\n        // @ts-ignore\n        else e.page = [];\n        if (!skipPropagate) e.target = this;\n        e.manager.dispatchEvent(e, e.type, skipPropagate);\n      } else {\n        // HACK Fixed the issue that after an element leaves the DOM tree, there is no associated canvas,\n        // which causes the removed and destroy events to not be triggered\n        this.emitter.emit(e.type, e);\n      }\n      return !e.defaultPrevented;\n    }\n  }]);\n}();\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Node\n */\nvar Node = /*#__PURE__*/function (_EventTarget) {\n  function Node() {\n    var _this;\n    _classCallCheck(this, Node);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Node, [].concat(args));\n    _this.shadow = false;\n    /**\n     * points to canvas.document\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument\n     */\n    _this.ownerDocument = null;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/isConnected\n     * @example\n        circle.isConnected; // false\n        canvas.appendChild(circle);\n        circle.isConnected; // true\n     */\n    _this.isConnected = false;\n    /**\n     * Returns node's node document's document base URL.\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node\n     */\n    _this.baseURI = '';\n    /**\n     * Returns the children.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes\n     */\n    _this.childNodes = [];\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n     */\n    _this.nodeType = 0;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeName\n     */\n    _this.nodeName = '';\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeValue\n     */\n    _this.nodeValue = null;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode\n     */\n    _this.parentNode = null;\n    return _this;\n  }\n  _inherits(Node, _EventTarget);\n  return _createClass(Node, [{\n    key: \"textContent\",\n    get:\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent\n     */\n    function get() {\n      var out = '';\n      if (this.nodeName === Shape.TEXT) {\n        // @ts-ignore\n        out += this.style.text;\n      }\n      var _iterator = _createForOfIteratorHelper(this.childNodes),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _child = _step.value;\n          if (_child.nodeName === Shape.TEXT) {\n            out += _child.nodeValue;\n          } else {\n            out += _child.textContent;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return out;\n    },\n    set: function set(content) {\n      var _this2 = this;\n      // remove all children\n      this.childNodes.slice().forEach(function (child) {\n        _this2.removeChild(child);\n      });\n      if (this.nodeName === Shape.TEXT) {\n        // @ts-ignore\n        this.style.text = \"\".concat(content);\n      }\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/getRootNode\n     */\n  }, {\n    key: \"getRootNode\",\n    value: function getRootNode() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (this.parentNode) {\n        return this.parentNode.getRootNode(opts);\n      }\n      if (opts.composed && this.host) {\n        return this.host.getRootNode(opts);\n      }\n      return this;\n    }\n  }, {\n    key: \"hasChildNodes\",\n    value: function hasChildNodes() {\n      return this.childNodes.length > 0;\n    }\n  }, {\n    key: \"isDefaultNamespace\",\n    value: function isDefaultNamespace(namespace) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"lookupNamespaceURI\",\n    value: function lookupNamespaceURI(prefix) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"lookupPrefix\",\n    value: function lookupPrefix(namespace) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/isEqualNode\n     */\n  }, {\n    key: \"isEqualNode\",\n    value: function isEqualNode(otherNode) {\n      // TODO: compare 2 nodes, not sameness\n      return this === otherNode;\n    }\n  }, {\n    key: \"isSameNode\",\n    value: function isSameNode(otherNode) {\n      return this.isEqualNode(otherNode);\n    }\n  }, {\n    key: \"parent\",\n    get:\n    /**\n     * @deprecated\n     * @alias parentNode\n     */\n    function get() {\n      return this.parentNode;\n    }\n  }, {\n    key: \"parentElement\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"nextSibling\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"previousSibling\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"firstChild\",\n    get: function get() {\n      return this.childNodes.length > 0 ? this.childNodes[0] : null;\n    }\n  }, {\n    key: \"lastChild\",\n    get: function get() {\n      return this.childNodes.length > 0 ? this.childNodes[this.childNodes.length - 1] : null;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n     * @see https://github.com/b-fuze/deno-dom/blob/master/src/dom/node.ts#L338\n     */\n  }, {\n    key: \"compareDocumentPosition\",\n    value: function compareDocumentPosition(other) {\n      if (other === this) {\n        // same node\n        return 0;\n      }\n\n      // if (!(other instanceof Node)) {\n      //   throw new TypeError(\n      //     'Node.compareDocumentPosition: Argument 1 does not implement interface Node.',\n      //   );\n      // }\n\n      var node1Root = other;\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var node2Root = this;\n      var node1Hierarchy = [node1Root];\n      var node2Hierarchy = [node2Root];\n      while ((_node1Root$parentNode = node1Root.parentNode) !== null && _node1Root$parentNode !== void 0 ? _node1Root$parentNode : node2Root.parentNode) {\n        var _node1Root$parentNode;\n        node1Root = node1Root.parentNode ? (node1Hierarchy.push(node1Root.parentNode), node1Root.parentNode) : node1Root;\n        node2Root = node2Root.parentNode ? (node2Hierarchy.push(node2Root.parentNode), node2Root.parentNode) : node2Root;\n      }\n\n      // Check if they don't share the same root node\n      if (node1Root !== node2Root) {\n        return Node.DOCUMENT_POSITION_DISCONNECTED | Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC | Node.DOCUMENT_POSITION_PRECEDING;\n      }\n      var longerHierarchy = node1Hierarchy.length > node2Hierarchy.length ? node1Hierarchy : node2Hierarchy;\n      var shorterHierarchy = longerHierarchy === node1Hierarchy ? node2Hierarchy : node1Hierarchy;\n\n      // Check if either is a container of the other\n      if (longerHierarchy[longerHierarchy.length - shorterHierarchy.length] === shorterHierarchy[0]) {\n        return longerHierarchy === node1Hierarchy ?\n        // other is a child of this\n        Node.DOCUMENT_POSITION_CONTAINED_BY | Node.DOCUMENT_POSITION_FOLLOWING :\n        // this is a child of other\n        Node.DOCUMENT_POSITION_CONTAINS | Node.DOCUMENT_POSITION_PRECEDING;\n      }\n\n      // Find their first common ancestor and see whether they\n      // are preceding or following\n      var longerStart = longerHierarchy.length - shorterHierarchy.length;\n      for (var i = shorterHierarchy.length - 1; i >= 0; i--) {\n        var shorterHierarchyNode = shorterHierarchy[i];\n        var longerHierarchyNode = longerHierarchy[longerStart + i];\n\n        // We found the first common ancestor\n        if (longerHierarchyNode !== shorterHierarchyNode) {\n          var siblings = shorterHierarchyNode.parentNode.childNodes;\n          if (siblings.indexOf(shorterHierarchyNode) < siblings.indexOf(longerHierarchyNode)) {\n            // Shorter is before longer\n            if (shorterHierarchy === node1Hierarchy) {\n              // Other is before this\n              return Node.DOCUMENT_POSITION_PRECEDING;\n            }\n            // This is before other\n            return Node.DOCUMENT_POSITION_FOLLOWING;\n          }\n          // Longer is before shorter\n          if (longerHierarchy === node1Hierarchy) {\n            // Other is before this\n            return Node.DOCUMENT_POSITION_PRECEDING;\n          }\n          // Other is after this\n          return Node.DOCUMENT_POSITION_FOLLOWING;\n        }\n      }\n      return Node.DOCUMENT_POSITION_FOLLOWING;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     */\n  }, {\n    key: \"contain\",\n    value:\n    /**\n     * @deprecated\n     * @alias contains\n     */\n    function contain(other) {\n      return this.contains(other);\n    }\n  }, {\n    key: \"contains\",\n    value: function contains(other) {\n      // the node itself, one of its direct children\n      var tmp = other;\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n      while (tmp && this !== tmp) {\n        tmp = tmp.parentNode;\n      }\n      return !!tmp;\n    }\n  }, {\n    key: \"getAncestor\",\n    value: function getAncestor(n) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var temp = this;\n      while (n > 0 && temp) {\n        temp = temp.parentNode;\n        n--;\n      }\n      return temp;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(callback) {\n      var stack = [this];\n      while (stack.length > 0) {\n        var node = stack.pop();\n        var result = callback(node);\n        if (result === false) {\n          break;\n        }\n        for (var i = node.childNodes.length - 1; i >= 0; i--) {\n          stack.push(node.childNodes[i]);\n        }\n      }\n    }\n  }], [{\n    key: \"isNode\",\n    value: function isNode(target) {\n      return !!target.childNodes;\n    }\n  }]);\n}(EventTarget);\n/**\n * Both nodes are in different documents or different trees in the same document.\n */\nNode.DOCUMENT_POSITION_DISCONNECTED = 1;\n/**\n * otherNode precedes the node in either a pre-order depth-first traversal\n * of a tree containing both (e.g., as an ancestor or previous sibling or a descendant of a previous sibling or previous sibling of an ancestor) or (if they are disconnected) in an arbitrary but consistent ordering.\n */\nNode.DOCUMENT_POSITION_PRECEDING = 2;\n/**\n * otherNode follows the node in either a pre-order depth-first traversal of a tree containing both (e.g., as a descendant or following sibling or a descendant of a following sibling or following sibling of an ancestor) or (if they are disconnected) in an arbitrary but consistent ordering.\n */\nNode.DOCUMENT_POSITION_FOLLOWING = 4;\n/**\n * otherNode is an ancestor of the node.\n */\nNode.DOCUMENT_POSITION_CONTAINS = 8;\n/**\n * otherNode is a descendant of the node.\n */\nNode.DOCUMENT_POSITION_CONTAINED_BY = 16;\n/**\n * The result relies upon arbitrary and/or implementation-specific behavior and is not guaranteed to be portable.\n */\nNode.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC = 32;\n\nvar PROPAGATION_LIMIT = 2048;\nvar EventService = /*#__PURE__*/function () {\n  function EventService(globalRuntime, context) {\n    var _this = this;\n    _classCallCheck(this, EventService);\n    /**\n     * Store HTML elements in current canvas.\n     */\n    this.nativeHTMLMap = new WeakMap();\n    this.cursor = 'default';\n    this.mappingTable = {};\n    this.mappingState = {\n      trackingData: {}\n    };\n    this.eventPool = new Map();\n    this.tmpMatrix = mat4.create();\n    this.tmpVec3 = vec3.create();\n    this.onPointerDown = function (from) {\n      var e = _this.createPointerEvent(from);\n      _this.dispatchEvent(e, 'pointerdown');\n      if (e.pointerType === 'touch') {\n        _this.dispatchEvent(e, 'touchstart');\n      } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n        var isRightButton = e.button === 2;\n        _this.dispatchEvent(e, isRightButton ? 'rightdown' : 'mousedown');\n      }\n      var trackingData = _this.trackingData(from.pointerId);\n      trackingData.pressTargetsByButton[from.button] = e.composedPath();\n      _this.freeEvent(e);\n    };\n    this.onPointerUp = function (from) {\n      var now = clock.now();\n      var e = _this.createPointerEvent(from, undefined, undefined, _this.context.config.alwaysTriggerPointerEventOnCanvas ? _this.rootTarget : undefined);\n      _this.dispatchEvent(e, 'pointerup');\n      if (e.pointerType === 'touch') {\n        _this.dispatchEvent(e, 'touchend');\n      } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n        var isRightButton = e.button === 2;\n        _this.dispatchEvent(e, isRightButton ? 'rightup' : 'mouseup');\n      }\n      var trackingData = _this.trackingData(from.pointerId);\n      var pressTarget = _this.findMountedTarget(trackingData.pressTargetsByButton[from.button]);\n      var clickTarget = pressTarget;\n\n      // pointerupoutside only bubbles. It only bubbles upto the parent that doesn't contain\n      // the pointerup location.\n      if (pressTarget && !e.composedPath().includes(pressTarget)) {\n        var currentTarget = pressTarget;\n        while (currentTarget && !e.composedPath().includes(currentTarget)) {\n          e.currentTarget = currentTarget;\n          _this.notifyTarget(e, 'pointerupoutside');\n          if (e.pointerType === 'touch') {\n            _this.notifyTarget(e, 'touchendoutside');\n          } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n            var _isRightButton = e.button === 2;\n            _this.notifyTarget(e, _isRightButton ? 'rightupoutside' : 'mouseupoutside');\n          }\n          if (Node.isNode(currentTarget)) {\n            currentTarget = currentTarget.parentNode;\n          }\n        }\n        delete trackingData.pressTargetsByButton[from.button];\n\n        // currentTarget is the most specific ancestor holding both the pointerdown and pointerup\n        // targets. That is - it's our click target!\n        clickTarget = currentTarget;\n      }\n      if (clickTarget) {\n        var _e$detail;\n        var clickEvent = _this.clonePointerEvent(e, 'click');\n        clickEvent.target = clickTarget;\n        clickEvent.path = [];\n        if (!trackingData.clicksByButton[from.button]) {\n          trackingData.clicksByButton[from.button] = {\n            clickCount: 0,\n            target: clickEvent.target,\n            timeStamp: now\n          };\n        }\n        var canvas = _this.context.renderingContext.root.ownerDocument.defaultView;\n        var clickHistory = trackingData.clicksByButton[from.button];\n        if (clickHistory.target === clickEvent.target && now - clickHistory.timeStamp < canvas.getConfig().dblClickSpeed) {\n          ++clickHistory.clickCount;\n        } else {\n          clickHistory.clickCount = 1;\n        }\n        clickHistory.target = clickEvent.target;\n        clickHistory.timeStamp = now;\n        clickEvent.detail = clickHistory.clickCount;\n\n        // @see https://github.com/antvis/G/issues/1091\n        if (!((_e$detail = e.detail) !== null && _e$detail !== void 0 && _e$detail.preventClick)) {\n          if (!_this.context.config.useNativeClickEvent && (clickEvent.pointerType === 'mouse' || clickEvent.pointerType === 'touch')) {\n            _this.dispatchEvent(clickEvent, 'click');\n          }\n          _this.dispatchEvent(clickEvent, 'pointertap');\n        }\n        _this.freeEvent(clickEvent);\n      }\n      _this.freeEvent(e);\n    };\n    this.onPointerMove = function (from) {\n      var e = _this.createPointerEvent(from, undefined, undefined, _this.context.config.alwaysTriggerPointerEventOnCanvas ? _this.rootTarget : undefined);\n      var isMouse = e.pointerType === 'mouse' || e.pointerType === 'pen';\n      var trackingData = _this.trackingData(from.pointerId);\n      var outTarget = _this.findMountedTarget(trackingData.overTargets);\n\n      // First pointerout/pointerleave\n      if (trackingData.overTargets && outTarget !== e.target) {\n        // pointerout always occurs on the overTarget when the pointer hovers over another element.\n        var outType = from.type === 'mousemove' ? 'mouseout' : 'pointerout';\n        var outEvent = _this.createPointerEvent(from, outType, outTarget || undefined);\n        _this.dispatchEvent(outEvent, 'pointerout');\n        if (isMouse) _this.dispatchEvent(outEvent, 'mouseout');\n\n        // If the pointer exits overTarget and its descendants, then a pointerleave event is also fired. This event\n        // is dispatched to all ancestors that no longer capture the pointer.\n        if (!e.composedPath().includes(outTarget)) {\n          var leaveEvent = _this.createPointerEvent(from, 'pointerleave', outTarget || undefined);\n          leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n          while (leaveEvent.target && !e.composedPath().includes(leaveEvent.target)) {\n            leaveEvent.currentTarget = leaveEvent.target;\n            _this.notifyTarget(leaveEvent);\n            if (isMouse) {\n              _this.notifyTarget(leaveEvent, 'mouseleave');\n            }\n            if (Node.isNode(leaveEvent.target)) {\n              leaveEvent.target = leaveEvent.target.parentNode;\n            }\n          }\n          _this.freeEvent(leaveEvent);\n        }\n        _this.freeEvent(outEvent);\n      }\n\n      // Then pointerover\n      if (outTarget !== e.target) {\n        // pointerover always occurs on the new overTarget\n        var overType = from.type === 'mousemove' ? 'mouseover' : 'pointerover';\n        var overEvent = _this.clonePointerEvent(e, overType); // clone faster\n\n        _this.dispatchEvent(overEvent, 'pointerover');\n        if (isMouse) _this.dispatchEvent(overEvent, 'mouseover');\n\n        // Probe whether the newly hovered Node is an ancestor of the original overTarget.\n        var overTargetAncestor = outTarget && Node.isNode(outTarget) && outTarget.parentNode;\n        while (overTargetAncestor && overTargetAncestor !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n          if (overTargetAncestor === e.target) break;\n          overTargetAncestor = overTargetAncestor.parentNode;\n        }\n\n        // The pointer has entered a non-ancestor of the original overTarget. This means we need a pointerentered\n        // event.\n        var didPointerEnter = !overTargetAncestor || overTargetAncestor === (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode);\n        if (didPointerEnter) {\n          var enterEvent = _this.clonePointerEvent(e, 'pointerenter');\n          enterEvent.eventPhase = enterEvent.AT_TARGET;\n          while (enterEvent.target && enterEvent.target !== outTarget && enterEvent.target !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n            enterEvent.currentTarget = enterEvent.target;\n            _this.notifyTarget(enterEvent);\n            if (isMouse) _this.notifyTarget(enterEvent, 'mouseenter');\n            if (Node.isNode(enterEvent.target)) {\n              enterEvent.target = enterEvent.target.parentNode;\n            }\n          }\n          _this.freeEvent(enterEvent);\n        }\n        _this.freeEvent(overEvent);\n      }\n\n      // Then pointermove\n      _this.dispatchEvent(e, 'pointermove');\n      if (e.pointerType === 'touch') _this.dispatchEvent(e, 'touchmove');\n      if (isMouse) {\n        _this.dispatchEvent(e, 'mousemove');\n        _this.cursor = _this.getCursor(e.target);\n      }\n      trackingData.overTargets = e.composedPath();\n      _this.freeEvent(e);\n    };\n    this.onPointerOut = function (from) {\n      var trackingData = _this.trackingData(from.pointerId);\n      if (trackingData.overTargets) {\n        var isMouse = from.pointerType === 'mouse' || from.pointerType === 'pen';\n        var outTarget = _this.findMountedTarget(trackingData.overTargets);\n\n        // pointerout first\n        var outEvent = _this.createPointerEvent(from, 'pointerout', outTarget || undefined);\n        _this.dispatchEvent(outEvent);\n        if (isMouse) _this.dispatchEvent(outEvent, 'mouseout');\n\n        // pointerleave(s) are also dispatched b/c the pointer must've left rootTarget and its descendants to\n        // get an upstream pointerout event (upstream events do not know rootTarget has descendants).\n        var leaveEvent = _this.createPointerEvent(from, 'pointerleave', outTarget || undefined);\n        leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n        while (leaveEvent.target && leaveEvent.target !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n          leaveEvent.currentTarget = leaveEvent.target;\n          _this.notifyTarget(leaveEvent);\n          if (isMouse) {\n            _this.notifyTarget(leaveEvent, 'mouseleave');\n          }\n          if (Node.isNode(leaveEvent.target)) {\n            leaveEvent.target = leaveEvent.target.parentNode;\n          }\n        }\n        trackingData.overTargets = null;\n        _this.freeEvent(outEvent);\n        _this.freeEvent(leaveEvent);\n      }\n      _this.cursor = null;\n    };\n    this.onPointerOver = function (from) {\n      var trackingData = _this.trackingData(from.pointerId);\n      var e = _this.createPointerEvent(from);\n      var isMouse = e.pointerType === 'mouse' || e.pointerType === 'pen';\n      _this.dispatchEvent(e, 'pointerover');\n      if (isMouse) _this.dispatchEvent(e, 'mouseover');\n      if (e.pointerType === 'mouse') _this.cursor = _this.getCursor(e.target);\n\n      // pointerenter events must be fired since the pointer entered from upstream.\n      var enterEvent = _this.clonePointerEvent(e, 'pointerenter');\n      enterEvent.eventPhase = enterEvent.AT_TARGET;\n      while (enterEvent.target && enterEvent.target !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n        enterEvent.currentTarget = enterEvent.target;\n        _this.notifyTarget(enterEvent);\n        if (isMouse) {\n          // mouseenter should not bubble\n          // @see https://developer.mozilla.org/en-US/docs/Web/API/Element/mouseenter_event#usage_notes\n          _this.notifyTarget(enterEvent, 'mouseenter');\n        }\n        if (Node.isNode(enterEvent.target)) {\n          enterEvent.target = enterEvent.target.parentNode;\n        }\n      }\n      trackingData.overTargets = e.composedPath();\n      _this.freeEvent(e);\n      _this.freeEvent(enterEvent);\n    };\n    this.onPointerUpOutside = function (from) {\n      var trackingData = _this.trackingData(from.pointerId);\n      var pressTarget = _this.findMountedTarget(trackingData.pressTargetsByButton[from.button]);\n      var e = _this.createPointerEvent(from);\n      if (pressTarget) {\n        var currentTarget = pressTarget;\n        while (currentTarget) {\n          e.currentTarget = currentTarget;\n          _this.notifyTarget(e, 'pointerupoutside');\n          if (e.pointerType === 'touch') ; else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n            _this.notifyTarget(e, e.button === 2 ? 'rightupoutside' : 'mouseupoutside');\n          }\n          if (Node.isNode(currentTarget)) {\n            currentTarget = currentTarget.parentNode;\n          }\n        }\n        delete trackingData.pressTargetsByButton[from.button];\n      }\n      _this.freeEvent(e);\n    };\n    this.onWheel = function (from) {\n      var wheelEvent = _this.createWheelEvent(from);\n      _this.dispatchEvent(wheelEvent);\n      _this.freeEvent(wheelEvent);\n    };\n    this.onClick = function (from) {\n      if (_this.context.config.useNativeClickEvent) {\n        var e = _this.createPointerEvent(from);\n        _this.dispatchEvent(e);\n        _this.freeEvent(e);\n      }\n    };\n    this.onPointerCancel = function (from) {\n      var e = _this.createPointerEvent(from, undefined, undefined, _this.context.config.alwaysTriggerPointerEventOnCanvas ? _this.rootTarget : undefined);\n      _this.dispatchEvent(e);\n      _this.freeEvent(e);\n    };\n    this.globalRuntime = globalRuntime;\n    this.context = context;\n  }\n  return _createClass(EventService, [{\n    key: \"init\",\n    value: function init() {\n      this.rootTarget = this.context.renderingContext.root.parentNode; // document\n      this.addEventMapping('pointerdown', this.onPointerDown);\n      this.addEventMapping('pointerup', this.onPointerUp);\n      this.addEventMapping('pointermove', this.onPointerMove);\n      this.addEventMapping('pointerout', this.onPointerOut);\n      this.addEventMapping('pointerleave', this.onPointerOut);\n      this.addEventMapping('pointercancel', this.onPointerCancel);\n      this.addEventMapping('pointerover', this.onPointerOver);\n      this.addEventMapping('pointerupoutside', this.onPointerUpOutside);\n      this.addEventMapping('wheel', this.onWheel);\n      this.addEventMapping('click', this.onClick);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.mappingTable = {};\n      this.mappingState = {};\n      this.eventPool.clear();\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var bbox = this.context.contextService.getBoundingClientRect();\n      var scaleX = 1;\n      var scaleY = 1;\n      var $el = this.context.contextService.getDomElement();\n      if ($el && bbox) {\n        var offsetWidth = $el.offsetWidth,\n          offsetHeight = $el.offsetHeight;\n        if (offsetWidth && offsetHeight) {\n          scaleX = bbox.width / offsetWidth;\n          scaleY = bbox.height / offsetHeight;\n        }\n      }\n      return {\n        scaleX: scaleX,\n        scaleY: scaleY,\n        bbox: bbox\n      };\n    }\n\n    /**\n     * Should account for CSS Transform applied on container.\n     * @see https://github.com/antvis/G/issues/1161\n     * @see https://github.com/antvis/G/issues/1677\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/offsetX\n     */\n  }, {\n    key: \"client2Viewport\",\n    value: function client2Viewport(client) {\n      var _this$getScale = this.getScale(),\n        scaleX = _this$getScale.scaleX,\n        scaleY = _this$getScale.scaleY,\n        bbox = _this$getScale.bbox;\n      return new Point((client.x - ((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0)) / scaleX, (client.y - ((bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0)) / scaleY);\n    }\n  }, {\n    key: \"viewport2Client\",\n    value: function viewport2Client(canvas) {\n      var _this$getScale2 = this.getScale(),\n        scaleX = _this$getScale2.scaleX,\n        scaleY = _this$getScale2.scaleY,\n        bbox = _this$getScale2.bbox;\n      return new Point((canvas.x + ((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0)) * scaleX, (canvas.y + ((bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0)) * scaleY);\n    }\n  }, {\n    key: \"viewport2Canvas\",\n    value: function viewport2Canvas(_ref) {\n      var x = _ref.x,\n        y = _ref.y;\n      var canvas = this.rootTarget.defaultView;\n      var camera = canvas.getCamera();\n      var _this$context$config = this.context.config,\n        width = _this$context$config.width,\n        height = _this$context$config.height;\n      var projectionMatrixInverse = camera.getPerspectiveInverse();\n      var worldMatrix = camera.getWorldTransform();\n      var vpMatrix = mat4.multiply(this.tmpMatrix, worldMatrix, projectionMatrixInverse);\n      var viewport = vec3.set(this.tmpVec3, x / width * 2 - 1, (1 - y / height) * 2 - 1, 0);\n      vec3.transformMat4(viewport, viewport, vpMatrix);\n      return new Point(viewport[0], viewport[1]);\n    }\n  }, {\n    key: \"canvas2Viewport\",\n    value: function canvas2Viewport(canvasP) {\n      var canvas = this.rootTarget.defaultView;\n      var camera = canvas.getCamera();\n\n      // World -> Clip\n      var projectionMatrix = camera.getPerspective();\n      var viewMatrix = camera.getViewTransform();\n      var vpMatrix = mat4.multiply(this.tmpMatrix, projectionMatrix, viewMatrix);\n      var clip = vec3.set(this.tmpVec3, canvasP.x, canvasP.y, 0);\n      vec3.transformMat4(this.tmpVec3, this.tmpVec3, vpMatrix);\n\n      // Clip -> NDC -> Viewport, flip Y\n      var _this$context$config2 = this.context.config,\n        width = _this$context$config2.width,\n        height = _this$context$config2.height;\n      return new Point((clip[0] + 1) / 2 * width, (1 - (clip[1] + 1) / 2) * height);\n    }\n  }, {\n    key: \"setPickHandler\",\n    value: function setPickHandler(pickHandler) {\n      this.pickHandler = pickHandler;\n    }\n  }, {\n    key: \"addEventMapping\",\n    value: function addEventMapping(type, fn) {\n      if (!this.mappingTable[type]) {\n        this.mappingTable[type] = [];\n      }\n      this.mappingTable[type].push({\n        fn: fn,\n        priority: 0\n      });\n      this.mappingTable[type].sort(function (a, b) {\n        return a.priority - b.priority;\n      });\n    }\n  }, {\n    key: \"mapEvent\",\n    value: function mapEvent(e) {\n      if (!this.rootTarget) {\n        return;\n      }\n      var mappers = this.mappingTable[e.type];\n      if (mappers) {\n        for (var i = 0, j = mappers.length; i < j; i++) {\n          mappers[i].fn(e);\n        }\n      } else {\n        console.warn(\"[EventService]: Event mapping not defined for \".concat(e.type));\n      }\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(e, type, skipPropagate) {\n      // Canvas should skip\n      if (!skipPropagate) {\n        e.propagationStopped = false;\n        e.propagationImmediatelyStopped = false;\n        this.propagate(e, type);\n      } else {\n        // target phase\n        e.eventPhase = e.AT_TARGET;\n        var canvas = this.rootTarget.defaultView || null;\n        e.currentTarget = canvas;\n        this.notifyListeners(e, type);\n      }\n    }\n  }, {\n    key: \"propagate\",\n    value: function propagate(e, type) {\n      if (!e.target) {\n        return;\n      }\n\n      // [target, parent, root, Canvas]\n      var composedPath = e.composedPath();\n\n      // event flow: capture -> target -> bubbling\n\n      // capture phase\n      e.eventPhase = e.CAPTURING_PHASE;\n      for (var i = composedPath.length - 1; i >= 1; i--) {\n        e.currentTarget = composedPath[i];\n        this.notifyTarget(e, type);\n        if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n      }\n\n      // target phase\n      e.eventPhase = e.AT_TARGET;\n      e.currentTarget = e.target;\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n\n      // find current target in composed path\n      var index = composedPath.indexOf(e.currentTarget);\n\n      // bubbling phase\n      e.eventPhase = e.BUBBLING_PHASE;\n      for (var _i = index + 1; _i < composedPath.length; _i++) {\n        e.currentTarget = composedPath[_i];\n        this.notifyTarget(e, type);\n        if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n      }\n    }\n  }, {\n    key: \"propagationPath\",\n    value: function propagationPath(target) {\n      var propagationPath = [target];\n      var canvas = this.rootTarget.defaultView || null;\n      if (canvas && canvas === target) {\n        propagationPath.unshift(canvas.document);\n        return propagationPath;\n      }\n      for (var i = 0; i < PROPAGATION_LIMIT && target !== this.rootTarget; i++) {\n        // if (Node.isNode(target) && !target.parentNode) {\n        //   throw new Error('Cannot find propagation path to disconnected target');\n        // }\n\n        if (Node.isNode(target) && target.parentNode) {\n          // [target, parent, parent, root]\n          propagationPath.push(target.parentNode);\n          target = target.parentNode;\n        }\n      }\n      if (canvas) {\n        // @ts-ignore\n        propagationPath.push(canvas);\n      }\n      return propagationPath;\n    }\n  }, {\n    key: \"hitTest\",\n    value: function hitTest(position) {\n      var viewportX = position.viewportX,\n        viewportY = position.viewportY;\n      var _this$context$config3 = this.context.config,\n        width = _this$context$config3.width,\n        height = _this$context$config3.height,\n        disableHitTesting = _this$context$config3.disableHitTesting;\n      // outside canvas\n      if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n        return null;\n      }\n      return !disableHitTesting && this.pickHandler(position) || this.rootTarget ||\n      // return Document\n      null;\n    }\n\n    /**\n     * whether the native event trigger came from Canvas,\n     * should account for HTML shape\n     */\n  }, {\n    key: \"isNativeEventFromCanvas\",\n    value: function isNativeEventFromCanvas($el, nativeEvent) {\n      var _target;\n      var target = nativeEvent === null || nativeEvent === void 0 ? void 0 : nativeEvent.target;\n      // Get event target inside a web component.\n      // @see https://stackoverflow.com/questions/57963312/get-event-target-inside-a-web-component\n      if ((_target = target) !== null && _target !== void 0 && _target.shadowRoot) {\n        target = nativeEvent.composedPath()[0];\n      }\n      if (target) {\n        // from <canvas>\n        if (target === $el) {\n          return true;\n        }\n\n        // from <svg>\n        if ($el && $el.contains) {\n          return $el.contains(target);\n        }\n      }\n      if (nativeEvent !== null && nativeEvent !== void 0 && nativeEvent.composedPath) {\n        return nativeEvent.composedPath().indexOf($el) > -1;\n      }\n\n      // account for Touch\n      return false;\n    }\n\n    /**\n     * Find HTML from composed path in native UI event.\n     */\n  }, {\n    key: \"getExistedHTML\",\n    value: function getExistedHTML(event) {\n      if (event.nativeEvent.composedPath) {\n        for (var _i2 = 0, _arr = event.nativeEvent.composedPath(); _i2 < _arr.length; _i2++) {\n          var eventTarget = _arr[_i2];\n          var existed = this.nativeHTMLMap.get(eventTarget);\n          if (existed) {\n            return existed;\n          }\n        }\n      }\n      return null;\n    }\n  }, {\n    key: \"pickTarget\",\n    value: function pickTarget(event) {\n      return this.hitTest({\n        clientX: event.clientX,\n        clientY: event.clientY,\n        viewportX: event.viewportX,\n        viewportY: event.viewportY,\n        x: event.canvasX,\n        y: event.canvasY\n      });\n    }\n  }, {\n    key: \"createPointerEvent\",\n    value: function createPointerEvent(from, type, target, fallbackTarget) {\n      var event = this.allocateEvent(FederatedPointerEvent);\n      this.copyPointerData(from, event);\n      this.copyMouseData(from, event);\n      this.copyData(from, event);\n      event.nativeEvent = from.nativeEvent;\n      event.originalEvent = from;\n      var existedHTML = this.getExistedHTML(event);\n      var $el = this.context.contextService.getDomElement();\n      event.target = target !== null && target !== void 0 ? target : existedHTML || this.isNativeEventFromCanvas($el, event.nativeEvent) && this.pickTarget(event) || fallbackTarget;\n      if (typeof type === 'string') {\n        event.type = type;\n      }\n      return event;\n    }\n  }, {\n    key: \"createWheelEvent\",\n    value: function createWheelEvent(from) {\n      var event = this.allocateEvent(FederatedWheelEvent);\n      this.copyWheelData(from, event);\n      this.copyMouseData(from, event);\n      this.copyData(from, event);\n      event.nativeEvent = from.nativeEvent;\n      event.originalEvent = from;\n      var existedHTML = this.getExistedHTML(event);\n      var $el = this.context.contextService.getDomElement();\n      event.target = existedHTML || this.isNativeEventFromCanvas($el, event.nativeEvent) && this.pickTarget(event);\n      return event;\n    }\n  }, {\n    key: \"trackingData\",\n    value: function trackingData(id) {\n      if (!this.mappingState.trackingData[id]) {\n        this.mappingState.trackingData[id] = {\n          pressTargetsByButton: {},\n          clicksByButton: {},\n          overTarget: null\n        };\n      }\n      return this.mappingState.trackingData[id];\n    }\n  }, {\n    key: \"cloneWheelEvent\",\n    value: function cloneWheelEvent(from) {\n      var event = this.allocateEvent(FederatedWheelEvent);\n      event.nativeEvent = from.nativeEvent;\n      event.originalEvent = from.originalEvent;\n      this.copyWheelData(from, event);\n      this.copyMouseData(from, event);\n      this.copyData(from, event);\n      event.target = from.target;\n      event.path = from.composedPath().slice();\n      event.type = from.type;\n      return event;\n    }\n  }, {\n    key: \"clonePointerEvent\",\n    value: function clonePointerEvent(from, type) {\n      var event = this.allocateEvent(FederatedPointerEvent);\n      event.nativeEvent = from.nativeEvent;\n      event.originalEvent = from.originalEvent;\n      this.copyPointerData(from, event);\n      this.copyMouseData(from, event);\n      this.copyData(from, event);\n      event.target = from.target;\n      event.path = from.composedPath().slice();\n      event.type = type !== null && type !== void 0 ? type : event.type;\n      return event;\n    }\n  }, {\n    key: \"copyPointerData\",\n    value: function copyPointerData(from, to) {\n      // if (\n      //   !(\n      //     from instanceof FederatedPointerEvent &&\n      //     to instanceof FederatedPointerEvent\n      //   )\n      // )\n      //   return;\n\n      to.pointerId = from.pointerId;\n      to.width = from.width;\n      to.height = from.height;\n      to.isPrimary = from.isPrimary;\n      to.pointerType = from.pointerType;\n      to.pressure = from.pressure;\n      to.tangentialPressure = from.tangentialPressure;\n      to.tiltX = from.tiltX;\n      to.tiltY = from.tiltY;\n      to.twist = from.twist;\n    }\n  }, {\n    key: \"copyMouseData\",\n    value: function copyMouseData(from, to) {\n      // if (\n      //   !(\n      //     from instanceof FederatedMouseEvent && to instanceof FederatedMouseEvent\n      //   )\n      // )\n      //   return;\n\n      to.altKey = from.altKey;\n      to.button = from.button;\n      to.buttons = from.buttons;\n      to.ctrlKey = from.ctrlKey;\n      to.metaKey = from.metaKey;\n      to.shiftKey = from.shiftKey;\n      to.client.copyFrom(from.client);\n      to.movement.copyFrom(from.movement);\n      to.canvas.copyFrom(from.canvas);\n      to.screen.copyFrom(from.screen);\n      to.global.copyFrom(from.global);\n      to.offset.copyFrom(from.offset);\n    }\n  }, {\n    key: \"copyWheelData\",\n    value: function copyWheelData(from, to) {\n      to.deltaMode = from.deltaMode;\n      to.deltaX = from.deltaX;\n      to.deltaY = from.deltaY;\n      to.deltaZ = from.deltaZ;\n    }\n  }, {\n    key: \"copyData\",\n    value: function copyData(from, to) {\n      to.isTrusted = from.isTrusted;\n      to.timeStamp = clock.now();\n      to.type = from.type;\n      to.detail = from.detail;\n      to.view = from.view;\n      to.page.copyFrom(from.page);\n      to.viewport.copyFrom(from.viewport);\n    }\n  }, {\n    key: \"allocateEvent\",\n    value: function allocateEvent(constructor) {\n      if (!this.eventPool.has(constructor)) {\n        this.eventPool.set(constructor, []);\n      }\n\n      // @ts-ignore\n      var event = this.eventPool.get(constructor).pop() || new constructor(this);\n      event.eventPhase = event.NONE;\n      event.currentTarget = null;\n      event.path = [];\n      event.target = null;\n      return event;\n    }\n  }, {\n    key: \"freeEvent\",\n    value: function freeEvent(event) {\n      if (event.manager !== this) throw new Error('It is illegal to free an event not managed by this EventBoundary!');\n      var constructor = event.constructor;\n      if (!this.eventPool.has(constructor)) {\n        this.eventPool.set(constructor, []);\n      }\n\n      // @ts-ignore\n      this.eventPool.get(constructor).push(event);\n    }\n  }, {\n    key: \"notifyTarget\",\n    value: function notifyTarget(e, type) {\n      type = type !== null && type !== void 0 ? type : e.type;\n      var key = e.eventPhase === e.CAPTURING_PHASE || e.eventPhase === e.AT_TARGET ? \"\".concat(type, \"capture\") : type;\n      this.notifyListeners(e, key);\n      if (e.eventPhase === e.AT_TARGET) {\n        this.notifyListeners(e, type);\n      }\n    }\n  }, {\n    key: \"notifyListeners\",\n    value: function notifyListeners(e, type) {\n      // hack EventEmitter, stops if the `propagationImmediatelyStopped` flag is set\n      var emitter = e.currentTarget.emitter;\n      // @ts-ignore\n      var listeners = emitter._events[type];\n      if (!listeners) return;\n      if ('fn' in listeners) {\n        if (listeners.once) {\n          emitter.removeListener(type, listeners.fn, undefined, true);\n        }\n        listeners.fn.call(e.currentTarget || listeners.context, e);\n        // listeners.fn.call(listeners.context, e);\n      } else {\n        for (var i = 0; i < listeners.length && !e.propagationImmediatelyStopped; i++) {\n          if (listeners[i].once) {\n            emitter.removeListener(type, listeners[i].fn, undefined, true);\n          }\n          listeners[i].fn.call(e.currentTarget || listeners[i].context, e);\n          // listeners[i].fn.call(listeners[i].context, e);\n        }\n      }\n    }\n\n    /**\n     * some detached nodes may exist in propagation path, need to skip them\n     */\n  }, {\n    key: \"findMountedTarget\",\n    value: function findMountedTarget(propagationPath) {\n      if (!propagationPath) {\n        return null;\n      }\n      var currentTarget = propagationPath[propagationPath.length - 1];\n      for (var i = propagationPath.length - 2; i >= 0; i--) {\n        var target = propagationPath[i];\n        if (target === this.rootTarget || Node.isNode(target) && target.parentNode === currentTarget) {\n          currentTarget = propagationPath[i];\n        } else {\n          break;\n        }\n      }\n      return currentTarget;\n    }\n  }, {\n    key: \"getCursor\",\n    value: function getCursor(target) {\n      var tmp = target;\n      while (tmp) {\n        var cursor = isElement(tmp) && tmp.getAttribute('cursor');\n        if (cursor) {\n          return cursor;\n        }\n        tmp = Node.isNode(tmp) && tmp.parentNode;\n      }\n    }\n  }]);\n}();\n\n/**\n * used in following scenes:\n * - g `ctx.measureText`\n * - g-plugin-canvas-picker `ctx.isPointInPath`\n * - g-plugin-device-renderer `ctx.createLinearGradient` and generate texture\n *\n * @see https://blog.scottlogic.com/2020/03/19/offscreen-canvas.html\n */\nvar OffscreenCanvasCreator = /*#__PURE__*/function () {\n  function OffscreenCanvasCreator() {\n    _classCallCheck(this, OffscreenCanvasCreator);\n  }\n  return _createClass(OffscreenCanvasCreator, [{\n    key: \"getOrCreateCanvas\",\n    value: function getOrCreateCanvas(offscreenCanvas, contextAttributes) {\n      if (this.canvas) {\n        return this.canvas;\n      }\n\n      // user-defined offscreen canvas\n      if (offscreenCanvas || runtime.offscreenCanvas) {\n        this.canvas = offscreenCanvas || runtime.offscreenCanvas;\n        this.context = this.canvas.getContext('2d', _objectSpread({\n          willReadFrequently: true\n        }, contextAttributes));\n      } else {\n        try {\n          // OffscreenCanvas2D measureText can be up to 40% faster.\n          this.canvas = new window.OffscreenCanvas(0, 0);\n          this.context = this.canvas.getContext('2d', _objectSpread({\n            willReadFrequently: true\n          }, contextAttributes));\n          if (!this.context || !this.context.measureText) {\n            this.canvas = document.createElement('canvas');\n            this.context = this.canvas.getContext('2d');\n          }\n        } catch (_unused) {\n          this.canvas = document.createElement('canvas');\n          this.context = this.canvas.getContext('2d', _objectSpread({\n            willReadFrequently: true\n          }, contextAttributes));\n        }\n      }\n      this.canvas.width = 10;\n      this.canvas.height = 10;\n      return this.canvas;\n    }\n  }, {\n    key: \"getOrCreateContext\",\n    value: function getOrCreateContext(offscreenCanvas, contextAttributes) {\n      if (this.context) {\n        return this.context;\n      }\n      this.getOrCreateCanvas(offscreenCanvas, contextAttributes);\n      return this.context;\n    }\n  }], [{\n    key: \"createCanvas\",\n    value:\n    /**\n     * @returns new canvas instance\n     */\n    function createCanvas() {\n      try {\n        return new window.OffscreenCanvas(0, 0);\n      } catch (_unused2) {\n        //\n      }\n      try {\n        return document.createElement('canvas');\n      } catch (_unused3) {\n        //\n      }\n      return null;\n    }\n  }]);\n}();\n\n/**\n * why we need re-render\n */\nvar RenderReason = /*#__PURE__*/function (RenderReason) {\n  RenderReason[RenderReason[\"CAMERA_CHANGED\"] = 0] = \"CAMERA_CHANGED\";\n  RenderReason[RenderReason[\"DISPLAY_OBJECT_CHANGED\"] = 1] = \"DISPLAY_OBJECT_CHANGED\";\n  RenderReason[RenderReason[\"NONE\"] = 2] = \"NONE\";\n  return RenderReason;\n}({});\n\n/**\n * Use frame renderer implemented by `g-canvas/svg/webgl`, in every frame we do followings:\n * * update & merge dirty rectangles\n * * begin frame\n * * filter by visible\n * * sort by z-index in scene graph\n * * culling with strategies registered in `g-canvas/webgl`\n * * end frame\n */\nvar RenderingService = /*#__PURE__*/function () {\n  function RenderingService(globalRuntime, context) {\n    _classCallCheck(this, RenderingService);\n    this.inited = false;\n    this.stats = {\n      /**\n       * total display objects in scenegraph\n       */\n      total: 0,\n      /**\n       * number of display objects need to render in current frame\n       */\n      rendered: 0\n    };\n    this.zIndexCounter = 0;\n    this.hooks = {\n      /**\n       * called before any frame rendered\n       */\n      init: new SyncHook(),\n      initAsync: new AsyncParallelHook(),\n      /**\n       * only dirty object which has sth changed will be rendered\n       */\n      dirtycheck: new SyncWaterfallHook(),\n      /**\n       * do culling\n       */\n      cull: new SyncWaterfallHook(),\n      /**\n       * called at beginning of each frame, won't get called if nothing to re-render\n       */\n      beginFrame: new SyncHook(),\n      /**\n       * called before every dirty object get rendered\n       */\n      beforeRender: new SyncHook(),\n      /**\n       * called when every dirty object rendering even it's culled\n       */\n      render: new SyncHook(),\n      /**\n       * called after every dirty object get rendered\n       */\n      afterRender: new SyncHook(),\n      endFrame: new SyncHook(),\n      destroy: new SyncHook(),\n      /**\n       * use async but faster method such as GPU-based picking in `g-plugin-device-renderer`\n       */\n      pick: new AsyncSeriesWaterfallHook(),\n      /**\n       * Unsafe but sync version of pick.\n       */\n      pickSync: new SyncWaterfallHook(),\n      /**\n       * used in event system\n       */\n      pointerDown: new SyncHook(),\n      pointerUp: new SyncHook(),\n      pointerMove: new SyncHook(),\n      pointerOut: new SyncHook(),\n      pointerOver: new SyncHook(),\n      pointerWheel: new SyncHook(),\n      pointerCancel: new SyncHook(),\n      click: new SyncHook()\n    };\n    this.globalRuntime = globalRuntime;\n    this.context = context;\n  }\n  return _createClass(RenderingService, [{\n    key: \"init\",\n    value: function init(callback) {\n      var _this = this;\n      var context = _objectSpread(_objectSpread({}, this.globalRuntime), this.context);\n\n      // register rendering plugins\n      this.context.renderingPlugins.forEach(function (plugin) {\n        plugin.apply(context, _this.globalRuntime);\n      });\n      this.hooks.init.call();\n      if (this.hooks.initAsync.getCallbacksNum() === 0) {\n        this.inited = true;\n        callback();\n      } else {\n        this.hooks.initAsync.promise().then(function () {\n          _this.inited = true;\n          callback();\n        })[\"catch\"](function (err) {});\n      }\n    }\n  }, {\n    key: \"getStats\",\n    value: function getStats() {\n      return this.stats;\n    }\n\n    /**\n     * Meet the following conditions:\n     * * disable DirtyRectangleRendering\n     * * camera changed\n     */\n  }, {\n    key: \"disableDirtyRectangleRendering\",\n    value: function disableDirtyRectangleRendering() {\n      var renderer = this.context.config.renderer;\n      var _renderer$getConfig = renderer.getConfig(),\n        enableDirtyRectangleRendering = _renderer$getConfig.enableDirtyRectangleRendering;\n      return !enableDirtyRectangleRendering || this.context.renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED);\n    }\n  }, {\n    key: \"render\",\n    value: function render(canvasConfig, frame, rerenderCallback) {\n      var _this2 = this;\n      this.stats.total = 0;\n      this.stats.rendered = 0;\n      this.zIndexCounter = 0;\n      var renderingContext = this.context.renderingContext;\n      this.globalRuntime.sceneGraphService.syncHierarchy(renderingContext.root);\n      this.globalRuntime.sceneGraphService.triggerPendingEvents();\n      if (renderingContext.renderReasons.size && this.inited) {\n        // @ts-ignore\n        renderingContext.dirtyRectangleRenderingDisabled = this.disableDirtyRectangleRendering();\n        var onlyCameraChanged = renderingContext.renderReasons.size === 1 && renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED);\n        var shouldTriggerRenderHooks = !canvasConfig.disableRenderHooks || !(canvasConfig.disableRenderHooks && onlyCameraChanged);\n        if (shouldTriggerRenderHooks) {\n          this.renderDisplayObject(renderingContext.root, canvasConfig, renderingContext);\n        }\n        this.hooks.beginFrame.call(frame);\n        if (shouldTriggerRenderHooks) {\n          renderingContext.renderListCurrentFrame.forEach(function (object) {\n            _this2.hooks.beforeRender.call(object);\n            _this2.hooks.render.call(object);\n            _this2.hooks.afterRender.call(object);\n          });\n        }\n        this.hooks.endFrame.call(frame);\n        renderingContext.renderListCurrentFrame = [];\n        renderingContext.renderReasons.clear();\n        rerenderCallback();\n      }\n\n      // console.log('stats', this.stats);\n    }\n  }, {\n    key: \"renderDisplayObject\",\n    value: function renderDisplayObject(displayObject, canvasConfig, renderingContext) {\n      var self = this;\n      var _canvasConfig$rendere = canvasConfig.renderer.getConfig(),\n        enableDirtyCheck = _canvasConfig$rendere.enableDirtyCheck,\n        enableCulling = _canvasConfig$rendere.enableCulling;\n      function internalRenderSingleDisplayObject(object) {\n        // TODO: relayout\n\n        // dirtycheck first\n        var renderable = object.renderable,\n          sortable = object.sortable;\n        // eslint-disable-next-line no-nested-ternary\n        var objectChanged = enableDirtyCheck ?\n        // @ts-ignore\n        renderable.dirty || renderingContext.dirtyRectangleRenderingDisabled ? object : null : object;\n        if (objectChanged) {\n          var objectToRender = enableCulling ? self.hooks.cull.call(objectChanged, self.context.camera) : objectChanged;\n          if (objectToRender) {\n            self.stats.rendered += 1;\n            renderingContext.renderListCurrentFrame.push(objectToRender);\n          }\n        }\n        renderable.dirty = false;\n        sortable.renderOrder = self.zIndexCounter;\n        self.zIndexCounter += 1;\n        self.stats.total += 1;\n\n        // sort is very expensive, use cached result if possible\n        if (sortable.dirty) {\n          self.sort(object, sortable);\n          sortable.dirty = false;\n          sortable.dirtyChildren = [];\n          sortable.dirtyReason = undefined;\n        }\n      }\n      var stack = [displayObject];\n      while (stack.length > 0) {\n        var _currentObject$sortab;\n        var currentObject = stack.pop();\n        internalRenderSingleDisplayObject(currentObject);\n\n        // recursive rendering its children\n        var objects = ((_currentObject$sortab = currentObject.sortable) === null || _currentObject$sortab === void 0 || (_currentObject$sortab = _currentObject$sortab.sorted) === null || _currentObject$sortab === void 0 ? void 0 : _currentObject$sortab.length) > 0 ? currentObject.sortable.sorted : currentObject.childNodes;\n        for (var i = objects.length - 1; i >= 0; i--) {\n          stack.push(objects[i]);\n        }\n      }\n    }\n  }, {\n    key: \"sort\",\n    value: function sort(displayObject, sortable) {\n      var _sortable$sorted, _sortable$sorted2;\n      if ((sortable === null || sortable === void 0 || (_sortable$sorted = sortable.sorted) === null || _sortable$sorted === void 0 ? void 0 : _sortable$sorted.length) > 0 && sortable.dirtyReason !== SortReason.Z_INDEX_CHANGED) {\n        // avoid re-sorting the whole children list\n        sortable.dirtyChildren.forEach(function (child) {\n          // remove from sorted list\n          var sortIndex = sortable.sorted.indexOf(child);\n          if (sortIndex > -1) {\n            sortable.sorted.splice(sortIndex, 1);\n          }\n          var index = displayObject.childNodes.indexOf(child);\n          if (index > -1) {\n            if (sortable.sorted.length === 0) {\n              sortable.sorted.push(child);\n            } else {\n              var _index = sortedIndex(sortable.sorted, child);\n              sortable.sorted.splice(_index, 0, child);\n            }\n          }\n        });\n      } else {\n        sortable.sorted = displayObject.childNodes.slice().sort(sortByZIndex);\n      }\n\n      // When the child elements are changed and sorted, if there are no more stacked elements in the child elements (i.e. zIndex != 0), clear the sort list\n      if (((_sortable$sorted2 = sortable.sorted) === null || _sortable$sorted2 === void 0 ? void 0 : _sortable$sorted2.length) > 0 && displayObject.childNodes.filter(function (child) {\n        return child.parsedStyle.zIndex;\n      }).length === 0) {\n        sortable.sorted = [];\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.inited = false;\n      this.hooks.destroy.call();\n      this.globalRuntime.sceneGraphService.clearPendingEvents();\n    }\n  }, {\n    key: \"dirtify\",\n    value: function dirtify() {\n      // need re-render\n      this.context.renderingContext.renderReasons.add(RenderReason.DISPLAY_OBJECT_CHANGED);\n    }\n  }]);\n}();\n\nvar ATTRIBUTE_REGEXP = /\\[\\s*(.*)=(.*)\\s*\\]/;\n\n/**\n * support the following DOM API:\n * * getElementById\n * * getElementsByClassName\n * * getElementsByName\n * * getElementsByTag\n * * querySelector\n * * querySelectorAll\n */\nvar DefaultSceneGraphSelector = /*#__PURE__*/function () {\n  function DefaultSceneGraphSelector() {\n    _classCallCheck(this, DefaultSceneGraphSelector);\n  }\n  return _createClass(DefaultSceneGraphSelector, [{\n    key: \"selectOne\",\n    value: function selectOne(query, root) {\n      var _this = this;\n      if (query.startsWith('.')) {\n        return root.find(function (node) {\n          // return !node.shadow && node.id === query.substring(1);\n          return ((node === null || node === void 0 ? void 0 : node.classList) || []).indexOf(_this.getIdOrClassname(query)) > -1;\n        });\n      }\n      if (query.startsWith('#')) {\n        // getElementById('id')\n        return root.find(function (node) {\n          // return !node.shadow && node.id === query.substring(1);\n          return node.id === _this.getIdOrClassname(query);\n        });\n      }\n      if (query.startsWith('[')) {\n        var _this$getAttribute = this.getAttribute(query),\n          name = _this$getAttribute.name,\n          value = _this$getAttribute.value;\n        if (name) {\n          // getElementByName();\n          return root.find(function (node) {\n            return root !== node && (name === 'name' ? node.name === value : _this.attributeToString(node, name) === value);\n          });\n        }\n        return null;\n      }\n      // getElementsByTag('circle');\n      return root.find(function (node) {\n        return root !== node && node.nodeName === query;\n      });\n    }\n  }, {\n    key: \"selectAll\",\n    value: function selectAll(query, root) {\n      var _this2 = this;\n      // only support `[name=\"${name}\"]` `.className` `#id`\n      if (query.startsWith('.')) {\n        // getElementsByClassName('className');\n        // should not include itself\n        return root.findAll(function (node) {\n          return root !== node && ((node === null || node === void 0 ? void 0 : node.classList) || []).indexOf(_this2.getIdOrClassname(query)) > -1;\n        });\n      }\n      if (query.startsWith('#')) {\n        return root.findAll(function (node) {\n          return root !== node && node.id === _this2.getIdOrClassname(query);\n        });\n      }\n      if (query.startsWith('[')) {\n        var _this$getAttribute2 = this.getAttribute(query),\n          name = _this$getAttribute2.name,\n          value = _this$getAttribute2.value;\n        if (name) {\n          // getElementsByName();\n          return root.findAll(function (node) {\n            return root !== node && (name === 'name' ? node.name === value : _this2.attributeToString(node, name) === value);\n          });\n        }\n        return [];\n      }\n      // getElementsByTag('circle');\n      return root.findAll(function (node) {\n        return root !== node && node.nodeName === query;\n      });\n    }\n  }, {\n    key: \"is\",\n    value: function is(query, node) {\n      // a simple `matches` implementation\n      if (query.startsWith('.')) {\n        return node.className === this.getIdOrClassname(query);\n      }\n      if (query.startsWith('#')) {\n        return node.id === this.getIdOrClassname(query);\n      }\n      if (query.startsWith('[')) {\n        var _this$getAttribute3 = this.getAttribute(query),\n          name = _this$getAttribute3.name,\n          value = _this$getAttribute3.value;\n        return name === 'name' ? node.name === value : this.attributeToString(node, name) === value;\n      }\n      return node.nodeName === query;\n    }\n  }, {\n    key: \"getIdOrClassname\",\n    value: function getIdOrClassname(query) {\n      return query.substring(1);\n    }\n  }, {\n    key: \"getAttribute\",\n    value: function getAttribute(query) {\n      var matches = query.match(ATTRIBUTE_REGEXP);\n      var name = '';\n      var value = '';\n      if (matches && matches.length > 2) {\n        name = matches[1].replace(/\"/g, '');\n        value = matches[2].replace(/\"/g, '');\n      }\n      return {\n        name: name,\n        value: value\n      };\n    }\n  }, {\n    key: \"attributeToString\",\n    value: function attributeToString(node, name) {\n      if (!node.getAttribute) {\n        return '';\n      }\n      var value = node.getAttribute(name);\n      if (isNil(value)) {\n        return '';\n      }\n      if (value.toString) {\n        return value.toString();\n      }\n      return '';\n    }\n  }]);\n}();\n\n/**\n * built-in events for element\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationEvent\n *\n * TODO: use MutationObserver instead\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n */\nvar ElementEvent = /*#__PURE__*/function (ElementEvent) {\n  // --- @see https://developer.mozilla.org/en-US/docs/Web/API/MutationEvent\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMAttrModified\n   */\n  ElementEvent[\"ATTR_MODIFIED\"] = \"DOMAttrModified\";\n  /**\n   * it has been inserted\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeInserted\n   */\n  ElementEvent[\"INSERTED\"] = \"DOMNodeInserted\";\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#domnodeinsertedintodocument\n   */\n  ElementEvent[\"MOUNTED\"] = \"DOMNodeInsertedIntoDocument\";\n  /**\n   * it is being removed\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeRemoved\n   */\n  ElementEvent[\"REMOVED\"] = \"removed\";\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#domnoderemovedfromdocument\n   */\n  ElementEvent[\"UNMOUNTED\"] = \"DOMNodeRemovedFromDocument\";\n  // ---\n  ElementEvent[\"REPARENT\"] = \"reparent\";\n  ElementEvent[\"DESTROY\"] = \"destroy\";\n  ElementEvent[\"BOUNDS_CHANGED\"] = \"bounds-changed\";\n  ElementEvent[\"CULLED\"] = \"culled\";\n  return ElementEvent;\n}({});\n\n// #region EventTarget\n\n// #region Node\n\n// #region Element\n\n// #region AnimationTimeline\n\n// #region Document\n\n// #region CSSStyleDeclaration\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CSSStyleDeclaration\n */\n\n// #region Canvas\n\nvar MutationEvent = /*#__PURE__*/function (_FederatedEvent) {\n  function MutationEvent(typeArg, relatedNode, prevValue, newValue, attrName, attrChange, prevParsedValue, newParsedValue) {\n    var _this;\n    _classCallCheck(this, MutationEvent);\n    _this = _callSuper(this, MutationEvent, [null]);\n    _this.relatedNode = relatedNode;\n    _this.prevValue = prevValue;\n    _this.newValue = newValue;\n    _this.attrName = attrName;\n    _this.attrChange = attrChange;\n    _this.prevParsedValue = prevParsedValue;\n    _this.newParsedValue = newParsedValue;\n    _this.type = typeArg;\n    return _this;\n  }\n  _inherits(MutationEvent, _FederatedEvent);\n  return _createClass(MutationEvent);\n}(FederatedEvent);\nMutationEvent.ADDITION = 2;\nMutationEvent.MODIFICATION = 1;\nMutationEvent.REMOVAL = 3;\n\nfunction markRenderableDirty(e) {\n  var renderable = e.renderable;\n  if (renderable) {\n    renderable.renderBoundsDirty = true;\n    renderable.boundsDirty = true;\n  }\n}\nvar reparentEvent = new MutationEvent(ElementEvent.REPARENT, null, '', '', '', 0, '', '');\n\n// Object pooling\n/** do not modify this objects */\nvar $vec2Zero = vec2.create();\n/** do not modify this objects */\nvar $vec3Zero = vec3.create();\n/** do not modify this objects */\nvar $vec3One = vec3.fromValues(1, 1, 1);\n/** do not modify this objects */\nvar $mat4Identity = mat4.create();\n\n/** shared objects */\nvar $vec2 = vec2.create();\n/** shared objects */\nvar $vec3$1 = vec3.create();\n/** shared objects */\nvar $mat4 = mat4.create();\n/** shared objects */\nvar $quat$1 = quat$1.create();\nvar $setLocalTransform_1 = vec3.create();\nvar $setLocalTransform_2 = quat$1.create();\nvar $setLocalTransform_3 = vec3.create();\nvar $setLocalPosition = vec3.create();\nvar $setPosition_1 = vec3.create();\nvar $setPosition_ParentInvertMatrix = mat4.create();\nvar $setEulerAngles_InvParentRot = quat$1.create();\nvar $rotateLocal = quat$1.create();\nvar $rotate_ParentInvertRotation = quat$1.create();\nvar $triggerPendingEvents_detail = {\n  affectChildren: true\n};\n\n/**\n * update transform in scene graph\n *\n * @see https://community.khronos.org/t/scene-graphs/50542/7\n */\nvar DefaultSceneGraphService = /*#__PURE__*/function () {\n  function DefaultSceneGraphService(runtime) {\n    _classCallCheck(this, DefaultSceneGraphService);\n    // target -> affectChildren\n    this.pendingEvents = new Map();\n    this.boundsChangedEvent = new CustomEvent(ElementEvent.BOUNDS_CHANGED);\n    this.displayObjectDependencyMap = new WeakMap();\n    this.runtime = runtime;\n  }\n  return _createClass(DefaultSceneGraphService, [{\n    key: \"matches\",\n    value: function matches(query, root) {\n      return this.runtime.sceneGraphSelector.is(query, root);\n    }\n  }, {\n    key: \"querySelector\",\n    value: function querySelector(query, root) {\n      return this.runtime.sceneGraphSelector.selectOne(query, root);\n    }\n  }, {\n    key: \"querySelectorAll\",\n    value: function querySelectorAll(query, root) {\n      return this.runtime.sceneGraphSelector.selectAll(query, root);\n      // .filter((node) => !node.shadow);\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(child, parent, index) {\n      var _sortable$sorted;\n      var detached = false;\n      if (child.parentNode) {\n        detached = child.parentNode !== parent;\n        this.detach(child);\n      }\n      var isChildFragment = child.nodeName === Shape.FRAGMENT;\n      var isAttachToFragment = isInFragment(parent);\n      child.parentNode = parent;\n      var nodes = isChildFragment ? child.childNodes : [child];\n      if (isNumber(index)) {\n        nodes.forEach(function (node) {\n          parent.childNodes.splice(index, 0, node);\n          node.parentNode = parent;\n        });\n      } else {\n        nodes.forEach(function (node) {\n          parent.childNodes.push(node);\n          node.parentNode = parent;\n        });\n      }\n\n      // parent needs re-sort\n      var _ref = parent,\n        sortable = _ref.sortable;\n      if (sortable !== null && sortable !== void 0 && (_sortable$sorted = sortable.sorted) !== null && _sortable$sorted !== void 0 && _sortable$sorted.length || sortable.dirty || child.parsedStyle.zIndex) {\n        if (sortable.dirtyChildren.indexOf(child) === -1) {\n          sortable.dirtyChildren.push(child);\n        }\n        // if (sortable) {\n        // only child has z-Index\n        sortable.dirty = true;\n        sortable.dirtyReason = SortReason.ADDED;\n      }\n      if (isAttachToFragment) return;\n      if (isChildFragment) this.dirtifyFragment(child);else {\n        var transform = child.transformable;\n        if (transform) {\n          this.dirtifyWorld(child, transform);\n        }\n      }\n      if (detached) {\n        child.dispatchEvent(reparentEvent);\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach(child) {\n      var _sortable$sorted2, _style;\n      if (!child.parentNode) {\n        return;\n      }\n      var transform = child.transformable;\n      // if (transform) {\n      //   const worldTransform = this.getWorldTransform(child, transform);\n      //   mat4.getScaling(transform.localScale, worldTransform);\n      //   mat4.getTranslation(transform.localPosition, worldTransform);\n      //   mat4.getRotation(transform.localRotation, worldTransform);\n      //   transform.localDirtyFlag = true;\n      // }\n\n      // parent needs re-sort\n      var _ref2 = child.parentNode,\n        sortable = _ref2.sortable;\n      // if (sortable) {\n      if (sortable !== null && sortable !== void 0 && (_sortable$sorted2 = sortable.sorted) !== null && _sortable$sorted2 !== void 0 && _sortable$sorted2.length || (_style = child.style) !== null && _style !== void 0 && _style.zIndex) {\n        if (sortable.dirtyChildren.indexOf(child) === -1) {\n          sortable.dirtyChildren.push(child);\n        }\n        sortable.dirty = true;\n        sortable.dirtyReason = SortReason.REMOVED;\n      }\n      var index = child.parentNode.childNodes.indexOf(child);\n      if (index > -1) {\n        child.parentNode.childNodes.splice(index, 1);\n      }\n      if (transform) {\n        this.dirtifyWorld(child, transform);\n      }\n      child.parentNode = null;\n    }\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin(element) {\n      element.getGeometryBounds();\n      return element.transformable.origin;\n    }\n\n    /**\n     * same as pivot in Pixi.js\n     *\n     * @see https://stackoverflow.com/questions/40748452/how-to-change-css-transform-origin-but-preserve-transformation\n     */\n  }, {\n    key: \"setOrigin\",\n    value: function setOrigin(element, origin) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof origin === 'number') {\n        origin = [origin, y, z];\n      }\n      var transform = element.transformable;\n      if (origin[0] === transform.origin[0] && origin[1] === transform.origin[1] && origin[2] === transform.origin[2]) {\n        return;\n      }\n      var originVec = transform.origin;\n\n      // const delta = vec3.subtract(vec3.create(), origin, originVec);\n      // vec3.add(transform.localPosition, transform.localPosition, delta);\n\n      // update origin\n      originVec[0] = origin[0];\n      originVec[1] = origin[1];\n      originVec[2] = origin[2] || 0;\n      this.dirtifyLocal(element, transform);\n    }\n\n    /**\n     * rotate in world space\n     */\n  }, {\n    key: \"rotate\",\n    value: function rotate(element, degrees) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof degrees === 'number') {\n        degrees = vec3.fromValues(degrees, y, z);\n      }\n      var transform = element.transformable;\n      if (element.parentNode === null || !element.parentNode.transformable) {\n        this.rotateLocal(element, degrees);\n      } else {\n        var rotation = $quat$1;\n        quat$1.fromEuler(rotation, degrees[0], degrees[1], degrees[2]);\n        var rot = this.getRotation(element);\n        var parentRot = this.getRotation(element.parentNode);\n        quat$1.copy($rotate_ParentInvertRotation, parentRot);\n        quat$1.invert($rotate_ParentInvertRotation, $rotate_ParentInvertRotation);\n        quat$1.multiply(rotation, $rotate_ParentInvertRotation, rotation);\n        quat$1.multiply(transform.localRotation, rotation, rot);\n        quat$1.normalize(transform.localRotation, transform.localRotation);\n        this.dirtifyLocal(element, transform);\n      }\n    }\n\n    /**\n     * rotate in local space\n     * @see @see https://docs.microsoft.com/en-us/windows/win32/api/directxmath/nf-directxmath-xmquaternionrotationrollpitchyaw\n     */\n  }, {\n    key: \"rotateLocal\",\n    value: function rotateLocal(element, degrees) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof degrees === 'number') {\n        degrees = vec3.fromValues(degrees, y, z);\n      }\n      var transform = element.transformable;\n      quat$1.fromEuler($rotateLocal, degrees[0], degrees[1], degrees[2]);\n      quat$1.mul(transform.localRotation, transform.localRotation, $rotateLocal);\n      this.dirtifyLocal(element, transform);\n    }\n\n    /**\n     * set euler angles(degrees) in world space\n     */\n  }, {\n    key: \"setEulerAngles\",\n    value: function setEulerAngles(element, degrees) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof degrees === 'number') {\n        degrees = vec3.fromValues(degrees, y, z);\n      }\n      var transform = element.transformable;\n      if (element.parentNode === null || !element.parentNode.transformable) {\n        this.setLocalEulerAngles(element, degrees);\n      } else {\n        quat$1.fromEuler(transform.localRotation, degrees[0], degrees[1], degrees[2]);\n        var parentRotation = this.getRotation(element.parentNode);\n        quat$1.copy($setEulerAngles_InvParentRot, quat$1.invert($quat$1, parentRotation));\n        quat$1.mul(transform.localRotation, transform.localRotation, $setEulerAngles_InvParentRot);\n        this.dirtifyLocal(element, transform);\n      }\n    }\n\n    /**\n     * set euler angles(degrees) in local space\n     */\n  }, {\n    key: \"setLocalEulerAngles\",\n    value: function setLocalEulerAngles(element, degrees) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var dirtify = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      if (typeof degrees === 'number') {\n        degrees = vec3.fromValues(degrees, y, z);\n      }\n      var transform = element.transformable;\n      quat$1.fromEuler(transform.localRotation, degrees[0], degrees[1], degrees[2]);\n      if (dirtify) {\n        this.dirtifyLocal(element, transform);\n      }\n    }\n\n    /**\n     * translate in local space\n     *\n     * @example\n     * ```\n     * translateLocal(x, y, z)\n     * translateLocal(vec3(x, y, z))\n     * ```\n     */\n  }, {\n    key: \"translateLocal\",\n    value: function translateLocal(element, translation) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof translation === 'number') {\n        translation = vec3.fromValues(translation, y, z);\n      }\n      var transform = element.transformable;\n      if (vec3.equals(translation, $vec3Zero)) return;\n      vec3.transformQuat(translation, translation, transform.localRotation);\n      vec3.add(transform.localPosition, transform.localPosition, translation);\n      this.dirtifyLocal(element, transform);\n    }\n\n    /**\n     * move to position in world space\n     *\n     *  g  move/moveTo\n     * @see https://github.com/antvis/g/blob/master/packages/g-base/src/abstract/element.ts#L684-L689\n     */\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(element, position) {\n      var _position$;\n      var transform = element.transformable;\n      $setPosition_1[0] = position[0];\n      $setPosition_1[1] = position[1];\n      $setPosition_1[2] = (_position$ = position[2]) !== null && _position$ !== void 0 ? _position$ : 0;\n      if (vec3.equals(this.getPosition(element), $setPosition_1)) {\n        return;\n      }\n      vec3.copy(transform.position, $setPosition_1);\n      if (element.parentNode === null || !element.parentNode.transformable) {\n        vec3.copy(transform.localPosition, $setPosition_1);\n      } else {\n        var parentTransform = element.parentNode.transformable;\n        mat4.copy($setPosition_ParentInvertMatrix, parentTransform.worldTransform);\n        mat4.invert($setPosition_ParentInvertMatrix, $setPosition_ParentInvertMatrix);\n        vec3.transformMat4(transform.localPosition, $setPosition_1, $setPosition_ParentInvertMatrix);\n      }\n      this.dirtifyLocal(element, transform);\n    }\n\n    /**\n     * move to position in local space\n     */\n  }, {\n    key: \"setLocalPosition\",\n    value: function setLocalPosition(element, position) {\n      var _position$2;\n      var dirtify = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var transform = element.transformable;\n      $setLocalPosition[0] = position[0];\n      $setLocalPosition[1] = position[1];\n      $setLocalPosition[2] = (_position$2 = position[2]) !== null && _position$2 !== void 0 ? _position$2 : 0;\n      if (vec3.equals(transform.localPosition, $setLocalPosition)) {\n        return;\n      }\n      vec3.copy(transform.localPosition, $setLocalPosition);\n      if (dirtify) {\n        this.dirtifyLocal(element, transform);\n      }\n    }\n\n    /**\n     * scale in local space\n     */\n  }, {\n    key: \"scaleLocal\",\n    value: function scaleLocal(element, scaling) {\n      var _scaling$;\n      var transform = element.transformable;\n      vec3.multiply(transform.localScale, transform.localScale, vec3.set($vec3$1, scaling[0], scaling[1], (_scaling$ = scaling[2]) !== null && _scaling$ !== void 0 ? _scaling$ : 1));\n      this.dirtifyLocal(element, transform);\n    }\n  }, {\n    key: \"setLocalScale\",\n    value: function setLocalScale(element, scaling) {\n      var _scaling$2;\n      var dirtify = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var transform = element.transformable;\n      vec3.set($vec3$1, scaling[0], scaling[1], (_scaling$2 = scaling[2]) !== null && _scaling$2 !== void 0 ? _scaling$2 : transform.localScale[2]);\n      if (vec3.equals($vec3$1, transform.localScale)) {\n        return;\n      }\n      vec3.copy(transform.localScale, $vec3$1);\n      if (dirtify) {\n        this.dirtifyLocal(element, transform);\n      }\n    }\n\n    /**\n     * translate in world space\n     *\n     * @example\n     * ```\n     * translate(x, y, z)\n     * translate(vec3(x, y, z))\n     * ```\n     *\n     *  g  translate 2D\n     * @see https://github.com/antvis/g/blob/master/packages/g-base/src/abstract/element.ts#L665-L676\n     */\n  }, {\n    key: \"translate\",\n    value: function translate(element, translation) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof translation === 'number') {\n        translation = vec3.set($vec3$1, translation, y, z);\n      }\n      if (vec3.equals(translation, $vec3Zero)) return;\n      vec3.add($vec3$1, this.getPosition(element), translation);\n      this.setPosition(element, $vec3$1);\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(element, rotation, y, z, w) {\n      var transform = element.transformable;\n      if (typeof rotation === 'number') {\n        rotation = quat$1.fromValues(rotation, y, z, w);\n      }\n      if (element.parentNode === null || !element.parentNode.transformable) {\n        this.setLocalRotation(element, rotation);\n      } else {\n        var parentRot = this.getRotation(element.parentNode);\n        quat$1.copy($quat$1, parentRot);\n        quat$1.invert($quat$1, $quat$1);\n        quat$1.multiply(transform.localRotation, $quat$1, rotation);\n        quat$1.normalize(transform.localRotation, transform.localRotation);\n        this.dirtifyLocal(element, transform);\n      }\n    }\n  }, {\n    key: \"setLocalRotation\",\n    value: function setLocalRotation(element, rotation, y, z, w) {\n      var dirtify = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n      if (typeof rotation === 'number') {\n        rotation = quat$1.set($quat$1, rotation, y, z, w);\n      }\n      var transform = element.transformable;\n      quat$1.copy(transform.localRotation, rotation);\n      if (dirtify) {\n        this.dirtifyLocal(element, transform);\n      }\n    }\n  }, {\n    key: \"setLocalSkew\",\n    value: function setLocalSkew(element, skew, y) {\n      var dirtify = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      if (typeof skew === 'number') {\n        skew = vec2.set($vec2, skew, y);\n      }\n      var transform = element.transformable;\n      vec2.copy(transform.localSkew, skew);\n      if (dirtify) {\n        this.dirtifyLocal(element, transform);\n      }\n    }\n  }, {\n    key: \"dirtifyLocal\",\n    value: function dirtifyLocal(element, transform) {\n      if (isInFragment(element)) return;\n      if (!transform.localDirtyFlag) {\n        transform.localDirtyFlag = true;\n        if (!transform.dirtyFlag) {\n          this.dirtifyWorld(element, transform);\n        }\n      }\n    }\n  }, {\n    key: \"dirtifyWorld\",\n    value: function dirtifyWorld(element, transform) {\n      if (!transform.dirtyFlag) {\n        this.unfreezeParentToRoot(element);\n      }\n      this.dirtifyWorldInternal(element, transform);\n      this.dirtifyToRoot(element, true);\n    }\n  }, {\n    key: \"dirtifyFragment\",\n    value: function dirtifyFragment(element) {\n      var transform = element.transformable;\n      if (transform) {\n        transform.frozen = false;\n        transform.dirtyFlag = true;\n        transform.localDirtyFlag = true;\n      }\n      var renderable = element.renderable;\n      if (renderable) {\n        renderable.renderBoundsDirty = true;\n        renderable.boundsDirty = true;\n        renderable.dirty = true;\n      }\n      var length = element.childNodes.length;\n      for (var i = 0; i < length; i++) {\n        this.dirtifyFragment(element.childNodes[i]);\n      }\n      if (element.nodeName === Shape.FRAGMENT) {\n        this.pendingEvents.set(element, false);\n      }\n    }\n  }, {\n    key: \"triggerPendingEvents\",\n    value: function triggerPendingEvents() {\n      var _this = this;\n      var triggered = new Set();\n      var trigger = function trigger(element, detail) {\n        if (!element.isConnected || triggered.has(element) || element.nodeName === Shape.FRAGMENT) {\n          return;\n        }\n        _this.boundsChangedEvent.detail = detail;\n        _this.boundsChangedEvent.target = element;\n        if (element.isMutationObserved) {\n          element.dispatchEvent(_this.boundsChangedEvent);\n        } else {\n          element.ownerDocument.defaultView.dispatchEvent(_this.boundsChangedEvent, true);\n        }\n        triggered.add(element);\n      };\n      this.pendingEvents.forEach(function (affectChildren, element) {\n        if (element.nodeName === Shape.FRAGMENT) {\n          return;\n        }\n        $triggerPendingEvents_detail.affectChildren = affectChildren;\n        if (affectChildren) {\n          element.forEach(function (e) {\n            trigger(e, $triggerPendingEvents_detail);\n          });\n        } else trigger(element, $triggerPendingEvents_detail);\n      });\n      triggered.clear();\n      this.clearPendingEvents();\n    }\n  }, {\n    key: \"clearPendingEvents\",\n    value: function clearPendingEvents() {\n      this.pendingEvents.clear();\n    }\n  }, {\n    key: \"dirtifyToRoot\",\n    value: function dirtifyToRoot(element) {\n      var affectChildren = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var p = element;\n\n      // only need to re-render itself\n      if (p.renderable) {\n        p.renderable.dirty = true;\n      }\n      while (p) {\n        markRenderableDirty(p);\n        p = p.parentNode;\n      }\n      if (affectChildren) {\n        element.forEach(function (e) {\n          markRenderableDirty(e);\n        });\n      }\n      this.informDependentDisplayObjects(element);\n      this.pendingEvents.set(element, affectChildren);\n    }\n  }, {\n    key: \"updateDisplayObjectDependency\",\n    value: function updateDisplayObjectDependency(name, oldPath, newPath, object) {\n      // clear ref to old clip path\n      if (oldPath && oldPath !== newPath) {\n        var oldDependencyMap = this.displayObjectDependencyMap.get(oldPath);\n        if (oldDependencyMap && oldDependencyMap[name]) {\n          var index = oldDependencyMap[name].indexOf(object);\n          oldDependencyMap[name].splice(index, 1);\n        }\n      }\n      if (newPath) {\n        var newDependencyMap = this.displayObjectDependencyMap.get(newPath);\n        if (!newDependencyMap) {\n          this.displayObjectDependencyMap.set(newPath, {});\n          newDependencyMap = this.displayObjectDependencyMap.get(newPath);\n        }\n        if (!newDependencyMap[name]) {\n          newDependencyMap[name] = [];\n        }\n        newDependencyMap[name].push(object);\n      }\n    }\n  }, {\n    key: \"informDependentDisplayObjects\",\n    value: function informDependentDisplayObjects(object) {\n      var _this2 = this;\n      var dependencyMap = this.displayObjectDependencyMap.get(object);\n      if (!dependencyMap) {\n        return;\n      }\n      Object.keys(dependencyMap).forEach(function (name) {\n        dependencyMap[name].forEach(function (target) {\n          _this2.dirtifyToRoot(target, true);\n          target.dispatchEvent(new MutationEvent(ElementEvent.ATTR_MODIFIED, target, _this2, _this2, name, MutationEvent.MODIFICATION, _this2, _this2));\n          if (target.isCustomElement && target.isConnected) {\n            if (target.attributeChangedCallback) {\n              target.attributeChangedCallback(name, _this2, _this2);\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition(element) {\n      var transform = element.transformable;\n      return mat4.getTranslation(transform.position, this.getWorldTransform(element, transform));\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation(element) {\n      var transform = element.transformable;\n      return mat4.getRotation(transform.rotation, this.getWorldTransform(element, transform));\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale(element) {\n      var transform = element.transformable;\n      return mat4.getScaling(transform.scaling, this.getWorldTransform(element, transform));\n    }\n  }, {\n    key: \"getWorldTransform\",\n    value: function getWorldTransform(element) {\n      var transform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : element.transformable;\n      if (!transform.localDirtyFlag && !transform.dirtyFlag) {\n        return transform.worldTransform;\n      }\n      if (element.parentNode && element.parentNode.transformable) {\n        this.getWorldTransform(element.parentNode);\n      }\n      this.sync(element, transform);\n      return transform.worldTransform;\n    }\n  }, {\n    key: \"getLocalPosition\",\n    value: function getLocalPosition(element) {\n      return element.transformable.localPosition;\n    }\n  }, {\n    key: \"getLocalRotation\",\n    value: function getLocalRotation(element) {\n      return element.transformable.localRotation;\n    }\n  }, {\n    key: \"getLocalScale\",\n    value: function getLocalScale(element) {\n      return element.transformable.localScale;\n    }\n  }, {\n    key: \"getLocalSkew\",\n    value: function getLocalSkew(element) {\n      return element.transformable.localSkew;\n    }\n  }, {\n    key: \"calcLocalTransform\",\n    value: function calcLocalTransform(transform) {\n      var hasSkew = transform.localSkew[0] !== 0 || transform.localSkew[1] !== 0;\n      if (hasSkew) {\n        mat4.fromRotationTranslationScaleOrigin(transform.localTransform, transform.localRotation, transform.localPosition, vec3.fromValues(1, 1, 1), transform.origin);\n\n        // apply skew2D\n        if (transform.localSkew[0] !== 0 || transform.localSkew[1] !== 0) {\n          mat4.identity($mat4);\n          $mat4[4] = Math.tan(transform.localSkew[0]);\n          $mat4[1] = Math.tan(transform.localSkew[1]);\n          mat4.multiply(transform.localTransform, transform.localTransform, $mat4);\n        }\n        var scaling = mat4.fromRotationTranslationScaleOrigin($mat4, quat$1.set($quat$1, 0, 0, 0, 1), vec3.set($vec3$1, 1, 1, 1), transform.localScale, transform.origin);\n        mat4.multiply(transform.localTransform, transform.localTransform, scaling);\n      } else {\n        var localTransform = transform.localTransform,\n          localPosition = transform.localPosition,\n          localRotation = transform.localRotation,\n          localScale = transform.localScale,\n          origin = transform.origin;\n        var hasPosition = localPosition[0] !== 0 || localPosition[1] !== 0 || localPosition[2] !== 0;\n        var hasRotation = localRotation[3] !== 1 || localRotation[0] !== 0 || localRotation[1] !== 0 || localRotation[2] !== 0;\n        var hasScale = localScale[0] !== 1 || localScale[1] !== 1 || localScale[2] !== 1;\n        var hasOrigin = origin[0] !== 0 || origin[1] !== 0 || origin[2] !== 0;\n        if (!hasRotation && !hasScale && !hasOrigin) {\n          if (hasPosition) {\n            mat4.fromTranslation(localTransform, localPosition);\n          } else {\n            mat4.identity(localTransform);\n          }\n        } else {\n          // @see https://github.com/mattdesl/css-mat4/blob/master/index.js\n          mat4.fromRotationTranslationScaleOrigin(localTransform, localRotation, localPosition, localScale, origin);\n        }\n      }\n    }\n  }, {\n    key: \"getLocalTransform\",\n    value: function getLocalTransform(element) {\n      var transform = element.transformable;\n      if (transform.localDirtyFlag) {\n        this.calcLocalTransform(transform);\n        transform.localDirtyFlag = false;\n      }\n      return transform.localTransform;\n    }\n  }, {\n    key: \"setLocalTransform\",\n    value: function setLocalTransform(element, transform) {\n      var t = mat4.getTranslation($setLocalTransform_1, transform);\n      var r = mat4.getRotation($setLocalTransform_2, transform);\n      var s = mat4.getScaling($setLocalTransform_3, transform);\n      this.setLocalScale(element, s, false);\n      this.setLocalPosition(element, t, false);\n      this.setLocalRotation(element, r, undefined, undefined, undefined, false);\n      this.dirtifyLocal(element, element.transformable);\n    }\n  }, {\n    key: \"resetLocalTransform\",\n    value: function resetLocalTransform(element) {\n      this.setLocalScale(element, $vec3One, false);\n      this.setLocalPosition(element, $vec3Zero, false);\n      this.setLocalEulerAngles(element, $vec3Zero, undefined, undefined, false);\n      this.setLocalSkew(element, $vec2Zero, undefined, false);\n      this.dirtifyLocal(element, element.transformable);\n    }\n  }, {\n    key: \"getTransformedGeometryBounds\",\n    value: function getTransformedGeometryBounds(element) {\n      var render = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var existedAABB = arguments.length > 2 ? arguments[2] : undefined;\n      var bounds = this.getGeometryBounds(element, render);\n      if (!AABB.isEmpty(bounds)) {\n        var aabb = existedAABB || new AABB();\n        aabb.setFromTransformedAABB(bounds, this.getWorldTransform(element));\n        return aabb;\n      }\n      return null;\n    }\n\n    /**\n     * won't account for children\n     */\n  }, {\n    key: \"getGeometryBounds\",\n    value: function getGeometryBounds(element) {\n      var render = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var _ref3 = element,\n        geometry = _ref3.geometry;\n      if (geometry.dirty) {\n        runtime.styleValueRegistry.updateGeometry(element);\n      }\n      var bounds = render ? geometry.renderBounds : geometry.contentBounds || null;\n      // return (bounds && new AABB(bounds.center, bounds.halfExtents)) || new AABB();\n      return bounds || new AABB();\n    }\n\n    /**\n     * account for children in world space\n     */\n  }, {\n    key: \"getBounds\",\n    value: function getBounds(element) {\n      var _this3 = this;\n      var render = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var _ref4 = element,\n        renderable = _ref4.renderable;\n      if (!renderable.boundsDirty && !render && renderable.bounds) {\n        return renderable.bounds;\n      }\n      if (!renderable.renderBoundsDirty && render && renderable.renderBounds) {\n        return renderable.renderBounds;\n      }\n\n      // reuse existed if possible\n      var existedAABB = render ? renderable.renderBounds : renderable.bounds;\n\n      // reset with geometry's aabb\n      var aabb = this.getTransformedGeometryBounds(element, render, existedAABB);\n\n      // merge children's aabbs\n      var children = element.childNodes;\n      children.forEach(function (child) {\n        var childBounds = _this3.getBounds(child, render);\n        if (childBounds) {\n          if (!aabb) {\n            aabb = existedAABB || new AABB();\n            aabb.update(childBounds.center, childBounds.halfExtents);\n          } else {\n            aabb.add(childBounds);\n          }\n        }\n      });\n      if (!aabb) {\n        aabb = new AABB();\n      }\n      if (render) {\n        // FIXME: account for clip path\n        var clipped = findClosestClipPathTarget(element);\n        if (clipped) {\n          // use bounds under world space\n          var clipPathBounds = clipped.parsedStyle.clipPath.getBounds(render);\n          if (!aabb) {\n            aabb.update(clipPathBounds.center, clipPathBounds.halfExtents);\n          } else if (clipPathBounds) {\n            aabb = clipPathBounds.intersection(aabb);\n          }\n        }\n      }\n      if (render) {\n        renderable.renderBounds = aabb;\n        renderable.renderBoundsDirty = false;\n      } else {\n        renderable.bounds = aabb;\n        renderable.boundsDirty = false;\n      }\n      return aabb;\n    }\n\n    /**\n     * account for children in local space\n     */\n  }, {\n    key: \"getLocalBounds\",\n    value: function getLocalBounds(element) {\n      if (element.parentNode) {\n        var parentInvert = $mat4Identity;\n        if (element.parentNode.transformable) {\n          parentInvert = mat4.invert($mat4, this.getWorldTransform(element.parentNode));\n        }\n        var bounds = this.getBounds(element);\n        if (!AABB.isEmpty(bounds)) {\n          var localBounds = new AABB();\n          localBounds.setFromTransformedAABB(bounds, parentInvert);\n          return localBounds;\n        }\n      }\n      return this.getBounds(element);\n    }\n  }, {\n    key: \"getBoundingClientRect\",\n    value: function getBoundingClientRect(element) {\n      var _element$ownerDocumen;\n      var aabb;\n      var bounds = this.getGeometryBounds(element);\n      if (!AABB.isEmpty(bounds)) {\n        aabb = new AABB();\n        // apply transformation to aabb\n        aabb.setFromTransformedAABB(bounds, this.getWorldTransform(element));\n      }\n\n      // calc context's offset\n      var bbox = (_element$ownerDocumen = element.ownerDocument) === null || _element$ownerDocumen === void 0 || (_element$ownerDocumen = _element$ownerDocumen.defaultView) === null || _element$ownerDocumen === void 0 ? void 0 : _element$ownerDocumen.getContextService().getBoundingClientRect();\n      if (aabb) {\n        var _aabb$getMin = aabb.getMin(),\n          _aabb$getMin2 = _slicedToArray(_aabb$getMin, 2),\n          left = _aabb$getMin2[0],\n          top = _aabb$getMin2[1];\n        var _aabb$getMax = aabb.getMax(),\n          _aabb$getMax2 = _slicedToArray(_aabb$getMax, 2),\n          right = _aabb$getMax2[0],\n          bottom = _aabb$getMax2[1];\n        return new Rectangle(left + ((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0), top + ((bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0), right - left, bottom - top);\n      }\n      return new Rectangle((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0, (bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0, 0, 0);\n    }\n  }, {\n    key: \"dirtifyWorldInternal\",\n    value: function dirtifyWorldInternal(element, transform) {\n      var _this4 = this;\n      if (!transform.dirtyFlag) {\n        transform.dirtyFlag = true;\n        transform.frozen = false;\n        element.childNodes.forEach(function (child) {\n          var childTransform = child.transformable;\n          if (!childTransform.dirtyFlag) {\n            _this4.dirtifyWorldInternal(child, childTransform);\n          }\n        });\n        var _ref5 = element,\n          renderable = _ref5.renderable;\n        if (renderable) {\n          renderable.renderBoundsDirty = true;\n          renderable.boundsDirty = true;\n          renderable.dirty = true;\n        }\n      }\n    }\n  }, {\n    key: \"syncHierarchy\",\n    value: function syncHierarchy(element) {\n      var transform = element.transformable;\n      if (transform.frozen) {\n        return;\n      }\n      transform.frozen = true;\n      if (transform.localDirtyFlag || transform.dirtyFlag) {\n        this.sync(element, transform);\n      }\n      var children = element.childNodes;\n      for (var i = 0; i < children.length; i++) {\n        this.syncHierarchy(children[i]);\n      }\n    }\n  }, {\n    key: \"sync\",\n    value: function sync(element, transform) {\n      if (transform.localDirtyFlag) {\n        this.calcLocalTransform(transform);\n        transform.localDirtyFlag = false;\n      }\n      if (transform.dirtyFlag) {\n        var parent = element.parentNode;\n        var parentTransform = parent && parent.transformable;\n        if (parent === null || !parentTransform) {\n          mat4.copy(transform.worldTransform, transform.localTransform);\n        } else {\n          // TODO: should we support scale compensation?\n          // @see https://github.com/playcanvas/engine/issues/1077#issuecomment-359765557\n          mat4.multiply(transform.worldTransform, parentTransform.worldTransform, transform.localTransform);\n        }\n        transform.dirtyFlag = false;\n      }\n    }\n  }, {\n    key: \"unfreezeParentToRoot\",\n    value: function unfreezeParentToRoot(child) {\n      var p = child.parentNode;\n      while (p) {\n        var transform = p.transformable;\n        if (transform) {\n          transform.frozen = false;\n        }\n        p = p.parentNode;\n      }\n    }\n  }]);\n}();\n\nvar TEXT_METRICS = {\n  MetricsString: '|q',\n  BaselineSymbol: 'M',\n  BaselineMultiplier: 1.4,\n  HeightMultiplier: 2,\n  Newlines: [0x000a,\n  // line feed\n  0x000d // carriage return\n  ],\n  BreakingSpaces: [0x0009,\n  // character tabulation\n  0x0020,\n  // space\n  0x2000,\n  // en quad\n  0x2001,\n  // em quad\n  0x2002,\n  // en space\n  0x2003,\n  // em space\n  0x2004,\n  // three-per-em space\n  0x2005,\n  // four-per-em space\n  0x2006,\n  // six-per-em space\n  0x2008,\n  // punctuation space\n  0x2009,\n  // thin space\n  0x200a,\n  // hair space\n  0x205f,\n  // medium mathematical space\n  0x3000 // ideographic space\n  ]\n};\nvar LATIN_REGEX = /[a-zA-Z0-9\\u00C0-\\u00D6\\u00D8-\\u00f6\\u00f8-\\u00ff!\"#$%&'()*+,-./:;]/;\n\n// Line breaking rules in CJK (Kinsoku Shori)\n// Refer from https://en.wikipedia.org/wiki/Line_breaking_rules_in_East_Asian_languages\nvar regexCannotStartZhCn = /[!%),.:;?\\]}'\"\"]/;\nvar regexCannotEndZhCn = /[$('\"]/;\nvar regexCannotStartZhTw = /[!),.:;?\\]}'\"\"]/;\nvar regexCannotEndZhTw = /[([{'\"]/;\nvar regexCannotStartJaJp = /[)\\]'\"?!:;,.]/;\nvar regexCannotEndJaJp = /[(['\"...]/;\nvar regexCannotStartKoKr = /[!%),.:;?\\]}'\"]/;\nvar regexCannotEndKoKr = /[$([{'\"#]/;\nvar regexCannotStart = new RegExp(\"\".concat(regexCannotStartZhCn.source, \"|\").concat(regexCannotStartZhTw.source, \"|\").concat(regexCannotStartJaJp.source, \"|\").concat(regexCannotStartKoKr.source));\nvar regexCannotEnd = new RegExp(\"\".concat(regexCannotEndZhCn.source, \"|\").concat(regexCannotEndZhTw.source, \"|\").concat(regexCannotEndJaJp.source, \"|\").concat(regexCannotEndKoKr.source));\n\n/**\n * Borrow from pixi/packages/text/src/TextMetrics.ts\n */\nvar TextService = /*#__PURE__*/function () {\n  function TextService(runtime) {\n    var _this = this;\n    _classCallCheck(this, TextService);\n    /**\n     * font metrics cache\n     */\n    this.fontMetricsCache = {};\n    this.shouldBreakByKinsokuShorui = function (_char, nextChar) {\n      if (_this.isBreakingSpace(nextChar)) return false;\n      if (_char) {\n        // Line breaking rules in CJK (Kinsoku Shori)\n        if (regexCannotEnd.exec(nextChar) || regexCannotStart.exec(_char)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    this.trimByKinsokuShorui = function (prev) {\n      var next = _toConsumableArray(prev);\n      var prevLine = next[next.length - 2];\n      if (!prevLine) {\n        return prev;\n      }\n      var lastChar = prevLine[prevLine.length - 1];\n      next[next.length - 2] = prevLine.slice(0, -1);\n      next[next.length - 1] = lastChar + next[next.length - 1];\n      return next;\n    };\n    this.runtime = runtime;\n  }\n  return _createClass(TextService, [{\n    key: \"measureFont\",\n    value:\n    /**\n     * Calculates the ascent, descent and fontSize of a given font-style.\n     */\n    function measureFont(font, offscreenCanvas) {\n      // as this method is used for preparing assets, don't recalculate things if we don't need to\n      if (this.fontMetricsCache[font]) {\n        return this.fontMetricsCache[font];\n      }\n      var properties = {\n        ascent: 0,\n        descent: 0,\n        fontSize: 0\n      };\n      var canvas = this.runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n      var context = this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas, {\n        willReadFrequently: true\n      });\n      context.font = font;\n      var metricsString = TEXT_METRICS.MetricsString + TEXT_METRICS.BaselineSymbol;\n      var width = Math.ceil(context.measureText(metricsString).width);\n      var baseline = Math.ceil(context.measureText(TEXT_METRICS.BaselineSymbol).width);\n      var height = TEXT_METRICS.HeightMultiplier * baseline;\n      baseline = baseline * TEXT_METRICS.BaselineMultiplier | 0;\n      // @ts-ignore\n      canvas.width = width;\n      // @ts-ignore\n      canvas.height = height;\n      context.fillStyle = '#f00';\n      context.fillRect(0, 0, width, height);\n      context.font = font;\n      context.textBaseline = 'alphabetic';\n      context.fillStyle = '#000';\n      context.fillText(metricsString, 0, baseline);\n      var imagedata = context.getImageData(0, 0, width || 1, height || 1).data;\n      var pixels = imagedata.length;\n      var line = width * 4;\n      var i = 0;\n      var idx = 0;\n      var stop = false;\n      // ascent. scan from top to bottom until we find a non red pixel\n      for (i = 0; i < baseline; ++i) {\n        for (var j = 0; j < line; j += 4) {\n          if (imagedata[idx + j] !== 255) {\n            stop = true;\n            break;\n          }\n        }\n        if (!stop) {\n          idx += line;\n        } else {\n          break;\n        }\n      }\n      properties.ascent = baseline - i;\n      idx = pixels - line;\n      stop = false;\n      // descent. scan from bottom to top until we find a non red pixel\n      for (i = height; i > baseline; --i) {\n        for (var _j = 0; _j < line; _j += 4) {\n          if (imagedata[idx + _j] !== 255) {\n            stop = true;\n            break;\n          }\n        }\n        if (!stop) {\n          idx -= line;\n        } else {\n          break;\n        }\n      }\n      properties.descent = i - baseline;\n      properties.fontSize = properties.ascent + properties.descent;\n      this.fontMetricsCache[font] = properties;\n      return properties;\n    }\n  }, {\n    key: \"measureText\",\n    value: function measureText(text, parsedStyle, offscreenCanvas) {\n      var _parsedStyle$fontSize = parsedStyle.fontSize,\n        fontSize = _parsedStyle$fontSize === void 0 ? 16 : _parsedStyle$fontSize,\n        _parsedStyle$wordWrap = parsedStyle.wordWrap,\n        wordWrap = _parsedStyle$wordWrap === void 0 ? false : _parsedStyle$wordWrap,\n        strokeHeight = parsedStyle.lineHeight,\n        _parsedStyle$lineWidt = parsedStyle.lineWidth,\n        lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n        _parsedStyle$textBase = parsedStyle.textBaseline,\n        textBaseline = _parsedStyle$textBase === void 0 ? 'alphabetic' : _parsedStyle$textBase,\n        _parsedStyle$textAlig = parsedStyle.textAlign,\n        textAlign = _parsedStyle$textAlig === void 0 ? 'start' : _parsedStyle$textAlig,\n        _parsedStyle$letterSp = parsedStyle.letterSpacing,\n        letterSpacing = _parsedStyle$letterSp === void 0 ? 0 : _parsedStyle$letterSp,\n        textPath = parsedStyle.textPath;\n        parsedStyle.textPathSide;\n        parsedStyle.textPathStartOffset;\n        var _parsedStyle$leading = parsedStyle.leading,\n        leading = _parsedStyle$leading === void 0 ? 0 : _parsedStyle$leading;\n      var font = toFontString(parsedStyle);\n      var fontProperties = this.measureFont(font, offscreenCanvas);\n      // fallback in case UA disallow canvas data extraction\n      if (fontProperties.fontSize === 0) {\n        fontProperties.fontSize = fontSize;\n        fontProperties.ascent = fontSize;\n      }\n      var context = this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n      context.font = font;\n\n      // no overflowing by default\n      parsedStyle.isOverflowing = false;\n      var outputText = wordWrap ? this.wordWrap(text, parsedStyle, offscreenCanvas) : text;\n      var lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n      var lineWidths = new Array(lines.length);\n      var maxLineWidth = 0;\n\n      // account for textPath\n      if (textPath) {\n        textPath.getTotalLength();\n\n        // const startingPoint = textPath.getPoint(0);\n\n        for (var i = 0; i < lines.length; i++) {\n          context.measureText(lines[i]).width + (lines[i].length - 1) * letterSpacing;\n          // for (\n          //   let i = reverse ? lines[0].length - 1 : 0;\n          //   reverse ? i >= 0 : i < lines[0].length;\n          //   reverse ? i-- : i++\n          // ) {\n          //   graphemeInfo = lineBounds[i];\n          //   if (positionInPath > totalPathLength) {\n          //     positionInPath %= totalPathLength;\n          //   } else if (positionInPath < 0) {\n          //     positionInPath += totalPathLength;\n          //   }\n          //   // it would probably much faster to send all the grapheme position for a line\n          //   // and calculate path position/angle at once.\n          //   this.setGraphemeOnPath(\n          //     positionInPath,\n          //     graphemeInfo,\n          //     startingPoint\n          //   );\n          //   positionInPath += graphemeInfo.kernedWidth;\n          // }\n        }\n      } else {\n        for (var _i = 0; _i < lines.length; _i++) {\n          // char width + letterSpacing\n          var _lineWidth = context.measureText(lines[_i]).width + (lines[_i].length - 1) * letterSpacing;\n          lineWidths[_i] = _lineWidth;\n          maxLineWidth = Math.max(maxLineWidth, _lineWidth);\n        }\n        var _width = maxLineWidth + lineWidth;\n\n        // if (dropShadow) {\n        //   width += dropShadowDistance;\n        // }\n        var lineHeight = strokeHeight || fontProperties.fontSize + lineWidth;\n        var height = Math.max(lineHeight, fontProperties.fontSize + lineWidth) + (lines.length - 1) * (lineHeight + leading);\n        // if (dropShadow) {\n        //   height += dropShadowDistance;\n        // }\n        lineHeight += leading;\n\n        // handle vertical text baseline\n        var offsetY = 0;\n        if (textBaseline === 'middle') {\n          offsetY = -height / 2;\n        } else if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n          offsetY = -height;\n        } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n          offsetY = 0;\n        }\n        return {\n          font: font,\n          width: _width,\n          height: height,\n          lines: lines,\n          lineWidths: lineWidths,\n          lineHeight: lineHeight,\n          maxLineWidth: maxLineWidth,\n          fontProperties: fontProperties,\n          lineMetrics: lineWidths.map(function (width, i) {\n            var offsetX = 0;\n            // handle horizontal text align\n            if (textAlign === 'center' || textAlign === 'middle') {\n              offsetX -= width / 2;\n            } else if (textAlign === 'right' || textAlign === 'end') {\n              offsetX -= width;\n            }\n            return new Rectangle(offsetX - lineWidth / 2, offsetY + i * lineHeight, width + lineWidth, lineHeight);\n          })\n        };\n      }\n    }\n  }, {\n    key: \"wordWrap\",\n    value: function wordWrap(text, parsedStyle, offscreenCanvas) {\n      var _this2 = this;\n      var self = this;\n      var _parsedStyle$wordWrap2 = parsedStyle.wordWrapWidth,\n        wordWrapWidth = _parsedStyle$wordWrap2 === void 0 ? 0 : _parsedStyle$wordWrap2,\n        _parsedStyle$letterSp2 = parsedStyle.letterSpacing,\n        letterSpacing = _parsedStyle$letterSp2 === void 0 ? 0 : _parsedStyle$letterSp2,\n        _parsedStyle$maxLines = parsedStyle.maxLines,\n        maxLines = _parsedStyle$maxLines === void 0 ? Infinity : _parsedStyle$maxLines,\n        textOverflow = parsedStyle.textOverflow;\n      var context = this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n      var maxWidth = wordWrapWidth + letterSpacing;\n      var ellipsis = '';\n      if (textOverflow === 'ellipsis') {\n        ellipsis = '...';\n      } else if (textOverflow && textOverflow !== 'clip') {\n        ellipsis = textOverflow;\n      }\n      var chars = Array.from(text);\n      var lines = [];\n      var currentLineIndex = 0;\n      var currentLineWidth = 0;\n      var prevLineLastCharIndex = 0;\n      var cache = {};\n      var calcWidth = function calcWidth(txt) {\n        return _this2.getFromCache(txt, letterSpacing, cache, context);\n      };\n      var ellipsisWidth = calcWidth(ellipsis);\n\n      /**\n       * Find text fragments that will take up as much of the given line width as possible when rendered.\n       *\n       * @see https://github.com/antvis/G/issues/1833\n       *\n       * @param lineTxt - Current line of text\n       * @param txtLastCharIndex - The index of the last character of the current line in the entire text\n       * @param txtStartCharIndex - The index of the start character of the current line in the entire text\n       */\n      function findCharIndexClosestWidthThreshold(lineTxt, txtLastCharIndex, txtStartCharIndex, widthThreshold) {\n        while (calcWidth(lineTxt) < widthThreshold && txtLastCharIndex < chars.length - 1) {\n          if (self.isNewline(chars[txtLastCharIndex + 1])) {\n            break;\n          }\n          txtLastCharIndex += 1;\n          lineTxt += chars[txtLastCharIndex];\n        }\n        while (calcWidth(lineTxt) > widthThreshold && txtLastCharIndex > txtStartCharIndex) {\n          txtLastCharIndex -= 1;\n          lineTxt = lineTxt.slice(0, -1);\n        }\n        return {\n          lineTxt: lineTxt,\n          txtLastCharIndex: txtLastCharIndex\n        };\n      }\n      function appendEllipsis(lineIndex, textCharIndex) {\n        // If there is not enough space to display the string itself, it is clipped.\n        // @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow#values\n        if (ellipsisWidth <= 0 || ellipsisWidth > maxWidth) {\n          return;\n        }\n        if (!lines[lineIndex]) {\n          lines[lineIndex] = ellipsis;\n          return;\n        }\n        var result = findCharIndexClosestWidthThreshold(lines[lineIndex], textCharIndex, prevLineLastCharIndex + 1, maxWidth - ellipsisWidth);\n        lines[lineIndex] = result.lineTxt + ellipsis;\n      }\n      for (var i = 0; i < chars.length; i++) {\n        var _char2 = chars[i];\n        var prevChar = chars[i - 1];\n        var nextChar = chars[i + 1];\n        var charWidth = calcWidth(_char2);\n        if (this.isNewline(_char2)) {\n          // exceed maxLines, break immediately\n          if (currentLineIndex + 1 >= maxLines) {\n            parsedStyle.isOverflowing = true;\n            if (i < chars.length - 1) {\n              appendEllipsis(currentLineIndex, i - 1);\n            }\n            break;\n          }\n          prevLineLastCharIndex = i - 1;\n          currentLineIndex += 1;\n          currentLineWidth = 0;\n          lines[currentLineIndex] = '';\n          continue;\n        }\n        if (currentLineWidth > 0 && currentLineWidth + charWidth > maxWidth) {\n          var result = findCharIndexClosestWidthThreshold(lines[currentLineIndex], i - 1, prevLineLastCharIndex + 1, maxWidth);\n          if (result.txtLastCharIndex !== i - 1) {\n            lines[currentLineIndex] = result.lineTxt;\n            if (result.txtLastCharIndex === chars.length - 1) {\n              break;\n            }\n            i = result.txtLastCharIndex + 1;\n            _char2 = chars[i];\n            prevChar = chars[i - 1];\n            nextChar = chars[i + 1];\n            charWidth = calcWidth(_char2);\n          }\n          if (currentLineIndex + 1 >= maxLines) {\n            parsedStyle.isOverflowing = true;\n            appendEllipsis(currentLineIndex, i - 1);\n            break;\n          }\n          prevLineLastCharIndex = i - 1;\n          currentLineIndex += 1;\n          currentLineWidth = 0;\n          lines[currentLineIndex] = '';\n          if (this.isBreakingSpace(_char2)) {\n            continue;\n          }\n          if (!this.canBreakInLastChar(_char2)) {\n            lines = this.trimToBreakable(lines);\n            currentLineWidth = this.sumTextWidthByCache(lines[currentLineIndex] || '', calcWidth);\n          }\n          if (this.shouldBreakByKinsokuShorui(_char2, nextChar)) {\n            lines = this.trimByKinsokuShorui(lines);\n            currentLineWidth += calcWidth(prevChar || '');\n          }\n        }\n        currentLineWidth += charWidth;\n        lines[currentLineIndex] = (lines[currentLineIndex] || '') + _char2;\n      }\n      return lines.join('\\n');\n    }\n  }, {\n    key: \"isBreakingSpace\",\n    value: function isBreakingSpace(_char3) {\n      if (typeof _char3 !== 'string') {\n        return false;\n      }\n      return TEXT_METRICS.BreakingSpaces.indexOf(_char3.charCodeAt(0)) >= 0;\n    }\n  }, {\n    key: \"isNewline\",\n    value: function isNewline(_char4) {\n      if (typeof _char4 !== 'string') {\n        return false;\n      }\n      return TEXT_METRICS.Newlines.indexOf(_char4.charCodeAt(0)) >= 0;\n    }\n  }, {\n    key: \"trimToBreakable\",\n    value: function trimToBreakable(prev) {\n      var next = _toConsumableArray(prev);\n      var prevLine = next[next.length - 2];\n      var index = this.findBreakableIndex(prevLine);\n      if (index === -1 || !prevLine) return next;\n      var trimmedChar = prevLine.slice(index, index + 1);\n      var isTrimmedWithSpace = this.isBreakingSpace(trimmedChar);\n      var trimFrom = index + 1;\n      var trimTo = index + (isTrimmedWithSpace ? 0 : 1);\n      next[next.length - 1] += prevLine.slice(trimFrom, prevLine.length);\n      next[next.length - 2] = prevLine.slice(0, trimTo);\n      return next;\n    }\n  }, {\n    key: \"canBreakInLastChar\",\n    value: function canBreakInLastChar(_char5) {\n      if (_char5 && LATIN_REGEX.test(_char5)) return false;\n      return true;\n    }\n  }, {\n    key: \"sumTextWidthByCache\",\n    value: function sumTextWidthByCache(text, calcWidthWithCache) {\n      return text.split('').reduce(function (sum, c) {\n        return sum + calcWidthWithCache(c);\n      }, 0);\n    }\n  }, {\n    key: \"findBreakableIndex\",\n    value: function findBreakableIndex(line) {\n      for (var i = line.length - 1; i >= 0; i--) {\n        if (!LATIN_REGEX.test(line[i])) return i;\n      }\n      return -1;\n    }\n  }, {\n    key: \"getFromCache\",\n    value: function getFromCache(key, letterSpacing, cache, context) {\n      var width = cache[key];\n      if (typeof width !== 'number') {\n        var spacing = key.length * letterSpacing;\n        var metrics = context.measureText(key);\n        width = metrics.width + spacing;\n        cache[key] = width;\n      }\n      return width;\n    }\n  }]);\n}();\n\nvar runtime = {};\n/**\n * Replace with IoC container\n */\nvar geometryUpdaterFactory = function (_ref) {\n  var rectUpdater = new RectUpdater();\n  var polylineUpdater = new PolylineUpdater();\n  return _ref = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref, Shape.FRAGMENT, null), Shape.CIRCLE, new CircleUpdater()), Shape.ELLIPSE, new EllipseUpdater()), Shape.RECT, rectUpdater), Shape.IMAGE, rectUpdater), Shape.GROUP, new GroupUpdater()), Shape.LINE, new LineUpdater()), Shape.TEXT, new TextUpdater(runtime)), Shape.POLYLINE, polylineUpdater), Shape.POLYGON, polylineUpdater), _defineProperty(_defineProperty(_defineProperty(_ref, Shape.PATH, new PathUpdater()), Shape.HTML, new HTMLUpdater()), Shape.MESH, null);\n}();\nvar CSSPropertySyntaxFactory = function (_ref2) {\n  var color = new CSSPropertyColor();\n  var length = new CSSPropertyLengthOrPercentage();\n  return _ref2 = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref2, PropertySyntax.PERCENTAGE, null), PropertySyntax.NUMBER, new CSSPropertyNumber()), PropertySyntax.ANGLE, new CSSPropertyAngle()), PropertySyntax.DEFINED_PATH, new CSSPropertyClipPath()), PropertySyntax.PAINT, color), PropertySyntax.COLOR, color), PropertySyntax.FILTER, new CSSPropertyFilter()), PropertySyntax.LENGTH, length), PropertySyntax.LENGTH_PERCENTAGE, length), PropertySyntax.LENGTH_PERCENTAGE_12, new CSSPropertyLengthOrPercentage12()), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref2, PropertySyntax.LENGTH_PERCENTAGE_14, new CSSPropertyLengthOrPercentage14()), PropertySyntax.COORDINATE, new CSSPropertyLengthOrPercentage()), PropertySyntax.OFFSET_DISTANCE, new CSSPropertyOffsetDistance()), PropertySyntax.OPACITY_VALUE, new CSSPropertyOpacity()), PropertySyntax.PATH, new CSSPropertyPath()), PropertySyntax.LIST_OF_POINTS, new CSSPropertyPoints()), PropertySyntax.SHADOW_BLUR, new CSSPropertyShadowBlur()), PropertySyntax.TEXT, new CSSPropertyText()), PropertySyntax.TEXT_TRANSFORM, new CSSPropertyTextTransform()), PropertySyntax.TRANSFORM, new CSSPropertyTransform()), _defineProperty(_defineProperty(_defineProperty(_ref2, PropertySyntax.TRANSFORM_ORIGIN, new CSSPropertyTransformOrigin()), PropertySyntax.Z_INDEX, new CSSPropertyZIndex()), PropertySyntax.MARKER, new CSSPropertyMarker());\n}();\nvar getGlobalThis = function getGlobalThis() {\n  if (typeof globalThis !== 'undefined') return globalThis;\n  if (typeof self !== 'undefined') return self;\n  if (typeof window !== 'undefined') return window;\n  // @ts-ignore\n  if (typeof global !== 'undefined') return global;\n  return {};\n  // [!] Error: The 'this' keyword is equivalent to 'undefined' at the top level of an ES module, and has been rewritten\n  // @see https://rollupjs.org/troubleshooting/#error-this-is-undefined\n  // if (typeof this !== 'undefined') return this;\n};\n\n/**\n * Camera\n * `g-camera-api` will provide an advanced implementation\n */\nruntime.CameraContribution = Camera;\n\n/**\n * `g-web-animations-api` will provide an AnimationTimeline\n */\nruntime.AnimationTimeline = null;\nruntime.EasingFunction = null;\nruntime.offscreenCanvasCreator = new OffscreenCanvasCreator();\nruntime.sceneGraphSelector = new DefaultSceneGraphSelector();\nruntime.sceneGraphService = new DefaultSceneGraphService(runtime);\nruntime.textService = new TextService(runtime);\nruntime.geometryUpdaterFactory = geometryUpdaterFactory;\nruntime.CSSPropertySyntaxFactory = CSSPropertySyntaxFactory;\nruntime.styleValueRegistry = new DefaultStyleValueRegistry(runtime);\nruntime.layoutRegistry = null;\nruntime.globalThis = getGlobalThis();\nruntime.enableStyleSyntax = true;\nruntime.enableSizeAttenuation = false;\n\nvar entityCounter = 0;\nfunction resetEntityCounter() {\n  entityCounter = 0;\n}\nvar insertedEvent = new MutationEvent(ElementEvent.INSERTED, null, '', '', '', 0, '', '');\nvar removedEvent = new MutationEvent(ElementEvent.REMOVED, null, '', '', '', 0, '', '');\nvar destroyEvent = new CustomEvent(ElementEvent.DESTROY);\n\n/**\n * Has following capabilities:\n * * Node insert/remove, eg. appendChild, removeChild, remove...\n * * Query eg. querySelector getElementById...\n * * Animation\n */\nvar Element = /*#__PURE__*/function (_Node) {\n  function Element() {\n    var _this;\n    _classCallCheck(this, Element);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Element, [].concat(args));\n    /**\n     * Unique id.\n     */\n    _this.entity = entityCounter++;\n    _this.renderable = {\n      bounds: undefined,\n      boundsDirty: true,\n      renderBounds: undefined,\n      renderBoundsDirty: true,\n      dirtyRenderBounds: undefined,\n      dirty: false\n    };\n    _this.cullable = {\n      strategy: Strategy.Standard,\n      visibilityPlaneMask: -1,\n      visible: true,\n      enable: true\n    };\n    _this.transformable = {\n      dirtyFlag: false,\n      localDirtyFlag: false,\n      frozen: false,\n      localPosition: [0, 0, 0],\n      localRotation: [0, 0, 0, 1],\n      localScale: [1, 1, 1],\n      localTransform: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n      localSkew: [0, 0],\n      position: [0, 0, 0],\n      rotation: [0, 0, 0, 1],\n      scaling: [1, 1, 1],\n      worldTransform: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n      origin: [0, 0, 0]\n    };\n    _this.sortable = {\n      dirty: false,\n      sorted: undefined,\n      renderOrder: 0,\n      dirtyChildren: [],\n      dirtyReason: undefined\n    };\n    _this.geometry = {\n      contentBounds: undefined,\n      renderBounds: undefined,\n      dirty: true\n    };\n    _this.rBushNode = {\n      aabb: undefined\n    };\n    /**\n     * https://developer.mozilla.org/zh-CN/docs/Web/API/Element/namespaceURI\n     */\n    _this.namespaceURI = 'g';\n    _this.scrollLeft = 0;\n    _this.scrollTop = 0;\n    /**\n     * We don't support border now\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/clientTop\n     */\n    _this.clientTop = 0;\n    _this.clientLeft = 0;\n    /**\n     * is destroyed or not\n     */\n    _this.destroyed = false;\n    /**\n     * compatible with `style`\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style\n     */\n    _this.style = {};\n    _this.computedStyle = {};\n    /**\n     * Renderers will use these used values.\n     */\n    _this.parsedStyle = {\n      // opacity: '',\n      // fillOpacity: '',\n      // strokeOpacity: '',\n      // transformOrigin: '',\n      // visibility: '',\n      // pointerEvents: '',\n      // lineWidth: '',\n      // lineCap: '',\n      // lineJoin: '',\n      // increasedLineWidthForHitTesting: '',\n      // fontSize: '',\n      // fontFamily: '',\n      // fontStyle: '',\n      // fontWeight: '',\n      // fontVariant: '',\n      // textAlign: '',\n      // textBaseline: '',\n      // textTransform: '',\n    };\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes\n     */\n    _this.attributes = {};\n    return _this;\n  }\n  _inherits(Element, _Node);\n  return _createClass(Element, [{\n    key: \"className\",\n    get:\n    /**\n     * used with `getElementById()`\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/id\n     */\n\n    /**\n     * used in `getElementsByClassName`\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n     */\n    function get() {\n      // @ts-ignore\n      return this.getAttribute('class') || '';\n    },\n    set: function set(className) {\n      this.setAttribute('class', className);\n    }\n\n    /**\n     * used in `getElementsByName`\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName\n     */\n  }, {\n    key: \"classList\",\n    get:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/classList\n     */\n    function get() {\n      return this.className.split(' ').filter(function (c) {\n        return c !== '';\n      });\n    }\n  }, {\n    key: \"tagName\",\n    get: function get() {\n      return this.nodeName;\n    }\n  }, {\n    key: \"children\",\n    get: function get() {\n      return this.childNodes;\n    }\n  }, {\n    key: \"childElementCount\",\n    get: function get() {\n      return this.childNodes.length;\n    }\n  }, {\n    key: \"firstElementChild\",\n    get: function get() {\n      return this.firstChild;\n    }\n  }, {\n    key: \"lastElementChild\",\n    get: function get() {\n      return this.lastChild;\n    }\n  }, {\n    key: \"parentElement\",\n    get: function get() {\n      return this.parentNode;\n    }\n  }, {\n    key: \"nextSibling\",\n    get: function get() {\n      if (this.parentNode) {\n        var index = this.parentNode.childNodes.indexOf(this);\n        return this.parentNode.childNodes[index + 1] || null;\n      }\n      return null;\n    }\n  }, {\n    key: \"previousSibling\",\n    get: function get() {\n      if (this.parentNode) {\n        var index = this.parentNode.childNodes.indexOf(this);\n        return this.parentNode.childNodes[index - 1] || null;\n      }\n      return null;\n    }\n  }, {\n    key: \"cloneNode\",\n    value: function cloneNode(deep) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"appendChild\",\n    value: function appendChild(child, index) {\n      var _this$ownerDocument;\n      if (child.destroyed) {\n        throw new Error(ERROR_MSG_APPEND_DESTROYED_ELEMENT);\n      }\n      runtime.sceneGraphService.attach(child, this, index);\n      if ((_this$ownerDocument = this.ownerDocument) !== null && _this$ownerDocument !== void 0 && _this$ownerDocument.defaultView) {\n        if (!isInFragment(this) && child.nodeName === Shape.FRAGMENT) {\n          this.ownerDocument.defaultView.mountFragment(child);\n        } else {\n          this.ownerDocument.defaultView.mountChildren(child);\n        }\n      }\n\n      // @ts-ignore\n      if (this.isMutationObserved) {\n        insertedEvent.relatedNode = this;\n        child.dispatchEvent(insertedEvent);\n      }\n      return child;\n    }\n  }, {\n    key: \"insertBefore\",\n    value: function insertBefore(newChild, refChild) {\n      if (!refChild) {\n        this.appendChild(newChild);\n      } else {\n        if (newChild.parentElement) {\n          newChild.parentElement.removeChild(newChild);\n        }\n        var index = this.childNodes.indexOf(refChild);\n        if (index === -1) {\n          this.appendChild(newChild);\n        } else {\n          this.appendChild(newChild, index);\n        }\n      }\n      return newChild;\n    }\n  }, {\n    key: \"replaceChild\",\n    value: function replaceChild(newChild, oldChild) {\n      var index = this.childNodes.indexOf(oldChild);\n      this.removeChild(oldChild);\n      this.appendChild(newChild, index);\n      return oldChild;\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(child) {\n      var _child$ownerDocument;\n      // should emit on itself before detach\n      removedEvent.relatedNode = this;\n      child.dispatchEvent(removedEvent);\n      if ((_child$ownerDocument = child.ownerDocument) !== null && _child$ownerDocument !== void 0 && _child$ownerDocument.defaultView) {\n        child.ownerDocument.defaultView.unmountChildren(child);\n      }\n\n      // remove from scene graph\n      runtime.sceneGraphService.detach(child);\n      return child;\n    }\n\n    /**\n     * Remove all children which can be appended to its original parent later again.\n     */\n  }, {\n    key: \"removeChildren\",\n    value: function removeChildren() {\n      for (var i = this.childNodes.length - 1; i >= 0; i--) {\n        var child = this.childNodes[i];\n        this.removeChild(child);\n      }\n    }\n\n    /**\n     * Recursively destroy all children which can not be appended to its original parent later again.\n     */\n  }, {\n    key: \"destroyChildren\",\n    value: function destroyChildren() {\n      for (var i = this.childNodes.length - 1; i >= 0; i--) {\n        var child = this.childNodes[i];\n        if (child.childNodes.length > 0) {\n          child.destroyChildren();\n        }\n        child.destroy();\n      }\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/matches\n     */\n  }, {\n    key: \"matches\",\n    value: function matches(selector) {\n      return runtime.sceneGraphService.matches(selector, this);\n    }\n  }, {\n    key: \"getElementById\",\n    value: function getElementById(id) {\n      return runtime.sceneGraphService.querySelector(\"#\".concat(id), this);\n    }\n  }, {\n    key: \"getElementsByName\",\n    value: function getElementsByName(name) {\n      return runtime.sceneGraphService.querySelectorAll(\"[name=\\\"\".concat(name, \"\\\"]\"), this);\n    }\n  }, {\n    key: \"getElementsByClassName\",\n    value: function getElementsByClassName(className) {\n      return runtime.sceneGraphService.querySelectorAll(\".\".concat(className), this);\n    }\n  }, {\n    key: \"getElementsByTagName\",\n    value: function getElementsByTagName(tagName) {\n      return runtime.sceneGraphService.querySelectorAll(tagName, this);\n    }\n  }, {\n    key: \"querySelector\",\n    value: function querySelector(selectors) {\n      return runtime.sceneGraphService.querySelector(selectors, this);\n    }\n  }, {\n    key: \"querySelectorAll\",\n    value: function querySelectorAll(selectors) {\n      return runtime.sceneGraphService.querySelectorAll(selectors, this);\n    }\n\n    /**\n     * should traverses the element and its parents (heading toward the document root)\n     * until it finds a node that matches the specified CSS selector.\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/closest\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#polyfill\n     */\n  }, {\n    key: \"closest\",\n    value: function closest(selectors) {\n      var el = this;\n      do {\n        if (runtime.sceneGraphService.matches(selectors, el)) return el;\n        el = el.parentElement;\n      } while (el !== null);\n      return null;\n    }\n\n    /**\n     * search in scene group, but should not include itself\n     */\n  }, {\n    key: \"find\",\n    value: function find(filter) {\n      var _this2 = this;\n      var target = null;\n      this.forEach(function (object) {\n        if (object !== _this2 && filter(object)) {\n          target = object;\n          return false;\n        }\n        return true;\n      });\n      return target;\n    }\n  }, {\n    key: \"findAll\",\n    value: function findAll(filter) {\n      var _this3 = this;\n      var objects = [];\n      this.forEach(function (object) {\n        if (object !== _this3 && filter(object)) {\n          objects.push(object);\n        }\n      });\n      return objects;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/after\n     */\n  }, {\n    key: \"after\",\n    value: function after() {\n      var _this4 = this;\n      if (this.parentNode) {\n        var index = this.parentNode.childNodes.indexOf(this);\n        for (var _len2 = arguments.length, nodes = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          nodes[_key2] = arguments[_key2];\n        }\n        nodes.forEach(function (node, i) {\n          var _this4$parentNode;\n          return (_this4$parentNode = _this4.parentNode) === null || _this4$parentNode === void 0 ? void 0 : _this4$parentNode.appendChild(node, index + i + 1);\n        });\n      }\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/before\n     */\n  }, {\n    key: \"before\",\n    value: function before() {\n      if (this.parentNode) {\n        var _ref;\n        var index = this.parentNode.childNodes.indexOf(this);\n        for (var _len3 = arguments.length, nodes = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          nodes[_key3] = arguments[_key3];\n        }\n        var first = nodes[0],\n          rest = nodes.slice(1);\n        this.parentNode.appendChild(first, index);\n        (_ref = first).after.apply(_ref, _toConsumableArray(rest));\n      }\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/replaceWith\n     */\n  }, {\n    key: \"replaceWith\",\n    value: function replaceWith() {\n      this.after.apply(this, arguments);\n      this.remove();\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/append\n     */\n  }, {\n    key: \"append\",\n    value: function append() {\n      var _this5 = this;\n      for (var _len4 = arguments.length, nodes = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        nodes[_key4] = arguments[_key4];\n      }\n      nodes.forEach(function (node) {\n        return _this5.appendChild(node);\n      });\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/prepend\n     */\n  }, {\n    key: \"prepend\",\n    value: function prepend() {\n      var _this6 = this;\n      for (var _len5 = arguments.length, nodes = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        nodes[_key5] = arguments[_key5];\n      }\n      nodes.forEach(function (node, i) {\n        return _this6.appendChild(node, i);\n      });\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/replaceChildren\n     */\n  }, {\n    key: \"replaceChildren\",\n    value: function replaceChildren() {\n      while (this.childNodes.length && this.firstChild) {\n        this.removeChild(this.firstChild);\n      }\n      this.append.apply(this, arguments);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/remove\n     */\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      if (this.parentNode) {\n        return this.parentNode.removeChild(this);\n      }\n      return this;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // fix https://github.com/antvis/G/issues/1813\n      this.destroyChildren();\n\n      // destroy itself before remove\n      this.dispatchEvent(destroyEvent);\n\n      // remove from scenegraph first\n      this.remove();\n\n      // remove event listeners\n      this.emitter.removeAllListeners();\n      this.destroyed = true;\n    }\n  }, {\n    key: \"getGeometryBounds\",\n    value: function getGeometryBounds() {\n      return runtime.sceneGraphService.getGeometryBounds(this);\n    }\n  }, {\n    key: \"getRenderBounds\",\n    value: function getRenderBounds() {\n      return runtime.sceneGraphService.getBounds(this, true);\n    }\n\n    /**\n     * get bounds in world space, account for children\n     */\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      return runtime.sceneGraphService.getBounds(this);\n    }\n\n    /**\n     * get bounds in local space, account for children\n     */\n  }, {\n    key: \"getLocalBounds\",\n    value: function getLocalBounds() {\n      return runtime.sceneGraphService.getLocalBounds(this);\n    }\n\n    /**\n     * account for context's bounds in client space,\n     * but not accounting for children\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n     */\n  }, {\n    key: \"getBoundingClientRect\",\n    value: function getBoundingClientRect() {\n      return runtime.sceneGraphService.getBoundingClientRect(this);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getClientRects\n     */\n  }, {\n    key: \"getClientRects\",\n    value: function getClientRects() {\n      return [this.getBoundingClientRect()];\n    }\n  }, {\n    key: \"computedStyleMap\",\n    value:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/computedStyleMap\n     * eg. circle.computedStyleMap().get('fill');\n     */\n    function computedStyleMap() {\n      return new Map(Object.entries(this.computedStyle));\n    }\n  }, {\n    key: \"getAttributeNames\",\n    value:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNames\n     */\n    function getAttributeNames() {\n      return Object.keys(this.attributes);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n     */\n  }, {\n    key: \"getAttribute\",\n    value: function getAttribute(name) {\n      // @see https://github.com/antvis/G/issues/1267\n      if (typeof name === 'symbol') {\n        return undefined;\n      }\n      var value = this.attributes[name];\n      if (value === undefined) {\n        // if the given attribute does not exist, the value returned will either be null or \"\"\n        return value;\n      }\n      return value;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttribute\n     */\n  }, {\n    key: \"hasAttribute\",\n    value: function hasAttribute(qualifiedName) {\n      return this.getAttributeNames().includes(qualifiedName);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributes\n     */\n  }, {\n    key: \"hasAttributes\",\n    value: function hasAttributes() {\n      return !!this.getAttributeNames().length;\n    }\n\n    /**\n     * should use removeAttribute() instead of setting the attribute value to null either directly or using setAttribute(). Many attributes will not behave as expected if you set them to null.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n     */\n  }, {\n    key: \"removeAttribute\",\n    value: function removeAttribute(attributeName) {\n      this.setAttribute(attributeName, null);\n      delete this.attributes[attributeName];\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute\n     */\n  }, {\n    key: \"setAttribute\",\n    value: function setAttribute(attributeName, value, force, memoize) {\n      this.attributes[attributeName] = value;\n    }\n  }, {\n    key: \"getAttributeNS\",\n    value: function getAttributeNS(namespace, localName) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"getAttributeNode\",\n    value: function getAttributeNode(qualifiedName) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"getAttributeNodeNS\",\n    value: function getAttributeNodeNS(namespace, localName) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"hasAttributeNS\",\n    value: function hasAttributeNS(namespace, localName) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"removeAttributeNS\",\n    value: function removeAttributeNS(namespace, localName) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"removeAttributeNode\",\n    value: function removeAttributeNode(attr) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"setAttributeNS\",\n    value: function setAttributeNS(namespace, qualifiedName, value) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"setAttributeNode\",\n    value: function setAttributeNode(attr) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"setAttributeNodeNS\",\n    value: function setAttributeNodeNS(attr) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"toggleAttribute\",\n    value: function toggleAttribute(qualifiedName, force) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }]);\n}(Node);\n\nfunction isDisplayObject(value) {\n  return !!(value !== null && value !== void 0 && value.nodeName);\n}\nvar Proxy = runtime.globalThis.Proxy ? runtime.globalThis.Proxy : function () {};\nvar attrModifiedEvent = new MutationEvent(ElementEvent.ATTR_MODIFIED, null, null, null, null, MutationEvent.MODIFICATION, null, null);\nvar $vec3 = vec3.create();\nvar $quat = quat$1.create();\n\n/**\n * prototype chains: DisplayObject -> Element -> Node -> EventTarget\n *\n * mixins: Animatable, Transformable, Visible\n * @see https://github.com/tannerntannern/ts-mixer/blob/master/README.md#mixing-generic-classes\n *\n * Provide abilities in scene graph, such as:\n * * transform `translate/rotate/scale`\n * * add/remove child\n * * visibility and z-index\n *\n * Those abilities are implemented with those components: `Transform/Sortable/Visible`.\n *\n * Emit following events:\n * * init\n * * destroy\n * * attributeChanged\n */\nvar DisplayObject = /*#__PURE__*/function (_Element) {\n  function DisplayObject(config) {\n    var _this;\n    _classCallCheck(this, DisplayObject);\n    _this = _callSuper(this, DisplayObject);\n\n    // assign name, id to config\n    // eg. group.get('name')\n    _this.isCustomElement = false;\n    _this.isMutationObserved = false;\n    /**\n     * push to active animations after calling `animate()`\n     */\n    _this.activeAnimations = [];\n    _this.config = config;\n\n    // init scene graph node\n    _this.id = config.id || '';\n    _this.name = config.name || '';\n    if (config.className || config[\"class\"]) {\n      _this.className = config.className || config[\"class\"];\n    }\n    _this.nodeName = config.type || Shape.GROUP;\n    if (config.initialParsedStyle) {\n      Object.assign(_this.parsedStyle, config.initialParsedStyle);\n    }\n\n    // start to process attributes\n    _this.initAttributes(config.style);\n    if (runtime.enableStyleSyntax) {\n      _this.style = new Proxy(\n      // @ts-ignore\n      {\n        // ...this.attributes,\n        setProperty: function setProperty(propertyName, value\n        // priority?: string,\n        ) {\n          _this.setAttribute(propertyName, value);\n        },\n        getPropertyValue: function getPropertyValue(propertyName) {\n          return _this.getAttribute(propertyName);\n        },\n        removeProperty: function removeProperty(propertyName) {\n          _this.removeAttribute(propertyName);\n        },\n        item: function item() {\n          return '';\n        }\n      }, {\n        get: function get(target, name) {\n          if (target[name] !== undefined) {\n            // if (name in target) {\n            return target[name];\n          }\n          return _this.getAttribute(name);\n        },\n        set: function set(_, prop, value) {\n          _this.setAttribute(prop, value);\n          return true;\n        }\n      });\n    }\n    return _this;\n  }\n  _inherits(DisplayObject, _Element);\n  return _createClass(DisplayObject, [{\n    key: \"destroy\",\n    value: function destroy() {\n      _superPropGet(DisplayObject, \"destroy\", this, 3)([]);\n\n      // stop all active animations\n      this.getAnimations().forEach(function (animation) {\n        animation.cancel();\n      });\n    }\n  }, {\n    key: \"cloneNode\",\n    value: function cloneNode(deep, customCloneFunc) {\n      var clonedStyle = _objectSpread({}, this.attributes);\n      for (var attributeName in clonedStyle) {\n        var attribute = clonedStyle[attributeName];\n\n        // @see https://github.com/antvis/G/issues/1095\n        if (isDisplayObject(attribute) &&\n        // share the same clipPath if possible\n        attributeName !== 'clipPath' && attributeName !== 'offsetPath' && attributeName !== 'textPath') {\n          clonedStyle[attributeName] = attribute.cloneNode(deep);\n        }\n        // TODO: clone other type\n        if (customCloneFunc) {\n          clonedStyle[attributeName] = customCloneFunc(attributeName, attribute);\n        }\n      }\n      var cloned = new this.constructor(_objectSpread(_objectSpread({}, this.config), {}, {\n        style: clonedStyle\n      }));\n\n      // apply transform\n      cloned.setLocalTransform(this.getLocalTransform());\n      if (deep) {\n        this.children.forEach(function (child) {\n          // skip marker\n          if (!child.style.isMarker) {\n            var clonedChild = child.cloneNode(deep);\n            cloned.appendChild(clonedChild);\n          }\n        });\n      }\n      return cloned;\n    }\n  }, {\n    key: \"initAttributes\",\n    value: function initAttributes() {\n      var attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var options = {\n        forceUpdateGeometry: true\n      };\n      runtime.styleValueRegistry.processProperties(this, attributes, options);\n\n      // redraw at next frame\n      this.renderable.dirty = true;\n    }\n  }, {\n    key: \"setAttribute\",\n    value: function setAttribute(name, value) {\n      var force = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var memoize = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      // ignore undefined value\n      if (isUndefined(value)) {\n        return;\n      }\n      if (force || value !== this.attributes[name]) {\n        this.internalSetAttribute(name, value, {\n          memoize: memoize\n        });\n        _superPropGet(DisplayObject, \"setAttribute\", this, 3)([name, value]);\n      }\n    }\n\n    /**\n     * called when attributes get changed or initialized\n     */\n  }, {\n    key: \"internalSetAttribute\",\n    value: function internalSetAttribute(name, value) {\n      var parseOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var renderable = this.renderable;\n      var oldValue = this.attributes[name];\n      var oldParsedValue = this.parsedStyle[name];\n      runtime.styleValueRegistry.processProperties(this, _defineProperty({}, name, value), parseOptions);\n\n      // redraw at next frame\n      renderable.dirty = true;\n      var newParsedValue = this.parsedStyle[name];\n      if (this.isConnected) {\n        attrModifiedEvent.relatedNode = this;\n        attrModifiedEvent.prevValue = oldValue;\n        attrModifiedEvent.newValue = value;\n        attrModifiedEvent.attrName = name;\n        attrModifiedEvent.prevParsedValue = oldParsedValue;\n        attrModifiedEvent.newParsedValue = newParsedValue;\n        if (this.isMutationObserved) {\n          this.dispatchEvent(attrModifiedEvent);\n        } else {\n          attrModifiedEvent.target = this;\n          this.ownerDocument.defaultView.dispatchEvent(attrModifiedEvent, true);\n        }\n      }\n      if (this.isCustomElement && this.isConnected || !this.isCustomElement) {\n        var _attributeChangedCall, _ref;\n        (_attributeChangedCall = (_ref = this).attributeChangedCallback) === null || _attributeChangedCall === void 0 || _attributeChangedCall.call(_ref, name, oldValue, value, oldParsedValue, newParsedValue);\n      }\n    }\n\n    // #region transformable\n    /**\n     * returns different values than getBoundingClientRect(), as the latter returns value relative to the viewport\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement/getBBox\n     *\n     * FIXME: It is worth noting that getBBox responds to original untransformed values of a drawn object.\n     * @see https://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html#getBBox\n     */\n  }, {\n    key: \"getBBox\",\n    value: function getBBox() {\n      var aabb = this.getBounds();\n      var _aabb$getMin = aabb.getMin(),\n        _aabb$getMin2 = _slicedToArray(_aabb$getMin, 2),\n        left = _aabb$getMin2[0],\n        top = _aabb$getMin2[1];\n      var _aabb$getMax = aabb.getMax(),\n        _aabb$getMax2 = _slicedToArray(_aabb$getMax, 2),\n        right = _aabb$getMax2[0],\n        bottom = _aabb$getMax2[1];\n      return new Rectangle(left, top, right - left, bottom - top);\n    }\n  }, {\n    key: \"setOrigin\",\n    value: function setOrigin(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      runtime.sceneGraphService.setOrigin(this, createVec3(position, y, z, false));\n      return this;\n    }\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin() {\n      return runtime.sceneGraphService.getOrigin(this);\n    }\n\n    /**\n     * set position in world space\n     */\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      runtime.sceneGraphService.setPosition(this, createVec3(position, y, z, false));\n      return this;\n    }\n\n    /**\n     * set position in local space\n     */\n  }, {\n    key: \"setLocalPosition\",\n    value: function setLocalPosition(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      runtime.sceneGraphService.setLocalPosition(this, createVec3(position, y, z, false));\n      return this;\n    }\n\n    /**\n     * translate in world space\n     */\n  }, {\n    key: \"translate\",\n    value: function translate(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      runtime.sceneGraphService.translate(this, createVec3(position, y, z, false));\n      return this;\n    }\n\n    /**\n     * translate in local space\n     */\n  }, {\n    key: \"translateLocal\",\n    value: function translateLocal(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      runtime.sceneGraphService.translateLocal(this, createVec3(position, y, z, false));\n      return this;\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      return runtime.sceneGraphService.getPosition(this);\n    }\n  }, {\n    key: \"getLocalPosition\",\n    value: function getLocalPosition() {\n      return runtime.sceneGraphService.getLocalPosition(this);\n    }\n\n    /**\n     * compatible with G 3.0\n     *\n     * scaling in local space\n     * scale(10) = scale(10, 10, 10)\n     *\n     * we can't set scale in world space\n     */\n  }, {\n    key: \"scale\",\n    value: function scale(scaling, y, z) {\n      return this.scaleLocal(scaling, y, z);\n    }\n  }, {\n    key: \"scaleLocal\",\n    value: function scaleLocal(scaling, y, z) {\n      if (typeof scaling === 'number') {\n        y = y || scaling;\n        z = z || scaling;\n        scaling = createVec3(scaling, y, z, false);\n      }\n      runtime.sceneGraphService.scaleLocal(this, scaling);\n      return this;\n    }\n\n    /**\n     * set scaling in local space\n     */\n  }, {\n    key: \"setLocalScale\",\n    value: function setLocalScale(scaling, y, z) {\n      if (typeof scaling === 'number') {\n        y = y || scaling;\n        z = z || scaling;\n        scaling = createVec3(scaling, y, z, false);\n      }\n      runtime.sceneGraphService.setLocalScale(this, scaling);\n      return this;\n    }\n\n    /**\n     * get scaling in local space\n     */\n  }, {\n    key: \"getLocalScale\",\n    value: function getLocalScale() {\n      return runtime.sceneGraphService.getLocalScale(this);\n    }\n\n    /**\n     * get scaling in world space\n     */\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      return runtime.sceneGraphService.getScale(this);\n    }\n\n    /**\n     * only return degrees of Z axis in world space\n     */\n  }, {\n    key: \"getEulerAngles\",\n    value: function getEulerAngles() {\n      var _getEuler = getEuler($vec3, runtime.sceneGraphService.getWorldTransform(this)),\n        _getEuler2 = _slicedToArray(_getEuler, 3),\n        ez = _getEuler2[2];\n      return rad2deg(ez);\n    }\n\n    /**\n     * only return degrees of Z axis in local space\n     */\n  }, {\n    key: \"getLocalEulerAngles\",\n    value: function getLocalEulerAngles() {\n      var _getEuler3 = getEuler($vec3, runtime.sceneGraphService.getLocalRotation(this)),\n        _getEuler4 = _slicedToArray(_getEuler3, 3),\n        ez = _getEuler4[2];\n      return rad2deg(ez);\n    }\n\n    /**\n     * set euler angles(degrees) in world space\n     */\n  }, {\n    key: \"setEulerAngles\",\n    value: function setEulerAngles(z) {\n      runtime.sceneGraphService.setEulerAngles(this, 0, 0, z);\n      return this;\n    }\n\n    /**\n     * set euler angles(degrees) in local space\n     */\n  }, {\n    key: \"setLocalEulerAngles\",\n    value: function setLocalEulerAngles(z) {\n      runtime.sceneGraphService.setLocalEulerAngles(this, 0, 0, z);\n      return this;\n    }\n  }, {\n    key: \"rotateLocal\",\n    value: function rotateLocal(x, y, z) {\n      if (isNil(y) && isNil(z)) {\n        runtime.sceneGraphService.rotateLocal(this, 0, 0, x);\n      } else {\n        runtime.sceneGraphService.rotateLocal(this, x, y, z);\n      }\n      return this;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(x, y, z) {\n      if (isNil(y) && isNil(z)) {\n        runtime.sceneGraphService.rotate(this, 0, 0, x);\n      } else {\n        runtime.sceneGraphService.rotate(this, x, y, z);\n      }\n      return this;\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation, y, z, w) {\n      runtime.sceneGraphService.setRotation(this, rotation, y, z, w);\n      return this;\n    }\n  }, {\n    key: \"setLocalRotation\",\n    value: function setLocalRotation(rotation, y, z, w) {\n      runtime.sceneGraphService.setLocalRotation(this, rotation, y, z, w);\n      return this;\n    }\n  }, {\n    key: \"setLocalSkew\",\n    value: function setLocalSkew(skew, y) {\n      runtime.sceneGraphService.setLocalSkew(this, skew, y);\n      return this;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      return runtime.sceneGraphService.getRotation(this);\n    }\n  }, {\n    key: \"getLocalRotation\",\n    value: function getLocalRotation() {\n      return runtime.sceneGraphService.getLocalRotation(this);\n    }\n  }, {\n    key: \"getLocalSkew\",\n    value: function getLocalSkew() {\n      return runtime.sceneGraphService.getLocalSkew(this);\n    }\n  }, {\n    key: \"getLocalTransform\",\n    value: function getLocalTransform() {\n      return runtime.sceneGraphService.getLocalTransform(this);\n    }\n  }, {\n    key: \"getWorldTransform\",\n    value: function getWorldTransform() {\n      return runtime.sceneGraphService.getWorldTransform(this);\n    }\n  }, {\n    key: \"setLocalTransform\",\n    value: function setLocalTransform(transform) {\n      runtime.sceneGraphService.setLocalTransform(this, transform);\n      return this;\n    }\n  }, {\n    key: \"resetLocalTransform\",\n    value: function resetLocalTransform() {\n      runtime.sceneGraphService.resetLocalTransform(this);\n    }\n    // #endregion transformable\n\n    // #region animatable\n    /**\n     * returns an array of all Animation objects affecting this element\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAnimations\n     */\n  }, {\n    key: \"getAnimations\",\n    value: function getAnimations() {\n      return this.activeAnimations;\n    }\n    /**\n     * create an animation with WAAPI\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/animate\n     */\n  }, {\n    key: \"animate\",\n    value: function animate(keyframes, options) {\n      var _this$ownerDocument;\n      var timeline = (_this$ownerDocument = this.ownerDocument) === null || _this$ownerDocument === void 0 ? void 0 : _this$ownerDocument.timeline;\n      if (timeline) {\n        return timeline.play(this, keyframes, options);\n      }\n      return null;\n    }\n    // #endregion animatable\n\n    // #region visible\n    /**\n     * shortcut for Used value of `visibility`\n     */\n  }, {\n    key: \"isVisible\",\n    value: function isVisible() {\n      var _this$parsedStyle;\n      return ((_this$parsedStyle = this.parsedStyle) === null || _this$parsedStyle === void 0 ? void 0 : _this$parsedStyle.visibility) !== 'hidden';\n    }\n  }, {\n    key: \"interactive\",\n    get: function get() {\n      return this.isInteractive();\n    },\n    set: function set(b) {\n      this.style.pointerEvents = b ? 'auto' : 'none';\n    }\n  }, {\n    key: \"isInteractive\",\n    value: function isInteractive() {\n      var _this$parsedStyle2;\n      return ((_this$parsedStyle2 = this.parsedStyle) === null || _this$parsedStyle2 === void 0 ? void 0 : _this$parsedStyle2.pointerEvents) !== 'none';\n    }\n  }, {\n    key: \"isCulled\",\n    value: function isCulled() {\n      return !!(this.cullable && this.cullable.enable && !this.cullable.visible);\n    }\n\n    /**\n     * bring to front in current group\n     */\n  }, {\n    key: \"toFront\",\n    value: function toFront() {\n      if (this.parentNode) {\n        this.style.zIndex = Math.max.apply(Math, _toConsumableArray(this.parentNode.children.map(function (child) {\n          return Number(child.style.zIndex);\n        }))) + 1;\n      }\n      return this;\n    }\n\n    /**\n     * send to back in current group\n     */\n  }, {\n    key: \"toBack\",\n    value: function toBack() {\n      if (this.parentNode) {\n        this.style.zIndex = Math.min.apply(Math, _toConsumableArray(this.parentNode.children.map(function (child) {\n          return Number(child.style.zIndex);\n        }))) - 1;\n      }\n      return this;\n    }\n    // #endregion visible\n\n    // #region deprecated\n\n    /**\n     * compatible with G 3.0\n     * @alias object.config\n     * @deprecated\n     */\n  }, {\n    key: \"getConfig\",\n    value: function getConfig() {\n      return this.config;\n    }\n\n    /**\n     * @alias style\n     * @example\n     * circle.style.r = 10;\n     * const r = circle.style;\n     * @deprecated\n     */\n  }, {\n    key: \"attr\",\n    value: function attr() {\n      var _this2 = this;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      var name = args[0],\n        value = args[1];\n      if (!name) {\n        return this.attributes;\n      }\n      if (isObject(name)) {\n        Object.keys(name).forEach(function (key) {\n          _this2.setAttribute(key, name[key]);\n        });\n        return this;\n      }\n      if (args.length === 2) {\n        this.setAttribute(name, value);\n        return this;\n      }\n      return this.attributes[name];\n    }\n\n    /**\n     * return 3x3 matrix in world space\n     * @deprecated\n     */\n  }, {\n    key: \"getMatrix\",\n    value: function getMatrix(transformMat4) {\n      var transform = transformMat4 || this.getWorldTransform();\n      var _mat4$getTranslation = mat4.getTranslation($vec3, transform),\n        _mat4$getTranslation2 = _slicedToArray(_mat4$getTranslation, 2),\n        tx = _mat4$getTranslation2[0],\n        ty = _mat4$getTranslation2[1];\n      var _mat4$getScaling = mat4.getScaling($vec3, transform),\n        _mat4$getScaling2 = _slicedToArray(_mat4$getScaling, 2),\n        sx = _mat4$getScaling2[0],\n        sy = _mat4$getScaling2[1];\n      var rotation = mat4.getRotation($quat, transform);\n      var _getEuler5 = getEuler($vec3, rotation),\n        _getEuler6 = _slicedToArray(_getEuler5, 3),\n        eux = _getEuler6[0],\n        euz = _getEuler6[2];\n      // gimbal lock at 90 degrees\n      return fromRotationTranslationScale(eux || euz, tx, ty, sx, sy);\n    }\n\n    /**\n     * return 3x3 matrix in local space\n     * @deprecated\n     */\n  }, {\n    key: \"getLocalMatrix\",\n    value: function getLocalMatrix() {\n      return this.getMatrix(this.getLocalTransform());\n    }\n\n    /**\n     * set 3x3 matrix in world space\n     * @deprecated\n     */\n  }, {\n    key: \"setMatrix\",\n    value: function setMatrix(mat) {\n      var _decompose = decompose(mat),\n        _decompose2 = _slicedToArray(_decompose, 5),\n        tx = _decompose2[0],\n        ty = _decompose2[1],\n        scalingX = _decompose2[2],\n        scalingY = _decompose2[3],\n        angle = _decompose2[4];\n      this.setEulerAngles(angle).setPosition(tx, ty).setLocalScale(scalingX, scalingY);\n    }\n\n    /**\n     * set 3x3 matrix in local space\n     * @deprecated\n     */\n  }, {\n    key: \"setLocalMatrix\",\n    value: function setLocalMatrix(mat) {\n      var _decompose3 = decompose(mat),\n        _decompose4 = _slicedToArray(_decompose3, 5),\n        tx = _decompose4[0],\n        ty = _decompose4[1],\n        scalingX = _decompose4[2],\n        scalingY = _decompose4[3],\n        angle = _decompose4[4];\n      this.setLocalEulerAngles(angle).setLocalPosition(tx, ty).setLocalScale(scalingX, scalingY);\n    }\n\n    /**\n     * Use `visibility: visible` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.forEach(function (object) {\n        object.style.visibility = 'visible';\n      });\n    }\n\n    /**\n     * Use `visibility: hidden` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.forEach(function (object) {\n        object.style.visibility = 'hidden';\n      });\n    }\n\n    /**\n     * Use `childElementCount` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getCount\",\n    value: function getCount() {\n      return this.childElementCount;\n    }\n\n    /**\n     * Use `parentElement` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getParent\",\n    value: function getParent() {\n      return this.parentElement;\n    }\n\n    /**\n     * Use `children` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getChildren\",\n    value: function getChildren() {\n      return this.children;\n    }\n\n    /**\n     * Use `firstElementChild` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getFirst\",\n    value: function getFirst() {\n      return this.firstElementChild;\n    }\n\n    /**\n     * Use `lastElementChild` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getLast\",\n    value: function getLast() {\n      return this.lastElementChild;\n    }\n\n    /**\n     * Use `this.children[index]` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getChildByIndex\",\n    value: function getChildByIndex(index) {\n      return this.children[index] || null;\n    }\n\n    /**\n     * Use `appendChild` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"add\",\n    value: function add(child, index) {\n      return this.appendChild(child, index);\n    }\n\n    /**\n     * @deprecated\n     */\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      // @ts-ignore\n      this.config[name] = value;\n    }\n\n    /**\n     * @deprecated\n     */\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      return this.config[name];\n    }\n\n    /**\n     * Use `setPosition` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"moveTo\",\n    value: function moveTo(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      this.setPosition(position, y, z);\n      return this;\n    }\n\n    /**\n     * Use `setPosition` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"move\",\n    value: function move(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      this.setPosition(position, y, z);\n      return this;\n    }\n\n    /**\n     * Use `this.style.zIndex` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"setZIndex\",\n    value: function setZIndex(zIndex) {\n      this.style.zIndex = zIndex;\n      return this;\n    }\n\n    // #endregion deprecated\n  }]);\n}(Element);\nDisplayObject.PARSED_STYLE_LIST = new Set(['class', 'className', 'clipPath', 'cursor', 'display', 'draggable', 'droppable', 'fill', 'fillOpacity', 'fillRule', 'filter', 'increasedLineWidthForHitTesting', 'lineCap', 'lineDash', 'lineDashOffset', 'lineJoin', 'lineWidth', 'miterLimit', 'hitArea', 'offsetDistance', 'offsetPath', 'offsetX', 'offsetY', 'opacity', 'pointerEvents', 'shadowColor', 'shadowType', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'stroke', 'strokeOpacity', 'strokeWidth', 'strokeLinecap', 'strokeLineJoin', 'strokeDasharray', 'strokeDashoffset', 'transform', 'transformOrigin', 'textTransform', 'visibility', 'zIndex']);\n\nvar Circle = /*#__PURE__*/function (_DisplayObject) {\n  function Circle() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Circle);\n    return _callSuper(this, Circle, [_objectSpread({\n      type: Shape.CIRCLE\n    }, options)]);\n  }\n  _inherits(Circle, _DisplayObject);\n  return _createClass(Circle);\n}(DisplayObject);\nCircle.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['cx', 'cy', 'cz', 'r', 'isBillboard', 'isSizeAttenuation']));\n\nvar _excluded$6 = [\"style\"];\n/**\n * shadow root\n * @see https://yuque.antfin-inc.com/antv/czqvg5/pgqipg\n */\nvar CustomElement = /*#__PURE__*/function (_DisplayObject) {\n  // private shadowNodes: DisplayObject[] = [];\n\n  function CustomElement() {\n    var _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$6);\n    _classCallCheck(this, CustomElement);\n    _this = _callSuper(this, CustomElement, [_objectSpread({\n      style: style\n    }, rest)]);\n    _this.isCustomElement = true;\n    return _this;\n  }\n\n  /**\n   * fired after element insert into DOM tree\n   */\n  _inherits(CustomElement, _DisplayObject);\n  return _createClass(CustomElement);\n}(DisplayObject);\nCustomElement.PARSED_STYLE_LIST = new Set(['class', 'className', 'clipPath', 'cursor', 'draggable', 'droppable', 'opacity', 'pointerEvents', 'transform', 'transformOrigin', 'zIndex', 'visibility']);\n\nvar Ellipse = /*#__PURE__*/function (_DisplayObject) {\n  function Ellipse() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Ellipse);\n    return _callSuper(this, Ellipse, [_objectSpread({\n      type: Shape.ELLIPSE\n    }, options)]);\n  }\n  _inherits(Ellipse, _DisplayObject);\n  return _createClass(Ellipse);\n}(DisplayObject);\nEllipse.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['cx', 'cy', 'cz', 'rx', 'ry', 'isBillboard', 'isSizeAttenuation']));\n\n/**\n * \n *\n *   Fragment  Fragment \n *\n *  Fragment  Canvas \n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\n */\nvar Fragment = /*#__PURE__*/function (_DisplayObject) {\n  function Fragment() {\n    _classCallCheck(this, Fragment);\n    return _callSuper(this, Fragment, [{\n      type: Shape.FRAGMENT\n    }]);\n  }\n  _inherits(Fragment, _DisplayObject);\n  return _createClass(Fragment);\n}(DisplayObject);\nFragment.PARSED_STYLE_LIST = new Set(['class', 'className']);\n\n/**\n * its attributes are inherited by its children.\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/g\n * \n * @example\n * <g fill=\"white\" stroke=\"green\" stroke-width=\"5\">\n    <circle cx=\"40\" cy=\"40\" r=\"25\" />\n    <circle cx=\"60\" cy=\"60\" r=\"25\" />\n  </g>\n */\nvar Group = /*#__PURE__*/function (_DisplayObject) {\n  function Group() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Group);\n    return _callSuper(this, Group, [_objectSpread({\n      type: Shape.GROUP\n    }, options)]);\n  }\n  _inherits(Group, _DisplayObject);\n  return _createClass(Group);\n}(DisplayObject);\nGroup.PARSED_STYLE_LIST = new Set(['class', 'className', 'clipPath', 'cursor', 'draggable', 'droppable', 'opacity', 'pointerEvents', 'transform', 'transformOrigin', 'zIndex', 'visibility']);\n\nvar _excluded$5 = [\"style\"];\n/**\n * HTML container\n * @see https://github.com/pmndrs/drei#html\n */\nvar HTML = /*#__PURE__*/function (_DisplayObject) {\n  function HTML() {\n    var _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$5);\n    _classCallCheck(this, HTML);\n    _this = _callSuper(this, HTML, [_objectSpread({\n      type: Shape.HTML,\n      style: style\n    }, rest)]);\n    _this.cullable.enable = false;\n    return _this;\n  }\n\n  /**\n   * return wrapper HTMLElement\n   * * <div> in g-webgl/canvas\n   * * <foreignObject> in g-svg\n   */\n  _inherits(HTML, _DisplayObject);\n  return _createClass(HTML, [{\n    key: \"getDomElement\",\n    value: function getDomElement() {\n      return this.parsedStyle.$el;\n    }\n\n    /**\n     * override with $el.getBoundingClientRect\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect\n     *\n     * ! The calculation logic of the html element should be consistent with that of the canvas element\n     */\n    // getBoundingClientRect(): Rectangle {\n    //   if (this.parsedStyle.$el) {\n    //     return this.parsedStyle.$el.getBoundingClientRect();\n    //   } else {\n    //     const { x, y, width, height } = this.parsedStyle;\n    //     return new Rectangle(x, y, width, height);\n    //   }\n    // }\n  }, {\n    key: \"getClientRects\",\n    value: function getClientRects() {\n      return [this.getBoundingClientRect()];\n    }\n\n    // getBounds() {\n    //   const clientRect = this.getBoundingClientRect();\n    //   // calc context's offset\n    //   // @ts-ignore\n    //   const canvasRect = this.ownerDocument?.defaultView\n    //     ?.getContextService()\n    //     .getBoundingClientRect();\n\n    //   const aabb = new AABB();\n    //   const minX = clientRect.left - (canvasRect?.left || 0);\n    //   const minY = clientRect.top - (canvasRect?.top || 0);\n    //   aabb.setMinMax(\n    //     [minX, minY, 0],\n    //     [minX + clientRect.width, minY + clientRect.height, 0],\n    //   );\n    //   return aabb;\n    // }\n  }, {\n    key: \"getLocalBounds\",\n    value: function getLocalBounds() {\n      if (this.parentNode) {\n        var parentInvert = mat4.invert(mat4.create(), this.parentNode.getWorldTransform());\n        var bounds = this.getBounds();\n        if (!AABB.isEmpty(bounds)) {\n          var localBounds = new AABB();\n          localBounds.setFromTransformedAABB(bounds, parentInvert);\n          return localBounds;\n        }\n      }\n      return this.getBounds();\n    }\n  }]);\n}(DisplayObject);\nHTML.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['x', 'y', '$el', 'innerHTML', 'width', 'height']));\n\nvar Image = /*#__PURE__*/function (_DisplayObject) {\n  function Image() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Image);\n    return _callSuper(this, Image, [_objectSpread({\n      type: Shape.IMAGE\n    }, options)]);\n  }\n  _inherits(Image, _DisplayObject);\n  return _createClass(Image);\n}(DisplayObject);\nImage.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['x', 'y', 'z', 'src', 'width', 'height', 'isBillboard', 'billboardRotation', 'isSizeAttenuation', 'keepAspectRatio']));\n\nvar _excluded$4 = [\"style\"];\n/**\n * Create a line connecting two points.\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/line\n *\n * Also support for using marker.\n */\nvar Line = /*#__PURE__*/function (_DisplayObject) {\n  function Line() {\n    var _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$4);\n    _classCallCheck(this, Line);\n    _this = _callSuper(this, Line, [_objectSpread({\n      type: Shape.LINE,\n      style: _objectSpread({\n        x1: 0,\n        y1: 0,\n        x2: 0,\n        y2: 0,\n        z1: 0,\n        z2: 0\n      }, style)\n    }, rest)]);\n    _this.markerStartAngle = 0;\n    _this.markerEndAngle = 0;\n    var _this$parsedStyle = _this.parsedStyle,\n      markerStart = _this$parsedStyle.markerStart,\n      markerEnd = _this$parsedStyle.markerEnd;\n    if (markerStart && isDisplayObject(markerStart)) {\n      _this.markerStartAngle = markerStart.getLocalEulerAngles();\n      _this.appendChild(markerStart);\n    }\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      _this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      _this.appendChild(markerEnd);\n    }\n    _this.transformMarker(true);\n    _this.transformMarker(false);\n    return _this;\n  }\n  _inherits(Line, _DisplayObject);\n  return _createClass(Line, [{\n    key: \"attributeChangedCallback\",\n    value: function attributeChangedCallback(attrName, oldValue, newValue, prevParsedValue, newParsedValue) {\n      if (attrName === 'x1' || attrName === 'y1' || attrName === 'x2' || attrName === 'y2' || attrName === 'markerStartOffset' || attrName === 'markerEndOffset') {\n        this.transformMarker(true);\n        this.transformMarker(false);\n      } else if (attrName === 'markerStart') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerStartAngle = 0;\n          prevParsedValue.remove();\n        }\n\n        // CSSKeyword 'unset'\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(true);\n        }\n      } else if (attrName === 'markerEnd') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerEndAngle = 0;\n          prevParsedValue.remove();\n        }\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(false);\n        }\n      }\n    }\n  }, {\n    key: \"transformMarker\",\n    value: function transformMarker(isStart) {\n      var _this$parsedStyle2 = this.parsedStyle,\n        markerStart = _this$parsedStyle2.markerStart,\n        markerEnd = _this$parsedStyle2.markerEnd,\n        markerStartOffset = _this$parsedStyle2.markerStartOffset,\n        markerEndOffset = _this$parsedStyle2.markerEndOffset,\n        x1 = _this$parsedStyle2.x1,\n        x2 = _this$parsedStyle2.x2,\n        y1 = _this$parsedStyle2.y1,\n        y2 = _this$parsedStyle2.y2;\n      var marker = isStart ? markerStart : markerEnd;\n      if (!marker || !isDisplayObject(marker)) {\n        return;\n      }\n      var rad = 0;\n      var x;\n      var y;\n      var ox;\n      var oy;\n      var offset;\n      var originalAngle;\n      if (isStart) {\n        ox = x1;\n        oy = y1;\n        x = x2 - x1;\n        y = y2 - y1;\n        offset = markerStartOffset || 0;\n        originalAngle = this.markerStartAngle;\n      } else {\n        ox = x2;\n        oy = y2;\n        x = x1 - x2;\n        y = y1 - y2;\n        offset = markerEndOffset || 0;\n        originalAngle = this.markerEndAngle;\n      }\n      rad = Math.atan2(y, x);\n\n      // account for markerOffset\n      marker.setLocalEulerAngles(rad * 180 / Math.PI + originalAngle);\n      marker.setLocalPosition(ox + Math.cos(rad) * offset, oy + Math.sin(rad) * offset);\n    }\n  }, {\n    key: \"getPoint\",\n    value: function getPoint(ratio) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      // TODO: account for z1/z2 in 3D line\n      var _this$parsedStyle3 = this.parsedStyle,\n        x1 = _this$parsedStyle3.x1,\n        y1 = _this$parsedStyle3.y1,\n        x2 = _this$parsedStyle3.x2,\n        y2 = _this$parsedStyle3.y2;\n      var _linePointAt = linePointAt(x1, y1, x2, y2, ratio),\n        x = _linePointAt.x,\n        y = _linePointAt.y;\n      var transformed = vec3.transformMat4(vec3.create(), vec3.fromValues(x, y, 0), inWorldSpace ? this.getWorldTransform() : this.getLocalTransform());\n\n      // apply local transformation\n      return new Point(transformed[0], transformed[1]);\n    }\n  }, {\n    key: \"getPointAtLength\",\n    value: function getPointAtLength(distance) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return this.getPoint(distance / this.getTotalLength(), inWorldSpace);\n    }\n  }, {\n    key: \"getTotalLength\",\n    value: function getTotalLength() {\n      // TODO: account for z1/z2 in 3D line\n      var _this$parsedStyle4 = this.parsedStyle,\n        x1 = _this$parsedStyle4.x1,\n        y1 = _this$parsedStyle4.y1,\n        x2 = _this$parsedStyle4.x2,\n        y2 = _this$parsedStyle4.y2;\n      return lineLength(x1, y1, x2, y2);\n    }\n  }]);\n}(DisplayObject);\nLine.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['x1', 'y1', 'x2', 'y2', 'z1', 'z2', 'isBillboard', 'isSizeAttenuation', 'markerStart', 'markerEnd', 'markerStartOffset', 'markerEndOffset']));\n\nvar _excluded$3 = [\"style\"];\nvar Path = /*#__PURE__*/function (_DisplayObject) {\n  function Path() {\n    var _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$3);\n    _classCallCheck(this, Path);\n    _this = _callSuper(this, Path, [_objectSpread({\n      type: Shape.PATH,\n      style: style,\n      initialParsedStyle: {\n        miterLimit: 4,\n        d: _objectSpread({}, EMPTY_PARSED_PATH)\n      }\n    }, rest)]);\n    _this.markerStartAngle = 0;\n    _this.markerEndAngle = 0;\n    /**\n     * markers placed at the mid\n     */\n    _this.markerMidList = [];\n    var _this$parsedStyle = _this.parsedStyle,\n      markerStart = _this$parsedStyle.markerStart,\n      markerEnd = _this$parsedStyle.markerEnd,\n      markerMid = _this$parsedStyle.markerMid;\n    if (markerStart && isDisplayObject(markerStart)) {\n      _this.markerStartAngle = markerStart.getLocalEulerAngles();\n      _this.appendChild(markerStart);\n    }\n    if (markerMid && isDisplayObject(markerMid)) {\n      _this.placeMarkerMid(markerMid);\n    }\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      _this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      _this.appendChild(markerEnd);\n    }\n    _this.transformMarker(true);\n    _this.transformMarker(false);\n    return _this;\n  }\n  _inherits(Path, _DisplayObject);\n  return _createClass(Path, [{\n    key: \"attributeChangedCallback\",\n    value: function attributeChangedCallback(attrName, oldValue, newValue, prevParsedValue, newParsedValue) {\n      if (attrName === 'd') {\n        // recalc markers\n        this.transformMarker(true);\n        this.transformMarker(false);\n        this.placeMarkerMid(this.parsedStyle.markerMid);\n      } else if (attrName === 'markerStartOffset' || attrName === 'markerEndOffset') {\n        this.transformMarker(true);\n        this.transformMarker(false);\n      } else if (attrName === 'markerStart') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerStartAngle = 0;\n          prevParsedValue.remove();\n        }\n\n        // CSSKeyword 'unset'\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(true);\n        }\n      } else if (attrName === 'markerEnd') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerEndAngle = 0;\n          prevParsedValue.remove();\n        }\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(false);\n        }\n      } else if (attrName === 'markerMid') {\n        this.placeMarkerMid(newParsedValue);\n      }\n    }\n  }, {\n    key: \"transformMarker\",\n    value: function transformMarker(isStart) {\n      var _this$parsedStyle2 = this.parsedStyle,\n        markerStart = _this$parsedStyle2.markerStart,\n        markerEnd = _this$parsedStyle2.markerEnd,\n        markerStartOffset = _this$parsedStyle2.markerStartOffset,\n        markerEndOffset = _this$parsedStyle2.markerEndOffset;\n      var marker = isStart ? markerStart : markerEnd;\n      if (!marker || !isDisplayObject(marker)) {\n        return;\n      }\n      var rad = 0;\n      var x;\n      var y;\n      var ox;\n      var oy;\n      var offset;\n      var originalAngle;\n      if (isStart) {\n        var _this$getStartTangent = this.getStartTangent(),\n          _this$getStartTangent2 = _slicedToArray(_this$getStartTangent, 2),\n          p1 = _this$getStartTangent2[0],\n          p2 = _this$getStartTangent2[1];\n        ox = p2[0];\n        oy = p2[1];\n        x = p1[0] - p2[0];\n        y = p1[1] - p2[1];\n        offset = markerStartOffset || 0;\n        originalAngle = this.markerStartAngle;\n      } else {\n        var _this$getEndTangent = this.getEndTangent(),\n          _this$getEndTangent2 = _slicedToArray(_this$getEndTangent, 2),\n          _p = _this$getEndTangent2[0],\n          _p2 = _this$getEndTangent2[1];\n        ox = _p2[0];\n        oy = _p2[1];\n        x = _p[0] - _p2[0];\n        y = _p[1] - _p2[1];\n        offset = markerEndOffset || 0;\n        originalAngle = this.markerEndAngle;\n      }\n      rad = Math.atan2(y, x);\n\n      // account for markerOffset\n      marker.setLocalEulerAngles(rad * 180 / Math.PI + originalAngle);\n      marker.setLocalPosition(ox + Math.cos(rad) * offset, oy + Math.sin(rad) * offset);\n    }\n  }, {\n    key: \"placeMarkerMid\",\n    value: function placeMarkerMid(marker) {\n      var segments = this.parsedStyle.d.segments;\n      // clear all existed markers\n      this.markerMidList.forEach(function (marker) {\n        marker.remove();\n      });\n      if (marker && isDisplayObject(marker)) {\n        for (var i = 1; i < segments.length - 1; i++) {\n          var _segments$i$currentPo = _slicedToArray(segments[i].currentPoint, 2),\n            ox = _segments$i$currentPo[0],\n            oy = _segments$i$currentPo[1];\n          var cloned = i === 1 ? marker : marker.cloneNode(true);\n          this.markerMidList.push(cloned);\n          this.appendChild(cloned);\n          cloned.setLocalPosition(ox, oy);\n          // TODO: orient of marker\n        }\n      }\n    }\n\n    /**\n     * Returns the total length of the path.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getTotalLength\n     */\n  }, {\n    key: \"getTotalLength\",\n    value: function getTotalLength() {\n      return getOrCalculatePathTotalLength(this);\n    }\n\n    /**\n     * Returns the point at a given distance along the path.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getPointAtLength\n     */\n  }, {\n    key: \"getPointAtLength\",\n    value: function getPointAtLength$1(distance) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var absolutePath = this.parsedStyle.d.absolutePath;\n      var _getPointAtLength2 = getPointAtLength(absolutePath, distance),\n        x = _getPointAtLength2.x,\n        y = _getPointAtLength2.y;\n      var transformed = vec3.transformMat4(vec3.create(), vec3.fromValues(x, y, 0), inWorldSpace ? this.getWorldTransform() : this.getLocalTransform());\n\n      // apply local transformation\n      return new Point(transformed[0], transformed[1]);\n    }\n\n    /**\n     * Returns the point at a given ratio of the total length in path.\n     */\n  }, {\n    key: \"getPoint\",\n    value: function getPoint(ratio) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return this.getPointAtLength(ratio * getOrCalculatePathTotalLength(this), inWorldSpace);\n    }\n\n    /**\n     * Get start tangent vector\n     */\n  }, {\n    key: \"getStartTangent\",\n    value: function getStartTangent() {\n      var segments = this.parsedStyle.d.segments;\n      var result = [];\n      if (segments.length > 1) {\n        var startPoint = segments[0].currentPoint;\n        var endPoint = segments[1].currentPoint;\n        var tangent = segments[1].startTangent;\n        result = [];\n        if (tangent) {\n          result.push([startPoint[0] - tangent[0], startPoint[1] - tangent[1]]);\n          result.push([startPoint[0], startPoint[1]]);\n        } else {\n          result.push([endPoint[0], endPoint[1]]);\n          result.push([startPoint[0], startPoint[1]]);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Get end tangent vector\n     */\n  }, {\n    key: \"getEndTangent\",\n    value: function getEndTangent() {\n      var segments = this.parsedStyle.d.segments;\n      var length = segments.length;\n      var result = [];\n      if (length > 1) {\n        var startPoint = segments[length - 2].currentPoint;\n        var endPoint = segments[length - 1].currentPoint;\n        var tangent = segments[length - 1].endTangent;\n        result = [];\n        if (tangent) {\n          result.push([endPoint[0] - tangent[0], endPoint[1] - tangent[1]]);\n          result.push([endPoint[0], endPoint[1]]);\n        } else {\n          result.push([startPoint[0], startPoint[1]]);\n          result.push([endPoint[0], endPoint[1]]);\n        }\n      }\n      return result;\n    }\n  }]);\n}(DisplayObject);\nPath.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['d', 'markerStart', 'markerMid', 'markerEnd', 'markerStartOffset', 'markerEndOffset', 'isBillboard', 'isSizeAttenuation']));\n\nvar _excluded$2 = [\"style\"];\nvar Polygon = /*#__PURE__*/function (_DisplayObject) {\n  function Polygon() {\n    var _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$2);\n    _classCallCheck(this, Polygon);\n    _this = _callSuper(this, Polygon, [_objectSpread({\n      type: Shape.POLYGON,\n      style: style,\n      initialParsedStyle: {\n        points: {\n          points: [],\n          totalLength: 0,\n          segments: []\n        },\n        miterLimit: 4,\n        isClosed: true\n      }\n    }, rest)]);\n    _this.markerStartAngle = 0;\n    _this.markerEndAngle = 0;\n    /**\n     * markers placed at the mid\n     */\n    _this.markerMidList = [];\n    var _this$parsedStyle = _this.parsedStyle,\n      markerStart = _this$parsedStyle.markerStart,\n      markerEnd = _this$parsedStyle.markerEnd,\n      markerMid = _this$parsedStyle.markerMid;\n    if (markerStart && isDisplayObject(markerStart)) {\n      _this.markerStartAngle = markerStart.getLocalEulerAngles();\n      _this.appendChild(markerStart);\n    }\n    if (markerMid && isDisplayObject(markerMid)) {\n      _this.placeMarkerMid(markerMid);\n    }\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      _this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      _this.appendChild(markerEnd);\n    }\n    _this.transformMarker(true);\n    _this.transformMarker(false);\n    return _this;\n  }\n  _inherits(Polygon, _DisplayObject);\n  return _createClass(Polygon, [{\n    key: \"attributeChangedCallback\",\n    value: function attributeChangedCallback(attrName, oldValue, newValue, prevParsedValue, newParsedValue) {\n      if (attrName === 'points') {\n        // recalc markers\n        this.transformMarker(true);\n        this.transformMarker(false);\n        this.placeMarkerMid(this.parsedStyle.markerMid);\n      } else if (attrName === 'markerStartOffset' || attrName === 'markerEndOffset') {\n        this.transformMarker(true);\n        this.transformMarker(false);\n      } else if (attrName === 'markerStart') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerStartAngle = 0;\n          prevParsedValue.remove();\n        }\n\n        // CSSKeyword 'unset'\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(true);\n        }\n      } else if (attrName === 'markerEnd') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerEndAngle = 0;\n          prevParsedValue.remove();\n        }\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(false);\n        }\n      } else if (attrName === 'markerMid') {\n        this.placeMarkerMid(newParsedValue);\n      }\n    }\n  }, {\n    key: \"transformMarker\",\n    value: function transformMarker(isStart) {\n      var _this$parsedStyle2 = this.parsedStyle,\n        markerStart = _this$parsedStyle2.markerStart,\n        markerEnd = _this$parsedStyle2.markerEnd,\n        markerStartOffset = _this$parsedStyle2.markerStartOffset,\n        markerEndOffset = _this$parsedStyle2.markerEndOffset,\n        P = _this$parsedStyle2.points;\n      var _ref2 = P || {},\n        points = _ref2.points;\n      var marker = isStart ? markerStart : markerEnd;\n      if (!marker || !isDisplayObject(marker) || !points) {\n        return;\n      }\n      var rad = 0;\n      var x;\n      var y;\n      var ox;\n      var oy;\n      var offset;\n      var originalAngle;\n      ox = points[0][0];\n      oy = points[0][1];\n      if (isStart) {\n        x = points[1][0] - points[0][0];\n        y = points[1][1] - points[0][1];\n        offset = markerStartOffset || 0;\n        originalAngle = this.markerStartAngle;\n      } else {\n        var length = points.length;\n        if (!this.parsedStyle.isClosed) {\n          ox = points[length - 1][0];\n          oy = points[length - 1][1];\n          x = points[length - 2][0] - points[length - 1][0];\n          y = points[length - 2][1] - points[length - 1][1];\n        } else {\n          x = points[length - 1][0] - points[0][0];\n          y = points[length - 1][1] - points[0][1];\n        }\n        offset = markerEndOffset || 0;\n        originalAngle = this.markerEndAngle;\n      }\n      rad = Math.atan2(y, x);\n\n      // account for markerOffset\n      marker.setLocalEulerAngles(rad * 180 / Math.PI + originalAngle);\n      marker.setLocalPosition(ox + Math.cos(rad) * offset, oy + Math.sin(rad) * offset);\n    }\n  }, {\n    key: \"placeMarkerMid\",\n    value: function placeMarkerMid(marker) {\n      var P = this.parsedStyle.points;\n      var _ref3 = P || {},\n        points = _ref3.points;\n\n      // clear all existed markers\n      this.markerMidList.forEach(function (marker) {\n        marker.remove();\n      });\n      this.markerMidList = [];\n      if (marker && isDisplayObject(marker) && points) {\n        for (var i = 1; i < (this.parsedStyle.isClosed ? points.length : points.length - 1); i++) {\n          var ox = points[i][0];\n          var oy = points[i][1];\n          var cloned = i === 1 ? marker : marker.cloneNode(true);\n          this.markerMidList.push(cloned);\n          this.appendChild(cloned);\n          cloned.setLocalPosition(ox, oy);\n\n          // TODO: orient of marker\n        }\n      }\n    }\n  }]);\n}(DisplayObject);\nPolygon.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['points', 'markerStart', 'markerMid', 'markerEnd', 'markerStartOffset', 'markerEndOffset', 'isClosed', 'isBillboard', 'isSizeAttenuation']));\n\nvar _excluded$1 = [\"style\"];\n/**\n * Polyline inherits the marker-related capabilities of Polygon.\n */\nvar Polyline = /*#__PURE__*/function (_Polygon) {\n  function Polyline() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$1);\n    _classCallCheck(this, Polyline);\n    return _callSuper(this, Polyline, [_objectSpread({\n      type: Shape.POLYLINE,\n      style: style,\n      initialParsedStyle: {\n        points: {\n          points: [],\n          totalLength: 0,\n          segments: []\n        },\n        miterLimit: 4,\n        isClosed: false\n      }\n    }, rest)]);\n  }\n  _inherits(Polyline, _Polygon);\n  return _createClass(Polyline, [{\n    key: \"getTotalLength\",\n    value: function getTotalLength() {\n      return getOrCalculatePolylineTotalLength(this);\n    }\n  }, {\n    key: \"getPointAtLength\",\n    value: function getPointAtLength(distance) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return this.getPoint(distance / this.getTotalLength(), inWorldSpace);\n    }\n  }, {\n    key: \"getPoint\",\n    value: function getPoint(ratio) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var points = this.parsedStyle.points.points;\n      if (this.parsedStyle.points.segments.length === 0) {\n        var segments = [];\n        var tempLength = 0;\n        var segmentT;\n        var segmentL;\n        var totalLength = this.getTotalLength();\n        points.forEach(function (p, i) {\n          if (points[i + 1]) {\n            segmentT = [0, 0];\n            segmentT[0] = tempLength / totalLength;\n            segmentL = lineLength(p[0], p[1], points[i + 1][0], points[i + 1][1]);\n            tempLength += segmentL;\n            segmentT[1] = tempLength / totalLength;\n            segments.push(segmentT);\n          }\n        });\n        this.parsedStyle.points.segments = segments;\n      }\n      var subt = 0;\n      var index = 0;\n      this.parsedStyle.points.segments.forEach(function (v, i) {\n        if (ratio >= v[0] && ratio <= v[1]) {\n          subt = (ratio - v[0]) / (v[1] - v[0]);\n          index = i;\n        }\n      });\n      var _linePointAt = linePointAt(points[index][0], points[index][1], points[index + 1][0], points[index + 1][1], subt),\n        x = _linePointAt.x,\n        y = _linePointAt.y;\n      var transformed = vec3.transformMat4(vec3.create(), vec3.fromValues(x, y, 0), inWorldSpace ? this.getWorldTransform() : this.getLocalTransform());\n\n      // apply local transformation\n      return new Point(transformed[0], transformed[1]);\n    }\n  }, {\n    key: \"getStartTangent\",\n    value: function getStartTangent() {\n      var points = this.parsedStyle.points.points;\n      var result = [];\n      result.push([points[1][0], points[1][1]]);\n      result.push([points[0][0], points[0][1]]);\n      return result;\n    }\n  }, {\n    key: \"getEndTangent\",\n    value: function getEndTangent() {\n      var points = this.parsedStyle.points.points;\n      var l = points.length - 1;\n      var result = [];\n      result.push([points[l - 1][0], points[l - 1][1]]);\n      result.push([points[l][0], points[l][1]]);\n      return result;\n    }\n  }]);\n}(Polygon);\nPolyline.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(Polygon.PARSED_STYLE_LIST), ['points', 'markerStart', 'markerMid', 'markerEnd', 'markerStartOffset', 'markerEndOffset', 'isBillboard']));\n\nvar Rect = /*#__PURE__*/function (_DisplayObject) {\n  function Rect() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Rect);\n    return _callSuper(this, Rect, [_objectSpread({\n      type: Shape.RECT\n    }, options)]);\n  }\n  _inherits(Rect, _DisplayObject);\n  return _createClass(Rect);\n}(DisplayObject);\nRect.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['x', 'y', 'z', 'width', 'height', 'isBillboard', 'isSizeAttenuation', 'radius']));\n\nvar _excluded = [\"style\"];\n/**\n * <text> @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextElement\n */\nvar Text = /*#__PURE__*/function (_DisplayObject) {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextContentElement#constants\n   */\n  // LENGTHADJUST_SPACING: number = 1;\n  // LENGTHADJUST_SPACINGANDGLYPHS: number = 2;\n  // LENGTHADJUST_UNKNOWN: number = 0;\n\n  function Text() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded);\n    _classCallCheck(this, Text);\n    return _callSuper(this, Text, [_objectSpread({\n      type: Shape.TEXT,\n      style: _objectSpread({\n        fill: 'black'\n      }, style)\n    }, rest)]);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextContentElement\n   */\n  _inherits(Text, _DisplayObject);\n  return _createClass(Text, [{\n    key: \"getComputedTextLength\",\n    value: function getComputedTextLength() {\n      var _this$parsedStyle$met;\n      this.getGeometryBounds();\n      return ((_this$parsedStyle$met = this.parsedStyle.metrics) === null || _this$parsedStyle$met === void 0 ? void 0 : _this$parsedStyle$met.maxLineWidth) || 0;\n    }\n  }, {\n    key: \"getLineBoundingRects\",\n    value: function getLineBoundingRects() {\n      var _this$parsedStyle$met2;\n      this.getGeometryBounds();\n      return ((_this$parsedStyle$met2 = this.parsedStyle.metrics) === null || _this$parsedStyle$met2 === void 0 ? void 0 : _this$parsedStyle$met2.lineMetrics) || [];\n    }\n  }, {\n    key: \"isOverflowing\",\n    value: function isOverflowing() {\n      this.getGeometryBounds();\n      return !!this.parsedStyle.isOverflowing;\n    }\n  }]);\n}(DisplayObject);\nText.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['x', 'y', 'z', 'isBillboard', 'billboardRotation', 'isSizeAttenuation', 'text', 'textAlign', 'textBaseline', 'fontStyle', 'fontSize', 'fontFamily', 'fontWeight', 'fontVariant', 'lineHeight', 'letterSpacing', 'leading', 'wordWrap', 'wordWrapWidth', 'maxLines', 'textOverflow', 'isOverflowing', 'textPath', 'textDecorationLine', 'textDecorationColor', 'textDecorationStyle', 'textPathSide', 'textPathStartOffset', 'metrics', 'dx', 'dy']));\n\n/**\n * canvas.customElements\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry\n */\nvar CustomElementRegistry = /*#__PURE__*/function () {\n  function CustomElementRegistry() {\n    _classCallCheck(this, CustomElementRegistry);\n    this.registry = {};\n    this.define(Shape.CIRCLE, Circle);\n    this.define(Shape.ELLIPSE, Ellipse);\n    this.define(Shape.RECT, Rect);\n    this.define(Shape.IMAGE, Image);\n    this.define(Shape.LINE, Line);\n    this.define(Shape.GROUP, Group);\n    this.define(Shape.PATH, Path);\n    this.define(Shape.POLYGON, Polygon);\n    this.define(Shape.POLYLINE, Polyline);\n    this.define(Shape.TEXT, Text);\n    this.define(Shape.HTML, HTML);\n  }\n  return _createClass(CustomElementRegistry, [{\n    key: \"define\",\n    value: function define(name, constructor) {\n      this.registry[name] = constructor;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/get\n     */\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      return this.registry[name];\n    }\n  }]);\n}();\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty#parameters\n */\n\n/**\n * holds useful CSS-related methods.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS\n *\n * * CSS Typed OM @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/factory_functions\n * * register property @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty\n * * CSS Layout API\n */\nvar CSS = {\n  /**\n   * <number>\n   * @see https://drafts.csswg.org/css-values-4/#number-value\n   */\n  number: function number(n) {\n    return new CSSUnitValue(n);\n  },\n  /**\n   * <percentage>\n   * @see https://drafts.csswg.org/css-values-4/#percentage-value\n   */\n  percent: function percent(n) {\n    return new CSSUnitValue(n, '%');\n  },\n  /**\n   * <length>\n   */\n  px: function px(n) {\n    return new CSSUnitValue(n, 'px');\n  },\n  /**\n   * <length>\n   */\n  em: function em(n) {\n    return new CSSUnitValue(n, 'em');\n  },\n  rem: function rem(n) {\n    return new CSSUnitValue(n, 'rem');\n  },\n  /**\n   * <angle>\n   */\n  deg: function deg(n) {\n    return new CSSUnitValue(n, 'deg');\n  },\n  /**\n   * <angle>\n   */\n  grad: function grad(n) {\n    return new CSSUnitValue(n, 'grad');\n  },\n  /**\n   * <angle>\n   */\n  rad: function rad(n) {\n    return new CSSUnitValue(n, 'rad');\n  },\n  /**\n   * <angle>\n   */\n  turn: function turn(n) {\n    return new CSSUnitValue(n, 'turn');\n  },\n  /**\n   * <time>\n   */\n  s: function s(n) {\n    return new CSSUnitValue(n, 's');\n  },\n  /**\n   * <time>\n   */\n  ms: function ms(n) {\n    return new CSSUnitValue(n, 'ms');\n  },\n  /**\n   * CSS Properties & Values API\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS_Properties_and_Values_API\n   * @see https://drafts.css-houdini.org/css-properties-values-api/#registering-custom-properties\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty\n   */\n  registerProperty: function registerProperty(definition) {\n    var name = definition.name,\n      inherits = definition.inherits,\n      interpolable = definition.interpolable,\n      initialValue = definition.initialValue,\n      syntax = definition.syntax;\n    runtime.styleValueRegistry.registerMetadata({\n      n: name,\n      inh: inherits,\n      \"int\": interpolable,\n      d: initialValue,\n      syntax: syntax\n    });\n  },\n  /**\n   * CSS Layout API\n   * register layout\n   *\n   * @see https://github.com/w3c/css-houdini-drafts/blob/main/css-layout-api/EXPLAINER.md\n   * @see https://developer.mozilla.org/en-US/docs/Web/Guide/Houdini#css_layout_api\n   */\n  registerLayout: function registerLayout(name, clazz) {\n    runtime.layoutRegistry.registerLayout(name, clazz);\n  }\n};\n\n/**\n * the entry of DOM tree\n * Document -> Node -> EventTarget\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document\n */\nvar Document = /*#__PURE__*/function (_Node) {\n  function Document() {\n    var _this;\n    _classCallCheck(this, Document);\n    _this = _callSuper(this, Document);\n    /**\n     * only document has defaultView, points to canvas,\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/defaultView\n     */\n    _this.defaultView = null;\n    _this.ownerDocument = null;\n    _this.nodeName = 'document';\n\n    // create timeline\n    try {\n      _this.timeline = new runtime.AnimationTimeline(_this);\n    } catch (_unused) {}\n\n    /**\n     * for inherited properties, the initial value is used on the root element only,\n     * as long as no specified value is supplied.\n     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/initial_value\n     */\n    var initialStyle = {};\n    BUILT_IN_PROPERTIES.forEach(function (_ref) {\n      var n = _ref.n,\n        inh = _ref.inh,\n        d = _ref.d;\n      if (inh && d) {\n        initialStyle[n] = isFunction(d) ? d(Shape.GROUP) : d;\n      }\n    });\n\n    // like <html> in DOM tree\n    _this.documentElement = new Group({\n      id: 'g-root',\n      style: initialStyle\n    });\n    _this.documentElement.ownerDocument = _this;\n    _this.documentElement.parentNode = _this;\n    _this.childNodes = [_this.documentElement];\n    return _this;\n  }\n  _inherits(Document, _Node);\n  return _createClass(Document, [{\n    key: \"children\",\n    get: function get() {\n      return this.childNodes;\n    }\n  }, {\n    key: \"childElementCount\",\n    get: function get() {\n      return this.childNodes.length;\n    }\n  }, {\n    key: \"firstElementChild\",\n    get: function get() {\n      return this.firstChild;\n    }\n  }, {\n    key: \"lastElementChild\",\n    get: function get() {\n      return this.lastChild;\n    }\n  }, {\n    key: \"createElement\",\n    value:\n    /**\n     * @example const circle = document.createElement('circle', { style: { r: 10 } });\n     */\n    function createElement(tagName, options) {\n      // @observablehq/plot will create <svg>\n      if (tagName === 'svg') {\n        return this.documentElement;\n      }\n\n      // d3 will use <tspan>\n      var clazz = this.defaultView.customElements.get(tagName);\n      if (!clazz) {\n        console.warn('Unsupported tagName: ', tagName);\n        clazz = tagName === 'tspan' ? Text : Group;\n      }\n      var shape = new clazz(options);\n      shape.ownerDocument = this;\n      return shape;\n    }\n  }, {\n    key: \"createElementNS\",\n    value: function createElementNS(namespaceURI, tagName, options) {\n      return this.createElement(tagName, options);\n    }\n  }, {\n    key: \"cloneNode\",\n    value: function cloneNode(deep) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      try {\n        this.documentElement.destroyChildren();\n        this.timeline.destroy();\n      } catch (_unused2) {}\n    }\n\n    /**\n     * Picking 2D graphics with RBush based on BBox, fast but inaccurate.\n     */\n  }, {\n    key: \"elementsFromBBox\",\n    value: function elementsFromBBox(minX, minY, maxX, maxY) {\n      var rBush = this.defaultView.context.rBushRoot;\n      var rBushNodes = rBush.search({\n        minX: minX,\n        minY: minY,\n        maxX: maxX,\n        maxY: maxY\n      });\n      var hitTestList = [];\n      rBushNodes.forEach(function (_ref2) {\n        var displayObject = _ref2.displayObject;\n        var _displayObject$parsed = displayObject.parsedStyle.pointerEvents,\n          pointerEvents = _displayObject$parsed === void 0 ? 'auto' : _displayObject$parsed;\n\n        // account for `visibility`\n        // @see https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\n        var isVisibilityAffected = ['auto', 'visiblepainted', 'visiblefill', 'visiblestroke', 'visible'].includes(pointerEvents);\n        if ((!isVisibilityAffected || isVisibilityAffected && displayObject.isVisible()) && !displayObject.isCulled() && displayObject.isInteractive()) {\n          hitTestList.push(displayObject);\n        }\n      });\n      // find group with max z-index\n      hitTestList.sort(function (a, b) {\n        return b.sortable.renderOrder - a.sortable.renderOrder;\n      });\n      return hitTestList;\n    }\n  }, {\n    key: \"elementFromPointSync\",\n    value: function elementFromPointSync(x, y) {\n      var _this$defaultView$can = this.defaultView.canvas2Viewport({\n          x: x,\n          y: y\n        }),\n        viewportX = _this$defaultView$can.x,\n        viewportY = _this$defaultView$can.y;\n      var _this$defaultView$get = this.defaultView.getConfig(),\n        width = _this$defaultView$get.width,\n        height = _this$defaultView$get.height;\n      // outside canvas' viewport\n      if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n        return null;\n      }\n      var _this$defaultView$vie = this.defaultView.viewport2Client({\n          x: viewportX,\n          y: viewportY\n        }),\n        clientX = _this$defaultView$vie.x,\n        clientY = _this$defaultView$vie.y;\n      var _this$defaultView$get2 = this.defaultView.getRenderingService().hooks.pickSync.call({\n          topmost: true,\n          position: {\n            x: x,\n            y: y,\n            viewportX: viewportX,\n            viewportY: viewportY,\n            clientX: clientX,\n            clientY: clientY\n          },\n          picked: []\n        }),\n        picked = _this$defaultView$get2.picked;\n      return picked && picked[0] || this.documentElement;\n    }\n\n    /**\n     * Do picking with API instead of triggering interactive events.\n     *\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementFromPoint\n     */\n  }, {\n    key: \"elementFromPoint\",\n    value: (function () {\n      var _elementFromPoint = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(x, y) {\n        var _this$defaultView$can2, viewportX, viewportY, _this$defaultView$get3, width, height, _this$defaultView$vie2, clientX, clientY, _yield$this$defaultVi, picked;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this$defaultView$can2 = this.defaultView.canvas2Viewport({\n                x: x,\n                y: y\n              }), viewportX = _this$defaultView$can2.x, viewportY = _this$defaultView$can2.y;\n              _this$defaultView$get3 = this.defaultView.getConfig(), width = _this$defaultView$get3.width, height = _this$defaultView$get3.height; // outside canvas' viewport\n              if (!(viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height)) {\n                _context.next = 4;\n                break;\n              }\n              return _context.abrupt(\"return\", null);\n            case 4:\n              _this$defaultView$vie2 = this.defaultView.viewport2Client({\n                x: viewportX,\n                y: viewportY\n              }), clientX = _this$defaultView$vie2.x, clientY = _this$defaultView$vie2.y;\n              _context.next = 7;\n              return this.defaultView.getRenderingService().hooks.pick.promise({\n                topmost: true,\n                position: {\n                  x: x,\n                  y: y,\n                  viewportX: viewportX,\n                  viewportY: viewportY,\n                  clientX: clientX,\n                  clientY: clientY\n                },\n                picked: []\n              });\n            case 7:\n              _yield$this$defaultVi = _context.sent;\n              picked = _yield$this$defaultVi.picked;\n              return _context.abrupt(\"return\", picked && picked[0] || this.documentElement);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function elementFromPoint(_x, _x2) {\n        return _elementFromPoint.apply(this, arguments);\n      }\n      return elementFromPoint;\n    }())\n  }, {\n    key: \"elementsFromPointSync\",\n    value: function elementsFromPointSync(x, y) {\n      var _this$defaultView$can3 = this.defaultView.canvas2Viewport({\n          x: x,\n          y: y\n        }),\n        viewportX = _this$defaultView$can3.x,\n        viewportY = _this$defaultView$can3.y;\n      var _this$defaultView$get4 = this.defaultView.getConfig(),\n        width = _this$defaultView$get4.width,\n        height = _this$defaultView$get4.height;\n      // outside canvas' viewport\n      if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n        return [];\n      }\n      var _this$defaultView$vie3 = this.defaultView.viewport2Client({\n          x: viewportX,\n          y: viewportY\n        }),\n        clientX = _this$defaultView$vie3.x,\n        clientY = _this$defaultView$vie3.y;\n      var _this$defaultView$get5 = this.defaultView.getRenderingService().hooks.pickSync.call({\n          topmost: false,\n          position: {\n            x: x,\n            y: y,\n            viewportX: viewportX,\n            viewportY: viewportY,\n            clientX: clientX,\n            clientY: clientY\n          },\n          picked: []\n        }),\n        picked = _this$defaultView$get5.picked;\n      if (picked[picked.length - 1] !== this.documentElement) {\n        picked.push(this.documentElement);\n      }\n      return picked;\n    }\n\n    /**\n     * Do picking with API instead of triggering interactive events.\n     *\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementsFromPoint\n     */\n  }, {\n    key: \"elementsFromPoint\",\n    value: (function () {\n      var _elementsFromPoint = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(x, y) {\n        var _this$defaultView$can4, viewportX, viewportY, _this$defaultView$get6, width, height, _this$defaultView$vie4, clientX, clientY, _yield$this$defaultVi2, picked;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$defaultView$can4 = this.defaultView.canvas2Viewport({\n                x: x,\n                y: y\n              }), viewportX = _this$defaultView$can4.x, viewportY = _this$defaultView$can4.y;\n              _this$defaultView$get6 = this.defaultView.getConfig(), width = _this$defaultView$get6.width, height = _this$defaultView$get6.height; // outside canvas' viewport\n              if (!(viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height)) {\n                _context2.next = 4;\n                break;\n              }\n              return _context2.abrupt(\"return\", []);\n            case 4:\n              _this$defaultView$vie4 = this.defaultView.viewport2Client({\n                x: viewportX,\n                y: viewportY\n              }), clientX = _this$defaultView$vie4.x, clientY = _this$defaultView$vie4.y;\n              _context2.next = 7;\n              return this.defaultView.getRenderingService().hooks.pick.promise({\n                topmost: false,\n                position: {\n                  x: x,\n                  y: y,\n                  viewportX: viewportX,\n                  viewportY: viewportY,\n                  clientX: clientX,\n                  clientY: clientY\n                },\n                picked: []\n              });\n            case 7:\n              _yield$this$defaultVi2 = _context2.sent;\n              picked = _yield$this$defaultVi2.picked;\n              if (picked[picked.length - 1] !== this.documentElement) {\n                picked.push(this.documentElement);\n              }\n              return _context2.abrupt(\"return\", picked);\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function elementsFromPoint(_x3, _x4) {\n        return _elementsFromPoint.apply(this, arguments);\n      }\n      return elementsFromPoint;\n    }()\n    /**\n     * eg. Uncaught DOMException: Failed to execute 'appendChild' on 'Node': Only one element on document allowed.\n     */\n    )\n  }, {\n    key: \"appendChild\",\n    value: function appendChild(newChild, index) {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n  }, {\n    key: \"insertBefore\",\n    value: function insertBefore(newChild, refChild) {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(oldChild, destroy) {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n  }, {\n    key: \"replaceChild\",\n    value: function replaceChild(newChild, oldChild, destroy) {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n  }, {\n    key: \"append\",\n    value: function append() {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n  }, {\n    key: \"prepend\",\n    value: function prepend() {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n\n    /**\n     * Execute query on documentElement.\n     */\n  }, {\n    key: \"getElementById\",\n    value: function getElementById(id) {\n      return this.documentElement.getElementById(id);\n    }\n  }, {\n    key: \"getElementsByName\",\n    value: function getElementsByName(name) {\n      return this.documentElement.getElementsByName(name);\n    }\n  }, {\n    key: \"getElementsByTagName\",\n    value: function getElementsByTagName(tagName) {\n      return this.documentElement.getElementsByTagName(tagName);\n    }\n  }, {\n    key: \"getElementsByClassName\",\n    value: function getElementsByClassName(className) {\n      return this.documentElement.getElementsByClassName(className);\n    }\n  }, {\n    key: \"querySelector\",\n    value: function querySelector(selectors) {\n      return this.documentElement.querySelector(selectors);\n    }\n  }, {\n    key: \"querySelectorAll\",\n    value: function querySelectorAll(selectors) {\n      return this.documentElement.querySelectorAll(selectors);\n    }\n  }, {\n    key: \"find\",\n    value: function find(filter) {\n      return this.documentElement.find(filter);\n    }\n  }, {\n    key: \"findAll\",\n    value: function findAll(filter) {\n      return this.documentElement.findAll(filter);\n    }\n  }]);\n}(Node);\n\n/**\n * apply following rules:\n * 1. `visibility` in scenegraph node\n * 2. other custom culling strategies, eg. frustum culling\n */\nvar CullingPlugin = /*#__PURE__*/function () {\n  function CullingPlugin(strategies) {\n    _classCallCheck(this, CullingPlugin);\n    this.strategies = strategies;\n  }\n  return _createClass(CullingPlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var camera = context.camera,\n        renderingService = context.renderingService,\n        renderingContext = context.renderingContext;\n      var strategies = this.strategies;\n      renderingService.hooks.cull.tap(CullingPlugin.tag, function (object) {\n        if (object) {\n          var cullable = object.cullable;\n          // cullable.visible = true;\n          // const renderBounds = object.getRenderBounds();\n          // if (AABB.isEmpty(renderBounds)) {\n          //   cullable.visible = false;\n          // } else {\n          //   const isShape2D = shape2D.indexOf(object.nodeName as Shape) > -1;\n          //   const [p0, p1, p2, p3] = camera.getFrustum().planes;\n          //   tmpAABB.setMinMax([-p1.distance, -p3.distance, 0], [p0.distance, p2.distance, 0]);\n\n          //   cullable.visible = isShape2D ? renderBounds.intersects(tmpAABB) : true;\n          // }\n\n          if (strategies.length === 0) {\n            cullable.visible = renderingContext.unculledEntities.indexOf(object.entity) > -1;\n          } else {\n            // eg. implemented by g-webgl(frustum culling)\n            cullable.visible = strategies.every(function (strategy) {\n              return strategy.isVisible(camera, object);\n            });\n          }\n          if (!object.isCulled() && object.isVisible()) {\n            return object;\n          }\n          // if (this.renderingContext.renderListLastFrame.indexOf(object) > -1) {\n          object.dispatchEvent(new CustomEvent(ElementEvent.CULLED));\n          // }\n\n          return null;\n        }\n        return object;\n      });\n      renderingService.hooks.afterRender.tap(CullingPlugin.tag, function (object) {\n        object.cullable.visibilityPlaneMask = -1;\n      });\n    }\n  }]);\n}();\nCullingPlugin.tag = 'Culling';\n\n/**\n * support mouse & touch events\n * @see https://github.com/pixijs/pixi.js/blob/dev/packages/interaction/README.md\n *\n * also provide some extra events such as `drag`\n */\nvar EventPlugin = /*#__PURE__*/function () {\n  function EventPlugin() {\n    var _this = this;\n    _classCallCheck(this, EventPlugin);\n    this.autoPreventDefault = false;\n    this.rootPointerEvent = new FederatedPointerEvent(null);\n    this.rootWheelEvent = new FederatedWheelEvent(null);\n    this.onPointerMove = function (nativeEvent) {\n      var _this$context$renderi;\n      var canvas = (_this$context$renderi = _this.context.renderingContext.root) === null || _this$context$renderi === void 0 || (_this$context$renderi = _this$context$renderi.ownerDocument) === null || _this$context$renderi === void 0 ? void 0 : _this$context$renderi.defaultView;\n      if (canvas.supportsTouchEvents && nativeEvent.pointerType === 'touch') return;\n      var normalizedEvents = _this.normalizeToPointerEvent(nativeEvent, canvas);\n      var _iterator = _createForOfIteratorHelper(normalizedEvents),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var normalizedEvent = _step.value;\n          var event = _this.bootstrapEvent(_this.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n          _this.context.eventService.mapEvent(event);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      _this.setCursor(_this.context.eventService.cursor);\n    };\n    this.onClick = function (nativeEvent) {\n      var _this$context$renderi2;\n      var canvas = (_this$context$renderi2 = _this.context.renderingContext.root) === null || _this$context$renderi2 === void 0 || (_this$context$renderi2 = _this$context$renderi2.ownerDocument) === null || _this$context$renderi2 === void 0 ? void 0 : _this$context$renderi2.defaultView;\n      var normalizedEvents = _this.normalizeToPointerEvent(nativeEvent, canvas);\n      var _iterator2 = _createForOfIteratorHelper(normalizedEvents),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var normalizedEvent = _step2.value;\n          var event = _this.bootstrapEvent(_this.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n          _this.context.eventService.mapEvent(event);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      _this.setCursor(_this.context.eventService.cursor);\n    };\n  }\n  return _createClass(EventPlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var _this2 = this;\n      this.context = context;\n      var renderingService = context.renderingService;\n      var canvas = this.context.renderingContext.root.ownerDocument.defaultView;\n      this.context.eventService.setPickHandler(function (position) {\n        var _this2$context$render = _this2.context.renderingService.hooks.pickSync.call({\n            position: position,\n            picked: [],\n            topmost: true // we only concern the topmost element\n          }),\n          picked = _this2$context$render.picked;\n        return picked[0] || null;\n      });\n      renderingService.hooks.pointerWheel.tap(EventPlugin.tag, function (nativeEvent) {\n        var wheelEvent = _this2.normalizeWheelEvent(nativeEvent);\n        _this2.context.eventService.mapEvent(wheelEvent);\n      });\n      renderingService.hooks.pointerDown.tap(EventPlugin.tag, function (nativeEvent) {\n        if (canvas.supportsTouchEvents && nativeEvent.pointerType === 'touch') return;\n        var events = _this2.normalizeToPointerEvent(nativeEvent, canvas);\n        if (_this2.autoPreventDefault && events[0].isNormalized) {\n          var cancelable = nativeEvent.cancelable || !('cancelable' in nativeEvent);\n          if (cancelable) {\n            nativeEvent.preventDefault();\n          }\n        }\n        var _iterator3 = _createForOfIteratorHelper(events),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var event = _step3.value;\n            var federatedEvent = _this2.bootstrapEvent(_this2.rootPointerEvent, event, canvas, nativeEvent);\n            _this2.context.eventService.mapEvent(federatedEvent);\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n        _this2.setCursor(_this2.context.eventService.cursor);\n      });\n      renderingService.hooks.pointerUp.tap(EventPlugin.tag, function (nativeEvent) {\n        if (canvas.supportsTouchEvents && nativeEvent.pointerType === 'touch') return;\n\n        // account for element in SVG\n        var $element = _this2.context.contextService.getDomElement();\n        var isNativeEventFromCanvas = _this2.context.eventService.isNativeEventFromCanvas($element, nativeEvent);\n        var outside = !isNativeEventFromCanvas ? 'outside' : '';\n        var normalizedEvents = _this2.normalizeToPointerEvent(nativeEvent, canvas);\n        var _iterator4 = _createForOfIteratorHelper(normalizedEvents),\n          _step4;\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var normalizedEvent = _step4.value;\n            var event = _this2.bootstrapEvent(_this2.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n            event.type += outside;\n            _this2.context.eventService.mapEvent(event);\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n        _this2.setCursor(_this2.context.eventService.cursor);\n      });\n      renderingService.hooks.pointerMove.tap(EventPlugin.tag, this.onPointerMove);\n      renderingService.hooks.pointerOver.tap(EventPlugin.tag, this.onPointerMove);\n      renderingService.hooks.pointerOut.tap(EventPlugin.tag, this.onPointerMove);\n      renderingService.hooks.click.tap(EventPlugin.tag, this.onClick);\n      renderingService.hooks.pointerCancel.tap(EventPlugin.tag, function (nativeEvent) {\n        var normalizedEvents = _this2.normalizeToPointerEvent(nativeEvent, canvas);\n        var _iterator5 = _createForOfIteratorHelper(normalizedEvents),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var normalizedEvent = _step5.value;\n            var event = _this2.bootstrapEvent(_this2.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n            _this2.context.eventService.mapEvent(event);\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n        _this2.setCursor(_this2.context.eventService.cursor);\n      });\n    }\n  }, {\n    key: \"bootstrapEvent\",\n    value: function bootstrapEvent(event, normalizedEvent, view, nativeEvent) {\n      event.view = view;\n      event.originalEvent = null;\n      event.nativeEvent = nativeEvent;\n      event.pointerId = normalizedEvent.pointerId;\n      event.width = normalizedEvent.width;\n      event.height = normalizedEvent.height;\n      event.isPrimary = normalizedEvent.isPrimary;\n      event.pointerType = normalizedEvent.pointerType;\n      event.pressure = normalizedEvent.pressure;\n      event.tangentialPressure = normalizedEvent.tangentialPressure;\n      event.tiltX = normalizedEvent.tiltX;\n      event.tiltY = normalizedEvent.tiltY;\n      event.twist = normalizedEvent.twist;\n      this.transferMouseData(event, normalizedEvent);\n      var _this$context$eventSe = this.context.eventService.client2Viewport({\n          x: normalizedEvent.clientX,\n          y: normalizedEvent.clientY\n        }),\n        x = _this$context$eventSe.x,\n        y = _this$context$eventSe.y;\n      event.viewport.x = x;\n      event.viewport.y = y;\n      var _this$context$eventSe2 = this.context.eventService.viewport2Canvas(event.viewport),\n        canvasX = _this$context$eventSe2.x,\n        canvasY = _this$context$eventSe2.y;\n      event.canvas.x = canvasX;\n      event.canvas.y = canvasY;\n      event.global.copyFrom(event.canvas);\n      event.offset.copyFrom(event.canvas);\n      event.isTrusted = nativeEvent.isTrusted;\n      if (event.type === 'pointerleave') {\n        event.type = 'pointerout';\n      }\n      if (event.type.startsWith('mouse')) {\n        event.type = event.type.replace('mouse', 'pointer');\n      }\n      if (event.type.startsWith('touch')) {\n        event.type = TOUCH_TO_POINTER[event.type] || event.type;\n      }\n      return event;\n    }\n  }, {\n    key: \"normalizeWheelEvent\",\n    value: function normalizeWheelEvent(nativeEvent) {\n      var event = this.rootWheelEvent;\n      this.transferMouseData(event, nativeEvent);\n      event.deltaMode = nativeEvent.deltaMode;\n      event.deltaX = nativeEvent.deltaX;\n      event.deltaY = nativeEvent.deltaY;\n      event.deltaZ = nativeEvent.deltaZ;\n      var _this$context$eventSe3 = this.context.eventService.client2Viewport({\n          x: nativeEvent.clientX,\n          y: nativeEvent.clientY\n        }),\n        x = _this$context$eventSe3.x,\n        y = _this$context$eventSe3.y;\n      event.viewport.x = x;\n      event.viewport.y = y;\n      var _this$context$eventSe4 = this.context.eventService.viewport2Canvas(event.viewport),\n        canvasX = _this$context$eventSe4.x,\n        canvasY = _this$context$eventSe4.y;\n      event.canvas.x = canvasX;\n      event.canvas.y = canvasY;\n      event.global.copyFrom(event.canvas);\n      event.offset.copyFrom(event.canvas);\n      event.nativeEvent = nativeEvent;\n      event.type = nativeEvent.type;\n      return event;\n    }\n\n    /**\n     * Transfers base & mouse event data from the nativeEvent to the federated event.\n     */\n  }, {\n    key: \"transferMouseData\",\n    value: function transferMouseData(event, nativeEvent) {\n      event.isTrusted = nativeEvent.isTrusted;\n      event.srcElement = nativeEvent.srcElement;\n      event.timeStamp = clock.now();\n      event.type = nativeEvent.type;\n      event.altKey = nativeEvent.altKey;\n      event.metaKey = nativeEvent.metaKey;\n      event.shiftKey = nativeEvent.shiftKey;\n      event.ctrlKey = nativeEvent.ctrlKey;\n      event.button = nativeEvent.button;\n      event.buttons = nativeEvent.buttons;\n      event.client.x = nativeEvent.clientX;\n      event.client.y = nativeEvent.clientY;\n      event.movement.x = nativeEvent.movementX;\n      event.movement.y = nativeEvent.movementY;\n      event.page.x = nativeEvent.pageX;\n      event.page.y = nativeEvent.pageY;\n      event.screen.x = nativeEvent.screenX;\n      event.screen.y = nativeEvent.screenY;\n      event.relatedTarget = null;\n    }\n  }, {\n    key: \"setCursor\",\n    value: function setCursor(cursor) {\n      this.context.contextService.applyCursorStyle(cursor || this.context.config.cursor || 'default');\n    }\n  }, {\n    key: \"normalizeToPointerEvent\",\n    value: function normalizeToPointerEvent(event, canvas) {\n      var normalizedEvents = [];\n      if (canvas.isTouchEvent(event)) {\n        for (var i = 0; i < event.changedTouches.length; i++) {\n          var touch = event.changedTouches[i];\n\n          // use changedTouches instead of touches since touchend has no touches\n          // @see https://stackoverflow.com/a/10079076\n          if (isUndefined(touch.button)) touch.button = 0;\n          if (isUndefined(touch.buttons)) touch.buttons = 1;\n          if (isUndefined(touch.isPrimary)) {\n            touch.isPrimary = event.touches.length === 1 && event.type === 'touchstart';\n          }\n          if (isUndefined(touch.width)) touch.width = touch.radiusX || 1;\n          if (isUndefined(touch.height)) touch.height = touch.radiusY || 1;\n          if (isUndefined(touch.tiltX)) touch.tiltX = 0;\n          if (isUndefined(touch.tiltY)) touch.tiltY = 0;\n          if (isUndefined(touch.pointerType)) touch.pointerType = 'touch';\n          // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Touch/identifier\n          if (isUndefined(touch.pointerId)) touch.pointerId = touch.identifier || 0;\n          if (isUndefined(touch.pressure)) touch.pressure = touch.force || 0.5;\n          if (isUndefined(touch.twist)) touch.twist = 0;\n          if (isUndefined(touch.tangentialPressure)) touch.tangentialPressure = 0;\n          touch.isNormalized = true;\n          touch.type = event.type;\n          normalizedEvents.push(touch);\n        }\n      } else if (canvas.isMouseEvent(event)) {\n        var tempEvent = event;\n        if (isUndefined(tempEvent.isPrimary)) tempEvent.isPrimary = true;\n        if (isUndefined(tempEvent.width)) tempEvent.width = 1;\n        if (isUndefined(tempEvent.height)) tempEvent.height = 1;\n        if (isUndefined(tempEvent.tiltX)) tempEvent.tiltX = 0;\n        if (isUndefined(tempEvent.tiltY)) tempEvent.tiltY = 0;\n        if (isUndefined(tempEvent.pointerType)) tempEvent.pointerType = 'mouse';\n        if (isUndefined(tempEvent.pointerId)) tempEvent.pointerId = MOUSE_POINTER_ID;\n        if (isUndefined(tempEvent.pressure)) tempEvent.pressure = 0.5;\n        if (isUndefined(tempEvent.twist)) tempEvent.twist = 0;\n        if (isUndefined(tempEvent.tangentialPressure)) tempEvent.tangentialPressure = 0;\n        tempEvent.isNormalized = true;\n        normalizedEvents.push(tempEvent);\n      } else {\n        normalizedEvents.push(event);\n      }\n      return normalizedEvents;\n    }\n  }]);\n}();\nEventPlugin.tag = 'Event';\n\n// group is not a 2d shape\nvar shape2D = [Shape.CIRCLE, Shape.ELLIPSE, Shape.IMAGE, Shape.RECT, Shape.LINE, Shape.POLYLINE, Shape.POLYGON, Shape.TEXT, Shape.PATH, Shape.HTML];\nvar FrustumCullingStrategy = /*#__PURE__*/function () {\n  function FrustumCullingStrategy() {\n    _classCallCheck(this, FrustumCullingStrategy);\n  }\n  return _createClass(FrustumCullingStrategy, [{\n    key: \"isVisible\",\n    value: function isVisible(camera, object) {\n      var _object$parentNode;\n      // return true;\n\n      var cullable = object.cullable;\n      if (!cullable.enable) {\n        return true;\n      }\n      var renderBounds = object.getRenderBounds();\n      if (AABB.isEmpty(renderBounds)) {\n        return false;\n      }\n\n      // get VP matrix from camera\n      var frustum = camera.getFrustum();\n      var parentVisibilityPlaneMask = (_object$parentNode = object.parentNode) === null || _object$parentNode === void 0 || (_object$parentNode = _object$parentNode.cullable) === null || _object$parentNode === void 0 ? void 0 : _object$parentNode.visibilityPlaneMask;\n      cullable.visibilityPlaneMask = this.computeVisibilityWithPlaneMask(object, renderBounds, parentVisibilityPlaneMask || Mask.INDETERMINATE, frustum.planes);\n      cullable.visible = cullable.visibilityPlaneMask !== Mask.OUTSIDE;\n      return cullable.visible;\n    }\n\n    /**\n     *\n     * @seeOptimized View Frustum Culling Algorithms for Bounding Boxes\n     * @see https://github.com/antvis/GWebGPUEngine/issues/3\n     *\n     * *  the basic intersection test\n     * *  masking @see https://cesium.com/blog/2015/08/04/fast-hierarchical-culling/\n     * * TODO:  the plane-coherency test\n     * * TODO:  mesh  Babylon.js @see https://doc.babylonjs.com/how_to/optimizing_your_scene#changing-mesh-culling-strategy\n     *\n     * @param aabb aabb\n     * @param parentPlaneMask mask of parent\n     * @param planes planes of frustum\n     */\n  }, {\n    key: \"computeVisibilityWithPlaneMask\",\n    value: function computeVisibilityWithPlaneMask(object, aabb, parentPlaneMask, planes) {\n      if (parentPlaneMask === Mask.OUTSIDE || parentPlaneMask === Mask.INSIDE) {\n        // \n        return parentPlaneMask;\n      }\n\n      // Start with MASK_INSIDE (all zeros) so that after the loop, the return value can be compared with MASK_INSIDE.\n      // (Because if there are fewer than 31 planes, the upper bits wont be changed.)\n      var mask = Mask.INSIDE;\n      var isShape2D = shape2D.indexOf(object.nodeName) > -1;\n\n      // Use viewport culling for 2D shapes\n      // @see https://github.com/antvis/g/issues/914\n      for (var k = 0, len = planes.length; k < len; ++k) {\n        // For k greater than 31 (since 31 is the maximum number of INSIDE/INTERSECTING bits we can store), skip the optimization.\n        var flag = 1 << k;\n        if ((parentPlaneMask & flag) === 0) {\n          // \n          continue;\n        }\n\n        // skip near & far planes when testing 2D shapes\n        if (isShape2D && (k === 4 || k === 5)) {\n          continue;\n        }\n\n        // p-vertex n-vertex <-|plane p-vertex n-vertex\n        //  p-vertex  n-vertex  aabb \n        var _planes$k = planes[k],\n          normal = _planes$k.normal,\n          distance = _planes$k.distance;\n        if (vec3.dot(normal, aabb.getPositiveFarPoint(planes[k])) + distance < 0) {\n          return Mask.OUTSIDE;\n        }\n        if (vec3.dot(normal, aabb.getNegativeFarPoint(planes[k])) + distance < 0) {\n          // 1\n          mask |= flag;\n        }\n      }\n      return mask;\n    }\n  }]);\n}();\n\nvar PrepareRendererPlugin = /*#__PURE__*/function () {\n  function PrepareRendererPlugin() {\n    _classCallCheck(this, PrepareRendererPlugin);\n    this.syncTasks = new Map();\n    this.isFirstTimeRendering = true;\n    this.syncing = false;\n    this.isFirstTimeRenderingFinished = false;\n  }\n  return _createClass(PrepareRendererPlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var _this = this,\n        _runtime$globalThis$r;\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext,\n        rBushRoot = context.rBushRoot;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      this.rBush = rBushRoot;\n      var handleAttributeChanged = function handleAttributeChanged(e) {\n        var object = e.target;\n        object.renderable.dirty = true;\n        renderingService.dirtify();\n      };\n      var handleBoundsChanged = function handleBoundsChanged(e) {\n        _this.syncTasks.set(e.target, e.detail.affectChildren);\n        renderingService.dirtify();\n      };\n      var handleMounted = function handleMounted(e) {\n        var object = e.target;\n        if (runtime.enableSizeAttenuation) {\n          runtime.styleValueRegistry.updateSizeAttenuation(object, canvas.getCamera().getZoom());\n        }\n      };\n      var handleUnmounted = function handleUnmounted(e) {\n        var object = e.target;\n        var rBushNode = object.rBushNode;\n        if (rBushNode.aabb) {\n          _this.rBush.remove(rBushNode.aabb);\n        }\n        _this.syncTasks[\"delete\"](object);\n        runtime.sceneGraphService.dirtifyToRoot(object);\n        renderingService.dirtify();\n      };\n      renderingService.hooks.init.tap(PrepareRendererPlugin.tag, function () {\n        canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.addEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n      });\n      renderingService.hooks.destroy.tap(PrepareRendererPlugin.tag, function () {\n        canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.removeEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        canvas.removeEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n        _this.syncTasks.clear();\n      });\n      var ric = (_runtime$globalThis$r = runtime.globalThis.requestIdleCallback) !== null && _runtime$globalThis$r !== void 0 ? _runtime$globalThis$r : raf.bind(runtime.globalThis);\n      renderingService.hooks.endFrame.tap(PrepareRendererPlugin.tag, function () {\n        if (_this.isFirstTimeRendering) {\n          _this.isFirstTimeRendering = false;\n          _this.syncing = true;\n          ric(function () {\n            _this.syncRTree(true);\n            _this.isFirstTimeRenderingFinished = true;\n          });\n        } else {\n          _this.syncRTree();\n        }\n      });\n    }\n  }, {\n    key: \"syncNode\",\n    value: function syncNode(node) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!node.isConnected) return;\n      var rBushNode = node.rBushNode;\n\n      // clear dirty node\n      if (rBushNode.aabb) this.rBush.remove(rBushNode.aabb);\n      var renderBounds = node.getRenderBounds();\n      if (renderBounds) {\n        var renderable = node.renderable;\n        if (force) {\n          if (!renderable.dirtyRenderBounds) {\n            renderable.dirtyRenderBounds = new AABB();\n          }\n          // save last dirty aabb\n          renderable.dirtyRenderBounds.update(renderBounds.center, renderBounds.halfExtents);\n        }\n        var _renderBounds$getMin = renderBounds.getMin(),\n          _renderBounds$getMin2 = _slicedToArray(_renderBounds$getMin, 2),\n          minX = _renderBounds$getMin2[0],\n          minY = _renderBounds$getMin2[1];\n        var _renderBounds$getMax = renderBounds.getMax(),\n          _renderBounds$getMax2 = _slicedToArray(_renderBounds$getMax, 2),\n          maxX = _renderBounds$getMax2[0],\n          maxY = _renderBounds$getMax2[1];\n        if (!rBushNode.aabb) {\n          rBushNode.aabb = {};\n        }\n        rBushNode.aabb.displayObject = node;\n        rBushNode.aabb.minX = minX;\n        rBushNode.aabb.minY = minY;\n        rBushNode.aabb.maxX = maxX;\n        rBushNode.aabb.maxY = maxY;\n      }\n      if (rBushNode.aabb) {\n        // TODO: NaN occurs when width/height of Rect is 0\n        if (!isNaN(rBushNode.aabb.maxX) && !isNaN(rBushNode.aabb.maxX) && !isNaN(rBushNode.aabb.minX) && !isNaN(rBushNode.aabb.minY)) {\n          return rBushNode.aabb;\n        }\n      }\n    }\n  }, {\n    key: \"syncRTree\",\n    value: function syncRTree() {\n      var _this2 = this;\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!force && (this.syncing || this.syncTasks.size === 0)) {\n        return;\n      }\n      this.syncing = true;\n\n      // bounds changed, need re-inserting its children\n      var bulk = [];\n      var synced = new Set();\n      var sync = function sync(node) {\n        if (!synced.has(node) && node.renderable) {\n          var aabb = _this2.syncNode(node, force);\n          if (aabb) {\n            bulk.push(aabb);\n            synced.add(node);\n          }\n        }\n      };\n      this.syncTasks.forEach(function (affectChildren, node) {\n        if (affectChildren) {\n          node.forEach(sync);\n        }\n        var parent = node;\n        while (parent) {\n          sync(parent);\n          parent = parent.parentElement;\n        }\n      });\n\n      // use bulk inserting, which is ~2-3 times faster\n      // @see https://github.com/mourner/rbush#bulk-inserting-data\n      this.rBush.load(bulk);\n      bulk.length = 0;\n      this.syncing = false;\n    }\n  }]);\n}();\nPrepareRendererPlugin.tag = 'Prepare';\n\nfunction isCanvas(value) {\n  return !!value.document;\n}\nvar CanvasEvent = /*#__PURE__*/function (CanvasEvent) {\n  CanvasEvent[\"READY\"] = \"ready\";\n  CanvasEvent[\"BEFORE_RENDER\"] = \"beforerender\";\n  CanvasEvent[\"RERENDER\"] = \"rerender\";\n  CanvasEvent[\"AFTER_RENDER\"] = \"afterrender\";\n  CanvasEvent[\"BEFORE_DESTROY\"] = \"beforedestroy\";\n  CanvasEvent[\"AFTER_DESTROY\"] = \"afterdestroy\";\n  CanvasEvent[\"RESIZE\"] = \"resize\";\n  CanvasEvent[\"DIRTY_RECTANGLE\"] = \"dirtyrectangle\";\n  CanvasEvent[\"RENDERER_CHANGED\"] = \"rendererchanged\";\n  return CanvasEvent;\n}({});\nvar DEFAULT_CAMERA_Z = 500;\nvar DEFAULT_CAMERA_NEAR = 0.1;\nvar DEFAULT_CAMERA_FAR = 1000;\n\n/**\n * reuse custom event preventing from re-create them in every frame\n */\nvar mountedEvent = new CustomEvent(ElementEvent.MOUNTED);\nvar unmountedEvent = new CustomEvent(ElementEvent.UNMOUNTED);\nvar beforeRenderEvent = new CustomEvent(CanvasEvent.BEFORE_RENDER);\nvar rerenderEvent = new CustomEvent(CanvasEvent.RERENDER);\nvar afterRenderEvent = new CustomEvent(CanvasEvent.AFTER_RENDER);\n\n/**\n * can be treated like Window in DOM\n * provide some extra methods like `window`, such as:\n * * `window.requestAnimationFrame`\n * * `window.devicePixelRatio`\n *\n * prototype chains: Canvas(Window) -> EventTarget\n *\n * @docs https://g.antv.antgroup.com/api/canvas/intro\n */\nvar Canvas = /*#__PURE__*/function (_EventTarget) {\n  function Canvas(config) {\n    var _this;\n    _classCallCheck(this, Canvas);\n    _this = _callSuper(this, Canvas);\n    // #region environment\n    /**\n     * window.document\n     */\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element\n     */\n    _this.Element = DisplayObject;\n    _this.inited = false;\n    _this.context = {};\n    var container = config.container,\n      canvas = config.canvas,\n      renderer = config.renderer,\n      width = config.width,\n      height = config.height,\n      background = config.background,\n      cursor = config.cursor,\n      supportsMutipleCanvasesInOneContainer = config.supportsMutipleCanvasesInOneContainer,\n      _config$cleanUpOnDest = config.cleanUpOnDestroy,\n      cleanUpOnDestroy = _config$cleanUpOnDest === void 0 ? true : _config$cleanUpOnDest,\n      offscreenCanvas = config.offscreenCanvas,\n      devicePixelRatio = config.devicePixelRatio,\n      requestAnimationFrame = config.requestAnimationFrame,\n      cancelAnimationFrame = config.cancelAnimationFrame,\n      createImage = config.createImage,\n      supportsTouchEvents = config.supportsTouchEvents,\n      supportsPointerEvents = config.supportsPointerEvents,\n      isTouchEvent = config.isTouchEvent,\n      isMouseEvent = config.isMouseEvent,\n      dblClickSpeed = config.dblClickSpeed;\n    var canvasWidth = width;\n    var canvasHeight = height;\n    var dpr = devicePixelRatio || isBrowser && window.devicePixelRatio || 1;\n    dpr = dpr >= 1 ? Math.ceil(dpr) : 1;\n\n    // use user-defined <canvas> or OffscreenCanvas\n    if (canvas) {\n      // infer width & height with dpr\n      canvasWidth = width || getWidth(canvas) || canvas.width / dpr;\n      canvasHeight = height || getHeight(canvas) || canvas.height / dpr;\n    }\n\n    /**\n     * implements `Window` interface\n     */\n    _this.customElements = new CustomElementRegistry();\n    _this.devicePixelRatio = dpr;\n    _this.requestAnimationFrame = requestAnimationFrame !== null && requestAnimationFrame !== void 0 ? requestAnimationFrame : raf.bind(runtime.globalThis);\n    _this.cancelAnimationFrame = cancelAnimationFrame !== null && cancelAnimationFrame !== void 0 ? cancelAnimationFrame : caf.bind(runtime.globalThis);\n    // the following feature-detect from hammer.js\n    // @see https://github.com/hammerjs/hammer.js/blob/master/src/inputjs/input-consts.js#L5\n    _this.supportsTouchEvents = supportsTouchEvents !== null && supportsTouchEvents !== void 0 ? supportsTouchEvents : 'ontouchstart' in runtime.globalThis;\n    _this.supportsPointerEvents = supportsPointerEvents !== null && supportsPointerEvents !== void 0 ? supportsPointerEvents : !!runtime.globalThis.PointerEvent;\n    _this.isTouchEvent = isTouchEvent !== null && isTouchEvent !== void 0 ? isTouchEvent : function (event) {\n      return _this.supportsTouchEvents && event instanceof runtime.globalThis.TouchEvent;\n    };\n    _this.isMouseEvent = isMouseEvent !== null && isMouseEvent !== void 0 ? isMouseEvent : function (event) {\n      return !runtime.globalThis.MouseEvent || event instanceof runtime.globalThis.MouseEvent && (!_this.supportsPointerEvents || !(event instanceof runtime.globalThis.PointerEvent));\n    };\n\n    // override it in runtime\n    if (offscreenCanvas) {\n      runtime.offscreenCanvas = offscreenCanvas;\n    }\n\n    // create document\n    _this.document = new Document();\n    _this.document.defaultView = _this;\n    if (!supportsMutipleCanvasesInOneContainer) {\n      cleanExistedCanvas(container, _this, cleanUpOnDestroy);\n    }\n    _this.initRenderingContext(_objectSpread(_objectSpread({}, config), {}, {\n      width: canvasWidth,\n      height: canvasHeight,\n      background: background !== null && background !== void 0 ? background : 'transparent',\n      cursor: cursor !== null && cursor !== void 0 ? cursor : 'default',\n      cleanUpOnDestroy: cleanUpOnDestroy,\n      devicePixelRatio: dpr,\n      requestAnimationFrame: _this.requestAnimationFrame,\n      cancelAnimationFrame: _this.cancelAnimationFrame,\n      supportsTouchEvents: _this.supportsTouchEvents,\n      supportsPointerEvents: _this.supportsPointerEvents,\n      isTouchEvent: _this.isTouchEvent,\n      isMouseEvent: _this.isMouseEvent,\n      dblClickSpeed: dblClickSpeed !== null && dblClickSpeed !== void 0 ? dblClickSpeed : 200,\n      createImage: createImage !== null && createImage !== void 0 ? createImage : function () {\n        return new window.Image();\n      }\n    }));\n    _this.initDefaultCamera(canvasWidth, canvasHeight, renderer.clipSpaceNearZ);\n    _this.initRenderer(renderer, true);\n    return _this;\n  }\n  _inherits(Canvas, _EventTarget);\n  return _createClass(Canvas, [{\n    key: \"initRenderingContext\",\n    value: function initRenderingContext(mergedConfig) {\n      this.context.config = mergedConfig;\n\n      // bind rendering context, shared by all renderers\n      this.context.renderingContext = {\n        /**\n         * the root node in scene graph\n         */\n        root: this.document.documentElement,\n        renderListCurrentFrame: [],\n        unculledEntities: [],\n        renderReasons: new Set(),\n        force: false,\n        dirty: false\n      };\n    }\n  }, {\n    key: \"initDefaultCamera\",\n    value: function initDefaultCamera(width, height, clipSpaceNearZ) {\n      var _this2 = this;\n      // set a default ortho camera\n      var camera = new runtime.CameraContribution();\n      camera.clipSpaceNearZ = clipSpaceNearZ;\n      camera.setType(CameraType.EXPLORING, CameraTrackingMode.DEFAULT).setPosition(width / 2, height / 2, DEFAULT_CAMERA_Z).setFocalPoint(width / 2, height / 2, 0).setOrthographic(width / -2, width / 2, height / 2, height / -2, DEFAULT_CAMERA_NEAR, DEFAULT_CAMERA_FAR);\n\n      // keep ref since it will use raf in camera animation\n      camera.canvas = this;\n\n      // redraw when camera changed\n      camera.eventEmitter.on(CameraEvent.UPDATED, function () {\n        _this2.context.renderingContext.renderReasons.add(RenderReason.CAMERA_CHANGED);\n        if (runtime.enableSizeAttenuation && _this2.getConfig().renderer.getConfig().enableSizeAttenuation) {\n          _this2.updateSizeAttenuation();\n        }\n      });\n\n      // bind camera\n      this.context.camera = camera;\n    }\n  }, {\n    key: \"updateSizeAttenuation\",\n    value: function updateSizeAttenuation() {\n      var zoom = this.getCamera().getZoom();\n      this.document.documentElement.forEach(function (node) {\n        runtime.styleValueRegistry.updateSizeAttenuation(node, zoom);\n      });\n    }\n  }, {\n    key: \"getConfig\",\n    value: function getConfig() {\n      return this.context.config;\n    }\n\n    /**\n     * get the root displayObject in scenegraph\n     * @alias this.document.documentElement\n     */\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this.document.documentElement;\n    }\n\n    /**\n     * get the camera of canvas\n     */\n  }, {\n    key: \"getCamera\",\n    value: function getCamera() {\n      return this.context.camera;\n    }\n  }, {\n    key: \"getContextService\",\n    value: function getContextService() {\n      return this.context.contextService;\n    }\n  }, {\n    key: \"getEventService\",\n    value: function getEventService() {\n      return this.context.eventService;\n    }\n  }, {\n    key: \"getRenderingService\",\n    value: function getRenderingService() {\n      return this.context.renderingService;\n    }\n  }, {\n    key: \"getRenderingContext\",\n    value: function getRenderingContext() {\n      return this.context.renderingContext;\n    }\n  }, {\n    key: \"getStats\",\n    value: function getStats() {\n      return this.getRenderingService().getStats();\n    }\n\n    // /**\n    //  * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle\n    //  */\n    // getComputedStyle(node: DisplayObject) {\n    //   return node.computedStyle;\n    // }\n  }, {\n    key: \"ready\",\n    get: function get() {\n      var _this3 = this;\n      if (!this.readyPromise) {\n        this.readyPromise = new Promise(function (resolve) {\n          _this3.resolveReadyPromise = function () {\n            resolve(_this3);\n          };\n        });\n        if (this.inited) {\n          this.resolveReadyPromise();\n        }\n      }\n      return this.readyPromise;\n    }\n\n    /**\n     * @param cleanUp - whether to clean up all the internal services of Canvas\n     * @param skipTriggerEvent - whether to skip trigger destroy event\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var cleanUp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var skipTriggerEvent = arguments.length > 1 ? arguments[1] : undefined;\n      memoize.clearCache();\n      if (!skipTriggerEvent) {\n        this.dispatchEvent(new CustomEvent(CanvasEvent.BEFORE_DESTROY));\n      }\n      if (this.frameId) {\n        this.cancelAnimationFrame(this.frameId);\n      }\n\n      // unmount all children\n      var root = this.getRoot();\n      if (cleanUp) {\n        this.unmountChildren(root);\n        // destroy Document\n        this.document.destroy();\n        this.getEventService().destroy();\n      }\n\n      // destroy services\n      this.getRenderingService().destroy();\n      this.getContextService().destroy();\n\n      // clear root after render service destroyed\n      if (this.context.rBushRoot) {\n        // clear rbush\n        this.context.rBushRoot.clear();\n      }\n      if (!skipTriggerEvent) {\n        this.dispatchEvent(new CustomEvent(CanvasEvent.AFTER_DESTROY));\n      }\n      var clearEventRetain = function clearEventRetain(event) {\n        event.currentTarget = null;\n        event.manager = null;\n        event.target = null;\n        event.relatedNode = null;\n      };\n      clearEventRetain(mountedEvent);\n      clearEventRetain(unmountedEvent);\n      clearEventRetain(beforeRenderEvent);\n      clearEventRetain(rerenderEvent);\n      clearEventRetain(afterRenderEvent);\n      clearEventRetain(attrModifiedEvent);\n      clearEventRetain(insertedEvent);\n      clearEventRetain(removedEvent);\n      clearEventRetain(destroyEvent);\n    }\n\n    /**\n     * compatible with G 3.0\n     * @deprecated\n     * @alias resize\n     */\n  }, {\n    key: \"changeSize\",\n    value: function changeSize(width, height) {\n      this.resize(width, height);\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(width, height) {\n      // update canvas' config\n      var canvasConfig = this.context.config;\n      canvasConfig.width = width;\n      canvasConfig.height = height;\n\n      // resize context\n      this.getContextService().resize(width, height);\n\n      // resize camera\n      var camera = this.context.camera;\n      var projectionMode = camera.getProjectionMode();\n      camera.setPosition(width / 2, height / 2, DEFAULT_CAMERA_Z).setFocalPoint(width / 2, height / 2, 0);\n      if (projectionMode === CameraProjectionMode.ORTHOGRAPHIC) {\n        camera.setOrthographic(width / -2, width / 2, height / 2, height / -2, camera.getNear(), camera.getFar());\n      } else {\n        camera.setAspect(width / height);\n      }\n      this.dispatchEvent(new CustomEvent(CanvasEvent.RESIZE, {\n        width: width,\n        height: height\n      }));\n    }\n\n    // proxy to document.documentElement\n  }, {\n    key: \"appendChild\",\n    value: function appendChild(child, index) {\n      return this.document.documentElement.appendChild(child, index);\n    }\n  }, {\n    key: \"insertBefore\",\n    value: function insertBefore(newChild, refChild) {\n      return this.document.documentElement.insertBefore(newChild, refChild);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(child) {\n      return this.document.documentElement.removeChild(child);\n    }\n\n    /**\n     * Remove all children which can be appended to its original parent later again.\n     */\n  }, {\n    key: \"removeChildren\",\n    value: function removeChildren() {\n      this.document.documentElement.removeChildren();\n    }\n\n    /**\n     * Recursively destroy all children which can not be appended to its original parent later again.\n     * But the canvas remains running which means display objects can be appended later.\n     */\n  }, {\n    key: \"destroyChildren\",\n    value: function destroyChildren() {\n      this.document.documentElement.destroyChildren();\n    }\n  }, {\n    key: \"render\",\n    value: function render(frame) {\n      var _this4 = this;\n      // console.log('render ----------------------');\n      if (frame) {\n        beforeRenderEvent.detail = frame;\n        afterRenderEvent.detail = frame;\n      }\n      this.dispatchEvent(beforeRenderEvent);\n      var renderingService = this.getRenderingService();\n      renderingService.render(this.getConfig(), frame, function () {\n        // trigger actual rerender event\n        // @see https://github.com/antvis/G/issues/1268\n        _this4.dispatchEvent(rerenderEvent);\n      });\n      this.dispatchEvent(afterRenderEvent);\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      var _this5 = this;\n      var _tick = function tick(time, frame) {\n        _this5.render(frame);\n        _this5.frameId = _this5.requestAnimationFrame(_tick);\n      };\n      _tick();\n    }\n  }, {\n    key: \"initRenderer\",\n    value: function initRenderer(renderer) {\n      var _this6 = this;\n      var firstContentfullPaint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!renderer) {\n        throw new Error('Renderer is required.');\n      }\n\n      // reset\n      this.inited = false;\n      this.readyPromise = undefined;\n\n      // FIXME: should re-create here?\n      this.context.rBushRoot = new RBush();\n\n      // reset rendering plugins\n      this.context.renderingPlugins = [];\n      this.context.renderingPlugins.push(new EventPlugin(), new PrepareRendererPlugin(),\n      // new DirtyCheckPlugin(),\n      new CullingPlugin([new FrustumCullingStrategy()]));\n\n      //\n      this.loadRendererContainerModule(renderer);\n\n      // init context service\n      this.context.contextService = new this.context.ContextService(_objectSpread(_objectSpread({}, runtime), this.context));\n\n      // init rendering service\n      this.context.renderingService = new RenderingService(runtime, this.context);\n\n      // init event service\n      this.context.eventService = new EventService(runtime, this.context);\n      this.context.eventService.init();\n      if (this.context.contextService.init) {\n        this.context.contextService.init();\n        this.initRenderingService(renderer, firstContentfullPaint, true);\n      } else {\n        this.context.contextService.initAsync().then(function () {\n          _this6.initRenderingService(renderer, firstContentfullPaint);\n        })[\"catch\"](function (err) {\n          console.error(err);\n        });\n      }\n    }\n  }, {\n    key: \"initRenderingService\",\n    value: function initRenderingService(renderer) {\n      var _this7 = this;\n      var firstContentfullPaint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var async = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      this.context.renderingService.init(function () {\n        _this7.inited = true;\n        if (firstContentfullPaint) {\n          if (async) {\n            _this7.requestAnimationFrame(function () {\n              _this7.dispatchEvent(new CustomEvent(CanvasEvent.READY));\n            });\n          } else {\n            _this7.dispatchEvent(new CustomEvent(CanvasEvent.READY));\n          }\n        } else {\n          _this7.dispatchEvent(new CustomEvent(CanvasEvent.RENDERER_CHANGED));\n        }\n        if (_this7.readyPromise) {\n          _this7.resolveReadyPromise();\n        }\n        if (!firstContentfullPaint) {\n          _this7.getRoot().forEach(function (node) {\n            var _ref = node,\n              renderable = _ref.renderable;\n            if (renderable) {\n              renderable.renderBoundsDirty = true;\n              renderable.boundsDirty = true;\n              renderable.dirty = true;\n            }\n          });\n        }\n\n        // keep current scenegraph unchanged, just trigger mounted event\n        _this7.mountChildren(_this7.getRoot());\n        if (renderer.getConfig().enableAutoRendering) {\n          _this7.run();\n        }\n      });\n    }\n  }, {\n    key: \"loadRendererContainerModule\",\n    value: function loadRendererContainerModule(renderer) {\n      var _this8 = this;\n      // load other container modules provided by g-canvas/g-svg/g-webgl\n      var plugins = renderer.getPlugins();\n      plugins.forEach(function (plugin) {\n        plugin.context = _this8.context;\n        plugin.init(runtime);\n      });\n    }\n  }, {\n    key: \"setRenderer\",\n    value: function setRenderer(renderer) {\n      // update canvas' config\n      var canvasConfig = this.getConfig();\n      if (canvasConfig.renderer === renderer) {\n        return;\n      }\n      var oldRenderer = canvasConfig.renderer;\n      canvasConfig.renderer = renderer;\n\n      // keep all children undestroyed\n      this.destroy(false, true);\n\n      // destroy all plugins, reverse will mutate origin array\n      _toConsumableArray((oldRenderer === null || oldRenderer === void 0 ? void 0 : oldRenderer.getPlugins()) || []).reverse().forEach(function (plugin) {\n        plugin.destroy(runtime);\n      });\n      this.initRenderer(renderer);\n    }\n  }, {\n    key: \"setCursor\",\n    value: function setCursor(cursor) {\n      var canvasConfig = this.getConfig();\n      canvasConfig.cursor = cursor;\n      this.getContextService().applyCursorStyle(cursor);\n    }\n  }, {\n    key: \"unmountChildren\",\n    value: function unmountChildren(parent) {\n      var _this9 = this;\n      // unmountChildren recursively\n      parent.childNodes.forEach(function (child) {\n        _this9.unmountChildren(child);\n      });\n      if (this.inited) {\n        if (parent.isMutationObserved) {\n          parent.dispatchEvent(unmountedEvent);\n        } else {\n          unmountedEvent.target = parent;\n          this.dispatchEvent(unmountedEvent, true);\n        }\n\n        // skip document.documentElement\n        if (parent !== this.document.documentElement) {\n          parent.ownerDocument = null;\n        }\n        parent.isConnected = false;\n      }\n\n      // trigger after unmounted\n      if (parent.isCustomElement) {\n        if (parent.disconnectedCallback) {\n          parent.disconnectedCallback();\n        }\n      }\n    }\n  }, {\n    key: \"mountChildren\",\n    value: function mountChildren(child) {\n      var _this10 = this;\n      var skipTriggerEvent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : isInFragment(child);\n      if (this.inited) {\n        if (!child.isConnected) {\n          child.ownerDocument = this.document;\n          child.isConnected = true;\n          if (!skipTriggerEvent) {\n            if (child.isMutationObserved) {\n              child.dispatchEvent(mountedEvent);\n            } else {\n              mountedEvent.target = child;\n              this.dispatchEvent(mountedEvent, true);\n            }\n          }\n        }\n      } else {\n        console.warn(\"[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.\", 'appended child: ', child.nodeName);\n      }\n\n      // recursively mount children\n      child.childNodes.forEach(function (c) {\n        _this10.mountChildren(c, skipTriggerEvent);\n      });\n\n      // trigger after mounted\n      if (child.isCustomElement) {\n        if (child.connectedCallback) {\n          child.connectedCallback();\n        }\n      }\n    }\n  }, {\n    key: \"mountFragment\",\n    value: function mountFragment(child) {\n      this.mountChildren(child, false);\n    }\n  }, {\n    key: \"client2Viewport\",\n    value: function client2Viewport(client) {\n      return this.getEventService().client2Viewport(client);\n    }\n  }, {\n    key: \"viewport2Client\",\n    value: function viewport2Client(canvas) {\n      return this.getEventService().viewport2Client(canvas);\n    }\n  }, {\n    key: \"viewport2Canvas\",\n    value: function viewport2Canvas(viewport) {\n      return this.getEventService().viewport2Canvas(viewport);\n    }\n  }, {\n    key: \"canvas2Viewport\",\n    value: function canvas2Viewport(canvas) {\n      return this.getEventService().canvas2Viewport(canvas);\n    }\n\n    /**\n     * @deprecated\n     * @alias client2Viewport\n     */\n  }, {\n    key: \"getPointByClient\",\n    value: function getPointByClient(clientX, clientY) {\n      return this.client2Viewport({\n        x: clientX,\n        y: clientY\n      });\n    }\n\n    /**\n     * @deprecated\n     * @alias viewport2Client\n     */\n  }, {\n    key: \"getClientByPoint\",\n    value: function getClientByPoint(x, y) {\n      return this.viewport2Client({\n        x: x,\n        y: y\n      });\n    }\n  }]);\n}(EventTarget);\n\nexport { AABB, AbstractRenderer, AbstractRendererPlugin, BUILT_IN_PROPERTIES, CSS, CSSGradientValue, CSSKeywordValue, CSSRGB, CSSStyleValue, CSSUnitValue, Camera, CameraEvent, CameraProjectionMode, CameraTrackingMode, CameraType, Canvas, CanvasEvent, Circle, CircleUpdater, ClipSpaceNearZ, CustomElement, CustomElementRegistry, CustomEvent, DefaultSceneGraphSelector, DefaultSceneGraphService, DisplayObject, Document, ERROR_MSG_METHOD_NOT_IMPLEMENTED, Element, ElementEvent, Ellipse, EllipseUpdater, EventService, EventTarget, FederatedEvent, FederatedMouseEvent, FederatedPointerEvent, FederatedWheelEvent, Fragment, Frustum, GradientType, Group, GroupUpdater, HTML, HTMLUpdater, Image, Line, LineUpdater, Mask, MutationEvent, Node, OffscreenCanvasCreator, Path, PathUpdater, Plane, Point, Polygon, Polyline, PolylineUpdater, PropertySyntax, RBush, Rect, RectUpdater, Rectangle, RenderReason, RenderingService, Shape, SortReason, Strategy, Text, TextService, TextUpdater, UnitType, attrModifiedEvent, computeLinearGradient, computeRadialGradient, convertToPath, createVec3, decompose, definedProps, deg2rad, deg2turn, destroyEvent, findClosestClipPathTarget, fromRotationTranslationScale, getAngle, getEuler, getOrCalculatePathTotalLength, grad2deg, insertedEvent, isBrowser, isCSSGradientValue, isCSSRGB, isCanvas, isDisplayObject, isFederatedEvent, isFillOrStrokeAffected, isPattern, mergeColors, parseColor, parseLength, parsePath, parseTransform, parsedTransformToMat4, propertyMetadataCache, rad2deg, removedEvent, resetEntityCounter, runtime, setDOMSize, translatePathToString, turn2deg };\n//# sourceMappingURL=index.esm.js.map\n","import { __assign } from \"tslib\";\nimport { pathLengthFactory } from './path-length-factory';\n/**\n * Returns the shape total length, or the equivalent to `shape.getTotalLength()`.\n *\n * The `normalizePath` version is lighter, faster, more efficient and more accurate\n * with paths that are not `curveArray`.\n */\nexport function getTotalLength(pathInput, options) {\n    return pathLengthFactory(pathInput, undefined, __assign(__assign({}, options), { bbox: false, length: true })).length;\n}\n//# sourceMappingURL=get-total-length.js.map","// reverse CURVE based pathArray segments only\nexport function reverseCurve(pathArray) {\n    var rotatedCurve = pathArray\n        .slice(1)\n        .map(function (x, i, curveOnly) {\n        // @ts-ignore\n        return !i ? pathArray[0].slice(1).concat(x.slice(1)) : curveOnly[i - 1].slice(-2).concat(x.slice(1));\n    })\n        // @ts-ignore\n        .map(function (x) { return x.map(function (y, i) { return x[x.length - i - 2 * (1 - (i % 2))]; }); })\n        .reverse();\n    return [['M'].concat(rotatedCurve[0].slice(0, 2))].concat(rotatedCurve.map(function (x) { return ['C'].concat(x.slice(2)); }));\n}\n//# sourceMappingURL=reverse-curve.js.map","import { distanceSquareRoot } from './distance-square-root';\nfunction getRotations(a) {\n    var segCount = a.length;\n    var pointCount = segCount - 1;\n    return a.map(function (f, idx) {\n        return a.map(function (p, i) {\n            var oldSegIdx = idx + i;\n            var seg;\n            if (i === 0 || (a[oldSegIdx] && a[oldSegIdx][0] === 'M')) {\n                seg = a[oldSegIdx];\n                return ['M'].concat(seg.slice(-2));\n            }\n            if (oldSegIdx >= segCount)\n                oldSegIdx -= pointCount;\n            return a[oldSegIdx];\n        });\n    });\n}\nexport function getRotatedCurve(a, b) {\n    var segCount = a.length - 1;\n    var lineLengths = [];\n    var computedIndex = 0;\n    var sumLensSqrd = 0;\n    var rotations = getRotations(a);\n    rotations.forEach(function (r, i) {\n        a.slice(1).forEach(function (s, j) {\n            // @ts-ignore\n            sumLensSqrd += distanceSquareRoot(a[(i + j) % segCount].slice(-2), b[j % segCount].slice(-2));\n        });\n        lineLengths[i] = sumLensSqrd;\n        sumLensSqrd = 0;\n    });\n    computedIndex = lineLengths.indexOf(Math.min.apply(null, lineLengths));\n    return rotations[computedIndex];\n}\n//# sourceMappingURL=get-rotated-curve.js.map","export function clonePath(path) {\n    return path.map(function (x) { return (Array.isArray(x) ? [].concat(x) : x); });\n}\n//# sourceMappingURL=clone-path.js.map","import { __assign } from \"tslib\";\nimport { pathLengthFactory } from './path-length-factory';\n/**\n * Returns [x,y] coordinates of a point at a given length of a shape.\n */\nexport function getPointAtLength(pathInput, distance, options) {\n    return pathLengthFactory(pathInput, distance, __assign(__assign({}, options), { bbox: false, length: true })).point;\n}\n//# sourceMappingURL=get-point-at-length.js.map","import { __spreadArray, __read } from 'tslib';\nimport { isNumberEqual } from '@antv/util';\nimport { vec2 } from 'gl-matrix';\n\nfunction distance(x1, y1, x2, y2) {\n    var dx = x1 - x2;\n    var dy = y1 - y2;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nfunction getBBoxByArray(xArr, yArr) {\n    var minX = Math.min.apply(Math, __spreadArray([], __read(xArr), false));\n    var minY = Math.min.apply(Math, __spreadArray([], __read(yArr), false));\n    var maxX = Math.max.apply(Math, __spreadArray([], __read(xArr), false));\n    var maxY = Math.max.apply(Math, __spreadArray([], __read(yArr), false));\n    return {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nfunction piMod(angle) {\n    return (angle + Math.PI * 2) % (Math.PI * 2);\n}\n\nfunction copysign(v1, v2) {\n    var absv = Math.abs(v1);\n    return v2 > 0 ? absv : absv * -1;\n}\nfunction nearestPoint$4(x, y, rx, ry, x0, y0) {\n    var a = rx;\n    var b = ry;\n    // 0\n    if (a === 0 || b === 0) {\n        return {\n            x: x,\n            y: y,\n        };\n    }\n    //  0 0 \n    var relativeX = x0 - x;\n    var relativeY = y0 - y;\n    var px = Math.abs(relativeX);\n    var py = Math.abs(relativeY);\n    var squareA = a * a;\n    var squareB = b * b;\n    // const angle0 = Math.atan2(relativeY, relativeX);\n    var t = Math.PI / 4;\n    var nearestX = 0; // \n    var nearestY = 0;\n    //  4 \n    for (var i = 0; i < 4; i++) {\n        nearestX = a * Math.cos(t);\n        nearestY = b * Math.sin(t);\n        var ex = ((squareA - squareB) * Math.pow(Math.cos(t), 3)) / a;\n        var ey = ((squareB - squareA) * Math.pow(Math.sin(t), 3)) / b;\n        var rx1 = nearestX - ex;\n        var ry1 = nearestY - ey;\n        var qx = px - ex;\n        var qy = py - ey;\n        var r = Math.hypot(ry1, rx1);\n        var q = Math.hypot(qy, qx);\n        var delta_c = r * Math.asin((rx1 * qy - ry1 * qx) / (r * q));\n        var delta_t = delta_c /\n            Math.sqrt(squareA + squareB - nearestX * nearestX - nearestY * nearestY);\n        t += delta_t;\n        t = Math.min(Math.PI / 2, Math.max(0, t));\n    }\n    return {\n        x: x + copysign(nearestX, relativeX),\n        y: y + copysign(nearestY, relativeY),\n    };\n}\n\n//  x\nfunction derivativeXAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle) {\n    return (-1 * rx * Math.cos(xRotation) * Math.sin(angle) -\n        ry * Math.sin(xRotation) * Math.cos(angle));\n}\n//  y\nfunction derivativeYAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle) {\n    return (-1 * rx * Math.sin(xRotation) * Math.sin(angle) +\n        ry * Math.cos(xRotation) * Math.cos(angle));\n}\n// x \nfunction xExtrema(rx, ry, xRotation) {\n    return Math.atan((-ry / rx) * Math.tan(xRotation));\n}\n// y \nfunction yExtrema(rx, ry, xRotation) {\n    return Math.atan(ry / (rx * Math.tan(xRotation)));\n}\n//  x \nfunction xAt(cx, cy, rx, ry, xRotation, angle) {\n    return (rx * Math.cos(xRotation) * Math.cos(angle) -\n        ry * Math.sin(xRotation) * Math.sin(angle) +\n        cx);\n}\n//  y \nfunction yAt(cx, cy, rx, ry, xRotation, angle) {\n    return (rx * Math.sin(xRotation) * Math.cos(angle) +\n        ry * Math.cos(xRotation) * Math.sin(angle) +\n        cy);\n}\n// \nfunction getAngle(rx, ry, x0, y0) {\n    var angle = Math.atan2(y0 * rx, x0 * ry);\n    //  0 - 2PI \n    return (angle + Math.PI * 2) % (Math.PI * 2);\n}\n// x,y\nfunction getPoint(rx, ry, angle) {\n    return {\n        x: rx * Math.cos(angle),\n        y: ry * Math.sin(angle),\n    };\n}\n// \nfunction rotate(x, y, angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    return [x * cos - y * sin, x * sin + y * cos];\n}\nfunction box$5(cx, cy, rx, ry, xRotation, startAngle, endAngle) {\n    var xDim = xExtrema(rx, ry, xRotation);\n    var minX = Infinity;\n    var maxX = -Infinity;\n    var xs = [startAngle, endAngle];\n    for (var i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {\n        var xAngle = xDim + i;\n        if (startAngle < endAngle) {\n            if (startAngle < xAngle && xAngle < endAngle) {\n                xs.push(xAngle);\n            }\n        }\n        else {\n            if (endAngle < xAngle && xAngle < startAngle) {\n                xs.push(xAngle);\n            }\n        }\n    }\n    for (var i = 0; i < xs.length; i++) {\n        var x = xAt(cx, cy, rx, ry, xRotation, xs[i]);\n        if (x < minX) {\n            minX = x;\n        }\n        if (x > maxX) {\n            maxX = x;\n        }\n    }\n    var yDim = yExtrema(rx, ry, xRotation);\n    var minY = Infinity;\n    var maxY = -Infinity;\n    var ys = [startAngle, endAngle];\n    for (var i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {\n        var yAngle = yDim + i;\n        if (startAngle < endAngle) {\n            if (startAngle < yAngle && yAngle < endAngle) {\n                ys.push(yAngle);\n            }\n        }\n        else {\n            if (endAngle < yAngle && yAngle < startAngle) {\n                ys.push(yAngle);\n            }\n        }\n    }\n    for (var i = 0; i < ys.length; i++) {\n        var y = yAt(cx, cy, rx, ry, xRotation, ys[i]);\n        if (y < minY) {\n            minY = y;\n        }\n        if (y > maxY) {\n            maxY = y;\n        }\n    }\n    return {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nfunction nearestPoint$3(cx, cy, rx, ry, xRotation, startAngle, endAngle, x0, y0) {\n    //  0,0 \n    var relativeVector = rotate(x0 - cx, y0 - cy, -xRotation);\n    var _a = __read(relativeVector, 2), x1 = _a[0], y1 = _a[1];\n    // \n    var relativePoint = nearestPoint$4(0, 0, rx, ry, x1, y1);\n    // \n    var angle = getAngle(rx, ry, relativePoint.x, relativePoint.y);\n    // \n    if (angle < startAngle) {\n        // \n        relativePoint = getPoint(rx, ry, startAngle);\n    }\n    else if (angle > endAngle) {\n        // \n        relativePoint = getPoint(rx, ry, endAngle);\n    }\n    //  xRotation \n    var vector = rotate(relativePoint.x, relativePoint.y, xRotation);\n    return {\n        x: vector[0] + cx,\n        y: vector[1] + cy,\n    };\n}\nfunction tangentAngle$4(cx, cy, rx, ry, xRotation, startAngle, endAngle, t) {\n    var angle = (endAngle - startAngle) * t + startAngle;\n    var dx = derivativeXAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle);\n    var dy = derivativeYAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle);\n    return piMod(Math.atan2(dy, dx));\n}\n\nvar EPSILON = 0.0001;\n/**\n * \n * @param {number[]} xArr       x \n * @param {number[]} yArr       y \n * @param {number}   x          x\n * @param {number}   y          y\n * @param {Function} tCallback \n */\nfunction nearestPoint$2(xArr, yArr, x, y, tCallback, length) {\n    var t = -1;\n    var d = Infinity;\n    var v0 = [x, y];\n    var segNum = 20;\n    if (length && length > 200) {\n        segNum = length / 10;\n    }\n    var increaseRate = 1 / segNum;\n    var interval = increaseRate / 10;\n    for (var i = 0; i <= segNum; i++) {\n        var _t = i * increaseRate;\n        var v1 = [\n            tCallback.apply(void 0, __spreadArray([], __read(xArr.concat([_t])), false)),\n            tCallback.apply(void 0, __spreadArray([], __read(yArr.concat([_t])), false)),\n        ];\n        var d1 = distance(v0[0], v0[1], v1[0], v1[1]);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    // \n    if (t === 0) {\n        return {\n            x: xArr[0],\n            y: yArr[0],\n        };\n    }\n    if (t === 1) {\n        var count = xArr.length;\n        return {\n            x: xArr[count - 1],\n            y: yArr[count - 1],\n        };\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON) {\n            break;\n        }\n        var prev = t - interval;\n        var next = t + interval;\n        var v1 = [\n            tCallback.apply(void 0, __spreadArray([], __read(xArr.concat([prev])), false)),\n            tCallback.apply(void 0, __spreadArray([], __read(yArr.concat([prev])), false)),\n        ];\n        var d1 = distance(v0[0], v0[1], v1[0], v1[1]);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            var v2 = [\n                tCallback.apply(void 0, __spreadArray([], __read(xArr.concat([next])), false)),\n                tCallback.apply(void 0, __spreadArray([], __read(yArr.concat([next])), false)),\n            ];\n            var d2 = distance(v0[0], v0[1], v2[0], v2[1]);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    return {\n        x: tCallback.apply(void 0, __spreadArray([], __read(xArr.concat([t])), false)),\n        y: tCallback.apply(void 0, __spreadArray([], __read(yArr.concat([t])), false)),\n    };\n}\n//  https://community.khronos.org/t/3d-cubic-bezier-segment-length/62363/2\nfunction snapLength(xArr, yArr) {\n    var totalLength = 0;\n    var count = xArr.length;\n    for (var i = 0; i < count; i++) {\n        var x = xArr[i];\n        var y = yArr[i];\n        var nextX = xArr[(i + 1) % count];\n        var nextY = yArr[(i + 1) % count];\n        totalLength += distance(x, y, nextX, nextY);\n    }\n    return totalLength / 2;\n}\n\nfunction box$4(x1, y1, x2, y2) {\n    return getBBoxByArray([x1, x2], [y1, y2]);\n}\nfunction length$4(x1, y1, x2, y2) {\n    return distance(x1, y1, x2, y2);\n}\nfunction pointAt$3(x1, y1, x2, y2, t) {\n    return {\n        x: (1 - t) * x1 + t * x2,\n        y: (1 - t) * y1 + t * y2,\n    };\n}\nfunction pointDistance$4(x1, y1, x2, y2, x, y) {\n    //  x1, y1  p, p1, p2  a\n    // p1a = p1p.p1p2/|p1p2| * (p1p )\n    var cross = (x2 - x1) * (x - x1) + (y2 - y1) * (y - y1);\n    if (cross < 0) {\n        return distance(x1, y1, x, y);\n    }\n    var lengthSquare = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\n    if (cross > lengthSquare) {\n        return distance(x2, y2, x, y);\n    }\n    return pointToLine(x1, y1, x2, y2, x, y);\n}\nfunction pointToLine(x1, y1, x2, y2, x, y) {\n    var d = [x2 - x1, y2 - y1];\n    // \n    if (vec2.exactEquals(d, [0, 0])) {\n        return Math.sqrt((x - x1) * (x - x1) + (y - y1) * (y - y1));\n    }\n    var u = [-d[1], d[0]];\n    vec2.normalize(u, u);\n    var a = [x - x1, y - y1];\n    return Math.abs(vec2.dot(a, u));\n}\nfunction tangentAngle$3(x1, y1, x2, y2) {\n    return Math.atan2(y2 - y1, x2 - x1);\n}\n\nfunction cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t; // t * t * t  Math.pow(t, 3) \n    return (onet * onet * onet * p0 +\n        3 * p1 * t * onet * onet +\n        3 * p2 * t * t * onet +\n        p3 * t * t * t);\n}\nfunction derivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return (3 * (onet * onet * (p1 - p0) + 2 * onet * t * (p2 - p1) + t * t * (p3 - p2)));\n}\nfunction extrema$1(p0, p1, p2, p3) {\n    var a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n    var b = 6 * p0 - 12 * p1 + 6 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var extremas = [];\n    var t1;\n    var t2;\n    var discSqrt;\n    if (isNumberEqual(a, 0)) {\n        if (!isNumberEqual(b, 0)) {\n            t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                extremas.push(t1);\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isNumberEqual(disc, 0)) {\n            extremas.push(-b / (2 * a));\n        }\n        else if (disc > 0) {\n            discSqrt = Math.sqrt(disc);\n            t1 = (-b + discSqrt) / (2 * a);\n            t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                extremas.push(t1);\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                extremas.push(t2);\n            }\n        }\n    }\n    return extremas;\n}\n// \nfunction divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, t) {\n    // \n    var xt = cubicAt(x1, x2, x3, x4, t);\n    var yt = cubicAt(y1, y2, y3, y4, t);\n    // \n    var c1 = pointAt$3(x1, y1, x2, y2, t);\n    var c2 = pointAt$3(x2, y2, x3, y3, t);\n    var c3 = pointAt$3(x3, y3, x4, y4, t);\n    var c12 = pointAt$3(c1.x, c1.y, c2.x, c2.y, t);\n    var c23 = pointAt$3(c2.x, c2.y, c3.x, c3.y, t);\n    return [\n        [x1, y1, c1.x, c1.y, c12.x, c12.y, xt, yt],\n        [xt, yt, c23.x, c23.y, c3.x, c3.y, x4, y4],\n    ];\n}\n// \nfunction cubicLength(x1, y1, x2, y2, x3, y3, x4, y4, iterationCount) {\n    if (iterationCount === 0) {\n        return snapLength([x1, x2, x3, x4], [y1, y2, y3, y4]);\n    }\n    var cubics = divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, 0.5);\n    var left = __spreadArray(__spreadArray([], __read(cubics[0]), false), [iterationCount - 1], false);\n    var right = __spreadArray(__spreadArray([], __read(cubics[1]), false), [iterationCount - 1], false);\n    return cubicLength.apply(void 0, __spreadArray([], __read(left), false)) + cubicLength.apply(void 0, __spreadArray([], __read(right), false));\n}\nfunction box$3(x1, y1, x2, y2, x3, y3, x4, y4) {\n    var xArr = [x1, x4];\n    var yArr = [y1, y4];\n    var xExtrema = extrema$1(x1, x2, x3, x4);\n    var yExtrema = extrema$1(y1, y2, y3, y4);\n    for (var i = 0; i < xExtrema.length; i++) {\n        xArr.push(cubicAt(x1, x2, x3, x4, xExtrema[i]));\n    }\n    for (var i = 0; i < yExtrema.length; i++) {\n        yArr.push(cubicAt(y1, y2, y3, y4, yExtrema[i]));\n    }\n    return getBBoxByArray(xArr, yArr);\n}\nfunction length$3(x1, y1, x2, y2, x3, y3, x4, y4) {\n    //  8 \n    return cubicLength(x1, y1, x2, y2, x3, y3, x4, y4, 3);\n}\nfunction nearestPoint$1(x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length) {\n    return nearestPoint$2([x1, x2, x3, x4], [y1, y2, y3, y4], x0, y0, cubicAt, length);\n}\nfunction pointDistance$3(x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length) {\n    var point = nearestPoint$1(x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length);\n    return distance(point.x, point.y, x0, y0);\n}\nfunction pointAt$2(x1, y1, x2, y2, x3, y3, x4, y4, t) {\n    return {\n        x: cubicAt(x1, x2, x3, x4, t),\n        y: cubicAt(y1, y2, y3, y4, t),\n    };\n}\nfunction tangentAngle$2(x1, y1, x2, y2, x3, y3, x4, y4, t) {\n    var dx = derivativeAt(x1, x2, x3, x4, t);\n    var dy = derivativeAt(y1, y2, y3, y4, t);\n    return piMod(Math.atan2(dy, dx));\n}\n\nfunction analyzePoints(points) {\n    // \n    var totalLength = 0;\n    var segments = [];\n    for (var i = 0; i < points.length - 1; i++) {\n        var from = points[i];\n        var to = points[i + 1];\n        var length_1 = distance(from[0], from[1], to[0], to[1]);\n        var seg = {\n            from: from,\n            to: to,\n            length: length_1,\n        };\n        segments.push(seg);\n        totalLength += length_1;\n    }\n    return { segments: segments, totalLength: totalLength };\n}\nfunction lengthOfSegment(points) {\n    if (points.length < 2) {\n        return 0;\n    }\n    var totalLength = 0;\n    for (var i = 0; i < points.length - 1; i++) {\n        var from = points[i];\n        var to = points[i + 1];\n        totalLength += distance(from[0], from[1], to[0], to[1]);\n    }\n    return totalLength;\n}\n/**\n * \n * @param {array} points \n * @param {number} t  0-1\n * @return {object} \n */\nfunction pointAtSegments(points, t) {\n    // \n    if (t > 1 || t < 0 || points.length < 2) {\n        return null;\n    }\n    var _a = analyzePoints(points), segments = _a.segments, totalLength = _a.totalLength;\n    // \n    if (totalLength === 0) {\n        return {\n            x: points[0][0],\n            y: points[0][1],\n        };\n    }\n    // \n    var startRatio = 0;\n    var point = null;\n    for (var i = 0; i < segments.length; i++) {\n        var seg = segments[i];\n        var from = seg.from, to = seg.to;\n        var currentRatio = seg.length / totalLength;\n        if (t >= startRatio && t <= startRatio + currentRatio) {\n            var localRatio = (t - startRatio) / currentRatio;\n            point = pointAt$3(from[0], from[1], to[0], to[1], localRatio);\n            break;\n        }\n        startRatio += currentRatio;\n    }\n    return point;\n}\n/**\n * \n * @param {array} points \n * @param {number} t  0-1\n */\nfunction angleAtSegments(points, t) {\n    // \n    if (t > 1 || t < 0 || points.length < 2) {\n        return 0;\n    }\n    var _a = analyzePoints(points), segments = _a.segments, totalLength = _a.totalLength;\n    // \n    var startRatio = 0;\n    var angle = 0;\n    for (var i = 0; i < segments.length; i++) {\n        var seg = segments[i];\n        var from = seg.from, to = seg.to;\n        var currentRatio = seg.length / totalLength;\n        if (t >= startRatio && t <= startRatio + currentRatio) {\n            angle = Math.atan2(to[1] - from[1], to[0] - from[0]);\n            break;\n        }\n        startRatio += currentRatio;\n    }\n    return angle;\n}\nfunction distanceAtSegment(points, x, y) {\n    var minDistance = Infinity;\n    for (var i = 0; i < points.length - 1; i++) {\n        var point = points[i];\n        var nextPoint = points[i + 1];\n        var distance_1 = pointDistance$4(point[0], point[1], nextPoint[0], nextPoint[1], x, y);\n        if (distance_1 < minDistance) {\n            minDistance = distance_1;\n        }\n    }\n    return minDistance;\n}\n\nfunction box$2(points) {\n    var xArr = [];\n    var yArr = [];\n    for (var i = 0; i < points.length; i++) {\n        var point = points[i];\n        xArr.push(point[0]);\n        yArr.push(point[1]);\n    }\n    return getBBoxByArray(xArr, yArr);\n}\nfunction length$2(points) {\n    return lengthOfSegment(points);\n}\nfunction pointAt$1(points, t) {\n    return pointAtSegments(points, t);\n}\nfunction pointDistance$2(points, x, y) {\n    return distanceAtSegment(points, x, y);\n}\nfunction tangentAngle$1(points, t) {\n    return angleAtSegments(points, t);\n}\n\nfunction getAllPoints(points) {\n    var tmp = points.slice(0);\n    if (points.length) {\n        tmp.push(points[0]);\n    }\n    return tmp;\n}\nfunction box$1(points) {\n    return box$2(points);\n}\nfunction length$1(points) {\n    return lengthOfSegment(getAllPoints(points));\n}\nfunction pointAt(points, t) {\n    return pointAtSegments(getAllPoints(points), t);\n}\nfunction pointDistance$1(points, x, y) {\n    return distanceAtSegment(getAllPoints(points), x, y);\n}\nfunction tangentAngle(points, t) {\n    return angleAtSegments(getAllPoints(points), t);\n}\n\n// \nfunction quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * onet * p0 + 2 * t * onet * p1 + t * t * p2;\n}\n// \nfunction extrema(p0, p1, p2) {\n    var a = p0 + p2 - 2 * p1;\n    if (isNumberEqual(a, 0)) {\n        return [0.5];\n    }\n    var rst = (p0 - p1) / a;\n    if (rst <= 1 && rst >= 0) {\n        return [rst];\n    }\n    return [];\n}\n// \nfunction divideQuadratic(x1, y1, x2, y2, x3, y3, t) {\n    // \n    var xt = quadraticAt(x1, x2, x3, t);\n    var yt = quadraticAt(y1, y2, y3, t);\n    // \n    var controlPoint1 = pointAt$3(x1, y1, x2, y2, t);\n    // \n    var controlPoint2 = pointAt$3(x2, y2, x3, y3, t);\n    return [\n        [x1, y1, controlPoint1.x, controlPoint1.y, xt, yt],\n        [xt, yt, controlPoint2.x, controlPoint2.y, x3, y3],\n    ];\n}\n// \nfunction quadraticLength(x1, y1, x2, y2, x3, y3, iterationCount) {\n    if (iterationCount === 0) {\n        return ((distance(x1, y1, x2, y2) +\n            distance(x2, y2, x3, y3) +\n            distance(x1, y1, x3, y3)) /\n            2);\n    }\n    var quadratics = divideQuadratic(x1, y1, x2, y2, x3, y3, 0.5);\n    var left = quadratics[0];\n    var right = quadratics[1];\n    left.push(iterationCount - 1);\n    right.push(iterationCount - 1);\n    return quadraticLength.apply(void 0, __spreadArray([], __read(left), false)) + quadraticLength.apply(void 0, __spreadArray([], __read(right), false));\n}\nfunction box(x1, y1, x2, y2, x3, y3) {\n    var xExtrema = extrema(x1, x2, x3)[0];\n    var yExtrema = extrema(y1, y2, y3)[0];\n    //  box \n    var xArr = [x1, x3];\n    var yArr = [y1, y3];\n    if (xExtrema !== undefined) {\n        xArr.push(quadraticAt(x1, x2, x3, xExtrema));\n    }\n    if (yExtrema !== undefined) {\n        yArr.push(quadraticAt(y1, y2, y3, yExtrema));\n    }\n    return getBBoxByArray(xArr, yArr);\n}\nfunction length(x1, y1, x2, y2, x3, y3) {\n    return quadraticLength(x1, y1, x2, y2, x3, y3, 3);\n}\nfunction nearestPoint(x1, y1, x2, y2, x3, y3, x0, y0) {\n    return nearestPoint$2([x1, x2, x3], [y1, y2, y3], x0, y0, quadraticAt);\n}\nfunction pointDistance(x1, y1, x2, y2, x3, y3, x0, y0) {\n    var point = nearestPoint(x1, y1, x2, y2, x3, y3, x0, y0);\n    return distance(point.x, point.y, x0, y0);\n}\n\nexport { box$5 as arcBox, nearestPoint$3 as arcNearestPoint, tangentAngle$4 as arcTangentAngle, box$3 as cubicBox, length$3 as cubicLength, nearestPoint$1 as cubicNearestPoint, pointAt$2 as cubicPointAt, pointDistance$3 as cubicPointDistance, tangentAngle$2 as cubicTangentAngle, distance, box$4 as lineBox, length$4 as lineLength, pointAt$3 as linePointAt, pointDistance$4 as linePointDistance, pointToLine as linePointToLine, tangentAngle$3 as lineTangentAngle, box$1 as polygonBox, length$1 as polygonLength, pointAt as polygonPointAt, pointDistance$1 as polygonPointDistance, tangentAngle as polygonTangentAngle, box$2 as polylineBox, length$2 as polylineLength, pointAt$1 as polylinePointAt, pointDistance$2 as polylinePointDistance, tangentAngle$1 as polylineTangentAngle, box as quadBox, length as quadLength, nearestPoint as quadNearestPoint, pointDistance as quadPointDistance };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-plugin-dragndrop\n * @description A G plugin for Drag n Drop implemented with PointerEvents\n * @version 2.0.34\n * @date 4/14/2025, 2:54:47 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { AbstractRendererPlugin } from '@antv/g-lite';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport { distanceSquareRoot } from '@antv/util';\n\nvar DragndropPlugin = /*#__PURE__*/function () {\n  function DragndropPlugin(dragndropPluginOptions) {\n    _classCallCheck(this, DragndropPlugin);\n    this.dragndropPluginOptions = dragndropPluginOptions;\n  }\n  return _createClass(DragndropPlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var _this = this;\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext;\n      var document = renderingContext.root.ownerDocument;\n\n      // TODO: should we add an option like `draggable` to Canvas\n      var canvas = document.defaultView;\n      var handlePointerdown = function handlePointerdown(event) {\n        var target = event.target;\n        var isDocument = target === document;\n        var draggableEventTarget = isDocument && _this.dragndropPluginOptions.isDocumentDraggable ? document : target.closest && target.closest('[draggable=true]');\n\n        // `draggable` may be set on ancestor nodes:\n        // @see https://github.com/antvis/G/issues/1088\n        if (draggableEventTarget) {\n          // delay triggering dragstart event\n          var dragstartTriggered = false;\n          var dragstartTimeStamp = event.timeStamp;\n          var dragstartClientCoordinates = [event.clientX, event.clientY];\n          var currentDroppable = null;\n          var lastDragClientCoordinates = [event.clientX, event.clientY];\n          // @ts-ignore\n          // eslint-disable-next-line no-inner-declarations\n          var handlePointermove = /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {\n              var timeElapsed, distanceMoved, point, elementsBelow, elementBelow, droppableBelow;\n              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    if (dragstartTriggered) {\n                      _context.next = 8;\n                      break;\n                    }\n                    timeElapsed = event.timeStamp - dragstartTimeStamp;\n                    distanceMoved = distanceSquareRoot([event.clientX, event.clientY], dragstartClientCoordinates); // check thresholds\n                    if (!(timeElapsed <= _this.dragndropPluginOptions.dragstartTimeThreshold || distanceMoved <= _this.dragndropPluginOptions.dragstartDistanceThreshold)) {\n                      _context.next = 5;\n                      break;\n                    }\n                    return _context.abrupt(\"return\");\n                  case 5:\n                    // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragstart_event\n                    event.type = 'dragstart';\n                    draggableEventTarget.dispatchEvent(event);\n                    dragstartTriggered = true;\n                  case 8:\n                    // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/drag_event\n                    event.type = 'drag';\n                    // @ts-ignore\n                    event.dx = event.clientX - lastDragClientCoordinates[0];\n                    // @ts-ignore\n                    event.dy = event.clientY - lastDragClientCoordinates[1];\n                    draggableEventTarget.dispatchEvent(event);\n                    lastDragClientCoordinates = [event.clientX, event.clientY];\n                    if (isDocument) {\n                      _context.next = 21;\n                      break;\n                    }\n                    point = _this.dragndropPluginOptions.overlap === 'pointer' ? [event.canvasX, event.canvasY] : target.getBounds().center;\n                    _context.next = 17;\n                    return document.elementsFromPoint(point[0], point[1]);\n                  case 17:\n                    elementsBelow = _context.sent;\n                    // prevent from picking the dragging element\n                    elementBelow = elementsBelow[elementsBelow.indexOf(target) + 1];\n                    droppableBelow = (elementBelow === null || elementBelow === void 0 ? void 0 : elementBelow.closest('[droppable=true]')) || (_this.dragndropPluginOptions.isDocumentDroppable ? document : null);\n                    if (currentDroppable !== droppableBelow) {\n                      if (currentDroppable) {\n                        // null when we were not over a droppable before this event\n                        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragleave_event\n                        event.type = 'dragleave';\n                        event.target = currentDroppable;\n                        currentDroppable.dispatchEvent(event);\n                      }\n                      if (droppableBelow) {\n                        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragleave_event\n                        event.type = 'dragenter';\n                        event.target = droppableBelow;\n                        droppableBelow.dispatchEvent(event);\n                      }\n                      currentDroppable = droppableBelow;\n                      if (currentDroppable) {\n                        // null if we're not coming over a droppable now\n                        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragover_event\n                        event.type = 'dragover';\n                        event.target = currentDroppable;\n                        currentDroppable.dispatchEvent(event);\n                      }\n                    }\n                  case 21:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee);\n            }));\n            return function handlePointermove(_x) {\n              return _ref.apply(this, arguments);\n            };\n          }();\n          canvas.addEventListener('pointermove', handlePointermove);\n          var stopDragging = function stopDragging(originalPointerUpEvent) {\n            if (dragstartTriggered) {\n              // prevent click event being triggerd\n              // @see https://github.com/antvis/G/issues/1091\n              originalPointerUpEvent.detail = {\n                preventClick: true\n              };\n\n              // clone event first\n              var _event = originalPointerUpEvent.clone();\n\n              // drop should fire before dragend\n              // @see https://javascript.tutorialink.com/is-there-a-defined-ordering-between-dragend-and-drop-events/\n\n              if (currentDroppable) {\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/drop_event\n                _event.type = 'drop';\n                _event.target = currentDroppable;\n                currentDroppable.dispatchEvent(_event);\n              }\n\n              // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragend_event\n              _event.type = 'dragend';\n              draggableEventTarget.dispatchEvent(_event);\n              dragstartTriggered = false;\n            }\n            canvas.removeEventListener('pointermove', handlePointermove);\n          };\n          target.addEventListener('pointerup', stopDragging, {\n            once: true\n          });\n          target.addEventListener('pointerupoutside', stopDragging, {\n            once: true\n          });\n        }\n      };\n      renderingService.hooks.init.tap(DragndropPlugin.tag, function () {\n        canvas.addEventListener('pointerdown', handlePointerdown);\n      });\n      renderingService.hooks.destroy.tap(DragndropPlugin.tag, function () {\n        canvas.removeEventListener('pointerdown', handlePointerdown);\n      });\n    }\n  }]);\n}();\nDragndropPlugin.tag = 'Dragndrop';\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Plugin);\n    _this = _callSuper(this, Plugin);\n    _this.name = 'dragndrop';\n    _this.options = options;\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      this.addRenderingPlugin(new DragndropPlugin(_objectSpread({\n        overlap: 'pointer',\n        isDocumentDraggable: false,\n        isDocumentDroppable: false,\n        dragstartDistanceThreshold: 0,\n        dragstartTimeThreshold: 0\n      }, this.options)));\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n    }\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(options) {\n      Object.assign(this.plugins[0].dragndropPluginOptions, options);\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-camera-api\n * @description A simple implementation of Camera API.\n * @version 2.0.37\n * @date 4/14/2025, 2:53:44 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport { getAngle, CameraType, deg2rad, createVec3, runtime, Camera } from '@antv/g-lite';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { isString, isNumber } from '@antv/util';\nimport { quat, mat4, vec3 } from 'gl-matrix';\n\n/**\n * Provides camera action & animation.\n */\nvar AdvancedCamera = /*#__PURE__*/function (_Camera) {\n  function AdvancedCamera() {\n    var _this;\n    _classCallCheck(this, AdvancedCamera);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, AdvancedCamera, [].concat(args));\n    /**\n     * switch between multiple landmarks\n     */\n    _this.landmarks = [];\n    return _this;\n  }\n  _inherits(AdvancedCamera, _Camera);\n  return _createClass(AdvancedCamera, [{\n    key: \"rotate\",\n    value:\n    /**\n     * Changes the azimuth and elevation with respect to the current camera axes\n     * @param {Number} azimuth the relative azimuth\n     * @param {Number} elevation the relative elevation\n     * @param {Number} roll the relative roll\n     */\n    function rotate(azimuth, elevation, roll) {\n      this.relElevation = getAngle(elevation);\n      this.relAzimuth = getAngle(azimuth);\n      this.relRoll = getAngle(roll);\n      this.elevation += this.relElevation;\n      this.azimuth += this.relAzimuth;\n      this.roll += this.relRoll;\n      if (this.type === CameraType.EXPLORING) {\n        var rotX = quat.setAxisAngle(quat.create(), [1, 0, 0], deg2rad((this.rotateWorld ? 1 : -1) * this.relElevation));\n        var rotY = quat.setAxisAngle(quat.create(), [0, 1, 0], deg2rad((this.rotateWorld ? 1 : -1) * this.relAzimuth));\n        var rotZ = quat.setAxisAngle(quat.create(), [0, 0, 1], deg2rad(this.relRoll));\n        var rotQ = quat.multiply(quat.create(), rotY, rotX);\n        rotQ = quat.multiply(quat.create(), rotQ, rotZ);\n        var rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n        mat4.translate(this.matrix, this.matrix, [0, 0, -this.distance]);\n        mat4.multiply(this.matrix, this.matrix, rotMatrix);\n        mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n      } else {\n        if (Math.abs(this.elevation) > 90) {\n          return this;\n        }\n        this.computeMatrix();\n      }\n      this._getAxes();\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        this._getPosition();\n      } else if (this.type === CameraType.TRACKING) {\n        this._getFocalPoint();\n      }\n      this._update();\n      return this;\n    }\n\n    /**\n     * (right) & (up)\n     */\n  }, {\n    key: \"pan\",\n    value: function pan(tx, ty) {\n      var coords = createVec3(tx, ty, 0);\n      var pos = vec3.clone(this.position);\n      vec3.add(pos, pos, vec3.scale(vec3.create(), this.right, coords[0]));\n      vec3.add(pos, pos, vec3.scale(vec3.create(), this.up, coords[1]));\n      this._setPosition(pos);\n      this.triggerUpdate();\n      return this;\n    }\n\n    /**\n     *  n \n     */\n  }, {\n    key: \"dolly\",\n    value: function dolly(value) {\n      var n = this.forward;\n      var pos = vec3.clone(this.position);\n      var step = value * this.dollyingStep;\n      var updatedDistance = this.distance + value * this.dollyingStep;\n\n      // \n      step = Math.max(Math.min(updatedDistance, this.maxDistance), this.minDistance) - this.distance;\n      pos[0] += step * n[0];\n      pos[1] += step * n[1];\n      pos[2] += step * n[2];\n      this._setPosition(pos);\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        // \n        this._getDistance();\n      } else if (this.type === CameraType.TRACKING) {\n        // \n        vec3.add(this.focalPoint, pos, this.distanceVector);\n      }\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"cancelLandmarkAnimation\",\n    value: function cancelLandmarkAnimation() {\n      if (this.landmarkAnimationID !== undefined) {\n        this.canvas.cancelAnimationFrame(this.landmarkAnimationID);\n      }\n    }\n  }, {\n    key: \"createLandmark\",\n    value: function createLandmark(name) {\n      var _position$, _position$2, _focalPoint$, _focalPoint$2;\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _params$position = params.position,\n        position = _params$position === void 0 ? this.position : _params$position,\n        _params$focalPoint = params.focalPoint,\n        focalPoint = _params$focalPoint === void 0 ? this.focalPoint : _params$focalPoint,\n        roll = params.roll,\n        zoom = params.zoom;\n      var camera = new runtime.CameraContribution();\n      camera.setType(this.type, undefined);\n      camera.setPosition(position[0], (_position$ = position[1]) !== null && _position$ !== void 0 ? _position$ : this.position[1], (_position$2 = position[2]) !== null && _position$2 !== void 0 ? _position$2 : this.position[2]);\n      camera.setFocalPoint(focalPoint[0], (_focalPoint$ = focalPoint[1]) !== null && _focalPoint$ !== void 0 ? _focalPoint$ : this.focalPoint[1], (_focalPoint$2 = focalPoint[2]) !== null && _focalPoint$2 !== void 0 ? _focalPoint$2 : this.focalPoint[2]);\n      camera.setRoll(roll !== null && roll !== void 0 ? roll : this.roll);\n      camera.setZoom(zoom !== null && zoom !== void 0 ? zoom : this.zoom);\n      var landmark = {\n        name: name,\n        matrix: mat4.clone(camera.getWorldTransform()),\n        right: vec3.clone(camera.right),\n        up: vec3.clone(camera.up),\n        forward: vec3.clone(camera.forward),\n        position: vec3.clone(camera.getPosition()),\n        focalPoint: vec3.clone(camera.getFocalPoint()),\n        distanceVector: vec3.clone(camera.getDistanceVector()),\n        distance: camera.getDistance(),\n        dollyingStep: camera.getDollyingStep(),\n        azimuth: camera.getAzimuth(),\n        elevation: camera.getElevation(),\n        roll: camera.getRoll(),\n        relAzimuth: camera.relAzimuth,\n        relElevation: camera.relElevation,\n        relRoll: camera.relRoll,\n        zoom: camera.getZoom()\n      };\n      this.landmarks.push(landmark);\n      return landmark;\n    }\n  }, {\n    key: \"gotoLandmark\",\n    value: function gotoLandmark(name) {\n      var _this2 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var landmark = isString(name) ? this.landmarks.find(function (l) {\n        return l.name === name;\n      }) : name;\n      if (landmark) {\n        var _ref = isNumber(options) ? {\n            duration: options\n          } : options,\n          _ref$easing = _ref.easing,\n          easing = _ref$easing === void 0 ? 'linear' : _ref$easing,\n          _ref$duration = _ref.duration,\n          duration = _ref$duration === void 0 ? 100 : _ref$duration,\n          _ref$easingFunction = _ref.easingFunction,\n          easingFunction = _ref$easingFunction === void 0 ? undefined : _ref$easingFunction,\n          _ref$onfinish = _ref.onfinish,\n          onfinish = _ref$onfinish === void 0 ? undefined : _ref$onfinish,\n          _ref$onframe = _ref.onframe,\n          onframe = _ref$onframe === void 0 ? undefined : _ref$onframe;\n        var epsilon = 0.01;\n\n        // cancel ongoing animation\n        this.cancelLandmarkAnimation();\n        var destPosition = landmark.position;\n        var destFocalPoint = landmark.focalPoint;\n        var destZoom = landmark.zoom;\n        var destRoll = landmark.roll;\n        var easingFunc = easingFunction || runtime.EasingFunction(easing);\n        var timeStart;\n        var end = function end() {\n          _this2.setFocalPoint(destFocalPoint);\n          _this2.setPosition(destPosition);\n          _this2.setRoll(destRoll);\n          _this2.setZoom(destZoom);\n          _this2.computeMatrix();\n          _this2.triggerUpdate();\n          onfinish === null || onfinish === void 0 || onfinish();\n        };\n        if (duration === 0) return end();\n        var _animate = function animate(timestamp) {\n          if (timeStart === undefined) {\n            timeStart = timestamp;\n          }\n          var elapsed = timestamp - timeStart;\n          if (elapsed >= duration) {\n            end();\n            return;\n          }\n          // use the same ease function in animation system\n          var t = easingFunc(elapsed / duration);\n          var interFocalPoint = vec3.create();\n          var interPosition = vec3.create();\n          var interZoom = 1;\n          var interRoll = 0;\n          vec3.lerp(interFocalPoint, _this2.focalPoint, destFocalPoint, t);\n          vec3.lerp(interPosition, _this2.position, destPosition, t);\n          interRoll = _this2.roll * (1 - t) + destRoll * t;\n          interZoom = _this2.zoom * (1 - t) + destZoom * t;\n          _this2.setFocalPoint(interFocalPoint);\n          _this2.setPosition(interPosition);\n          _this2.setRoll(interRoll);\n          _this2.setZoom(interZoom);\n          var dist = vec3.dist(interFocalPoint, destFocalPoint) + vec3.dist(interPosition, destPosition);\n          if (dist <= epsilon && destZoom === undefined && destRoll === undefined) {\n            return end();\n          }\n          _this2.computeMatrix();\n          _this2.triggerUpdate();\n          if (elapsed < duration) {\n            onframe === null || onframe === void 0 || onframe(t);\n            _this2.landmarkAnimationID = _this2.canvas.requestAnimationFrame(_animate);\n          }\n        };\n        this.canvas.requestAnimationFrame(_animate);\n      }\n    }\n\n    /**\n     * Sets the camera to a distance such that the area covered by the bounding box is viewed.\n     */\n    // shot(displayObject: DisplayObject) {\n    //   const aabb = displayObject.getBounds();\n\n    //   if (!AABB.isEmpty(aabb)) {\n    //     this.setElevation(0);\n    //     this.setAzimuth(0);\n    //     this.setRoll(0);\n\n    //     const { halfExtents, center } = aabb;\n    //     const maxDim = Math.max(halfExtents[0] * 2, halfExtents[1] * 2);\n\n    //     const cc = center.map((c: number) => Math.round(c * 1000) / 1000) as [number, number, number];\n\n    //     if (maxDim !== 0) {\n    //       const d = (1.5 * maxDim) / Math.tan(this.fov * DEG_2_RAD);\n    //       this.setPosition([cc[0], cc[1], cc[2] + d]);\n    //     }\n\n    //     this.setFocalPoint(cc);\n    //   }\n    // }\n  }]);\n}(Camera);\n\nruntime.CameraContribution = AdvancedCamera;\n\nexport { AdvancedCamera };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-dom-mutation-observer-api\n * @description A simple implementation of DOM MutationObserver API.\n * @version 2.0.34\n * @date 4/14/2025, 2:53:58 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport { ElementEvent, MutationEvent, runtime } from '@antv/g-lite';\n\nvar MutationRecord = /*#__PURE__*/function () {\n  function MutationRecord(type, target) {\n    _classCallCheck(this, MutationRecord);\n    this.addedNodes = [];\n    this.attributeName = null;\n    this.attributeNamespace = null;\n    this.nextSibling = null;\n    this.oldValue = null;\n    this.previousSibling = null;\n    this.removedNodes = [];\n    this.type = type;\n    this.target = target;\n  }\n  return _createClass(MutationRecord, null, [{\n    key: \"copy\",\n    value: function copy(original) {\n      var record = new MutationRecord(original.type, original.target);\n      record.addedNodes = original.addedNodes.slice();\n      record.removedNodes = original.removedNodes.slice();\n      record.previousSibling = original.previousSibling;\n      record.nextSibling = original.nextSibling;\n      record.attributeName = original.attributeName;\n      record.attributeNamespace = original.attributeNamespace;\n      record.oldValue = original.oldValue;\n      return record;\n    }\n  }]);\n}();\n\nvar uidCounter = 0;\nvar registrationsTable = new WeakMap();\nvar Registration = /*#__PURE__*/function () {\n  function Registration(observer, target, options) {\n    _classCallCheck(this, Registration);\n    this.transientObservedNodes = [];\n    this.observer = observer;\n    this.target = target;\n    this.options = options;\n  }\n  return _createClass(Registration, [{\n    key: \"enqueue\",\n    value: function enqueue(record) {\n      var records = this.observer.records;\n      var length = records.length;\n\n      // There are cases where we replace the last record with the new record.\n      // For example if the record represents the same mutation we need to use\n      // the one with the oldValue. If we get same record (this can happen as we\n      // walk up the tree) we ignore the new record.\n      if (records.length > 0) {\n        var lastRecord = records[length - 1];\n        var recordToReplaceLast = selectRecord(lastRecord, record);\n        if (recordToReplaceLast) {\n          records[length - 1] = recordToReplaceLast;\n          return;\n        }\n      } else {\n        scheduleCallback(this.observer);\n      }\n      records[length] = record;\n    }\n  }, {\n    key: \"addListeners\",\n    value: function addListeners() {\n      this.addListeners_(this.target);\n    }\n  }, {\n    key: \"addListeners_\",\n    value: function addListeners_(node) {\n      var options = this.options;\n      if (options.attributes) node.addEventListener(ElementEvent.ATTR_MODIFIED, this, true);\n\n      // if (options.characterData) node.addEventListener('DOMCharacterDataModified', this, true);\n\n      if (options.childList) node.addEventListener(ElementEvent.INSERTED, this, true);\n      if (options.childList || options.subtree) node.addEventListener(ElementEvent.REMOVED, this, true);\n    }\n  }, {\n    key: \"removeListeners\",\n    value: function removeListeners() {\n      this.removeListeners_(this.target);\n    }\n  }, {\n    key: \"removeListeners_\",\n    value: function removeListeners_(node) {\n      var options = this.options;\n      if (options.attributes) node.removeEventListener(ElementEvent.ATTR_MODIFIED, this, true);\n\n      // if (options.characterData) node.removeEventListener('DOMCharacterDataModified', this, true);\n\n      if (options.childList) node.removeEventListener(ElementEvent.INSERTED, this, true);\n      if (options.childList || options.subtree) node.removeEventListener(ElementEvent.REMOVED, this, true);\n    }\n\n    /**\n     * Adds a transient observer on node. The transient observer gets removed\n     * next time we deliver the change records.\n     */\n    // addTransientObserver(node: IElement) {\n    //   // Don't add transient observers on the target itself. We already have all\n    //   // the required listeners set up on the target.\n    //   if (node === this.target) return;\n\n    //   this.addListeners_(node);\n    //   this.transientObservedNodes.push(node);\n    //   let registrations = registrationsTable.get(node);\n    //   if (!registrations) registrationsTable.set(node, (registrations = []));\n\n    //   // We know that registrations does not contain this because we already\n    //   // checked if node === this.target.\n    //   registrations.push(this);\n    // }\n  }, {\n    key: \"removeTransientObservers\",\n    value: function removeTransientObservers() {\n      var transientObservedNodes = this.transientObservedNodes;\n      this.transientObservedNodes = [];\n      transientObservedNodes.forEach(function (node) {\n        // Transient observers are never added to the target.\n        this.removeListeners_(node);\n        var registrations = registrationsTable.get(node);\n        for (var i = 0; i < registrations.length; i++) {\n          if (registrations[i] === this) {\n            registrations.splice(i, 1);\n            // Each node can only have one registered observer associated with\n            // this observer.\n            break;\n          }\n        }\n      }, this);\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(e) {\n      // Stop propagation since we are managing the propagation manually.\n      // This means that other mutation events on the page will not work\n      // correctly but that is by design.\n      e.stopImmediatePropagation();\n      var record;\n      var target;\n      switch (e.type) {\n        case ElementEvent.ATTR_MODIFIED:\n          // http://dom.spec.whatwg.org/#concept-mo-queue-attributes\n\n          var name = e.attrName;\n          // @ts-ignore\n          var namespace = e.relatedNode.namespaceURI;\n          target = e.target;\n\n          // 1.\n          record = getRecord('attributes', target);\n          record.attributeName = name;\n          record.attributeNamespace = namespace;\n\n          // 2.\n          var oldValue = e.attrChange === MutationEvent.ADDITION ? null : e.prevValue;\n          forEachAncestorAndObserverEnqueueRecord(target, function (options) {\n            // 3.1, 4.2\n            if (!options.attributes) return;\n\n            // 3.2, 4.3\n            if (options.attributeFilter && options.attributeFilter.length && options.attributeFilter.indexOf(name) === -1 && options.attributeFilter.indexOf(namespace) === -1) {\n              return;\n            }\n            // 3.3, 4.4\n            if (options.attributeOldValue) return getRecordWithOldValue(oldValue);\n\n            // 3.4, 4.5\n            return record;\n          });\n          break;\n\n        // case 'DOMCharacterDataModified':\n        //   // http://dom.spec.whatwg.org/#concept-mo-queue-characterdata\n        //   var target = e.target;\n\n        //   // 1.\n        //   var record = getRecord('characterData', target);\n\n        //   // 2.\n        //   var oldValue = e.prevValue;\n\n        //   forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n        //     // 3.1, 4.2\n        //     if (!options.characterData)\n        //       return;\n\n        //     // 3.2, 4.3\n        //     if (options.characterDataOldValue)\n        //       return getRecordWithOldValue(oldValue);\n\n        //     // 3.3, 4.4\n        //     return record;\n        //   });\n\n        //   break;\n\n        case ElementEvent.REMOVED:\n        // this.addTransientObserver(e.target as IElement);\n        // Fall through.\n        case ElementEvent.INSERTED:\n          // http://dom.spec.whatwg.org/#concept-mo-queue-childlist\n          target = e.relatedNode;\n          var changedNode = e.target;\n          var addedNodes;\n          var removedNodes;\n          if (e.type === ElementEvent.INSERTED) {\n            addedNodes = [changedNode];\n            removedNodes = [];\n          } else {\n            addedNodes = [];\n            removedNodes = [changedNode];\n          }\n          var previousSibling = changedNode.previousSibling;\n          var nextSibling = changedNode.nextSibling;\n\n          // 1.\n          record = getRecord('childList', target);\n          record.addedNodes = addedNodes;\n          record.removedNodes = removedNodes;\n          record.previousSibling = previousSibling;\n          record.nextSibling = nextSibling;\n          forEachAncestorAndObserverEnqueueRecord(target, function (options) {\n            // 2.1, 3.2\n            if (!options.childList) return;\n\n            // 2.2, 3.3\n            return record;\n          });\n      }\n      clearRecords();\n    }\n  }]);\n}();\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n * @see https://github.com/googlearchive/MutationObservers/blob/master/MutationObserver.js\n */\nvar MutationObserver = /*#__PURE__*/function () {\n  function MutationObserver(callback) {\n    _classCallCheck(this, MutationObserver);\n    this.nodes = [];\n    this.records = [];\n    this.uid = uidCounter++;\n    this.callback = callback;\n  }\n  return _createClass(MutationObserver, [{\n    key: \"observe\",\n    value: function observe(target, options) {\n      // 1.1\n      if (!options.childList && !options.attributes && !options.characterData ||\n      // 1.2\n      options.attributeOldValue && !options.attributes ||\n      // 1.3\n      options.attributeFilter && options.attributeFilter.length && !options.attributes ||\n      // 1.4\n      options.characterDataOldValue && !options.characterData) {\n        throw new SyntaxError();\n      }\n      var registrations = registrationsTable.get(target);\n      if (!registrations) registrationsTable.set(target, registrations = []);\n\n      // 2\n      // If target's list of registered observers already includes a registered\n      // observer associated with the context object, replace that registered\n      // observer's options with options.\n      var registration;\n      for (var i = 0; i < registrations.length; i++) {\n        if (registrations[i].observer === this) {\n          registration = registrations[i];\n          registration.removeListeners();\n          registration.options = options;\n          break;\n        }\n      }\n\n      // 3.\n      // Otherwise, add a new registered observer to target's list of registered\n      // observers with the context object as the observer and options as the\n      // options, and add target to context object's list of nodes on which it\n      // is registered.\n      if (!registration) {\n        registration = new Registration(this, target, options);\n        registrations.push(registration);\n        this.nodes.push(target);\n      }\n      registration.addListeners();\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      var _this = this;\n      this.nodes.forEach(function (node) {\n        var registrations = registrationsTable.get(node);\n        for (var i = 0; i < registrations.length; i++) {\n          var registration = registrations[i];\n          if (registration.observer === _this) {\n            registration.removeListeners();\n            registrations.splice(i, 1);\n            // Each node can only have one registered observer associated with\n            // this observer.\n            break;\n          }\n        }\n      }, this);\n      this.records = [];\n    }\n  }, {\n    key: \"takeRecords\",\n    value: function takeRecords() {\n      var copyOfRecords = this.records;\n      this.records = [];\n      return copyOfRecords;\n    }\n  }]);\n}();\n\n// We keep track of the two (possibly one) records used in a single mutation.\nvar currentRecord;\nvar recordWithOldValue;\n\n/**\n * Creates a record without |oldValue| and caches it as |currentRecord| for\n * later use.\n */\nfunction getRecord(type, target) {\n  return currentRecord = new MutationRecord(type, target);\n}\n\n/**\n * Gets or creates a record with |oldValue| based in the |currentRecord|\n */\nfunction getRecordWithOldValue(oldValue) {\n  if (recordWithOldValue) return recordWithOldValue;\n  recordWithOldValue = MutationRecord.copy(currentRecord);\n  recordWithOldValue.oldValue = oldValue;\n  return recordWithOldValue;\n}\nfunction clearRecords() {\n  currentRecord = recordWithOldValue = undefined;\n}\n\n/**\n * Whether the record represents a record from the current\n * mutation event.\n */\nfunction recordRepresentsCurrentMutation(record) {\n  return record === recordWithOldValue || record === currentRecord;\n}\n\n/**\n * Selects which record, if any, to replace the last record in the queue.\n * This returns |null| if no record should be replaced.\n */\nfunction selectRecord(lastRecord, newRecord) {\n  if (lastRecord === newRecord) return lastRecord;\n\n  // Check if the the record we are adding represents the same record. If\n  // so, we keep the one with the oldValue in it.\n  if (recordWithOldValue && recordRepresentsCurrentMutation(lastRecord)) return recordWithOldValue;\n  return null;\n}\nfunction removeTransientObserversFor(observer) {\n  observer.nodes.forEach(function (node) {\n    var registrations = registrationsTable.get(node);\n    if (!registrations) return;\n    registrations.forEach(function (registration) {\n      if (registration.observer === observer) registration.removeTransientObservers();\n    });\n  });\n}\n\n/**\n * This function is used for the \"For each registered observer observer (with\n * observer's options as options) in target's list of registered observers,\n * run these substeps:\" and the \"For each ancestor ancestor of target, and for\n * each registered observer observer (with options options) in ancestor's list\n * of registered observers, run these substeps:\" part of the algorithms. The\n * |options.subtree| is checked to ensure that the callback is called\n * correctly.\n *\n * @param {Node} target\n * @param {function(MutationObserverInit):MutationRecord} callback\n */\nfunction forEachAncestorAndObserverEnqueueRecord(target, callback) {\n  for (var node = target; node; node = node.parentNode) {\n    var registrations = registrationsTable.get(node);\n    if (registrations) {\n      for (var j = 0; j < registrations.length; j++) {\n        var registration = registrations[j];\n        var _options = registration.options;\n\n        // Only target ignores subtree.\n        if (node !== target && !_options.subtree) continue;\n        var record = callback(_options);\n        if (record) registration.enqueue(record);\n      }\n    }\n  }\n}\n\n// This is used to ensure that we never schedule 2 callas to setImmediate\nvar isScheduled = false;\n\n// Keep track of observers that needs to be notified next time.\nvar scheduledObservers = [];\n\n/**\n * Schedules |dispatchCallback| to be called in the future.\n */\nfunction scheduleCallback(observer) {\n  scheduledObservers.push(observer);\n  if (!isScheduled) {\n    isScheduled = true;\n    // setImmediate(dispatchCallbacks);\n    if (typeof runtime.globalThis !== 'undefined') {\n      runtime.globalThis.setTimeout(dispatchCallbacks);\n    } else {\n      dispatchCallbacks();\n    }\n  }\n}\nfunction dispatchCallbacks() {\n  // http://dom.spec.whatwg.org/#mutation-observers\n\n  isScheduled = false; // Used to allow a new setImmediate call above.\n\n  var observers = scheduledObservers;\n  scheduledObservers = [];\n  // Sort observers based on their creation UID (incremental).\n  observers.sort(function (o1, o2) {\n    return o1.uid - o2.uid;\n  });\n  var anyNonEmpty = false;\n  observers.forEach(function (observer) {\n    // 2.1, 2.2\n    var queue = observer.takeRecords();\n    // 2.3. Remove all transient registered observers whose observer is mo.\n    removeTransientObserversFor(observer);\n\n    // 2.4\n    if (queue.length) {\n      // @ts-ignore\n      observer.callback(queue, observer);\n      anyNonEmpty = true;\n    }\n  });\n\n  // 3.\n  if (anyNonEmpty) dispatchCallbacks();\n}\n\nexport { MutationObserver, MutationRecord, Registration };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-web-animations-api\n * @description A simple implementation of Web Animations API.\n * @version 2.1.23\n * @date 4/14/2025, 2:55:29 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport { FederatedEvent, ERROR_MSG_METHOD_NOT_IMPLEMENTED, propertyMetadataCache, runtime } from '@antv/g-lite';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { clamp, isNumber, isNil } from '@antv/util';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nvar AnimationEvent = /*#__PURE__*/function (_FederatedEvent) {\n  function AnimationEvent(manager, target, currentTime, timelineTime) {\n    var _this;\n    _classCallCheck(this, AnimationEvent);\n    _this = _callSuper(this, AnimationEvent, [manager]);\n\n    // @ts-ignore\n    _this.currentTime = currentTime;\n    _this.timelineTime = timelineTime;\n    _this.target = target;\n    _this.type = 'finish';\n    _this.bubbles = false;\n    // @ts-ignore\n    _this.currentTarget = target;\n    _this.defaultPrevented = false;\n    _this.eventPhase = _this.AT_TARGET;\n    _this.timeStamp = Date.now();\n    _this.currentTime = currentTime;\n    _this.timelineTime = timelineTime;\n    return _this;\n  }\n  _inherits(AnimationEvent, _FederatedEvent);\n  return _createClass(AnimationEvent);\n}(FederatedEvent);\n\nvar sequenceNumber = 0;\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nvar Animation = /*#__PURE__*/function () {\n  function Animation(effect, timeline) {\n    var _this$effect;\n    _classCallCheck(this, Animation);\n    this.currentTimePending = false;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n     */\n    // playState: AnimationPlayState;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n     */\n    this._currentTime = 0;\n    this._playbackRate = 1;\n    this._inTimeline = true;\n    this.effect = effect;\n    effect.animation = this;\n    this.timeline = timeline;\n    this.id = \"\".concat(sequenceNumber++);\n    this._inEffect = !!this.effect.update(0);\n    this._totalDuration = Number((_this$effect = this.effect) === null || _this$effect === void 0 ? void 0 : _this$effect.getComputedTiming().endTime);\n    this._holdTime = 0;\n    this._paused = false;\n    this.oldPlayState = 'idle';\n    this.updatePromises();\n  }\n\n  /**\n   * state machine,\n   * resolve/reject ready/finished Promise according to current state\n   */\n  return _createClass(Animation, [{\n    key: \"pending\",\n    get:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/effect\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/timeline\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/id\n     */\n\n    // animation: InternalAnimation | null;\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n     */\n    function get() {\n      return this._startTime === null && !this._paused && this.playbackRate !== 0 || this.currentTimePending;\n    }\n  }, {\n    key: \"playState\",\n    get: function get() {\n      if (this._idle) return 'idle';\n      if (this._isFinished) return 'finished';\n      if (this._paused) return 'paused';\n      return 'running';\n    }\n\n    /**\n     * record previos state\n     */\n  }, {\n    key: \"ready\",\n    get:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n     * @example\n      animation.pause();\n      animation.ready.then(function() {\n        // Displays 'running'\n        alert(animation.playState);\n      });\n      animation.play();\n     */\n    function get() {\n      var _this = this;\n      if (!this.readyPromise) {\n        if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n          this.timeline.animationsWithPromises.push(this);\n        }\n        this.readyPromise = new Promise(function (resolve, reject) {\n          _this.resolveReadyPromise = function () {\n            resolve(_this);\n          };\n          _this.rejectReadyPromise = function () {\n            reject(new Error());\n          };\n        });\n        if (!this.pending) {\n          this.resolveReadyPromise();\n        }\n      }\n      return this.readyPromise;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n     * @example\n      Promise.all(\n        elem.getAnimations().map(\n          function(animation) {\n            return animation.finished\n          }\n        )\n      ).then(\n        function() {\n          return elem.remove();\n        }\n      );\n     */\n  }, {\n    key: \"finished\",\n    get: function get() {\n      var _this2 = this;\n      if (!this.finishedPromise) {\n        if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n          this.timeline.animationsWithPromises.push(this);\n        }\n        this.finishedPromise = new Promise(function (resolve, reject) {\n          _this2.resolveFinishedPromise = function () {\n            resolve(_this2);\n          };\n          _this2.rejectFinishedPromise = function () {\n            reject(new Error());\n          };\n        });\n        if (this.playState === 'finished') {\n          this.resolveFinishedPromise();\n        }\n      }\n      return this.finishedPromise;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/onfinish\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/oncancel\n     */\n\n    /**\n     * get called after each frame when running\n     */\n  }, {\n    key: \"currentTime\",\n    get: function get() {\n      this.updatePromises();\n      return this._idle || this.currentTimePending ? null : this._currentTime;\n    },\n    set: function set(newTime) {\n      newTime = Number(newTime);\n      if (isNaN(newTime)) return;\n      this.timeline.restart();\n      if (!this._paused && this._startTime !== null) {\n        var _this$timeline;\n        this._startTime = Number((_this$timeline = this.timeline) === null || _this$timeline === void 0 ? void 0 : _this$timeline.currentTime) - newTime / this.playbackRate;\n      }\n      this.currentTimePending = false;\n      if (this._currentTime === newTime) {\n        return;\n      }\n      if (this._idle) {\n        this._idle = false;\n        this._paused = true;\n      }\n      this.tickCurrentTime(newTime, true);\n      this.timeline.applyDirtiedAnimation(this);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/startTime\n     */\n  }, {\n    key: \"startTime\",\n    get: function get() {\n      return this._startTime;\n    },\n    set: function set(newTime) {\n      if (newTime !== null) {\n        this.updatePromises();\n        newTime = Number(newTime);\n        if (isNaN(newTime)) return;\n        if (this._paused || this._idle) return;\n        this._startTime = newTime;\n        this.tickCurrentTime((Number(this.timeline.currentTime) - this._startTime) * this.playbackRate);\n        this.timeline.applyDirtiedAnimation(this);\n        this.updatePromises();\n      }\n    }\n  }, {\n    key: \"playbackRate\",\n    get: function get() {\n      return this._playbackRate;\n    },\n    set: function set(value) {\n      if (value === this._playbackRate) {\n        return;\n      }\n      this.updatePromises();\n      var oldCurrentTime = this.currentTime;\n      this._playbackRate = value;\n      this.startTime = null;\n      if (this.playState !== 'paused' && this.playState !== 'idle') {\n        this._finishedFlag = false;\n        this._idle = false;\n        this.ensureAlive();\n        this.timeline.applyDirtiedAnimation(this);\n      }\n      if (oldCurrentTime !== null) {\n        this.currentTime = oldCurrentTime;\n      }\n      this.updatePromises();\n    }\n  }, {\n    key: \"_isFinished\",\n    get: function get() {\n      return !this._idle && (this._playbackRate > 0 && Number(this._currentTime) >= this._totalDuration || this._playbackRate < 0 && Number(this._currentTime) <= 0);\n    }\n  }, {\n    key: \"totalDuration\",\n    get: function get() {\n      return this._totalDuration;\n    }\n  }, {\n    key: \"_needsTick\",\n    get: function get() {\n      return this.pending || this.playState === 'running' || !this._finishedFlag;\n    }\n  }, {\n    key: \"updatePromises\",\n    value: function updatePromises() {\n      var oldPlayState = this.oldPlayState;\n      var newPlayState = this.pending ? 'pending' : this.playState;\n      if (this.readyPromise && newPlayState !== oldPlayState) {\n        if (newPlayState === 'idle') {\n          this.rejectReadyPromise();\n          this.readyPromise = undefined;\n        } else if (oldPlayState === 'pending') {\n          this.resolveReadyPromise();\n        } else if (newPlayState === 'pending') {\n          this.readyPromise = undefined;\n        }\n      }\n      if (this.finishedPromise && newPlayState !== oldPlayState) {\n        if (newPlayState === 'idle') {\n          this.rejectFinishedPromise();\n          this.finishedPromise = undefined;\n        } else if (newPlayState === 'finished') {\n          this.resolveFinishedPromise();\n        } else if (oldPlayState === 'finished') {\n          this.finishedPromise = undefined;\n        }\n      }\n      this.oldPlayState = newPlayState;\n      return this.readyPromise || this.finishedPromise;\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.updatePromises();\n      this._paused = false;\n      if (this._isFinished || this._idle) {\n        this.rewind();\n        this._startTime = null;\n      }\n      this._finishedFlag = false;\n      this._idle = false;\n      this.ensureAlive();\n      this.timeline.applyDirtiedAnimation(this);\n      if (this.timeline.animations.indexOf(this) === -1) {\n        this.timeline.animations.push(this);\n      }\n      this.updatePromises();\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.updatePromises();\n      if (this.currentTime) {\n        this._holdTime = this.currentTime;\n      }\n      if (!this._isFinished && !this._paused && !this._idle) {\n        this.currentTimePending = true;\n      } else if (this._idle) {\n        this.rewind();\n        this._idle = false;\n      }\n      this._startTime = null;\n      this._paused = true;\n      this.updatePromises();\n    }\n  }, {\n    key: \"finish\",\n    value: function finish() {\n      this.updatePromises();\n      if (this._idle) return;\n      this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n      this._startTime = this._totalDuration - this.currentTime;\n      this.currentTimePending = false;\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      var _this3 = this;\n      this.updatePromises();\n      if (!this._inEffect) return;\n      this._inEffect = false;\n      this._idle = true;\n      this._paused = false;\n      this._finishedFlag = true;\n      this._currentTime = 0;\n      this._startTime = null;\n      this.effect.update(null);\n      // effects are invalid after cancellation as the animation state\n      // needs to un-apply.\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n\n      /**\n       * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n       * 2. Let current finished promise be a new promise\n       * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n       */\n      // if (this.finishedPromise) {\n      //   this.rejectFinishedPromise();\n      //   this.finishedPromise = undefined;\n      // }\n\n      if (this.oncancel) {\n        var event = new AnimationEvent(null, this, this.currentTime, null);\n        setTimeout(function () {\n          _this3.oncancel(event);\n        });\n      }\n    }\n  }, {\n    key: \"reverse\",\n    value: function reverse() {\n      this.updatePromises();\n      var oldCurrentTime = this.currentTime;\n      this.playbackRate *= -1;\n      this.play();\n      if (oldCurrentTime !== null) {\n        this.currentTime = oldCurrentTime;\n      }\n      this.updatePromises();\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n     */\n  }, {\n    key: \"updatePlaybackRate\",\n    value: function updatePlaybackRate(playbackRate) {\n      this.playbackRate = playbackRate;\n    }\n  }, {\n    key: \"targetAnimations\",\n    value: function targetAnimations() {\n      var _this$effect2;\n      var target = (_this$effect2 = this.effect) === null || _this$effect2 === void 0 ? void 0 : _this$effect2.target;\n      return target.getAnimations();\n    }\n  }, {\n    key: \"markTarget\",\n    value: function markTarget() {\n      var animations = this.targetAnimations();\n      if (animations.indexOf(this) === -1) {\n        animations.push(this);\n      }\n    }\n  }, {\n    key: \"unmarkTarget\",\n    value: function unmarkTarget() {\n      var animations = this.targetAnimations();\n      var index = animations.indexOf(this);\n      if (index !== -1) {\n        animations.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"tick\",\n    value: function tick(timelineTime, isAnimationFrame) {\n      if (!this._idle && !this._paused) {\n        if (this._startTime === null) {\n          if (isAnimationFrame) {\n            this.startTime = timelineTime - this._currentTime / this.playbackRate;\n          }\n        } else if (!this._isFinished) {\n          this.tickCurrentTime((timelineTime - this._startTime) * this.playbackRate);\n        }\n      }\n      if (isAnimationFrame) {\n        this.currentTimePending = false;\n        this.fireEvents(timelineTime);\n      }\n    }\n  }, {\n    key: \"rewind\",\n    value: function rewind() {\n      if (this.playbackRate >= 0) {\n        this.currentTime = 0;\n      } else if (this._totalDuration < Infinity) {\n        this.currentTime = this._totalDuration;\n      } else {\n        throw new Error('Unable to rewind negative playback rate animation with infinite duration');\n      }\n    }\n  }, {\n    key: \"persist\",\n    value: function persist() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(type, listener, options) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type, listener, options) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"commitStyles\",\n    value:\n    // replaceState: AnimationReplaceState;\n    function commitStyles() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"ensureAlive\",\n    value: function ensureAlive() {\n      // If an animation is playing backwards and is not fill backwards/both\n      // then it should go out of effect when it reaches the start of its\n      // active interval (currentTime === 0).\n      if (this.playbackRate < 0 && this.currentTime === 0) {\n        var _this$effect3;\n        this._inEffect = !!((_this$effect3 = this.effect) !== null && _this$effect3 !== void 0 && _this$effect3.update(-1));\n      } else {\n        var _this$effect4;\n        this._inEffect = !!((_this$effect4 = this.effect) !== null && _this$effect4 !== void 0 && _this$effect4.update(this.currentTime));\n      }\n      if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n        this._inTimeline = true;\n        this.timeline.animations.push(this);\n      }\n    }\n  }, {\n    key: \"tickCurrentTime\",\n    value: function tickCurrentTime(newTime, ignoreLimit) {\n      if (newTime !== this._currentTime) {\n        this._currentTime = newTime;\n        if (this._isFinished && !ignoreLimit) {\n          this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n        }\n        this.ensureAlive();\n      }\n    }\n  }, {\n    key: \"fireEvents\",\n    value: function fireEvents(baseTime) {\n      var _this4 = this;\n      if (this._isFinished) {\n        if (!this._finishedFlag) {\n          if (this.onfinish) {\n            var event = new AnimationEvent(null, this, this.currentTime, baseTime);\n            setTimeout(function () {\n              if (_this4.onfinish) {\n                _this4.onfinish(event);\n              }\n            });\n          }\n          this._finishedFlag = true;\n        }\n      } else {\n        if (this.onframe && this.playState === 'running') {\n          var _event = new AnimationEvent(null, this, this.currentTime, baseTime);\n          this.onframe(_event);\n        }\n        this._finishedFlag = false;\n      }\n    }\n  }]);\n}();\n\n/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gatan Renaudeau 2014 - 2015  MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\nvar float32ArraySupported = typeof Float32Array === 'function';\nvar A = function A(aA1, aA2) {\n  return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n};\nvar B = function B(aA1, aA2) {\n  return 3.0 * aA2 - 6.0 * aA1;\n};\nvar C = function C(aA1) {\n  return 3.0 * aA1;\n};\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nvar calcBezier = function calcBezier(aT, aA1, aA2) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n};\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nvar getSlope = function getSlope(aT, aA1, aA2) {\n  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n};\nvar binarySubdivide = function binarySubdivide(aX, aA, aB, mX1, mX2) {\n  var currentX;\n  var currentT;\n  var i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) aB = currentT;else aA = currentT;\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n};\nvar newtonRaphsonIterate = function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n    var currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) return aGuessT;\n    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n};\nvar bezier = function bezier(mX1, mY1, mX2, mY2) {\n  if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1)) throw new Error('bezier x values must be in [0, 1] range');\n  if (mX1 === mY1 && mX2 === mY2) return function (t) {\n    return t;\n  };\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n  var getTForX = function getTForX(aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) intervalStart += kSampleStepSize;\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    if (initialSlope === 0.0) return guessForT;\n    return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n  };\n  return function (t) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (t === 0 || t === 1) return t;\n    return calcBezier(getTForX(t), mY1, mY2);\n  };\n};\n\nvar convertToDash = function convertToDash(str) {\n  str = str.replace(/([A-Z])/g, function (letter) {\n    return \"-\".concat(letter.toLowerCase());\n  });\n\n  // Remove first dash\n  return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nvar Quad = function Quad(t) {\n  return Math.pow(t, 2);\n};\nvar Cubic = function Cubic(t) {\n  return Math.pow(t, 3);\n};\nvar Quart = function Quart(t) {\n  return Math.pow(t, 4);\n};\nvar Quint = function Quint(t) {\n  return Math.pow(t, 5);\n};\nvar Expo = function Expo(t) {\n  return Math.pow(t, 6);\n};\nvar Sine = function Sine(t) {\n  return 1 - Math.cos(t * Math.PI / 2);\n};\nvar Circ = function Circ(t) {\n  return 1 - Math.sqrt(1 - t * t);\n};\nvar Back = function Back(t) {\n  return t * t * (3 * t - 2);\n};\nvar Bounce = function Bounce(t) {\n  var pow2;\n  var b = 4;\n  while (t < ((pow2 = Math.pow(2, --b)) - 1) / 11) {}\n  return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow((pow2 * 3 - 2) / 22 - t, 2);\n};\nvar Elastic = function Elastic(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var _params = _slicedToArray(params, 2),\n    _params$ = _params[0],\n    amplitude = _params$ === void 0 ? 1 : _params$,\n    _params$2 = _params[1],\n    period = _params$2 === void 0 ? 0.5 : _params$2;\n  var a = clamp(Number(amplitude), 1, 10);\n  var p = clamp(Number(period), 0.1, 2);\n  if (t === 0 || t === 1) return t;\n  return -a * Math.pow(2, 10 * (t - 1)) * Math.sin((t - 1 - p / (Math.PI * 2) * Math.asin(1 / a)) * (Math.PI * 2) / p);\n};\nvar Spring = function Spring(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var duration = arguments.length > 2 ? arguments[2] : undefined;\n  var _params2 = _slicedToArray(params, 4),\n    _params2$ = _params2[0],\n    mass = _params2$ === void 0 ? 1 : _params2$,\n    _params2$2 = _params2[1],\n    stiffness = _params2$2 === void 0 ? 100 : _params2$2,\n    _params2$3 = _params2[2],\n    damping = _params2$3 === void 0 ? 10 : _params2$3,\n    _params2$4 = _params2[3],\n    velocity = _params2$4 === void 0 ? 0 : _params2$4;\n  mass = clamp(mass, 0.1, 1000);\n  stiffness = clamp(stiffness, 0.1, 1000);\n  damping = clamp(damping, 0.1, 1000);\n  velocity = clamp(velocity, 0.1, 1000);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n  var progress = duration ? duration * t / 1000 : t;\n  if (zeta < 1) {\n    progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n  } else {\n    progress = (a + b * progress) * Math.exp(-progress * w0);\n  }\n  if (t === 0 || t === 1) return t;\n  return 1 - progress;\n};\n\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nvar Steps = function Steps(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var _ref = params,\n    _ref2 = _slicedToArray(_ref, 2),\n    _ref2$ = _ref2[0],\n    steps = _ref2$ === void 0 ? 10 : _ref2$,\n    type = _ref2[1];\n  var trunc = type === 'start' ? Math.ceil : Math.floor;\n  return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n\n// @ts-ignore\nvar Bezier = function Bezier(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var _params3 = _slicedToArray(params, 4),\n    mX1 = _params3[0],\n    mY1 = _params3[1],\n    mX2 = _params3[2],\n    mY2 = _params3[3];\n  return bezier(mX1, mY1, mX2, mY2)(t);\n};\n\n/** The default `ease-in` easing function */\nvar easein = bezier(0.42, 0.0, 1.0, 1.0);\n\n/** Converts easing functions to their `out`counter parts */\nvar EaseOut = function EaseOut(ease) {\n  return function (t) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var duration = arguments.length > 2 ? arguments[2] : undefined;\n    return 1 - ease(1 - t, params, duration);\n  };\n};\n\n/** Converts easing functions to their `in-out` counter parts */\nvar EaseInOut = function EaseInOut(ease) {\n  return function (t) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var duration = arguments.length > 2 ? arguments[2] : undefined;\n    return t < 0.5 ? ease(t * 2, params, duration) / 2 : 1 - ease(t * -2 + 2, params, duration) / 2;\n  };\n};\n\n/** Converts easing functions to their `out-in` counter parts */\nvar EaseOutIn = function EaseOutIn(ease) {\n  return function (t) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var duration = arguments.length > 2 ? arguments[2] : undefined;\n    return t < 0.5 ? (1 - ease(1 - t * 2, params, duration)) / 2 : (ease(t * 2 - 1, params, duration) + 1) / 2;\n  };\n};\n\n/**\n * The default list of easing functions, do note this is different from {@link EASING}\n */\n\nvar EasingFunctions = {\n  steps: Steps,\n  'step-start': function stepStart(t) {\n    return Steps(t, [1, 'start']);\n  },\n  'step-end': function stepEnd(t) {\n    return Steps(t, [1, 'end']);\n  },\n  linear: function linear(t) {\n    return t;\n  },\n  'cubic-bezier': Bezier,\n  ease: function ease(t) {\n    return Bezier(t, [0.25, 0.1, 0.25, 1.0]);\n  },\n  \"in\": easein,\n  out: EaseOut(easein),\n  'in-out': EaseInOut(easein),\n  'out-in': EaseOutIn(easein),\n  'in-quad': Quad,\n  'out-quad': EaseOut(Quad),\n  'in-out-quad': EaseInOut(Quad),\n  'out-in-quad': EaseOutIn(Quad),\n  'in-cubic': Cubic,\n  'out-cubic': EaseOut(Cubic),\n  'in-out-cubic': EaseInOut(Cubic),\n  'out-in-cubic': EaseOutIn(Cubic),\n  'in-quart': Quart,\n  'out-quart': EaseOut(Quart),\n  'in-out-quart': EaseInOut(Quart),\n  'out-in-quart': EaseOutIn(Quart),\n  'in-quint': Quint,\n  'out-quint': EaseOut(Quint),\n  'in-out-quint': EaseInOut(Quint),\n  'out-in-quint': EaseOutIn(Quint),\n  'in-expo': Expo,\n  'out-expo': EaseOut(Expo),\n  'in-out-expo': EaseInOut(Expo),\n  'out-in-expo': EaseOutIn(Expo),\n  'in-sine': Sine,\n  'out-sine': EaseOut(Sine),\n  'in-out-sine': EaseInOut(Sine),\n  'out-in-sine': EaseOutIn(Sine),\n  'in-circ': Circ,\n  'out-circ': EaseOut(Circ),\n  'in-out-circ': EaseInOut(Circ),\n  'out-in-circ': EaseOutIn(Circ),\n  'in-back': Back,\n  'out-back': EaseOut(Back),\n  'in-out-back': EaseInOut(Back),\n  'out-in-back': EaseOutIn(Back),\n  'in-bounce': Bounce,\n  'out-bounce': EaseOut(Bounce),\n  'in-out-bounce': EaseInOut(Bounce),\n  'out-in-bounce': EaseOutIn(Bounce),\n  'in-elastic': Elastic,\n  'out-elastic': EaseOut(Elastic),\n  'in-out-elastic': EaseInOut(Elastic),\n  'out-in-elastic': EaseOutIn(Elastic),\n  spring: Spring,\n  'spring-in': Spring,\n  'spring-out': EaseOut(Spring),\n  'spring-in-out': EaseInOut(Spring),\n  'spring-out-in': EaseOutIn(Spring)\n};\n\n/**\n * Convert string easing to their proper form\n */\nvar complexEasingSyntax = function complexEasingSyntax(ease) {\n  return convertToDash(ease).replace(/^ease-/, '') // Remove the \"ease-\" keyword\n  .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n  .toLowerCase().trim();\n};\n\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nvar getEasingFunction = function getEasingFunction(ease) {\n  return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n\nvar linear = function linear(x) {\n  return x;\n};\nvar Start = 1;\nvar Middle = 0.5;\nvar End = 0;\nfunction step(count, pos) {\n  return function (x) {\n    if (x >= 1) {\n      return 1;\n    }\n    var stepSize = 1 / count;\n    x += pos * stepSize;\n    return x - x % stepSize;\n  };\n}\nvar numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nvar cubicBezierRe = new RegExp(\"cubic-bezier\\\\(\".concat(numberString, \",\").concat(numberString, \",\").concat(numberString, \",\").concat(numberString, \"\\\\)\"));\nvar step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nvar step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\nfunction parseEasingFunction(normalizedEasing) {\n  var cubicData = cubicBezierRe.exec(normalizedEasing);\n  if (cubicData) {\n    // @ts-ignore\n    return bezier.apply(void 0, _toConsumableArray(cubicData.slice(1).map(Number)));\n  }\n  var step1Data = step1Re.exec(normalizedEasing);\n  if (step1Data) {\n    return step(Number(step1Data[1]), End);\n  }\n  var step2Data = step2Re.exec(normalizedEasing);\n  if (step2Data) {\n    // @ts-ignore\n    return step(Number(step2Data[1]), {\n      start: Start,\n      middle: Middle,\n      end: End\n    }[step2Data[2]]);\n  }\n  return getEasingFunction(normalizedEasing);\n}\nfunction calculateActiveDuration(timing) {\n  // @ts-ignore\n  return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\nfunction repeatedDuration(timing) {\n  var _timing$iterations;\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n  if (timing.duration === 0 || timing.iterations === 0) {\n    return 0;\n  }\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n  // if (timing.duration === 'auto') {\n  //   timing.duration = 0;\n  // }\n\n  return (timing.duration === 'auto' ? 0 : Number(timing.duration)) * ((_timing$iterations = timing.iterations) !== null && _timing$iterations !== void 0 ? _timing$iterations : 1);\n}\nvar PhaseNone = 0;\nvar PhaseBefore = 1;\nvar PhaseAfter = 2;\nvar PhaseActive = 3;\nfunction calculatePhase(activeDuration, localTime, timing) {\n  // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n  if (localTime === null) {\n    return PhaseNone;\n  }\n  var endTime = timing.endTime;\n  if (localTime < Math.min(timing.delay, endTime)) {\n    return PhaseBefore;\n  }\n  if (localTime >= Math.min(timing.delay + activeDuration + timing.endDelay, endTime)) {\n    return PhaseAfter;\n  }\n  return PhaseActive;\n}\nfunction calculateActiveTime(activeDuration, fillMode, localTime, phase, delay) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n  switch (phase) {\n    case PhaseBefore:\n      if (fillMode === 'backwards' || fillMode === 'both') return 0;\n      return null;\n    case PhaseActive:\n      return localTime - delay;\n    case PhaseAfter:\n      if (fillMode === 'forwards' || fillMode === 'both') return activeDuration;\n      return null;\n    case PhaseNone:\n      return null;\n  }\n}\nfunction calculateOverallProgress(iterationDuration, phase, iterations, activeTime, iterationStart) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n  var overallProgress = iterationStart;\n  if (iterationDuration === 0) {\n    if (phase !== PhaseBefore) {\n      overallProgress += iterations;\n    }\n  } else {\n    overallProgress += activeTime / iterationDuration;\n  }\n  return overallProgress;\n}\nfunction calculateSimpleIterationProgress(overallProgress, iterationStart, phase, iterations, activeTime, iterationDuration) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n\n  var simpleIterationProgress = overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n  if (simpleIterationProgress === 0 && phase === PhaseAfter && iterations !== 0 && (activeTime !== 0 || iterationDuration === 0)) {\n    simpleIterationProgress = 1;\n  }\n  return simpleIterationProgress;\n}\nfunction calculateCurrentIteration(phase, iterations, simpleIterationProgress, overallProgress) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n  if (phase === PhaseAfter && iterations === Infinity) {\n    return Infinity;\n  }\n  if (simpleIterationProgress === 1) {\n    return Math.floor(overallProgress) - 1;\n  }\n  return Math.floor(overallProgress);\n}\nfunction calculateDirectedProgress(playbackDirection, currentIteration, simpleIterationProgress) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n  var currentDirection = playbackDirection;\n  if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n    var d = currentIteration;\n    if (playbackDirection === 'alternate-reverse') {\n      d += 1;\n    }\n    currentDirection = 'normal';\n    if (d !== Infinity && d % 2 !== 0) {\n      currentDirection = 'reverse';\n    }\n  }\n  if (currentDirection === 'normal') {\n    return simpleIterationProgress;\n  }\n  return 1 - simpleIterationProgress;\n}\nfunction calculateIterationProgress(activeDuration, localTime, timing) {\n  var phase = calculatePhase(activeDuration, localTime, timing);\n  var activeTime = calculateActiveTime(activeDuration, timing.fill, localTime, phase, timing.delay);\n  if (activeTime === null) return null;\n  var duration = timing.duration === 'auto' ? 0 : timing.duration;\n  var overallProgress = calculateOverallProgress(duration, phase, timing.iterations, activeTime, timing.iterationStart);\n  var simpleIterationProgress = calculateSimpleIterationProgress(overallProgress, timing.iterationStart, phase, timing.iterations, activeTime, duration);\n  var currentIteration = calculateCurrentIteration(phase, timing.iterations, simpleIterationProgress, overallProgress);\n  var directedProgress = calculateDirectedProgress(timing.direction, currentIteration, simpleIterationProgress);\n  timing.currentIteration = currentIteration;\n  timing.progress = directedProgress;\n\n  // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n  // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n  return timing.easingFunction(directedProgress);\n}\n\nfunction convertEffectInput(keyframes, timing, target) {\n  var propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(keyframes, timing);\n  var interpolations = makeInterpolations(propertySpecificKeyframeGroups, target);\n  return function (target, fraction) {\n    if (fraction !== null) {\n      interpolations.filter(function (interpolation) {\n        return fraction >= interpolation.applyFrom && fraction < interpolation.applyTo;\n      }).forEach(function (interpolation) {\n        var offsetFraction = fraction - interpolation.startOffset;\n        var localDuration = interpolation.endOffset - interpolation.startOffset;\n        var scaledLocalTime = localDuration === 0 ? 0 : offsetFraction / localDuration;\n        // apply updated attribute\n        target.setAttribute(interpolation.property, interpolation.interpolation(scaledLocalTime), false, false // disable memoize\n        );\n\n        // if (interpolation.property === 'visibility') {\n        //   console.log(\n        //     scaledLocalTime,\n        //     interpolation.interpolation(scaledLocalTime),\n        //   );\n        // }\n      });\n    } else {\n      for (var property in propertySpecificKeyframeGroups) if (isNotReservedWord(property)) {\n        // clear attribute\n        target.setAttribute(property, null);\n      }\n    }\n  };\n}\nfunction isNotReservedWord(member) {\n  return member !== 'offset' && member !== 'easing' && member !== 'composite' && member !== 'computedOffset';\n}\nfunction makePropertySpecificKeyframeGroups(keyframes, timing) {\n  var propertySpecificKeyframeGroups = {};\n  for (var i = 0; i < keyframes.length; i++) {\n    for (var member in keyframes[i]) {\n      if (isNotReservedWord(member)) {\n        var propertySpecificKeyframe = {\n          offset: keyframes[i].offset,\n          computedOffset: keyframes[i].computedOffset,\n          easing: keyframes[i].easing,\n          easingFunction: parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n          value: keyframes[i][member]\n        };\n        propertySpecificKeyframeGroups[member] = propertySpecificKeyframeGroups[member] || [];\n        propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n      }\n    }\n  }\n  return propertySpecificKeyframeGroups;\n}\nfunction makeInterpolations(propertySpecificKeyframeGroups, target) {\n  var interpolations = [];\n  for (var groupName in propertySpecificKeyframeGroups) {\n    var keyframes = propertySpecificKeyframeGroups[groupName];\n    for (var i = 0; i < keyframes.length - 1; i++) {\n      var startIndex = i;\n      var endIndex = i + 1;\n      var startOffset = keyframes[startIndex].computedOffset;\n      var endOffset = keyframes[endIndex].computedOffset;\n      var applyFrom = startOffset;\n      var applyTo = endOffset;\n      if (i === 0) {\n        applyFrom = -Infinity;\n        if (endOffset === 0) {\n          endIndex = startIndex;\n        }\n      }\n      if (i === keyframes.length - 2) {\n        applyTo = Infinity;\n        if (startOffset === 1) {\n          startIndex = endIndex;\n        }\n      }\n      interpolations.push({\n        applyFrom: applyFrom,\n        applyTo: applyTo,\n        startOffset: keyframes[startIndex].computedOffset,\n        endOffset: keyframes[endIndex].computedOffset,\n        easingFunction: keyframes[startIndex].easingFunction,\n        property: groupName,\n        interpolation: propertyInterpolation(groupName, keyframes[startIndex].value, keyframes[endIndex].value, target)\n      });\n    }\n  }\n  interpolations.sort(function (leftInterpolation, rightInterpolation) {\n    return leftInterpolation.startOffset - rightInterpolation.startOffset;\n  });\n  return interpolations;\n}\nvar InterpolationFactory = function InterpolationFactory(from, to, convertToString) {\n  return function (f) {\n    var interpolated = interpolate(from, to, f);\n    return isNumber(interpolated) ? interpolated : convertToString(interpolated);\n  };\n};\nfunction propertyInterpolation(property, left, right, target) {\n  var metadata = propertyMetadataCache[property];\n  if (metadata && metadata.syntax && metadata[\"int\"]) {\n    var propertyHandler = runtime.styleValueRegistry.getPropertySyntax(metadata.syntax);\n    if (propertyHandler) {\n      var parser = propertyHandler.parser;\n      var usedLeft = parser ? parser(left, target) : left;\n      var usedRight = parser ? parser(right, target) : right;\n\n      // merger [left, right, n2string()]\n      var interpolationArgs = propertyHandler.mixer(usedLeft, usedRight, target);\n      if (interpolationArgs) {\n        var interp = InterpolationFactory.apply(void 0, _toConsumableArray(interpolationArgs));\n        return function (t) {\n          if (t === 0) return left;\n          if (t === 1) return right;\n          return interp(t);\n        };\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return InterpolationFactory(false, true, function (bool) {\n    return bool ? right : left;\n  });\n}\n\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(from, to, f) {\n  if (typeof from === 'number' && typeof to === 'number') {\n    return from * (1 - f) + to * f;\n  }\n  if (typeof from === 'boolean' && typeof to === 'boolean' || typeof from === 'string' && typeof to === 'string' // skip string, eg. path ['M', 10, 10]\n  ) {\n    return f < 0.5 ? from : to;\n  }\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // interpolate arrays/matrix\n    var fromLength = from.length;\n    var toLength = to.length;\n    var length = Math.max(fromLength, toLength);\n    var r = [];\n    for (var i = 0; i < length; i++) {\n      r.push(interpolate(from[i < fromLength ? i : fromLength - 1], to[i < toLength ? i : toLength - 1], f));\n    }\n    return r;\n  }\n  throw new Error(\"Mismatched interpolation arguments \".concat(from, \":\").concat(to));\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nvar AnimationEffectTiming = /*#__PURE__*/function () {\n  function AnimationEffectTiming() {\n    _classCallCheck(this, AnimationEffectTiming);\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n     */\n    this.delay = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n     */\n    this.direction = 'normal';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n     */\n    this.duration = 'auto';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n     */\n    this._easing = 'linear';\n    this.easingFunction = linear;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n     */\n    this.endDelay = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n     */\n    this.fill = 'auto';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n     */\n    this.iterationStart = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n     */\n    this.iterations = 1;\n    this.currentIteration = null;\n    this.progress = null;\n  }\n  return _createClass(AnimationEffectTiming, [{\n    key: \"easing\",\n    get: function get() {\n      return this._easing;\n    },\n    set: function set(value) {\n      this.easingFunction = parseEasingFunction(value);\n      this._easing = value;\n    }\n  }]);\n}();\n\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput) {\n  var normalizedEffectInput = [];\n  for (var property in effectInput) {\n    // skip reserved props\n    if (property in ['easing', 'offset', 'composite']) {\n      continue;\n    }\n\n    // @ts-ignore\n    var values = effectInput[property];\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n    var numKeyframes = values.length;\n    for (var i = 0; i < numKeyframes; i++) {\n      if (!normalizedEffectInput[i]) {\n        var keyframe = {};\n        if ('offset' in effectInput) {\n          keyframe.offset = Number(effectInput.offset);\n        }\n        if ('easing' in effectInput) {\n          // @ts-ignore\n          keyframe.easing = effectInput.easing;\n        }\n        if ('composite' in effectInput) {\n          // @ts-ignore\n          keyframe.composite = effectInput.composite;\n        }\n        normalizedEffectInput[i] = keyframe;\n      }\n      if (values[i] !== undefined && values[i] !== null) {\n        normalizedEffectInput[i][property] = values[i];\n      }\n    }\n  }\n  normalizedEffectInput.sort(function (a, b) {\n    return (a.computedOffset || 0) - (b.computedOffset || 0);\n  });\n  return normalizedEffectInput;\n}\nfunction normalizeKeyframes(effectInput, timing) {\n  if (effectInput === null) {\n    return [];\n  }\n  if (!Array.isArray(effectInput)) {\n    effectInput = convertToArrayForm(effectInput);\n  }\n  var keyframes = effectInput.map(function (originalKeyframe) {\n    var keyframe = {};\n    if (timing !== null && timing !== void 0 && timing.composite) {\n      // This will be auto if the composite operation specified on the effect is being used.\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n      keyframe.composite = 'auto';\n    }\n    for (var member in originalKeyframe) {\n      var memberValue = originalKeyframe[member];\n      if (member === 'offset') {\n        if (memberValue !== null) {\n          memberValue = Number(memberValue);\n          if (!isFinite(memberValue)) throw new Error('Keyframe offsets must be numbers.');\n          if (memberValue < 0 || memberValue > 1) throw new Error('Keyframe offsets must be between 0 and 1.');\n          keyframe.computedOffset = memberValue;\n        }\n      } else if (member === 'composite') {\n        // TODO: Support add & accumulate in KeyframeEffect.composite\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n        if (['replace', 'add', 'accumulate', 'auto'].indexOf(memberValue) === -1) {\n          throw new Error(\"\".concat(memberValue, \" compositing is not supported\"));\n        }\n      } else ;\n\n      // assign to keyframe, no need to parse shorthand value\n      keyframe[member] = memberValue;\n    }\n    if (keyframe.offset === undefined) {\n      keyframe.offset = null;\n    }\n    if (keyframe.easing === undefined) {\n      // override with timing.easing\n      keyframe.easing = (timing === null || timing === void 0 ? void 0 : timing.easing) || 'linear';\n    }\n    if (keyframe.composite === undefined) {\n      keyframe.composite = 'auto';\n    }\n    return keyframe;\n  });\n  var everyFrameHasOffset = true;\n  var previousOffset = -Infinity;\n  for (var i = 0; i < keyframes.length; i++) {\n    var offset = keyframes[i].offset;\n    if (!isNil(offset)) {\n      if (offset < previousOffset) {\n        throw new TypeError('Keyframes are not loosely sorted by offset. Sort or specify offsets.');\n      }\n      previousOffset = offset;\n    } else {\n      everyFrameHasOffset = false;\n    }\n  }\n  keyframes = keyframes.filter(function (keyframe) {\n    return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n  });\n  function spaceKeyframes() {\n    var _keyframes$offset;\n    var _keyframes = keyframes,\n      length = _keyframes.length;\n    keyframes[length - 1].computedOffset = Number((_keyframes$offset = keyframes[length - 1].offset) !== null && _keyframes$offset !== void 0 ? _keyframes$offset : 1);\n    if (length > 1) {\n      var _keyframes$0$offset;\n      keyframes[0].computedOffset = Number((_keyframes$0$offset = keyframes[0].offset) !== null && _keyframes$0$offset !== void 0 ? _keyframes$0$offset : 0);\n    }\n    var previousIndex = 0;\n    var previousOffset = Number(keyframes[0].computedOffset);\n    for (var _i = 1; _i < length; _i++) {\n      var _offset = keyframes[_i].computedOffset;\n      if (!isNil(_offset) && !isNil(previousOffset)) {\n        for (var j = 1; j < _i - previousIndex; j++) keyframes[previousIndex + j].computedOffset = previousOffset + (Number(_offset) - previousOffset) * j / (_i - previousIndex);\n        previousIndex = _i;\n        previousOffset = Number(_offset);\n      }\n    }\n  }\n  if (!everyFrameHasOffset) spaceKeyframes();\n  return keyframes;\n}\n\nvar fills = 'backwards|forwards|both|none'.split('|');\nvar directions = 'reverse|alternate|alternate-reverse'.split('|');\nfunction makeTiming(timingInput, forGroup) {\n  var timing = new AnimationEffectTiming();\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    Object.keys(timingInput).forEach(function (property) {\n      if (timingInput[property] !== undefined && timingInput[property] !== null && timingInput[property] !== 'auto') {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (typeof timingInput[property] !== 'number' || isNaN(timingInput[property])) {\n            return;\n          }\n        }\n        if (property === 'fill' && fills.indexOf(timingInput[property]) === -1) {\n          return;\n        }\n        if (property === 'direction' && directions.indexOf(timingInput[property]) === -1) {\n          return;\n        }\n        // @ts-ignore\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n  return timing;\n}\nfunction normalizeTimingInput(timingInput, forGroup) {\n  timingInput = numericTimingToObject(timingInput !== null && timingInput !== void 0 ? timingInput : {\n    duration: 'auto'\n  });\n  return makeTiming(timingInput, forGroup);\n}\nfunction numericTimingToObject(timingInput) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = {\n        duration: 'auto'\n      };\n    } else {\n      timingInput = {\n        duration: timingInput\n      };\n    }\n  }\n  return timingInput;\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nvar KeyframeEffect = /*#__PURE__*/function () {\n  // pseudoElement: string | null;\n\n  function KeyframeEffect(target, effectInput, timingInput) {\n    var _this = this;\n    _classCallCheck(this, KeyframeEffect);\n    this.composite = 'replace';\n    this.iterationComposite = 'replace';\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(0, this.timing.delay + this.timing.activeDuration + this.timing.endDelay);\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(this.normalizedKeyframes, this.timing, this.target);\n\n    //  proxy  this.timing\n    var Proxy = runtime.globalThis.Proxy;\n    this.computedTiming = Proxy ? new Proxy(this.timing, {\n      get: function get(target, prop) {\n        if (prop === 'duration') {\n          return target.duration === 'auto' ? 0 : target.duration;\n        }\n        if (prop === 'fill') {\n          return target.fill === 'auto' ? 'none' : target.fill;\n        }\n        if (prop === 'localTime') {\n          return _this.animation && _this.animation.currentTime || null;\n        }\n        if (prop === 'currentIteration') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n          return target.currentIteration || 0;\n        }\n        if (prop === 'progress') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n          return target.progress || 0;\n        }\n        return target[prop];\n      },\n      set: function set() {\n        return true;\n      }\n    }) : this.timing;\n  }\n  return _createClass(KeyframeEffect, [{\n    key: \"applyInterpolations\",\n    value: function applyInterpolations() {\n      this.interpolations(this.target, Number(this.timeFraction));\n    }\n  }, {\n    key: \"update\",\n    value: function update(localTime) {\n      if (localTime === null) {\n        return false;\n      }\n      this.timeFraction = calculateIterationProgress(this.timing.activeDuration, localTime, this.timing);\n      return this.timeFraction !== null;\n    }\n  }, {\n    key: \"getKeyframes\",\n    value: function getKeyframes() {\n      return this.normalizedKeyframes;\n    }\n  }, {\n    key: \"setKeyframes\",\n    value: function setKeyframes(keyframes) {\n      this.normalizedKeyframes = normalizeKeyframes(keyframes);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n     */\n  }, {\n    key: \"getComputedTiming\",\n    value: function getComputedTiming() {\n      return this.computedTiming;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n     */\n  }, {\n    key: \"getTiming\",\n    value: function getTiming() {\n      return this.timing;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n     */\n  }, {\n    key: \"updateTiming\",\n    value: function updateTiming(timing) {\n      var _this2 = this;\n      Object.keys(timing || {}).forEach(function (name) {\n        _this2.timing[name] = timing[name];\n      });\n    }\n  }]);\n}();\n\nfunction compareAnimations(leftAnimation, rightAnimation) {\n  return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nvar AnimationTimeline = /*#__PURE__*/function () {\n  function AnimationTimeline(document) {\n    var _this = this;\n    _classCallCheck(this, AnimationTimeline);\n    /**\n     * all active animations\n     */\n    this.animations = [];\n    this.ticking = false;\n    this.timelineTicking = false;\n    this.hasRestartedThisFrame = false;\n    this.animationsWithPromises = [];\n    this.inTick = false;\n    this.pendingEffects = [];\n    this.currentTime = null;\n    this.rafId = 0;\n    this.rafCallbacks = [];\n    this.webAnimationsNextTick = function (t) {\n      _this.currentTime = t;\n      _this.discardAnimations();\n      if (_this.animations.length === 0) {\n        _this.timelineTicking = false;\n      } else {\n        _this.requestAnimationFrame(_this.webAnimationsNextTick);\n      }\n    };\n    this.processRafCallbacks = function (t) {\n      var processing = _this.rafCallbacks;\n      _this.rafCallbacks = [];\n      if (t < Number(_this.currentTime)) t = Number(_this.currentTime);\n      _this.animations.sort(compareAnimations);\n      _this.animations = _this.tick(t, true, _this.animations)[0];\n      processing.forEach(function (entry) {\n        entry[1](t);\n      });\n      _this.applyPendingEffects();\n    };\n    this.document = document;\n  }\n  return _createClass(AnimationTimeline, [{\n    key: \"getAnimations\",\n    value: function getAnimations() {\n      this.discardAnimations();\n      return this.animations.slice();\n    }\n  }, {\n    key: \"isTicking\",\n    value: function isTicking() {\n      return this.inTick;\n    }\n  }, {\n    key: \"play\",\n    value: function play(target, keyframes, options) {\n      var effect = new KeyframeEffect(target, keyframes, options);\n      var animation = new Animation(effect, this);\n      this.animations.push(animation);\n      this.restartWebAnimationsNextTick();\n      animation.updatePromises();\n      animation.play();\n      animation.updatePromises();\n      return animation;\n    }\n\n    // RAF is supposed to be the last script to occur before frame rendering but not\n    // all browsers behave like this. This function is for synchonously updating an\n    // animation's effects whenever its state is mutated by script to work around\n    // incorrect script execution ordering by the browser.\n  }, {\n    key: \"applyDirtiedAnimation\",\n    value: function applyDirtiedAnimation(animation) {\n      var _this2 = this;\n      if (this.inTick) {\n        return;\n      }\n      // update active animations in displayobject\n      animation.markTarget();\n      var animations = animation.targetAnimations();\n      animations.sort(compareAnimations);\n\n      // clear inactive animations\n      var inactiveAnimations = this.tick(Number(this.currentTime), false, animations.slice())[1];\n      inactiveAnimations.forEach(function (animation) {\n        var index = _this2.animations.indexOf(animation);\n        if (index !== -1) {\n          _this2.animations.splice(index, 1);\n        }\n      });\n      this.applyPendingEffects();\n    }\n  }, {\n    key: \"restart\",\n    value: function restart() {\n      if (!this.ticking) {\n        this.ticking = true;\n        this.requestAnimationFrame(function () {});\n        this.hasRestartedThisFrame = true;\n      }\n      return this.hasRestartedThisFrame;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.document.defaultView.cancelAnimationFrame(this.frameId);\n    }\n  }, {\n    key: \"applyPendingEffects\",\n    value: function applyPendingEffects() {\n      this.pendingEffects.forEach(function (effect) {\n        effect === null || effect === void 0 || effect.applyInterpolations();\n      });\n      this.pendingEffects = [];\n    }\n  }, {\n    key: \"updateAnimationsPromises\",\n    value: function updateAnimationsPromises() {\n      this.animationsWithPromises = this.animationsWithPromises.filter(function (animation) {\n        return animation.updatePromises();\n      });\n    }\n  }, {\n    key: \"discardAnimations\",\n    value: function discardAnimations() {\n      this.updateAnimationsPromises();\n      this.animations = this.animations.filter(function (animation) {\n        return animation.playState !== 'finished' && animation.playState !== 'idle';\n      });\n    }\n  }, {\n    key: \"restartWebAnimationsNextTick\",\n    value: function restartWebAnimationsNextTick() {\n      if (!this.timelineTicking) {\n        this.timelineTicking = true;\n        this.requestAnimationFrame(this.webAnimationsNextTick);\n      }\n    }\n  }, {\n    key: \"rAF\",\n    value: function rAF(f) {\n      var id = this.rafId++;\n      if (this.rafCallbacks.length === 0) {\n        this.frameId = this.document.defaultView.requestAnimationFrame(this.processRafCallbacks);\n      }\n      this.rafCallbacks.push([id, f]);\n      return id;\n    }\n  }, {\n    key: \"requestAnimationFrame\",\n    value: function requestAnimationFrame(f) {\n      var _this3 = this;\n      return this.rAF(function (x) {\n        _this3.updateAnimationsPromises();\n        f(x);\n        _this3.updateAnimationsPromises();\n      });\n    }\n  }, {\n    key: \"tick\",\n    value: function tick(t, isAnimationFrame, updatingAnimations) {\n      var _this4 = this,\n        _this$pendingEffects,\n        _this$pendingEffects2;\n      this.inTick = true;\n      this.hasRestartedThisFrame = false;\n      this.currentTime = t;\n      this.ticking = false;\n      var newPendingClears = [];\n      var newPendingEffects = [];\n      var activeAnimations = [];\n      var inactiveAnimations = [];\n      updatingAnimations.forEach(function (animation) {\n        animation.tick(t, isAnimationFrame);\n        if (!animation._inEffect) {\n          newPendingClears.push(animation.effect);\n          animation.unmarkTarget();\n        } else {\n          newPendingEffects.push(animation.effect);\n          animation.markTarget();\n        }\n        if (animation._needsTick) _this4.ticking = true;\n        var alive = animation._inEffect || animation._needsTick;\n        animation._inTimeline = alive;\n        if (alive) {\n          activeAnimations.push(animation);\n        } else {\n          inactiveAnimations.push(animation);\n        }\n      });\n      (_this$pendingEffects = this.pendingEffects).push.apply(_this$pendingEffects, newPendingClears);\n      (_this$pendingEffects2 = this.pendingEffects).push.apply(_this$pendingEffects2, newPendingEffects);\n      if (this.ticking) this.requestAnimationFrame(function () {});\n      this.inTick = false;\n      return [activeAnimations, inactiveAnimations];\n    }\n  }]);\n}();\n\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\n\nexport { Animation, AnimationEvent, AnimationTimeline, EasingFunctions, KeyframeEffect, compareAnimations, makeTiming, normalizeKeyframes, normalizeTimingInput, numericTimingToObject };\n//# sourceMappingURL=index.esm.js.map\n","function internGet({ map, initKey }, value) {\n    const key = initKey(value);\n    return map.has(key) ? map.get(key) : value;\n}\nfunction internSet({ map, initKey }, value) {\n    const key = initKey(value);\n    if (map.has(key))\n        return map.get(key);\n    map.set(key, value);\n    return value;\n}\nfunction internDelete({ map, initKey }, value) {\n    const key = initKey(value);\n    if (map.has(key)) {\n        value = map.get(key);\n        map.delete(key);\n    }\n    return value;\n}\nfunction keyof(value) {\n    return typeof value === 'object' ? value.valueOf() : value;\n}\n/**\n * @see  https://github.com/mbostock/internmap/blob/main/src/index.js\n */\nexport class InternMap extends Map {\n    constructor(entries) {\n        super();\n        this.map = new Map();\n        this.initKey = keyof;\n        if (entries !== null) {\n            for (const [key, value] of entries) {\n                this.set(key, value);\n            }\n        }\n    }\n    get(key) {\n        return super.get(internGet({ map: this.map, initKey: this.initKey }, key));\n    }\n    has(key) {\n        return super.has(internGet({ map: this.map, initKey: this.initKey }, key));\n    }\n    set(key, value) {\n        return super.set(internSet({ map: this.map, initKey: this.initKey }, key), value);\n    }\n    delete(key) {\n        return super.delete(internDelete({ map: this.map, initKey: this.initKey }, key));\n    }\n}\n//# sourceMappingURL=internMap.js.map","import { InternMap } from '../utils';\nimport { Ordinal, defaultUnknown } from './ordinal';\nfunction normalize(array) {\n    const min = Math.min(...array);\n    return array.map((d) => d / min);\n}\nfunction splice(array, n) {\n    const sn = array.length;\n    const diff = n - sn;\n    return diff > 0 ? [...array, ...new Array(diff).fill(1)] : diff < 0 ? array.slice(0, n) : array;\n}\nfunction pretty(n) {\n    return Math.round(n * 1e12) / 1e12;\n}\n/**\n *  band  flex band \n */\nfunction computeFlexBandState(options) {\n    //  flex  domain \n    //  flex  domain \n    const { domain, range, paddingOuter, paddingInner, flex: F, round, align } = options;\n    const n = domain.length;\n    const flex = splice(F, n);\n    //  step \n    // stepSum = step1 + step2 ... + stepN;\n    // stepAverage = stepSum / n;\n    // PO = stepAverage * paddingOuter;\n    // PI = stepAverage * paddingInner;\n    // width = PO * 2 + stepSum - PI;\n    const [start, end] = range;\n    const width = end - start;\n    const ratio = (2 / n) * paddingOuter + 1 - (1 / n) * paddingInner;\n    const stepSum = width / ratio;\n    // stepSum = (b1 + PI) + (b2 + PI) ... + (bN + PI)\n    // = bandSum + PI * n;\n    const PI = (stepSum * paddingInner) / n;\n    const bandWidthSum = stepSum - n * PI;\n    //  bandWidth\n    const normalizedFlex = normalize(flex);\n    const flexSum = normalizedFlex.reduce((sum, value) => sum + value);\n    const minBandWidth = bandWidthSum / flexSum;\n    //  bandWidth  step\n    const valueBandWidth = new InternMap(domain.map((d, i) => {\n        const bandWidth = normalizedFlex[i] * minBandWidth;\n        return [d, round ? Math.floor(bandWidth) : bandWidth];\n    }));\n    const valueStep = new InternMap(domain.map((d, i) => {\n        const bandWidth = normalizedFlex[i] * minBandWidth;\n        const step = bandWidth + PI;\n        return [d, round ? Math.floor(step) : step];\n    }));\n    // \n    //  step  round  step \n    const finalStepSum = Array.from(valueStep.values()).reduce((sum, value) => sum + value);\n    const outerPaddingSum = width - (finalStepSum - (finalStepSum / n) * paddingInner);\n    const offset = outerPaddingSum * align;\n    //  adjustedRange domain \n    const bandStart = start + offset;\n    let prev = round ? Math.round(bandStart) : bandStart;\n    const adjustedRange = new Array(n);\n    for (let i = 0; i < n; i += 1) {\n        // \n        adjustedRange[i] = pretty(prev);\n        const value = domain[i];\n        prev += valueStep.get(value);\n    }\n    return {\n        valueBandWidth,\n        valueStep,\n        adjustedRange,\n    };\n}\n/**\n *  band  band \n */\nfunction computeBandState(options) {\n    var _a;\n    const { domain } = options;\n    const n = domain.length;\n    if (n === 0) {\n        return {\n            valueBandWidth: undefined,\n            valueStep: undefined,\n            adjustedRange: [],\n        };\n    }\n    const hasFlex = !!((_a = options.flex) === null || _a === void 0 ? void 0 : _a.length);\n    if (hasFlex) {\n        return computeFlexBandState(options);\n    }\n    const { range, paddingOuter, paddingInner, round, align } = options;\n    let step;\n    let bandWidth;\n    let rangeStart = range[0];\n    const rangeEnd = range[1];\n    // range \n    // = stop - start\n    // = (n * step(n  step) )\n    // + (2 * step * paddingOuter( padding))\n    // - (1 * step * paddingInner( inner))\n    const deltaRange = rangeEnd - rangeStart;\n    const outerTotal = paddingOuter * 2;\n    const innerTotal = n - paddingInner;\n    step = deltaRange / Math.max(1, outerTotal + innerTotal);\n    // \n    if (round) {\n        step = Math.floor(step);\n    }\n    //  align \n    rangeStart += (deltaRange - step * (n - paddingInner)) * align;\n    //  step \n    // step = bandWidth + step * paddingInner\n    //  bandWidth = step - step * (paddingInner)\n    bandWidth = step * (1 - paddingInner);\n    if (round) {\n        rangeStart = Math.round(rangeStart);\n        bandWidth = Math.round(bandWidth);\n    }\n    //  range\n    const adjustedRange = new Array(n).fill(0).map((_, i) => rangeStart + i * step);\n    return {\n        valueStep: step,\n        valueBandWidth: bandWidth,\n        adjustedRange,\n    };\n}\n/**\n * Band \n *\n *  ordinal scale\n * \n *\n * \n *\n * BN = bandWidthN\n * SN = stepN\n * domain = [A, B]\n *\n * \n * width = PO + B1 + PI + B2 + PI ... + BN + PO;\n * PO = (S1 + S2 + ... SN) / N * paddingOuter\n * PI = (S1 + S2 + ... SN) / N * paddingInner\n * BN / BN-1 = flex[n] / flex[n-1]\n *\n * |<------------------------------------------- range ------------------------------------------->|\n * |             |                   |             |                   |             |             |\n * |<-----PO---->|<------B1--------->|<-----PI---->|<-------B2-------->|<----PI----->|<-----PO---->|\n * |             | ***************** |             | ***************** |             |             |\n * |             | ******* A ******* |             | ******* B ******* |             |             |\n * |             | ***************** |             | ***************** |             |             |\n * |             |<--------------S1--------------->| <--------------S2-------------->|                                              |\n * |-----------------------------------------------------------------------------------------------|\n *\n */\nexport class Band extends Ordinal {\n    // \n    getDefaultOptions() {\n        return {\n            domain: [],\n            range: [0, 1],\n            align: 0.5,\n            round: false,\n            paddingInner: 0,\n            paddingOuter: 0,\n            padding: 0,\n            unknown: defaultUnknown,\n            flex: [],\n        };\n    }\n    //  options  OrdinalOptions O \n    constructor(options) {\n        super(options);\n    }\n    clone() {\n        return new Band(this.options);\n    }\n    getStep(x) {\n        if (this.valueStep === undefined)\n            return 1;\n        //  flex , valueStep  number \n        if (typeof this.valueStep === 'number') {\n            return this.valueStep;\n        }\n        //  flex  1 x \n        //  step \n        if (x === undefined)\n            return Array.from(this.valueStep.values())[0];\n        return this.valueStep.get(x);\n    }\n    getBandWidth(x) {\n        if (this.valueBandWidth === undefined)\n            return 1;\n        //  flex, valueBandWidth  number \n        if (typeof this.valueBandWidth === 'number') {\n            return this.valueBandWidth;\n        }\n        //  flex  1 x \n        //  bandWidth \n        if (x === undefined)\n            return Array.from(this.valueBandWidth.values())[0];\n        return this.valueBandWidth.get(x);\n    }\n    getRange() {\n        return this.adjustedRange;\n    }\n    getPaddingInner() {\n        const { padding, paddingInner } = this.options;\n        return padding > 0 ? padding : paddingInner;\n    }\n    getPaddingOuter() {\n        const { padding, paddingOuter } = this.options;\n        return padding > 0 ? padding : paddingOuter;\n    }\n    rescale() {\n        super.rescale();\n        // opt.padding  0  paddingInner paddingOuter\n        //  padding  paddingInner  paddingOuter \n        const { align, domain, range, round, flex } = this.options;\n        const { adjustedRange, valueBandWidth, valueStep } = computeBandState({\n            align,\n            range,\n            round,\n            flex,\n            paddingInner: this.getPaddingInner(),\n            paddingOuter: this.getPaddingOuter(),\n            domain,\n        });\n        // \n        this.valueStep = valueStep;\n        this.valueBandWidth = valueBandWidth;\n        this.adjustedRange = adjustedRange;\n    }\n}\n//# sourceMappingURL=band.js.map","import { deepMix } from '@antv/util';\nexport class Base {\n    /**\n     * \n     * @param options \n     */\n    constructor(options) {\n        this.options = deepMix({}, this.getDefaultOptions());\n        this.update(options);\n    }\n    /**\n     * \n     * @returns \n     */\n    getOptions() {\n        return this.options;\n    }\n    /**\n     * \n     * @param updateOptions \n     */\n    update(updateOptions = {}) {\n        this.options = deepMix({}, this.options, updateOptions);\n        this.rescale(updateOptions);\n    }\n    /**\n     *  options  options  scale \n     *  this.options  options\n     * @param options  options\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    rescale(options) { }\n}\n//# sourceMappingURL=base.js.map","import { identity } from '@antv/util';\nimport { Base } from './base';\nimport { createInterpolateNumber, createInterpolateRound, createClamp, createNormalize, bisect, compose, d3LinearNice, isValid, } from '../utils';\n/**  domain  range  map   */\nconst createBiMap = (domain, range, createInterpolate) => {\n    const [d0, d1] = domain;\n    const [r0, r1] = range;\n    let normalize;\n    let interpolate;\n    if (d0 < d1) {\n        normalize = createNormalize(d0, d1);\n        interpolate = createInterpolate(r0, r1);\n    }\n    else {\n        normalize = createNormalize(d1, d0);\n        interpolate = createInterpolate(r1, r0);\n    }\n    return compose(interpolate, normalize);\n};\n/**  domain  range  map   */\nconst createPolyMap = (domain, range, createInterpolate) => {\n    const len = Math.min(domain.length, range.length) - 1;\n    const normalizeList = new Array(len);\n    const interpolateList = new Array(len);\n    const reverse = domain[0] > domain[len];\n    const ascendingDomain = reverse ? [...domain].reverse() : domain;\n    const ascendingRange = reverse ? [...range].reverse() : range;\n    //  normalize  interpolate\n    for (let i = 0; i < len; i += 1) {\n        normalizeList[i] = createNormalize(ascendingDomain[i], ascendingDomain[i + 1]);\n        interpolateList[i] = createInterpolate(ascendingRange[i], ascendingRange[i + 1]);\n    }\n    //  normalize  interpolate\n    return (x) => {\n        const i = bisect(domain, x, 1, len) - 1;\n        const normalize = normalizeList[i];\n        const interpolate = interpolateList[i];\n        return compose(interpolate, normalize)(x);\n    };\n};\n/**  */\nconst choosePiecewise = (domain, range, interpolate, shouldRound) => {\n    const n = Math.min(domain.length, range.length);\n    const createPiecewise = n > 2 ? createPolyMap : createBiMap;\n    const createInterpolate = shouldRound ? createInterpolateRound : interpolate;\n    return createPiecewise(domain, range, createInterpolate);\n};\n/**\n * Continuous   x  y y = a * f(x) + b\n * \n * https://github.com/d3/d3-scale/blob/master/src/continuous.js\n */\nexport class Continuous extends Base {\n    getDefaultOptions() {\n        return {\n            domain: [0, 1],\n            range: [0, 1],\n            nice: false,\n            clamp: false,\n            round: false,\n            interpolate: createInterpolateNumber,\n            tickCount: 5,\n        };\n    }\n    /**\n     * y = interpolate(normalize(clamp(transform(x))))\n     */\n    map(x) {\n        if (!isValid(x))\n            return this.options.unknown;\n        return this.output(x);\n    }\n    /**\n     * x = transform(clamp(interpolate(normalize(y))))\n     */\n    invert(x) {\n        if (!isValid(x))\n            return this.options.unknown;\n        return this.input(x);\n    }\n    nice() {\n        if (!this.options.nice)\n            return;\n        const [min, max, tickCount, ...rest] = this.getTickMethodOptions();\n        this.options.domain = this.chooseNice()(min, max, tickCount, ...rest);\n    }\n    getTicks() {\n        const { tickMethod } = this.options;\n        const [min, max, tickCount, ...rest] = this.getTickMethodOptions();\n        return tickMethod(min, max, tickCount, ...rest);\n    }\n    getTickMethodOptions() {\n        const { domain, tickCount } = this.options;\n        const min = domain[0];\n        const max = domain[domain.length - 1];\n        return [min, max, tickCount];\n    }\n    chooseNice() {\n        return d3LinearNice;\n    }\n    rescale() {\n        this.nice();\n        const [transform, untransform] = this.chooseTransforms();\n        this.composeOutput(transform, this.chooseClamp(transform));\n        this.composeInput(transform, untransform, this.chooseClamp(untransform));\n    }\n    chooseClamp(transform) {\n        const { clamp: shouldClamp, range } = this.options;\n        const domain = this.options.domain.map(transform);\n        const n = Math.min(domain.length, range.length);\n        return shouldClamp ? createClamp(domain[0], domain[n - 1]) : identity;\n    }\n    composeOutput(transform, clamp) {\n        const { domain, range, round, interpolate } = this.options;\n        const piecewise = choosePiecewise(domain.map(transform), range, interpolate, round);\n        this.output = compose(piecewise, clamp, transform);\n    }\n    composeInput(transform, untransform, clamp) {\n        const { domain, range } = this.options;\n        const piecewise = choosePiecewise(range, domain.map(transform), createInterpolateNumber);\n        this.input = compose(untransform, clamp, piecewise);\n    }\n}\n//# sourceMappingURL=continuous.js.map","/**\n *  clamp \n * @param a \n * @param b \n * @returns clamp \n */\nexport function createClamp(a, b) {\n    const lo = b < a ? b : a;\n    const hi = a > b ? a : b;\n    return (x) => Math.min(Math.max(lo, x), hi);\n}\n//# sourceMappingURL=clamp.js.map","import { identity } from '@antv/util';\nimport { Continuous } from './continuous';\nimport { createInterpolateValue } from '../utils';\nimport { d3Ticks } from '../tick-methods/d3-ticks';\n/**\n * Linear \n *\n * \n */\nexport class Linear extends Continuous {\n    getDefaultOptions() {\n        return {\n            domain: [0, 1],\n            range: [0, 1],\n            unknown: undefined,\n            nice: false,\n            clamp: false,\n            round: false,\n            interpolate: createInterpolateValue,\n            tickMethod: d3Ticks,\n            tickCount: 5,\n        };\n    }\n    chooseTransforms() {\n        return [identity, identity];\n    }\n    clone() {\n        return new Linear(this.options);\n    }\n}\n//# sourceMappingURL=linear.js.map","import { Base } from './base';\nexport const defaultUnknown = Symbol('defaultUnknown');\n/**\n *  indexMap\n *\n * @param arr \n * @param target  map\n * @returns {Map<string, any>}  indexMap\n */\nfunction updateIndexMap(target, arr, key) {\n    for (let i = 0; i < arr.length; i += 1) {\n        if (!target.has(arr[i])) {\n            target.set(key(arr[i]), i);\n        }\n    }\n}\n/**\n *  indexMap \n *\n * @param options \n * @see MapBetweenArrOptions\n * @return {any} \n */\nfunction mapBetweenArrByMapIndex(options) {\n    const { value, from, to, mapper, notFoundReturn } = options;\n    let mappedIndex = mapper.get(value);\n    // index \n    //  unknown  unknown \n    //  value ,  Map\n    if (mappedIndex === undefined) {\n        if (notFoundReturn !== defaultUnknown) {\n            return notFoundReturn;\n        }\n        mappedIndex = from.push(value) - 1;\n        mapper.set(value, mappedIndex);\n    }\n    return to[mappedIndex % to.length];\n}\nfunction createKey(d) {\n    if (d instanceof Date)\n        return (d) => `${d}`;\n    if (typeof d === 'object')\n        return (d) => JSON.stringify(d);\n    return (d) => d;\n}\n/**\n * Ordinal \n *\n * \n *\n * -  for  map for  forEach, map\n * -  mapinvert  update \n * -  map  new Map \n *    update  d3-scale \n */\nexport class Ordinal extends Base {\n    // \n    getDefaultOptions() {\n        return {\n            domain: [],\n            range: [],\n            unknown: defaultUnknown,\n        };\n    }\n    //  options  OrdinalOptions O \n    constructor(options) {\n        super(options);\n    }\n    map(x) {\n        if (this.domainIndexMap.size === 0) {\n            updateIndexMap(this.domainIndexMap, this.getDomain(), this.domainKey);\n        }\n        return mapBetweenArrByMapIndex({\n            value: this.domainKey(x),\n            mapper: this.domainIndexMap,\n            from: this.getDomain(),\n            to: this.getRange(),\n            notFoundReturn: this.options.unknown,\n        });\n    }\n    invert(y) {\n        if (this.rangeIndexMap.size === 0) {\n            updateIndexMap(this.rangeIndexMap, this.getRange(), this.rangeKey);\n        }\n        return mapBetweenArrByMapIndex({\n            value: this.rangeKey(y),\n            mapper: this.rangeIndexMap,\n            from: this.getRange(),\n            to: this.getDomain(),\n            notFoundReturn: this.options.unknown,\n        });\n    }\n    //  ordinal \n    rescale(options) {\n        const [d] = this.options.domain;\n        const [r] = this.options.range;\n        this.domainKey = createKey(d);\n        this.rangeKey = createKey(r);\n        //  rangeIndexMap \n        if (!this.rangeIndexMap) {\n            this.rangeIndexMap = new Map();\n            this.domainIndexMap = new Map();\n            return;\n        }\n        // \n        if (!options || options.range) {\n            this.rangeIndexMap.clear();\n        }\n        if (!options || options.domain || options.compare) {\n            this.domainIndexMap.clear();\n            this.sortedDomain = undefined;\n        }\n    }\n    clone() {\n        return new Ordinal(this.options);\n    }\n    getRange() {\n        return this.options.range;\n    }\n    getDomain() {\n        // \n        if (this.sortedDomain)\n            return this.sortedDomain;\n        const { domain, compare } = this.options;\n        this.sortedDomain = compare ? [...domain].sort(compare) : domain;\n        return this.sortedDomain;\n    }\n}\n//# sourceMappingURL=ordinal.js.map","import { tickIncrement } from '../utils';\nexport const d3Ticks = (begin, end, count) => {\n    let n;\n    let ticks;\n    let start = begin;\n    let stop = end;\n    if (start === stop && count > 0) {\n        return [start];\n    }\n    let step = tickIncrement(start, stop, count);\n    if (step === 0 || !Number.isFinite(step)) {\n        return [];\n    }\n    if (step > 0) {\n        start = Math.ceil(start / step);\n        stop = Math.floor(stop / step);\n        ticks = new Array((n = Math.ceil(stop - start + 1)));\n        for (let i = 0; i < n; i += 1) {\n            ticks[i] = (start + i) * step;\n        }\n    }\n    else {\n        step = -step;\n        start = Math.ceil(start * step);\n        stop = Math.floor(stop * step);\n        ticks = new Array((n = Math.ceil(stop - start + 1)));\n        for (let i = 0; i < n; i += 1) {\n            ticks[i] = (start + i) / step;\n        }\n    }\n    return ticks;\n};\n//# sourceMappingURL=d3-ticks.js.map","/**\n *  array[lo, hi)  x i\n * https://github.com/d3/d3-array/blob/master/src/bisector.js\n * @param array \n * @param x \n * @param lo \n * @param hi \n * @returns \n */\nexport function bisect(array, x, lo, hi, getter) {\n    let i = lo || 0;\n    let j = hi || array.length;\n    const get = getter || ((x) => x);\n    while (i < j) {\n        const mid = Math.floor((i + j) / 2);\n        if (get(array[mid]) > x) {\n            j = mid;\n        }\n        else {\n            i = mid + 1;\n        }\n    }\n    return i;\n}\n//# sourceMappingURL=bisect.js.map","/**\n * \n * @param fn \n * @param rest \n * @returns \n */\nexport function compose(fn, ...rest) {\n    return rest.reduce((pre, cur) => (x) => pre(cur(x)), fn);\n}\n//# sourceMappingURL=compose.js.map","//  d3-ticks nice \n// https://github.com/d3/d3-scale\nimport { tickIncrement } from './ticks';\nexport const d3LinearNice = (min, max, count = 5) => {\n    const d = [min, max];\n    let i0 = 0;\n    let i1 = d.length - 1;\n    let start = d[i0];\n    let stop = d[i1];\n    let step;\n    if (stop < start) {\n        [start, stop] = [stop, start];\n        [i0, i1] = [i1, i0];\n    }\n    step = tickIncrement(start, stop, count);\n    if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n        step = tickIncrement(start, stop, count);\n    }\n    else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n        step = tickIncrement(start, stop, count);\n    }\n    if (step > 0) {\n        d[i0] = Math.floor(start / step) * step;\n        d[i1] = Math.ceil(stop / step) * step;\n    }\n    else if (step < 0) {\n        d[i0] = Math.ceil(start * step) / step;\n        d[i1] = Math.floor(stop * step) / step;\n    }\n    return d;\n};\n//# sourceMappingURL=d3-linear-nice.js.map","import colorString from 'color-string';\nfunction hue2rgb(p, q, m) {\n    let t = m;\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\nfunction hsl2rbg(hsl) {\n    const h = hsl[0] / 360;\n    const s = hsl[1] / 100;\n    const l = hsl[2] / 100;\n    const a = hsl[3];\n    if (s === 0)\n        return [l * 255, l * 255, l * 255, a];\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    const p = 2 * l - q;\n    const r = hue2rgb(p, q, h + 1 / 3);\n    const g = hue2rgb(p, q, h);\n    const b = hue2rgb(p, q, h - 1 / 3);\n    return [r * 255, g * 255, b * 255, a];\n}\nexport function string2rbg(s) {\n    const color = colorString.get(s);\n    if (!color)\n        return null;\n    const { model, value } = color;\n    if (model === 'rgb')\n        return value;\n    if (model === 'hsl')\n        return hsl2rbg(value);\n    return null;\n}\n//# sourceMappingURL=color.js.map","import { string2rbg } from './color';\n/**\n * \n * @param a \n * @param b \n * @returns \n */\nexport const createInterpolateNumber = (a, b) => {\n    return (t) => a * (1 - t) + b * t;\n};\nexport const createInterpolateColor = (a, b) => {\n    const c1 = string2rbg(a);\n    const c2 = string2rbg(b);\n    if (c1 === null || c2 === null)\n        return c1 ? () => a : () => b;\n    return (t) => {\n        const values = new Array(4);\n        for (let i = 0; i < 4; i += 1) {\n            const from = c1[i];\n            const to = c2[i];\n            values[i] = from * (1 - t) + to * t;\n        }\n        const [r, g, b, a] = values;\n        return `rgba(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)}, ${a})`;\n    };\n};\n/**\n * \n * @param a \n * @param b \n * @returns \n */\nexport const createInterpolateValue = (a, b) => {\n    if (typeof a === 'number' && typeof b === 'number')\n        return createInterpolateNumber(a, b);\n    if (typeof a === 'string' && typeof b === 'string')\n        return createInterpolateColor(a, b);\n    return () => a;\n};\n/**\n *  round \n * @param a \n * @param b \n * @returns \n */\nexport const createInterpolateRound = (a, b) => {\n    const interpolateNumber = createInterpolateNumber(a, b);\n    return (t) => Math.round(interpolateNumber(t));\n};\n//# sourceMappingURL=interpolate.js.map","import { isNull, isUndefined } from '@antv/util';\nexport function isValid(x) {\n    return !isUndefined(x) && !isNull(x) && !Number.isNaN(x);\n}\n//# sourceMappingURL=is-valid.js.map","/**\n *  null\n * @return  null\n */\nexport default function isNull(value) {\n    return value === null;\n}\n//# sourceMappingURL=is-null.js.map","/**\n *  normalize  t  [a, b]  [0, 1]\n * @param a  t \n * @param b  t \n * @returns normalize \n */\nexport function createNormalize(a, b) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    return b - a ? (t) => (t - a) / (b - a) : (_) => 0.5;\n}\n//# sourceMappingURL=normalize.js.map","const e10 = Math.sqrt(50);\nconst e5 = Math.sqrt(10);\nconst e2 = Math.sqrt(2);\nexport function tickIncrement(start, stop, count) {\n    const step = (stop - start) / Math.max(0, count);\n    const power = Math.floor(Math.log(step) / Math.LN10);\n    const error = step / 10 ** power;\n    if (power >= 0) {\n        // eslint-disable-next-line no-nested-ternary\n        return (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * 10 ** power;\n    }\n    // eslint-disable-next-line no-nested-ternary\n    return -(10 ** -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nexport function tickStep(start, stop, count) {\n    const step0 = Math.abs(stop - start) / Math.max(0, count);\n    let step1 = 10 ** Math.floor(Math.log(step0) / Math.LN10);\n    const error = step0 / step1;\n    if (error >= e10)\n        step1 *= 10;\n    else if (error >= e5)\n        step1 *= 5;\n    else if (error >= e2)\n        step1 *= 2;\n    return stop < start ? -step1 : step1;\n}\n//# sourceMappingURL=ticks.js.map","/**\n * Create DOM from a html string.\n * @param str\n * @returns\n */\nexport function createDOM(str) {\n    var container = document.createElement('div');\n    container.innerHTML = str;\n    var dom = container.childNodes[0];\n    if (dom && container.contains(dom)) {\n        container.removeChild(dom);\n    }\n    return dom;\n}\n//# sourceMappingURL=create-dom.js.map","var clamp = function (a, min, max) {\n    if (a < min) {\n        return min;\n    }\n    else if (a > max) {\n        return max;\n    }\n    return a;\n};\nexport default clamp;\n//# sourceMappingURL=clamp.js.map","import isArray from './is-array';\nvar clone = function (obj) {\n    if (typeof obj !== 'object' || obj === null) {\n        return obj;\n    }\n    var rst;\n    if (isArray(obj)) {\n        rst = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n            if (typeof obj[i] === 'object' && obj[i] != null) {\n                rst[i] = clone(obj[i]);\n            }\n            else {\n                rst[i] = obj[i];\n            }\n        }\n    }\n    else {\n        rst = {};\n        for (var k in obj) {\n            if (typeof obj[k] === 'object' && obj[k] != null) {\n                rst[k] = clone(obj[k]);\n            }\n            else {\n                rst[k] = obj[k];\n            }\n        }\n    }\n    return rst;\n};\nexport default clone;\n//# sourceMappingURL=clone.js.map","function debounce(func, wait, immediate) {\n    var timeout;\n    return function () {\n        var context = this, args = arguments;\n        var later = function () {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\nexport default debounce;\n//# sourceMappingURL=debounce.js.map","import isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nvar MAX_MIX_LEVEL = 5;\nfunction hasOwn(object, property) {\n    if (Object.hasOwn) {\n        return Object.hasOwn(object, property);\n    }\n    if (object == null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n    }\n    return Object.prototype.hasOwnProperty.call(Object(object), property);\n}\nfunction _deepMix(dist, src, level, maxLevel) {\n    level = level || 0;\n    maxLevel = maxLevel || MAX_MIX_LEVEL;\n    for (var key in src) {\n        if (hasOwn(src, key)) {\n            var value = src[key];\n            if (value !== null && isPlainObject(value)) {\n                if (!isPlainObject(dist[key])) {\n                    dist[key] = {};\n                }\n                if (level < maxLevel) {\n                    _deepMix(dist[key], value, level + 1, maxLevel);\n                }\n                else {\n                    dist[key] = src[key];\n                }\n            }\n            else if (isArray(value)) {\n                dist[key] = [];\n                dist[key] = dist[key].concat(value);\n            }\n            else if (value !== undefined) {\n                dist[key] = value;\n            }\n        }\n    }\n}\n// todo \nvar deepMix = function (rst) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i += 1) {\n        _deepMix(rst, args[i]);\n    }\n    return rst;\n};\nexport default deepMix;\n//# sourceMappingURL=deep-mix.js.map","import isArray from './is-array';\nimport isObject from './is-object';\nfunction each(elements, func) {\n    if (!elements) {\n        return;\n    }\n    var rst;\n    if (isArray(elements)) {\n        for (var i = 0, len = elements.length; i < len; i++) {\n            rst = func(elements[i], i);\n            if (rst === false) {\n                break;\n            }\n        }\n    }\n    else if (isObject(elements)) {\n        for (var k in elements) {\n            if (elements.hasOwnProperty(k)) {\n                rst = func(elements[k], k);\n                if (rst === false) {\n                    break;\n                }\n            }\n        }\n    }\n}\nexport default each;\n//# sourceMappingURL=each.js.map","import isArrayLike from './is-array-like';\nvar filter = function (arr, func) {\n    if (!isArrayLike(arr)) {\n        return arr;\n    }\n    var result = [];\n    for (var index = 0; index < arr.length; index++) {\n        var value = arr[index];\n        if (func(value, index)) {\n            result.push(value);\n        }\n    }\n    return result;\n};\nexport default filter;\n//# sourceMappingURL=filter.js.map","import isString from './is-string';\n/**\n * https://github.com/developit/dlv/blob/master/index.js\n * @param obj\n * @param key\n * @param defaultValue\n */\nexport default (function (obj, key, defaultValue) {\n    var p = 0;\n    var keyArr = isString(key) ? key.split('.') : key;\n    while (obj && p < keyArr.length) {\n        obj = obj[keyArr[p++]];\n    }\n    return obj === undefined || p < keyArr.length ? defaultValue : obj;\n});\n//# sourceMappingURL=get.js.map","export default (function (v) { return v; });\n//# sourceMappingURL=identity.js.map","var isArrayLike = function (value) {\n    /**\n     * isArrayLike([1, 2, 3]) => true\n     * isArrayLike(document.body.children) => true\n     * isArrayLike('abc') => true\n     * isArrayLike(Function) => false\n     */\n    return value !== null && typeof value !== 'function' && isFinite(value.length);\n};\nexport default isArrayLike;\n//# sourceMappingURL=is-array-like.js.map","/**\n * \n * @return \n */\nexport default function isArray(value) {\n    return Array.isArray(value);\n}\n//# sourceMappingURL=is-array.js.map","/**\n * \n *\n * @param {Object} value \n * @return {Boolean}\n */\nimport isType from './is-type';\nvar isBoolean = function (value) {\n    return isType(value, 'Boolean');\n};\nexport default isBoolean;\n//# sourceMappingURL=is-boolean.js.map","import isObjectLike from './is-object-like';\nimport isArrayLike from './is-array-like';\nimport isString from './is-string';\nvar isEqual = function (value, other) {\n    if (value === other) {\n        return true;\n    }\n    if (!value || !other) {\n        return false;\n    }\n    if (isString(value) || isString(other)) {\n        return false;\n    }\n    if (isArrayLike(value) || isArrayLike(other)) {\n        if (value.length !== other.length) {\n            return false;\n        }\n        var rst = true;\n        for (var i = 0; i < value.length; i++) {\n            rst = isEqual(value[i], other[i]);\n            if (!rst) {\n                break;\n            }\n        }\n        return rst;\n    }\n    if (isObjectLike(value) || isObjectLike(other)) {\n        var valueKeys = Object.keys(value);\n        var otherKeys = Object.keys(other);\n        if (valueKeys.length !== otherKeys.length) {\n            return false;\n        }\n        var rst = true;\n        for (var i = 0; i < valueKeys.length; i++) {\n            rst = isEqual(value[valueKeys[i]], other[valueKeys[i]]);\n            if (!rst) {\n                break;\n            }\n        }\n        return rst;\n    }\n    return false;\n};\nexport default isEqual;\n//# sourceMappingURL=is-equal.js.map","/**\n * \n * @return \n */\nexport default function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=is-function.js.map","/**\n *  null  undefined\n * @return  null  undefined\n */\nexport default function isNil(value) {\n    return value === null || value === undefined;\n}\n//# sourceMappingURL=is-nil.js.map","var PRECISION = 0.00001; // numbers less than this is considered as 0\n/**\n * \n * @return \n */\nexport default function isNumberEqual(a, b, precision) {\n    if (precision === void 0) { precision = PRECISION; }\n    return a === b || Math.abs(a - b) < precision;\n}\n//# sourceMappingURL=is-number-equal.js.map","/**\n * \n * @return \n */\nexport default function isNumber(value) {\n    return typeof value === 'number';\n}\n//# sourceMappingURL=is-number.js.map","var isObjectLike = function (value) {\n    /**\n     * isObjectLike({}) => true\n     * isObjectLike([1, 2, 3]) => true\n     * isObjectLike(Function) => false\n     * isObjectLike(null) => false\n     */\n    return typeof value === 'object' && value !== null;\n};\nexport default isObjectLike;\n//# sourceMappingURL=is-object-like.js.map","export default (function (value) {\n    /**\n     * isObject({}) => true\n     * isObject([1, 2, 3]) => true\n     * isObject(Function) => true\n     * isObject(null) => false\n     */\n    var type = typeof value;\n    return (value !== null && type === 'object') || type === 'function';\n});\n//# sourceMappingURL=is-object.js.map","import isObjectLike from './is-object-like';\nimport isType from './is-type';\nvar isPlainObject = function (value) {\n    /**\n     * isObjectLike(new Foo) => false\n     * isObjectLike([1, 2, 3]) => false\n     * isObjectLike({ x: 0, y: 0 }) => true\n     * isObjectLike(Object.create(null)) => true\n     */\n    if (!isObjectLike(value) || !isType(value, 'Object')) {\n        return false;\n    }\n    if (Object.getPrototypeOf(value) === null) {\n        return true;\n    }\n    var proto = value;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(value) === proto;\n};\nexport default isPlainObject;\n//# sourceMappingURL=is-plain-object.js.map","/**\n * \n * @return \n */\nexport default function isString(value) {\n    return typeof value === 'string';\n}\n//# sourceMappingURL=is-string.js.map","var toString = {}.toString;\nvar isType = function (value, type) { return toString.call(value) === '[object ' + type + ']'; };\nexport default isType;\n//# sourceMappingURL=is-type.js.map","var isUndefined = function (value) {\n    return value === undefined;\n};\nexport default isUndefined;\n//# sourceMappingURL=is-undefined.js.map","import toString from './to-string';\nvar lowerFirst = function (value) {\n    var str = toString(value);\n    return str.charAt(0).toLowerCase() + str.substring(1);\n};\nexport default lowerFirst;\n//# sourceMappingURL=lower-first.js.map","/**\n * \n * @param arr \n * @return \n */\nexport default function max(arr) {\n    if (!Array.isArray(arr))\n        return -Infinity;\n    var length = arr.length;\n    if (!length)\n        return -Infinity;\n    var max = arr[0];\n    for (var i = 1; i < length; i++) {\n        max = Math.max(max, arr[i]);\n    }\n    return max;\n}\n//# sourceMappingURL=max.js.map","function flru(max) {\n    var num, curr, prev;\n    var limit = max || 1;\n    function keep(key, value) {\n        if (++num > limit) {\n            prev = curr;\n            reset(1);\n            ++num;\n        }\n        curr[key] = value;\n    }\n    function reset(isPartial) {\n        num = 0;\n        curr = Object.create(null);\n        isPartial || (prev = Object.create(null));\n    }\n    reset();\n    return {\n        clear: reset,\n        has: function (key) {\n            return curr[key] !== void 0 || prev[key] !== void 0;\n        },\n        get: function (key) {\n            var val = curr[key];\n            if (val !== void 0)\n                return val;\n            if ((val = prev[key]) !== void 0) {\n                keep(key, val);\n                return val;\n            }\n        },\n        set: function (key, value) {\n            if (curr[key] !== void 0) {\n                curr[key] = value;\n            }\n            else {\n                keep(key, value);\n            }\n        },\n    };\n}\nvar CacheMap = new Map();\n/**\n * \n * @example\n * _.memoize(calColor);\n * _.memoize(calColor, (...args) => args[0]);\n * @param fn \n * @param resolver  key \n * @param maxSize lru \n */\nexport default function memoize(fn, resolver, maxSize) {\n    if (maxSize === void 0) { maxSize = 128; }\n    var memoized = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        //  key resolver key\n        var key = resolver ? resolver.apply(this, args) : args[0];\n        if (!CacheMap.has(fn))\n            CacheMap.set(fn, flru(maxSize));\n        var cache = CacheMap.get(fn);\n        if (cache.has(key))\n            return cache.get(key);\n        var result = fn.apply(this, args);\n        cache.set(key, result);\n        return result;\n    };\n    return memoized;\n}\n//# sourceMappingURL=memoize.js.map","import isArray from './is-array';\n/**\n * @param {Array} arr The array to iterate over.\n * @return {*} Returns the minimum value.\n * @example\n *\n * min([1, 2]);\n * // => 1\n *\n * min([]);\n * // => undefined\n *\n * const data = new Array(1250010).fill(1).map((d,idx) => idx);\n *\n * min(data);\n * // => 1250010\n * // Math.min(...data) will encounter \"Maximum call stack size exceeded\" error\n */\nexport default (function (arr) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    return arr.reduce(function (prev, curr) {\n        return Math.min(prev, curr);\n    }, arr[0]);\n});\n//# sourceMappingURL=min.js.map","import each from './each';\nimport isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nvar reduce = function (arr, fn, init) {\n    if (!isArray(arr) && !isPlainObject(arr)) {\n        return arr;\n    }\n    var result = init;\n    each(arr, function (data, i) {\n        result = fn(result, data, i);\n    });\n    return result;\n};\nexport default reduce;\n//# sourceMappingURL=reduce.js.map","import reduce from './reduce';\nexport default (function (obj, keys) {\n    return reduce(obj, function (r, curr, key) {\n        if (!keys.includes(key)) {\n            r[key] = curr;\n        }\n        return r;\n    }, {});\n});\n//# sourceMappingURL=omit.js.map","import each from './each';\nimport isPlainObject from './is-plain-object';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nexport default (function (object, keys) {\n    if (object === null || !isPlainObject(object)) {\n        return {};\n    }\n    var result = {};\n    each(keys, function (key) {\n        if (hasOwnProperty.call(object, key)) {\n            result[key] = object[key];\n        }\n    });\n    return result;\n});\n//# sourceMappingURL=pick.js.map","import isObject from './is-object';\nimport isString from './is-string';\nimport isNumber from './is-number';\n/**\n * https://github.com/developit/dlv/blob/master/index.js\n * @param obj\n * @param path\n * @param value\n */\nexport default (function (obj, path, value) {\n    var o = obj;\n    var keyArr = isString(path) ? path.split('.') : path;\n    keyArr.forEach(function (key, idx) {\n        // \n        if (idx < keyArr.length - 1) {\n            if (!isObject(o[key])) {\n                o[key] = isNumber(keyArr[idx + 1]) ? [] : {};\n            }\n            o = o[key];\n        }\n        else {\n            o[key] = value;\n        }\n    });\n    return obj;\n});\n//# sourceMappingURL=set.js.map","export default (function (func, wait, options) {\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options)\n        options = {};\n    var later = function () {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout)\n            context = args = null;\n    };\n    var throttled = function () {\n        var now = Date.now();\n        if (!previous && options.leading === false)\n            previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = func.apply(context, args);\n            if (!timeout)\n                context = args = null;\n        }\n        else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n        return result;\n    };\n    throttled.cancel = function () {\n        clearTimeout(timeout);\n        previous = 0;\n        timeout = context = args = null;\n    };\n    return throttled;\n});\n//# sourceMappingURL=throttle.js.map","import isNil from './is-nil';\nexport default (function (value) {\n    if (isNil(value))\n        return '';\n    return value.toString();\n});\n//# sourceMappingURL=to-string.js.map","import toString from './to-string';\nvar upperFirst = function (value) {\n    var str = toString(value);\n    return str.charAt(0).toUpperCase() + str.substring(1);\n};\nexport default upperFirst;\n//# sourceMappingURL=upper-first.js.map","export function rotateVector(x, y, rad) {\n    var X = x * Math.cos(rad) - y * Math.sin(rad);\n    var Y = x * Math.sin(rad) + y * Math.cos(rad);\n    return { x: X, y: Y };\n}\n//# sourceMappingURL=rotate-vector.js.map","import { rotateVector } from '../util/rotate-vector';\n/**\n * Converts A (arc-to) segments to C (cubic-bezier-to).\n *\n * For more information of where this math came from visit:\n * http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n */\nexport function arcToCubic(X1, Y1, RX, RY, angle, LAF, SF, X2, Y2, recursive) {\n    var x1 = X1;\n    var y1 = Y1;\n    var rx = RX;\n    var ry = RY;\n    var x2 = X2;\n    var y2 = Y2;\n    // for more information of where this Math came from visit:\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    var d120 = (Math.PI * 120) / 180;\n    var rad = (Math.PI / 180) * (+angle || 0);\n    /** @type {number[]} */\n    var res = [];\n    var xy;\n    var f1;\n    var f2;\n    var cx;\n    var cy;\n    if (!recursive) {\n        xy = rotateVector(x1, y1, -rad);\n        x1 = xy.x;\n        y1 = xy.y;\n        xy = rotateVector(x2, y2, -rad);\n        x2 = xy.x;\n        y2 = xy.y;\n        var x = (x1 - x2) / 2;\n        var y = (y1 - y2) / 2;\n        var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n        if (h > 1) {\n            h = Math.sqrt(h);\n            rx *= h;\n            ry *= h;\n        }\n        var rx2 = rx * rx;\n        var ry2 = ry * ry;\n        var k = (LAF === SF ? -1 : 1) *\n            Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n        cx = (k * rx * y) / ry + (x1 + x2) / 2;\n        cy = (k * -ry * x) / rx + (y1 + y2) / 2;\n        // eslint-disable-next-line no-bitwise -- Impossible to satisfy no-bitwise\n        f1 = Math.asin(((((y1 - cy) / ry) * Math.pow(10, 9)) >> 0) / Math.pow(10, 9));\n        // eslint-disable-next-line no-bitwise -- Impossible to satisfy no-bitwise\n        f2 = Math.asin(((((y2 - cy) / ry) * Math.pow(10, 9)) >> 0) / Math.pow(10, 9));\n        f1 = x1 < cx ? Math.PI - f1 : f1;\n        f2 = x2 < cx ? Math.PI - f2 : f2;\n        if (f1 < 0)\n            f1 = Math.PI * 2 + f1;\n        if (f2 < 0)\n            f2 = Math.PI * 2 + f2;\n        if (SF && f1 > f2) {\n            f1 -= Math.PI * 2;\n        }\n        if (!SF && f2 > f1) {\n            f2 -= Math.PI * 2;\n        }\n    }\n    else {\n        f1 = recursive[0], f2 = recursive[1], cx = recursive[2], cy = recursive[3];\n    }\n    var df = f2 - f1;\n    if (Math.abs(df) > d120) {\n        var f2old = f2;\n        var x2old = x2;\n        var y2old = y2;\n        f2 = f1 + d120 * (SF && f2 > f1 ? 1 : -1);\n        x2 = cx + rx * Math.cos(f2);\n        y2 = cy + ry * Math.sin(f2);\n        res = arcToCubic(x2, y2, rx, ry, angle, 0, SF, x2old, y2old, [f2, f2old, cx, cy]);\n    }\n    df = f2 - f1;\n    var c1 = Math.cos(f1);\n    var s1 = Math.sin(f1);\n    var c2 = Math.cos(f2);\n    var s2 = Math.sin(f2);\n    var t = Math.tan(df / 4);\n    var hx = (4 / 3) * rx * t;\n    var hy = (4 / 3) * ry * t;\n    var m1 = [x1, y1];\n    var m2 = [x1 + hx * s1, y1 - hy * c1];\n    var m3 = [x2 + hx * s2, y2 - hy * c2];\n    var m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n        return m2.concat(m3, m4, res);\n        // return [...m2, ...m3, ...m4, ...res];\n    }\n    res = m2.concat(m3, m4, res);\n    // res = [...m2, ...m3, ...m4, ...res];\n    var newres = [];\n    for (var i = 0, ii = res.length; i < ii; i += 1) {\n        newres[i] = i % 2 ? rotateVector(res[i - 1], res[i], rad).y : rotateVector(res[i], res[i + 1], rad).x;\n    }\n    return newres;\n}\n// const TAU = Math.PI * 2;\n// const mapToEllipse = (\n//   { x, y }: { x: number; y: number },\n//   rx: number,\n//   ry: number,\n//   cosphi: number,\n//   sinphi: number,\n//   centerx: number,\n//   centery: number,\n// ) => {\n//   x *= rx;\n//   y *= ry;\n//   const xp = cosphi * x - sinphi * y;\n//   const yp = sinphi * x + cosphi * y;\n//   return {\n//     x: xp + centerx,\n//     y: yp + centery,\n//   };\n// };\n// const approxUnitArc = (ang1: number, ang2: number) => {\n//   // If 90 degree circular arc, use a constant\n//   // as derived from http://spencermortensen.com/articles/bezier-circle\n//   const a =\n//     ang2 === 1.5707963267948966\n//       ? 0.551915024494\n//       : ang2 === -1.5707963267948966\n//       ? -0.551915024494\n//       : (4 / 3) * Math.tan(ang2 / 4);\n//   const x1 = Math.cos(ang1);\n//   const y1 = Math.sin(ang1);\n//   const x2 = Math.cos(ang1 + ang2);\n//   const y2 = Math.sin(ang1 + ang2);\n//   return [\n//     {\n//       x: x1 - y1 * a,\n//       y: y1 + x1 * a,\n//     },\n//     {\n//       x: x2 + y2 * a,\n//       y: y2 - x2 * a,\n//     },\n//     {\n//       x: x2,\n//       y: y2,\n//     },\n//   ];\n// };\n// const vectorAngle = (ux: number, uy: number, vx: number, vy: number) => {\n//   const sign = ux * vy - uy * vx < 0 ? -1 : 1;\n//   let dot = ux * vx + uy * vy;\n//   if (dot > 1) {\n//     dot = 1;\n//   }\n//   if (dot < -1) {\n//     dot = -1;\n//   }\n//   return sign * Math.acos(dot);\n// };\n// const getArcCenter = (\n//   px: any,\n//   py: any,\n//   cx: any,\n//   cy: any,\n//   rx: number,\n//   ry: number,\n//   largeArcFlag: number,\n//   sweepFlag: number,\n//   sinphi: number,\n//   cosphi: number,\n//   pxp: number,\n//   pyp: number,\n// ) => {\n//   const rxsq = Math.pow(rx, 2);\n//   const rysq = Math.pow(ry, 2);\n//   const pxpsq = Math.pow(pxp, 2);\n//   const pypsq = Math.pow(pyp, 2);\n//   let radicant = rxsq * rysq - rxsq * pypsq - rysq * pxpsq;\n//   if (radicant < 0) {\n//     radicant = 0;\n//   }\n//   radicant /= rxsq * pypsq + rysq * pxpsq;\n//   radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n//   const centerxp = ((radicant * rx) / ry) * pyp;\n//   const centeryp = ((radicant * -ry) / rx) * pxp;\n//   const centerx = cosphi * centerxp - sinphi * centeryp + (px + cx) / 2;\n//   const centery = sinphi * centerxp + cosphi * centeryp + (py + cy) / 2;\n//   const vx1 = (pxp - centerxp) / rx;\n//   const vy1 = (pyp - centeryp) / ry;\n//   const vx2 = (-pxp - centerxp) / rx;\n//   const vy2 = (-pyp - centeryp) / ry;\n//   const ang1 = vectorAngle(1, 0, vx1, vy1);\n//   let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n//   if (sweepFlag === 0 && ang2 > 0) {\n//     ang2 -= TAU;\n//   }\n//   if (sweepFlag === 1 && ang2 < 0) {\n//     ang2 += TAU;\n//   }\n//   return [centerx, centery, ang1, ang2];\n// };\n// const arcToBezier = ({ px, py, cx, cy, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0 }) => {\n//   const curves = [];\n//   if (rx === 0 || ry === 0) {\n//     return [{ x1: 0, y1: 0, x2: 0, y2: 0, x: cx, y: cy }];\n//   }\n//   const sinphi = Math.sin((xAxisRotation * TAU) / 360);\n//   const cosphi = Math.cos((xAxisRotation * TAU) / 360);\n//   const pxp = (cosphi * (px - cx)) / 2 + (sinphi * (py - cy)) / 2;\n//   const pyp = (-sinphi * (px - cx)) / 2 + (cosphi * (py - cy)) / 2;\n//   if (pxp === 0 && pyp === 0) {\n//     return [{ x1: 0, y1: 0, x2: 0, y2: 0, x: cx, y: cy }];\n//   }\n//   rx = Math.abs(rx);\n//   ry = Math.abs(ry);\n//   const lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n//   if (lambda > 1) {\n//     rx *= Math.sqrt(lambda);\n//     ry *= Math.sqrt(lambda);\n//   }\n//   let [centerx, centery, ang1, ang2] = getArcCenter(\n//     px,\n//     py,\n//     cx,\n//     cy,\n//     rx,\n//     ry,\n//     largeArcFlag,\n//     sweepFlag,\n//     sinphi,\n//     cosphi,\n//     pxp,\n//     pyp,\n//   );\n//   // If 'ang2' == 90.0000000001, then `ratio` will evaluate to\n//   // 1.0000000001. This causes `segments` to be greater than one, which is an\n//   // unecessary split, and adds extra points to the bezier curve. To alleviate\n//   // this issue, we round to 1.0 when the ratio is close to 1.0.\n//   let ratio = Math.abs(ang2) / (TAU / 4);\n//   if (Math.abs(1.0 - ratio) < 0.0000001) {\n//     ratio = 1.0;\n//   }\n//   const segments = Math.max(Math.ceil(ratio), 1);\n//   ang2 /= segments;\n//   for (let i = 0; i < segments; i++) {\n//     curves.push(approxUnitArc(ang1, ang2));\n//     ang1 += ang2;\n//   }\n//   return curves.map((curve) => {\n//     const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosphi, sinphi, centerx, centery);\n//     const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosphi, sinphi, centerx, centery);\n//     const { x, y } = mapToEllipse(curve[2], rx, ry, cosphi, sinphi, centerx, centery);\n//     return { x1, y1, x2, y2, x, y };\n//   });\n// };\n// export function arcToCubic(\n//   x1: number,\n//   y1: number,\n//   rx: number,\n//   ry: number,\n//   angle: number,\n//   LAF: number,\n//   SF: number,\n//   x2: number,\n//   y2: number,\n// ) {\n//   const curves = arcToBezier({\n//     px: x1,\n//     py: y1,\n//     cx: x2,\n//     cy: y2,\n//     rx,\n//     ry,\n//     xAxisRotation: angle,\n//     largeArcFlag: LAF,\n//     sweepFlag: SF,\n//   });\n//   return curves.reduce((prev, cur) => {\n//     const { x1, y1, x2, y2, x, y } = cur;\n//     prev.push(x1, y1, x2, y2, x, y);\n//     return prev;\n//   }, [] as number[]);\n// }\n//# sourceMappingURL=arc-2-cubic.js.map","export function distanceSquareRoot(a, b) {\n    return Math.sqrt((a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]));\n}\n//# sourceMappingURL=distance-square-root.js.map","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","/* MIT license */\nvar colorNames = require('color-name');\nvar swizzle = require('simple-swizzle');\nvar hasOwnProperty = Object.hasOwnProperty;\n\nvar reverseNames = Object.create(null);\n\n// create a list of reverse color names\nfor (var name in colorNames) {\n\tif (hasOwnProperty.call(colorNames, name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nvar cs = module.exports = {\n\tto: {},\n\tget: {}\n};\n\ncs.get = function (string) {\n\tvar prefix = string.substring(0, 3).toLowerCase();\n\tvar val;\n\tvar model;\n\tswitch (prefix) {\n\t\tcase 'hsl':\n\t\t\tval = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\tcase 'hwb':\n\t\t\tval = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tval = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t}\n\n\tif (!val) {\n\t\treturn null;\n\t}\n\n\treturn {model: model, value: val};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar abbr = /^#([a-f0-9]{3,4})$/i;\n\tvar hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n\tvar rgba = /^rgba?\\(\\s*([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar keyword = /^(\\w+)$/;\n\n\tvar rgb = [0, 0, 0, 1];\n\tvar match;\n\tvar i;\n\tvar hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tvar i2 = i * 2;\n\t\t\trgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha + hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i + 1], 0);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\tif (!hasOwnProperty.call(colorNames, match[1])) {\n\t\t\treturn null;\n\t\t}\n\n\t\trgb = colorNames[match[1]];\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hsl = /^hsla?\\(\\s*([+-]?(?:\\d{0,3}\\.)?\\d+)(?:deg)?\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*(?:[,|\\/]\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hsl);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar s = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar l = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hwb = /^hwb\\(\\s*([+-]?\\d{0,3}(?:\\.\\d+)?)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hwb);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar w = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar b = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n\tvar rgba = swizzle(arguments);\n\n\tvar r = Math.round(rgba[0] / 255 * 100);\n\tvar g = Math.round(rgba[1] / 255 * 100);\n\tvar b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n\tvar hsla = swizzle(arguments);\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function () {\n\tvar hwba = swizzle(arguments);\n\n\tvar a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// helpers\nfunction clamp(num, min, max) {\n\treturn Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n\tvar str = Math.round(num).toString(16).toUpperCase();\n\treturn (str.length < 2) ? '0' + str : str;\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n\tvar results = [];\n\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (isArrayish(arg)) {\n\t\t\t// http://jsperf.com/javascript-array-concat-vs-push/98\n\t\t\tresults = concat.call(results, slice.call(arg));\n\t\t} else {\n\t\t\tresults.push(arg);\n\t\t}\n\t}\n\n\treturn results;\n};\n\nswizzle.wrap = function (fn) {\n\treturn function () {\n\t\treturn fn(swizzle(arguments));\n\t};\n};\n","module.exports = function isArrayish(obj) {\n\tif (!obj || typeof obj === 'string') {\n\t\treturn false;\n\t}\n\n\treturn obj instanceof Array || Array.isArray(obj) ||\n\t\t(obj.length >= 0 && (obj.splice instanceof Function ||\n\t\t\t(Object.getOwnPropertyDescriptor(obj, (obj.length - 1)) && obj.constructor.name !== 'String')));\n};\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nfunction _callSuper(t, o, e) {\n  return o = getPrototypeOf(o), possibleConstructorReturn(t, isNativeReflectConstruct() ? Reflect.construct(o, e || [], getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nexport { _callSuper as default };","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nfunction _createForOfIteratorHelper(r, e) {\n  var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (!t) {\n    if (Array.isArray(r) || (t = unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n      t && (r = t);\n      var _n = 0,\n        F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          return _n >= r.length ? {\n            done: !0\n          } : {\n            done: !1,\n            value: r[_n++]\n          };\n        },\n        e: function e(r) {\n          throw r;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var o,\n    a = !0,\n    u = !1;\n  return {\n    s: function s() {\n      t = t.call(r);\n    },\n    n: function n() {\n      var r = t.next();\n      return a = r.done, r;\n    },\n    e: function e(r) {\n      u = !0, o = r;\n    },\n    f: function f() {\n      try {\n        a || null == t[\"return\"] || t[\"return\"]();\n      } finally {\n        if (u) throw o;\n      }\n    }\n  };\n}\nexport { _createForOfIteratorHelper as default };","\"use client\";\n\n// src/useMutationState.ts\nimport * as React from \"react\";\nimport { notifyManager, replaceEqualDeep } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useIsMutating(filters, queryClient) {\n  const client = useQueryClient(queryClient);\n  return useMutationState(\n    { filters: { ...filters, status: \"pending\" } },\n    client\n  ).length;\n}\nfunction getResult(mutationCache, options) {\n  return mutationCache.findAll(options.filters).map(\n    (mutation) => options.select ? options.select(mutation) : mutation.state\n  );\n}\nfunction useMutationState(options = {}, queryClient) {\n  const mutationCache = useQueryClient(queryClient).getMutationCache();\n  const optionsRef = React.useRef(options);\n  const result = React.useRef(null);\n  if (!result.current) {\n    result.current = getResult(mutationCache, options);\n  }\n  React.useEffect(() => {\n    optionsRef.current = options;\n  });\n  return React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => mutationCache.subscribe(() => {\n        const nextResult = replaceEqualDeep(\n          result.current,\n          getResult(mutationCache, optionsRef.current)\n        );\n        if (result.current !== nextResult) {\n          result.current = nextResult;\n          notifyManager.schedule(onStoreChange);\n        }\n      }),\n      [mutationCache]\n    ),\n    () => result.current,\n    () => result.current\n  );\n}\nexport {\n  useIsMutating,\n  useMutationState\n};\n//# sourceMappingURL=useMutationState.js.map","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export default function(x, y) {\n  var nodes, strength = 1;\n\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x, sy += node.y;\n    }\n\n    for (sx = (sx / n - x) * strength, sy = (sy / n - y) * strength, i = 0; i < n; ++i) {\n      node = nodes[i], node.x -= sx, node.y -= sy;\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  return force;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(random) {\n  return (random() - 0.5) * 1e-6;\n}\n","import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      random,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        y = target.y + target.vy - source.y - source.vy || jiggle(random);\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\nimport {x, y} from \"./simulation.js\";\n\nexport default function() {\n  var nodes,\n      node,\n      random,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i, n = nodes.length, tree = quadtree(nodes, x, y).visitAfter(accumulate);\n    for (alpha = _, i = 0; i < n; ++i) node = nodes[i], tree.visit(apply);\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    strengths = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n  }\n\n  function accumulate(quad) {\n    var strength = 0, q, c, weight = 0, x, y, i;\n\n    // For internal nodes, accumulate forces from child quadrants.\n    if (quad.length) {\n      for (x = y = i = 0; i < 4; ++i) {\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\n        }\n      }\n      quad.x = x / weight;\n      quad.y = y / weight;\n    }\n\n    // For leaf nodes, accumulate forces from coincident quadrants.\n    else {\n      q = quad;\n      q.x = q.data.x;\n      q.y = q.data.y;\n      do strength += strengths[q.data.index];\n      while (q = q.next);\n    }\n\n    quad.value = strength;\n  }\n\n  function apply(quad, x1, _, x2) {\n    if (!quad.value) return true;\n\n    var x = quad.x - node.x,\n        y = quad.y - node.y,\n        w = x2 - x1,\n        l = x * x + y * y;\n\n    // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(random), l += x * x;\n        if (y === 0) y = jiggle(random), l += y * y;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * quad.value * alpha / l;\n        node.vy += y * quad.value * alpha / l;\n      }\n      return true;\n    }\n\n    // Otherwise, process points directly.\n    else if (quad.length || l >= distanceMax2) return;\n\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (quad.data !== node || quad.next) {\n      if (x === 0) x = jiggle(random), l += x * x;\n      if (y === 0) y = jiggle(random), l += y * y;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do if (quad.data !== node) {\n      w = strengths[quad.data.index] * alpha / l;\n      node.vx += x * w;\n      node.vy += y * w;\n    } while (quad = quad.next);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function(_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function(_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function(_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\n\nexport default function(nodes) {\n  var simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function(force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= velocityDecay;\n        else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(0.5 + i), angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function(x, y, radius) {\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n\n      if (radius == null) radius = Infinity;\n      else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n","import constant from \"./constant.js\";\n\nexport default function(x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\n\nexport default function(y) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      yz;\n\n  if (typeof y !== \"function\") y = constant(y == null ? 0 : +y);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    yz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(yz[i] = +y(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : y;\n  };\n\n  return force;\n}\n","export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n"],"names":["parseAnimationOption","option","enter","update","exit","keys","baseOption","Object","fromEntries","entries","filter","_a","k","includes","map","isStandardAnimationOption","onAnimateFinished","animation","callback","finished","then","onAnimatesFinished","animations","length","Promise","all","a","attr","target","value","animate","keyframes","options","style","slice","transitionShape","source","after","nodeName","attributes","text","identicalTextNode","remove","afterTransition","destroy","isVisible","duration","_b","delay","middle","Math","ceil","offset","_c","getGeometryBounds","center","sx","sy","_d","ex","ey","_e","mx","my","_f","opacity","so","_g","to","st","transform","tt","sourceAnimation","concat","fill","targetAnimation","transition","state","from","forEach","key","tarStyle","currStyle","parsedStyle","applyVisibility","this","visibility","Component","_super","defaultStyleProps","_this","call","initialized","_defaultOptions","defineProperty","prototype","get","_offscreen","enumerable","configurable","connectedCallback","render","bindEvents","disconnectedCallback","attributeChangedCallback","name","clear","removeChildren","container","getSubShapeStyle","x","y","transformOrigin","class","className","zIndex","Text","restOptions","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineWidth","textAlign","textBaseline","degToRad","deg","PI","radToDeg","rad","Number","toPrecision","element","PRIMILTIVE_ATTRIBUTES","isPrimitiveAttribute","getPrimitiveAttributes","object","CLASS_NAMES","lineGroup","line","regionGroup","region","getStraightPath","points","reduce","acc","curr","idx","push","getLinePath","cfg","reversed","type","connect","radius","sweepFlag","r","p","getSurroundPath","connectPaths","closeFlag","closed","reverse","path1","path2","startOfFrom","endOfTo","createPath","insertA","insertB","flat","Error","raduis1","radius2","Grid","apply","arguments","areaFill","data","datum","start","getData","maybeAppendByClassName","lineTransitions","isBillboard","lines","item","id","d","selectAll","join","append","each","index","lineStyle","stroke","lineDash","fadeOut","transitions","renderGridLine","reigionTransitions","colors","Array","isArray","getColor","regions","path","_","i","regionStyle","renderAlternateRegion","interpolate","t","numberInterpolate","nb","na","min","c","arrayInterpolate","v","objectInterpolate","omit","obj","res","innerKeys","getCallbackStyle","params","val","filterExec","getLineAngle","startAngle","endAngle","getLineTangentVector","startPos","startX","startY","endPos","endX","endY","dx","dy","angle","sin","cos","getDirectionVector","direction","tangentVector","getLabelVector","labelDirection","getValuePos","getLinearValuePos","cx","cy","getArcValuePos","isAxisHorizontal","isAxisVertical","isCircle","getArcPath","diffAngle","rx","ry","startAngleRadians","endAngleRadians","getPosByAngle","x1","y1","x2","y2","middleAngleRadians","large","sweep","renderArc","styles","int","count","array","__keyframe_data__","keyframeInterpolate","arc","getArcAttr","layout","onframe","onfinish","renderLinear","showTrunc","truncRange","lineExtension","range","l1","l2","L","sqrt","pow","s1","s2","extendLine","ox1","oy1","ox2","oy2","renderLine","r1","r2","x3","y3","x4","y4","lineFirst","lineSecond","truncShape","renderTruncation","renderAxisLine","shapeToAddArrow","showArrow","lineArrow","lineArrowOffset","lineArrowSize","select","node","markerEnd","undefined","arrow","renderAxisArrow","getGridCenter","gridCenter","renderStraight","gridLength","gridDirection","getGridVector","renderGrid","gridAttr","finalData","gridFilter","gridItems","controlAngles","gridControlAngles","angleInRad","cosa","sina","renderSurround","grid","inRange","n","end","includeLeft","includeRight","percentTransform","computedVal","replace","match","getBBox","width","height","parseFloat","getTranslate","e","defined","isNaN","Bounds","set","rotatedPoints","radian","MAX_VALUE","getBounds","margin","getEulerAngles","setEulerAngles","max","right","bottom","w","anchorX","anchorY","b_1","_h","b","_j","bounds","onLine","point","isRectangleBInsideA","rectA","rectB","every","polygon","line1","line2","dir1","dir2","dir3","dir4","lineToInfinity","side","isPointInsideRectangle","lineToLine","x0","y0","s10x","s10y","s32x","s32y","denom","denomPositive","s02x","s02y","sNum","tNum","intersectBoxLine","box","some","boxLine","boundTest","items","e_1","crossPadding","resultSet","Set","prev","crossBBox","padding","crossSize","size","dMin","dMax","top_1","right_1","bottom_1","left_1","top","left","labelVector","diff","bbox","createCrossBBox","testContain","child","contain","testIntersect","prevItem","currItem","firstChild","q","linesP","linesP_1","linesP_1_1","next","done","e_1_1","error","return","intersect","items_1","items_1_1","add","parseLengthString","str","font","floor","methods","seq","OverlapUtils","Map","labels","overlapCfg","utils","keepHeader","keepTail","first","last","arr","parityHide","reset","els","show","minLabelWidth","minX","maxX","distance","abs","splice","hide","optionalAngles","recoverWhenFailed","defaultAngles","label","getLocalEulerAngles","setLabelsRotate","rotate","optionalAngles_1","optionalAngles_1_1","suffix","minLength","maxLength","Infinity","step","ellipsisStep","getTextShape","_loop_1","allowedLength","ellipsis","state_1","wordWrapWidth","maxLines","defaultLines","minLines","inferTextBaseline","setLabelsWrap","wrap","processOverlap","labelOverlap","util","querySelector","canProcessOverlap","getFactor","args","_i","cur","angleNormalizer","normalizedAngle","round","getAngle","v1","v2","dot","det","atan2","getLabelRotation","labelAlign","_rotate","correctLabelRotation","getLabelStyle","labelAngle","tickAngle","getLabelPos","showTick","tickLength","tickDirection","labelSpacing","indexOf","finalLabelSpacing","extraLength","applyTextStyle","overlapHandler","childNodes","group","setLocalEulerAngles","textStyle","__data__","labelItem","setRotateAndAdjustLabelAlign","len","wordWrap","renderLabel","labelFormatter","formatter","labelStyle","groupStyle","getTickVector","getTickLineLayout","tickVector","unitVector","getTickPoints","createTick","tickAttr","tick","tickFormatter","el","tickItem","createTickEl","tickStyle","applyTickStyle","getTitlePosition","mainGroup","titleGroup","titlePosition","position","spacing","titleSpacing","pos","getLocalBounds","mainX","mainY","halfExtents","mainHalfWidth","mainHalfHeight","titleHalfWidth","titleHalfHeight","spacingTop","spacingRight","spacingBottom","spacingLeft","applyTitleStyle","title","axis","titleStyle","specified","inferTransform","renderAxisMain","showLine","showLabel","tickGroup","tickTransitions","axisData","tickFilter","renderTicks","labelGroup","labelTransitions","labelFilter","prevLabel","shapeAnimation","selection","renderLabels","Axis","specificAnimation","titleText","showTitle","showGrid","dataThreshold","sampledData","result","sampling","finalAnimation","gridGroup","gridTransitions","offscreenGroup","mainTransitions","titleTransitions","renderTitle","AXIS_BASE_DEFAULT_ATTR","easing","lineLineWidth","lineStroke","titleFill","titleFontSize","titleTextAlign","titleTextBaseline","labelFontSize","gridConnect","gridType","tickLineWidth","tickStroke","DEFAULT_INDICATOR_STYLE_PROPS","backgroundFill","backgroundLineCap","backgroundLineWidth","backgroundStroke","backgroundZIndex","toString","labelFill","labelTextBaseline","background","Indicator","appendChild","isMutationObserved","renderBackground","l","getPath","labelText","adjustLayout","pathArray","newPath","createCorner","edge","isH","b0","b1","hL","cL","hCL","cS","a0","a1","a2","a3","a4","on","BOUNDS_CHANGED","prevBtnGroup","prevBtn","nextBtnGroup","nextBtn","pageInfoGroup","pageInfo","playWindow","contentGroup","controller","clipPath","Navigator","buttonCursor","buttonFill","buttonD","buttonSize","controllerPadding","controllerSpacing","total","defaultPage","loop","orientation","pageNumFill","pageNumFontSize","pageNumTextAlign","pageNumTextBaseline","playState","innerCurrPage","clamp","pageViews","children","totalPages","m","transpose","pageView","maxWidth","maxHeight","pageWidth","pageHeight","getContainer","controllerShape","pageShape","goTo","pageNum","animateOptions","currPage","setLocalPosition","prepareFollowingPage","getFollowingPageDiff","setVisiblePages","updatePageInfo","pages","page","following","renderClipPath","adjustControllerLayout","pW","bpW","bpH","bnW","bnH","o1x","o1y","_k","o2x","o2y","_l","o3x","o3y","pageNumText","sign","renderController","visible","pathStyle","whetherToAddEventListener","btn","addEventListener","containerSelection","debounce","INSERTED","REMOVED","markerGroup","marker","valueGroup","backgroundGroup","CategoryItem","span","markerSize","valueFill","valueFontSize","valueTextBaseline","valueText","labelWidth","labelHeight","valueWidth","valueHeight","markerWidth","span1","innerSpan","span2","showValue","basis","fullWidth","actualSpace","spacing1","spacing2","width_1","shape","markerShapeStyle","markerStrokeWidth","strokeWidth","markerLineWidth","markerStroke","renderMarker","parent","oldMarker","newMarker","symbol","scale","getScale","scaleSize","_transform","renderValue","markerX","labelX","valueX","halfHeight","ctn","navigator","ifSatisfied","rule","defaultValue","CategoryItems","gridRow","gridCol","rowPadding","colPadding","click","noop","mouseenter","mouseleave","navigatorShape","getGridLayout","navWidth","pageSize","prevOffset","pageIndex","dir","ifHorizontal","row","col","colWidth","rowHeight","getFlexLayout","cP","limitWidth","limitHeight","prevWidth","prevHeight","nextWidth","cb","flattenPage","querySelectorAll","removeChild","renderItems","dispatchCustomEvent","bind","renderData","relayoutNavigator","navHeight","by","itemsLayouts","itemsLayout","layouts","categoryItems","renderNavigator","navStyle","that","payload","evt","detail","dispatchEvent","Category","finalTitleStyle","partialItemStyle","itemStyle","itemsGroup","getAvailableSpace","availableSpace","LEGEND_BASE_DEFAULT_OPTIONS","titleFontWeight","titleFontFamily","CATEGORY_DEFAULT_OPTIONS","CONTINUOUS_DEFAULT_OPTIONS","color","indicatorBackgroundFill","indicatorLabelFill","indicatorLabelFontSize","indicatorVisibility","showHandle","showIndicator","slidable","STEP_RATIO","ribbonGroup","ribbon","handlesGroup","handle","startHandle","endHandle","indicator","DEFAULT_HANDLE_CFG","markerFill","Handle","markerSymbol","handleStyle","markerStyle","getStepValueByValue","registerSymbol","diffY","halfWidth","oneSixthWidth","triangleX","triangleY","getSafetySelections","domain","newSelection","oldSelection","precision","prevStart","prevEnd","startVal","endVal","getType","markerType","icon","Image","dataURLsPattern","RegExp","test","parseMarker","Marker","img","symbolFn","getSymbol","MARKER_SYMBOL_MAP","getSymbols","hv","vh","circle","square","diamond","triangle","triangleDown","hexagon","diffX","bowtie","cross","plus","hyphen","dash","smooth","hvh","vhv","button","HANDLE_ICON_DEFAULT_CFG","strokeOpacity","HANDLE_LABEL_DEFAULT_CFG","fillOpacity","HANDLE_DEFAULT_CFG","foreground","sparkline","sparklineGroup","track","brushArea","iconGroup","iconRect","iconLine","HandleIcon","iconStyle","rect","labelY","rest","stopPropagation","renderIcon","iconShape","Columns","columnsGroup","columns","Lines","linesGroup","areasGroup","areas","renderLines","renderAreas","catmullRom2Bezier","crp","z","constraint","isLoop","pointList","cp1","cp2","controlPointList","prevPoint","nextPoint","nextCp0","cp0","cps","hasConstraint","d0","d1","sum","shift","smoothBezier","lineToLinePath","M","linePath","lineToCurvePath","unshift","closePathByBaseLine","baseline","closedPath","clone","fn","minItem","maxItem","getRange","getStackedData","datumLen","positivePrev","negativePrev","j","Sparkline","isStack","areaOpacity","isGroup","columnLineWidth","columnStroke","rawData","createScales","scales","getOptions","areaStyle","containerShape","dataToLines","paths","currLine","currCurvePath","belowCurvePath","A","linesToStackCurveAreaPaths","linesToStackAreaPaths","linesToAreaPaths","columnStyle","minVal","maxVal","heightScale","bandWidth","getBandWidth","column","barWidth","linesStyle","columnsStyle","yScale","paddingInner","paddingOuter","align","tag","Slider","brushable","handleSpacing","autoFitLabel","scrollable","selectionFill","selectionFillOpacity","selectionZIndex","trackFill","trackLength","trackOpacity","trackSize","trackZIndex","values","selectionType","handleIconOffset","onDragStart","prevPos","getOrientVal","X","Y","selectionStartPos","getRatio","selectionWidth","document","onDragging","onDragEnd","currPos","diffPos","deltaVal","setValuesOffset","innerSetValues","sort","removeEventListener","updateHandlesPosition","onValueChange","oldValue","onChange","internalOldValue","getValues","clampValues","setValues","updateSelectionArea","newSelectionArea","calcSelectionArea","foregroundGroup","getHandleStyle","trigger","oldValues","newValues","renderTrack","trackShape","renderBrushArea","cursor","renderSparkline","sparklineStyle","renderHandles","H","renderSelection","selectionStyle","applyStyle","area","selectionShape","num","internalValues","calcHandlePosition","handleType","stVal","inferTextStyle","calcHandleText","getHandleSize","temp","textWidth","textHeight","finaleWidth","iW","iH","fX","fY","fW","fH","totalSpacing","finalWidth","negativeSize","getHandleLabelStyle","getHandleIconStyle","handleIconShape","ox","oy","showLabelOnInteraction","internalShowLabel","handleIconSize","stOffset","endOffset","event","onScroll","deltaX","deltaY","parsePosition","split","content","inset","titleBBox","contentBBox","insetTop","insetRight","insetBottom","insetLeft","spacingWidth","spacingHeight","insetWidth","insetHeight","contentWidth","contentHeight","mayApplyStyle","finalStyle","Title","containerWidth","containerHeight","titleWidth","titleHeight","restStyle","hW","hH","getTitleLayout","o","charAt","replaceChildren","innerHTML","getClassNames","prefixCls","CONTAINER","TITLE","LIST","LIST_ITEM","NAME","MARKER","NAME_LABEL","VALUE","CROSSHAIR_X","CROSSHAIR_Y","TEXT_OVERFLOW_STYLE","overflow","getDefaultTooltipStyle","CLASS_NAME","display","flex","float","Tooltip","template","enterable","bounding","timestamp","prevCustomContentKey","contentKey","initShape","offsetWidth","offsetHeight","renderHTMLTooltipElement","updatePosition","setPosition","closeTransition","isCursorEntered","setAttribute","renderCustomContent","pointerEvents","getElementsByClassName","itemsElements","HTMLTooltipItemsElements","ul","createElement","list","replaceWith","getRelativeOffsetFromCursor","assignPosition","finalPosition","positionScore","elementSize","absolutelyOffset","abs1","abs2","pos1","pos2","setOffsetPosition","offsetX","offsetY","showDelay","currentTimestamp","Date","now","autoPosition","cursorX","cursorY","expectLeft","expectTop","inversion","boundingX","boundingY","edgeCompare","correctivePosition","correctedPositionString","clientX","clientY","getBoundingClientRect","isPointIn","setTimeout","BBox","fromRect","other","toJSON","getCallbackValue","classNames","cls","prefix","PREFIX","assign","deep","dist","src","level","maxLevel","hasOwnProperty","deepAssign","rst","ellipsisIt","textOverflow","getEventPos","canvas","touches","renderExtDo","String","ifShow","creator","removeHandler","g","vec","s","vec1","vec2","sub","normalize","vertical","flag","OffscreenGroup","createOffscreenGroup","isInOffscreenGroup","ancestor","scaleToPixel","applyScale","Selection","elements","selections","updateElements","_Selection_instances","_elements","_data","_parent","_document","_enter","_update","_exit","_merge","_split","_transitions","_facetElements","_Selection_maybeAppend","selector","selectFacetAll","newElement","__fromElements__","maybeAppend","maybeAppendByName","groupId","keyFunc","grouped","merge","keyElement","keyUpdateElement","groupKeyElements","has","groupKey","__facet__","delete","group_2","group_1","group_1_1","__toData__","S","Ctor","registry","msg","newEnter","newUpdate","newExit","newMerge","newSplit","this_1","callable","maybeUpdate","T","handler","nodes","WeakSet","newChild","ellipse","image","polyline","html","ownerDocument","parseSeriesAttr","series","getLocalBBox","isHorizontal","p1","p2","copyAttributes","toUppercaseFirstLetter","string","toUpperCase","removePrefix","lowercaseFirstLetter","inferPrefix","withoutPrefix","toLowerCase","toLowercaseFirstLetter","applyStyleSheet","styleString","matches","cssText","currVal","startsWith","nextChart","subStyleProps","invert","addPrefix","name_1","superStyleProps","splitStyle","ignoreStyleDict","groupStyleDict","output","ctx","mockMeasureTextWidth","measureTextWidth","offscreenCanvasCreator","getOrCreateContext","measureText","getFont","textShape","textOf","applyToText","traverse","EventEmitter","_events","once","emit","events","wildcardEvents","doEmit","es","off","length_1","getEvents","generatePath$6","context","_parsedStyle$cx","_parsedStyle$cy","generatePath$5","scaleX","scaleY","save","generatePath$4","markerStart","markerStartOffset","markerEndOffset","startOffsetX","startOffsetY","endOffsetX","endOffsetY","moveTo","lineTo","generatePath$3","_parsedStyle$d","absolutePath","segments","_getStartTangent","parentNode","getStartTangent","_getStartTangent2","_getEndTangent","getEndTangent","_getEndTangent2","_p","_p2","command","nextSegment","useStartOffset","useEndOffset","_ref","_ref2","startOffsetXTemp","startOffsetYTemp","_ref3","_ref4","endOffsetXTemp","endOffsetYTemp","quadraticCurveTo","bezierCurveTo","arcParams","xRotation","translate","closePath","generatePath$2","generatePath$1","generatePath","_parsedStyle$x","_parsedStyle$y","h","signX","signY","_radius$map","_radius$map2","tlr","trr","brr","blr","Plugin","_AbstractRendererPlug","_len","_key","_pathGeneratorFactory","pathGeneratorFactory","CIRCLE","ELLIPSE","RECT","LINE","POLYLINE","POLYGON","PATH","TEXT","GROUP","IMAGE","HTML","MESH","FRAGMENT","tmpVec3a","vec3","tmpVec3b","tmpVec3c","tmpMat4","mat4","create","CanvasPickerPlugin","isHit","displayObject","worldTransform","isClipPath","pick","pointInPathPickerFactory","invertWorldMat","localPosition","isPointInPath","runtime","config","offscreenCanvas","beginPath","_renderingContext$roo","_this2","renderingService","renderingContext","root","hooks","tapPromise","mark","_callee","_context","abrupt","stop","_x","pickSync","tap","_step","topmost","_result$position","hitTestList","elementsFromBBox","pickedDisplayObjects","_iterator","_displayObject","getWorldTransform","clipped","picked","err","f","isPointInPath$8","_ref$cx","_ref$cy","_ref$lineWidth","_ref$increasedLineWid","increasedLineWidthForHitTesting","_ref$pointerEvents","halfLineWidth","absDistance","_isFillOrStrokeAffect","_isFillOrStrokeAffect2","hasFill","hasStroke","ellipseDistance","squareX","squareY","isPointInPath$7","halfLineWith","inBox","minY","inArc","inLine","maxY","inPolyline","isClose","dcmp","onSegment","inPolygon","inPolygons","polygons","isPointInPath$6","isPointInPath$5","renderingPluginContext","hasArc","polylines","totalLength","px","py","segment","currentPoint","prePoint","cubicParams","prePointInCubic","_cDistance","isPointInStroke","isPointInPath$4","isPointInPath$3","isPointInPath$2","_ref$x","_ref$y","lineWidthForHitTesting","radiusArray","_radiusArray","inRectWithRadius","inRect","isPointInPath$1","getOrCreateCanvas","willReadFrequently","defaultStyleRendererFactory","getImageData","component","_pointInPathPickerFac","addRenderingPlugin","removeAllRenderingPlugins","_classPrivateFieldBase","TypeError","_classPrivateFieldKey","RefCountCache","cacheStore","ref","counter","onRefAdded","cacheItem","release","tasks","nextFrameTasks","ImageSlicer","api","rafId","cancelAnimationFrame","task","TASK_NUM_PER_FRAME","requestAnimationFrame","executeTask","sliceWidth","sliceHeight","rerender","overlap","imageWidth","naturalWidth","imageHeight","naturalHeight","strideW","strideH","gridCols","gridRows","tileSize","gridSize","tiles","_loop","_loop2","tempSliceWidth","tempSliceHeight","sliceCanvas","createCanvas","getContext","drawImage","tileX","tileY","IMAGE_CACHE","DESTROY","releaseRef","ImagePool","gradientCache","patternCache","imageSource","imageCache","complete","getOrCreateImage","cache","reason","console","calculateImageTileSize","put","_imageCache","resolve","reject","ev","createImage","_imageCache2","onload","onerror","crossOrigin","_createDownSampledImage","enableLargeImageOptimization","_ref$maxDownSampledIm","maxDownSampledImageSize","_ref$downSamplingRate","downSamplingRateThreshold","createImageBitmapFunc","_imageCache$size","originWidth","originHeight","resizedImage","downSamplingRate","updateCache","sent","globalThis","createImageBitmap","resizeWidth","resizeHeight","t0","getImageSync","downSampled","_x2","_createImageTiles","_callee2","_ref$ownerDocument$de","_context2","defaultView","sliceImage","_x3","_x4","_x5","_x6","pattern","$offscreenCanvas","dpr","patternKey","generatePatternKey","repetition","needScaleWithDPR","mat","canvasPattern","createPattern","identity","setTransform","generateGradientKey","steps","gradient","LinearGradient","_computeLinearGradien","createLinearGradient","RadialGradient","_computeRadialGradien","createRadialGradient","_gradient","unit","kPercentage","addColorStop","entity","isSupportTile","LoadImagePlugin","imagePool","calculateWithAspectRatio","_object$parsedStyle","handleMounted","keepAspectRatio","_ref$img","renderable","dirty","dirtify","handleAttributeChanged","attrName","prevValue","newValue","releaseImage","_ref2$img","init","MOUNTED","ATTR_MODIFIED","_renderState","CanvasRendererPlugin","canvasRendererPluginOptions","removedRBushNodeAABBs","renderQueue","writable","restoreStack","prevObject","currentContext","clearFullScreenLastFrame","clearFullScreen","vpMatrix","dprMatrix","vec3a","vec3b","vec3c","vec3d","_this$context","camera","rBushRoot","enableRenderingOptimization","renderer","getConfig","enableDirtyCheck","enableDirtyRectangleRendering","rBush","contextService","handleUnmounted","rBushNode","aabb","handleCulled","UNMOUNTED","CULLED","getDPR","clearRect","beginFrame","_canvas$context$rende","_this$canvasRendererP","dirtyObjectNumThreshold","dirtyObjectRatioThreshold","_renderingService$get","getStats","rendered","ratio","renderingPlugins","isFirstTimeRenderingFinished","disableDirtyRectangleRendering","resetTransform","renderByZIndex","stack","_currentObject$sortab","currentObject","pop","isCulled","renderDisplayObjectOptimized","renderDisplayObject","objects","sortable","sorted","endFrame","fromScaling","multiply","getOrthoMatrix","restore","dirtyRenderBounds","safeMergeAABB","mergeDirtyAABBs","setMinMax","isEmpty","dirtyRect","convertAABB2Rect","tl","tr","bl","br","minx","miny","maxx","maxy","ix","iy","iwidth","iheight","clip","enableDirtyRectangleRenderingDebug","DIRTY_RECTANGLE","searchDirtyObjects","renderOrder","saveDirtyAABB","fillStyle","fillRect","canvasContext","renderState","clipDraw","styleRenderer","styleRendererFactory","exactEquals","applyWorldTransform","_generatePath","forceUpdateStyle","prevNodeName","applyStyleToContext","drawToContext","compareDocumentPosition","DOCUMENT_POSITION_CONTAINS","_generatePath2","applyAttributesToContext","lineDashOffset","setLineDash","globalAlpha","isNone","strokeStyle","getMin","getMax","dirtyObjects","renderBounds","getRenderBounds","dirtyRectangle","_dirtyRectangle$getMi","_dirtyRectangle$getMi2","_dirtyRectangle$getMa","_dirtyRectangle$getMa2","search","matrix","copy","getLocalTransform","merged","aabbs","getPattern","plugin","_parsedStyle","offscreenCanvasContext","getOrCreatePatternSync","parsedColor","getOrCreateGradient","SHADOW_NUMBER_STYLE","STROKE_STYLE","DEFAULT_STYLE","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","globalCompositeOperation","lineCap","lineJoin","miterLimit","defaultParsedStyle","updateContextIfNotHitCache","OptimizedDefaultRenderer","forceUpdate","prevStyle","blend","_style$lineWidth","styleName","applyCommonStyleToContext","applyStrokeFillStyleToContext","hasShadow","hasFilter","onlyClearShadowFilter","oldFilter","trim","fillRule","resetStyle","_style$fill","_style$opacity","_style$fillOpacity","_style$strokeOpacity","_style$lineWidth2","isInnerShadow","shadowType","isFillTransparent","alpha","shouldDrawShadowWithStroke","originGlobalAlpha","applyShadowAndFilterStyleToContext","fillToContext","clearShadowAndFilterStyleForContext","clearShadowAndFilter","prevOpacity","originBlend","strokeToContext","DefaultRenderer","_OptimizedDefaultRend","_parsedStyle$opacity","_parsedStyle$fillOpac","_parsedStyle$strokeOp","_parsedStyle$lineWidt","setShadowAndFilter","applyFill","applyStroke","skipFill","skipStroke","ImageRenderer","_DefaultRenderer","drawRect","createDownSampledImage","imageRect","originalSize","_context$getTransform","getTransform","scaleToOrigin","scaledTileSize","startTileX","endTileX","endTileY","tileRect","createImageTiles","iw","ih","rect1","rect2","_rect","w1","h1","_rect2","w2","h2","overlapLeft","overlapTop","overlapRight","overlapBottom","_object$ownerDocument","getContextService","getDomElement","viewWidth","viewHeight","currentTransform","transformMatrix","fromValues","renderFull","renderDownSampled","renderTile","_unused","TextRenderer","_parsedStyle$textAlig","_parsedStyle$textBase","_parsedStyle$lineJoin","_parsedStyle$miterLim","_parsedStyle$letterSp","letterSpacing","metrics","lineHeight","lineMetrics","formattedTextBaseline","linePositionY","linePositionX","drawLetterSpacing","isStroke","currentTextAlign","currentPosition","stringArray","previousWidth","currentWidth","currentChar","strokeText","fillText","substring","currentGlobalAlpha","applyOpacity","_defaultStyleRenderer","defaultRenderer","DOMInteractionPlugin","onPointerMove","pointerMove","onPointerUp","pointerUp","onPointerDown","pointerDown","onPointerOver","pointerOver","onPointerOut","pointerOut","onPointerCancel","pointerCancel","onPointerWheel","pointerWheel","onClick","$el","msPointerEnabled","msContentZooming","msTouchAction","supportsPointerEvents","touchAction","addPointerEventListener","addMouseEventListener","supportsTouchEvents","addTouchEventListener","useNativeClickEvent","passive","capture","removePointerEventListener","removeMouseEventListener","removeTouchEventListener","HTMLRenderingPlugin","displayObjectHTMLElementMap","WeakMap","nativeHTMLMap","eventService","joinTransformMatrix","getOrigin","$camera","createCamera","getOrCreateEl","updateAttribute","handleBoundsChanged","handleCanvasResize","_this$context$config","parentElement","RESIZE","renderReasons","CAMERA_CHANGED","_this$context$config2","doc","$canvas","$container","cameraId","$existedCamera","$cameraContainer","offsetLeft","offsetTop","$existedElement","buildCSSText","_object$parsedStyle$p","getAttribute","borderColor","Canvas2DContextService","canvasConfig","_this$canvasConfig","getElementById","resize","devicePixelRatio","_toDataURL","encoderOptions","_args","toDataURL","ContextRegisterPlugin","ContextService","Renderer","_AbstractRenderer","registerPlugin","paramsCount","isPathArray","seg","lk","isAbsoluteArray","isNormalizedArray","pc","paramsParser","qx","qy","finalizeSegment","pathCommand","pathValue","segmentStart","LK","scanFlag","code","charCodeAt","param","isDigitStart","isDigit","scanParam","ch","zeroFirst","hasCeiling","hasDecimal","hasDot","skipSpaces","scanSegment","cmdCode","reqParams","isPathCommand","PathParser","pathString","path2Absolute","pathInput","parsePathString","absoluteSegment","absCommand","absValues","segLength","normalizeSegment","px1","py1","px2","py2","nqx","nqy","normalizePath","seglen","midPoint","ax","ay","segmentLineFactory","angleBetween","v0","v0x","v0y","v1x","v1y","acos","getPointAtArcSegmentLength","RX","RY","LAF","SF","xRotRad","transformedPoint","radiiCheck","cRadicand","cCoef","transformedCenter","startVector","sweepAngle","ellipseComponentX","ellipseComponentY","segmentArcFactory","X1","Y1","X2","Y2","sampleSize","distanceIsNumber","LENGTH","POINT","POINTS","dv","getPointAtCubicSegmentLength","c1x","c1y","c2x","c2y","t1","segmentCubicFactory","getPointAtQuadSegmentLength","segmentQuadFactory","pathLengthFactory","isM","MIN","MAX","ll","fixArc","allPathCommands","pi","ni","lineToCubic","mid","segmentToCubic","r13","r23","path2Curve","needZCommandIndexes","isCurveArray","cloned","ii","zCommandIndexes","curveSegment","getCurveArray","segmentData","curveLength","ss","pts","p0","p3","p4","p5","p6","p7","p8","p9","splitCubic","equalizeSegments","TL","c1","c2","L1","L2","m1","m2","mm","dif","canSplit","getDrawDirection","getCubicSegArea","_get","Reflect","getPrototypeOf","getOwnPropertyDescriptor","_superPropGet","rbush","window","self","exports","quickselect","compare","quickselectStep","defaultCompare","log","exp","sd","swap","tmp","RBush","maxEntries","_maxEntries","_minEntries","findItem","equalsFn","calcBBox","toBBox","distBBox","destNode","createNode","extend","leaf","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","enlargedArea","intersectionArea","contains","intersects","multiSelect","_all","nodesToSearch","childBBox","collides","load","insert","_build","_splitRoot","tmpNode","_insert","goingUp","indexes","_condense","compareMinX","compareMinY","fromJSON","N","N2","N1","right2","right3","_chooseSubtree","minArea","minEnlargement","targetNode","enlargement","isNode","insertPath","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","newNode","minOverlap","bbox1","bbox2","_allDistMargin","leftBBox","rightBBox","i$1","child$1","siblings","factory","Shape","ClipSpaceNearZ","AbstractRendererPlugin","plugins","AbstractRenderer","clipSpaceNearZ","NEGATIVE_ONE","enableCulling","enableAutoRendering","enableSizeAttenuation","findIndex","find","addVec3","copyVec3","maxVec3","minVec3","scaleVec3","subVec3","AABB","tc","tcx","tcy","tcz","th","thx","thy","thz","tminx","tmaxx","tminy","tmaxy","tminz","tmaxz","oc","ocx","ocy","ocz","oh","ohx","ohy","ohz","ominx","omaxx","ominy","omaxy","ominz","omaxz","bc","ac","ar","mx0","mx1","mx2","my0","my1","my2","mz0","mz1","mz2","mx0a","mx1a","mx2a","my0a","my1a","my2a","mz0a","mz1a","mz2a","aMax","aMin","bMax","bMin","intersection","plane","pnVertexFlag","Plane","normal","updatePNVertexFlag","invLen","distanceToPoint","Mask","Frustum","planes","projectionMatrix","_projectionMatrix","m0","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","Point","Rectangle","topLeft","vec4","topRight","bottomLeft","bottomRight","transformedTopLeft","transformedTopRight","transformedBottomLeft","transformedBottomRight","ERROR_MSG_METHOD_NOT_IMPLEMENTED","ERROR_MSG_USE_DOCUMENT_ELEMENT","$vec3$2","createVec3","DEG_RAD","deg2rad","RAD_DEG","rad2deg","HALF_PI","getEuler","out","quat","_mat4$getScaling","getScaling","_mat4$getScaling2","sz","asin","getEulerFromMat4","z2","getEulerFromQuat","decompose","row0x","row0y","row1x","row1y","scalingX","scalingY","invScalingX","invScalingY","perspectiveMatrix","tmpVec4","pdum3","combine","scale1","scale2","CameraType","CameraTrackingMode","CameraProjectionMode","CameraEvent","MIN_DISTANCE","Camera","eventEmitter","up","forward","focalPoint","distanceVector","azimuth","elevation","roll","relAzimuth","relElevation","relRoll","dollyingStep","maxDistance","minDistance","zoom","rotateWorld","fov","near","far","aspect","projectionMatrixInverse","jitteredProjectionMatrix","enableUpdate","EXPLORING","trackingMode","DEFAULT","projectionMode","PERSPECTIVE","frustum","orthoMatrix","ORTHOGRAPHIC","view","enabled","setWorldRotation","_getAngles","TRACKING","setTrackingMode","translation","fromTranslation","setPerspective","setOrthographic","rright","fullHeight","viewportPoint","_this$canvas$viewport","viewport2Canvas","setFocalPoint","setZoom","_this$canvas$viewport2","dvec","_this$getPosition","getPosition","_this$getPosition2","_this$getFocalPoint","getFocalPoint","_this$getFocalPoint2","fx","fy","_this$view","tan","twoNear","rightMinusLeft","topMinusBottom","farMinusNear","farMulNear","makePerspective","ZERO","triggerUpdate","_this$view2","scaleW","scaleH","ortho","orthoZO","_getOrthoMatrix","_setPosition","CINEMATIC","az","rotateY","rotateX","lookAt","_getAxes","_getDistance","computeMatrix","ORBITING","_getPosition","_getFocalPoint","rotZ","rotX","rotY","rotQ","rotMatrix","fromQuat","mat3","fromRotationTranslationScaleOrigin","viewMatrix","getViewTransform","getPerspective","getFrustum","extractFromVPMatrix","tx","ty","Strategy","SortReason","EMPTY_PARSED_PATH","curve","PropertySyntax","constructor","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","format","exec","parseInt","rgbn","Rgb","rgba","hsla","NaN","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","Hsl","hslConvert","clamph","clampt","hsl2rgb","memoize","func","resolver","_memoized","Cache","cacheList","channels","displayable","formatHex8","formatHsl","clearCache","UnitType","UnitCategory","Nested","ParenLess","unit_type","kEms","kPixels","kDegrees","kRadians","kGradians","kMilliseconds","kSeconds","kRems","kTurns","CSSStyleValueType","unitFromName","kNumber","stringToUnitType","kUnknown","conversionToCanonicalUnitsScaleFactor","factor","unitTypeToString","kInteger","CSSStyleValue","kNo","kUnitType","kClampType","CSSColorValue","_CSSStyleValue","colorSpace","kColorType","GradientType","CSSGradientValue","CSSKeywordValue","kKeywordType","toCanonicalUnit","category","kUNumber","kULength","kUPercent","kUTime","kUAngle","canonicalUnitTypeForCategory","kUOther","unitTypeToUnitCategory","CSSUnitValue","unitOrName","other_unit_value","target_unit","canonical_unit","scale_factor","toFixed","_unit","isFinite","number","formatInfinityOrNaN","Opx","Odeg","CSSRGB","_CSSColorValue","unsetKeywordValue","keywordCache","unset","initial","inherit","noneColor","transparentColor","getOrCreateRGBA","getOrCreateUnitValue","colorStopToString","colorStop","parseGradient$1","tokens","input","getAST","ast","matchListing","matchDefinition","matchGradient","matchLinearOrientation","matchListRadialOrientations","gradientType","orientationMatcher","matchCall","captures","scan","colorStops","matchColorStop","radialOrientations","lookaheadCache","radialOrientation","matchRadialOrientation","radialType","matchLength","matchExtentKeyword","matchCircle","matchDistance","matchEllipse","at","matchAtPosition","extent","positionAt","defaultPosition","matchPositioning","positioning","location","matcher","matchNumber","captureIndex","regexp","blankCaptures","consume","computeLinearGradient","rcx","rcy","computeRadialGradient","regexLG","regexRG","regexPR","regexColorStop","SideOrCornerToDegMap","angleToDeg","positonToCSSUnitValue","unitX","unitY","_position$value","parseGradient","colorStr","_colorStops$length","_colorStops$0$length","previousIndex","previousOffset","_colorStops$i$length","spaceColorStops","_positonToCSSUnitValu","_orientation$0$style","_type","_arr$2$match","parsedRadialGradient","gradientStr","_arr$4$match","_ref5","parseRadialGradient","patternStr","parsePattern","isPattern","isCSSRGB","parseColor","color$1","mergeColors","parseDimension","unitRegExp","matchedUnits","taggedUnitRegExp","parseLengthUnmemoize","css","parseLength","parseLengthOrPercentageUnmemoize","parseLengthOrPercentage","parseAngleUnmemoize","parseAngle","mergeDimensions","nonNegative","leftValue","rightValue","canonicalUnit","leftCanonicalUnitValue","convertTo","rightCanonicalUnitValue","isLength","convertPercentUnit","convertAngleUnit","parseDimensionArrayFormat","parsed","valueWithUnit","vec3Index","useMin","supportedFilters","numberToString","parseNumberUnmemoize","parseNumber","mergeNumbers","clampedMergeNumbers","mergeNumberLists","numberList","getOrCalculatePathTotalLength","isSamePoint","point1","point2","getExtraFromSegmentWithAngle","currentAndPre","currentAndNext","preAndNext","currentAngle","xExtra","yExtra","xAngle","yAngle","toSymmetry","pointOnEllipticalArc","xAxisRotation","largeArcFlag","xAxisRotationRadians","ellipticalArcAngle","ellipticalArcStartAngle","ellipticalArcEndAngle","ellipticalArcCenter","resultantRx","resultantRy","getTangentAtRatio","_segment$arcParams","_segment$arcParams$rx","_segment$arcParams$ry","arcFlag","xDist","yDist","vMag","vRatio","u","vAngle","getArcParams","startPoint","xp","yp","lambda","cxp","cyp","theta","dTheta","ellipseToCommands","convertToPath","commands","_parsedStyle$x2","_parsedStyle$y2","lineToCommands","_parsedStyle2","_parsedStyle2$r","_parsedStyle2$cx","_parsedStyle2$cy","_parsedStyle3","_parsedStyle3$rx","_parsedStyle3$ry","_parsedStyle3$cx","_cx","_parsedStyle3$cy","polygonToCommands","_parsedStyle4","_parsedStyle4$width","_parsedStyle4$height","_parsedStyle4$x","_parsedStyle4$y","hasRadius","_radius","rectToCommands","commandsToPathString","internalParsePath","prevSegment","prevCmd","srcPoint","destPoint","removeRedundantMCommand","cmd","hasArcOrBezier","_extractPolygons","extractPolygons","nextParams","startMovePoint","lastStartMovePointIndex","startTangent","endTangent","cp","preSegment","_cp","_preSegment","_cp2","_cp3","_getTangentAtRatio","dx1","dy1","_getTangentAtRatio2","dx2","dy2","path2Segments","_getPathBBox","xArr","yArr","segmentsWithAngle","_segment","_currentPoint","getPathBBox","memoizedParsePath","parsePath","mergePaths","curve1","curve2","curves","rotatedCurve","segCount","lineLengths","sumLensSqrd","rotations","curve0","curveOnly","pointCount","oldSegIdx","getRotations","mergePoints","TRANSFORM_REGEXP","cast","contents","transformFunctions","matrix3d","rotateZ","rotate3d","perspective","scaleZ","scale3d","skew","skewX","skewY","translateX","translateY","translateZ","translate3d","parseArrayTransform","parsedArgs","parseTransform","prevLastIndex","lastIndex","functionName","functionData","argTypes","arg","parsedArg","parseTransformUnmemoize","convertItemToMatrix","sqrLength","sc","sq","multiplyMatrices","makeMatrixDecomposition","transformList","quaternion","m44","determinant","mat4x4","a03","a13","a23","a30","a31","a32","a33","decomposeMat4","convertToMatrix","composeMatrix","_i2","numberToLongString","mergeMatrices","leftArgs","rightArgs","decompositionPair","fromQ","toQ","product","typeTo2D","typeTo3D","mergeTransforms","flipResults","_left$i","lt","rt","leftResult","rightResult","types","_i3","leftType","rightType","leftFunctionData","rightFunctionData","_merged","_merged2","leftArgsCopy","rightArgsCopy","stringConversions","_merged3","stringifiedArgs","parseTransformOrigin","convertKeyword2Percent","keyword","BUILT_IN_PROPERTIES","inh","syntax","OPACITY_VALUE","PAINT","COLOR","LENGTH_PERCENTAGE","SHADOW_BLUR","LENGTH_PERCENTAGE_12","DEFINED_PATH","OFFSET_DISTANCE","ind","Z_INDEX","FILTER","TRANSFORM","TRANSFORM_ORIGIN","COORDINATE","LENGTH_PERCENTAGE_14","LIST_OF_POINTS","TEXT_TRANSFORM","NUMBER","GEOMETRY_ATTRIBUTE_NAMES","propertyMetadataCache","DefaultStyleValueRegistry","property","registerMetadata","metadata","CSSPropertySyntaxFactory","skipUpdateAttribute","skipParse","forceUpdateGeometry","usedAttributes","oldClipPath","oldOffsetPath","offsetPath","getParsedStyleListOf","assignParsedStyle","needUpdateGeometry","pointsOrStr","filterStr","filterRegExp","parseFilter","pointStr","_pointStr$split","_pointStr$split2","textTransform","calculator","markerMid","postProcessor","offsetDistance","geometry","boundsDirty","renderBoundsDirty","sceneGraphService","dirtifyToRoot","geometryUpdater","geometryUpdaterFactory","contentBounds","_geometryUpdater$upda","_geometryUpdater$upda2","_geometryUpdater$upda3","_geometryUpdater$upda4","cz","_geometryUpdater$upda5","hwidth","_geometryUpdater$upda6","hheight","_geometryUpdater$upda7","hdepth","_parsedStyle$increase","_parsedStyle$shadowTy","_parsedStyle$filter","expansion","SQRT2","_geometry$renderBound","shadowBlurInPixels","shadowOffsetXInPixels","shadowOffsetYInPixels","shadowLeft","shadowRight","shadowTop","shadowBottom","blurRadius","_shadowOffsetX","_shadowOffsetY","_shadowBlur","_geometry$renderBound2","_min","_max","_shadowLeft","_shadowRight","_shadowTop","_shadowBottom","flipX","usedOriginXValue","usedOriginYValue","setOrigin","isSizeAttenuation","rawLineWidth","rawR","PARSED_STYLE_LIST","CSSPropertyAngle","mixer","oldParsed","CSSPropertyClipPath","oldPath","updateDisplayObjectDependency","CSSPropertyColor","parser","CSSPropertyFilter","getFontSize","CSSPropertyLengthOrPercentage","computed","isRelativeUnit","documentElement","_fontSize","CSSPropertyLengthOrPercentage12","CSSPropertyLengthOrPercentage14","CSSPropertyMarker","_newMarker","cloneNode","isMarker","CSSPropertyNumber","CSSPropertyOffsetDistance","getPoint","CSSPropertyOpacity","CSSPropertyPath","CSSPropertyPoints","CSSPropertyShadowBlur","_CSSPropertyLengthOrP","CSSPropertyText","nodeValue","CSSPropertyTextTransform","rawText","transformedText","CANVAS_Map","isBrowser","isElement","sortByZIndex","o1","o2","zIndex1","zIndex2","findClosestClipPathTarget","_el$parsedStyle","PX_SUFFIX","setDOMSize","getStyle","getComputedStyle","getPropertyValue","TOUCH_TO_POINTER","touchstart","touchend","touchendoutside","touchmove","touchcancel","clock","performance","isInFragment","getRootNode","isFillOrStrokeAffected","isFillOtherThanNone","isStrokeOtherThanNone","uId","global","nowOffset","reservedCBs","lastTime","polyfillRaf","currentTime","gap","copied","polyfillCaf","getRequestAnimationFrame","vp","predicate","raf","caf","getCancelAnimationFrame","AsyncParallelHook","callbacks","AsyncSeriesWaterfallHook","_promise","_this$callbacks","SyncHook","argsArr","SyncWaterfallHook","genericFontFamilies","stringRegExp","createSkewMatrix","skewMatrix","$mat4_1","$mat4_2","fromZRotation","fromXRotation","fromYRotation","fromRotation","$vec3One$1","$vec3Zero$1","optimizer","setLocalScale","dirtifyLocal","transformable","parsedTransformToMat4","_transform$i","mul","setLocalTransform","resetLocalTransform","CSSPropertyTransform","CSSPropertyTransformOrigin","CSSPropertyZIndex","parentEntity","parentRenderable","parentSortable","dirtyReason","Z_INDEX_CHANGED","CircleUpdater","_parsedStyle$r","EllipseUpdater","_parsedStyle$rx","_parsedStyle$ry","LineUpdater","PathUpdater","_d$rect","PolylineUpdater","RectUpdater","_parsedStyle$width","_parsedStyle$height","TextUpdater","globalRuntime","_parsedStyle$dx","_parsedStyle$dy","isReadyToMeasure","lineWidths","maxLineWidth","fontProperties","ascent","descent","textService","lineXOffset","lineYOffset","GroupUpdater","HTMLUpdater","FederatedEvent","manager","eventPhase","NONE","bubbles","cancelBubble","cancelable","defaultPrevented","propagationStopped","propagationImmediatelyStopped","layer","viewport","composed","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","propagationPath","composedPath","nativeEvent","Event","preventDefault","FederatedMouseEvent","client","movement","screen","getModifierState","FederatedPointerEvent","_FederatedMouseEvent","isPrimary","clonePointerEvent","FederatedWheelEvent","cloneWheelEvent","CustomEvent","_FederatedEvent","eventName","CANVAS_CACHE","EventTarget","emitter","listener","_options$capture","_options$once","handleEvent","removeAllEventListeners","_this$emitter","removeAllListeners","_listener","_ownerDocument","skipPropagate","getEventService","Node","_EventTarget","shadow","isConnected","baseURI","nodeType","_child","textContent","opts","host","namespace","otherNode","isEqualNode","node1Root","node2Root","node1Hierarchy","node2Hierarchy","_node1Root$parentNode","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","longerHierarchy","shorterHierarchy","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_FOLLOWING","longerStart","shorterHierarchyNode","longerHierarchyNode","EventService","mappingTable","mappingState","trackingData","eventPool","tmpMatrix","tmpVec3","createPointerEvent","pointerType","isRightButton","pointerId","pressTargetsByButton","freeEvent","alwaysTriggerPointerEventOnCanvas","rootTarget","pressTarget","findMountedTarget","clickTarget","currentTarget","notifyTarget","_isRightButton","_e$detail","clickEvent","clicksByButton","clickCount","timeStamp","clickHistory","dblClickSpeed","preventClick","isMouse","outTarget","overTargets","outType","outEvent","leaveEvent","overType","overEvent","overTargetAncestor","enterEvent","getCursor","onPointerUpOutside","onWheel","wheelEvent","createWheelEvent","addEventMapping","_this$getScale","_this$getScale2","getCamera","getPerspectiveInverse","worldMatrix","canvasP","pickHandler","priority","mappers","warn","notifyListeners","propagate","viewportX","viewportY","_this$context$config3","disableHitTesting","_target","shadowRoot","_arr","eventTarget","existed","hitTest","canvasX","canvasY","fallbackTarget","allocateEvent","copyPointerData","copyMouseData","copyData","originalEvent","existedHTML","getExistedHTML","isNativeEventFromCanvas","pickTarget","copyWheelData","overTarget","pressure","tangentialPressure","tiltX","tiltY","twist","altKey","buttons","ctrlKey","metaKey","shiftKey","copyFrom","deltaMode","deltaZ","isTrusted","listeners","removeListener","OffscreenCanvasCreator","contextAttributes","OffscreenCanvas","_unused2","_unused3","RenderReason","RenderingService","inited","stats","zIndexCounter","initAsync","dirtycheck","cull","beforeRender","afterRender","getCallbacksNum","promise","frame","rerenderCallback","syncHierarchy","triggerPendingEvents","dirtyRectangleRenderingDisabled","onlyCameraChanged","shouldTriggerRenderHooks","disableRenderHooks","renderListCurrentFrame","_canvasConfig$rendere","internalRenderSingleDisplayObject","objectChanged","objectToRender","dirtyChildren","_sortable$sorted","_sortable$sorted2","sortIndex","_index","low","high","sortedIndex","clearPendingEvents","DISPLAY_OBJECT_CHANGED","ATTRIBUTE_REGEXP","DefaultSceneGraphSelector","query","classList","getIdOrClassname","_this$getAttribute","attributeToString","findAll","_this$getAttribute2","_this$getAttribute3","ElementEvent","MutationEvent","typeArg","relatedNode","attrChange","prevParsedValue","newParsedValue","markRenderableDirty","ADDITION","MODIFICATION","REMOVAL","rectUpdater","polylineUpdater","reparentEvent","REPARENT","$vec2Zero","$vec3Zero","$vec3One","$mat4Identity","$vec2","$vec3$1","$mat4","$quat$1","$setLocalTransform_1","$setLocalTransform_2","$setLocalTransform_3","$setLocalPosition","$setPosition_1","$setPosition_ParentInvertMatrix","$setEulerAngles_InvParentRot","$rotateLocal","$rotate_ParentInvertRotation","$triggerPendingEvents_detail","affectChildren","DefaultSceneGraphService","pendingEvents","boundsChangedEvent","displayObjectDependencyMap","sceneGraphSelector","is","selectOne","detached","detach","isChildFragment","isAttachToFragment","ADDED","dirtifyFragment","dirtifyWorld","_style","origin","originVec","degrees","rotation","rot","getRotation","parentRot","localRotation","rotateLocal","parentRotation","_position$","parentTransform","_position$2","scaling","_scaling$","localScale","_scaling$2","setLocalRotation","localSkew","localDirtyFlag","dirtyFlag","unfreezeParentToRoot","dirtifyWorldInternal","frozen","triggered","informDependentDisplayObjects","oldDependencyMap","newDependencyMap","dependencyMap","isCustomElement","getTranslation","sync","localTransform","hasPosition","hasRotation","hasScale","hasOrigin","calcLocalTransform","setLocalSkew","existedAABB","setFromTransformedAABB","styleValueRegistry","updateGeometry","_this3","getTransformedGeometryBounds","childBounds","clipPathBounds","parentInvert","localBounds","_element$ownerDocumen","_aabb$getMin","_aabb$getMin2","_aabb$getMax","_aabb$getMax2","_this4","childTransform","TEXT_METRICS","MetricsString","BaselineSymbol","BaselineMultiplier","HeightMultiplier","Newlines","BreakingSpaces","LATIN_REGEX","regexCannotStart","regexCannotEnd","TextService","fontMetricsCache","shouldBreakByKinsokuShorui","_char","nextChar","isBreakingSpace","trimByKinsokuShorui","prevLine","lastChar","properties","metricsString","imagedata","pixels","_parsedStyle$fontSize","_parsedStyle$wordWrap","strokeHeight","textPath","textPathSide","textPathStartOffset","_parsedStyle$leading","leading","_attributes$fontSize","_attributes$fontFamil","_attributes$fontStyle","_attributes$fontVaria","_attributes$fontWeigh","fontSizeString","fontFamilies","_fontFamily","toFontString","measureFont","isOverflowing","_lineWidth","_width","getTotalLength","_parsedStyle$wordWrap2","_parsedStyle$letterSp2","_parsedStyle$maxLines","chars","currentLineIndex","currentLineWidth","prevLineLastCharIndex","calcWidth","txt","getFromCache","ellipsisWidth","findCharIndexClosestWidthThreshold","lineTxt","txtLastCharIndex","txtStartCharIndex","widthThreshold","isNewline","appendEllipsis","lineIndex","textCharIndex","_char2","prevChar","charWidth","canBreakInLastChar","trimToBreakable","sumTextWidthByCache","_char3","_char4","findBreakableIndex","trimmedChar","trimFrom","trimTo","_char5","calcWidthWithCache","PERCENTAGE","ANGLE","CameraContribution","AnimationTimeline","EasingFunction","layoutRegistry","enableStyleSyntax","entityCounter","insertedEvent","removedEvent","destroyEvent","Element","_Node","cullable","strategy","Standard","visibilityPlaneMask","enable","namespaceURI","scrollLeft","scrollTop","clientTop","clientLeft","destroyed","computedStyle","lastChild","_this$ownerDocument","attach","mountChildren","mountFragment","refChild","oldChild","_child$ownerDocument","unmountChildren","destroyChildren","tagName","selectors","_len2","_key2","_this4$parentNode","_len3","_key3","_this5","_len4","_key4","_this6","_len5","_key5","qualifiedName","getAttributeNames","attributeName","force","localName","isDisplayObject","Proxy","attrModifiedEvent","$vec3","$quat","DisplayObject","_Element","activeAnimations","initialParsedStyle","initAttributes","setProperty","propertyName","removeProperty","removeAttribute","prop","getAnimations","cancel","customCloneFunc","clonedStyle","attribute","clonedChild","processProperties","internalSetAttribute","parseOptions","oldParsedValue","_attributeChangedCall","translateLocal","getLocalPosition","scaleLocal","getLocalScale","_getEuler","_getEuler3","getLocalRotation","setRotation","getLocalSkew","timeline","play","_this$parsedStyle","isInteractive","_this$parsedStyle2","transformMat4","_mat4$getTranslation","_mat4$getTranslation2","_getEuler5","_getEuler6","eux","euz","fromRotationTranslationScale","getMatrix","_decompose","_decompose2","_decompose3","_decompose4","childElementCount","firstElementChild","lastElementChild","Circle","_DisplayObject","_excluded$6","CustomElement","Ellipse","Fragment","Group","_excluded$5","_excluded$4","Line","z1","markerStartAngle","markerEndAngle","transformMarker","isStart","originalAngle","inWorldSpace","_this$parsedStyle3","_linePointAt","transformed","_this$parsedStyle4","_excluded$3","Path","markerMidList","placeMarkerMid","_this$getStartTangent","_this$getStartTangent2","_this$getEndTangent","_this$getEndTangent2","_segments$i$currentPo","_getPointAtLength2","getPointAtLength","endPoint","tangent","_excluded$2","Polygon","isClosed","_excluded$1","Polyline","_Polygon","segmentT","segmentL","tempLength","subt","Rect","_excluded","_this$parsedStyle$met","_this$parsedStyle$met2","CustomElementRegistry","define","CSS","percent","em","rem","grad","turn","ms","registerProperty","inherits","interpolable","initialValue","registerLayout","clazz","Document","initialStyle","customElements","rBushNodes","_displayObject$parsed","isVisibilityAffected","_this$defaultView$can","canvas2Viewport","_this$defaultView$get","_this$defaultView$vie","viewport2Client","getRenderingService","_elementFromPoint","_this$defaultView$can2","_this$defaultView$get3","_this$defaultView$vie2","_yield$this$defaultVi","_this$defaultView$can3","_this$defaultView$get4","_this$defaultView$vie3","_elementsFromPoint","_this$defaultView$can4","_this$defaultView$get6","_this$defaultView$vie4","_yield$this$defaultVi2","getElementsByName","getElementsByTagName","CullingPlugin","strategies","unculledEntities","EventPlugin","autoPreventDefault","rootPointerEvent","rootWheelEvent","_this$context$renderi","normalizedEvents","normalizeToPointerEvent","normalizedEvent","bootstrapEvent","mapEvent","setCursor","_this$context$renderi2","_step2","_iterator2","setPickHandler","normalizeWheelEvent","isNormalized","_step3","_iterator3","federatedEvent","_step4","$element","outside","_iterator4","_step5","_iterator5","transferMouseData","_this$context$eventSe","client2Viewport","_this$context$eventSe2","_this$context$eventSe3","_this$context$eventSe4","srcElement","movementX","movementY","pageX","pageY","screenX","screenY","relatedTarget","applyCursorStyle","isTouchEvent","changedTouches","touch","radiusX","radiusY","identifier","isMouseEvent","tempEvent","shape2D","FrustumCullingStrategy","_object$parentNode","parentVisibilityPlaneMask","computeVisibilityWithPlaneMask","INDETERMINATE","OUTSIDE","parentPlaneMask","INSIDE","mask","isShape2D","_planes$k","getPositiveFarPoint","getNegativeFarPoint","PrepareRendererPlugin","syncTasks","isFirstTimeRendering","syncing","_runtime$globalThis$r","updateSizeAttenuation","getZoom","ric","requestIdleCallback","syncRTree","_renderBounds$getMin","_renderBounds$getMin2","_renderBounds$getMax","_renderBounds$getMax2","bulk","synced","syncNode","CanvasEvent","mountedEvent","unmountedEvent","beforeRenderEvent","BEFORE_RENDER","rerenderEvent","RERENDER","afterRenderEvent","AFTER_RENDER","Canvas","supportsMutipleCanvasesInOneContainer","_config$cleanUpOnDest","cleanUpOnDestroy","canvasWidth","canvasHeight","getWidth","getHeight","PointerEvent","TouchEvent","MouseEvent","cleanUp","$dom","cleanExistedCanvas","initRenderingContext","initDefaultCamera","initRenderer","mergedConfig","setType","readyPromise","resolveReadyPromise","skipTriggerEvent","BEFORE_DESTROY","frameId","getRoot","AFTER_DESTROY","clearEventRetain","getProjectionMode","getNear","getFar","setAspect","insertBefore","_tick","time","firstContentfullPaint","loadRendererContainerModule","initRenderingService","_this7","async","READY","RENDERER_CHANGED","run","_this8","getPlugins","oldRenderer","_this9","_this10","getBBoxByArray","xAt","yAt","box$5","xDim","atan","xExtrema","xs","yDim","yExtrema","ys","EPSILON","nearestPoint$2","tCallback","segNum","increaseRate","interval","_t","d2","length$4","pointAt$3","pointToLine","cubicAt","onet","extrema$1","t2","discSqrt","extremas","disc","box$3","pointDistance$3","nearestPoint$1","lengthOfSegment","length$2","quadraticAt","extrema","pointDistance","nearestPoint","DragndropPlugin","dragndropPluginOptions","handlePointerdown","isDocument","draggableEventTarget","isDocumentDraggable","closest","dragstartTriggered","dragstartTimeStamp","dragstartClientCoordinates","currentDroppable","lastDragClientCoordinates","handlePointermove","timeElapsed","distanceMoved","elementsBelow","elementBelow","droppableBelow","dragstartTimeThreshold","dragstartDistanceThreshold","elementsFromPoint","isDocumentDroppable","stopDragging","originalPointerUpEvent","_event","AdvancedCamera","_Camera","landmarks","coords","updatedDistance","landmarkAnimationID","_focalPoint$","_focalPoint$2","_params$position","_params$focalPoint","setRoll","landmark","getDistanceVector","getDistance","getDollyingStep","getAzimuth","getElevation","getRoll","_ref$easing","_ref$duration","_ref$easingFunction","easingFunction","_ref$onfinish","_ref$onframe","cancelLandmarkAnimation","timeStart","destPosition","destFocalPoint","destZoom","destRoll","easingFunc","_animate","elapsed","interZoom","interRoll","interFocalPoint","interPosition","AnimationEvent","timelineTime","sequenceNumber","Animation","effect","_this$effect","currentTimePending","_idle","_paused","_finishedFlag","_currentTime","_playbackRate","_inTimeline","_inEffect","_totalDuration","getComputedTiming","endTime","_holdTime","oldPlayState","updatePromises","_startTime","playbackRate","_isFinished","animationsWithPromises","rejectReadyPromise","pending","finishedPromise","resolveFinishedPromise","rejectFinishedPromise","newTime","_this$timeline","restart","tickCurrentTime","applyDirtiedAnimation","oldCurrentTime","startTime","ensureAlive","newPlayState","rewind","oncancel","_this$effect2","targetAnimations","isAnimationFrame","fireEvents","_this$effect3","_this$effect4","ignoreLimit","baseTime","kSampleStepSize","float32ArraySupported","Float32Array","aA1","aA2","B","C","calcBezier","aT","getSlope","bezier","mX1","mY1","mX2","mY2","sampleValues","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","Quad","Cubic","Quart","Quint","Expo","Sine","Circ","Back","Bounce","pow2","Elastic","_params","_params$","amplitude","_params$2","period","Spring","_params2","_params2$","mass","_params2$2","stiffness","_params2$3","damping","_params2$4","velocity","w0","zeta","wd","progress","Steps","_ref2$","Bezier","_params3","easein","EaseOut","ease","EaseInOut","EaseOutIn","EasingFunctions","linear","spring","stepSize","numberString","cubicBezierRe","step1Re","step2Re","parseEasingFunction","normalizedEasing","cubicData","step1Data","step2Data","letter","complexEasingSyntax","calculateActiveDuration","timing","_timing$iterations","iterations","repeatedDuration","calculateIterationProgress","activeDuration","localTime","phase","endDelay","calculatePhase","activeTime","fillMode","calculateActiveTime","overallProgress","iterationDuration","iterationStart","calculateOverallProgress","simpleIterationProgress","calculateSimpleIterationProgress","currentIteration","calculateCurrentIteration","directedProgress","playbackDirection","currentDirection","calculateDirectedProgress","convertEffectInput","propertySpecificKeyframeGroups","member","isNotReservedWord","propertySpecificKeyframe","computedOffset","makePropertySpecificKeyframeGroups","interpolations","groupName","startIndex","endIndex","startOffset","applyFrom","applyTo","interpolation","propertyInterpolation","leftInterpolation","rightInterpolation","makeInterpolations","fraction","offsetFraction","localDuration","scaledLocalTime","InterpolationFactory","convertToString","interpolated","propertyHandler","getPropertySyntax","usedLeft","usedRight","interpolationArgs","interp","bool","fromLength","toLength","AnimationEffectTiming","_easing","normalizeKeyframes","effectInput","normalizedEffectInput","numKeyframes","keyframe","composite","convertToArrayForm","originalKeyframe","memberValue","everyFrameHasOffset","_keyframes$offset","_keyframes$0$offset","_offset","spaceKeyframes","fills","directions","normalizeTimingInput","timingInput","forGroup","makeTiming","numericTimingToObject","KeyframeEffect","iterationComposite","normalizedKeyframes","computedTiming","timeFraction","compareAnimations","leftAnimation","rightAnimation","ticking","timelineTicking","hasRestartedThisFrame","inTick","pendingEffects","rafCallbacks","webAnimationsNextTick","discardAnimations","processRafCallbacks","processing","entry","applyPendingEffects","restartWebAnimationsNextTick","markTarget","applyInterpolations","updateAnimationsPromises","rAF","updatingAnimations","_this$pendingEffects","_this$pendingEffects2","newPendingClears","newPendingEffects","inactiveAnimations","unmarkTarget","_needsTick","alive","internGet","initKey","keyof","valueOf","InternMap","super","internSet","internDelete","pretty","computeFlexBandState","F","stepSum","bandWidthSum","normalizedFlex","minBandWidth","valueBandWidth","valueStep","finalStepSum","bandStart","adjustedRange","Band","getDefaultOptions","unknown","getStep","getPaddingInner","getPaddingOuter","rescale","rangeStart","deltaRange","outerTotal","innerTotal","computeBandState","Base","updateOptions","createBiMap","createInterpolate","r0","compose","createPolyMap","normalizeList","interpolateList","ascendingDomain","ascendingRange","bisect","choosePiecewise","shouldRound","Continuous","nice","tickCount","getTickMethodOptions","chooseNice","getTicks","tickMethod","untransform","chooseTransforms","composeOutput","chooseClamp","composeInput","shouldClamp","lo","hi","createClamp","piecewise","Linear","defaultUnknown","Symbol","updateIndexMap","mapBetweenArrByMapIndex","mapper","notFoundReturn","mappedIndex","createKey","JSON","stringify","Ordinal","domainIndexMap","getDomain","domainKey","rangeIndexMap","rangeKey","sortedDomain","d3Ticks","begin","ticks","getter","pre","d3LinearNice","i0","i1","hue2rgb","string2rbg","model","hsl","hsl2rbg","createInterpolateNumber","createInterpolateValue","createInterpolateColor","createInterpolateRound","interpolateNumber","isValid","createNormalize","e10","e5","e2","tickIncrement","power","LN10","tickStep","step0","step1","createDOM","dom","wait","immediate","timeout","callNow","clearTimeout","hasOwn","_deepMix","keyArr","isEqual","valueKeys","otherKeys","isFunction","isNil","PRECISION","isNumberEqual","isNumber","proto","isString","CacheMap","maxSize","limit","keep","isPartial","flru","previous","later","throttled","remaining","trailing","rotateVector","arcToCubic","recursive","xy","f1","f2","d120","rx2","ry2","df","f2old","x2old","y2old","hx","hy","newres","distanceSquareRoot","module","colorNames","swizzle","reverseNames","cs","hexDouble","hwb","hexAlpha","i2","hwba","Events","EE","addListener","_eventsCount","clearEvent","__proto__","eventNames","names","getOwnPropertySymbols","handlers","ee","listenerCount","a5","prefixed","ARRAY_TYPE","random","hypot","fromMat4","m00","m01","m02","m20","m21","m22","m03","m23","m30","m31","m32","m33","a01","a02","a12","a00","a10","a11","a20","a21","a22","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","adjoint","b2","b3","b12","b20","b21","b22","fromRotationTranslation","xx","xz","yy","yz","zz","wx","wy","wz","fromQuat2","bx","bz","bw","aw","magnitude","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","yx","zx","zy","rl","tb","nf","perspectiveNO","fovy","perspectiveZO","perspectiveFromFieldOfView","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","orthoNO","lr","bt","eye","z0","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","targetTo","frob","subtract","multiplyScalar","multiplyScalarAndAdd","equals","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","setAxisAngle","slerp","omega","cosom","sinom","scale0","invDot","fromEuler","halfToRad","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","lerp","transformMat3","transformQuat","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","squaredLength","reHasUnicode","isArrayish","results","Function","_callSuper","construct","_createForOfIteratorHelper","iterator","_n","useIsMutating","filters","queryClient","useMutationState","status","getResult","mutationCache","mutation","getMutationCache","optionsRef","current","onStoreChange","subscribe","nextResult","schedule","dispatch","Dispatch","typename","strength","initialize","nodeById","nodeId","links","strengths","distances","bias","link","vx","vy","initializeStrength","initializeDistance","_nodes","_random","distanceMin2","distanceMax2","theta2","tree","visitAfter","accumulate","visit","quad","weight","distanceMin","distanceMax","initialRadius","initialAngle","simulation","alphaMin","alphaDecay","alphaTarget","velocityDecay","forces","stepper","timer","lcg","initializeNodes","initializeForce","randomSource","xm","ym","_root","_x0","_y0","_x1","_y1","_y","defaultX","defaultY","quadtree","Quadtree","addAll","leaf_copy","treeProto","cover","quads","retainer","removeAll","taskHead","taskTail","clockLast","clockNow","clockSkew","setFrame","clearNow","Timer","_call","_time","_next","wake","timerFlush","sleep","nap","poke","clearInterval","setInterval"],"sourceRoot":""}