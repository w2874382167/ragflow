"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[8887,3221],{36646:function(e,n,t){t.d(n,{m:function(){return o}});var a=t(53219),r=t(57636),s=t(85893);function o(e){var n=e.back,t=e.title,o=e.children;return(0,s.jsxs)("header",{className:"flex justify-between items-center border-b pr-9",children:[(0,s.jsxs)("div",{className:"flex items-center ",children:[(0,s.jsx)("div",{className:"flex items-center border-r p-1.5",children:(0,s.jsx)(r.z,{variant:"ghost",size:"icon",onClick:n,children:(0,s.jsx)(a.Z,{className:"w-5 h-5"})})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:t})})]}),o]})}},5715:function(e,n,t){t.d(n,{F$:function(){return p},Q5:function(){return v},qE:function(){return g}});var a=t(97857),r=t.n(a),s=t(13769),o=t.n(s),i=t(10952),c=t(67294),u=t(27080),l=t(85893),d=["className"],f=["className"],m=["className"],g=c.forwardRef((function(e,n){var t=e.className,a=o()(e,d);return(0,l.jsx)(i.fC,r()({ref:n,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t)},a))}));g.displayName=i.fC.displayName;var p=c.forwardRef((function(e,n){var t=e.className,a=o()(e,f);return(0,l.jsx)(i.Ee,r()({ref:n,className:(0,u.cn)("aspect-square h-full w-full",t)},a))}));p.displayName=i.Ee.displayName;var v=c.forwardRef((function(e,n){var t=e.className,a=o()(e,m);return(0,l.jsx)(i.NY,r()({ref:n,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t)},a))}));v.displayName=i.NY.displayName},57636:function(e,n,t){t.d(n,{d:function(){return m},z:function(){return g}});var a=t(97857),r=t.n(a),s=t(13769),o=t.n(s),i=t(88426),c=t(12003),u=t(67294),l=t(27080),d=t(85893),f=["className","variant","size","asChild"],m=(0,c.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-colors-outline-sentiment-primary bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",tertiary:"bg-colors-background-sentiment-solid-primary text-colors-text-persist-light hover:bg-colors-background-sentiment-solid-primary/80",icon:"bg-colors-background-inverse-standard text-foreground hover:bg-colors-background-inverse-standard/80"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",auto:"h-full px-1"}},defaultVariants:{variant:"default",size:"default"}}),g=u.forwardRef((function(e,n){var t=e.className,a=e.variant,s=e.size,c=e.asChild,u=void 0!==c&&c,g=o()(e,f),p=u?i.g7:"button";return(0,d.jsx)(p,r()({className:(0,l.cn)(m({variant:a,size:s,className:t})),ref:n},g))}));g.displayName="Button"},87030:function(e,n,t){t.d(n,{Ol:function(){return h},SZ:function(){return b},Zb:function(){return v},aY:function(){return N},ll:function(){return x}});var a=t(97857),r=t.n(a),s=t(13769),o=t.n(s),i=t(67294),c=t(27080),u=t(85893),l=["className"],d=["className"],f=["className"],m=["className"],g=["className"],p=["className"],v=i.forwardRef((function(e,n){var t=e.className,a=o()(e,l);return(0,u.jsx)("div",r()({ref:n,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t)},a))}));v.displayName="Card";var h=i.forwardRef((function(e,n){var t=e.className,a=o()(e,d);return(0,u.jsx)("div",r()({ref:n,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",t)},a))}));h.displayName="CardHeader";var x=i.forwardRef((function(e,n){var t=e.className,a=o()(e,f);return(0,u.jsx)("div",r()({ref:n,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",t)},a))}));x.displayName="CardTitle";var b=i.forwardRef((function(e,n){var t=e.className,a=o()(e,m);return(0,u.jsx)("div",r()({ref:n,className:(0,c.cn)("text-sm text-muted-foreground",t)},a))}));b.displayName="CardDescription";var N=i.forwardRef((function(e,n){var t=e.className,a=o()(e,g);return(0,u.jsx)("div",r()({ref:n,className:(0,c.cn)("p-6 pt-0",t)},a))}));N.displayName="CardContent",i.forwardRef((function(e,n){var t=e.className,a=o()(e,p);return(0,u.jsx)("div",r()({ref:n,className:(0,c.cn)("flex items-center p-6 pt-0",t)},a))})).displayName="CardFooter"},28993:function(e,n,t){t.d(n,{$N:function(){return C},Vq:function(){return x},cN:function(){return y},cZ:function(){return j},fK:function(){return w},hg:function(){return b}});var a=t(97857),r=t.n(a),s=t(13769),o=t.n(s),i=t(83165),c=t(41352),u=t(67294),l=t(27080),d=t(85893),f=["className"],m=["className","children"],g=["className"],p=["className"],v=["className"],h=["className"],x=i.fC,b=i.xz,N=i.h_,k=(i.x8,u.forwardRef((function(e,n){var t=e.className,a=o()(e,f);return(0,d.jsx)(i.aV,r()({ref:n,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},a))})));k.displayName=i.aV.displayName;var j=u.forwardRef((function(e,n){var t=e.className,a=e.children,s=o()(e,m);return(0,d.jsxs)(N,{children:[(0,d.jsx)(k,{}),(0,d.jsxs)(i.VY,r()(r()({ref:n,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-colors-background-neutral-standard p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},s),{},{children:[a,(0,d.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(c.Z,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})}));j.displayName=i.VY.displayName;var w=function(e){var n=e.className,t=o()(e,g);return(0,d.jsx)("div",r()({className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n)},t))};w.displayName="DialogHeader";var y=function(e){var n=e.className,t=o()(e,p);return(0,d.jsx)("div",r()({className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n)},t))};y.displayName="DialogFooter";var C=u.forwardRef((function(e,n){var t=e.className,a=o()(e,v);return(0,d.jsx)(i.Dx,r()({ref:n,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t)},a))}));C.displayName=i.Dx.displayName,u.forwardRef((function(e,n){var t=e.className,a=o()(e,h);return(0,d.jsx)(i.dk,r()({ref:n,className:(0,l.cn)("text-sm text-muted-foreground",t)},a))})).displayName=i.dk.displayName},80499:function(e,n,t){t.d(n,{NI:function(){return D},Wi:function(){return y},l0:function(){return k},lX:function(){return I},pf:function(){return R},xJ:function(){return S},zG:function(){return T}});var a=t(13769),r=t.n(a),s=t(97857),o=t.n(s),i=t(49677),c=t.n(i),u=t(88426),l=t(67294),d=t(87536),f=t(65038),m=t(27080),g=t(56989),p=t(3071),v=t(85893),h=["className"],x=["className","tooltip"],b=["className"],N=["className","children"],k=d.RV,j=l.createContext({}),w=l.createContext({}),y=function(e){var n=Object.assign({},(c()(e),e));return(0,v.jsx)(w.Provider,{value:{name:n.name},children:(0,v.jsx)(d.Qr,o()({},n))})},C=function(){var e=l.useContext(w),n=l.useContext(j),t=(0,d.Gc)(),a=t.getFieldState,r=t.formState,s=a(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");var i=n.id;return o()({id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message")},s)},S=l.forwardRef((function(e,n){var t=e.className,a=r()(e,h),s=l.useId();return(0,v.jsx)(j.Provider,{value:{id:s},children:(0,v.jsx)("div",o()({ref:n,className:(0,m.cn)("space-y-2",t)},a))})}));S.displayName="FormItem";var I=l.forwardRef((function(e,n){var t=e.className,a=e.tooltip,s=r()(e,x),i=C(),c=i.error,u=i.formItemId;return(0,v.jsxs)(f._,o()(o()({ref:n,className:(0,m.cn)(c&&"text-destructive",t,"flex"),htmlFor:u},s),{},{children:[s.children,a&&(0,v.jsxs)(p.u,{children:[(0,v.jsx)(p.aJ,{children:(0,v.jsx)(g.Z,{className:"size-3 ml-2"})}),(0,v.jsx)(p._v,{children:(0,v.jsx)("p",{children:a})})]})]}))}));I.displayName="FormLabel";var D=l.forwardRef((function(e,n){var t=Object.assign({},(c()(e),e)),a=C(),r=a.error,s=a.formItemId,i=a.formDescriptionId,l=a.formMessageId;return(0,v.jsx)(u.g7,o()({ref:n,id:s,"aria-describedby":r?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!r},t))}));D.displayName="FormControl";var R=l.forwardRef((function(e,n){var t=e.className,a=r()(e,b),s=C().formDescriptionId;return(0,v.jsx)("p",o()({ref:n,id:s,className:(0,m.cn)("text-sm text-muted-foreground",t)},a))}));R.displayName="FormDescription";var T=l.forwardRef((function(e,n){var t=e.className,a=e.children,s=r()(e,N),i=C(),c=i.error,u=i.formMessageId,l=c?String(null==c?void 0:c.message):a;return l?(0,v.jsx)("p",o()(o()({ref:n,id:u,className:(0,m.cn)("text-sm font-medium text-destructive",t)},s),{},{children:l})):null}));T.displayName="FormMessage"},27591:function(e,n,t){t.d(n,{II:function(){return p},Mj:function(){return h}});var a=t(9783),r=t.n(a),s=t(97857),o=t.n(s),i=t(13769),c=t.n(i),u=t(67294),l=t(27080),d=t(87764),f=t(85893),m=["className","type"],g=["suffix","prefix"],p=u.forwardRef((function(e,n){var t=e.className,a=e.type,r=c()(e,m);return(0,f.jsx)("input",o()({type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-colors-background-inverse-weak px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n},r))}));p.displayName="Input";var v=function(e){var n=e.suffix,t=e.prefix,a=c()(e,g);return(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("span",{className:(0,l.cn)(r()({},"absolute left-3 top-[50%] translate-y-[-50%]",t)),children:t}),(0,f.jsx)(p,o()({className:(0,l.cn)({"pr-10":n,"pl-10":t})},a)),(0,f.jsx)("span",{className:(0,l.cn)(r()({},"absolute right-3 top-[50%] translate-y-[-50%]",n)),children:n})]})},h=function(e){return(0,f.jsx)(v,o()({suffix:(0,f.jsx)(d.Z,{})},e))}},65038:function(e,n,t){t.d(n,{_:function(){return g}});var a=t(97857),r=t.n(a),s=t(13769),o=t.n(s),i=t(49102),c=t(12003),u=t(67294),l=t(27080),d=t(85893),f=["className"],m=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),g=u.forwardRef((function(e,n){var t=e.className,a=o()(e,f);return(0,d.jsx)(i.f,r()({ref:n,className:(0,l.cn)(m(),t)},a))}));g.displayName=i.f.displayName},11524:function(e,n,t){t.d(n,{f:function(){return p}});var a=t(97857),r=t.n(a),s=t(13769),o=t.n(s),i=t(27080),c=t(88426),u=t(12003),l=t(36316),d=t(67294),f=t(85893),m=["className","loading","children","disabled","variant","size","asChild"],g=(0,u.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",tertiary:"bg-colors-background-sentiment-solid-primary text-colors-text-persist-light hover:bg-colors-background-sentiment-solid-primary/80"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=d.forwardRef((function(e,n){var t=e.className,a=e.loading,s=void 0!==a&&a,u=e.children,d=e.disabled,p=e.variant,v=e.size,h=e.asChild,x=void 0!==h&&h,b=o()(e,m),N=x?c.g7:"button";return(0,f.jsxs)(N,r()(r()({className:(0,i.cn)(g({variant:p,size:v,className:t})),ref:n,disabled:s||d},b),{},{children:[s&&(0,f.jsx)(l.Z,{className:"mr-2 h-5 w-5 animate-spin"}),(0,f.jsx)(c.A4,{children:u})]}))}));p.displayName="LoadingButton"},96330:function(e,n,t){t.d(n,{K1:function(){return f},Rx:function(){return s},S8:function(){return c},Vr:function(){return u},cG:function(){return o},ld:function(){return l},n_:function(){return d},oQ:function(){return i}});var a=t(9783),r=t.n(a),s=function(e){return e.Dataset="dataset",e.Testing="testing",e.Configuration="configuration",e.KnowledgeGraph="knowledgeGraph",e}({}),o=function(e){return e.UNSTART="0",e.RUNNING="1",e.CANCEL="2",e.DONE="3",e.FAIL="4",e}({}),i=function(e){return e.Improvise="Improvise",e.Precise="Precise",e.Balance="Balance",e}({}),c=r()(r()(r()({},i.Improvise,{temperature:.9,top_p:.9,frequency_penalty:.2,presence_penalty:.4,max_tokens:512}),i.Precise,{temperature:.1,top_p:.3,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),i.Balance,{temperature:.5,top_p:.5,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),u=function(e){return e.Embedding="embedding",e.Chat="chat",e.Image2text="image2text",e.Speech2text="speech2text",e.Rerank="rerank",e.TTS="tts",e}({}),l=function(e){return e.DocumentId="doc_id",e.KnowledgeId="id",e}({}),d=function(e){return e.Virtual="virtual",e.Visual="visual",e}({}),f=function(e){return e.Naive="naive",e.Qa="qa",e.Resume="resume",e.Manual="manual",e.Table="table",e.Paper="paper",e.Book="book",e.Laws="laws",e.Presentation="presentation",e.Picture="picture",e.One="one",e.Audio="audio",e.Email="email",e.Tag="tag",e.KnowledgeGraph="knowledge_graph",e}({})},2938:function(e,n,t){t.d(n,{H0:function(){return M},IV:function(){return Z},NT:function(){return $},Qe:function(){return z},UL:function(){return _},Y2:function(){return L},c5:function(){return F},cE:function(){return P},ox:function(){return E},sO:function(){return O},vv:function(){return B},vy:function(){return K},y7:function(){return V},ye:function(){return A}});var a=t(19632),r=t.n(a),s=t(97857),o=t.n(s),i=t(9783),c=t.n(i),u=t(15009),l=t.n(u),d=t(99289),f=t.n(d),m=t(5574),g=t.n(m),p=t(39918),v=t(1079),h=t(40169),x=t(60806),b=t(61921),N=t(71250),k=t(45360),j=t(54683),w=t(24809),y=t(96486),C=t(67294),S=t(67421),I=t(57632),D=t(86968),R=t(96100),T=t(39259),P=function(){var e=(0,C.useState)({}),n=g()(e,2),t=n[0],a=n[1];return{currentRecord:t,setRecord:function(e){a(e)}}},z=function(){var e=(0,C.useState)(""),n=g()(e,2),t=n[0],a=n[1];return{handleInputChange:(0,C.useCallback)((function(e){var n=e.target.value;a(n)}),[]),searchString:t}},_=function(){var e=(0,S.$G)().i18n,n=(0,T.WH)().saveSetting;return function(t){e.changeLanguage(h.Kj[t]),n({language:t})}},A=function(){var e=(0,D.qM)("common").t,n=(0,R.fz)(),t=n.setPaginationParams,a=n.page,r=n.size,s=(0,C.useCallback)((function(e,n){t(e,n)}),[t]),o=(0,C.useCallback)((function(e){t(e.page,e.pageSize)}),[t]);return{pagination:(0,C.useMemo)((function(){return{showQuickJumper:!0,total:0,showSizeChanger:!0,current:a,pageSize:r,pageSizeOptions:[1,2,10,20,50,100],onChange:s,showTotal:function(n){return"".concat(e("total")," ").concat(n)}}}),[e,s,a,r]),setPagination:o}},Z=function(){var e=(0,C.useState)({}),n=g()(e,2),t=n[0],a=n[1],r=(0,C.useCallback)(f()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Z.get("/conf.json");case 2:n=e.sent,a(n.data);case 4:case"end":return e.stop()}}),e)}))),[]);return(0,C.useEffect)((function(){r()}),[r]),t},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.Z.completeConversation,n=(0,C.useState)({}),t=g()(n,2),a=t[0],r=t[1],s=(0,C.useState)(!0),i=g()(s,2),u=i[0],d=i[1],m=(0,C.useRef)(),v=(0,C.useCallback)((function(){m.current&&clearTimeout(m.current),m.current=setTimeout((function(){r({}),clearTimeout(m.current)}),1e3)}),[]),h=(0,C.useCallback)(function(){var n=f()(l()().mark((function n(t,a){var s,i,u,f,m,g,h,x,N;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(!1),n.next=4,fetch(e,{method:"POST",headers:c()(c()({},p._n,(0,b.cD)()),"Content-Type","application/json"),body:JSON.stringify(t),signal:null==a?void 0:a.signal});case 4:i=n.sent,u=i.clone().json(),f=null==i||null===(s=i.body)||void 0===s?void 0:s.pipeThrough(new TextDecoderStream).pipeThrough(new w.m).getReader();case 7:return n.next=10,null==f?void 0:f.read();case 10:if(!(m=n.sent)){n.next=18;break}if(g=m.done,h=m.value,!g){n.next=17;break}return console.info("done"),v(),n.abrupt("break",20);case 17:try{x=JSON.parse((null==h?void 0:h.data)||""),"boolean"!=typeof(N=null==x?void 0:x.data)&&(console.info("data:",N),r(o()(o()({},N),{},{conversationId:null==t?void 0:t.conversation_id})))}catch(e){console.warn(e)}case 18:n.next=7;break;case 20:return console.info("done?"),d(!0),v(),n.next=25,u;case 25:return n.t0=n.sent,n.t1=i,n.abrupt("return",{data:n.t0,response:n.t1});case 30:n.prev=30,n.t2=n.catch(0),d(!0),v(),console.warn(n.t2);case 35:case"end":return n.stop()}}),n,null,[[0,30]])})));return function(e,t){return n.apply(this,arguments)}}(),[e,v]);return{send:h,answer:a,done:u,setDone:d,resetAnswer:v}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.Z.tts,n=(0,C.useCallback)(function(){var n=f()(l()().mark((function n(t){var a,r;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:"POST",headers:c()(c()({},p._n,(0,b.cD)()),"Content-Type","application/json"),body:JSON.stringify(t)});case 2:return a=n.sent,n.prev=3,n.next=6,a.clone().json();case 6:0!==(null==(r=n.sent)?void 0:r.code)&&k.ZP.error(null==r?void 0:r.message),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.warn("🚀 ~ error:",n.t0);case 13:return n.abrupt("return",a);case 14:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return{read:n}},$=function(){var e=(0,C.useState)(""),n=g()(e,2),t=n[0],a=n[1];return{handleInputChange:function(e){var n=e.target.value.replaceAll("\\n","\n").replaceAll("\\t","\t");a(n)},value:t,setValue:a}},V=function(){var e=(0,C.useState)([]),n=g()(e,2),t=n[0],a=n[1],s=function(e){var n=(0,C.useRef)(null),t=(0,C.useCallback)((function(){var t;e&&(null===(t=n.current)||void 0===t||t.scrollIntoView({behavior:"instant"}))}),[e]);return(0,C.useEffect)((function(){t()}),[t]),n}(t),i=(0,C.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a((function(t){return[].concat(r()(t),[o()(o()({},e),{},{id:(0,N.Kj)(e)}),{role:v.Cs.Assistant,content:n,id:(0,N.Kj)(o()(o()({},e),{},{role:v.Cs.Assistant}))}])}))}),[]),c=(0,C.useCallback)((function(e){a((function(n){var t;return[].concat(r()(null!==(t=null==n?void 0:n.slice(0,-1))&&void 0!==t?t:[]),[o()({role:v.Cs.Assistant,content:e.answer,reference:e.reference,id:(0,N.Kj)({id:e.id,role:v.Cs.Assistant}),prompt:e.prompt,audio_binary:e.audio_binary},(0,y.omit)(e,"reference"))])}))}),[]),u=(0,C.useCallback)((function(){a((function(e){var n;return null!==(n=null==e?void 0:e.slice(0,-2))&&void 0!==n?n:[]}))}),[]),l=(0,C.useCallback)((function(e){a((function(n){var t;return null!==(t=null==n?void 0:n.filter((function(n){return n.id!==e})))&&void 0!==t?t:[]}))}),[a]),d=(0,C.useCallback)((function(e){a((function(n){var t=n.findIndex((function(n){return n.id===e}));if(-1!==t){var a,s=null!==(a=n.slice(0,t+2))&&void 0!==a?a:[],i=s.at(-1);return s=i?[].concat(r()(s.slice(0,-1)),[o()(o()({},i),{},{content:"",reference:void 0,prompt:void 0})]):s}return n}))}),[a]);return{ref:s,derivedMessages:t,setDerivedMessages:a,addNewestQuestion:i,addNewestAnswer:c,removeLatestMessage:u,removeMessageById:l,removeMessagesAfterCurrentMessage:d}},B=function(e){var n=e.removeMessagesAfterCurrentMessage,t=e.sendMessage,a=e.messages,r=(0,C.useCallback)(function(){var e=f()(l()().mark((function e(r){var s,i;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.id&&(n(r.id),-1!==(s=a.findIndex((function(e){return e.id===r.id})))&&(i=a.slice(0,s)),t({message:o()(o()({},r),{},{id:(0,I.Z)()}),messages:i}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,t,a]);return{regenerateMessage:r}},K=function(e){var n=(0,C.useState)(""),t=g()(n,2),a=t[0],r=t[1],s=(0,C.useCallback)((function(e){return function(){r(e)}}),[]);return(0,C.useEffect)((function(){e&&r(e)}),[e]),{selectedId:a,handleItemClick:s}},E=function(){var e,n=(0,T.fS)(!0).data;return null!==(e=null==n?void 0:n.llm_id)&&void 0!==e?e:""},G={naive:128,knowledge_graph:8192},O=function(e){return(0,C.useCallback)((function(n){n in G&&e.setFieldValue(["parser_config","chunk_token_num"],G[n])}),[e])},L=function(e){var n=e.form,t=e.visible,a=(0,C.useRef)();(0,C.useEffect)((function(){a.current=t}),[t]);var r=a.current;(0,C.useEffect)((function(){!t&&r&&n.resetFields()}),[n,r,t])}},704:function(e,n,t){t.d(n,{$:function(){return d},t:function(){return l}});var a=t(9783),r=t.n(a),s=t(5574),o=t.n(s),i=t(23454),c=t(67294),u=t(86004),l=function(e){return e.KnowledgeId="knowledgeId",e}({}),d=function(){var e=(0,u.s0)(),n=(0,u.lr)(),t=o()(n,1)[0],a=(0,u.UO)().id,s=(0,c.useCallback)((function(){e(i.Z.Datasets)}),[e]),d=(0,c.useCallback)((function(n){return function(){e("".concat(i.Z.Dataset,"/").concat(n))}}),[e]),f=(0,c.useCallback)((function(){e(i.Z.Home)}),[e]),m=(0,c.useCallback)((function(){e(i.Z.ProfileSetting)}),[e]),g=(0,c.useCallback)((function(){e(i.Z.Chats)}),[e]),p=(0,c.useCallback)((function(){e(i.Z.Chat)}),[e]),v=(0,c.useCallback)((function(){e(i.Z.Agents)}),[e]),h=(0,c.useCallback)((function(n){return function(){e("".concat(i.Z.Agent,"/").concat(n))}}),[e]),x=(0,c.useCallback)((function(){e(i.Z.AgentTemplates)}),[e]),b=(0,c.useCallback)((function(){e(i.Z.Searches)}),[e]),N=(0,c.useCallback)((function(){e(i.Z.Search)}),[e]),k=(0,c.useCallback)((function(n,t){return function(){e("".concat(i.Z.ParsedResult,"/").concat(n,"?").concat(l.KnowledgeId,"=").concat(t))}}),[e]),j=(0,c.useCallback)((function(e){var n=r()({},l.KnowledgeId,t.get(l.KnowledgeId));return e?n[e]:n}),[t]),w=(0,c.useCallback)((function(n){e("".concat(n,"/").concat(a,"?").concat(l.KnowledgeId,"=").concat(j(l.KnowledgeId)))}),[j,a,e]);return{navigateToDatasetList:s,navigateToDataset:d,navigateToHome:f,navigateToProfile:m,navigateToChatList:g,navigateToChat:p,navigateToChunkParsedResult:k,getQueryString:j,navigateToChunk:w,navigateToAgentList:v,navigateToAgent:h,navigateToAgentTemplates:x,navigateToSearchList:b,navigateToSearch:N}}},96100:function(e,n,t){t.d(n,{HK:function(){return d},Uu:function(){return l},fz:function(){return p},nT:function(){return g},pE:function(){return f},wy:function(){return m}});var a=t(5574),r=t.n(a),s=t(96330),o=t(67294),i=t(86004),c=function(e){return e.Second="2",e.Third="3",e}({}),u=function(e){return(0,i.TH)().pathname.split("/")[e]||""},l=function(){return u(c.Second)},d=function(){return u(c.Third)},f=function(){var e=(0,i.lr)(),n=r()(e,1)[0];return{documentId:n.get(s.ld.DocumentId)||"",knowledgeId:n.get(s.ld.KnowledgeId)||""}},m=function(){var e=(0,i.s0)();return(0,o.useCallback)((function(n){e(n,{state:{from:n}})}),[e])},g=function(){var e=(0,i.s0)(),n=f().knowledgeId;return(0,o.useCallback)((function(){e("/knowledge/".concat(s.Rx.Dataset,"?id=").concat(n))}),[n,e])},p=function(){var e=(0,i.lr)(),n=r()(e,2),t=n[0],a=n[1],s=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;t.set("page",e.toString()),n&&t.set("size",n.toString()),a(t)}),[a,t]);return{setPaginationParams:s,page:Number(t.get("page"))||1,size:Number(t.get("size"))||10}}},8074:function(e,n,t){t.d(n,{Rx:function(){return s.Rx},j$:function(){return i}});var a=t(9783),r=t.n(a),s=t(96330),o=(r()(r()(r()({},s.Rx.Dataset,"Dataset"),s.Rx.Testing,"Retrieval testing"),s.Rx.Configuration,"Configuration"),function(e){return e.Chunk="chunk",e.File="file",e}({})),i=(r()(r()({},o.Chunk,"Chunk"),o.File,"File Upload"),"tagRename")},16324:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var a=t(15009),r=t.n(a),s=t(99289),o=t.n(s),i=t(36646),c=t(86968),u=t(20334),l=t(704),d=t(67294),f=t(67421),m=t(28993),g=t(11524),p=t(8074),v=t(97857),h=t.n(v),x=t(56312),b=t(87536),N=t(1604),k=t(80499),j=t(27591),w=t(85893);function y(e){var n=e.hideModal,t=e.onOk,a=(0,f.$G)().t,s=N.z.object({name:N.z.string().min(1,{message:a("common.namePlaceholder")}).trim(),tag:N.z.string().trim().optional(),description:N.z.string().trim().optional()}),i=(0,b.cI)({resolver:(0,x.F)(s),defaultValues:{name:""}});function c(){return(c=o()(r()().mark((function e(a){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t?void 0:t(a);case 2:e.sent&&(null==n||n());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,w.jsx)(k.l0,h()(h()({},i),{},{children:(0,w.jsxs)("form",{onSubmit:i.handleSubmit((function(e){return c.apply(this,arguments)})),className:"space-y-6",id:p.j$,children:[(0,w.jsx)(k.Wi,{control:i.control,name:"name",render:function(e){var n=e.field;return(0,w.jsxs)(k.xJ,{children:[(0,w.jsx)(k.lX,{children:a("common.name")}),(0,w.jsx)(k.NI,{children:(0,w.jsx)(j.II,h()(h()({placeholder:a("common.namePlaceholder")},n),{},{autoComplete:"off"}))}),(0,w.jsx)(k.zG,{})]})}}),(0,w.jsx)(k.Wi,{control:i.control,name:"tag",render:function(e){var n=e.field;return(0,w.jsxs)(k.xJ,{children:[(0,w.jsx)(k.lX,{children:a("flow.tag")}),(0,w.jsx)(k.NI,{children:(0,w.jsx)(j.II,h()(h()({placeholder:a("flow.tagPlaceholder")},n),{},{autoComplete:"off"}))}),(0,w.jsx)(k.zG,{})]})}}),(0,w.jsx)(k.Wi,{control:i.control,name:"description",render:function(e){var n=e.field;return(0,w.jsxs)(k.xJ,{children:[(0,w.jsx)(k.lX,{children:a("flow.description")}),(0,w.jsx)(k.NI,{children:(0,w.jsx)(j.II,h()(h()({placeholder:a("flow.descriptionPlaceholder")},n),{},{autoComplete:"off"}))}),(0,w.jsx)(k.zG,{})]})}})]})}))}function C(e){var n=e.hideModal,t=e.onOk,a=e.loading,r=(0,f.$G)().t;return(0,w.jsx)(m.Vq,{open:!0,onOpenChange:n,children:(0,w.jsxs)(m.cZ,{className:"sm:max-w-[425px]",children:[(0,w.jsx)(m.fK,{children:(0,w.jsx)(m.$N,{children:r("flow.createGraph")})}),(0,w.jsx)(y,{hideModal:n,onOk:t}),(0,w.jsx)(m.cN,{children:(0,w.jsx)(g.f,{type:"submit",form:p.j$,loading:a,children:r("common.save")})})]})})}var S=t(5715),I=t(57636),D=t(87030);function R(e){var n=e.data,t=e.showModal,a=(0,f.$G)().t;return(0,w.jsx)(D.Zb,{className:"bg-colors-background-inverse-weak  border-colors-outline-neutral-standard group relative",children:(0,w.jsxs)(D.aY,{className:"p-4 ",children:[(0,w.jsx)("div",{className:"flex justify-between mb-4",children:n.avatar?(0,w.jsx)("div",{className:"w-[70px] h-[70px] rounded-xl bg-cover",style:{backgroundImage:"url(".concat(n.avatar,")")}}):(0,w.jsxs)(S.qE,{className:"w-[70px] h-[70px]",children:[(0,w.jsx)(S.F$,{src:"https://github.com/shadcn.png"}),(0,w.jsx)(S.Q5,{children:"CN"})]})}),(0,w.jsx)("h3",{className:"text-xl font-bold mb-2",children:n.title}),(0,w.jsx)("p",{className:"break-words",children:n.description}),(0,w.jsx)(I.z,{variant:"tertiary",className:"absolute bottom-4 right-4 left-4 hidden justify-end group-hover:block text-center",onClick:t,children:a("flow.useTemplate")})]})})}function T(){var e=(0,l.$)().navigateToAgentList,n=(0,f.$G)().t,t=(0,u.zw)().data,a=(0,c.pG)(),s=a.visible,m=a.hideModal,g=a.showModal,p=(0,d.useCallback)(o()(r()().mark((function e(){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),[]);return(0,w.jsxs)("section",{children:[(0,w.jsx)(i.m,{back:e,title:n("flow.createGraph")}),(0,w.jsx)("div",{className:"grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 2xl:grid-cols-8 max-h-[94vh] overflow-auto px-8",children:null==t?void 0:t.map((function(e){return(0,w.jsx)(R,{data:e,showModal:g},e.id)}))}),s&&(0,w.jsx)(C,{loading:!1,visible:s,hideModal:m,onOk:p})]})}},23454:function(e,n,t){t.d(n,{Z:function(){return a}});var a=function(e){return e.Login="/login",e.Home="/home",e.Datasets="/datasets",e.DatasetBase="/dataset",e[e.Dataset="".concat(e.DatasetBase).concat(e.DatasetBase)]="Dataset",e.Agent="/agent",e.AgentTemplates="/agent-templates",e.Agents="/agents",e.Searches="/next-searches",e.Search="/next-search",e.Chats="/next-chats",e.Chat="/next-chat",e.Files="/files",e.ProfileSetting="/profile-setting",e.DatasetTesting="/testing",e.DatasetSetting="/setting",e.Chunk="/chunk",e.ChunkResult="/chunk/chunk",e.Parsed="/parsed",e.ParsedResult="/chunk/parsed",e.Result="/result",e.ResultView="/chunk/result",e}({});a.Home,a.Home,"@/pages".concat(a.Home),a.Datasets,a.Datasets,"@/pages".concat(a.Datasets),a.Chats,a.Chats,"@/pages".concat(a.Chats),a.Chat,"@/pages".concat(a.Chats,"/chat"),a.Searches,a.Searches,"@/pages".concat(a.Searches),a.Search,"@/pages".concat(a.Search),a.Agents,a.Agents,"@/pages".concat(a.Agents),"".concat(a.Agent,"/:id"),"@/pages".concat(a.Agent),a.AgentTemplates,"@/pages".concat(a.Agents).concat(a.AgentTemplates),a.Files,a.Files,"@/pages".concat(a.Files),a.DatasetBase,a.DatasetBase,a.Dataset,a.DatasetBase,"@/pages".concat(a.DatasetBase),"".concat(a.Dataset,"/:id"),"@/pages".concat(a.Dataset),"".concat(a.DatasetBase).concat(a.DatasetSetting,"/:id"),"@/pages".concat(a.DatasetBase).concat(a.DatasetSetting),"".concat(a.DatasetBase).concat(a.DatasetTesting,"/:id"),"@/pages".concat(a.DatasetBase).concat(a.DatasetTesting),a.Chunk,a.Chunk,"@/pages".concat(a.Chunk),"".concat(a.ParsedResult,"/:id"),"@/pages".concat(a.Chunk,"/parsed-result"),"".concat(a.ChunkResult,"/:id"),"@/pages".concat(a.Chunk,"/chunk-result"),"".concat(a.ResultView,"/:id"),"@/pages".concat(a.Chunk,"/result-view"),a.Chunk,"@/pages".concat(a.Chunk),a.ProfileSetting,"@/pages".concat(a.ProfileSetting),a.ProfileSetting,"".concat(a.ProfileSetting,"/profile"),"".concat(a.ProfileSetting,"/profile"),"@/pages".concat(a.ProfileSetting,"/profile"),"".concat(a.ProfileSetting,"/team"),"@/pages".concat(a.ProfileSetting,"/team"),"".concat(a.ProfileSetting,"/plan"),"@/pages".concat(a.ProfileSetting,"/plan"),"".concat(a.ProfileSetting,"/model"),"@/pages".concat(a.ProfileSetting,"/model"),"".concat(a.ProfileSetting,"/prompt"),"@/pages".concat(a.ProfileSetting,"/prompt")},71250:function(e,n,t){t.d(n,{Bl:function(){return l},CE:function(){return m},IC:function(){return c},Kj:function(){return u},hH:function(){return g},mN:function(){return f},mV:function(){return p},o_:function(){return d}});var a=t(97857),r=t.n(a),s=t(1079),o=t(96486),i=t(57632),c=function(e){return e!==s.Pc&&""!==e},u=function(e){return"id"in e&&e.id?e.id:(0,i.Z)()},l=function(e){var n;return null!==(n=null==e?void 0:e.map((function(e){return r()(r()({},(0,o.omit)(e,"reference")),{},{id:u(e)})})))&&void 0!==n?n:[]},d=function(){return(0,i.Z)().replace(/-/g,"")},f=function(e){return"".concat(e.role,"_").concat(e.id)},m=function(e){return e.replace(/\\\[([\s\S]*?)\\\]/g,(function(e,n){return"$$".concat(n,"$$")})).replace(/\\\(([\s\S]*?)\\\)/g,(function(e,n){return"$".concat(n,"$")}))};function g(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/<think>([\s\S]*?)<\/think>/g,'<section class="think">$1</section>')}function p(e){return e!==s.uY.MaxTokensEnabled}}}]);
//# sourceMappingURL=p__agents__agent-templates.589334f1.async.js.map