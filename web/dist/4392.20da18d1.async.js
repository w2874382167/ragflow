/*! For license information please see 4392.20da18d1.async.js.LICENSE.txt */
(self.webpackChunkweb=self.webpackChunkweb||[]).push([[4392],{45631:function(t,e,n){"use strict";n.d(e,{MG:function(){return o},V7:function(){return u},Yq:function(){return s},eR:function(){return f},jt:function(){return c},tT:function(){return h}});var r=n(97582),i=n(95147),a=n(62059);function o(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter((function(t){var n=(0,r.CR)(t,1)[0];return!e.includes(n)})));return Object.fromEntries(e.map((function(e){return function(t){return"boolean"!=typeof t&&"enter"in t&&"update"in t&&"exit"in t}(t)?!1===t[e]?[e,!1]:[e,(0,r.pi)((0,r.pi)({},t[e]),n)]:[e,n]})))}function s(t,e){t?t.finished.then(e):e()}function u(t,e){0===t.length?e():Promise.all(t.map((function(t){return null==t?void 0:t.finished}))).then(e)}function l(t,e){"update"in t?t.update(e):t.attr(e)}function c(t,e,n){return 0===e.length?null:n?t.animate(e,n):(l(t,{style:e.slice(-1)[0]}),null)}function h(t,e,n,i){if(void 0===i&&(i="destroy"),function(t,e){return"text"===t.nodeName&&"text"===e.nodeName&&t.attributes.text===e.attributes.text}(t,e))return t.remove(),[null];var o=function(){"destroy"===i?t.destroy():"hide"===i&&(0,a.Cp)(t),e.isVisible()&&(0,a.$Z)(e)};if(!n)return o(),[null];var u=n.duration,l=void 0===u?0:u,c=n.delay,h=void 0===c?0:c,f=Math.ceil(+l/2),d=+l/4,p=(0,r.CR)(t.getGeometryBounds().center,2),v=p[0],g=p[1],y=(0,r.CR)(e.getGeometryBounds().center,2),m=y[0],b=y[1],x=(0,r.CR)([(v+m)/2-v,(g+b)/2-g],2),k=x[0],w=x[1],E=t.style.opacity,M=void 0===E?1:E,T=e.style.opacity,S=void 0===T?1:T,C=t.style.transform||"",A=e.style.transform||"",P=t.animate([{opacity:M,transform:"translate(0, 0) ".concat(C)},{opacity:0,transform:"translate(".concat(k,", ").concat(w,") ").concat(C)}],(0,r.pi)((0,r.pi)({fill:"both"},n),{duration:h+f+d})),N=e.animate([{opacity:0,transform:"translate(".concat(-k,", ").concat(-w,") ").concat(A),offset:.01},{opacity:S,transform:"translate(0, 0) ".concat(A)}],(0,r.pi)((0,r.pi)({fill:"both"},n),{duration:f+d,delay:h+f-d}));return s(N,o),[P,N]}function f(t,e,n){var a={},o={};return Object.entries(e).forEach((function(e){var n=(0,r.CR)(e,2),s=n[0],u=n[1];if(!(0,i.Z)(u)){var l=t.style[s]||t.parsedStyle[s]||0;l!==u&&(a[s]=l,o[s]=u)}})),n?c(t,[a,o],(0,r.pi)({fill:"both"},n)):(l(t,o),null)}},5951:function(t,e,n){"use strict";n.d(e,{w:function(){return l}});var r=n(97582),i=n(1242),a=n(62059),o=n(8126),s=n(35912);function u(){(0,a.WD)(this,"hidden"!==this.attributes.visibility)}var l=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,(0,o.n)({},{style:n},e))||this;return r.initialized=!1,r._defaultOptions=n,r}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=(0,s.g)(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},e.prototype.attributeChangedCallback=function(t){"visibility"===t&&u.call(this)},e.prototype.update=function(t,e){var n;return this.attr((0,o.n)({},this.attributes,t||{})),null===(n=this.render)||void 0===n?void 0:n.call(this,this.attributes,this,e)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(t,e){},e.prototype.getSubShapeStyle=function(t){t.x,t.y,t.transform,t.transformOrigin,t.class,t.className,t.zIndex;return(0,r._T)(t,["x","y","transform","transformOrigin","class","className","zIndex"])},e}(i.b_)},8523:function(t,e,n){"use strict";n.d(e,{x:function(){return o}});var r=n(97582),i=n(1242),a=n(35912),o=function(t){function e(e){void 0===e&&(e={});var n=e.style,i=(0,r._T)(e,["style"]);return t.call(this,(0,r.pi)({style:(0,r.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},i))||this}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=(0,a.g)(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},e}(i.xv)},47537:function(t,e,n){"use strict";n.d(e,{R:function(){return Zt}});var r=n(97582),i=n(45631),a=n(5951),o=n(47772);var s=n(54015),u=n(61021),l=n(45607),c=n(80264);function h(t){return t*Math.PI/180}function f(t){return Number((180*t/Math.PI).toPrecision(5))}var d=n(33016),p=n(86650);function v(t,e){return t.style.opacity||(t.style.opacity=1),(0,i.eR)(t,{opacity:0},e)}var g=n(79274),y=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function m(t){return y.includes(t)}function b(t){var e={};for(var n in t)m(n)&&(e[n]=t[n]);return e}var x=(0,g.A)({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function k(t){return t.reduce((function(t,e,n){return t.push((0,r.ev)([0===n?"M":"L"],(0,r.CR)(e),!1)),t}),[])}function w(t,e,n){return"surround"===e.type?function(t,e,n){var i=e.connect,a=void 0===i?"line":i,o=e.center;if("line"===a)return k(t);if(!o)return[];var s=(0,c.TE)(t[0],o),u=n?0:1;return t.reduce((function(t,e,n){return 0===n?t.push((0,r.ev)(["M"],(0,r.CR)(e),!1)):t.push((0,r.ev)(["A",s,s,0,0,u],(0,r.CR)(e),!1)),t}),[])}(t,e,n):k(t)}function E(t,e,n){var i=n.type,a=n.connect,o=n.center,s=n.closed?[["Z"]]:[],u=(0,r.CR)([w(t,n),w(e.slice().reverse(),n,!0)],2),l=u[0],h=u[1],f=(0,r.CR)([t[0],e.slice(-1)[0]],2),d=f[0],p=f[1],v=function(t,e){return[l,t,h,e,s].flat()};if("line"===a||"surround"===i)return v([(0,r.ev)(["L"],(0,r.CR)(p),!1)],[(0,r.ev)(["L"],(0,r.CR)(d),!1)]);if(!o)throw new Error("Arc grid need to specified center");var g=(0,r.CR)([(0,c.TE)(p,o),(0,c.TE)(d,o)],2),y=g[0],m=g[1];return v([(0,r.ev)(["A",y,y,0,0,1],(0,r.CR)(p),!1),(0,r.ev)(["L"],(0,r.CR)(p),!1)],[(0,r.ev)(["A",m,m,0,0,0],(0,r.CR)(d),!1),(0,r.ev)(["L"],(0,r.CR)(d),!1)])}var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.render=function(t,e){t.type,t.center,t.areaFill,t.closed;var n=(0,r._T)(t,["type","center","areaFill","closed"]),a=function(t){var e=t.data,n=void 0===e?[]:e;return t.closed?n.map((function(t){var e=t.points,n=(0,r.CR)(e,1)[0];return(0,r.pi)((0,r.pi)({},t),{points:(0,r.ev)((0,r.ev)([],(0,r.CR)(e),!1),[n],!1)})})):n}(t),o=(0,s.Ys)(e).maybeAppendByClassName(x.lineGroup,"g"),u=(0,s.Ys)(e).maybeAppendByClassName(x.regionGroup,"g"),l=function(t,e,n,a){var o=n.animate,s=n.isBillboard,u=e.map((function(t,e){return{id:t.id||"grid-line-".concat(e),d:w(t.points,n)}}));return t.selectAll(x.line.class).data(u,(function(t){return t.id})).join((function(t){return t.append("path").each((function(t,e){var n=(0,p.S)(b((0,r.pi)({d:t.d},a)),[t,e,u]);this.attr((0,r.pi)({class:x.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:s},n))}))}),(function(t){return t.transition((function(t,e){var n=(0,p.S)(b((0,r.pi)({d:t.d},a)),[t,e,u]);return(0,i.eR)(this,n,o.update)}))}),(function(t){return t.transition((function(){var t=this,e=v(this,o.exit);return(0,i.Yq)(e,(function(){return t.remove()})),e}))})).transitions()}(o,a,t,n),c=function(t,e,n){var a=n.animate,o=n.connect,s=n.areaFill;if(e.length<2||!s||!o)return[];for(var u=Array.isArray(s)?s:[s,"transparent"],l=function(t){return u[t%u.length]},c=[],h=0;h<e.length-1;h++){var f=(0,r.CR)([e[h].points,e[h+1].points],2),d=E(f[0],f[1],n);c.push({d:d,fill:l(h)})}return t.selectAll(x.region.class).data(c,(function(t,e){return e})).join((function(t){return t.append("path").each((function(t,e){var n=(0,p.S)(t,[t,e,c]);this.attr(n)})).attr("className",x.region.name)}),(function(t){return t.transition((function(t,e){var n=(0,p.S)(t,[t,e,c]);return(0,i.eR)(this,n,a.update)}))}),(function(t){return t.transition((function(){var t=this,e=v(this,a.exit);return(0,i.Yq)(e,(function(){return t.remove()})),e}))})).transitions()}(u,a,t);return(0,r.ev)((0,r.ev)([],(0,r.CR)(l),!1),(0,r.CR)(c),!1)},e}(a.w),T=n(53032);function S(t,e){return"number"==typeof t&&"number"==typeof e?function(t,e){return function(n){return t*(1-n)+e*n}}(t,e):Array.isArray(t)&&Array.isArray(e)?function(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0;return function(i){var a=new Array(r),o=new Array(n),s=0;for(s=0;s<r;++s)a[s]=S(t[s],e[s]);for(;s<n;++s)o[s]=e[s];for(s=0;s<r;++s)o[s]=a[s](i);return o}}(t,e):"object"==typeof t&&"object"==typeof e?function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n={},i={};return Object.entries(e).forEach((function(e){var a=(0,r.CR)(e,2),o=a[0],s=a[1];o in t?n[o]=S(t[o],s):i[o]=s})),function(t){return Object.entries(n).forEach((function(e){var n=(0,r.CR)(e,2),a=n[0],o=n[1];return i[a]=o(t)})),i}}(t,e):function(e){return t}}var C=n(75494),A=n(19712);function P(t,e){var n={},r=Array.isArray(e)?e:[e];for(var i in t)r.includes(i)||(n[i]=t[i]);return n}function N(t,e){return Object.fromEntries(Object.entries(t).map((function(t){var n=(0,r.CR)(t,2),i=n[0],a=n[1];return[i,(0,p.S)(a,e)]})))}function R(t,e){return e&&(0,l.Z)(e)?t.filter(e):t}function Z(t,e){var n=e.startAngle;return(e.endAngle-n)*t+n}function O(t,e){if("linear"===e.type){var n=(0,r.CR)(e.startPos,2),i=n[0],a=n[1],o=(0,r.CR)(e.endPos,2),s=o[0],u=o[1],l=(0,r.CR)([s-i,u-a],2),f=l[0],d=l[1];return(0,c.Fv)([f,d])}var p=h(Z(t,e));return[-Math.sin(p),Math.cos(p)]}function L(t,e,n){var r=O(t,n);return(0,c.KR)(r,"positive"!==e)}function _(t,e){return L(t,e.labelDirection,e)}function I(t,e){return"linear"===e.type?function(t,e){var n=(0,r.CR)(e.startPos,2),i=n[0],a=n[1],o=(0,r.CR)(e.endPos,2),s=o[0],u=o[1],l=(0,r.CR)([s-i,u-a],2);return[i+l[0]*t,a+l[1]*t]}(t,e):function(t,e){var n=e.radius,i=(0,r.CR)(e.center,2),a=i[0],o=i[1],s=h(Z(t,e));return[a+n*Math.cos(s),o+n*Math.sin(s)]}(t,e)}function D(t){return 0===O(0,t)[1]}function F(t){return 0===O(0,t)[0]}function B(t,e){return e-t==360}function G(t,e,n,i,a){var o=e-t,s=(0,r.CR)([a,a],2),u=s[0],l=s[1],c=(0,r.CR)([h(t),h(e)],2),f=c[0],d=c[1],p=function(t){return[n+a*Math.cos(t),i+a*Math.sin(t)]},v=(0,r.CR)(p(f),2),g=v[0],y=v[1],m=(0,r.CR)(p(d),2),b=m[0],x=m[1];if(B(t,e)){var k=(d+f)/2,w=(0,r.CR)(p(k),2);return[["M",g,y],["A",u,l,0,1,0,w[0],w[1]],["A",u,l,0,1,0,b,x]]}var E=o>180?1:0,M=t>e?0:1;return"M".concat(g,",").concat(y,",A").concat(u,",").concat(l,",0,").concat(E,",").concat(M,",").concat(b,",").concat(x)}function z(t,e,n,i){var a=e.startAngle,o=e.endAngle,s=e.center,l=e.radius;return t.selectAll(u.Ec.line.class).data([{d:G.apply(void 0,(0,r.ev)((0,r.ev)([a,o],(0,r.CR)(s),!1),[l],!1))}],(function(t,e){return e})).join((function(t){return t.append("path").attr("className",u.Ec.line.name).styles(e).styles({d:function(t){return t.d}})}),(function(t){return t.transition((function(){var t=this,e=function(t,e,n,i){if(!i)return t.attr("__keyframe_data__",n),null;var a=i.duration,o=void 0===a?0:a,s=S(e,n),u=Math.ceil(+o/16),l=new Array(u).fill(0).map((function(t,e,n){return{__keyframe_data__:s(e/(n.length-1))}}));return t.animate(l,(0,r.pi)({fill:"both"},i))}(this,function(t){var e=t.attributes,n=e.startAngle,i=e.endAngle,a=e.center,o=e.radius;return(0,r.ev)((0,r.ev)([n,i],(0,r.CR)(a),!1),[o],!1)}(this),(0,r.ev)((0,r.ev)([a,o],(0,r.CR)(s),!1),[l],!1),i.update);if(e){var n=function(){var e=(0,T.Z)(t.attributes,"__keyframe_data__");t.style.d=G.apply(void 0,(0,r.ev)([],(0,r.CR)(e),!1))};e.onframe=n,e.onfinish=n}return e})).styles(e)}),(function(t){return t.remove()})).styles(n).transitions()}function V(t){var e=(0,r.CR)(t,2),n=(0,r.CR)(e[0],2),i=n[0],a=n[1],o=(0,r.CR)(e[1],2);return{x1:i,y1:a,x2:o[0],y2:o[1]}}function j(t,e,n,a){var o=e.showTrunc,s=e.startPos,l=e.endPos,c=e.truncRange,h=e.lineExtension,f=(0,r.CR)([s,l],2),d=(0,r.CR)(f[0],2),p=d[0],v=d[1],g=(0,r.CR)(f[1],2),y=g[0],m=g[1],b=(0,r.CR)(h?function(t,e,n){void 0===n&&(n=[0,0]);var i=(0,r.CR)([t,e,n],3),a=(0,r.CR)(i[0],2),o=a[0],s=a[1],u=(0,r.CR)(i[1],2),l=u[0],c=u[1],h=(0,r.CR)(i[2],2),f=h[0],d=h[1],p=(0,r.CR)([l-o,c-s],2),v=p[0],g=p[1],y=Math.sqrt(Math.pow(v,2)+Math.pow(g,2)),m=(0,r.CR)([-f/y,d/y],2),b=m[0],x=m[1];return[b*v,b*g,x*v,x*g]}(s,l,h):new Array(4).fill(0),4),x=b[0],k=b[1],w=b[2],E=b[3],M=function(e){return t.selectAll(u.Ec.line.class).data(e,(function(t,e){return e})).join((function(t){return t.append("line").attr("className",(function(t){return"".concat(u.Ec.line.name," ").concat(t.className)})).styles(n).transition((function(t){return(0,i.eR)(this,V(t.line),!1)}))}),(function(t){return t.styles(n).transition((function(t){var e=t.line;return(0,i.eR)(this,V(e),a.update)}))}),(function(t){return t.remove()})).transitions()};if(!o||!c)return M([{line:[[p+x,v+k],[y+w,m+E]],className:u.Ec.line.name}]);var T=(0,r.CR)(c,2),S=T[0],C=T[1],A=y-p,P=m-v,N=(0,r.CR)([p+A*S,v+P*S],2),R=N[0],Z=N[1],O=(0,r.CR)([p+A*C,v+P*C],2),L=O[0],_=O[1],I=M([{line:[[p+x,v+k],[R,Z]],className:u.Ec.lineFirst.name},{line:[[L,_],[y+w,m+E]],className:u.Ec.lineSecond.name}]);return function(t,e){e.truncRange,e.truncShape,e.lineExtension}(0,e),I}function W(t,e,n){var r,i=e.type,a=(0,d.zs)(e,"line");return r="linear"===i?j(t,e,P(a,"arrow"),n):z(t,e,P(a,"arrow"),n),function(t,e,n,r){var i,a=n.showArrow,o=n.showTrunc,s=n.lineArrow,l=n.lineArrowOffset,c=n.lineArrowSize;if(i="arc"===e?t.select(u.Ec.line.class):o?t.select(u.Ec.lineSecond.class):t.select(u.Ec.line.class),!a||!s||"arc"===n.type&&B(n.startAngle,n.endAngle)){var h=i.node();h&&(h.style.markerEnd=void 0)}else{var f=(0,C.S)(s);f.attr(r),(0,A.b)(f,c,!0),i.style("markerEnd",f).style("markerEndOffset",-l)}}(t,i,e,a),r}function H(t){var e=t.type,n=t.gridCenter;return"linear"===e?n:n||t.center}function U(t,e){var n=e.gridLength;return t.map((function(t,i){var a=t.value,o=(0,r.CR)(I(a,e),2),s=o[0],u=o[1],l=(0,r.CR)((0,c.bA)(function(t,e){return L(t,e.gridDirection,e)}(a,e),n),2);return{id:i,points:[[s,u],[s+l[0],u+l[1]]]}}))}function Y(t,e,n,i){var a=(0,d.zs)(n,"grid"),o=a.type,s=a.areaFill,c=H(n),f=R(e,n.gridFilter),v="segment"===o?U(f,n):function(t,e){var n=e.gridControlAngles,i=H(e);if(!i)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||0===n.length)throw new Error("Invalid gridControlAngles");var a=(0,r.CR)(i,2),o=a[0],s=a[1];return t.map((function(t,i){var a=t.value,u=(0,r.CR)(I(a,e),2),l=u[0],c=u[1],f=(0,r.CR)([l-o,c-s],2),d=f[0],p=f[1],v=[];return n.forEach((function(t){var e=h(t),n=(0,r.CR)([Math.cos(e),Math.sin(e)],2),i=n[0],a=n[1],u=d*i-p*a+o,l=d*a+p*i+s;v.push([u,l])})),{points:v,id:i}}))}(f,n),g=(0,r.pi)((0,r.pi)({},a),{center:c,areaFill:(0,l.Z)(s)?f.map((function(t,e){return(0,p.S)(s,[t,e,f])})):s,animate:i,data:v});return t.selectAll(u.Ec.grid.class).data([1]).join((function(t){return t.append((function(){return new M({style:g})})).attr("className",u.Ec.grid.name)}),(function(t){return t.transition((function(){return this.update(g)}))}),(function(t){return t.remove()})).transitions()}function q(t,e,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=!1),!!(r&&t===e||i&&t===n)||t>e&&t<n}var X=n(62059),$=n(83186),K=n(30650);function J(t,e){if(e)try{var n=e.replace(/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,(function(e,n,i){return"translate(".concat(function(t,e,n){var i=t.getBBox(),a=i.width,o=i.height,s=(0,r.CR)([e,n].map((function(t,e){var n;return t.includes("%")?parseFloat((null===(n=t.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===n?void 0:n[0])||"0")/100*(0===e?a:o):t})),2);return[s[0],s[1]]}(t,n,i),")")}));t.attr("transform",n)}catch(t){}}var Q=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)},tt=n(35912),et=n(95147),nt=n(62191),rt=function(){function t(t,e,n,r){this.set(t,e,n,r)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(t,e,n){var r=this,i=r.x1,a=r.y1,o=r.x2,s=r.y2,u=Math.cos(t),l=Math.sin(t),c=e-e*u+n*l,h=n-e*l-n*u;return[[u*i-l*s+c,l*i+u*s+h],[u*o-l*s+c,l*o+u*s+h],[u*i-l*a+c,l*i+u*a+h],[u*o-l*a+c,l*o+u*a+h]]},t.prototype.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},t.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},t}();function it(t,e){var n=t.getEulerAngles()||0;t.setEulerAngles(0);var i=t.getBounds(),a=(0,r.CR)(i.min,2),o=a[0],s=a[1],u=(0,r.CR)(i.max,2),l=u[0],c=u[1],f=t.getBBox(),d=f.width,p=f.height,v=0,g=0,y=o,m=s,b=(0,K.U4)(t);if(b){p-=1.5;var x=b.style.textAlign,k=b.style.textBaseline;"center"===x?y=(o+l)/2:"right"!==x&&"end"!==x||(y=l),"middle"===k?m=(s+c)/2:"bottom"===k&&(m=c)}var w=(0,r.CR)((0,nt.j)(e),4),E=w[0],M=void 0===E?0:E,T=w[1],S=void 0===T?0:T,C=w[2],A=void 0===C?M:C,P=w[3],N=new rt((v+=o)-(void 0===P?S:P),(g+=s)-M,v+d+S,g+p+A);return t.setEulerAngles(n),N.rotatedPoints(h(n),y,m)}function at(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function ot(t,e,n){var r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return 0===r?0:r<0?2:1}function st(t,e){return e.every((function(e){return function(t,e){var n=t.length;if(n<3)return!1;var r,i,a,o,s,u,l=[e,[9999,e[1]]],c=0,h=0;do{var f=[t[h],t[(h+1)%n]];if(i=l,a=void 0,o=void 0,s=void 0,u=void 0,a=ot((r=f)[0],r[1],i[0]),o=ot(r[0],r[1],i[1]),s=ot(i[0],i[1],r[0]),u=ot(i[0],i[1],r[1]),a!==o&&s!==u||0===a&&at(r,i[0])||0===o&&at(r,i[1])||0===s&&at(i,r[0])||0===u&&at(i,r[1])){if(0===ot(f[0],e,f[1]))return at(f,e);c++}h=(h+1)%n}while(0!==h);return!!(1&c)}(t,e)}))}function ut(t,e){var n=(0,r.CR)(t,4),i=n[0],a=n[1],o=n[2],s=n[3],u=(0,r.CR)(e,4),l=u[0],c=u[1],h=o-i,f=s-a,d=u[2]-l,p=u[3]-c,v=h*p-d*f;if(0===v)return!1;var g=v>0,y=i-l,m=a-c,b=h*m-f*y;if(b<0===g)return!1;var x=d*m-p*y;return x<0!==g&&(b>v!==g&&x>v!==g)}function lt(t,e){return[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]].some((function(t){return ut(e,t)}))}function ct(t,e,n){var i,a,o=e.crossPadding,s=new Set,u=null,l=function(t,e){var n=t.type,i=t.labelDirection,a=t.crossSize;if(!a)return!1;if("arc"===n){var o=t.center,s=t.radius,u=(0,r.CR)(o,2),l=u[0],h=u[1],f="negative"===i?0:a,d=-s-f,p=s+f,v=(0,r.CR)((0,nt.j)(e),4),g=v[0],y=v[1],m=v[2],b=v[3];return new rt(l+d-b,h+d-g,l+p+y,h+p+m)}var x=(0,r.CR)(t.startPos,2),k=x[0],w=x[1],E=(0,r.CR)(t.endPos,2),M=E[0],T=E[1],S=(0,r.CR)(F(t)?[-e,0,e,0]:[0,e,0,-e],4),C=S[0],A=S[1],P=S[2],N=S[3],R=_(0,t),Z=(0,c.bA)(R,a),O=new rt(k,w,M,T);return O.x1+=N,O.y1+=C,O.x2+=A+Z[0],O.y2+=P+Z[1],O}(e,o),h=function(t){return!l||function(t,e,n){var r=t.x1,i=t.x2,a=t.y1,o=t.y2;return st([[r,a],[i,a],[i,o],[r,o]],it(e,n))}(l,t)},f=function(t,e){return!t||!t.firstChild||!function(t,e,n){var i,a,o=it(t,n).flat(1),s=it(e,n).flat(1),u=[[o[0],o[1],o[2],o[3]],[o[0],o[1],o[4],o[5]],[o[4],o[5],o[6],o[7]],[o[2],o[3],o[6],o[7]]];try{for(var l=(0,r.XA)(u),c=l.next();!c.done;c=l.next())if(lt(s,c.value))return!0}catch(t){i={error:t}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return!1}(t.firstChild,e.firstChild,(0,nt.j)(n))};try{for(var d=(0,r.XA)(t),p=d.next();!p.done;p=d.next()){var v=p.value;h(v)?!u||f(u,v)?u=v:(s.add(u),s.add(v)):s.add(v)}}catch(t){i={error:t}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return Array.from(s)}function ht(t,e){return void 0===e&&(e={}),(0,et.Z)(t)?0:"number"==typeof t?t:Math.floor((0,K.Ux)(t,e))}var ft=n(39639),dt=function(t,e){var n=e.seq,r=void 0===n?2:n;return t.filter((function(t,e){return!(e%r)||((0,X.Cp)(t),!1)}))};var pt=new Map([["hide",function(t,e,n,i){var a=t.length,o=e.keepHeader,s=e.keepTail;if(!(a<=1||2===a&&o&&s)){var u,l,c,h=dt,f=function(t){return t.forEach(i.show),t},d=2,p=t.slice(),v=t.slice(),g=Math.min.apply(Math,(0,r.ev)([1],(0,r.CR)(t.map((function(t){return t.getBBox().width}))),!1));if("linear"===n.type&&(D(n)||F(n))){var y=(0,ft._v)(t[0]).left,m=(0,ft._v)(t[a-1]).right,b=Math.abs(m-y)||1;d=Math.max(Math.floor(a*g/b),d)}for(o&&(u=p.splice(0,1)[0]),s&&(l=p.splice(-1,1)[0],p.reverse()),f(p);d<t.length&&ct((c=l?(0,r.ev)((0,r.ev)([l],(0,r.CR)(v),!1),[u],!1):(0,r.ev)([u],(0,r.CR)(v),!1),c.filter(Q)),n,null==e?void 0:e.margin).length;){if(l&&!u&&d%2==0)p.splice(0,1).forEach(i.hide);else if(l&&u){p.splice(0,1).forEach(i.hide)}v=h(f(p),{seq:d}),d++}}}],["rotate",function(t,e,n,i){var a,o,s=e.optionalAngles,u=void 0===s?[0,45,90]:s,l=e.margin,c=e.recoverWhenFailed,h=void 0===c||c,f=t.map((function(t){return t.getLocalEulerAngles()})),d=function(e){return t.forEach((function(t,n){var r=Array.isArray(e)?e[n]:e;i.rotate(t,+r)}))};try{for(var p=(0,r.XA)(u),v=p.next();!v.done;v=p.next()){if(d(v.value),ct(t,n,l).length<1)return}}catch(t){a={error:t}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}h&&d(f)}],["ellipsis",function(t,e,n,i){if(!(t.length<=1)){var a=e.suffix,o=void 0===a?"...":a,s=e.minLength,u=e.maxLength,l=void 0===u?1/0:u,c=e.step,h=void 0===c?" ":c,f=e.margin,d=void 0===f?[0,0,0,0]:f,p=(0,K.qT)(i.getTextShape(t[0])),v=ht(h,p),g=s?ht(s,p):v,y=ht(l,p);((0,et.Z)(y)||y===1/0)&&(y=Math.max.apply(null,t.map((function(t){return t.getBBox().width}))));for(var m=t.slice(),b=(0,r.CR)(d,4),x=(b[0],b[1],b[2],b[3],function(e){if(m.forEach((function(t){i.ellipsis(i.getTextShape(t),e,o)})),(m=ct(t,n,d)).length<1)return{value:void 0}}),k=y;k>g+v;k-=v){var w=x(k);if("object"==typeof w)return w.value}}}],["wrap",function(t,e,n,i){var a=e.wordWrapWidth,o=void 0===a?50:a,s=e.maxLines,u=void 0===s?3:s,l=e.recoverWhenFailed,c=void 0===l||l,h=e.margin,f=void 0===h?[0,0,0,0]:h,d=t.map((function(t){return t.attr("maxLines")||1})),p=Math.min.apply(Math,(0,r.ev)([],(0,r.CR)(d),!1)),v=function(t){var e=t.type,n=t.labelDirection;return"linear"===e&&D(t)?"negative"===n?"bottom":"top":"middle"}(n),g=function(e){return t.forEach((function(t,n){var r=Array.isArray(e)?e[n]:e;i.wrap(t,o,r,v)}))};if(!(p>u)){for(var y=p;y<=u;y++)if(g(y),ct(t,n,f).length<1)return;c&&g(d)}}]]);function vt(t,e,n){var r=e.labelOverlap,i=void 0===r?[]:r;i.length&&i.forEach((function(r){var i=r.type,a=pt.get(i);(function(t,e,n){return!(e.labelOverlap.length<1)&&("hide"===n?!(0,tt.X)(t[0]):"rotate"===n?!t.some((function(t){var e;return!!(null===(e=t.attr("transform"))||void 0===e?void 0:e.includes("rotate"))})):"ellipsis"!==n&&"wrap"!==n||t.filter((function(t){return t.querySelector("text")})).length>1)})(t,e,i)&&(null==a||a(t,r,e,n))}))}function gt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce((function(t,e){return t*("positive"===e?-1:1)}),1)}function yt(t){for(var e=t;e<0;)e+=360;return Math.round(e%360)}function mt(t,e){var n=(0,r.CR)(t,2),i=n[0],a=n[1],o=(0,r.CR)(e,2),s=o[0],u=o[1],l=(0,r.CR)([i*s+a*u,i*u-a*s],2),c=l[0],h=l[1];return Math.atan2(h,c)}function bt(t,e,n){var r,i=n.labelAlign;if(null===(r=e.style.transform)||void 0===r?void 0:r.includes("rotate"))return e.getLocalEulerAngles();var a=_(t.value,n),o=O(t.value,n);return"horizontal"===i?0:function(t){var e=(t+360)%180;return q(e,-90,90)||(e+=180),e}(f("perpendicular"===i?mt([1,0],a):mt([o[0]<0?-1:1,0],o)))}function xt(t,e,n){var r=n.type,i=n.labelAlign,a=_(t,n),o=yt(e),s=yt(f(mt([1,0],a))),u="center",l="middle";return"linear"===r?[90,270].includes(s)&&0===o?(u="center",l=1===a[1]?"top":"bottom"):s%180||![90,270].includes(o)?0===s?(q(o,0,90,!1,!0)||q(o,0,90)||q(o,270,360))&&(u="start"):90===s?q(o,0,90,!1,!0)?u="start":(q(o,90,180)||q(o,270,360))&&(u="end"):270===s?q(o,0,90,!1,!0)?u="end":(q(o,90,180)||q(o,270,360))&&(u="start"):180===s&&(90===o?u="start":(q(o,0,90)||q(o,270,360))&&(u="end")):u="center":"parallel"===i?l=q(s,0,180,!0)?"top":"bottom":"horizontal"===i?q(s,90,270,!1)?u="end":(q(s,270,360,!1)||q(s,0,90))&&(u="start"):"perpendicular"===i&&(u=q(s,90,270)?"end":"start"),{textAlign:u,textBaseline:l}}function kt(t,e,n){var i=n.showTick,a=n.tickLength,o=n.tickDirection,s=n.labelDirection,u=n.labelSpacing,l=e.indexOf(t),h=(0,p.S)(u,[t,l,e]),f=(0,r.CR)([_(t.value,n),gt(s,o)],2),d=f[0],v=1===f[1]?(0,p.S)(i?a:0,[t,l,e]):0,g=(0,r.CR)((0,c.IH)((0,c.bA)(d,h+v),I(t.value,n)),2);return{x:g[0],y:g[1]}}function wt(t,e){"text"===t.nodeName&&t.attr(e)}function Et(t){vt(this.node().childNodes,t,{hide:X.Cp,show:X.$Z,rotate:function(e,n){!function(t,e,n){e.setLocalEulerAngles(t);var r=xt(e.__data__.value,t,n),i=e.querySelector(u.Ec.labelItem.class);i&&wt(i,r)}(+n,e,t)},ellipsis:function(t,e,n){t&&(0,$.O)(t,e||1/0,n)},wrap:function(t,e,n){var r,i,a,o;t&&(r=t,i=e,void 0===(a=n)&&(a=2),void 0===o&&(o="top"),(0,K.Rm)(r,{wordWrap:!0,wordWrapWidth:i,maxLines:a,textBaseline:o}))},getTextShape:function(t){return t.querySelector("text")}})}function Mt(t,e,n,i,a){var o=n.indexOf(e),c=(0,s.Ys)(t).append(function(t,e,n,r){var i=r.labelFormatter;return(0,l.Z)(i)?function(){return(0,C.S)((0,p.S)(i,[t,e,n,_(t.value,r)]))}:function(){return(0,C.S)(t.label||"")}}(e,o,n,a)).attr("className",u.Ec.labelItem.name).node(),h=(0,r.CR)((0,d.Hm)(N(i,[e,o,n])),2),f=h[0],v=h[1],g=v.transform,y=(0,r._T)(v,["transform"]);J(c,g);var m=bt(e,c,a);return c.getLocalEulerAngles()||c.setLocalEulerAngles(m),wt(c,(0,r.pi)((0,r.pi)({},xt(e.value,m,a)),f)),t.attr(y),c}function Tt(t,e){return L(t,e.tickDirection,e)}function St(t,e,n,i,a){var o=a.tickLength,s=(0,r.CR)(function(t,e){var n=(0,r.CR)(t,2);return[[0,0],[n[0]*e,n[1]*e]]}(i,(0,p.S)(o,[t,e,n])),2),u=(0,r.CR)(s[0],2),l=u[0],c=u[1],h=(0,r.CR)(s[1],2);return{x1:l,x2:h[0],y1:c,y2:h[1]}}function Ct(t,e,n,a,o,c){var h=function(t,e,n,r,i){var a=i.tickFormatter,o=Tt(e.value,i),s="line";return(0,l.Z)(a)&&(s=function(){return(0,p.S)(a,[e,n,r,o])}),t.append(s).attr("className",u.Ec.tickItem.name)}((0,s.Ys)(this),t,e,n,a);!function(t,e,n,i,a,o,s){var u=Tt(t.value,o),l=St(t,e,n,u,o),c=l.x1,h=l.x2,f=l.y1,p=l.y2,v=(0,r.CR)((0,d.Hm)(N(s,[t,e,n,u])),2),g=v[0],y=v[1];"line"===i.node().nodeName&&i.styles((0,r.pi)({x1:c,x2:h,y1:f,y2:p},g)),a.attr(y),i.styles(g)}(t,e,n,h,this,a,o);var f=(0,r.CR)(I(t.value,a),2),v=f[0],g=f[1];return(0,i.eR)(this,{transform:"translate(".concat(v,", ").concat(g,")")},c)}var At=n(1366);function Pt(t,e,n){var i=n.titlePosition,a=void 0===i?"lb":i,o=n.titleSpacing,s=(0,At.li)(a),u=t.node().getLocalBounds(),l=(0,r.CR)(u.min,2),h=l[0],f=l[1],d=(0,r.CR)(u.halfExtents,2),p=d[0],v=d[1],g=(0,r.CR)(e.node().getLocalBounds().halfExtents,2),y=g[0],m=g[1],b=(0,r.CR)([h+p,f+v],2),x=b[0],k=b[1],w=(0,r.CR)((0,nt.j)(o),4),E=w[0],M=w[1],T=w[2],S=w[3];if(["start","end"].includes(a)&&"linear"===n.type){var C=n.startPos,A=n.endPos,P=(0,r.CR)("start"===a?[C,A]:[A,C],2),N=P[0],R=P[1],Z=(0,c.Fv)([-R[0]+N[0],-R[1]+N[1]]),O=(0,r.CR)((0,c.bA)(Z,E),2),L=O[0],_=O[1];return{x:N[0]+L,y:N[1]+_}}return s.includes("t")&&(k-=v+m+E),s.includes("r")&&(x+=p+y+M),s.includes("l")&&(x-=p+y+S),s.includes("b")&&(k+=v+m+T),{x:x,y:k}}function Nt(t,e,n,a,o){var l=(0,d.zs)(a,"title"),c=(0,r.CR)((0,d.Hm)(l),2),h=c[0],f=c[1],p=f.transform,v=f.transformOrigin,g=(0,r._T)(f,["transform","transformOrigin"]);e.styles(g);var y=p||function(t,e,n){var r=2*t.getGeometryBounds().halfExtents[1];if("vertical"===e){if("left"===n)return"rotate(-90) translate(0, ".concat(r/2,")");if("right"===n)return"rotate(-90) translate(0, -".concat(r/2,")")}return""}(t.node(),h.direction,h.position);t.styles((0,r.pi)((0,r.pi)({},h),{transformOrigin:v})),J(t.node(),y);var m=Pt((0,s.Ys)(n._offscreen||n.querySelector(u.Ec.mainGroup.class)),e,a),b=m.x,x=m.y;return(0,i.eR)(e.node(),{transform:"translate(".concat(b,", ").concat(x,")")},o)}function Rt(t,e,n,a){var l=t.showLine,c=t.showTick,h=t.showLabel,f=e.maybeAppendByClassName(u.Ec.lineGroup,"g"),p=(0,o.z)(l,f,(function(e){return W(e,t,a)}))||[],g=e.maybeAppendByClassName(u.Ec.tickGroup,"g"),y=(0,o.z)(c,g,(function(e){return function(t,e,n,r){var a=R(e,n.tickFilter),o=(0,d.zs)(n,"tick");return t.selectAll(u.Ec.tick.class).data(a,(function(t){return t.id||t.label})).join((function(t){return t.append("g").attr("className",u.Ec.tick.name).transition((function(t,e){return Ct.call(this,t,e,a,n,o,!1)}))}),(function(t){return t.transition((function(t,e){return this.removeChildren(),Ct.call(this,t,e,a,n,o,r.update)}))}),(function(t){return t.transition((function(){var t=this,e=v(this.childNodes[0],r.exit);return(0,i.Yq)(e,(function(){return t.remove()})),e}))})).transitions()}(e,n,t,a)}))||[],m=e.maybeAppendByClassName(u.Ec.labelGroup,"g"),b=(0,o.z)(h,m,(function(e){return function(t,e,n,a){var o=R(e,n.labelFilter),l=(0,d.zs)(n,"label");return t.selectAll(u.Ec.label.class).data(o,(function(t,e){return e})).join((function(r){return r.append("g").attr("className",u.Ec.label.name).transition((function(t){Mt(this,t,e,l,n);var r=kt(t,e,n),i=r.x,a=r.y;return this.style.transform="translate(".concat(i,", ").concat(a,")"),null})).call((function(){Et.call(t,n)}))}),(function(o){return o.transition((function(t){var o=this.querySelector(u.Ec.labelItem.class),s=Mt(this,t,e,l,n),c=(0,i.tT)(o,s,a.update),h=kt(t,e,n),f=h.x,d=h.y,p=(0,i.eR)(this,{transform:"translate(".concat(f,", ").concat(d,")")},a.update);return(0,r.ev)((0,r.ev)([],(0,r.CR)(c),!1),[p],!1)})).call((function(e){var r=(0,T.Z)(e,"_transitions").flat().filter(Q);(0,i.V7)(r,(function(){Et.call(t,n)}))}))}),(function(t){return t.transition((function(){var t=this,e=v(this.childNodes[0],a.exit);return(0,i.Yq)(e,(function(){return(0,s.Ys)(t).remove()})),e}))})).transitions()}(e,n,t,a)}))||[];return(0,r.ev)((0,r.ev)((0,r.ev)([],(0,r.CR)(p),!1),(0,r.CR)(y),!1),(0,r.CR)(b),!1).filter((function(t){return!!t}))}var Zt=function(t){function e(e){return t.call(this,e,u.m5)||this}return(0,r.ZT)(e,t),e.prototype.render=function(t,e,n){var a=this,l=t.titleText,c=t.data,h=t.animate,f=t.showTitle,d=t.showGrid,p=t.dataThreshold,v=t.truncRange,g=function(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),r=[],i=0;i<t.length;i+=n)r.push(t[i]);return r}(c,p).filter((function(t){var e=t.value;return!(v&&e>v[0]&&e<v[1])})),y=(0,i.MG)(void 0===n?h:n),m=(0,s.Ys)(e).maybeAppendByClassName(u.Ec.gridGroup,"g"),b=(0,o.z)(d,m,(function(e){return Y(e,g,t,y)}))||[],x=(0,s.Ys)(e).maybeAppendByClassName(u.Ec.mainGroup,"g");l&&(!this.initialized&&y.enter||this.initialized&&y.update)&&Rt(t,(0,s.Ys)(this.offscreenGroup),g,(0,i.MG)(!1));var k=Rt(t,(0,s.Ys)(x.node()),g,y),w=(0,s.Ys)(e).maybeAppendByClassName(u.Ec.titleGroup,"g"),E=(0,o.z)(f,w,(function(e){return function(t,e,n,r){var i=n.titleText;return t.selectAll(u.Ec.title.class).data([{title:i}].filter((function(t){return!!t.title})),(function(t,e){return t.title})).join((function(a){return a.append((function(){return(0,C.S)(i)})).attr("className",u.Ec.title.name).transition((function(){return Nt((0,s.Ys)(this),t,e,n,r.enter)}))}),(function(i){return i.transition((function(){return Nt((0,s.Ys)(this),t,e,n,r.update)}))}),(function(t){return t.remove()})).transitions()}(e,a,t,y)}))||[];return(0,r.ev)((0,r.ev)((0,r.ev)([],(0,r.CR)(b),!1),(0,r.CR)(k),!1),(0,r.CR)(E),!1).flat().filter((function(t){return!!t}))},e}(a.w)},61021:function(t,e,n){"use strict";n.d(e,{Ec:function(){return s},m5:function(){return o}});var r=n(83787),i=n(1242),a=n(79274),o={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new i.y$({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},s=((0,r.Z)({},o,{style:{type:"arc"}}),(0,r.Z)({},o,{style:{}}),(0,a.A)({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"))},34819:function(t,e,n){"use strict";n.d(e,{z:function(){return g}});var r=n(97582),i=n(1242),a=n(5951),o=n(79274),s=n(62191),u=n(43629),l=n(33016),c=n(54015),h=n(75494),f=n(39639),d=n(62059),p={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},v=(0,o.A)({background:"background",labelGroup:"label-group",label:"label"},"indicator"),g=function(t){function e(e){var n=t.call(this,e,p)||this;return n.point=[0,0],n.group=n.appendChild(new i.ZA({})),n.isMutationObserved=!0,n}return(0,r.ZT)(e,t),e.prototype.renderBackground=function(){if(this.label){var t=this.attributes,e=t.position,n=t.padding,i=(0,r.CR)((0,s.j)(n),4),a=i[0],o=i[1],h=i[2],f=i[3],d=this.label.node().getLocalBounds(),p=d.min,g=d.max,y=new u.b(p[0]-f,p[1]-a,g[0]+o-p[0]+f,g[1]+h-p[1]+a),m=this.getPath(e,y),b=(0,l.zs)(this.attributes,"background");this.background=(0,c.Ys)(this.group).maybeAppendByClassName(v.background,"path").styles((0,r.pi)((0,r.pi)({},b),{d:m})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var t=this.attributes,e=t.formatter,n=t.labelText,i=(0,l.zs)(this.attributes,"label"),a=(0,r.CR)((0,l.Hm)(i),2),o=a[0],s=a[1],u=(o.text,(0,r._T)(o,["text"]));(this.label=(0,c.Ys)(this.group).maybeAppendByClassName(v.labelGroup,"g").styles(s),n)&&this.label.maybeAppendByClassName(v.label,(function(){return(0,h.S)(e(n))})).style("text",e(n).toString()).selectAll("text").styles(u)},e.prototype.adjustLayout=function(){var t=(0,r.CR)(this.point,2),e=t[0],n=t[1],i=this.attributes,a=i.x,o=i.y;this.group.attr("transform","translate(".concat(a-e,", ").concat(o-n,")"))},e.prototype.getPath=function(t,e){var n=this.attributes.radius,i=e.x,a=e.y,o=e.width,s=e.height,u=[["M",i+n,a],["L",i+o-n,a],["A",n,n,0,0,1,i+o,a+n],["L",i+o,a+s-n],["A",n,n,0,0,1,i+o-n,a+s],["L",i+n,a+s],["A",n,n,0,0,1,i,a+s-n],["L",i,a+n],["A",n,n,0,0,1,i+n,a],["Z"]],l={top:4,right:6,bottom:0,left:2}[t],c=this.createCorner([u[l].slice(-2),u[l+1].slice(-2)]);return u.splice.apply(u,(0,r.ev)([l+1,1],(0,r.CR)(c),!1)),u[0][0]="M",u},e.prototype.createCorner=function(t,e){void 0===e&&(e=10);var n=f.wE.apply(void 0,(0,r.ev)([],(0,r.CR)(t),!1)),i=(0,r.CR)(t,2),a=(0,r.CR)(i[0],2),o=a[0],s=a[1],u=(0,r.CR)(i[1],2),l=u[0],c=u[1],h=(0,r.CR)(n?[l-o,[o,l]]:[c-s,[s,c]],2),d=h[0],p=(0,r.CR)(h[1],2),v=p[0],g=p[1],y=d/2,m=e*(d/Math.abs(d)),b=m/2,x=m*Math.sqrt(3)/2*.8,k=(0,r.CR)([v,v+y-b,v+y,v+y+b,g],5),w=k[0],E=k[1],M=k[2],T=k[3],S=k[4];return n?(this.point=[M,s-x],[["L",w,s],["L",E,s],["L",M,s-x],["L",T,s],["L",S,s]]):(this.point=[o+x,M],[["L",o,w],["L",o,E],["L",o+x,M],["L",o,T],["L",o,S]])},e.prototype.applyVisibility=function(){"hidden"===this.attributes.visibility?(0,d.Cp)(this):(0,d.$Z)(this)},e.prototype.bindEvents=function(){this.label.on(i.Dk.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(a.w)},24085:function(t,e,n){"use strict";n.d(e,{W:function(){return I}});var r=n(97582),i=n(5951),a=n(33016),o=n(54015),s=n(43629),u=n(1366),l=n(1242),c=function(){},h=n(17829),f=n(79274),d=n(86650);var p=n(8126),v=n(81957),g=n(68040),y=n(45631);var m=n(62059),b=n(19712),x=n(56546),k=(0,f.A)({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),w=function(t){function e(e){var n=t.call(this,e,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:(0,x.LI)(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(t,e){return"".concat(t,"/").concat(e)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new l.ZA({class:k.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new l.ZA({class:k.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"defaultPage",{get:function(){var t=this.attributes.defaultPage;return(0,v.Z)(t,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var t=this.pageViews,e=(0,r.CR)(function(t){var e;return(null===(e=t[0])||void 0===e?void 0:e.map((function(e,n){return t.map((function(t){return t[n]}))})))||[]}(t.map((function(t){var e=t.getBBox();return[e.width,e.height]}))).map((function(t){return Math.max.apply(Math,(0,r.ev)([],(0,r.CR)(t),!1))})),2),n=e[0],i=e[1],a=this.attributes,o=a.pageWidth,s=void 0===o?n:o,u=a.pageHeight;return{pageWidth:s,pageHeight:void 0===u?i:u}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e=t.prototype.getBBox.call(this),n=e.x,r=e.y,i=this.controllerShape,a=this.pageShape,o=a.pageWidth,u=a.pageHeight;return new s.b(n,r,o+i.width,u)},e.prototype.goTo=function(t){var e=this,n=this.attributes.animate,i=this,a=i.currPage,o=i.playState,s=i.playWindow,u=i.pageViews;if("idle"!==o||t<0||u.length<=0||t>=u.length)return null;u[a].setLocalPosition(0,0),this.prepareFollowingPage(t);var l=(0,r.CR)(this.getFollowingPageDiff(t),2),c=l[0],h=l[1];this.playState="running";var f=(0,y.jt)(s,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-c,", ").concat(-h,")")}],n);return(0,y.Yq)(f,(function(){e.innerCurrPage=t,e.playState="idle",e.setVisiblePages([t]),e.updatePageInfo()})),f},e.prototype.prev=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n<=0)return null;var r=t?(n-1+e)%e:(0,v.Z)(n-1,0,e);return this.goTo(r)},e.prototype.next=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n>=e-1)return null;var r=t?(n+1)%e:(0,v.Z)(n+1,0,e);return this.goTo(r)},e.prototype.renderClipPath=function(t){var e=this.pageShape,n=e.pageWidth,r=e.pageHeight;n&&r?(this.clipPath=t.maybeAppendByClassName(k.clipPath,"rect").styles({width:n,height:r}),this.contentGroup.attr("clipPath",this.clipPath.node())):this.contentGroup.style.clipPath=void 0},e.prototype.setVisiblePages=function(t){this.playWindow.children.forEach((function(e,n){t.includes(n)?(0,m.$Z)(e):(0,m.Cp)(e)}))},e.prototype.adjustControllerLayout=function(){var t=this,e=t.prevBtnGroup,n=t.nextBtnGroup,i=t.pageInfoGroup,a=this.attributes,o=a.orientation,s=a.controllerPadding,u=i.getBBox(),l=u.width,c=(u.height,(0,r.CR)("horizontal"===o?[-180,0]:[-90,90],2)),h=c[0],f=c[1];e.setLocalEulerAngles(h),n.setLocalEulerAngles(f);var d=e.getBBox(),p=d.width,v=d.height,g=n.getBBox(),y=g.width,m=g.height,b=Math.max(p,l,y),x="horizontal"===o?{offset:[[0,0],[p/2+s,0],[p+l+2*s,0]],textAlign:"start"}:{offset:[[b/2,-v-s],[b/2,0],[b/2,m+s]],textAlign:"center"},k=(0,r.CR)(x.offset,3),w=(0,r.CR)(k[0],2),E=w[0],M=w[1],T=(0,r.CR)(k[1],2),S=T[0],C=T[1],A=(0,r.CR)(k[2],2),P=A[0],N=A[1],R=x.textAlign,Z=i.querySelector("text");Z&&(Z.style.textAlign=R),e.setLocalPosition(E,M),i.setLocalPosition(S,C),n.setLocalPosition(P,N)},e.prototype.updatePageInfo=function(){var t,e=this,n=e.currPage,r=e.pageViews,i=e.attributes.formatter;r.length<2||(null===(t=this.pageInfoGroup.querySelector(k.pageInfo.class))||void 0===t||t.attr("text",i(n+1,r.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(t){var e=this.currPage;if(e===t)return[0,0];var n=this.attributes.orientation,r=this.pageShape,i=r.pageWidth,a=r.pageHeight,o=t<e?-1:1;return"horizontal"===n?[o*i,0]:[0,o*a]},e.prototype.prepareFollowingPage=function(t){var e=this.currPage,n=this.pageViews;if(this.setVisiblePages([t,e]),t!==e){var i=(0,r.CR)(this.getFollowingPageDiff(t),2),a=i[0],o=i[1];n[t].setLocalPosition(a,o)}},e.prototype.renderController=function(t){var e=this,n=this.attributes.controllerSpacing,i=this.pageShape,o=i.pageWidth,s=i.pageHeight,u=this.pageViews.length>=2,l=t.maybeAppendByClassName(k.controller,"g");if((0,m.WD)(l.node(),u),u){var c=(0,a.zs)(this.attributes,"button"),h=(0,a.zs)(this.attributes,"pageNum"),f=(0,r.CR)((0,a.Hm)(c),2),d=f[0],p=f[1],v=d.size,g=(0,r._T)(d,["size"]),y=!l.select(k.prevBtnGroup.class).node(),x=l.maybeAppendByClassName(k.prevBtnGroup,"g").styles(p);this.prevBtnGroup=x.node();var w=x.maybeAppendByClassName(k.prevBtn,"path"),E=l.maybeAppendByClassName(k.nextBtnGroup,"g").styles(p);this.nextBtnGroup=E.node(),[w,E.maybeAppendByClassName(k.nextBtn,"path")].forEach((function(t){t.styles((0,r.pi)((0,r.pi)({},g),{transformOrigin:"center"})),(0,b.b)(t.node(),v,!0)}));var M=l.maybeAppendByClassName(k.pageInfoGroup,"g");this.pageInfoGroup=M.node(),M.maybeAppendByClassName(k.pageInfo,"text").styles(h),this.updatePageInfo(),l.node().setLocalPosition(o+n,s/2),y&&(this.prevBtnGroup.addEventListener("click",(function(){e.prev()})),this.nextBtnGroup.addEventListener("click",(function(){e.next()})))}},e.prototype.render=function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i;this.attr("transform","translate(".concat(r,", ").concat(a,")"));var s=(0,o.Ys)(e);this.renderClipPath(s),this.renderController(s),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var t=this,e=(0,g.Z)((function(){return t.render(t.attributes,t)}),50);this.playWindow.addEventListener(l.Dk.INSERTED,e),this.playWindow.addEventListener(l.Dk.REMOVED,e)},e}(i.w),E=n(52644),M=n(86224),T=n(62191),S=n(47772),C=n(39639),A=n(75494),P=n(83186),N=(0,f.A)({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");var R=function(t){function e(e){return t.call(this,e,{span:[1,1],marker:function(){return new l.Cd({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"showValue",{get:function(){var t=this.attributes.valueText;return!!t&&("string"==typeof t||"number"==typeof t?""!==t:"function"==typeof t||""!==t.attr("text"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var t=this.labelGroup,e=this.valueGroup,n=this.attributes.markerSize,r=t.node().getBBox(),i=r.width,a=r.height,o=e.node().getBBox(),s=o.width,u=o.height;return{markerWidth:n,labelWidth:i,valueWidth:s,height:Math.max(n,a,u)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var t=this.attributes.span;if(!t)return[1,1];var e=(0,r.CR)((0,T.j)(t),2),n=e[0],i=e[1],a=this.showValue?i:0,o=n+a;return[n/o,a/o]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t,e=this.attributes,n=e.markerSize,i=e.width,a=this.actualSpace,o=a.markerWidth,s=a.height,u=this.actualSpace,l=u.labelWidth,c=u.valueWidth,h=(0,r.CR)(this.spacing,2),f=h[0],d=h[1];if(i){var p=i-n-f-d,v=(0,r.CR)(this.span,2),g=v[0],y=v[1];l=(t=(0,r.CR)([g*p,y*p],2))[0],c=t[1]}return{width:o+l+c+f+d,height:s,markerWidth:o,labelWidth:l,valueWidth:c}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var t=this.attributes.spacing;if(!t)return[0,0];var e=(0,r.CR)((0,T.j)(t),2),n=e[0],i=e[1];return this.showValue?[n,i]:[n,0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var t=this.shape,e=t.markerWidth,n=t.labelWidth,i=t.valueWidth,a=t.width,o=t.height,s=(0,r.CR)(this.spacing,2),u=s[0];return{height:o,width:a,markerWidth:e,labelWidth:n,valueWidth:i,position:[e/2,e+u,e+n+u+s[1]]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var t,e,n=(t=this.markerGroup.node(),(e=t.querySelector(N.marker.class))?e.style:{}),r=this.attributes,i=r.markerSize,a=r.markerStrokeWidth,o=void 0===a?n.strokeWidth:a,s=r.markerLineWidth,u=void 0===s?n.lineWidth:s,l=r.markerStroke,c=void 0===l?n.stroke:l,h=+(o||u||(c?1:0))*Math.sqrt(2),f=this.markerGroup.node().getBBox(),d=f.width,p=f.height;return(1-h/Math.max(d,p))*i},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(t){var e=this,n=this.attributes.marker,i=(0,a.zs)(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(N.markerGroup,"g").style("zIndex",0),(0,S.z)(!!n,this.markerGroup,(function(){var t,a=e.markerGroup.node(),s=null===(t=a.childNodes)||void 0===t?void 0:t[0],u="string"==typeof n?new M.J({style:{symbol:n},className:N.marker.name}):n();s?u.nodeName===s.nodeName?s instanceof M.J?s.update((0,r.pi)((0,r.pi)({},i),{symbol:n})):((0,C.DM)(s,u),(0,o.Ys)(s).styles(i)):(s.remove(),(0,o.Ys)(u).attr("className",N.marker.name).styles(i),a.appendChild(u)):(u instanceof M.J||(0,o.Ys)(u).attr("className",N.marker.name).styles(i),a.appendChild(u)),e.markerGroup.node().scale(1/e.markerGroup.node().getScale()[0]);var l=(0,b.b)(e.markerGroup.node(),e.scaleSize,!0);e.markerGroup.node().style._transform="scale(".concat(l,")")}))},e.prototype.renderLabel=function(t){var e=(0,a.zs)(this.attributes,"label"),n=e.text,i=(0,r._T)(e,["text"]);this.labelGroup=t.maybeAppendByClassName(N.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(N.label,(function(){return(0,A.S)(n)})).styles(i)},e.prototype.renderValue=function(t){var e=this,n=(0,a.zs)(this.attributes,"value"),i=n.text,o=(0,r._T)(n,["text"]);this.valueGroup=t.maybeAppendByClassName(N.valueGroup,"g").style("zIndex",0),(0,S.z)(this.showValue,this.valueGroup,(function(){e.valueGroup.maybeAppendByClassName(N.value,(function(){return(0,A.S)(i)})).styles(o)}))},e.prototype.renderBackground=function(t){var e=this.shape,n=e.width,i=e.height,o=(0,a.zs)(this.attributes,"background");this.background=t.maybeAppendByClassName(N.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(N.background,"rect").styles((0,r.pi)({width:n,height:i},o))},e.prototype.adjustLayout=function(){var t=this.layout,e=t.labelWidth,n=t.valueWidth,i=t.height,a=(0,r.CR)(t.position,3),o=a[0],s=a[1],u=a[2],l=i/2;this.markerGroup.styles({transform:"translate(".concat(o,", ").concat(l,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(s,", ").concat(l,")")}),(0,P.O)(this.labelGroup.select(N.label.class).node(),Math.ceil(e)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(u,", ").concat(l,")")}),(0,P.O)(this.valueGroup.select(N.value.class).node(),Math.ceil(n)))},e.prototype.render=function(t,e){var n=(0,o.Ys)(e),r=t.x,i=void 0===r?0:r,a=t.y,s=void 0===a?0:a;n.styles({transform:"translate(".concat(i,", ").concat(s,")")}),this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.adjustLayout()},e}(i.w),Z=(0,f.A)({page:"item-page",navigator:"navigator",item:"item"},"items"),O=function(t,e,n){return void 0===n&&(n=!0),t?e(t):n},L=function(t){function e(e){var n=t.call(this,e,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:c,mouseenter:c,mouseleave:c})||this;return n.navigatorShape=[0,0],n}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var t=this.attributes,e=t.gridRow,n=t.gridCol,r=t.data;if(!e&&!n)throw new Error("gridRow and gridCol can not be set null at the same time");return e&&n?[e,n]:e?[e,r.length]:[r.length,n]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var t=this.attributes,e=t.data,n=t.layout,i=(0,a.zs)(this.attributes,"item"),o=e.map((function(t,a){var o=t.id,s=void 0===o?a:o,u=t.label,l=t.value;return{id:"".concat(s),index:a,style:(0,r.pi)({layout:n,labelText:u,valueText:l},Object.fromEntries(Object.entries(i).map((function(n){var i=(0,r.CR)(n,2),o=i[0],s=i[1];return[o,(0,d.S)(s,[t,a,e])]}))))}}));return o},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var t=this,e=this.attributes,n=e.orientation,i=e.width,a=e.rowPadding,o=e.colPadding,s=(0,r.CR)(this.navigatorShape,1)[0],u=(0,r.CR)(this.grid,2),l=u[0],c=u[1],h=c*l,f=0;return this.pageViews.children.map((function(e,u){var d,p,v=Math.floor(u/h),g=u%h,y=t.ifHorizontal(c,l),m=[Math.floor(g/y),g%y];"vertical"===n&&m.reverse();var b=(0,r.CR)(m,2),x=b[0],k=b[1],w=(i-s-(c-1)*o)/c,E=e.getBBox().height,M=(0,r.CR)([0,0],2),T=M[0],S=M[1];return"horizontal"===n?(T=(d=(0,r.CR)([f,x*(E+a)],2))[0],S=d[1],f=k===c-1?0:f+w+o):(T=(p=(0,r.CR)([k*(w+o),f],2))[0],S=p[1],f=x===l-1?0:f+E+a),{page:v,index:u,row:x,col:k,pageIndex:g,width:w,height:E,x:T,y:S}}))},e.prototype.getFlexLayout=function(){var t=this.attributes,e=t.width,n=t.height,i=t.rowPadding,a=t.colPadding,o=(0,r.CR)(this.navigatorShape,1)[0],s=(0,r.CR)(this.grid,2),u=s[0],l=s[1],c=(0,r.CR)([e-o,n],2),h=c[0],f=c[1],d=(0,r.CR)([0,0,0,0,0,0,0,0],8),p=d[0],v=d[1],g=d[2],y=d[3],m=d[4],b=d[5],x=d[6],k=d[7];return this.pageViews.children.map((function(t,e){var n,o,s,c,d=t.getBBox(),w=d.width,E=d.height,M=0===x?0:a,T=x+M+w;return T<=h&&O(m,(function(t){return t<l}))?(n=(0,r.CR)([x+M,k,T],3),p=n[0],v=n[1],x=n[2],{width:w,height:E,x:p,y:v,page:g,index:e,pageIndex:y++,row:b,col:m++}):(o=(0,r.CR)([b+1,0,0,k+E+i],4),b=o[0],m=o[1],x=o[2],(k=o[3])+E<=f&&O(b,(function(t){return t<u}))?(s=(0,r.CR)([x,k,w],3),p=s[0],v=s[1],x=s[2],{width:w,height:E,x:p,y:v,page:g,index:e,pageIndex:y++,row:b,col:m++}):(c=(0,r.CR)([0,0,w,0,g+1,0,0,0],8),p=c[0],v=c[1],x=c[2],k=c[3],g=c[4],y=c[5],b=c[6],m=c[7],{width:w,height:E,x:p,y:v,page:g,index:e,pageIndex:y++,row:b,col:m++}))}))},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var t="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,e=t.call(this);return e.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):e},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,e){var n=this.attributes.orientation;return(0,E._h)(n,t,e)},e.prototype.flattenPage=function(t){t.querySelectorAll(Z.item.class).forEach((function(e){t.appendChild(e)})),t.querySelectorAll(Z.page.class).forEach((function(e){t.removeChild(e).destroy()}))},e.prototype.renderItems=function(t){var e=this.attributes,n=e.click,r=e.mouseenter,i=e.mouseleave;this.flattenPage(t);var a=this.dispatchCustomEvent.bind(this);(0,o.Ys)(t).selectAll(Z.item.class).data(this.renderData,(function(t){return t.id})).join((function(t){return t.append((function(t){var e=t.style;return new R({style:e})})).attr("className",Z.item.name).on("click",(function(){null==n||n(this),a("itemClick",{item:this})})).on("pointerenter",(function(){null==r||r(this),a("itemMouseenter",{item:this})})).on("pointerleave",(function(){null==i||i(this),a("itemMouseleave",{item:this})}))}),(function(t){return t.each((function(t){var e=t.style;this.update(e)}))}),(function(t){return t.remove()}))},e.prototype.relayoutNavigator=function(){var t,e=this.attributes,n=e.layout,i=e.width,a=(null===(t=this.pageViews.children[0])||void 0===t?void 0:t.getBBox().height)||0,o=(0,r.CR)(this.navigatorShape,2),s=o[0],u=o[1];this.navigator.update("grid"===n?{pageWidth:i-s,pageHeight:a-u}:{})},e.prototype.adjustLayout=function(){var t,e,n=this,i=Object.entries((t=this.itemsLayout,e="page",t.reduce((function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t}),{}))).map((function(t){var e=(0,r.CR)(t,2);return{page:e[0],layouts:e[1]}})),a=(0,r.ev)([],(0,r.CR)(this.navigator.getContainer().children),!1);i.forEach((function(t){var e=t.layouts,r=n.pageViews.appendChild(new l.ZA({className:Z.page.name}));e.forEach((function(t){var e=t.x,n=t.y,i=t.index,o=t.width,s=t.height,u=a[i];r.appendChild(u),(0,h.Z)(u,"__layout__",t),u.update({x:e,y:n,width:o,height:s})}))})),this.relayoutNavigator()},e.prototype.renderNavigator=function(t){var e=this.attributes.orientation,n=(0,a.zs)(this.attributes,"nav"),r=(0,p.n)({orientation:e},n),i=this;return t.selectAll(Z.navigator.class).data(["nav"]).join((function(t){return t.append((function(){return new w({style:r})})).attr("className",Z.navigator.name).each((function(){i.navigator=this}))}),(function(t){return t.each((function(){this.update(r)}))}),(function(t){return t.remove()})),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(t,e){var n=this.attributes.data;if(n&&0!==n.length){var r=this.renderNavigator((0,o.Ys)(e));this.renderItems(r.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(t,e){var n=new l.Aw(t,{detail:e});this.dispatchEvent(n)},e}(i.w),_=n(47334),I=function(t){function e(e){return t.call(this,e,_.bD)||this}return(0,r.ZT)(e,t),e.prototype.renderTitle=function(t,e,n){var i=this.attributes,o=i.showTitle,s=i.titleText,l=(0,a.zs)(this.attributes,"title"),c=(0,r.CR)((0,a.Hm)(l),2),h=c[0],f=c[1];this.titleGroup=t.maybeAppendByClassName(_.Ec.titleGroup,"g").styles(f);var d=(0,r.pi)((0,r.pi)({width:e,height:n},h),{text:o?s:""});this.title=this.titleGroup.maybeAppendByClassName(_.Ec.title,(function(){return new u.Dx({style:d})})).update(d)},e.prototype.renderItems=function(t,e){var n=e.x,i=e.y,s=e.width,u=e.height,l=(0,a.zs)(this.attributes,"title",!0),c=(0,r.CR)((0,a.Hm)(l),2),h=c[0],f=c[1],d=(0,r.pi)((0,r.pi)({},h),{width:s,height:u,x:0,y:0});this.itemsGroup=t.maybeAppendByClassName(_.Ec.itemsGroup,"g").styles((0,r.pi)((0,r.pi)({},f),{transform:"translate(".concat(n,", ").concat(i,")")}));var p=this;this.itemsGroup.selectAll(_.Ec.items.class).data(["items"]).join((function(t){return t.append((function(){return new L({style:d})})).attr("className",_.Ec.items.name).each((function(){p.items=(0,o.Ys)(this)}))}),(function(t){return t.update(d)}),(function(t){return t.remove()}))},e.prototype.adjustLayout=function(){if(this.attributes.showTitle){var t=this.title.node().getAvailableSpace(),e=t.x,n=t.y;this.itemsGroup.node().style.transform="translate(".concat(e,", ").concat(n,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.showTitle,n=t.width,r=t.height;return e?this.title.node().getAvailableSpace():new s.b(0,0,n,r)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e,n,r=null===(e=this.title)||void 0===e?void 0:e.node(),i=null===(n=this.items)||void 0===n?void 0:n.node();return r&&i?(0,u.jY)(r,i):t.prototype.getBBox.call(this)},e.prototype.render=function(t,e){var n=this.attributes,r=n.width,i=n.height,a=n.x,s=void 0===a?0:a,u=n.y,l=void 0===u?0:u,c=(0,o.Ys)(e);e.style.transform="translate(".concat(s,", ").concat(l,")"),this.renderTitle(c,r,i),this.renderItems(c,this.availableSpace),this.adjustLayout()},e}(i.w)},47334:function(t,e,n){"use strict";n.d(e,{B0:function(){return l},D_:function(){return c},Ec:function(){return h},bD:function(){return u}});var r=n(8126),i=n(33016),a=n(79274),o=n(52774),s={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},u=(0,r.n)({},s,{}),l=(0,r.n)({},s,(0,i.dq)(o.x,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),c=.01,h=(0,a.A)({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend")},52774:function(t,e,n){"use strict";n.d(e,{H:function(){return d},x:function(){return f}});var r=n(97582),i=n(5951),a=n(79274),o=n(54015),s=n(47772),u=n(33016),l=n(86224),c=n(52644),h=(0,a.A)({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),f={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},d=function(t){function e(e){return t.call(this,e,f)||this}return(0,r.ZT)(e,t),e.prototype.render=function(t,e){var n=(0,o.Ys)(e).maybeAppendByClassName(h.markerGroup,"g");this.renderMarker(n);var r=(0,o.Ys)(e).maybeAppendByClassName(h.labelGroup,"g");this.renderLabel(r)},e.prototype.renderMarker=function(t){var e=this,n=this.attributes,i=n.orientation,a=n.markerSymbol,o=void 0===a?(0,c._h)(i,"horizontalHandle","verticalHandle"):a;(0,s.z)(!!o,t,(function(t){var n=(0,u.zs)(e.attributes,"marker"),i=(0,r.pi)({symbol:o},n);e.marker=t.maybeAppendByClassName(h.marker,(function(){return new l.J({style:i})})).update(i)}))},e.prototype.renderLabel=function(t){var e=this,n=this.attributes,i=n.showLabel,a=n.orientation,o=n.spacing,l=void 0===o?0:o,f=n.formatter;(0,s.z)(i,t,(function(t){var n,i=(0,u.zs)(e.attributes,"label"),o=i.text,s=(0,r._T)(i,["text"]),d=(null===(n=t.select(h.marker.class))||void 0===n?void 0:n.node().getBBox())||{},p=d.width,v=void 0===p?0:p,g=d.height,y=void 0===g?0:g,m=(0,r.CR)((0,c._h)(a,[0,y+l,"center","top"],[v+l,0,"start","middle"]),4),b=m[0],x=m[1],k=m[2],w=m[3];t.maybeAppendByClassName(h.label,"text").styles((0,r.pi)((0,r.pi)({},s),{x:b,y:x,text:f(o).toString(),textAlign:k,textBaseline:w}))}))},e}(i.w)},52644:function(t,e,n){"use strict";n.d(e,{GU:function(){return o},_h:function(){return s},jN:function(){return a}});var r=n(97582),i=n(86224);function a(t,e,n){return n+Math.round((t-n)/e)*e}i.J.registerSymbol("hiddenHandle",(function(t,e,n){var r=1.4*n;return[["M",t-n,e-r],["L",t+n,e-r],["L",t+n,e+r],["L",t-n,e+r],["Z"]]})),i.J.registerSymbol("verticalHandle",(function(t,e,n){var r=1.4*n,i=n/2,a=n/6,o=t+.4*r;return[["M",t,e],["L",o,e+i],["L",t+r,e+i],["L",t+r,e-i],["L",o,e-i],["Z"],["M",o,e+a],["L",t+r-2,e+a],["M",o,e-a],["L",t+r-2,e-a]]})),i.J.registerSymbol("horizontalHandle",(function(t,e,n){var r=1.4*n,i=n/2,a=n/6,o=e+.4*r;return[["M",t,e],["L",t-i,o],["L",t-i,e+r],["L",t+i,e+r],["L",t+i,o],["Z"],["M",t-a,o],["L",t-a,e+r-2],["M",t+a,o],["L",t+a,e+r-2]]}));function o(t,e,n,i){var a;void 0===i&&(i=4);var o=(0,r.CR)(t,2),s=o[0],u=o[1],l=(0,r.CR)(e,2),c=l[0],h=l[1],f=(0,r.CR)(n,2),d=f[0],p=f[1],v=(0,r.CR)([c,h],2),g=v[0],y=v[1],m=y-g;return g>y&&(g=(a=(0,r.CR)([y,g],2))[0],y=a[1]),m>u-s?[s,u]:g<s?d===s&&p===y?[s,y]:[s,m+s]:y>u?p===u&&d===g?[g,u]:[u-m,u]:[g,y]}function s(t,e,n){return void 0===t&&(t="horizontal"),"horizontal"===t?e:n}},86224:function(t,e,n){"use strict";n.d(e,{J:function(){return f}});var r=n(97582),i=n(45607),a=n(5951),o=n(47772),s=n(54015),u=n(56546),l=n(4637),c=n(76714);function h(t){var e=function(t){var e="default";if((0,l.Z)(t)&&t instanceof Image)e="image";else if((0,i.Z)(t))e="symbol";else if((0,c.Z)(t)){var n=new RegExp("data:(image|text)");e=t.match(n)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?"url":"symbol"}return e}(t);return["base64","url","image"].includes(e)?"image":t&&"symbol"===e?"path":null}var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.render=function(t,n){var a=t.x,u=void 0===a?0:a,l=t.y,c=void 0===l?0:l,f=this.getSubShapeStyle(t),d=f.symbol,p=f.size,v=void 0===p?16:p,g=(0,r._T)(f,["symbol","size"]),y=h(d);(0,o.z)(!!y,(0,s.Ys)(n),(function(t){t.maybeAppendByClassName("marker",y).attr("className","marker ".concat(y,"-marker")).call((function(t){if("image"===y){var n=2*v;t.styles({img:d,width:n,height:n,x:u-v,y:c-v})}else{n=v/2;var a=(0,i.Z)(d)?d:e.getSymbol(d);t.styles((0,r.pi)({d:null==a?void 0:a(u,c,n)},g))}}))}))},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(t,n){e.MARKER_SYMBOL_MAP.set(t,n)},e.getSymbol=function(t){return e.MARKER_SYMBOL_MAP.get(t)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(a.w);f.registerSymbol("cross",u.kC),f.registerSymbol("hyphen",u.Zb),f.registerSymbol("line",u.jv),f.registerSymbol("plus",u.PD),f.registerSymbol("tick",u.Ky),f.registerSymbol("circle",u.Xw),f.registerSymbol("point",u.xm),f.registerSymbol("bowtie",u.XF),f.registerSymbol("hexagon",u.bL),f.registerSymbol("square",u.h6),f.registerSymbol("diamond",u.tf),f.registerSymbol("triangle",u.cP),f.registerSymbol("triangle-down",u.MG),f.registerSymbol("line",u.jv),f.registerSymbol("dot",u.AK),f.registerSymbol("dash",u.P2),f.registerSymbol("smooth",u.ip),f.registerSymbol("hv",u.hv),f.registerSymbol("vh",u.vh),f.registerSymbol("hvh",u.t7),f.registerSymbol("vhv",u.sN)},56546:function(t,e,n){"use strict";n.d(e,{AK:function(){return g},Ky:function(){return d},LI:function(){return E},MG:function(){return u},P2:function(){return y},PD:function(){return p},XF:function(){return c},Xw:function(){return r},Zb:function(){return v},bL:function(){return l},cP:function(){return s},h6:function(){return a},hv:function(){return b},ip:function(){return m},jv:function(){return h},kC:function(){return f},sN:function(){return w},t7:function(){return k},tf:function(){return o},vh:function(){return x},xm:function(){return i}});var r=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},i=r,a=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},o=function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},s=function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},u=function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]},l=function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},c=function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},h=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},f=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},d=function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},p=function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},v=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},g=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},y=g,m=function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},b=function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},x=function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},k=function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]};function w(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}var E=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]}},42100:function(t,e,n){"use strict";n.d(e,{Ec:function(){return s},Qi:function(){return i},b0:function(){return a},fI:function(){return o}});var r=n(79274),i={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},a={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},o={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},s=(0,r.A)({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider")},77687:function(t,e,n){"use strict";n.d(e,{H:function(){return f}});var r=n(97582),i=n(5951),a=n(79274),o=n(54015),s=n(33016),u=n(47772),l=n(42100),c=(0,a.A)({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.render=function(t,e){var n=t.x,i=t.y,a=t.size,s=void 0===a?10:a,u=t.radius,l=void 0===u?s/4:u,h=t.orientation,f=(0,r._T)(t,["x","y","size","radius","orientation"]),d=s,p=2.4*d,v=(0,o.Ys)(e).maybeAppendByClassName(c.iconRect,"rect").styles((0,r.pi)((0,r.pi)({},f),{width:d,height:p,radius:l,x:n-d/2,y:i-p/2,transformOrigin:"center"})),g=n+1/3*d-d/2,y=n+2/3*d-d/2,m=i+1/4*p-p/2,b=i+3/4*p-p/2;v.maybeAppendByClassName("".concat(c.iconLine,"-1"),"line").styles((0,r.pi)({x1:g,x2:g,y1:m,y2:b},f)),v.maybeAppendByClassName("".concat(c.iconLine,"-2"),"line").styles((0,r.pi)({x1:y,x2:y,y1:m,y2:b},f)),"vertical"===h&&(v.node().style.transform="rotate(90)")},e}(i.w),f=function(t){function e(e){return t.call(this,e,l.fI)||this}return(0,r.ZT)(e,t),e.prototype.renderLabel=function(t){var e=this,n=this.attributes,i=n.x,a=n.y,h=n.showLabel,f=(0,s.zs)(this.attributes,"label"),d=f.x,p=void 0===d?0:d,v=f.y,g=void 0===v?0:v,y=f.transform,m=f.transformOrigin,b=(0,r._T)(f,["x","y","transform","transformOrigin"]),x=(0,r.CR)((0,s.Hm)(b,[]),2),k=x[0],w=x[1],E=(0,o.Ys)(t).maybeAppendByClassName(c.labelGroup,"g").styles(w),M=(0,r.pi)((0,r.pi)({},l.b0),k),T=M.text,S=(0,r._T)(M,["text"]);(0,u.z)(!!h,E,(function(t){e.label=t.maybeAppendByClassName(c.label,"text").styles((0,r.pi)((0,r.pi)({},S),{x:i+p,y:a+g,transform:y,transformOrigin:m,text:"".concat(T)})),e.label.on("mousedown",(function(t){t.stopPropagation()})),e.label.on("touchstart",(function(t){t.stopPropagation()}))}))},e.prototype.renderIcon=function(t){var e=this.attributes,n=e.x,i=e.y,a=e.orientation,u=e.type,f=(0,r.pi)((0,r.pi)({x:n,y:i,orientation:a},l.Qi),(0,s.zs)(this.attributes,"icon")),d=this.attributes.iconShape,p=void 0===d?function(){return new h({style:f})}:d;(0,o.Ys)(t).maybeAppendByClassName(c.iconGroup,"g").selectAll(c.icon.class).data([p]).join((function(t){return t.append("string"==typeof p?p:function(){return p(u)}).attr("className",c.icon.name)}),(function(t){return t.update(f)}),(function(t){return t.remove()}))},e.prototype.render=function(t,e){this.renderIcon(e),this.renderLabel(e)},e}(i.w)},24979:function(t,e,n){"use strict";n.d(e,{i:function(){return G}});var r=n(97582),i=n(1242),a=n(81957),o=n(45631),s=n(5951),u=n(8523),l=n(33016),c=n(26406),h=n(62191),f=n(54015),d=n(47772),p=n(48951),v=n(36380),g=n(88944),y=n(83207),m=n(25897),b=n(5199),x=n(45607),k=n(83787),w=n(8126),E=function(t){function e(e){var n=this,a=e.style,o=(0,r._T)(e,["style"]);return(n=t.call(this,(0,k.Z)({},{type:"column"},(0,r.pi)({style:a},o)))||this).columnsGroup=new i.ZA({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return(0,r.ZT)(e,t),e.prototype.render=function(){var t=this.attributes,e=t.columns,n=t.x,r=t.y;this.columnsGroup.style.transform="translate(".concat(n,", ").concat(r,")"),(0,f.Ys)(this.columnsGroup).selectAll(".column").data(e.flat()).join((function(t){return t.append("rect").attr("className","column").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.attr(t)}))}),(function(t){return t.remove()}))},e.prototype.update=function(t){this.attr((0,w.n)({},this.attributes,t)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(i.s$),M=function(t){function e(e){var n=this,a=e.style,o=(0,r._T)(e,["style"]);return(n=t.call(this,(0,k.Z)({},{type:"lines"},(0,r.pi)({style:a},o)))||this).linesGroup=n.appendChild(new i.ZA),n.areasGroup=n.appendChild(new i.ZA),n.render(),n}return(0,r.ZT)(e,t),e.prototype.render=function(){var t=this.attributes,e=t.lines,n=t.areas,r=t.x,i=t.y;this.style.transform="translate(".concat(r,", ").concat(i,")"),e&&this.renderLines(e),n&&this.renderAreas(n)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(t){this.attr((0,w.n)({},this.attributes,t)),this.render()},e.prototype.renderLines=function(t){(0,f.Ys)(this.linesGroup).selectAll(".line").data(t).join((function(t){return t.append("path").attr("className","line").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.attr(t)}))}),(function(t){return t.remove()}))},e.prototype.renderAreas=function(t){(0,f.Ys)(this.linesGroup).selectAll(".area").data(t).join((function(t){return t.append("path").attr("className","area").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.style(t)}))}),(function(t){return t.remove()}))},e}(i.s$),T=n(30335),S=n(80264);function C(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var i=!!e,a=[],o=0,s=t.length;o<s;o+=2)a.push([t[o],t[o+1]]);var u,l,c,h=function(t,e,n,i){var a,o,s,u,l,c,h=[],f=!!i,d=[1/0,1/0],p=[-1/0,-1/0];if(f){d=(a=(0,r.CR)(i,2))[0],p=a[1];for(var v=0,g=t.length;v<g;v+=1){var y=t[v];d=(0,S.VV)(d,y),p=(0,S.Fp)(p,y)}}v=0;for(var m=t.length;v<m;v+=1)if(y=t[v],0!==v||n)if(v!==m-1||n){o=t[[v?v-1:m-1,v-1][n?0:1]],s=t[n?(v+1)%m:v+1];var b=[0,0];b=(0,S.lu)(s,o),b=(0,S.bA)(b,e);var x=(0,S.TE)(y,o),k=(0,S.TE)(y,s),w=x+k;0!==w&&(x/=w,k/=w);var E=(0,S.bA)(b,-x),M=(0,S.bA)(b,k);l=(0,S.IH)(y,E),u=(0,S.IH)(y,M),u=(0,S.VV)(u,(0,S.Fp)(s,y)),u=(0,S.Fp)(u,(0,S.VV)(s,y)),E=(0,S.lu)(u,y),E=(0,S.bA)(E,-x/k),l=(0,S.IH)(y,E),l=(0,S.VV)(l,(0,S.Fp)(o,y)),l=(0,S.Fp)(l,(0,S.VV)(o,y)),M=(0,S.lu)(y,l),M=(0,S.bA)(M,k/x),u=(0,S.IH)(y,M),f&&(l=(0,S.Fp)(l,d),l=(0,S.VV)(l,p),u=(0,S.Fp)(u,d),u=(0,S.VV)(u,p)),h.push(c),h.push(l),c=u}else l=y,h.push(c),h.push(l);else c=y;return n&&h.push(h.shift()),h}(a,.4,i,n),f=a.length,d=[];for(o=0;o<f-1;o+=1)u=h[2*o],l=h[2*o+1],c=a[o+1],d.push(["C",u[0],u[1],l[0],l[1],c[0],c[1]]);return i&&(u=h[f],l=h[f+1],c=(0,r.CR)(a,1)[0],d.push(["C",u[0],u[1],l[0],l[1],c[0],c[1]])),d}function A(t,e){void 0===e&&(e=!1);var n=e?t.length-1:0,i=t.map((function(t,e){return(0,r.ev)([e===n?"M":"L"],(0,r.CR)(t),!1)}));return e?i.reverse():i}function P(t,e){if(void 0===e&&(e=!1),t.length<=2)return A(t);for(var n=[],i=t.length,a=0;a<i;a+=1){var o=e?t[i-a-1]:t[a];(0,T.Z)(o,n.slice(-2))||n.push.apply(n,(0,r.ev)([],(0,r.CR)(o),!1))}var s=C(n,!1);return e?s.unshift((0,r.ev)(["M"],(0,r.CR)(t[i-1]),!1)):s.unshift((0,r.ev)(["M"],(0,r.CR)(t[0]),!1)),s}function N(t,e,n){var r=(0,y.Z)(t);return r.push(["L",e,n],["L",0,n],["Z"]),r}var R=n(71523),Z=function(t,e){if((0,b.Z)(t)){for(var n,r=1/0,i=0;i<t.length;i++){var a=t[i],o=(0,x.Z)(e)?e(a):a[e];o<r&&(n=a,r=o)}return n}},O=n(13882),L=function(t,e){if((0,b.Z)(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var a=t[i],o=(0,x.Z)(e)?e(a):a[e];o>r&&(n=a,r=o)}return n}};function _(t){return 0===t.length?[0,0]:[(0,R.Z)(Z(t,(function(t){return(0,R.Z)(t)||0}))),(0,O.Z)(L(t,(function(t){return(0,O.Z)(t)||0})))]}function I(t){for(var e=(0,y.Z)(t),n=e[0].length,i=(0,r.CR)([Array(n).fill(0),Array(n).fill(0)],2),a=i[0],o=i[1],s=0;s<e.length;s+=1)for(var u=e[s],l=0;l<n;l+=1)u[l]>=0?(u[l]+=a[l],a[l]=u[l]):(u[l]+=o[l],o[l]=u[l]);return e}var D=function(t){function e(e){return t.call(this,e,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||0===(null==t?void 0:t.length))return[[]];var e=(0,y.Z)(t);return(0,m.Z)(e[0])?[e]:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?I(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var t=this.scales.y,e=(0,r.CR)(t.getOptions().domain||[0,0],2),n=e[0],i=e[1];return i<0?t.map(i):t.map(n<0?0:n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var t=this.attributes;return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var t=this,e=this.attributes,n=e.type,i=e.isStack,o=e.smooth;if("line"!==n)throw new Error("linesStyle can only be used in line type");var s=(0,l.zs)(this.attributes,"area"),u=(0,l.zs)(this.attributes,"line"),c=this.containerShape.width,h=this.data;if(0===h[0].length)return{lines:[],areas:[]};var f=this.scales,d=function(t,e){var n,i=e.x,o=e.y,s=(0,r.CR)(o.getOptions().range||[0,0],2),u=s[0],l=s[1];return l>u&&(n=(0,r.CR)([u,l],2),l=n[0],u=n[1]),t.map((function(t){return t.map((function(t,e){return[i.map(e),(0,a.Z)(o.map(t),l,u)]}))}))}(h,{type:"line",x:f.x,y:f.y}),p=[];if(s){var v=this.baseline;p=i?o?function(t,e,n){for(var i=[],a=t.length-1;a>=0;a-=1){var o=t[a],s=P(o),u=void 0;if(0===a)u=N(s,e,n);else{var l=P(t[a-1],!0),c=o[0];l[0][0]="L",u=(0,r.ev)((0,r.ev)((0,r.ev)([],(0,r.CR)(s),!1),(0,r.CR)(l),!1),[(0,r.ev)(["M"],(0,r.CR)(c),!1),["Z"]],!1)}i.push(u)}return i}(d,c,v):function(t,e,n){for(var i=[],a=t.length-1;a>=0;a-=1){var o=A(t[a]),s=void 0;if(0===a)s=N(o,e,n);else{var u=A(t[a-1],!0);u[0][0]="L",s=(0,r.ev)((0,r.ev)((0,r.ev)([],(0,r.CR)(o),!1),(0,r.CR)(u),!1),[["Z"]],!1)}i.push(s)}return i}(d,c,v):function(t,e,n,r){return t.map((function(t){return N(e?P(t):A(t),n,r)}))}(d,o,c,v)}return{lines:d.map((function(e,n){return(0,r.pi)({stroke:t.getColor(n),d:o?P(e):A(e)},u)})),areas:p.map((function(e,n){return(0,r.pi)({d:e,fill:t.getColor(n)},s)}))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var t=this,e=(0,l.zs)(this.attributes,"column"),n=this.attributes,i=n.isStack,a=n.type,o=n.scale;if("column"!==a)throw new Error("columnsStyle can only be used in column type");var s=this.containerShape.height,u=this.rawData;if(!u)return{columns:[]};i&&(u=I(u));var c=this.createScales(u),h=c.x,f=c.y,d=(0,r.CR)(_(u),2),p=d[0],g=d[1],y=new v.b({domain:[0,g-(p>0?0:p)],range:[0,s*o]}),m=h.getBandWidth(),b=this.rawData;return{columns:u.map((function(n,a){return n.map((function(n,o){var s=m/u.length;return(0,r.pi)((0,r.pi)({fill:t.getColor(a)},e),i?{x:h.map(o),y:f.map(n),width:m,height:y.map(b[a][o])}:{x:h.map(o)+s*a,y:n>=0?f.map(n):f.map(0),width:s,height:y.map(Math.abs(n))})}))}))}},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){(0,f.OV)(e,".container","rect").attr("className","container").node();var n=t.type,i=t.x,a=t.y,o="spark".concat(n),s=(0,r.pi)({x:i,y:a},"line"===n?this.linesStyle:this.columnsStyle);(0,f.Ys)(e).selectAll(".spark").data([n]).join((function(t){return t.append((function(t){return"line"===t?new M({className:o,style:s}):new E({className:o,style:s})})).attr("className","spark ".concat(o))}),(function(t){return t.update(s)}),(function(t){return t.remove()}))},e.prototype.getColor=function(t){var e=this.attributes.color;return(0,b.Z)(e)?e[t%e.length]:(0,x.Z)(e)?e.call(null,t):e},e.prototype.createScales=function(t){var e,n,i=this.attributes,a=i.type,o=i.scale,s=i.range,u=void 0===s?[]:s,l=i.spacing,c=this.containerShape,h=c.width,f=c.height,d=(0,r.CR)(_(t),2),p=d[0],y=d[1],m=new v.b({domain:[null!==(e=u[0])&&void 0!==e?e:p,null!==(n=u[1])&&void 0!==n?n:y],range:[f,f*(1-o)]});return"line"===a?{type:a,x:new v.b({domain:[0,t[0].length-1],range:[0,h]}),y:m}:{type:a,x:new g.t({domain:t[0].map((function(t,e){return e})),range:[0,h],paddingInner:l,paddingOuter:l/2,align:.5}),y:m}},e.tag="sparkline",e}(s.w),F=n(42100),B=n(77687),G=function(t){function e(e){var n=t.call(this,e,(0,r.pi)((0,r.pi)((0,r.pi)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(t){return t.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},(0,l.dq)(F.fI,"handle")),(0,l.dq)(F.Qi,"handleIcon")),(0,l.dq)(F.b0,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(t){return function(e){e.stopPropagation(),n.target=t,n.prevPos=n.getOrientVal((0,c.s)(e));var r=n.availableSpace,i=r.x,a=r.y,o=n.getBBox(),s=o.x,u=o.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([i,a])-n.getOrientVal([+s,+u])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(t){var e=n.attributes,r=e.slidable,i=e.brushable,a=e.type;t.stopPropagation();var o=n.getOrientVal((0,c.s)(t)),s=o-n.prevPos;if(s){var u=n.getRatio(s);switch(n.target){case"start":r&&n.setValuesOffset(u);break;case"end":r&&n.setValuesOffset(0,u);break;case"selection":r&&n.setValuesOffset(u,u);break;case"track":if(!i)return;n.selectionWidth+=u,"range"===a?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0)}n.prevPos=o}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(t){var e=n.attributes,r=e.onChange,a=e.type,o="range"===a?t:t[1],s="range"===a?n.getValues():n.getValues()[1],u=new i.Aw("valuechange",{detail:{oldValue:o,value:s}});n.dispatchEvent(u),null==r||r(s)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(t){this.attributes.values=this.clampValues(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){if("horizontal"!==this.attributes.orientation)return null;var t=(0,l.zs)(this.attributes,"sparkline");return(0,r.pi)((0,r.pi)({zIndex:0},this.availableSpace),t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t=this.attributes,e=t.trackLength,n=t.trackSize,i=(0,r.CR)(this.getOrientVal([[e,n],[n,e]]),2);return{width:i[0],height:i[1]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=(t.x,t.y,t.padding),n=(0,r.CR)((0,h.j)(e),4),i=n[0],a=n[1],o=n[2],s=n[3],u=this.shape;return{x:s,y:i,width:u.width-(s+a),height:u.height-(i+o)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1),this.attributes.values=t;var n=!1!==e&&this.attributes.animate;this.updateSelectionArea(n),this.updateHandlesPosition(n)},e.prototype.updateSelectionArea=function(t){var e=this.calcSelectionArea();this.foregroundGroup.selectAll(F.Ec.selection.class).each((function(n,r){(0,o.eR)(this,e[r],t)}))},e.prototype.updateHandlesPosition=function(t){this.attributes.showHandle&&(this.startHandle&&(0,o.eR)(this.startHandle,this.getHandleStyle("start"),t),this.endHandle&&(0,o.eR)(this.endHandle,this.getHandleStyle("end"),t))},e.prototype.innerSetValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1);var n=this.values,r=this.clampValues(t);this.attributes.values=r,this.setValues(r),e&&this.onValueChange(n)},e.prototype.renderTrack=function(t){var e=this.attributes,n=e.x,i=e.y,a=(0,l.zs)(this.attributes,"track");this.trackShape=(0,f.Ys)(t).maybeAppendByClassName(F.Ec.track,"rect").styles((0,r.pi)((0,r.pi)({x:n,y:i},this.shape),a))},e.prototype.renderBrushArea=function(t){var e=this.attributes,n=e.x,i=e.y,a=e.brushable;this.brushArea=(0,f.Ys)(t).maybeAppendByClassName(F.Ec.brushArea,"rect").styles((0,r.pi)({x:n,y:i,fill:"transparent",cursor:a?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(t){var e=this,n=this.attributes,i=n.x,a=n.y,o=n.orientation,s=(0,f.Ys)(t).maybeAppendByClassName(F.Ec.sparklineGroup,"g");(0,d.z)("horizontal"===o,s,(function(t){var n=(0,r.pi)((0,r.pi)({},e.sparklineStyle),{x:i,y:a});t.maybeAppendByClassName(F.Ec.sparkline,(function(){return new D({style:n})})).update(n)}))},e.prototype.renderHandles=function(){var t,e=this,n=this.attributes,r=n.showHandle,i=n.type,a=r?"range"===i?["start","end"]:["end"]:[],o=this;null===(t=this.foregroundGroup)||void 0===t||t.selectAll(F.Ec.handle.class).data(a.map((function(t){return{type:t}})),(function(t){return t.type})).join((function(t){return t.append((function(t){var n=t.type;return new B.H({style:e.getHandleStyle(n)})})).each((function(t){var e=t.type;this.attr("class","".concat(F.Ec.handle.name," ").concat(e,"-handle"));var n="".concat(e,"Handle");o[n]=this,this.addEventListener("pointerdown",o.onDragStart(e))}))}),(function(t){return t.each((function(t){var e=t.type;this.update(o.getHandleStyle(e))}))}),(function(t){return t.each((function(t){var e=t.type,n="".concat(e,"Handle");o[n]=void 0})).remove()}))},e.prototype.renderSelection=function(t){var e=this.attributes,n=e.x,i=e.y,a=e.type,o=e.selectionType;this.foregroundGroup=(0,f.Ys)(t).maybeAppendByClassName(F.Ec.foreground,"g");var s=(0,l.zs)(this.attributes,"selection"),u=function(t){return t.style("visibility",(function(t){return t.show?"visible":"hidden"})).style("cursor",(function(t){return"select"===o?"grab":"invert"===o?"crosshair":"default"})).styles((0,r.pi)((0,r.pi)({},s),{transform:"translate(".concat(n,", ").concat(i,")")}))},c=this;this.foregroundGroup.selectAll(F.Ec.selection.class).data("value"===a?[]:this.calcSelectionArea().map((function(t,e){return{style:(0,r.pi)({},t),index:e,show:"select"===o?1===e:1!==e}})),(function(t){return t.index})).join((function(t){return t.append("rect").attr("className",F.Ec.selection.name).call(u).each((function(t,e){var n=this;1===e?(c.selectionShape=(0,f.Ys)(this),this.on("pointerdown",(function(t){n.attr("cursor","grabbing"),c.onDragStart("selection")(t)})),c.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),c.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),c.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",(function(){n.attr("cursor","grabbing")})),this.addEventListener("pointerup",(function(){n.attr("cursor","pointer")})),this.addEventListener("pointerover",(function(){n.attr("cursor","pointer")}))):this.on("pointerdown",c.onDragStart("track"))}))}),(function(t){return t.call(u)}),(function(t){return t.remove()})),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(t,e){this.renderTrack(e),this.renderSparkline(e),this.renderBrushArea(e),this.renderSelection(e)},e.prototype.clampValues=function(t,e){var n;void 0===e&&(e=4);var i=(0,r.CR)(this.range,2),o=i[0],s=i[1],u=(0,r.CR)(this.getValues().map((function(t){return(0,p.Zd)(t,e)})),2),l=u[0],c=u[1],h=Array.isArray(t)?t:[l,null!=t?t:c],f=(0,r.CR)((h||[l,c]).map((function(t){return(0,p.Zd)(t,e)})),2),d=f[0],v=f[1];if("value"===this.attributes.type)return[0,(0,a.Z)(v,o,s)];d>v&&(d=(n=(0,r.CR)([v,d],2))[0],v=n[1]);var g=v-d;return g>s-o?[o,s]:d<o?l===o&&c===v?[o,v]:[o,g+o]:v>s?c===s&&l===d?[d,s]:[s-g,s]:[d,v]},e.prototype.calcSelectionArea=function(t){var e=(0,r.CR)(this.clampValues(t),2),n=e[0],i=e[1],a=this.availableSpace,o=a.x,s=a.y,u=a.width,l=a.height;return this.getOrientVal([[{y:s,height:l,x:o,width:n*u},{y:s,height:l,x:n*u+o,width:(i-n)*u},{y:s,height:l,x:i*u,width:(1-i)*u}],[{x:o,width:u,y:s,height:n*l},{x:o,width:u,y:n*l+s,height:(i-n)*l},{x:o,width:u,y:i*l,height:(1-i)*l}]])},e.prototype.calcHandlePosition=function(t){var e=this.attributes.handleIconOffset,n=this.availableSpace,i=n.x,a=n.y,o=n.width,s=n.height,u=(0,r.CR)(this.clampValues(),2),l=u[0],c=u[1],h="start"===t?-e:e,f=("start"===t?l:c)*this.getOrientVal([o,s])+h;return{x:i+this.getOrientVal([f,o/2]),y:a+this.getOrientVal([s/2,f])}},e.prototype.inferTextStyle=function(t){return"horizontal"===this.attributes.orientation?{}:"start"===t?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:"end"===t?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(t){var e,n=this.attributes,i=n.type,a=n.orientation,o=n.formatter,s=n.autoFitLabel,c=(0,l.zs)(this.attributes,"handle"),h=(0,l.zs)(c,"label"),f=c.spacing,d=this.getHandleSize(),p=this.clampValues(),v=o("start"===t?p[0]:p[1]),g=new u.x({style:(0,r.pi)((0,r.pi)((0,r.pi)({},h),this.inferTextStyle(t)),{text:v})}),y=g.getBBox(),m=y.width,b=y.height;if(g.destroy(),!s){if("value"===i)return{text:v,x:0,y:-b-f};var x=f+d+("horizontal"===a?m/2:0);return(e={text:v})["horizontal"===a?"x":"y"]="start"===t?-x:x,e}var k=0,w=0,E=this.availableSpace,M=E.width,T=E.height,S=this.calcSelectionArea()[1],C=S.x,A=S.y,P=S.width,N=S.height,R=f+d;if("horizontal"===a){var Z=R+m/2;if("start"===t)k=C-R-m>0?-Z:Z;else k=M-C-P-R>m?Z:-Z}else{var O=b+R;w="start"===t?A-d>b?-O:R:T-(A+N)-d>b?O:-R}return{x:k,y:w,text:v}},e.prototype.getHandleLabelStyle=function(t){var e=(0,l.zs)(this.attributes,"handleLabel");return(0,r.pi)((0,r.pi)((0,r.pi)({},e),this.calcHandleText(t)),this.inferTextStyle(t))},e.prototype.getHandleIconStyle=function(){var t=this.attributes.handleIconShape,e=(0,l.zs)(this.attributes,"handleIcon"),n=this.getOrientVal(["ew-resize","ns-resize"]),i=this.getHandleSize();return(0,r.pi)({cursor:n,shape:t,size:i},e)},e.prototype.getHandleStyle=function(t){var e=this.attributes,n=e.x,i=e.y,a=e.showLabel,o=e.showLabelOnInteraction,s=e.orientation,u=this.calcHandlePosition(t),c=u.x,h=u.y,f=this.calcHandleText(t),d=a;return!a&&o&&(d=!!this.target),(0,r.pi)((0,r.pi)((0,r.pi)({},(0,l.dq)(this.getHandleIconStyle(),"icon")),(0,l.dq)((0,r.pi)((0,r.pi)({},this.getHandleLabelStyle(t)),f),"label")),{transform:"translate(".concat(c+n,", ").concat(h+i,")"),orientation:s,showLabel:d,type:t,zIndex:3})},e.prototype.getHandleSize=function(){var t=this.attributes,e=t.handleIconSize,n=t.width,r=t.height;return e||Math.floor((this.getOrientVal([+r,+n])+4)/2.4)},e.prototype.getOrientVal=function(t){var e=(0,r.CR)(t,2),n=e[0],i=e[1];return"horizontal"===this.attributes.orientation?n:i},e.prototype.setValuesOffset=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var i=this.attributes.type,a=(0,r.CR)(this.getValues(),2),o=[a[0]+("range"===i?t:0),a[1]+e].sort();n?this.setValues(o):this.innerSetValues(o,!0)},e.prototype.getRatio=function(t){var e=this.availableSpace,n=e.width,r=e.height;return t/this.getOrientVal([n,r])},e.prototype.dispatchCustomEvent=function(t,e,n){var r=this;t.on(e,(function(t){t.stopPropagation(),r.dispatchEvent(new i.Aw(n,{detail:t}))}))},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var t=this.brushArea;this.dispatchCustomEvent(t,"click","trackClick"),this.dispatchCustomEvent(t,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(t,"pointerleave","trackMouseleave"),t.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(t){if(this.attributes.scrollable){var e=t.deltaX,n=t.deltaY||e,r=this.getRatio(n);this.setValuesOffset(r,r,!0)}},e.tag="slider",e}(s.w)},1366:function(t,e,n){"use strict";n.d(e,{Dx:function(){return v},jY:function(){return d},li:function(){return f}});var r=n(97582),i=n(5951),a=n(79274),o=n(62191),s=n(43629),u=n(33016),l=n(47772),c=n(54015),h=(0,a.A)({text:"text"},"title");function f(t){return/\S+-\S+/g.test(t)?t.split("-").map((function(t){return t[0]})):t.length>2?[t[0]]:t.split("")}function d(t,e){var n=t.attributes,i=n.position,a=n.spacing,u=n.inset,l=n.text,c=t.getBBox(),h=e.getBBox(),d=f(i),p=(0,r.CR)((0,o.j)(l?a:0),4),v=p[0],g=p[1],y=p[2],m=p[3],b=(0,r.CR)((0,o.j)(u),4),x=b[0],k=b[1],w=b[2],E=b[3],M=(0,r.CR)([m+g,v+y],2),T=M[0],S=M[1],C=(0,r.CR)([E+k,x+w],2),A=C[0],P=C[1];if("l"===d[0])return new s.b(c.x,c.y,h.width+c.width+T+A,Math.max(h.height+P,c.height));if("t"===d[0])return new s.b(c.x,c.y,Math.max(h.width+A,c.width),h.height+c.height+S+P);var N=(0,r.CR)([e.attributes.width||h.width,e.attributes.height||h.height],2),R=N[0],Z=N[1];return new s.b(h.x,h.y,R+c.width+T+A,Z+c.height+S+P)}function p(t,e){var n=Object.entries(e).reduce((function(e,n){var i=(0,r.CR)(n,2),a=i[0],o=i[1];return t.node().attr(a)||(e[a]=o),e}),{});t.styles(n)}var v=function(t){function e(e){return t.call(this,e,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return(0,r.ZT)(e,t),e.prototype.getAvailableSpace=function(){var t=this.attributes,e=t.width,n=t.height,i=t.position,a=t.spacing,u=t.inset,l=this.querySelector(h.text.class);if(!l)return new s.b(0,0,+e,+n);var c=l.getBBox(),d=c.width,p=c.height,v=(0,r.CR)((0,o.j)(a),4),g=v[0],y=v[1],m=v[2],b=v[3],x=(0,r.CR)([0,0,+e,+n],4),k=x[0],w=x[1],E=x[2],M=x[3],T=f(i);if(T.includes("i"))return new s.b(k,w,E,M);T.forEach((function(t,i){var a,o,s,u;"t"===t&&(a=(0,r.CR)(0===i?[p+m,+n-p-m]:[0,+n],2),w=a[0],M=a[1]),"r"===t&&(o=(0,r.CR)([+e-d-b],1),E=o[0]),"b"===t&&(s=(0,r.CR)([+n-p-g],1),M=s[0]),"l"===t&&(u=(0,r.CR)(0===i?[d+y,+e-d-y]:[0,+e],2),k=u[0],E=u[1])}));var S=(0,r.CR)((0,o.j)(u),4),C=S[0],A=S[1],P=S[2],N=S[3],R=(0,r.CR)([N+A,C+P],2),Z=R[0],O=R[1];return new s.b(k+N,w+C,E-Z,M-O)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new s.b(0,0,0,0)},e.prototype.render=function(t,e){var n=this,i=(t.width,t.height,t.position,t.spacing,(0,r._T)(t,["width","height","position","spacing"])),a=(0,r.CR)((0,u.Hm)(i),1)[0],o=function(t){var e,n,i,a,o=t,s=o.width,u=o.height,l=o.position,c=(0,r.CR)([+s/2,+u/2],2),h=c[0],d=c[1],p=(0,r.CR)([+h,+d,"center","middle"],4),v=p[0],g=p[1],y=p[2],m=p[3],b=f(l);return b.includes("l")&&(v=(e=(0,r.CR)([0,"start"],2))[0],y=e[1]),b.includes("r")&&(v=(n=(0,r.CR)([+s,"end"],2))[0],y=n[1]),b.includes("t")&&(g=(i=(0,r.CR)([0,"top"],2))[0],m=i[1]),b.includes("b")&&(g=(a=(0,r.CR)([+u,"bottom"],2))[0],m=a[1]),{x:v,y:g,textAlign:y,textBaseline:m}}(t),s=o.x,d=o.y,v=o.textAlign,g=o.textBaseline;(0,l.z)(!!i.text,(0,c.Ys)(e),(function(t){n.title=t.maybeAppendByClassName(h.text,"text").styles(a).call(p,{x:s,y:d,textAlign:v,textBaseline:g}).node()}))},e}(i.w)},81666:function(t,e,n){"use strict";n.d(e,{u:function(){return d}});var r=n(97582),i=n(88204);var a=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t},o=n(5951),s=function(t,e){null!=e?t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,(0,r.ev)([],(0,r.CR)(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach((function(e){return t.appendChild(e)})):t.appendChild(e)):t.innerHTML=""},u=n(33016),l=n(43629);function c(t){return void 0===t&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var h={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function f(t){var e;void 0===t&&(t="");var n=c(t);return(e={})[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=(0,r.pi)({flex:1},h),e[".".concat(n.VALUE)]=(0,r.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},h),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var d=function(t){function e(e){var n,r,i=this,a=null===(r=null===(n=e.style)||void 0===n?void 0:n.template)||void 0===r?void 0:r.prefixCls,o=c(a);return(i=t.call(this,e,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(o.CONTAINER,'"></div>'),title:'<div class="'.concat(o.TITLE,'"></div>'),item:'<li class="'.concat(o.LIST_ITEM,'" data-index={index}>\n        <span class="').concat(o.NAME,'">\n          <span class="').concat(o.MARKER,'" style="background:{color}"></span>\n          <span class="').concat(o.NAME_LABEL,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(o.VALUE,'" title="{value}">{value}</span>\n      </li>')},style:f(a)})||this).timestamp=-1,i.prevCustomContentKey=i.attributes.contentKey,i.initShape(),i.render(i.attributes,i),i}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes,e=t.data,n=t.template;return e.map((function(t,e){var o=t.name,s=void 0===o?"":o,u=t.color,l=void 0===u?"black":u,c=t.index,h=(0,r._T)(t,["name","color","index"]),f=(0,r.pi)({name:s,color:l,index:null!=c?c:e},h);return(0,i.L)(a(n.item,f))}))},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var e;null===(e=this.element)||void 0===e||e.remove(),t.prototype.destroy.call(this)},e.prototype.show=function(t,e){var n=this;if(void 0!==t&&void 0!==e){var r=function(){n.attributes.x=null!=t?t:n.attributes.x,n.attributes.y=null!=e?e:n.attributes.y,n.updatePosition()};"hidden"===this.element.style.visibility?this.closeTransition(r):r()}this.element.style.visibility="visible"},e.prototype.hide=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.attributes.enterable&&this.isCursorEntered(t,e)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var t=this.attributes.template;this.element=(0,i.L)(t.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(void 0===this.prevCustomContentKey||this.prevCustomContentKey!==this.attributes.contentKey){this.prevCustomContentKey=this.attributes.contentKey;var t=this.attributes.content;t&&("string"==typeof t?this.element.innerHTML=t:s(this.element,t))}},e.prototype.renderHTMLTooltipElement=function(){var t,e,n=this.attributes,r=n.template,i=n.title,a=n.enterable,o=n.style,l=n.content,h=c(r.prefixCls),f=this.element;if(this.element.style.pointerEvents=a?"auto":"none",l)this.renderCustomContent();else{i?(f.innerHTML=r.title,f.getElementsByClassName(h.TITLE)[0].innerHTML=i):null===(e=null===(t=f.getElementsByClassName(h.TITLE))||void 0===t?void 0:t[0])||void 0===e||e.remove();var d=this.HTMLTooltipItemsElements,p=document.createElement("ul");p.className=h.LIST,s(p,d);var v=this.element.querySelector(".".concat(h.LIST));v?v.replaceWith(p):f.appendChild(p)}(0,u.MC)(f,o)},e.prototype.getRelativeOffsetFromCursor=function(t){var e=this.attributes,n=e.position,i=e.offset,a=(t||n).split("-"),o={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},s=this.elementSize,u=s.width,l=s.height,c=[-u/2,-l/2];return a.forEach((function(t){var e=(0,r.CR)(c,2),n=e[0],a=e[1],s=(0,r.CR)(o[t],2),h=s[0],f=s[1];c=[n+(u/2+i[0])*h,a+(l/2+i[1])*f]})),c},e.prototype.setOffsetPosition=function(t){var e=(0,r.CR)(t,2),n=e[0],i=e[1],a=this.attributes,o=a.x,s=void 0===o?0:o,u=a.y,l=void 0===u?0:u,c=a.container,h=c.x,f=c.y;this.element.style.left="".concat(+s+h+n,"px"),this.element.style.top="".concat(+l+f+i,"px")},e.prototype.updatePosition=function(){var t=this.attributes.showDelay,e=void 0===t?60:t,n=Date.now();this.timestamp>0&&n-this.timestamp<e||(this.timestamp=n,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(t){var e=(0,r.CR)(t,2),n=e[0],i=e[1],a=this.attributes,o=a.x,s=a.y,u=a.bounding,l=a.position;if(!u)return[n,i];var c=this.element,h=c.offsetWidth,f=c.offsetHeight,d=(0,r.CR)([+o+n,+s+i],2),p=d[0],v=d[1],g={left:"right",right:"left",top:"bottom",bottom:"top"},y=u.x,m=u.y,b={left:p<y,right:p+h>y+u.width,top:v<m,bottom:v+f>m+u.height},x=[];l.split("-").forEach((function(t){b[t]?x.push(g[t]):x.push(t)}));var k=x.join("-");return this.getRelativeOffsetFromCursor(k)},e.prototype.isCursorEntered=function(t,e){if(this.element){var n=this.element.getBoundingClientRect(),r=n.x,i=n.y,a=n.width,o=n.height;return new l.b(r,i,a,o).isPointIn(t,e)}return!1},e.prototype.closeTransition=function(t){var e=this,n=this.element.style.transition;this.element.style.transition="none",t(),setTimeout((function(){e.element.style.transition=n}),10)},e.tag="tooltip",e}(o.w)},43629:function(t,e,n){"use strict";n.d(e,{b:function(){return r}});var r=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=e,this.width=n,this.height=r}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},t}()},86650:function(t,e,n){"use strict";n.d(e,{S:function(){return a}});var r=n(97582),i=n(45607);function a(t,e){return(0,i.Z)(t)?t.apply(void 0,(0,r.ev)([],(0,r.CR)(e),!1)):t}},79274:function(t,e,n){"use strict";n.d(e,{A:function(){return i}});var r=n(97582),i=function(t,e){var n=function(t){return"".concat(e,"-").concat(t)},i=Object.fromEntries(Object.entries(t).map((function(t){var e=(0,r.CR)(t,2),i=e[0],a=e[1],o=n(a);return[i,{name:o,class:".".concat(o),id:"#".concat(o),toString:function(){return o}}]})));return Object.assign(i,{prefix:n}),i}},8126:function(t,e,n){"use strict";n.d(e,{n:function(){return s}});var r=n(97582),i=n(83845),a=n(5199),o=function(t,e,n,s){void 0===n&&(n=0),void 0===s&&(s=5),Object.entries(e).forEach((function(u){var l=(0,r.CR)(u,2),c=l[0],h=l[1],f=t;Object.prototype.hasOwnProperty.call(e,c)&&(h?(0,i.Z)(h)?((0,i.Z)(t[c])||(f[c]={}),n<s?o(t[c],h,n+1,s):f[c]=e[c]):(0,a.Z)(h)?(f[c]=[],f[c]=f[c].concat(h)):f[c]=h:f[c]=h)}))},s=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)o(t,e[r]);return t}},83186:function(t,e,n){"use strict";n.d(e,{O:function(){return i}});var r=n(30650);function i(t,e,n){void 0===n&&(n="..."),(0,r.Rm)(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}},26406:function(t,e,n){"use strict";function r(t){var e=t.canvas,n=t.touches,r=t.offsetX,i=t.offsetY;if(e)return[e.x,e.y];if(n){var a=n[0];return[a.clientX,a.clientY]}return r&&i?[r,i]:[0,0]}n.d(e,{s:function(){return r}})},75494:function(t,e,n){"use strict";n.d(e,{S:function(){return o}});var r=n(76714),i=n(25897),a=n(8523);function o(t){return"function"==typeof t?t():(0,r.Z)(t)||(0,i.Z)(t)?new a.x({style:{text:String(t)}}):t}},47772:function(t,e,n){"use strict";function r(t,e,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=function(t){t.node().removeChildren()}),t?n(e):(r&&i(e),null)}n.d(e,{z:function(){return r}})},80264:function(t,e,n){"use strict";function r(t,e){return[t[0]*e,t[1]*e]}function i(t,e){return[t[0]+e[0],t[1]+e[1]]}function a(t,e){return[t[0]-e[0],t[1]-e[1]]}function o(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function s(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function u(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function l(t){if(0===t[0]&&0===t[1])return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function c(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}n.d(e,{Fp:function(){return s},Fv:function(){return l},IH:function(){return i},KR:function(){return c},TE:function(){return u},VV:function(){return o},bA:function(){return r},lu:function(){return a}})},48951:function(t,e,n){"use strict";function r(t,e){return+t.toPrecision(e)}n.d(e,{Zd:function(){return r}})},35912:function(t,e,n){"use strict";n.d(e,{X:function(){return u},g:function(){return s}});var r=n(97582),i=n(1242),a=n(62059),o=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=t.apply(this,(0,r.ev)([],(0,r.CR)(e),!1))||this;return o.isMutationObserved=!0,o.addEventListener(i.Dk.INSERTED,(function(){(0,a.Cp)(o)})),o}return(0,r.ZT)(e,t),e}(i.ZA);function s(t){var e=t.appendChild(new o({class:"offscreen"}));return(0,a.Cp)(e),e}function u(t){for(var e=t;e;){if("offscreen"===e.className)return!0;e=e.parent}return!1}},19712:function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n=!1);var r=t.getBBox(),i=r.width,a=r.height,o=e/Math.max(i,a);return n&&(t.style.transform="scale(".concat(o,")")),o}n.d(e,{b:function(){return r}})},54015:function(t,e,n){"use strict";n.d(e,{OV:function(){return u},Ys:function(){return s}});var r=n(97582),i=n(1242),a=n(8523);var o=function(){function t(t,n,r,i,a,o,s){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=[null,null,null,null,null]),void 0===o&&(o=[]),void 0===s&&(s=[]),e.add(this),this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}var e,n,o;return t.prototype.selectAll=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t):t;return new n(e,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t):t;return new n(this._elements,null,this._parent,this._document,void 0,void 0,e)},t.prototype.select=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t)[0]||null:t;return new n([e],null,e,this._document)},t.prototype.append=function(t){var e=this,i="function"==typeof t?t:function(){return e.createElement(t)},a=[];if(null!==this._data){for(var o=0;o<this._data.length;o++){var s=this._data[o],u=(0,r.CR)(Array.isArray(s)?s:[s,null],2),l=u[0],c=u[1];(f=i(l,o)).__data__=l,null!==c&&(f.__fromElements__=c),this._parent.appendChild(f),a.push(f)}return new n(a,null,this._parent,this._document)}for(o=0;o<this._elements.length;o++){var h=this._elements[o],f=i(l=h.__data__,o);h.appendChild(f),a.push(f)}return new n(a,null,a[0],this._document)},t.prototype.maybeAppend=function(t,n){var i=(0,r.Q_)(this,e,"m",o).call(this,"#"===t[0]?t:"#".concat(t),n);return i.attr("id",t),i},t.prototype.maybeAppendByClassName=function(t,n){var i=t.toString(),a=(0,r.Q_)(this,e,"m",o).call(this,"."===i[0]?i:".".concat(i),n);return a.attr("className",i),a},t.prototype.maybeAppendByName=function(t,n){var i=(0,r.Q_)(this,e,"m",o).call(this,'[name="'.concat(t,'"]'),n);return i.attr("name",t),i},t.prototype.data=function(t,e,i){var a,o;void 0===e&&(e=function(t){return t}),void 0===i&&(i=function(){return null});for(var s,u,l,c=[],h=[],f=new Set(this._elements),d=[],p=new Set,v=new Map(this._elements.map((function(t,n){return[e(t.__data__,n),t]}))),g=new Map(this._facetElements.map((function(t,n){return[e(t.__data__,n),t]}))),y=(s=this._elements,u=function(t){return i(t.__data__)},l=new Map,s.forEach((function(t){var e=u(t);l.has(e)||l.set(e,[]),l.get(e).push(t)})),l),m=0;m<t.length;m++){var b=t[m],x=e(b,m),k=i(b,m);if(v.has(x))(T=v.get(x)).__data__=b,T.__facet__=!1,h.push(T),f.delete(T),v.delete(x);else if(g.has(x)){(T=g.get(x)).__data__=b,T.__facet__=!0,h.push(T),g.delete(x)}else if(y.has(x)){var w=y.get(x);d.push([b,w]);try{for(var E=(a=void 0,(0,r.XA)(w)),M=E.next();!M.done;M=E.next()){var T=M.value;f.delete(T)}}catch(t){a={error:t}}finally{try{M&&!M.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}y.delete(x)}else if(v.has(k)){(T=v.get(k)).__toData__?T.__toData__.push(b):T.__toData__=[b],p.add(T),f.delete(T)}else c.push(b)}var S=[new n([],c,this._parent,this._document),new n(h,null,this._parent,this._document),new n(f,null,this._parent,this._document),new n([],d,this._parent,this._document),new n(p,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,S)},t.prototype.merge=function(t){var e=(0,r.ev)((0,r.ev)([],(0,r.CR)(this._elements),!1),(0,r.CR)(t._elements),!1),i=(0,r.ev)((0,r.ev)([],(0,r.CR)(this._transitions),!1),(0,r.CR)(t._transitions),!1);return new n(e,null,this._parent,this._document,void 0,i)},t.prototype.createElement=function(t){if(this._document)return this._document.createElement(t,{});var e=n.registry[t];return e?new e:function(t){throw new Error(t)}("Unknown node type: ".concat(t))},t.prototype.join=function(t,e,n,r,i){void 0===t&&(t=function(t){return t}),void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t.remove()}),void 0===r&&(r=function(t){return t}),void 0===i&&(i=function(t){return t.remove()});var a=t(this._enter),o=e(this._update),s=n(this._exit),u=r(this._merge),l=i(this._split);return o.merge(a).merge(s).merge(u).merge(l)},t.prototype.remove=function(){for(var t=function(t){var n=e._elements[t],r=e._transitions[t];r?r.then((function(){return n.remove()})):n.remove()},e=this,r=0;r<this._elements.length;r++)t(r);return new n([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(t){for(var e=0;e<this._elements.length;e++){var n=this._elements[e],r=n.__data__;t.call(n,r,e)}return this},t.prototype.attr=function(t,e){var n="function"!=typeof e?function(){return e}:e;return this.each((function(r,i){void 0!==e&&(this[t]=n.call(this,r,i))}))},t.prototype.style=function(t,e,n){void 0===n&&(n=!0);var r="function"==typeof e&&n?e:function(){return e};return this.each((function(n,i){void 0!==e&&(this.style[t]=r.call(this,n,i))}))},t.prototype.styles=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=!0),this.each((function(n,i){var a=this;Object.entries(t).forEach((function(t){var o=(0,r.CR)(t,2),s=o[0],u=o[1],l="function"==typeof u&&e?u:function(){return u};void 0!==u&&a.attr(s,l.call(a,n,i))}))}))},t.prototype.update=function(t,e){void 0===e&&(e=!0);var n="function"==typeof t&&e?t:function(){return t};return this.each((function(e,r){t&&this.update&&this.update(n.call(this,e,r))}))},t.prototype.maybeUpdate=function(t,e){void 0===e&&(e=!0);var n="function"==typeof t&&e?t:function(){return t};return this.each((function(e,r){t&&this.update&&this.update(n.call(this,e,r))}))},t.prototype.transition=function(t){var e=this._transitions;return this.each((function(n,r){e[r]=t.call(this,n,r)}))},t.prototype.on=function(t,e){return this.each((function(){this.addEventListener(t,e)})),this},t.prototype.call=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.call.apply(t,(0,r.ev)([this._parent,this],(0,r.CR)(e),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter((function(t){return!!t}))},t.prototype.parent=function(){return this._parent},n=t,e=new WeakSet,o=function(t,e){var r=this._elements[0],i=r.querySelector(t);if(i)return new n([i],null,this._parent,this._document);var a="string"==typeof e?this.createElement(e):e();return r.appendChild(a),new n([a],null,this._parent,this._document)},t.registry={g:i.ZA,rect:i.UL,circle:i.Cd,path:i.y$,text:a.x,ellipse:i.Pj,image:i.Ee,line:i.x1,polygon:i.mg,polyline:i.aH,html:i.k9},t}();function s(t){return new o([t],null,t,t.ownerDocument)}function u(t,e,n){return t.querySelector(e)?s(t).select(e):s(t).append(n)}},62191:function(t,e,n){"use strict";n.d(e,{j:function(){return a}});var r=n(25897),i=n(5199);function a(t){if((0,r.Z)(t))return[t,t,t,t];if((0,i.Z)(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}},39639:function(t,e,n){"use strict";n.d(e,{DM:function(){return o},_v:function(){return i},wE:function(){return a}});var r=n(97582);function i(t){var e=t.getLocalBounds(),n=e.min,i=e.max,a=(0,r.CR)([n,i],2),o=(0,r.CR)(a[0],2),s=o[0],u=o[1],l=(0,r.CR)(a[1],2),c=l[0],h=l[1];return{x:s,y:u,width:c-s,height:h-u,left:s,bottom:h,top:u,right:c}}function a(t,e){var n=(0,r.CR)(t,2),i=n[0],a=n[1],o=(0,r.CR)(e,2),s=o[0],u=o[1];return i!==s&&a===u}function o(t,e){var n,i,a=e.attributes;try{for(var o=(0,r.XA)(Object.entries(a)),s=o.next();!s.done;s=o.next()){var u=(0,r.CR)(s.value,2),l=u[0],c=u[1];"id"!==l&&"className"!==l&&t.attr(l,c)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}},33016:function(t,e,n){"use strict";n.d(e,{MC:function(){return o},Hm:function(){return c},zs:function(){return u},dq:function(){return l}});var r=n(97582);function i(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function a(t,e,n){var r;void 0===n&&(n=!0);var i=e||(null===(r=t.match(/^([a-z][a-z0-9]+)/))||void 0===r?void 0:r[0])||"",a=t.replace(new RegExp("^(".concat(i,")")),"");return n?function(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}(a):a}function o(t,e){Object.entries(e).forEach((function(e){var n=(0,r.CR)(e,2),i=n[0],a=n[1];(0,r.ev)([t],(0,r.CR)(t.querySelectorAll(i)),!1).filter((function(t){return t.matches(i)})).forEach((function(t){t&&(t.style.cssText+=Object.entries(a).reduce((function(t,e){return"".concat(t).concat(e.join(":"),";")}),""))}))}))}var s=function(t,e){if(!(null==t?void 0:t.startsWith(e)))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function u(t,e,n){void 0===n&&(n=!1);var o={};return Object.entries(t).forEach((function(t){var u=(0,r.CR)(t,2),l=u[0],c=u[1];if("className"===l||"class"===l);else if(s(l,"show")&&s(a(l,"show"),e)!==n)l===function(t,e){return"".concat(e).concat(i(t))}(e,"show")?o[l]=c:o[l.replace(new RegExp(i(e)),"")]=c;else if(!s(l,"show")&&s(l,e)!==n){var h=a(l,e);"filter"===h&&"function"==typeof c||(o[h]=c)}})),o}function l(t,e){return Object.entries(t).reduce((function(t,n){var a=(0,r.CR)(n,2),o=a[0],s=a[1];return o.startsWith("show")?t["show".concat(e).concat(o.slice(4))]=s:t["".concat(e).concat(i(o))]=s,t}),{})}function c(t,e){void 0===e&&(e=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],i={},a={};return Object.entries(t).forEach((function(t){var o=(0,r.CR)(t,2),s=o[0],u=o[1];e.includes(s)||(-1!==n.indexOf(s)?a[s]=u:i[s]=u)})),[i,a]}},30650:function(t,e,n){"use strict";n.d(e,{Rm:function(){return l},U4:function(){return u},Ux:function(){return o},qT:function(){return s}});var r,i,a=n(1242);var o=(0,n(92426).Z)((function(t,e){var n=e.fontSize,o=e.fontFamily,s=e.fontWeight,u=e.fontStyle,l=e.fontVariant;return i?i(t,n):(r||(r=a.GZ.offscreenCanvasCreator.getOrCreateContext(void 0)),r.font=[u,l,s,"".concat(n,"px"),o].join(" "),r.measureText(t).width)}),(function(t,e){return[t,Object.values(e||s(t)).join()].join("")}),4096),s=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,a=t.style.fontSize;return{fontSize:a="object"==typeof a?a.value:a,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:i}};function u(t){return"text"===t.nodeName?t:"g"===t.nodeName&&1===t.children.length&&"text"===t.children[0].nodeName?t.children[0]:null}function l(t,e){var n=u(t);n&&n.attr(e)}},62059:function(t,e,n){"use strict";function r(t,e){e(t),t.children&&t.children.forEach((function(t){t&&r(t,e)}))}function i(t){o(t,!0)}function a(t){o(t,!1)}function o(t,e){var n=e?"visible":"hidden";r(t,(function(t){t.attr("visibility",n)}))}n.d(e,{Cp:function(){return a},$Z:function(){return i},WD:function(){return o}})},90494:function(t,e){"use strict";var n=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],a=this._events["*"]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],s=o.callback;o.once&&(r.splice(a,1),0===r.length&&delete e._events[t],i--,a--),s.apply(e,n)}};o(i),o(a)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();e.Z=n},66056:function(t,e,n){"use strict";n.d(e,{Th:function(){return It}});var r=n(43144),i=n(15671),a=n(53640),o=n(60136),s=n(40254),u=n(4942),l=n(97685),c=n(81957);function h(t,e){var n=e.cx,r=void 0===n?0:n,i=e.cy,a=void 0===i?0:i,o=e.r;t.arc(r,a,o,0,2*Math.PI,!1)}function f(t,e){var n=e.cx,r=void 0===n?0:n,i=e.cy,a=void 0===i?0:i,o=e.rx,s=e.ry;if(t.ellipse)t.ellipse(r,a,o,s,0,0,2*Math.PI,!1);else{var u=o>s?o:s,l=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.scale(l,c),t.arc(r,a,u,0,2*Math.PI)}}function d(t,e){var n,r,i=e.x1,a=e.y1,o=e.x2,u=e.y2,l=e.markerStart,c=e.markerEnd,h=e.markerStartOffset,f=e.markerEndOffset,d=0,p=0,v=0,g=0,y=0;l&&(0,s.RV)(l)&&h&&(n=o-i,r=u-a,y=Math.atan2(r,n),d=Math.cos(y)*(h||0),p=Math.sin(y)*(h||0)),c&&(0,s.RV)(c)&&f&&(n=i-o,r=a-u,y=Math.atan2(r,n),v=Math.cos(y)*(f||0),g=Math.sin(y)*(f||0)),t.moveTo(i+d,a+p),t.lineTo(o+v,u+g)}function p(t,e){var n,r,i=e.markerStart,a=e.markerEnd,o=e.markerStartOffset,u=e.markerEndOffset,c=e.d,h=c.absolutePath,f=c.segments,d=0,p=0,v=0,g=0,y=0;if(i&&(0,s.RV)(i)&&o){var m=i.parentNode.getStartTangent(),b=(0,l.Z)(m,2),x=b[0],k=b[1];n=x[0]-k[0],r=x[1]-k[1],y=Math.atan2(r,n),d=Math.cos(y)*(o||0),p=Math.sin(y)*(o||0)}if(a&&(0,s.RV)(a)&&u){var w=a.parentNode.getEndTangent(),E=(0,l.Z)(w,2),M=E[0],T=E[1];n=M[0]-T[0],r=M[1]-T[1],y=Math.atan2(r,n),v=Math.cos(y)*(u||0),g=Math.sin(y)*(u||0)}for(var S=0;S<h.length;S++){var C=h[S],A=C[0],P=h[S+1],N=0===S&&(0!==d||0!==p),R=(S===h.length-1||P&&("M"===P[0]||"Z"===P[0]))&&0!==v&&0!==g,Z=N?[d,p]:[0,0],O=(0,l.Z)(Z,2),L=O[0],_=O[1],I=R?[v,g]:[0,0],D=(0,l.Z)(I,2),F=D[0],B=D[1];switch(A){case"M":t.moveTo(C[1]+L,C[2]+_);break;case"L":t.lineTo(C[1]+F,C[2]+B);break;case"Q":t.quadraticCurveTo(C[1],C[2],C[3]+F,C[4]+B);break;case"C":t.bezierCurveTo(C[1],C[2],C[3],C[4],C[5]+F,C[6]+B);break;case"A":var G=f[S].arcParams,z=G.cx,V=G.cy,j=G.rx,W=G.ry,H=G.startAngle,U=G.endAngle,Y=G.xRotation,q=G.sweepFlag;if(t.ellipse)t.ellipse(z,V,j,W,Y,H,U,!!(1-q));else{var X=j>W?j:W,$=j>W?1:j/W,K=j>W?W/j:1;t.translate(z,V),t.rotate(Y),t.scale($,K),t.arc(0,0,X,H,U,!!(1-q)),t.scale(1/$,1/K),t.rotate(-Y),t.translate(-z,-V)}R&&t.lineTo(C[6]+v,C[7]+g);break;case"Z":t.closePath()}}}function v(t,e){var n,r,i=e.markerStart,a=e.markerEnd,o=e.markerStartOffset,u=e.markerEndOffset,l=e.points.points,c=l.length,h=l[0][0],f=l[0][1],d=l[c-1][0],p=l[c-1][1],v=0,g=0,y=0,m=0,b=0;i&&(0,s.RV)(i)&&o&&(n=l[1][0]-l[0][0],r=l[1][1]-l[0][1],b=Math.atan2(r,n),v=Math.cos(b)*(o||0),g=Math.sin(b)*(o||0)),a&&(0,s.RV)(a)&&u&&(n=l[c-1][0]-l[0][0],r=l[c-1][1]-l[0][1],b=Math.atan2(r,n),y=Math.cos(b)*(u||0),m=Math.sin(b)*(u||0)),t.moveTo(h+(v||y),f+(g||m));for(var x=1;x<c-1;x++){var k=l[x];t.lineTo(k[0],k[1])}t.lineTo(d,p)}function g(t,e){var n,r,i=e.markerStart,a=e.markerEnd,o=e.markerStartOffset,u=e.markerEndOffset,l=e.points.points,c=l.length,h=l[0][0],f=l[0][1],d=l[c-1][0],p=l[c-1][1],v=0,g=0,y=0,m=0,b=0;i&&(0,s.RV)(i)&&o&&(n=l[1][0]-l[0][0],r=l[1][1]-l[0][1],b=Math.atan2(r,n),v=Math.cos(b)*(o||0),g=Math.sin(b)*(o||0)),a&&(0,s.RV)(a)&&u&&(n=l[c-2][0]-l[c-1][0],r=l[c-2][1]-l[c-1][1],b=Math.atan2(r,n),y=Math.cos(b)*(u||0),m=Math.sin(b)*(u||0)),t.moveTo(h+v,f+g);for(var x=1;x<c-1;x++){var k=l[x];t.lineTo(k[0],k[1])}t.lineTo(d+y,p+m)}function y(t,e){var n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i,o=e.radius,s=e.width,u=e.height,h=s,f=u;if(o&&o.some((function(t){return 0!==t}))){var d=s>0?1:-1,p=u>0?1:-1,v=d+p===0,g=o.map((function(t){return(0,c.Z)(t,0,Math.min(Math.abs(h)/2,Math.abs(f)/2))})),y=(0,l.Z)(g,4),m=y[0],b=y[1],x=y[2],k=y[3];t.moveTo(d*m+r,a),t.lineTo(h-d*b+r,a),0!==b&&t.arc(h-d*b+r,p*b+a,b,-p*Math.PI/2,d>0?0:Math.PI,v),t.lineTo(h+r,f-p*x+a),0!==x&&t.arc(h-d*x+r,f-p*x+a,x,d>0?0:Math.PI,p>0?Math.PI/2:1.5*Math.PI,v),t.lineTo(d*k+r,f+a),0!==k&&t.arc(d*k+r,f-p*k+a,k,p>0?Math.PI/2:-Math.PI/2,d>0?Math.PI:0,v),t.lineTo(r,p*m+a),0!==m&&t.arc(d*m+r,p*m+a,m,d>0?Math.PI:0,p>0?1.5*Math.PI:Math.PI/2,v)}else t.rect(r,a,h,f)}var m=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=(0,a.Z)(this,e,[].concat(r))).name="canvas-path-generator",t}return(0,o.Z)(e,t),(0,r.Z)(e,[{key:"init",value:function(){var t,e=(t={},(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)(t,s.bn.CIRCLE,h),s.bn.ELLIPSE,f),s.bn.RECT,y),s.bn.LINE,d),s.bn.POLYLINE,g),s.bn.POLYGON,v),s.bn.PATH,p),s.bn.TEXT,void 0),s.bn.GROUP,void 0),s.bn.IMAGE,void 0),(0,u.Z)((0,u.Z)((0,u.Z)(t,s.bn.HTML,void 0),s.bn.MESH,void 0),s.bn.FRAGMENT,void 0));this.context.pathGeneratorFactory=e}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(s.F6),b=n(37762),x=n(74165),k=n(15861),w=n(77160),E=n(85975),M=n(11702),T=n(74873),S=n(1413),C=w.Ue(),A=w.Ue(),P=w.Ue(),N=E.create(),R=function(){function t(){var e=this;(0,i.Z)(this,t),this.isHit=function(t,n,r,i){var a=e.context.pointInPathPickerFactory[t.nodeName];if(a){var o=E.invert(N,r),u=w.fF(A,w.t8(P,n[0],n[1],0),o);if(a(t,new s.E9(u[0],u[1]),i,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(t,n){var r=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),i=e.context.pathGeneratorFactory[t.nodeName];return i&&(r.beginPath(),i(r,t.parsedStyle),r.closePath()),r.isPointInPath(n.x,n.y)}}return(0,r.Z)(t,[{key:"apply",value:function(e,n){var r,i=this,a=e.renderingService,o=e.renderingContext;this.context=e,this.runtime=n;var s=null===(r=o.root)||void 0===r?void 0:r.ownerDocument;a.hooks.pick.tapPromise(t.tag,function(){var t=(0,k.Z)((0,x.Z)().mark((function t(e){return(0,x.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.pick(s,e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.hooks.pickSync.tap(t.tag,(function(t){return i.pick(s,t)}))}},{key:"pick",value:function(t,e){var n,r=e.topmost,i=e.position,a=i.x,o=i.y,u=w.t8(C,a,o,0),l=t.elementsFromBBox(u[0],u[1],u[0],u[1]),c=[],h=(0,b.Z)(l);try{for(h.s();!(n=h.n()).done;){var f=n.value,d=f.getWorldTransform();if(this.isHit(f,u,d,!1)){var p=(0,s.Oi)(f);if(p){var v=p.parsedStyle.clipPath;if(this.isHit(v,u,v.getWorldTransform(),!0)){if(r)return e.picked=[f],e;c.push(f)}}else{if(r)return e.picked=[f],e;c.push(f)}}}}catch(t){h.e(t)}finally{h.f()}return e.picked=c,e}}])}();function Z(t,e,n){var r=t.parsedStyle,i=r.cx,a=void 0===i?0:i,o=r.cy,u=void 0===o?0:o,c=r.r,h=r.fill,f=r.stroke,d=r.lineWidth,p=void 0===d?1:d,v=r.increasedLineWidthForHitTesting,g=void 0===v?0:v,y=r.pointerEvents,m=void 0===y?"auto":y,b=(p+g)/2,x=(0,M.TE)(a,u,e.x,e.y),k=(0,s.L1)(m,h,f),w=(0,l.Z)(k,2),E=w[0],T=w[1];return E&&T||n?x<=c+b:E?x<=c:!!T&&(x>=c-b&&x<=c+b)}function O(t,e,n,r){return t/(n*n)+e/(r*r)}function L(t,e,n){var r=t.parsedStyle,i=r.cx,a=void 0===i?0:i,o=r.cy,u=void 0===o?0:o,c=r.rx,h=r.ry,f=r.fill,d=r.stroke,p=r.lineWidth,v=void 0===p?1:p,g=r.increasedLineWidthForHitTesting,y=void 0===g?0:g,m=r.pointerEvents,b=void 0===m?"auto":m,x=e.x,k=e.y,w=(0,s.L1)(b,f,d),E=(0,l.Z)(w,2),M=E[0],T=E[1],S=(v+y)/2,C=(x-a)*(x-a),A=(k-u)*(k-u);return M&&T||n?O(C,A,c+S,h+S)<=1:M?O(C,A,c,h)<=1:!!T&&(O(C,A,c-S,h-S)>=1&&O(C,A,c+S,h+S)<=1)}function _(t,e,n,r,i,a){return i>=t&&i<=t+n&&a>=e&&a<=e+r}function I(t,e,n,r,i,a,o,s){var u=(Math.atan2(s-e,o-t)+2*Math.PI)%(2*Math.PI),l={x:t+n*Math.cos(u),y:e+n*Math.sin(u)};return(0,M.TE)(l.x,l.y,o,s)<=a/2}function D(t,e,n,r,i,a,o){var s=Math.min(t,n),u=Math.max(t,n),l=Math.min(e,r),c=Math.max(e,r),h=i/2;return a>=s-h&&a<=u+h&&o>=l-h&&o<=c+h&&(0,M._x)(t,e,n,r,a,o)<=i/2}function F(t,e,n,r,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){if(D(t[o][0],t[o][1],t[o+1][0],t[o+1][1],e,n,r))return!0}if(i){var s=t[0],u=t[a-1];if(D(s[0],s[1],u[0],u[1],e,n,r))return!0}return!1}R.tag="CanvasPicker";function B(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function G(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function z(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(G(o,s,[e,n]))return!0;B(o[1]-n)>0!=B(s[1]-n)>0&&B(e-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function V(t,e,n){for(var r=!1,i=0;i<t.length;i++){if(r=z(t[i],e,n))break}return r}function j(t,e,n){var r=t.parsedStyle,i=r.x1,a=r.y1,o=r.x2,u=r.y2,c=r.lineWidth,h=void 0===c?1:c,f=r.increasedLineWidthForHitTesting,d=void 0===f?0:f,p=r.pointerEvents,v=void 0===p?"auto":p,g=r.fill,y=r.stroke,m=(0,s.L1)(v,g,y);return!(!(0,l.Z)(m,2)[1]&&!n||!h)&&D(i,a,o,u,h+d,e.x,e.y)}function W(t,e,n,r,i,a){var o=t.parsedStyle,u=o.lineWidth,c=void 0===u?1:u,h=o.increasedLineWidthForHitTesting,f=void 0===h?0:h,d=o.stroke,p=o.fill,v=o.d,g=o.pointerEvents,y=void 0===g?"auto":g,m=v.segments,b=v.hasArc,x=v.polylines,k=v.polygons,w=(0,s.L1)(y,(null==k?void 0:k.length)&&p,d),E=(0,l.Z)(w,2),S=E[0],C=E[1],A=(0,s.gz)(t),P=!1;return S||n?P=b?r(t,e):V(k,e.x,e.y)||V(x,e.x,e.y):((C||n)&&(P=function(t,e,n,r,i){for(var a=!1,o=e/2,s=0;s<t.length;s++){var u=t[s],l=u.currentPoint,c=u.params,h=u.prePoint,f=u.box;if(!f||_(f.x-o,f.y-o,f.width+e,f.height+e,n,r))switch(u.command){case"L":case"Z":if(a=D(h[0],h[1],l[0],l[1],e,n,r))return!0;break;case"Q":if(a=(0,M.Y1)(h[0],h[1],c[1],c[2],c[3],c[4],n,r)<=e/2)return!0;break;case"C":if(a=(0,M.ph)(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],n,r,i)<=e/2)return!0;break;case"A":u.cubicParams||(u.cubicParams=(0,T.W)(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],c[7],void 0));for(var d=u.cubicParams,p=h,v=0;v<d.length;v+=6){var g=(0,M.ph)(p[0],p[1],d[v],d[v+1],d[v+2],d[v+3],d[v+4],d[v+5],n,r,i);if(p=[d[v+4],d[v+5]],a=g<=e/2)return!0}}}return a}(m,c+f,e.x,e.y,A)),P)}function H(t,e,n){var r=t.parsedStyle,i=r.stroke,a=r.fill,o=r.lineWidth,u=void 0===o?1:o,c=r.increasedLineWidthForHitTesting,h=void 0===c?0:c,f=r.points,d=r.pointerEvents,p=void 0===d?"auto":d,v=(0,s.L1)(p,a,i),g=(0,l.Z)(v,2),y=g[0],m=!1;return(g[1]||n)&&(m=F(f.points,u+h,e.x,e.y,!0)),m||!y&&!n||(m=z(f.points,e.x,e.y)),m}function U(t,e,n){var r=t.parsedStyle,i=r.lineWidth,a=void 0===i?1:i,o=r.increasedLineWidthForHitTesting,u=void 0===o?0:o,c=r.points,h=r.pointerEvents,f=void 0===h?"auto":h,d=r.fill,p=r.stroke,v=(0,s.L1)(f,d,p);return!(!(0,l.Z)(v,2)[1]&&!n||!a)&&F(c.points,a+u,e.x,e.y,!1)}function Y(t,e,n,r,i){var a=t.parsedStyle,o=a.radius,u=a.fill,h=a.stroke,f=a.lineWidth,d=void 0===f?1:f,p=a.increasedLineWidthForHitTesting,v=void 0===p?0:p,g=a.x,y=void 0===g?0:g,m=a.y,b=void 0===m?0:m,x=a.width,k=a.height,w=a.pointerEvents,E=void 0===w?"auto":w,M=(0,s.L1)(E,u,h),T=(0,l.Z)(M,2),S=T[0],C=T[1],A=d+v;if(o&&o.some((function(t){return 0!==t}))){var P=!1;return(C||n)&&(P=function(t,e,n,r,i,a,o,s){var u=(0,l.Z)(i,4),c=u[0],h=u[1],f=u[2],d=u[3];return D(t+c,e,t+n-h,e,a,o,s)||D(t+n,e+h,t+n,e+r-f,a,o,s)||D(t+n-f,e+r,t+d,e+r,a,o,s)||D(t,e+r-d,t,e+c,a,o,s)||I(t+n-h,e+h,h,Math.PI,Math.PI,a,o,s)||I(t+n-f,e+r-f,f,0,Math.PI,a,o,s)||I(t+d,e+r-d,d,Math.PI,Math.PI,a,o,s)||I(t+c,e+c,c,Math.PI,Math.PI,a,o,s)}(y,b,x,k,o.map((function(t){return(0,c.Z)(t,0,Math.min(Math.abs(x)/2,Math.abs(k)/2))})),A,e.x,e.y)),P||!S&&!n||(P=r(t,e)),P}var N=A/2;return S&&C||n?_(y-N,b-N,x+N,k+N,e.x,e.y):S?_(y,b,x,k,e.x,e.y):!!C&&function(t,e,n,r,i,a,o){var s=i/2;return _(t-s,e-s,n,i,a,o)||_(t+n-s,e-s,i,r,a,o)||_(t+s,e+r-s,n,i,a,o)||_(t-s,e+s,i,r,a,o)}(y,b,x,k,A,e.x,e.y)}function q(t,e,n,r,i,a){var o=t.parsedStyle,u=o.pointerEvents,l=void 0===u?"auto":u,c=o.x,h=void 0===c?0:c,f=o.y,d=void 0===f?0:f,p=o.width,v=o.height;if("non-transparent-pixel"===l){var g=i.config.offscreenCanvas,y=a.offscreenCanvasCreator.getOrCreateCanvas(g),m=a.offscreenCanvasCreator.getOrCreateContext(g,{willReadFrequently:!0});return y.width=p,y.height=v,i.defaultStyleRendererFactory[s.bn.IMAGE].render(m,(0,S.Z)((0,S.Z)({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0),m.getImageData(e.x-h,e.y-d,1,1).data.every((function(t){return 0!==t}))}return!0}function X(t,e,n,r){var i=t.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}var $=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=(0,a.Z)(this,e,[].concat(r))).name="canvas-picker",t}return(0,o.Z)(e,t),(0,r.Z)(e,[{key:"init",value:function(){var t,e=(t={},(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)(t,s.bn.CIRCLE,Z),s.bn.ELLIPSE,L),s.bn.RECT,Y),s.bn.LINE,j),s.bn.POLYLINE,U),s.bn.POLYGON,H),s.bn.PATH,W),s.bn.TEXT,X),s.bn.GROUP,null),s.bn.IMAGE,q),(0,u.Z)((0,u.Z)(t,s.bn.HTML,null),s.bn.MESH,null));this.context.pointInPathPickerFactory=e,this.addRenderingPlugin(new R)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(s.F6),K=n(74902);function J(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Q=0;function tt(t){return"__private_"+Q+++"_"+t}var et=n(95147),nt=n(76714),rt=function(){return(0,r.Z)((function t(){(0,i.Z)(this,t),this.cacheStore=new Map}),[{key:"onRefAdded",value:function(t){}},{key:"has",value:function(t){return this.cacheStore.has(t)}},{key:"put",value:function(t,e,n){return!this.cacheStore.has(t)&&(this.cacheStore.set(t,{value:e,counter:new Set([n])}),this.onRefAdded(n),!0)}},{key:"get",value:function(t,e){var n=this.cacheStore.get(t);return n?(n.counter.has(e)||(n.counter.add(e),this.onRefAdded(e)),n.value):null}},{key:"update",value:function(t,e,n){var r=this.cacheStore.get(t);return!!r&&(r.value=(0,S.Z)((0,S.Z)({},r.value),e),r.counter.has(n)||(r.counter.add(n),this.onRefAdded(n)),!0)}},{key:"release",value:function(t,e){var n=this.cacheStore.get(t);return!!n&&(n.counter.delete(e),n.counter.size<=0&&this.cacheStore.delete(t),!0)}},{key:"releaseRef",value:function(t){var e=this;Array.from(this.cacheStore.keys()).forEach((function(n){e.release(n,t)}))}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),it=[],at=[],ot=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,null,[{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.api;t.rafId&&(e.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.api;it.length<=0&&at.length<=0||(at.forEach((function(t){return t()})),at=it.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=e.requestAnimationFrame((function(){t.executeTask(e)})))}},{key:"sliceImage",value:function(e,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.api,s=e.naturalWidth||e.width,u=e.naturalHeight||e.height,l=n-a,c=r-a,h=Math.ceil(s/l),f=Math.ceil(u/c),d={tileSize:[n,r],gridSize:[f,h],tiles:Array(f).fill(null).map((function(){return Array(h).fill(null)}))},p=function(t){for(var a=function(a){it.push((function(){var h=a*l,f=t*c,p=[Math.min(n,s-h),Math.min(r,u-f)],v=p[0],g=p[1],y=o.createCanvas();y.width=n,y.height=r,y.getContext("2d").drawImage(e,h,f,v,g,0,0,v,g),d.tiles[t][a]={x:h,y:f,tileX:a,tileY:t,data:y},i()}))},f=0;f<h;f++)a(f)},v=0;v<f;v++)p(v);return t.stop(),t.executeTask(),d}}])}();ot.TASK_NUM_PER_FRAME=10;var st=new rt;st.onRefAdded=function(t){var e=this;t.addEventListener(s.Dk.DESTROY,(function(){e.releaseRef(t)}),{once:!0})};var ut=function(){return(0,r.Z)((function t(e,n){(0,i.Z)(this,t),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=n}),[{key:"getImageSync",value:function(t,e,n){var r=(0,nt.Z)(t)?t:t.src;if(st.has(r)){var i=st.get(r,e);if(i.img.complete)return null==n||n(i),i}return this.getOrCreateImage(t,e).then((function(t){null==n||n(t)})).catch((function(t){console.error(t)})),null}},{key:"getOrCreateImage",value:function(t,e){var n=this,r=(0,nt.Z)(t)?t:t.src;if(!(0,nt.Z)(t)&&!st.has(r)){var i={img:t,size:[t.naturalWidth||t.width,t.naturalHeight||t.height],tileSize:lt(t)};st.put(r,i,e)}if(st.has(r)){var a=st.get(r,e);return a.img.complete?Promise.resolve(a):new Promise((function(t,e){a.img.addEventListener("load",(function(){a.size=[a.img.naturalWidth||a.img.width,a.img.naturalHeight||a.img.height],a.tileSize=lt(a.img),t(a)})),a.img.addEventListener("error",(function(t){e(t)}))}))}return new Promise((function(t,i){var a=n.context.config.createImage();if(a){var o={img:a,size:[0,0],tileSize:lt(a)};st.put(r,o,e),a.onload=function(){o.size=[a.naturalWidth||a.width,a.naturalHeight||a.height],o.tileSize=lt(o.img),t(o)},a.onerror=function(t){i(t)},a.crossOrigin="Anonymous",a.src=r}}))}},{key:"createDownSampledImage",value:(e=(0,k.Z)((0,x.Z)().mark((function t(e,n){var r,i,a,o,s,u,c,h,f,d,p,v,g,y;return(0,x.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrCreateImage(e,n);case 2:if(void 0===(r=t.sent).downSamplingRate){t.next=5;break}return t.abrupt("return",r);case 5:if(i=this.context.config.enableLargeImageOptimization,o=(a="boolean"==typeof i?{}:i).maxDownSampledImageSize,s=void 0===o?2048:o,u=a.downSamplingRateThreshold,c=void 0===u?.5:u,h=this.runtime.globalThis.createImageBitmap,f=(0,l.Z)(r.size,2),d=f[0],p=f[1],v=r.img,g=Math.min((s+s)/(d+p),Math.max(.01,Math.min(c,.5))),y=(0,S.Z)((0,S.Z)({},r),{},{downSamplingRate:g}),st.update(r.img.src,y,n),!h){t.next=25;break}return t.prev=14,t.next=17,h(r.img,{resizeWidth:d*g,resizeHeight:p*g});case 17:v=t.sent,t.next=23;break;case 20:t.prev=20,t.t0=t.catch(14),g=1;case 23:t.next=26;break;case 25:g=1;case 26:return y=(0,S.Z)((0,S.Z)({},this.getImageSync(e,n)),{},{downSampled:v,downSamplingRate:g}),st.update(r.img.src,y,n),t.abrupt("return",y);case 29:case"end":return t.stop()}}),t,this,[[14,20]])}))),function(t,n){return e.apply(this,arguments)})},{key:"createImageTiles",value:(t=(0,k.Z)((0,x.Z)().mark((function t(e,n,r,i){var a,o,u,l,c;return(0,x.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrCreateImage(e,i);case 2:return a=t.sent,o=i.ownerDocument.defaultView,u=o.requestAnimationFrame,l=o.cancelAnimationFrame,ot.api={requestAnimationFrame:u,cancelAnimationFrame:l,createCanvas:function(){return s.jB.createCanvas()}},c=(0,S.Z)((0,S.Z)({},a),ot.sliceImage(a.img,a.tileSize[0],a.tileSize[0],r)),st.update(a.img.src,c,i),t.abrupt("return",c);case 8:case"end":return t.stop()}}),t,this)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"releaseImage",value:function(t,e){st.release((0,nt.Z)(t)?t:t.src,e)}},{key:"releaseImageRef",value:function(t){st.releaseRef(t)}},{key:"getOrCreatePatternSync",value:function(t,e,n,r,i,a,o){var u=this.generatePatternKey(e);if(u&&this.patternCache[u])return this.patternCache[u];var l,c=e.image,h=e.repetition,f=e.transform,d=!1;if((0,nt.Z)(c)){var p=this.getImageSync(c,t,o);l=null==p?void 0:p.img}else r?(l=r,d=!0):l=c;var v,g=l&&n.createPattern(l,h);g&&(v=f?(0,s.G0)((0,s.G$)(f),new s.s$({})):E.identity(E.create()),d&&E.scale(v,v,[1/i,1/i,1]),g.setTransform({a:v[0],b:v[1],c:v[4],d:v[5],e:v[12]+a[0],f:v[13]+a[1]}));return u&&g&&(this.patternCache[u]=g),g}},{key:"getOrCreateGradient",value:function(t,e){var n=this.generateGradientKey(t),r=t.type,i=t.steps,a=t.min,o=t.width,u=t.height,l=t.angle,c=t.cx,h=t.cy,f=t.size;if(this.gradientCache[n])return this.gradientCache[n];var d=null;if(r===s.GL.LinearGradient){var p=(0,s.Rx)(a,o,u,l),v=p.x1,g=p.y1,y=p.x2,m=p.y2;d=e.createLinearGradient(v,g,y,m)}else if(r===s.GL.RadialGradient){var b=(0,s.o6)(a,o,u,c,h,f),x=b.x,k=b.y,w=b.r;d=e.createRadialGradient(x,k,0,x,k,w)}return d&&(i.forEach((function(t){var e,n=t.offset,r=t.color;n.unit===s.Cm.kPercentage&&(null===(e=d)||void 0===e||e.addColorStop(n.value/100,r.toString()))})),this.gradientCache[n]=d),this.gradientCache[n]}},{key:"generateGradientKey",value:function(t){var e=t.type,n=t.min,r=t.width,i=t.height,a=t.steps,o=t.angle,s=t.cx,u=t.cy,l=t.size;return"gradient-".concat(e,"-").concat((null==o?void 0:o.toString())||0,"-").concat((null==s?void 0:s.toString())||0,"-").concat((null==u?void 0:u.toString())||0,"-").concat((null==l?void 0:l.toString())||0,"-").concat(n[0],"-").concat(n[1],"-").concat(r,"-").concat(i,"-").concat(a.map((function(t){var e=t.offset,n=t.color;return"".concat(e).concat(n)})).join("-"))}},{key:"generatePatternKey",value:function(t){var e=t.image,n=t.repetition;return(0,nt.Z)(e)?"pattern-".concat(e,"-").concat(n):"rect"===e.nodeName?"pattern-".concat(e.entity,"-").concat(n):void 0}}]);var t,e}();function lt(t){if(!t.complete)return[0,0];var e=t.naturalWidth||t.width,n=t.naturalHeight||t.height,r=256;return[256,512].forEach((function(t){Math.ceil(n/t)*Math.ceil(e/t)<1e3&&(r=t)})),[r,r]}ut.isSupportTile=!!s.jB.createCanvas();var ct=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"apply",value:function(e){var n=e.renderingService,r=e.renderingContext,i=e.imagePool,a=r.root.ownerDocument.defaultView,o=function(t,e,n){var r=t.parsedStyle,i=r.width,a=r.height;i&&!a?t.setAttribute("height",n/e*i):!i&&a&&t.setAttribute("width",e/n*a)},u=function(t){var e=t.target,r=e.nodeName,a=e.attributes;if(r===s.bn.IMAGE){var u=a.src,l=a.keepAspectRatio;i.getImageSync(u,e,(function(t){var r=t.img,i=r.width,a=r.height;l&&o(e,i,a),e.renderable.dirty=!0,n.dirtify()}))}},l=function(t){var e=t.target,r=t.attrName,a=t.prevValue,u=t.newValue;e.nodeName===s.bn.IMAGE&&"src"===r&&(a!==u&&i.releaseImage(a,e),(0,nt.Z)(u)&&i.getOrCreateImage(u,e).then((function(t){var r=t.img,i=r.width,a=r.height;e.attributes.keepAspectRatio&&o(e,i,a),e.renderable.dirty=!0,n.dirtify()})).catch((function(){})))};n.hooks.init.tap(t.tag,(function(){a.addEventListener(s.Dk.MOUNTED,u),a.addEventListener(s.Dk.ATTR_MODIFIED,l)})),n.hooks.destroy.tap(t.tag,(function(){a.removeEventListener(s.Dk.MOUNTED,u),a.removeEventListener(s.Dk.ATTR_MODIFIED,l)}))}}])}();ct.tag="LoadImage";var ht=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=(0,a.Z)(this,e,[].concat(r))).name="image-loader",t}return(0,o.Z)(e,t),(0,r.Z)(e,[{key:"init",value:function(t){this.context.imagePool=new ut(this.context,t),this.addRenderingPlugin(new ct)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(s.F6),ft=tt("renderState"),dt=function(){function t(e){(0,i.Z)(this,t),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,ft,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=E.create(),this.dprMatrix=E.create(),this.tmpMat4=E.create(),this.vec3a=w.Ue(),this.vec3b=w.Ue(),this.vec3c=w.Ue(),this.vec3d=w.Ue(),this.canvasRendererPluginOptions=e}return(0,r.Z)(t,[{key:"apply",value:function(e,n){var r=this;this.context=e;var i=this.context,a=i.config,o=i.camera,u=i.renderingService,l=i.renderingContext,c=i.rBushRoot,h=i.pathGeneratorFactory,f=a.renderer.getConfig().enableRenderingOptimization;a.renderer.getConfig().enableDirtyCheck=!1,a.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=c,this.pathGeneratorFactory=h;var d=e.contextService,p=l.root.ownerDocument.defaultView,v=function(t){var e=t.target.rBushNode;e.aabb&&r.removedRBushNodeAABBs.push(e.aabb)},g=function(t){var e=t.target.rBushNode;e.aabb&&r.removedRBushNodeAABBs.push(e.aabb)};u.hooks.init.tap(t.tag,(function(){p.addEventListener(s.Dk.UNMOUNTED,v),p.addEventListener(s.Dk.CULLED,g);var t=d.getDPR(),e=a.width,n=a.height,i=d.getContext();r.clearRect(i,0,0,e*t,n*t,a.background)})),u.hooks.destroy.tap(t.tag,(function(){p.removeEventListener(s.Dk.UNMOUNTED,v),p.removeEventListener(s.Dk.CULLED,g),r.renderQueue=[],r.removedRBushNodeAABBs=[],J(r,ft)[ft]={restoreStack:[],prevObject:null,currentContext:null}})),u.hooks.beginFrame.tap(t.tag,(function(){var t,e=d.getContext(),n=d.getDPR(),i=a.width,o=a.height,s=r.canvasRendererPluginOptions,l=s.dirtyObjectNumThreshold,c=s.dirtyObjectRatioThreshold,h=u.getStats(),f=h.total,v=h.rendered,g=v/f;r.clearFullScreen=r.clearFullScreenLastFrame||!(null!==(t=p.context.renderingPlugins[1])&&void 0!==t&&t.isFirstTimeRenderingFinished)||u.disableDirtyRectangleRendering()||v>l&&g>c,e&&("function"==typeof e.resetTransform?e.resetTransform():e.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(e,0,0,i*n,o*n,a.background))}));var y=function(t,e){for(var i=[t];i.length>0;){var a,o=i.pop();o.isVisible()&&!o.isCulled()&&(f?r.renderDisplayObjectOptimized(o,e,r.context,J(r,ft)[ft],n):r.renderDisplayObject(o,e,r.context,J(r,ft)[ft],n));for(var s=(null===(a=o.sortable)||void 0===a||null===(a=a.sorted)||void 0===a?void 0:a.length)>0?o.sortable.sorted:o.childNodes,u=s.length-1;u>=0;u--)i.push(s[u])}};u.hooks.endFrame.tap(t.tag,(function(){if(0!==l.root.childNodes.length){f=a.renderer.getConfig().enableRenderingOptimization,J(r,ft)[ft]={restoreStack:[],prevObject:null,currentContext:J(r,ft)[ft].currentContext},J(r,ft)[ft].currentContext.clear(),r.clearFullScreenLastFrame=!1;var t=d.getContext(),e=d.getDPR();if(E.fromScaling(r.dprMatrix,[e,e,1]),E.multiply(r.vpMatrix,r.dprMatrix,o.getOrthoMatrix()),r.clearFullScreen)f?(t.save(),y(l.root,t),t.restore()):y(l.root,t),r.removedRBushNodeAABBs=[];else{var i=r.safeMergeAABB.apply(r,[r.mergeDirtyAABBs(r.renderQueue)].concat((0,K.Z)(r.removedRBushNodeAABBs.map((function(t){var e=t.minX,n=t.minY,r=t.maxX,i=t.maxY,a=new s.mN;return a.setMinMax([e,n,0],[r,i,0]),a})))));if(r.removedRBushNodeAABBs=[],s.mN.isEmpty(i))return void(r.renderQueue=[]);var u=r.convertAABB2Rect(i),c=u.x,h=u.y,v=u.width,g=u.height,m=w.fF(r.vec3a,[c,h,0],r.vpMatrix),b=w.fF(r.vec3b,[c+v,h,0],r.vpMatrix),x=w.fF(r.vec3c,[c,h+g,0],r.vpMatrix),k=w.fF(r.vec3d,[c+v,h+g,0],r.vpMatrix),M=Math.min(m[0],b[0],k[0],x[0]),T=Math.min(m[1],b[1],k[1],x[1]),S=Math.max(m[0],b[0],k[0],x[0]),C=Math.max(m[1],b[1],k[1],x[1]),A=Math.floor(M),P=Math.floor(T),N=Math.ceil(S-M),R=Math.ceil(C-T);t.save(),r.clearRect(t,A,P,N,R,a.background),t.beginPath(),t.rect(A,P,N,R),t.clip(),t.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]),a.renderer.getConfig().enableDirtyRectangleRenderingDebug&&p.dispatchEvent(new s.Aw(s.$6.DIRTY_RECTANGLE,{dirtyRect:{x:A,y:P,width:N,height:R}})),r.searchDirtyObjects(i).sort((function(t,e){return t.sortable.renderOrder-e.sortable.renderOrder})).forEach((function(e){e&&e.isVisible()&&!e.isCulled()&&r.renderDisplayObject(e,t,r.context,J(r,ft)[ft],n)})),t.restore(),r.renderQueue.forEach((function(t){r.saveDirtyAABB(t)})),r.renderQueue=[]}J(r,ft)[ft].restoreStack.forEach((function(){t.restore()})),J(r,ft)[ft].restoreStack=[]}else r.clearFullScreenLastFrame=!0})),u.hooks.render.tap(t.tag,(function(t){r.clearFullScreen||r.renderQueue.push(t)}))}},{key:"clearRect",value:function(t,e,n,r,i,a){t.clearRect(e,n,r,i),a&&(t.fillStyle=a,t.fillRect(e,n,r,i))}},{key:"renderDisplayObjectOptimized",value:function(t,e,n,r,i){var a=t.nodeName,o=!1,u=this.context.styleRendererFactory[a],l=this.pathGeneratorFactory[a],c=t.parsedStyle.clipPath;if(c){(!r.prevObject||!E.exactEquals(c.getWorldTransform(),r.prevObject.getWorldTransform()))&&(this.applyWorldTransform(e,c),r.prevObject=null);var h=this.pathGeneratorFactory[c.nodeName];h&&(e.save(),o=!0,e.beginPath(),h(e,c.parsedStyle),e.closePath(),e.clip())}if(u){(!r.prevObject||!E.exactEquals(t.getWorldTransform(),r.prevObject.getWorldTransform()))&&this.applyWorldTransform(e,t);var f=!r.prevObject;if(!f){var d=r.prevObject.nodeName;f=a===s.bn.TEXT?d!==s.bn.TEXT:a===s.bn.IMAGE?d!==s.bn.IMAGE:d===s.bn.TEXT||d===s.bn.IMAGE}u.applyStyleToContext(e,t,f,r),r.prevObject=t}l&&(e.beginPath(),l(e,t.parsedStyle),a!==s.bn.LINE&&a!==s.bn.PATH&&a!==s.bn.POLYLINE&&e.closePath()),u&&u.drawToContext(e,t,J(this,ft)[ft],this,i),o&&e.restore(),t.renderable.dirty=!1}},{key:"renderDisplayObject",value:function(t,e,n,r,i){var a=t.nodeName,o=r.restoreStack[r.restoreStack.length-1];!o||t.compareDocumentPosition(o)&s.NB.DOCUMENT_POSITION_CONTAINS||(e.restore(),r.restoreStack.pop());var u=this.context.styleRendererFactory[a],l=this.pathGeneratorFactory[a],c=t.parsedStyle.clipPath;if(c){this.applyWorldTransform(e,c);var h=this.pathGeneratorFactory[c.nodeName];h&&(e.save(),r.restoreStack.push(t),e.beginPath(),h(e,c.parsedStyle),e.closePath(),e.clip())}u&&(this.applyWorldTransform(e,t),e.save(),this.applyAttributesToContext(e,t)),l&&(e.beginPath(),l(e,t.parsedStyle),a!==s.bn.LINE&&a!==s.bn.PATH&&a!==s.bn.POLYLINE&&e.closePath()),u&&(u.render(e,t.parsedStyle,t,n,this,i),e.restore()),t.renderable.dirty=!1}},{key:"applyAttributesToContext",value:function(t,e){var n=e.parsedStyle,r=n.stroke,i=n.fill,a=n.opacity,o=n.lineDash,s=n.lineDashOffset;o&&t.setLineDash(o),(0,et.Z)(s)||(t.lineDashOffset=s),(0,et.Z)(a)||(t.globalAlpha*=a),(0,et.Z)(r)||Array.isArray(r)||r.isNone||(t.strokeStyle=e.attributes.stroke),(0,et.Z)(i)||Array.isArray(i)||i.isNone||(t.fillStyle=e.attributes.fill)}},{key:"convertAABB2Rect",value:function(t){var e=t.getMin(),n=t.getMax(),r=Math.floor(e[0]),i=Math.floor(e[1]);return{x:r,y:i,width:Math.ceil(n[0])-r,height:Math.ceil(n[1])-i}}},{key:"mergeDirtyAABBs",value:function(t){var e=new s.mN;return t.forEach((function(t){var n=t.getRenderBounds();e.add(n);var r=t.renderable.dirtyRenderBounds;r&&e.add(r)})),e}},{key:"searchDirtyObjects",value:function(t){var e=t.getMin(),n=(0,l.Z)(e,2),r=n[0],i=n[1],a=t.getMax(),o=(0,l.Z)(a,2),s=o[0],u=o[1];return this.rBush.search({minX:r,minY:i,maxX:s,maxY:u}).map((function(t){return t.displayObject}))}},{key:"saveDirtyAABB",value:function(t){var e=t.renderable;e.dirtyRenderBounds||(e.dirtyRenderBounds=new s.mN);var n=t.getRenderBounds();n&&e.dirtyRenderBounds.update(n.center,n.halfExtents)}},{key:"applyWorldTransform",value:function(t,e,n){n?(E.copy(this.tmpMat4,e.getLocalTransform()),E.multiply(this.tmpMat4,n,this.tmpMat4),E.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(E.copy(this.tmpMat4,e.getWorldTransform()),E.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var t=new s.mN,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){t.add(e)})),t}}])}();function pt(t,e,n,r,i,a,o){var s,u;if("rect"===t.image.nodeName){var l=t.image.parsedStyle,c=l.width,h=l.height;u=r.contextService.getDPR();var f=r.config.offscreenCanvas;(s=a.offscreenCanvasCreator.getOrCreateCanvas(f)).width=c*u,s.height=h*u;var d=a.offscreenCanvasCreator.getOrCreateContext(f),p={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach((function(t){i.renderDisplayObject(t,d,r,p,a)})),p.restoreStack.forEach((function(){d.restore()}))}return o.getOrCreatePatternSync(e,t,n,s,u,e.getGeometryBounds().min,(function(){e.renderable.dirty=!0,r.renderingService.dirtify()}))}function vt(t,e,n,r){var i;if(t.type===s.GL.LinearGradient||t.type===s.GL.RadialGradient){var a=e.getGeometryBounds(),o=a&&2*a.halfExtents[0]||1,u=a&&2*a.halfExtents[1]||1,l=a&&a.min||[0,0];i=r.getOrCreateGradient((0,S.Z)((0,S.Z)({type:t.type},t.value),{},{min:l,width:o,height:u}),n)}return i}dt.tag="CanvasRenderer";var gt=["shadowBlur","shadowOffsetX","shadowOffsetY"],yt=["lineCap","lineJoin","miterLimit"],mt={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},bt={};function xt(t,e,n,r){var i=r.has(e)?r.get(e):mt[e];return i!==n&&("lineDash"===e?t.setLineDash(n):t[e]=n,r.set(e,n)),i}var kt=function(){return(0,r.Z)((function t(e){(0,i.Z)(this,t),this.imagePool=e}),[{key:"applyAttributesToContext",value:function(t,e){}},{key:"render",value:function(t,e,n,r,i,a){}},{key:"applyCommonStyleToContext",value:function(t,e,n,r){var i=n?bt:r.prevObject.parsedStyle,a=e.parsedStyle;(n||a.opacity!==i.opacity)&&xt(t,"globalAlpha",(0,et.Z)(a.opacity)?mt.globalAlpha:a.opacity,r.currentContext),(n||a.blend!==i.blend)&&xt(t,"globalCompositeOperation",(0,et.Z)(a.blend)?mt.globalCompositeOperation:a.blend,r.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(t,e,n,r){var i=n?bt:r.prevObject.parsedStyle,a=e.parsedStyle,o=a.lineWidth,s=void 0===o?mt.lineWidth:o,u=a.fill&&!a.fill.isNone;if(a.stroke&&!a.stroke.isNone&&s>0){if(n||e.attributes.stroke!==r.prevObject.attributes.stroke)xt(t,"strokeStyle",(0,et.Z)(a.stroke)||Array.isArray(a.stroke)||a.stroke.isNone?mt.strokeStyle:e.attributes.stroke,r.currentContext);(n||a.lineWidth!==i.lineWidth)&&xt(t,"lineWidth",(0,et.Z)(a.lineWidth)?mt.lineWidth:a.lineWidth,r.currentContext),(n||a.lineDash!==i.lineDash)&&xt(t,"lineDash",a.lineDash||mt.lineDash,r.currentContext),(n||a.lineDashOffset!==i.lineDashOffset)&&xt(t,"lineDashOffset",(0,et.Z)(a.lineDashOffset)?mt.lineDashOffset:a.lineDashOffset,r.currentContext);for(var l=0;l<yt.length;l++){var c=yt[l];(n||a[c]!==i[c])&&xt(t,c,(0,et.Z)(a[c])?mt[c]:a[c],r.currentContext)}}u&&(n||e.attributes.fill!==r.prevObject.attributes.fill)&&xt(t,"fillStyle",(0,et.Z)(a.fill)||Array.isArray(a.fill)||a.fill.isNone?mt.fillStyle:e.attributes.fill,r.currentContext)}},{key:"applyStyleToContext",value:function(t,e,n,r){var i=e.nodeName;this.applyCommonStyleToContext(t,e,n,r),i===s.bn.IMAGE||this.applyStrokeFillStyleToContext(t,e,n,r)}},{key:"applyShadowAndFilterStyleToContext",value:function(t,e,n,r){var i=e.parsedStyle;if(n){xt(t,"shadowColor",i.shadowColor.toString(),r.currentContext);for(var a=0;a<gt.length;a++){var o=gt[a];xt(t,o,i[o]||mt[o],r.currentContext)}}i.filter&&i.filter.length&&xt(t,"filter",e.attributes.filter,r.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e){xt(t,"shadowColor",mt.shadowColor,r.currentContext);for(var a=0;a<gt.length;a++){var o=gt[a];xt(t,o,mt[o],r.currentContext)}}if(n)if(e&&i){var s=t.filter;!(0,et.Z)(s)&&s.indexOf("drop-shadow")>-1&&xt(t,"filter",s.replace(/drop-shadow\([^)]*\)/,"").trim()||mt.filter,r.currentContext)}else xt(t,"filter",mt.filter,r.currentContext)}},{key:"fillToContext",value:function(t,e,n,r,i){var a=this,o=e.parsedStyle,u=o.fill,l=o.fillRule,c=null;if(Array.isArray(u)&&u.length>0)u.forEach((function(r){var i=xt(t,"fillStyle",vt(r,e,t,a.imagePool),n.currentContext);c=null!=c?c:i,l?t.fill(l):t.fill()}));else{if((0,s.R)(u)){var h=pt(u,e,t,e.ownerDocument.defaultView.context,r,i,this.imagePool);h&&(t.fillStyle=h,c=!0)}l?t.fill(l):t.fill()}null!==c&&xt(t,"fillStyle",c,n.currentContext)}},{key:"strokeToContext",value:function(t,e,n,r,i){var a=this,o=e.parsedStyle.stroke,u=null;if(Array.isArray(o)&&o.length>0)o.forEach((function(r){var i=xt(t,"strokeStyle",vt(r,e,t,a.imagePool),n.currentContext);u=null!=u?u:i,t.stroke()}));else{if((0,s.R)(o)){var l=pt(o,e,t,e.ownerDocument.defaultView.context,r,i,this.imagePool);if(l){var c=xt(t,"strokeStyle",l,n.currentContext);u=null!=u?u:c}}t.stroke()}null!==u&&xt(t,"strokeStyle",u,n.currentContext)}},{key:"drawToContext",value:function(t,e,n,r,i){var a,o=e.nodeName,u=e.parsedStyle,l=u.opacity,c=void 0===l?mt.globalAlpha:l,h=u.fillOpacity,f=void 0===h?mt.fillOpacity:h,d=u.strokeOpacity,p=void 0===d?mt.strokeOpacity:d,v=u.lineWidth,g=void 0===v?mt.lineWidth:v,y=u.fill&&!u.fill.isNone,m=u.stroke&&!u.stroke.isNone&&g>0;if(y||m){var b=!(0,et.Z)(u.shadowColor)&&u.shadowBlur>0,x="inner"===u.shadowType,k=0===(null===(a=u.fill)||void 0===a?void 0:a.alpha),w=!(!u.filter||!u.filter.length),E=b&&m&&(o===s.bn.PATH||o===s.bn.LINE||o===s.bn.POLYLINE||k||x),M=null;if(y)E||this.applyShadowAndFilterStyleToContext(t,e,b,n),M=xt(t,"globalAlpha",c*f,n.currentContext),this.fillToContext(t,e,n,r,i),E||this.clearShadowAndFilterStyleForContext(t,b,w,n);if(m){var T=!1,S=xt(t,"globalAlpha",c*p,n.currentContext);if(M=y?M:S,E&&(this.applyShadowAndFilterStyleToContext(t,e,b,n),T=!0,x)){var C=t.globalCompositeOperation;t.globalCompositeOperation="source-atop",this.strokeToContext(t,e,n,r,i),t.globalCompositeOperation=C,this.clearShadowAndFilterStyleForContext(t,b,w,n,!0)}this.strokeToContext(t,e,n,r,i),T&&this.clearShadowAndFilterStyleForContext(t,b,w,n)}null!==M&&xt(t,"globalAlpha",M,n.currentContext)}}}])}(),wt=function(t){function e(){return(0,i.Z)(this,e),(0,a.Z)(this,e,arguments)}return(0,o.Z)(e,t),(0,r.Z)(e,[{key:"render",value:function(t,e,n,r,i,a){var o=e.fill,u=e.fillRule,l=e.opacity,c=void 0===l?1:l,h=e.fillOpacity,f=void 0===h?1:h,d=e.stroke,p=e.strokeOpacity,v=void 0===p?1:p,g=e.lineWidth,y=void 0===g?1:g,m=e.lineCap,b=e.lineJoin,x=e.shadowType,k=e.shadowColor,w=e.shadowBlur,E=e.filter,M=e.miterLimit,T=o&&!o.isNone,S=d&&!d.isNone&&y>0,C=0===(null==o?void 0:o.alpha),A=!(!E||!E.length),P=!(0,et.Z)(k)&&w>0,N=n.nodeName,R="inner"===x,Z=S&&P&&(N===s.bn.PATH||N===s.bn.LINE||N===s.bn.POLYLINE||C||R);T&&(t.globalAlpha=c*f,Z||Et(n,t,P),Mt(t,n,o,u,r,i,a,this.imagePool),Z||this.clearShadowAndFilter(t,A,P)),S&&(t.globalAlpha=c*v,t.lineWidth=y,(0,et.Z)(M)||(t.miterLimit=M),(0,et.Z)(m)||(t.lineCap=m),(0,et.Z)(b)||(t.lineJoin=b),Z&&(R&&(t.globalCompositeOperation="source-atop"),Et(n,t,!0),R&&(Tt(t,n,d,r,i,a,this.imagePool),t.globalCompositeOperation=mt.globalCompositeOperation,this.clearShadowAndFilter(t,A,!0))),Tt(t,n,d,r,i,a,this.imagePool))}},{key:"clearShadowAndFilter",value:function(t,e,n){if(n&&(t.shadowColor="transparent",t.shadowBlur=0),e){var r=t.filter;!(0,et.Z)(r)&&r.indexOf("drop-shadow")>-1&&(t.filter=r.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(kt);function Et(t,e,n){var r=t.parsedStyle,i=r.filter,a=r.shadowColor,o=r.shadowBlur,s=r.shadowOffsetX,u=r.shadowOffsetY;i&&i.length&&(e.filter=t.style.filter),n&&(e.shadowColor=a.toString(),e.shadowBlur=o||0,e.shadowOffsetX=s||0,e.shadowOffsetY=u||0)}function Mt(t,e,n,r,i,a,o,u){var l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Array.isArray(n)?n.forEach((function(n){t.fillStyle=vt(n,e,t,u),l||(r?t.fill(r):t.fill())})):((0,s.R)(n)&&(t.fillStyle=pt(n,e,t,i,a,o,u)),l||(r?t.fill(r):t.fill()))}function Tt(t,e,n,r,i,a,o){var u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Array.isArray(n)?n.forEach((function(n){t.strokeStyle=vt(n,e,t,o),u||t.stroke()})):((0,s.R)(n)&&(t.strokeStyle=pt(n,e,t,r,i,a,o)),u||t.stroke())}var St=function(t){function e(){return(0,i.Z)(this,e),(0,a.Z)(this,e,arguments)}return(0,o.Z)(e,t),(0,r.Z)(e,[{key:"renderDownSampled",value:function(t,e,n,r){var i=r.src,a=r.imageCache;a.downSampled?t.drawImage(a.downSampled,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3])):this.imagePool.createDownSampledImage(i,n).then((function(){n.ownerDocument&&(n.renderable.dirty=!0,n.ownerDocument.defaultView.context.renderingService.dirtify())})).catch((function(t){console.error(t)}))}},{key:"renderTile",value:function(t,e,n,r){var i=r.src,a=r.imageCache,o=r.imageRect,s=r.drawRect,u=a.size,l=t.getTransform(),c=l.a,h=l.b,f=l.c,d=l.d,p=l.e,v=l.f;if(t.resetTransform(),null!=a&&a.gridSize){for(var g=[u[0]/o[2],u[1]/o[3]],y=[a.tileSize[0]/g[0],a.tileSize[1]/g[1]],m=[Math.floor((s[0]-o[0])/y[0]),Math.ceil((s[0]+s[2]-o[0])/y[0])],b=m[0],x=m[1],k=[Math.floor((s[1]-o[1])/y[1]),Math.ceil((s[1]+s[3]-o[1])/y[1])],w=k[1],E=k[0];E<=w;E++)for(var M=b;M<=x;M++){var T=a.tiles[E][M];if(T){var S=[Math.floor(o[0]+T.tileX*y[0]),Math.floor(o[1]+T.tileY*y[1]),Math.ceil(y[0]),Math.ceil(y[1])];t.drawImage(T.data,S[0],S[1],S[2],S[3])}}t.setTransform(c,h,f,d,p,v)}else this.imagePool.createImageTiles(i,[],(function(){n.ownerDocument&&(n.renderable.dirty=!0,n.ownerDocument.defaultView.context.renderingService.dirtify())}),n).catch((function(t){console.error(t)}))}},{key:"render",value:function(t,n,r){var i=n.x,a=void 0===i?0:i,o=n.y,s=void 0===o?0:o,u=n.width,c=n.height,h=n.src,f=n.shadowColor,d=n.shadowBlur,p=this.imagePool.getImageSync(h,r),v=null==p?void 0:p.img,g=u,y=c;if(v){var m,b,x,k,M,T,S,C,A,P,N,R,Z,O,L,_,I,D,F,B,G,z;g||(g=v.width),y||(y=v.height),Et(r,t,!(0,et.Z)(f)&&d>0);try{var V=r.ownerDocument.defaultView.getContextService().getDomElement(),j=V.width,W=V.height,H=t.getTransform(),U=H.a,Y=H.b,q=H.c,X=H.d,$=H.e,K=H.f,J=E.fromValues(U,q,0,0,Y,X,0,0,0,0,1,0,$,K,0,1),Q=(I=[a,s,g,y],D=J,F=w.fF(w.Ue(),[I[0],I[1],0],D),B=w.fF(w.Ue(),[I[0]+I[2],I[1],0],D),G=w.fF(w.Ue(),[I[0],I[1]+I[3],0],D),z=w.fF(w.Ue(),[I[0]+I[2],I[1]+I[3],0],D),[Math.min(F[0],B[0],G[0],z[0]),Math.min(F[1],B[1],G[1],z[1]),Math.max(F[0],B[0],G[0],z[0])-Math.min(F[0],B[0],G[0],z[0]),Math.max(F[1],B[1],G[1],z[1])-Math.min(F[1],B[1],G[1],z[1])]),tt=(m=[0,0,j,W],b=Q,x=(0,l.Z)(m,4),k=x[0],M=x[1],T=x[2],S=x[3],C=(0,l.Z)(b,4),A=C[0],P=C[1],N=C[2],R=C[3],Z=Math.max(k,A),O=Math.max(M,P),L=Math.min(k+T,A+N),_=Math.min(M+S,P+R),L<=Z||_<=O?null:[Z,O,L-Z,_-O]);if(!tt)return;if(!r.ownerDocument.defaultView.getConfig().enableLargeImageOptimization)return void e.renderFull(t,n,r,{image:v,drawRect:[a,s,g,y]});if(Q[2]/p.size[0]<(p.downSamplingRate||.5))return void this.renderDownSampled(t,n,r,{src:h,imageCache:p,drawRect:[a,s,g,y]});if(!ut.isSupportTile)return void e.renderFull(t,n,r,{image:v,drawRect:[a,s,g,y]});this.renderTile(t,n,r,{src:h,imageCache:p,imageRect:Q,drawRect:tt})}catch(t){}}}},{key:"drawToContext",value:function(t,e,n,r,i){this.render(t,e.parsedStyle,e)}}],[{key:"renderFull",value:function(t,e,n,r){t.drawImage(r.image,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3]))}}])}(wt),Ct=function(t){function e(){return(0,i.Z)(this,e),(0,a.Z)(this,e,arguments)}return(0,o.Z)(e,t),(0,r.Z)(e,[{key:"render",value:function(t,e,n,r,i,a){n.getBounds();var o=e.lineWidth,s=void 0===o?1:o,u=e.textAlign,l=void 0===u?"start":u,c=e.textBaseline,h=void 0===c?"alphabetic":c,f=e.lineJoin,d=void 0===f?"miter":f,p=e.miterLimit,v=void 0===p?10:p,g=e.letterSpacing,y=void 0===g?0:g,m=e.stroke,b=e.fill,x=e.fillRule,k=e.fillOpacity,w=void 0===k?1:k,E=e.strokeOpacity,M=void 0===E?1:E,T=e.opacity,S=void 0===T?1:T,C=e.metrics,A=e.x,P=void 0===A?0:A,N=e.y,R=void 0===N?0:N,Z=e.dx,O=e.dy,L=e.shadowColor,_=e.shadowBlur,I=C.font,D=C.lines,F=C.height,B=C.lineHeight,G=C.lineMetrics;t.font=I,t.lineWidth=s,t.textAlign="middle"===l?"center":l;var z=h;"alphabetic"===z&&(z="bottom"),t.lineJoin=d,(0,et.Z)(v)||(t.miterLimit=v);var V=R;"middle"===h?V+=-F/2-B/2:"bottom"===h||"alphabetic"===h||"ideographic"===h?V+=-F:"top"!==h&&"hanging"!==h||(V+=-B);var j=P+(Z||0);V+=O||0,1===D.length&&("bottom"===z?(z="middle",V-=.5*F):"top"===z&&(z="middle",V+=.5*F)),t.textBaseline=z,Et(n,t,!(0,et.Z)(L)&&_>0);for(var W=0;W<D.length;W++){var H=s/2+j;V+=B,(0,et.Z)(m)||m.isNone||!s||this.drawLetterSpacing(t,n,D[W],G[W],l,H,V,y,b,x,w,m,M,S,!0,r,i,a),(0,et.Z)(b)||this.drawLetterSpacing(t,n,D[W],G[W],l,H,V,y,b,x,w,m,M,S,!1,r,i,a)}}},{key:"drawLetterSpacing",value:function(t,e,n,r,i,a,o,s,u,l,c,h,f,d,p,v,g,y){if(0!==s){var m=t.textAlign;t.textAlign="left";var b=a;"center"===i||"middle"===i?b=a-r.width/2:"right"!==i&&"end"!==i||(b=a-r.width);for(var x=Array.from(n),k=t.measureText(n).width,w=0,E=0;E<x.length;++E){var M=x[E];p?this.strokeText(t,e,M,b,o,h,f,v,g,y):this.fillText(t,e,M,b,o,u,l,c,d,v,g,y),b+=k-(w=t.measureText(n.substring(E+1)).width)+s,k=w}t.textAlign=m}else p?this.strokeText(t,e,n,a,o,h,f,v,g,y):this.fillText(t,e,n,a,o,u,l,c,d,v,g,y)}},{key:"fillText",value:function(t,e,n,r,i,a,o,s,u,l,c,h){var f;Mt(t,e,a,o,l,c,h,this.imagePool,!0);var d=!(0,et.Z)(s)&&1!==s;d&&(f=t.globalAlpha,t.globalAlpha=s*u),t.fillText(n,r,i),d&&(t.globalAlpha=f)}},{key:"strokeText",value:function(t,e,n,r,i,a,o,s,u,l){var c;Tt(t,e,a,s,u,l,this.imagePool,!0);var h=!(0,et.Z)(o)&&1!==o;h&&(c=t.globalAlpha,t.globalAlpha=o),t.strokeText(n,r,i),h&&(t.globalAlpha=c)}},{key:"drawToContext",value:function(t,e,n,r,i){this.render(t,e.parsedStyle,e,e.ownerDocument.defaultView.context,r,i)}}])}(wt),At=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,e),(t=(0,a.Z)(this,e)).name="canvas-renderer",t.options=n,t}return(0,o.Z)(e,t),(0,r.Z)(e,[{key:"init",value:function(){var t,e=(0,S.Z)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),n=this.context.imagePool,r=new wt(n),i=(t={},(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)(t,s.bn.CIRCLE,r),s.bn.ELLIPSE,r),s.bn.RECT,r),s.bn.IMAGE,new St(n)),s.bn.TEXT,new Ct(n)),s.bn.LINE,r),s.bn.POLYLINE,r),s.bn.POLYGON,r),s.bn.PATH,r),s.bn.GROUP,void 0),(0,u.Z)((0,u.Z)((0,u.Z)(t,s.bn.HTML,void 0),s.bn.MESH,void 0),s.bn.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=i,this.context.styleRendererFactory=i,this.addRenderingPlugin(new dt(e))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(s.F6),Pt=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"apply",value:function(e,n){var r=this,i=e.renderingService,a=e.renderingContext,o=e.config;this.context=e;var s=a.root.ownerDocument.defaultView,u=function(t){i.hooks.pointerMove.call(t)},l=function(t){i.hooks.pointerUp.call(t)},c=function(t){i.hooks.pointerDown.call(t)},h=function(t){i.hooks.pointerOver.call(t)},f=function(t){i.hooks.pointerOut.call(t)},d=function(t){i.hooks.pointerCancel.call(t)},p=function(t){i.hooks.pointerWheel.call(t)},v=function(t){i.hooks.click.call(t)};i.hooks.init.tap(t.tag,(function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="none",t.style.msTouchAction="none"):s.supportsPointerEvents&&(t.style.touchAction="none"),s.supportsPointerEvents?function(t){n.globalThis.document.addEventListener("pointermove",u,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("pointerleave",f,!0),t.addEventListener("pointerover",h,!0),n.globalThis.addEventListener("pointerup",l,!0),n.globalThis.addEventListener("pointercancel",d,!0)}(t):function(t){n.globalThis.document.addEventListener("mousemove",u,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("mouseout",f,!0),t.addEventListener("mouseover",h,!0),n.globalThis.addEventListener("mouseup",l,!0)}(t),s.supportsTouchEvents&&function(t){t.addEventListener("touchstart",c,!0),t.addEventListener("touchend",l,!0),t.addEventListener("touchmove",u,!0),t.addEventListener("touchcancel",d,!0)}(t),o.useNativeClickEvent&&t.addEventListener("click",v,!0),t.addEventListener("wheel",p,{passive:!0,capture:!0})})),i.hooks.destroy.tap(t.tag,(function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="",t.style.msTouchAction=""):s.supportsPointerEvents&&(t.style.touchAction=""),s.supportsPointerEvents?function(t){n.globalThis.document.removeEventListener("pointermove",u,!0),t.removeEventListener("pointerdown",c,!0),t.removeEventListener("pointerleave",f,!0),t.removeEventListener("pointerover",h,!0),n.globalThis.removeEventListener("pointerup",l,!0),n.globalThis.removeEventListener("pointercancel",d,!0)}(t):function(t){n.globalThis.document.removeEventListener("mousemove",u,!0),t.removeEventListener("mousedown",c,!0),t.removeEventListener("mouseout",f,!0),t.removeEventListener("mouseover",h,!0),n.globalThis.removeEventListener("mouseup",l,!0)}(t),s.supportsTouchEvents&&function(t){t.removeEventListener("touchstart",c,!0),t.removeEventListener("touchend",l,!0),t.removeEventListener("touchmove",u,!0),t.removeEventListener("touchcancel",d,!0)}(t),o.useNativeClickEvent&&t.removeEventListener("click",v,!0),t.removeEventListener("wheel",p,!0)}))}}])}();Pt.tag="DOMInteraction";var Nt=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=(0,a.Z)(this,e,[].concat(r))).name="dom-interaction",t}return(0,o.Z)(e,t),(0,r.Z)(e,[{key:"init",value:function(){this.addRenderingPlugin(new Pt)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(s.F6),Rt=n(25897),Zt=function(){function t(){(0,i.Z)(this,t),this.displayObjectHTMLElementMap=new WeakMap}return(0,r.Z)(t,[{key:"joinTransformMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return"matrix(".concat([t[0],t[1],t[4],t[5],t[12]+e[0],t[13]+e[1]].join(","),")")}},{key:"apply",value:function(e,n){var r=this,i=e.camera,a=e.renderingContext,o=e.renderingService;this.context=e;var u=a.root.ownerDocument.defaultView,l=u.context.eventService.nativeHTMLMap,c=function(t,e){e.style.transform=r.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())},h=function(t){var e=t.target;if(e.nodeName===s.bn.HTML){r.$camera||(r.$camera=r.createCamera(i));var n=r.getOrCreateEl(e);r.$camera.appendChild(n),Object.keys(e.attributes).forEach((function(t){r.updateAttribute(t,e)})),c(e,n),l.set(n,e)}},f=function(t){var e=t.target;if(e.nodeName===s.bn.HTML&&r.$camera){var n=r.getOrCreateEl(e);n&&(n.remove(),l.delete(n))}},d=function(t){var e=t.target;if(e.nodeName===s.bn.HTML){var n=t.attrName;r.updateAttribute(n,e)}},p=function(t){var e=t.target;(e.nodeName===s.bn.FRAGMENT?e.childNodes:[e]).forEach((function(t){if(t.nodeName===s.bn.HTML){var e=r.getOrCreateEl(t);c(t,e)}}))},v=function(){if(r.$camera){var t=r.context.config,e=t.width,n=t.height;r.$camera.parentElement.style.width="".concat(e||0,"px"),r.$camera.parentElement.style.height="".concat(n||0,"px")}};o.hooks.init.tap(t.tag,(function(){u.addEventListener(s.$6.RESIZE,v),u.addEventListener(s.Dk.MOUNTED,h),u.addEventListener(s.Dk.UNMOUNTED,f),u.addEventListener(s.Dk.ATTR_MODIFIED,d),u.addEventListener(s.Dk.BOUNDS_CHANGED,p)})),o.hooks.endFrame.tap(t.tag,(function(){r.$camera&&a.renderReasons.has(s.Rr.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))})),o.hooks.destroy.tap(t.tag,(function(){r.$camera&&r.$camera.remove(),u.removeEventListener(s.$6.RESIZE,v),u.removeEventListener(s.Dk.MOUNTED,h),u.removeEventListener(s.Dk.UNMOUNTED,f),u.removeEventListener(s.Dk.ATTR_MODIFIED,d),u.removeEventListener(s.Dk.BOUNDS_CHANGED,p)}))}},{key:"createCamera",value:function(t){var e=this.context.config,n=e.document,r=e.width,i=e.height,a=this.context.contextService.getDomElement(),o=a.parentNode;if(o){var s="g-canvas-camera",u=o.querySelector("#".concat(s));if(!u){var l=(n||document).createElement("div");l.style.overflow="hidden",l.style.pointerEvents="none",l.style.position="absolute",l.style.left="0px",l.style.top="0px",l.style.width="".concat(r||0,"px"),l.style.height="".concat(i||0,"px");var c=(n||document).createElement("div");u=c,c.id=s,c.style.position="absolute",c.style.left="".concat(a.offsetLeft||0,"px"),c.style.top="".concat(a.offsetTop||0,"px"),c.style.transformOrigin="left top",c.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),c.style.pointerEvents="none",c.style.width="100%",c.style.height="100%",l.appendChild(c),o.appendChild(l)}return u}return null}},{key:"getOrCreateEl",value:function(t){var e=this.context.config.document,n=this.displayObjectHTMLElementMap.get(t);return n||(n=(e||document).createElement("div"),t.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(t,n),t.id&&(n.id=t.id),t.name&&n.setAttribute("name",t.name),t.className&&(n.className=t.className),n.style.position="absolute",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())),n}},{key:"updateAttribute",value:function(t,e){var n=this.getOrCreateEl(e);switch(t){case"innerHTML":var r=e.parsedStyle.innerHTML;(0,nt.Z)(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"x":n.style.left="".concat(e.parsedStyle.x,"px");break;case"y":n.style.top="".concat(e.parsedStyle.y,"px");break;case"transformOrigin":var i=e.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(i[0].buildCSSText(null,null,"")," ").concat(i[1].buildCSSText(null,null,""));break;case"width":var a=e.parsedStyle.width;n.style.width=(0,Rt.Z)(a)?"".concat(a,"px"):a.toString();break;case"height":var o=e.parsedStyle.height;n.style.height=(0,Rt.Z)(o)?"".concat(o,"px"):o.toString();break;case"zIndex":var u=e.parsedStyle.zIndex;n.style["z-index"]="".concat(u);break;case"visibility":var l=e.parsedStyle.visibility;n.style.visibility=l;break;case"pointerEvents":var c=e.parsedStyle.pointerEvents,h=void 0===c?"auto":c;n.style.pointerEvents=h;break;case"opacity":var f=e.parsedStyle.opacity;n.style.opacity="".concat(f);break;case"fill":var d=e.parsedStyle.fill,p="";(0,s.qA)(d)?p=d.isNone?"transparent":e.getAttribute("fill"):Array.isArray(d)?p=e.getAttribute("fill"):(0,s.R)(d),n.style.background=p;break;case"stroke":var v=e.parsedStyle.stroke,g="";(0,s.qA)(v)?g=v.isNone?"transparent":e.getAttribute("stroke"):Array.isArray(v)?g=e.getAttribute("stroke"):(0,s.R)(v),n.style["border-color"]=g,n.style["border-style"]="solid";break;case"lineWidth":var y=e.parsedStyle.lineWidth;n.style["border-width"]="".concat(y||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var m=e.style.filter;n.style.filter=m;break;default:(0,et.Z)(e.style[t])||""===e.style[t]||(n.style[t]=e.style[t])}}}])}();Zt.tag="HTMLRendering";var Ot=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=(0,a.Z)(this,e,[].concat(r))).name="html-renderer",t}return(0,o.Z)(e,t),(0,r.Z)(e,[{key:"init",value:function(){this.addRenderingPlugin(new Zt)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(s.F6),Lt=function(){return(0,r.Z)((function t(e){(0,i.Z)(this,t),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}),[{key:"init",value:function(){var t=this.canvasConfig,e=t.container,n=t.canvas;if(n)this.$canvas=n,e&&n.parentElement!==e&&e.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container;else if(e&&(this.$container=(0,nt.Z)(e)?document.getElementById(e):e,this.$container)){var r=document.createElement("canvas");this.$container.appendChild(r),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=r}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(t,e){var n=this.canvasConfig.devicePixelRatio;this.dpr=n,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,(0,s.$p)(this.$canvas,t,e)),this.renderingContext.renderReasons.add(s.Rr.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)}},{key:"toDataURL",value:(t=(0,k.Z)((0,x.Z)().mark((function t(){var e,n,r,i=arguments;return(0,x.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=i.length>0&&void 0!==i[0]?i[0]:{}).type,r=e.encoderOptions,t.abrupt("return",this.context.canvas.toDataURL(n,r));case 3:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t}(),_t=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=(0,a.Z)(this,e,[].concat(r))).name="canvas-context-register",t}return(0,o.Z)(e,t),(0,r.Z)(e,[{key:"init",value:function(){this.context.ContextService=Lt}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(s.F6),It=function(t){function e(t){var n;return(0,i.Z)(this,e),(n=(0,a.Z)(this,e,[t])).registerPlugin(new _t),n.registerPlugin(new ht),n.registerPlugin(new m),n.registerPlugin(new At),n.registerPlugin(new Nt),n.registerPlugin(new $),n.registerPlugin(new Ot),n}return(0,o.Z)(e,t),(0,r.Z)(e)}(s.I8)},40254:function(t,e,n){"use strict";n.d(e,{mN:function(){return Ot},I8:function(){return St},F6:function(){return Tt},ux:function(){return To},V1:function(){return ue},iM:function(){return re},Xz:function(){return Fo},$6:function(){return Zo},Cd:function(){return io},b_:function(){return oo},Aw:function(){return ra},s$:function(){return ro},BB:function(){return So},jf:function(){return Bt},Dk:function(){return da},Pj:function(){return so},xA:function(){return Qi},nR:function(){return ea},GL:function(){return an},ZA:function(){return uo},k9:function(){return co},Ee:function(){return ho},x1:function(){return po},NB:function(){return oa},jB:function(){return ua},y$:function(){return go},E9:function(){return Dt},mg:function(){return mo},aH:function(){return xo},h0:function(){return fe},UL:function(){return ko},Rr:function(){return la},bn:function(){return Et},xv:function(){return Eo},Cm:function(){return Ye},Rx:function(){return kn},o6:function(){return wn},YR:function(){return hr},O4:function(){return jt},Vl:function(){return Ht},Oi:function(){return ui},_O:function(){return zt},gz:function(){return Qn},qA:function(){return Zn},RV:function(){return Ja},L1:function(){return vi},R:function(){return Rn},lu:function(){return On},G$:function(){return Er},G0:function(){return Gi},N1:function(){return Fr},BV:function(){return Yt},GZ:function(){return Wa},$p:function(){return ci}});var r=n(1413),i=n(15671),a=n(43144),o=n(74902),s=n(53640),u=n(60136),l=n(97685),c=n(26729),h=n(77160),f=n(98333),d=n(85975),p=n(35600),v=n(32945),g=n(31437),y=n(25897),m=n(44078),b=n(95147),x=n(76714),k=n(81957),w=n(97582),E={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function M(t){return Array.isArray(t)&&t.every((function(t){var e=t[0].toLowerCase();return E[e]===t.length-1&&"achlmqstvz".includes(e)}))}function T(t){return M(t)&&t.every((function(t){var e=t[0];return e===e.toUpperCase()}))}function S(t){return T(t)&&t.every((function(t){var e=t[0];return"ACLMQZ".includes(e)}))}var C={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function A(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=E[n]&&("m"===n&&r.length>2?(t.segments.push([e].concat(r.splice(0,2))),n="l",e="m"===e?"l":"L"):t.segments.push([e].concat(r.splice(0,E[n]))),E[n]););}function P(t){var e=t.index,n=t.pathValue,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err='[path-util]: invalid Arc flag "'.concat(n[e],'", expecting 0 or 1 at index ').concat(e))}function N(t){return t>=48&&t<=57||43===t||45===t||46===t}function R(t){return t>=48&&t<=57}function Z(t){var e,n=t.max,r=t.pathValue,i=t.index,a=i,o=!1,s=!1,u=!1,l=!1;if(a>=n)t.err="[path-util]: Invalid path value at index ".concat(a,', "pathValue" is missing param');else if(43!==(e=r.charCodeAt(a))&&45!==e||(a+=1,e=r.charCodeAt(a)),R(e)||46===e){if(46!==e){if(o=48===e,a+=1,e=r.charCodeAt(a),o&&a<n&&e&&R(e))return void(t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(r[i],'" illegal number'));for(;a<n&&R(r.charCodeAt(a));)a+=1,s=!0;e=r.charCodeAt(a)}if(46===e){for(l=!0,a+=1;R(r.charCodeAt(a));)a+=1,u=!0;e=r.charCodeAt(a)}if(101===e||69===e){if(l&&!s&&!u)return void(t.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" invalid float exponent'));if(a+=1,43!==(e=r.charCodeAt(a))&&45!==e||(a+=1),!(a<n&&R(r.charCodeAt(a))))return void(t.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" invalid integer exponent'));for(;a<n&&R(r.charCodeAt(a));)a+=1}t.index=a,t.param=+t.pathValue.slice(i,a)}else t.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" is not a number')}function O(t){for(var e,n=t.pathValue,r=t.max;t.index<r&&(10===(e=n.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e));)t.index+=1}function L(t){var e=t.max,n=t.pathValue,r=t.index,i=n.charCodeAt(r),a=E[n[r].toLowerCase()];if(t.segmentStart=r,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}(i))if(t.index+=1,O(t),t.data=[],a){for(;;){for(var o=a;o>0;o-=1){if(97!=(32|i)||3!==o&&4!==o?Z(t):P(t),t.err.length)return;t.data.push(t.param),O(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,O(t))}if(t.index>=t.max)break;if(!N(n.charCodeAt(t.index)))break}A(t)}else A(t);else t.err='[path-util]: Invalid path value "'.concat(n[r],'" is not a path command')}var _=function(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""};function I(t){if(T(t))return[].concat(t);var e=function(t){if(M(t))return[].concat(t);var e=new _(t);for(O(e);e.index<e.max&&!e.err.length;)L(e);return e.err?e.err:e.segments}(t),n=0,r=0,i=0,a=0;return e.map((function(t){var e,o=t.slice(1).map(Number),s=t[0],u=s.toUpperCase();if("M"===s)return n=o[0],r=o[1],i=n,a=r,["M",n,r];if(s!==u)switch(u){case"A":e=[u,o[0],o[1],o[2],o[3],o[4],o[5]+n,o[6]+r];break;case"V":e=[u,o[0]+r];break;case"H":e=[u,o[0]+n];break;default:var l=o.map((function(t,e){return t+(e%2?r:n)}));e=[u].concat(l)}else e=[u].concat(o);var c=e.length;switch(u){case"Z":n=i,r=a;break;case"H":n=e[1];break;case"V":r=e[1];break;default:n=e[c-2],r=e[c-1],"M"===u&&(i=n,a=r)}return e}))}function D(t,e){var n=t[0],r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=t.slice(1).map(Number),u=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)u=["L",t[1],i];else if("V"===n)u=["L",r,t[1]];else if("S"===n){var l=2*r-a,c=2*i-o;e.x1=l,e.y1=c,u=["C",l,c].concat(s)}else if("T"===n){var h=2*r-e.qx,f=2*i-e.qy;e.qx=h,e.qy=f,u=["Q",h,f].concat(s)}else if("Q"===n){var d=s[0],p=s[1];e.qx=d,e.qy=p}return u}function F(t){if(S(t))return[].concat(t);for(var e=I(t),n=(0,w.pi)({},C),r=0;r<e.length;r+=1){e[r]=D(e[r],n);var i=e[r],a=i.length;n.x1=+i[a-2],n.y1=+i[a-1],n.x2=+i[a-4]||n.x1,n.y2=+i[a-3]||n.y1}return e}function B(t,e,n){var r=t[0],i=t[1];return[r+(e[0]-r)*n,i+(e[1]-i)*n]}function G(t,e,n,r,i){var a=(0,m.y)([t,e],[n,r]),o={x:0,y:0};if("number"==typeof i)if(i<=0)o={x:t,y:e};else if(i>=a)o={x:n,y:r};else{var s=B([t,e],[n,r],i/a);o={x:s[0],y:s[1]}}return{length:a,point:o,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function z(t,e){var n=t.x,r=t.y,i=e.x,a=e.y,o=n*i+r*a,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(a,2)));return(n*a-r*i<0?-1:1)*Math.acos(o/s)}function V(t,e,n,r,i,a,o,s,u,l){var c=Math.abs,h=Math.sin,f=Math.cos,d=Math.sqrt,p=Math.PI,v=c(n),g=c(r),y=(i%360+360)%360*(p/180);if(t===s&&e===u)return{x:t,y:e};if(0===v||0===g)return G(t,e,s,u,l).point;var m=(t-s)/2,b=(e-u)/2,x={x:f(y)*m+h(y)*b,y:-h(y)*m+f(y)*b},k=Math.pow(x.x,2)/Math.pow(v,2)+Math.pow(x.y,2)/Math.pow(g,2);k>1&&(v*=d(k),g*=d(k));var w=(Math.pow(v,2)*Math.pow(g,2)-Math.pow(v,2)*Math.pow(x.y,2)-Math.pow(g,2)*Math.pow(x.x,2))/(Math.pow(v,2)*Math.pow(x.y,2)+Math.pow(g,2)*Math.pow(x.x,2)),E=(a!==o?1:-1)*d(w=w<0?0:w),M=E*(v*x.y/g),T=E*(-g*x.x/v),S=f(y)*M-h(y)*T+(t+s)/2,C=h(y)*M+f(y)*T+(e+u)/2,A={x:(x.x-M)/v,y:(x.y-T)/g},P=z({x:1,y:0},A),N=z(A,{x:(-x.x-M)/v,y:(-x.y-T)/g});!o&&N>0?N-=2*p:o&&N<0&&(N+=2*p);var R=P+(N%=2*p)*l,Z=v*f(R),O=g*h(R);return{x:f(y)*Z-h(y)*O+S,y:h(y)*Z+f(y)*O+C}}function j(t,e,n,r,i,a,o,s,u,l,c){var h,f=c.bbox,d=void 0===f||f,p=c.length,v=void 0===p||p,g=c.sampleSize,y=void 0===g?30:g,b="number"==typeof l,x=t,k=e,w=0,E=[x,k,w],M=[x,k],T={x:0,y:0},S=[{x:x,y:k}];b&&l<=0&&(T={x:x,y:k});for(var C=0;C<=y;C+=1){if(x=(h=V(t,e,n,r,i,a,o,s,u,C/y)).x,k=h.y,d&&S.push({x:x,y:k}),v&&(w+=(0,m.y)(M,[x,k])),M=[x,k],b&&w>=l&&l>E[2]){var A=(w-l)/(w-E[2]);T={x:M[0]*(1-A)+E[0]*A,y:M[1]*(1-A)+E[1]*A}}E=[x,k,w]}return b&&l>=w&&(T={x:s,y:u}),{length:w,point:T,min:{x:Math.min.apply(null,S.map((function(t){return t.x}))),y:Math.min.apply(null,S.map((function(t){return t.y})))},max:{x:Math.max.apply(null,S.map((function(t){return t.x}))),y:Math.max.apply(null,S.map((function(t){return t.y})))}}}function W(t,e,n,r,i,a,o,s,u){var l=1-u;return{x:Math.pow(l,3)*t+3*Math.pow(l,2)*u*n+3*l*Math.pow(u,2)*i+Math.pow(u,3)*o,y:Math.pow(l,3)*e+3*Math.pow(l,2)*u*r+3*l*Math.pow(u,2)*a+Math.pow(u,3)*s}}function H(t,e,n,r,i,a,o,s,u,l){var c,h=l.bbox,f=void 0===h||h,d=l.length,p=void 0===d||d,v=l.sampleSize,g=void 0===v?10:v,y="number"==typeof u,b=t,x=e,k=0,w=[b,x,k],E=[b,x],M={x:0,y:0},T=[{x:b,y:x}];y&&u<=0&&(M={x:b,y:x});for(var S=0;S<=g;S+=1){if(b=(c=W(t,e,n,r,i,a,o,s,S/g)).x,x=c.y,f&&T.push({x:b,y:x}),p&&(k+=(0,m.y)(E,[b,x])),E=[b,x],y&&k>=u&&u>w[2]){var C=(k-u)/(k-w[2]);M={x:E[0]*(1-C)+w[0]*C,y:E[1]*(1-C)+w[1]*C}}w=[b,x,k]}return y&&u>=k&&(M={x:o,y:s}),{length:k,point:M,min:{x:Math.min.apply(null,T.map((function(t){return t.x}))),y:Math.min.apply(null,T.map((function(t){return t.y})))},max:{x:Math.max.apply(null,T.map((function(t){return t.x}))),y:Math.max.apply(null,T.map((function(t){return t.y})))}}}function U(t,e,n,r,i,a,o){var s=1-o;return{x:Math.pow(s,2)*t+2*s*o*n+Math.pow(o,2)*i,y:Math.pow(s,2)*e+2*s*o*r+Math.pow(o,2)*a}}function Y(t,e,n,r,i,a,o,s){var u,l=s.bbox,c=void 0===l||l,h=s.length,f=void 0===h||h,d=s.sampleSize,p=void 0===d?10:d,v="number"==typeof o,g=t,y=e,b=0,x=[g,y,b],k=[g,y],w={x:0,y:0},E=[{x:g,y:y}];v&&o<=0&&(w={x:g,y:y});for(var M=0;M<=p;M+=1){if(g=(u=U(t,e,n,r,i,a,M/p)).x,y=u.y,c&&E.push({x:g,y:y}),f&&(b+=(0,m.y)(k,[g,y])),k=[g,y],v&&b>=o&&o>x[2]){var T=(b-o)/(b-x[2]);w={x:k[0]*(1-T)+x[0]*T,y:k[1]*(1-T)+x[1]*T}}x=[g,y,b]}return v&&o>=b&&(w={x:i,y:a}),{length:b,point:w,min:{x:Math.min.apply(null,E.map((function(t){return t.x}))),y:Math.min.apply(null,E.map((function(t){return t.y})))},max:{x:Math.max.apply(null,E.map((function(t){return t.x}))),y:Math.max.apply(null,E.map((function(t){return t.y})))}}}function q(t,e,n){for(var r,i,a,o,s,u,l,c,h,f=F(t),d="number"==typeof e,p=[],v=0,g=0,y=0,m=0,b=[],x=[],k=0,w={x:0,y:0},E=w,M=w,T=w,S=0,C=0,A=f.length;C<A;C+=1)p=(l="M"===(c=(h=f[C])[0]))?p:[v,g].concat(h.slice(1)),l?(E=w={x:y=h[1],y:m=h[2]},k=0,d&&e<.001&&(T=w)):"L"===c?(k=(r=G(p[0],p[1],p[2],p[3],(e||0)-S)).length,w=r.min,E=r.max,M=r.point):"A"===c?(k=(i=j(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],(e||0)-S,n||{})).length,w=i.min,E=i.max,M=i.point):"C"===c?(k=(a=H(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],(e||0)-S,n||{})).length,w=a.min,E=a.max,M=a.point):"Q"===c?(k=(o=Y(p[0],p[1],p[2],p[3],p[4],p[5],(e||0)-S,n||{})).length,w=o.min,E=o.max,M=o.point):"Z"===c&&(k=(s=G((p=[v,g,y,m])[0],p[1],p[2],p[3],(e||0)-S)).length,w=s.min,E=s.max,M=s.point),d&&S<e&&S+k>=e&&(T=M),x.push(E),b.push(w),S+=k,v=(u="Z"!==c?h.slice(-2):[y,m])[0],g=u[1];return d&&e>=S&&(T={x:v,y:g}),{length:S,point:T,min:{x:Math.min.apply(null,b.map((function(t){return t.x}))),y:Math.min.apply(null,b.map((function(t){return t.y})))},max:{x:Math.max.apply(null,x.map((function(t){return t.x}))),y:Math.max.apply(null,x.map((function(t){return t.y})))}}}var X=n(71523),$=n(13882),K=n(80450),J=function(t,e){return(t%e+e)%e};function Q(t,e,n){if(t[n].length>7){t[n].shift();for(var r=t[n],i=n;r.length;)e[n]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}var tt=n(74873);var et=function(t,e,n,r){var i=B([t,e],[n,r],.5);return(0,w.ev)((0,w.ev)([],i,!0),[n,r,n,r],!1)};function nt(t,e){var n,r,i,a,o,s,u,l,c,h=t[0],f=t.slice(1).map(Number),d=f[0],p=f[1],v=e.x1,g=e.y1,y=e.x,m=e.y;switch("TQ".includes(h)||(e.qx=null,e.qy=null),h){case"M":return e.x=d,e.y=p,t;case"A":return n=[v,g].concat(f),["C"].concat((0,tt.W)(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));case"Q":return e.qx=d,e.qy=p,n=[v,g].concat(f),["C"].concat((r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],[(l=1/3)*r+(c=2/3)*a,l*i+c*o,l*s+c*a,l*u+c*o,s,u]));case"L":return["C"].concat(et(v,g,d,p));case"Z":return v===y&&g===m?["C",v,g,y,m,y,m]:["C"].concat(et(v,g,y,m))}return t}function rt(t,e){if(void 0===e&&(e=!1),function(t){return S(t)&&t.every((function(t){var e=t[0];return"MC".includes(e)}))}(t)){var n=[].concat(t);return e?[n,[]]:n}for(var r,i,a=F(t),o=(0,w.pi)({},C),s=[],u="",l=a.length,c=[],h=0;h<l;h+=1){a[h]&&(u=a[h][0]),s[h]=u;var f=nt(a[h],o);a[h]=f,Q(a,s,h),l=a.length,"Z"===u&&c.push(h),i=(r=a[h]).length,o.x1=+r[i-2],o.y1=+r[i-1],o.x2=+r[i-4]||o.x1,o.y2=+r[i-3]||o.y1}return e?[a,c]:a}function it(t){return t.map((function(t,e,n){var r=e&&n[e-1].slice(-2).concat(t.slice(1)),i=e?H(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],{bbox:!1}).length:0;return{s:t,ss:e?i?function(t,e){void 0===e&&(e=.5);var n=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),a=t.slice(6,8),o=B(n,r,e),s=B(r,i,e),u=B(i,a,e),l=B(o,s,e),c=B(s,u,e),h=B(l,c,e);return[["C"].concat(o,l,h),["C"].concat(c,u,a)]}(r):[t,t]:[t],l:i}}))}function at(t,e,n){var r=it(t),i=it(e),a=r.length,o=i.length,s=r.filter((function(t){return t.l})).length,u=i.filter((function(t){return t.l})).length,l=r.filter((function(t){return t.l})).reduce((function(t,e){return t+e.l}),0)/s||0,c=i.filter((function(t){return t.l})).reduce((function(t,e){return t+e.l}),0)/u||0,h=n||Math.max(a,o),f=[l,c],d=[h-a,h-o],p=0,v=[r,i].map((function(t,e){return t.l===h?t.map((function(t){return t.s})):t.map((function(t,n){return p=n&&d[e]&&t.l>=f[e],d[e]-=p?1:0,p?t.ss:[t.s]})).flat()}));return v[0].length===v[1].length?v:at(v[0],v[1],h)}function ot(t){return e=0,n=0,r=0,rt(t).map((function(t){var i;if("M"===t[0])return e=t[1],n=t[2],0;var a=t.slice(1),o=a[0],s=a[1],u=a[2],l=a[3],c=a[4],h=a[5];return r=function(t,e,n,r,i,a,o,s){return 3*((s-e)*(n+i)-(o-t)*(r+a)+r*(t-i)-n*(e-a)+s*(i+t/3)-o*(a+e/3))/20}(e,n,o,s,u,l,c,h),i=t.slice(-2),e=i[0],n=i[1],r})).reduce((function(t,e){return t+e}),0)>=0;var e,n,r}var st=n(71154),ut=n(5199),lt=n(90134),ct=n(45607),ht=n(4637);var ft=n(4942),dt=n(61120);function pt(){return pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=(0,dt.Z)(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},pt.apply(null,arguments)}function vt(t,e,n,r){var i=pt((0,dt.Z)(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof i?function(t){return i.apply(n,t)}:i}var gt=n(11702),yt=n(74165),mt=n(15861),bt=n(37762),xt=n(45987),kt=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self,{exports:{}});kt.exports=function(){function t(t,n,i,a,o){e(t,n,i||0,a||t.length-1,o||r)}function e(t,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-u*c/s+h)),Math.min(a,Math.floor(r+(s-u)*c/s+h)),o)}var f=t[r],d=i,p=a;for(n(t,i,r),o(t[a],f)>0&&n(t,i,a);d<p;){for(n(t,d,p),d++,p--;o(t[d],f)<0;)d++;for(;o(t[p],f)>0;)p--}0===o(t[i],f)?n(t,i,p):n(t,++p,a),p<=r&&(i=p+1),r<=p&&(a=p-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=y(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=e;a<n;a++){var o=t.children[a];u(i,t.leaf?r(o):o)}return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function p(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),a=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,a-r)}function v(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,r,i,a){for(var o=[n,r];o.length;)if(!((r=o.pop())-(n=o.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,a),o.push(n,s,s,r)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!g(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var a=0;a<e.children.length;a++){var o=e.children[a],s=e.leaf?r(o):o;g(t,s)&&(e.leaf?n.push(o):v(t,s)?this._all(o,n):i.push(o))}e=i.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!g(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],a=e.leaf?this.toBBox(i):i;if(g(t,a)){if(e.leaf||v(t,a))return!0;n.push(i)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=y([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,r,i,o=this.data,s=this.toBBox(t),u=[],l=[];o||u.length;){if(o||(o=u.pop(),r=u[u.length-1],n=l.pop(),i=!0),o.leaf){var c=a(t,o.children,e);if(-1!==c)return o.children.splice(c,1),u.push(o),this._condense(u),this}i||o.leaf||!v(o,s)?r?(n++,o=r.children[n],i=!1):o=null:(u.push(o),l.push(n),n=0,r=o,o=o.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=y(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=y([])).leaf=!1,i.height=r;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));m(t,e,n,l,this.compareMinX);for(var c=e;c<=n;c+=l){var h=Math.min(c+l-1,n);m(t,c,h,u,this.compareMinY);for(var f=c;f<=h;f+=u){var d=Math.min(f+u-1,h);i.children.push(this._build(t,f,d,r-1))}}return o(i,this.toBBox),i},i.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,a=1/0,o=void 0,s=0;s<e.children.length;s++){var u=e.children[s],l=h(u),c=d(t,u)-l;c<a?(a=c,i=l<i?l:i,o=u):c===a&&l<i&&(i=l,o=u)}e=o||e.children[0]}return e},i.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],a=this._chooseSubtree(r,this.data,e,i);for(a.children.push(t),u(a,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},i.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=y(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var r,i=1/0,a=1/0,o=e;o<=n-e;o++){var u=s(t,0,o,this.toBBox),l=s(t,o,n,this.toBBox),c=p(u,l),f=h(u)+h(l);c<i?(i=c,r=o,a=f<a?f:a):c===i&&f<a&&(a=f,r=o)}return r||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},i.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,a=s(t,0,e,i),o=s(t,n-e,n,i),l=f(a)+f(o),c=e;c<n-e;c++){var h=t.children[c];u(a,t.leaf?i(h):h),l+=f(a)}for(var d=n-e-1;d>=e;d--){var p=t.children[d];u(o,t.leaf?i(p):p),l+=f(o)}return l},i.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}();var wt=kt.exports,Et=function(t){return t.GROUP="g",t.FRAGMENT="fragment",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh",t}({}),Mt=function(t){return t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE",t}({}),Tt=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.plugins=[]}),[{key:"addRenderingPlugin",value:function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)}},{key:"removeAllRenderingPlugins",value:function(){var t=this;this.plugins.forEach((function(e){var n=t.context.renderingPlugins.indexOf(e);n>=0&&t.context.renderingPlugins.splice(n,1)}))}}])}(),St=function(){return(0,a.Z)((function t(e){(0,i.Z)(this,t),this.clipSpaceNearZ=Mt.NEGATIVE_ONE,this.plugins=[],this.config=(0,r.Z)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)}),[{key:"registerPlugin",value:function(t){-1===this.plugins.findIndex((function(e){return e===t}))&&this.plugins.push(t)}},{key:"unregisterPlugin",value:function(t){var e=this.plugins.findIndex((function(e){return e===t}));e>-1&&this.plugins.splice(e,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(t){return this.plugins.find((function(e){return e.name===t}))}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(t){Object.assign(this.config,t)}}])}(),Ct=h.IH,At=h.JG,Pt=h.Fp,Nt=h.VV,Rt=h.bA,Zt=h.lu,Ot=function(){function t(){(0,i.Z)(this,t),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return(0,a.Z)(t,[{key:"update",value:function(t,e){At(this.center,t),At(this.halfExtents,e),Zt(this.min,this.center,this.halfExtents),Ct(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){Ct(this.center,e,t),Rt(this.center,this.center,.5),Zt(this.halfExtents,e,t),Rt(this.halfExtents,this.halfExtents,.5),At(this.min,t),At(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){if(!t.isEmpty(e))if(t.isEmpty(this))this.setMinMax(e.getMin(),e.getMax());else{var n=this.center,r=n[0],i=n[1],a=n[2],o=this.halfExtents,s=o[0],u=o[1],l=o[2],c=r-s,h=r+s,f=i-u,d=i+u,p=a-l,v=a+l,g=e.center,y=g[0],m=g[1],b=g[2],x=e.halfExtents,k=x[0],w=x[1],E=x[2],M=y-k,T=y+k,S=m-w,C=m+w,A=b-E,P=b+E;M<c&&(c=M),T>h&&(h=T),S<f&&(f=S),C>d&&(d=C),A<p&&(p=A),P>v&&(v=P),n[0]=.5*(c+h),n[1]=.5*(f+d),n[2]=.5*(p+v),o[0]=.5*(h-c),o[1]=.5*(d-f),o[2]=.5*(v-p),this.min[0]=c,this.min[1]=f,this.min[2]=p,this.max[0]=h,this.max[1]=d,this.max[2]=v}}},{key:"setFromTransformedAABB",value:function(t,e){var n=this.center,r=this.halfExtents,i=t.center,a=t.halfExtents,o=e[0],s=e[4],u=e[8],l=e[1],c=e[5],h=e[9],f=e[2],d=e[6],p=e[10],v=Math.abs(o),g=Math.abs(s),y=Math.abs(u),m=Math.abs(l),b=Math.abs(c),x=Math.abs(h),k=Math.abs(f),w=Math.abs(d),E=Math.abs(p);n[0]=e[12]+o*i[0]+s*i[1]+u*i[2],n[1]=e[13]+l*i[0]+c*i[1]+h*i[2],n[2]=e[14]+f*i[0]+d*i[1]+p*i[2],r[0]=v*a[0]+g*a[1]+y*a[2],r[1]=m*a[0]+b*a[1]+x*a[2],r[2]=k*a[0]+w*a[1]+E*a[2],Zt(this.min,n,r),Ct(this.max,n,r)}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),i=t.getMin();return n[0]<=r[0]&&e[0]>=i[0]&&n[1]<=r[1]&&e[1]>=i[1]&&n[2]<=r[2]&&e[2]>=i[2]}},{key:"intersection",value:function(e){if(!this.intersects(e))return null;var n=new t,r=Pt([0,0,0],this.getMin(),e.getMin()),i=Nt([0,0,0],this.getMax(),e.getMax());return n.setMinMax(r,i),n}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?At([0,0,0],this.min):272===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?At([0,0,0],this.max):272===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(t){return!t||0===t.halfExtents[0]&&0===t.halfExtents[1]&&0===t.halfExtents[2]}}])}(),Lt=function(){return(0,a.Z)((function t(e,n){(0,i.Z)(this,t),this.distance=e||0,this.normal=n||h.al(0,1,0),this.updatePNVertexFlag()}),[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return h.AK(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/h.Zh(this.normal);h.bA(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),i=r/(r-this.distanceToPoint(e)),a=i>=0&&i<=1;return a&&n&&h.t7(n,t,e,i),a}}])}(),_t=function(t){return t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE",t}({}),It=function(){return(0,a.Z)((function t(e){if((0,i.Z)(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new Lt)}),[{key:"extractFromVPMatrix",value:function(t){var e=(0,l.Z)(t,16),n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],d=e[9],p=e[10],v=e[11],g=e[12],y=e[13],m=e[14],b=e[15];h.t8(this.planes[0].normal,a-n,c-o,v-f),this.planes[0].distance=b-g,h.t8(this.planes[1].normal,a+n,c+o,v+f),this.planes[1].distance=b+g,h.t8(this.planes[2].normal,a+r,c+s,v+d),this.planes[2].distance=b+y,h.t8(this.planes[3].normal,a-r,c-s,v-d),this.planes[3].distance=b-y,h.t8(this.planes[4].normal,a-i,c-u,v-p),this.planes[4].distance=b-m,h.t8(this.planes[5].normal,a+i,c+u,v+p),this.planes[5].distance=b+m,this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}])}(),Dt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,i.Z)(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return(0,a.Z)(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])}(),Ft=function(){function t(e,n,r,a){(0,i.Z)(this,t),this.x=e,this.y=n,this.width=r,this.height=a,this.left=e,this.right=e+r,this.top=n,this.bottom=n+a}return(0,a.Z)(t,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(e){return new t(e.x,e.y,e.width,e.height)}},{key:"applyTransform",value:function(e,n){var r=f.al(e.x,e.y,0,1),i=f.al(e.x+e.width,e.y,0,1),a=f.al(e.x,e.y+e.height,0,1),o=f.al(e.x+e.width,e.y+e.height,0,1),s=f.Ue(),u=f.Ue(),l=f.Ue(),c=f.Ue();f.fF(s,r,n),f.fF(u,i,n),f.fF(l,a,n),f.fF(c,o,n);var h=Math.min(s[0],u[0],l[0],c[0]),d=Math.min(s[1],u[1],l[1],c[1]),p=Math.max(s[0],u[0],l[0],c[0]),v=Math.max(s[1],u[1],l[1],c[1]);return t.fromRect({x:h,y:d,width:p-h,height:v-d})}}])}(),Bt="Method not implemented.",Gt="Use document.documentElement instead.";function zt(t){return void 0===t?0:t>360||t<-360?t%360:t}var Vt=h.Ue();function jt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Array.isArray(t)&&3===t.length?r?h.d9(t):h.JG(Vt,t):(0,y.Z)(t)?r?h.al(t,e,n):h.t8(Vt,t,e,n):r?h.al(t[0],t[1]||e,t[2]||n):h.t8(Vt,t[0],t[1]||e,t[2]||n)}var Wt=Math.PI/180;function Ht(t){return t*Wt}var Ut=180/Math.PI;function Yt(t){return t*Ut}var qt=Math.PI/2;function Xt(t,e){return 16===e.length?function(t,e){var n,r,i=d.getScaling(h.Ue(),e),a=(0,l.Z)(i,3),o=a[0],s=a[1],u=a[2],c=Math.asin(-e[2]/o);return c<qt?c>-qt?(n=Math.atan2(e[6]/s,e[10]/u),r=Math.atan2(e[1]/o,e[0]/o)):(r=0,n=-Math.atan2(e[4]/s,e[5]/s)):(r=0,n=Math.atan2(e[4]/s,e[5]/s)),t[0]=n,t[1]=c,t[2]=r,t}(t,e):function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=r*r,s=i*i,u=a*a,l=n*n+o+s+u,c=n*a-r*i;return c>.499995*l?(t[0]=qt,t[1]=2*Math.atan2(r,n),t[2]=0):c<-.499995*l?(t[0]=-qt,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-a*r)),t[1]=Math.atan2(2*(n*a+r*i),1-2*(s+u)),t[2]=Math.atan2(2*(n*r+i*a),1-2*(o+s))),t}(t,e)}function $t(t){var e=t[0],n=t[1],r=t[3],i=t[4],a=Math.sqrt(e*e+n*n),o=Math.sqrt(r*r+i*i);if(e*i-n*r<0&&(e<i?a=-a:o=-o),a){var s=1/a;e*=s,n*=s}if(o){var u=1/o;r*=u,i*=u}var l=Yt(Math.atan2(n,e));return[t[6],t[7],a,o,l]}var Kt=d.create(),Jt=d.create(),Qt=f.Ue(),te=[h.Ue(),h.Ue(),h.Ue()],ee=h.Ue();function ne(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var re=function(t){return t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING",t}({}),ie=function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC",t}({}),ae=function(t){return t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE",t}({}),oe="updated",se=2e-4,ue=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.clipSpaceNearZ=Mt.NEGATIVE_ONE,this.eventEmitter=new c,this.matrix=d.create(),this.right=h.al(1,0,0),this.up=h.al(0,1,0),this.forward=h.al(0,0,1),this.position=h.al(0,0,1),this.focalPoint=h.al(0,0,0),this.distanceVector=h.al(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=d.create(),this.projectionMatrixInverse=d.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=re.EXPLORING,this.trackingMode=ie.DEFAULT,this.projectionMode=ae.PERSPECTIVE,this.frustum=new It,this.orthoMatrix=d.create()}),[{key:"isOrtho",value:function(){return this.projectionMode===ae.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(t){this.enableUpdate=t}},{key:"setType",value:function(t,e){return this.type=t,this.type===re.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===re.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==re.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){return this.rotateWorld=t,this._getAngles(),this}},{key:"getViewTransform",value:function(){return d.invert(d.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(t,e){var n=d.fromTranslation(d.create(),[t,e,0]);this.jitteredProjectionMatrix=d.multiply(d.create(),n,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setProjectionMatrix",value:function(t){this.projectionMatrix=t}},{key:"setFov",value:function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setNear",value:function(t){return this.projectionMode===ae.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this}},{key:"setFar",value:function(t){return this.projectionMode===ae.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this}},{key:"setViewOffset",value:function(t,e,n,r,i,a){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.projectionMode===ae.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===ae.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(t){return this.zoom=t,this.projectionMode===ae.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===ae.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(t,e){var n=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),r=n.x,i=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(t),this.rotate(0,0,a);var o=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),s=o.x,u=o.y,c=h.al(s-r,u-i,0),f=h.AK(c,this.right)/h.kE(this.right),d=h.AK(c,this.up)/h.kE(this.up),p=this.getPosition(),v=(0,l.Z)(p,2),g=v[0],y=v[1],m=this.getFocalPoint(),b=(0,l.Z)(m,2),x=b[0],k=b[1];return this.setPosition(g-f,y-d),this.setFocalPoint(x-f,k-d),this}},{key:"setPerspective",value:function(t,e,n,r){var i;this.projectionMode=ae.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r;var a=this.near*Math.tan(Ht(.5*this.fov))/this.zoom,o=2*a,s=this.aspect*o,u=-.5*s;if(null!==(i=this.view)&&void 0!==i&&i.enabled){var l=this.view.fullWidth,c=this.view.fullHeight;u+=this.view.offsetX*s/l,a-=this.view.offsetY*o/c,s*=this.view.width/l,o*=this.view.height/c}return function(t,e,n,r,i,a,o){var s,u,l=2*a,c=n-e,h=r-i,f=l/c,d=l/h,p=(n+e)/c,v=(r+i)/h,g=o-a,y=o*a;arguments.length>7&&void 0!==arguments[7]&&arguments[7]?(s=-o/g,u=-y/g):(s=-(o+a)/g,u=-2*y/g),t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=p,t[9]=v,t[10]=s,t[11]=-1,t[12]=0,t[13]=0,t[14]=u,t[15]=0}(this.projectionMatrix,u,u+s,a-o,a,t,this.far,this.clipSpaceNearZ===Mt.ZERO),d.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(t,e,n,r,i,a){var o;this.projectionMode=ae.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=a;var s=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),l=(this.rright+this.left)/2,c=(this.top+this.bottom)/2,h=l-s,f=l+s,p=c+u,v=c-u;if(null!==(o=this.view)&&void 0!==o&&o.enabled){var g=(this.rright-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;f=(h+=g*this.view.offsetX)+g*this.view.width,v=(p-=y*this.view.offsetY)-y*this.view.height}return this.clipSpaceNearZ===Mt.NEGATIVE_ONE?d.ortho(this.projectionMatrix,h,f,p,v,i,a):d.orthoZO(this.projectionMatrix,h,f,p,v,i,a),d.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(t){var e=jt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2]);return this._setPosition(e),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],r=h.al(0,1,0);if(this.focalPoint=jt(t,e,n),this.trackingMode===ie.CINEMATIC){var i=h.$X(h.Ue(),this.focalPoint,this.position);t=i[0],e=i[1],n=i[2];var a=h.kE(i),o=Yt(Math.asin(e/a)),s=90+Yt(Math.atan2(n,t)),u=d.create();d.rotateY(u,u,Ht(s)),d.rotateX(u,u,Ht(o)),r=h.fF(h.Ue(),[0,1,0],u)}return d.invert(this.matrix,d.lookAt(d.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<se&&(this.distance=se),this.dollyingStep=this.distance/100;var e=h.Ue();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"setAzimuth",value:function(t){return this.azimuth=zt(t),this.computeMatrix(),this._getAxes(),this.type===re.ORBITING||this.type===re.EXPLORING?this._getPosition():this.type===re.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=zt(t),this.computeMatrix(),this._getAxes(),this.type===re.ORBITING||this.type===re.EXPLORING?this._getPosition():this.type===re.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(t){return this.roll=zt(t),this.computeMatrix(),this._getAxes(),this.type===re.ORBITING||this.type===re.EXPLORING?this._getPosition():this.type===re.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var t=v.yY(v.Ue(),[0,0,1],Ht(this.roll));d.identity(this.matrix);var e=v.yY(v.Ue(),[1,0,0],Ht((this.rotateWorld&&this.type!==re.TRACKING||this.type===re.TRACKING?1:-1)*this.elevation)),n=v.yY(v.Ue(),[0,1,0],Ht((this.rotateWorld&&this.type!==re.TRACKING||this.type===re.TRACKING?1:-1)*this.azimuth)),r=v.Jp(v.Ue(),n,e);r=v.Jp(v.Ue(),r,t);var i=d.fromQuat(d.create(),r);this.type===re.ORBITING||this.type===re.EXPLORING?(d.translate(this.matrix,this.matrix,this.focalPoint),d.multiply(this.matrix,this.matrix,i),d.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===re.TRACKING&&(d.translate(this.matrix,this.matrix,this.position),d.multiply(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=jt(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){h.JG(this.right,jt(f.fF(f.Ue(),[1,0,0,0],this.matrix))),h.JG(this.up,jt(f.fF(f.Ue(),[0,1,0,0],this.matrix))),h.JG(this.forward,jt(f.fF(f.Ue(),[0,0,1,0],this.matrix))),h.Fv(this.right,this.right),h.Fv(this.up,this.up),h.Fv(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=h.kE(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===re.TRACKING||this.rotateWorld?(this.elevation=Yt(Math.asin(e/r)),this.azimuth=Yt(Math.atan2(-t,-n))):(this.elevation=-Yt(Math.asin(e/r)),this.azimuth=-Yt(Math.atan2(-t,-n)))}},{key:"_getPosition",value:function(){h.JG(this.position,jt(f.fF(f.Ue(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){h.kK(this.distanceVector,[0,0,-this.distance],p.xO(p.Ue(),this.matrix)),h.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=h.$X(h.Ue(),this.focalPoint,this.position),this.distance=h.kE(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===ae.ORTHOGRAPHIC){var t=this.position,e=v.yY(v.Ue(),[0,0,1],-this.roll*Math.PI/180);d.fromRotationTranslationScaleOrigin(this.orthoMatrix,e,h.al((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),h.al(this.zoom,this.zoom,1),t)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var t=this.getViewTransform(),e=d.multiply(d.create(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(e),this.eventEmitter.emit(oe)}}},{key:"rotate",value:function(t,e,n){throw new Error(Bt)}},{key:"pan",value:function(t,e){throw new Error(Bt)}},{key:"dolly",value:function(t){throw new Error(Bt)}},{key:"createLandmark",value:function(t,e){throw new Error(Bt)}},{key:"gotoLandmark",value:function(t,e){throw new Error(Bt)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(Bt)}}])}(),le=function(t){return t[t.Standard=0]="Standard",t}({}),ce=function(t){return t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",t}({}),he={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Ft(0,0,0,0)},fe=function(t){return t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>",t}({});function de(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function pe(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ve(){}var ge=.7,ye=1/ge,me="\\s*([+-]?\\d+)\\s*",be="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ke=/^#([0-9a-f]{3,8})$/,we=new RegExp(`^rgb\\(${me},${me},${me}\\)$`),Ee=new RegExp(`^rgb\\(${xe},${xe},${xe}\\)$`),Me=new RegExp(`^rgba\\(${me},${me},${me},${be}\\)$`),Te=new RegExp(`^rgba\\(${xe},${xe},${xe},${be}\\)$`),Se=new RegExp(`^hsl\\(${be},${xe},${xe}\\)$`),Ce=new RegExp(`^hsla\\(${be},${xe},${xe},${be}\\)$`),Ae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Pe(){return this.rgb().formatHex()}function Ne(){return this.rgb().formatRgb()}function Re(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ke.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ze(e):3===n?new Le(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Oe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Oe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=we.exec(t))?new Le(e[1],e[2],e[3],1):(e=Ee.exec(t))?new Le(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Me.exec(t))?Oe(e[1],e[2],e[3],e[4]):(e=Te.exec(t))?Oe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Se.exec(t))?Ge(e[1],e[2]/100,e[3]/100,1):(e=Ce.exec(t))?Ge(e[1],e[2]/100,e[3]/100,e[4]):Ae.hasOwnProperty(t)?Ze(Ae[t]):"transparent"===t?new Le(NaN,NaN,NaN,0):null}function Ze(t){return new Le(t>>16&255,t>>8&255,255&t,1)}function Oe(t,e,n,r){return r<=0&&(t=e=n=NaN),new Le(t,e,n,r)}function Le(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function _e(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}`}function Ie(){const t=De(this.opacity);return`${1===t?"rgb(":"rgba("}${Fe(this.r)}, ${Fe(this.g)}, ${Fe(this.b)}${1===t?")":`, ${t})`}`}function De(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Fe(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Be(t){return((t=Fe(t))<16?"0":"")+t.toString(16)}function Ge(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ve(t,e,n,r)}function ze(t){if(t instanceof Ve)return new Ve(t.h,t.s,t.l,t.opacity);if(t instanceof ve||(t=Re(t)),!t)return new Ve;if(t instanceof Ve)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Ve(o,s,u,t.opacity)}function Ve(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function je(t){return(t=(t||0)%360)<0?t+360:t}function We(t){return Math.max(0,Math.min(1,t||0))}function He(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ue(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var u=t.apply(this,i);return n.cache=s.set(o,u)||s,u};return n.cache=new(Ue.Cache||Map),Ue.cacheList.push(n.cache),n}de(ve,Re,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Pe,formatHex:Pe,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ze(this).formatHsl()},formatRgb:Ne,toString:Ne}),de(Le,(function(t,e,n,r){return 1===arguments.length?((i=t)instanceof ve||(i=Re(i)),i?new Le((i=i.rgb()).r,i.g,i.b,i.opacity):new Le):new Le(t,e,n,null==r?1:r);var i}),pe(ve,{brighter(t){return t=null==t?ye:Math.pow(ye,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ge:Math.pow(ge,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Le(Fe(this.r),Fe(this.g),Fe(this.b),De(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_e,formatHex:_e,formatHex8:function(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}${Be(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ie,toString:Ie})),de(Ve,(function(t,e,n,r){return 1===arguments.length?ze(t):new Ve(t,e,n,null==r?1:r)}),pe(ve,{brighter(t){return t=null==t?ye:Math.pow(ye,t),new Ve(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ge:Math.pow(ge,t),new Ve(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Le(He(t>=240?t-240:t+120,i,r),He(t,i,r),He(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ve(je(this.h),We(this.s),We(this.l),De(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=De(this.opacity);return`${1===t?"hsl(":"hsla("}${je(this.h)}, ${100*We(this.s)}%, ${100*We(this.l)}%${1===t?")":`, ${t})`}`}})),Ue.Cache=Map,Ue.cacheList=[],Ue.clearCache=function(){Ue.cacheList.forEach((function(t){return t.clear()}))};var Ye=function(t){return t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger",t}({}),qe=function(t){return t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther",t}({}),Xe=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),$e=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),Ke=[{name:"em",unit_type:Ye.kEms},{name:"px",unit_type:Ye.kPixels},{name:"deg",unit_type:Ye.kDegrees},{name:"rad",unit_type:Ye.kRadians},{name:"grad",unit_type:Ye.kGradians},{name:"ms",unit_type:Ye.kMilliseconds},{name:"s",unit_type:Ye.kSeconds},{name:"rem",unit_type:Ye.kRems},{name:"turn",unit_type:Ye.kTurns}],Je=function(t){return t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType",t}({}),Qe=function(t){return t?"number"===t?Ye.kNumber:"percent"===t||"%"===t?Ye.kPercentage:function(t){return Ke.find((function(e){return e.name===t})).unit_type}(t):Ye.kUnknown},tn=function(t){var e=1;switch(t){case Ye.kPixels:case Ye.kDegrees:case Ye.kSeconds:break;case Ye.kMilliseconds:e=.001;break;case Ye.kRadians:e=180/Math.PI;break;case Ye.kGradians:e=.9;break;case Ye.kTurns:e=360}return e},en=function(t){switch(t){case Ye.kNumber:case Ye.kInteger:return"";case Ye.kPercentage:return"%";case Ye.kEms:return"em";case Ye.kRems:return"rem";case Ye.kPixels:return"px";case Ye.kDegrees:return"deg";case Ye.kRadians:return"rad";case Ye.kGradians:return"grad";case Ye.kMilliseconds:return"ms";case Ye.kSeconds:return"s";case Ye.kTurns:return"turn"}return""},nn=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"toString",value:function(){return this.buildCSSText(Xe.kNo,$e.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=Je.kUnitType&&this.getType()<=Je.kClampType}}],[{key:"isAngle",value:function(t){return t===Ye.kDegrees||t===Ye.kRadians||t===Ye.kGradians||t===Ye.kTurns}},{key:"isLength",value:function(t){return t>=Ye.kEms&&t<Ye.kDegrees}},{key:"isRelativeUnit",value:function(t){return t===Ye.kPercentage||t===Ye.kEms||t===Ye.kRems}},{key:"isTime",value:function(t){return t===Ye.kSeconds||t===Ye.kMilliseconds}}])}(),rn=function(t){function e(t){var n;return(0,i.Z)(this,e),(n=(0,s.Z)(this,e)).colorSpace=t,n}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"getType",value:function(){return Je.kColorType}},{key:"to",value:function(t){return this}}])}(nn),an=function(t){return t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient",t}({}),on=function(t){function e(t,n){var r;return(0,i.Z)(this,e),(r=(0,s.Z)(this,e)).type=t,r.value=n,r}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(t,e,n){return n}},{key:"getType",value:function(){return Je.kColorType}}])}(nn),sn=function(t){function e(t){var n;return(0,i.Z)(this,e),(n=(0,s.Z)(this,e)).value=t,n}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return Je.kKeywordType}},{key:"buildCSSText",value:function(t,e,n){return n+this.value}}])}(nn),un=function(t){return function(t){switch(t){case qe.kUNumber:return Ye.kNumber;case qe.kULength:return Ye.kPixels;case qe.kUPercent:return Ye.kPercentage;case qe.kUTime:return Ye.kSeconds;case qe.kUAngle:return Ye.kDegrees;default:return Ye.kUnknown}}(function(t){switch(t){case Ye.kNumber:case Ye.kInteger:return qe.kUNumber;case Ye.kPercentage:return qe.kUPercent;case Ye.kPixels:return qe.kULength;case Ye.kMilliseconds:case Ye.kSeconds:return qe.kUTime;case Ye.kDegrees:case Ye.kRadians:case Ye.kGradians:case Ye.kTurns:return qe.kUAngle;default:return qe.kUOther}}(t))},ln=function(t){function e(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye.kNumber;return(0,i.Z)(this,e),n=(0,s.Z)(this,e),r="string"==typeof a?Qe(a):a,n.unit=r,n.value=t,n}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(t){var e=t;return this.value===e.value&&this.unit===e.unit}},{key:"getType",value:function(){return Je.kUnitType}},{key:"convertTo",value:function(t){if(this.unit===t)return new e(this.value,this.unit);var n=un(this.unit);if(n!==un(t)||n===Ye.kUnknown)return null;var r=tn(this.unit)/tn(t);return new e(this.value*r,t)}},{key:"buildCSSText",value:function(t,e,n){var r;switch(this.unit){case Ye.kUnknown:break;case Ye.kInteger:r=Number(this.value).toFixed(0);break;case Ye.kNumber:case Ye.kPercentage:case Ye.kEms:case Ye.kRems:case Ye.kPixels:case Ye.kDegrees:case Ye.kRadians:case Ye.kGradians:case Ye.kMilliseconds:case Ye.kSeconds:case Ye.kTurns:var i=this.value,a=en(this.unit);if(i<-999999||i>999999){var o=en(this.unit);r=!Number.isFinite(i)||Number.isNaN(i)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Number.isFinite(t)?"NaN":t>0?"infinity":"-infinity")+e}(i,o):i+(o||"")}else r="".concat(i).concat(a)}return n+=r}}])}(nn),cn=new ln(0,"px");new ln(1,"px");var hn=new ln(0,"deg"),fn=function(t){function e(t,n,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,i.Z)(this,e),(a=(0,s.Z)(this,e,["rgb"])).r=t,a.g=n,a.b=r,a.alpha=o,a.isNone=u,a}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(t,e,n){return"".concat(n,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(rn),dn=new sn("unset"),pn={"":dn,unset:dn,initial:new sn("initial"),inherit:new sn("inherit")},vn=new fn(0,0,0,0,!0),gn=new fn(0,0,0,0),yn=Ue((function(t,e,n,r){return new fn(t,e,n,r)}),(function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")})),mn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye.kNumber;return new ln(t,e)};function bn(t){var e=t.type,n=t.value;return"hex"===e?"#".concat(n):"literal"===e?n:"rgb"===e?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}new ln(50,"%");var xn=function(){var t=/^(linear\-gradient)/i,e=/^(repeating\-linear\-gradient)/i,n=/^(radial\-gradient)/i,r=/^(repeating\-radial\-gradient)/i,i=/^(conic\-gradient)/i,a=/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,o=/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,s=/^(left|center|right|top|bottom)/i,u=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,l=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,c=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,h=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,f=/^\(/,d=/^\)/,p=/^,/,v=/^\#([0-9a-fA-F]+)/,g=/^([a-zA-Z]+)/,y=/^rgb/i,m=/^rgba/i,b=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,x="";function k(t){throw new Error("".concat(x,": ").concat(t))}function w(){var t=Z(E);return x.length>0&&k("Invalid input not EOF"),t}function E(){return M("linear-gradient",t,S)||M("repeating-linear-gradient",e,S)||M("radial-gradient",n,C)||M("repeating-radial-gradient",r,C)||M("conic-gradient",i,C)}function M(t,e,n){return T(e,(function(e){var r=n();return r&&(F(p)||k("Missing comma before color stops")),{type:t,orientation:r,colorStops:Z(O)}}))}function T(t,e){var n=F(t);if(n){F(f)||k("Missing (");var r=e(n);return F(d)||k("Missing )"),r}}function S(){return D("directional",a,1)||D("angular",h,1)}function C(){var t,e,n=A();return n&&((t=[]).push(n),e=x,F(p)&&((n=A())?t.push(n):x=e)),t}function A(){var t=function(){var t=D("shape",/^(circle)/i,0);t&&(t.style=I()||P());return t}()||function(){var t=D("shape",/^(ellipse)/i,0);t&&(t.style=_()||P());return t}();if(t)t.at=N();else{var e=P();if(e){t=e;var n=N();n&&(t.at=n)}else{var r=R();r&&(t={type:"default-radial",at:r})}}return t}function P(){return D("extent-keyword",o,1)}function N(){if(D("position",/^at/,0)){var t=R();return t||k("Missing positioning value"),t}}function R(){var t={x:_(),y:_()};if(t.x||t.y)return{type:"position",value:t}}function Z(t){var e=t(),n=[];if(e)for(n.push(e);F(p);)(e=t())?n.push(e):k("One extra comma");return n}function O(){var t=D("hex",v,1)||T(m,(function(){return{type:"rgba",value:Z(L)}}))||T(y,(function(){return{type:"rgb",value:Z(L)}}))||D("literal",g,0);return t||k("Expected color definition"),t.length=_(),t}function L(){return F(b)[1]}function _(){return D("%",l,1)||D("position-keyword",s,1)||I()}function I(){return D("px",u,1)||D("em",c,1)}function D(t,e,n){var r=F(e);if(r)return{type:t,value:r[n]}}function F(t){var e=/^[\n\r\t\s]+/.exec(x);e&&B(e[0].length);var n=t.exec(x);return n&&B(n[0].length),n}function B(t){x=x.substring(t)}return function(t){return x=t,w()}}();function kn(t,e,n,r){var i=Ht(r.value),a=0+e/2,o=0+n/2,s=Math.abs(e*Math.cos(i))+Math.abs(n*Math.sin(i));return{x1:t[0]+a-Math.cos(i)*s/2,y1:t[1]+o-Math.sin(i)*s/2,x2:t[0]+a+Math.cos(i)*s/2,y2:t[1]+o+Math.sin(i)*s/2}}function wn(t,e,n,r,i,a){var o=r.value,s=i.value;r.unit===Ye.kPercentage&&(o=r.value/100*e),i.unit===Ye.kPercentage&&(s=i.value/100*n);var u=Math.max((0,m.y)([0,0],[o,s]),(0,m.y)([0,n],[o,s]),(0,m.y)([e,n],[o,s]),(0,m.y)([e,0],[o,s]));return a&&(a instanceof ln?u=a.value:a instanceof sn&&("closest-side"===a.value?u=Math.min(o,e-o,s,n-s):"farthest-side"===a.value?u=Math.max(o,e-o,s,n-s):"closest-corner"===a.value&&(u=Math.min((0,m.y)([0,0],[o,s]),(0,m.y)([0,n],[o,s]),(0,m.y)([e,n],[o,s]),(0,m.y)([e,0],[o,s]))))),{x:o+t[0],y:s+t[1],r:u}}var En=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Mn=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Tn=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Sn=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;var Cn={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},An=Ue((function(t){var e;return e="angular"===t.type?Number(t.value):Cn[t.value]||0,mn(e,"deg")})),Pn=Ue((function(t){var e=50,n=50,r="%",i="%";if("position"===(null==t?void 0:t.type)){var a=t.value,o=a.x,s=a.y;"position-keyword"===(null==o?void 0:o.type)&&("left"===o.value?e=0:"center"===o.value?e=50:"right"===o.value?e=100:"top"===o.value?n=0:"bottom"===o.value&&(n=100)),"position-keyword"===(null==s?void 0:s.type)&&("left"===s.value?e=0:"center"===s.value?n=50:"right"===s.value?e=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),"px"!==(null==o?void 0:o.type)&&"%"!==(null==o?void 0:o.type)&&"em"!==(null==o?void 0:o.type)||(r=null==o?void 0:o.type,e=Number(o.value)),"px"!==(null==s?void 0:s.type)&&"%"!==(null==s?void 0:s.type)&&"em"!==(null==s?void 0:s.type)||(i=null==s?void 0:s.type,n=Number(s.value))}return{cx:mn(e,r),cy:mn(n,i)}})),Nn=Ue((function(t){if(t.indexOf("linear")>-1||t.indexOf("radial")>-1)return xn(t).map((function(t){var e=t.type,n=t.orientation,r=t.colorStops;!function(t){var e,n,r=t.length;t[r-1].length=null!==(e=t[r-1].length)&&void 0!==e?e:{type:"%",value:"100"},r>1&&(t[0].length=null!==(n=t[0].length)&&void 0!==n?n:{type:"%",value:"0"});for(var i=0,a=Number(t[0].length.value),o=1;o<r;o++){var s,u=null===(s=t[o].length)||void 0===s?void 0:s.value;if(!(0,b.Z)(u)&&!(0,b.Z)(a)){for(var l=1;l<o-i;l++)t[i+l].length={type:"%",value:"".concat(a+(Number(u)-a)*l/(o-i))};i=o,a=Number(u)}}}(r);var i,a=r.map((function(t){return{offset:mn(Number(t.length.value),"%"),color:bn(t)}}));if("linear-gradient"===e)return new on(an.LinearGradient,{angle:n?An(n):hn,steps:a});if("radial-gradient"===e&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var o,s=Pn(n[0].at),u=s.cx,l=s.cy;if(n[0].style){var c=n[0].style,h=c.type,f=c.value;"extent-keyword"===h?(pn[i=f]||(pn[i]=new sn(i)),o=pn[i]):o=mn(f,h)}return new on(an.RadialGradient,{cx:u,cy:l,size:o,steps:a})}}));var e=t[0];if("("===t[1]||"("===t[2])if("l"===e){var n=En.exec(t);if(n){var r,i=(null===(r=n[2].match(Sn))||void 0===r?void 0:r.map((function(t){return t.split(":")})))||[];return[new on(an.LinearGradient,{angle:mn(parseFloat(n[1]),"deg"),steps:i.map((function(t){var e=(0,l.Z)(t,2),n=e[0],r=e[1];return{offset:mn(100*Number(n),"%"),color:r}}))})]}}else if("r"===e){var a=function(t){var e=Mn.exec(t);if(e){var n,r=(null===(n=e[4].match(Sn))||void 0===n?void 0:n.map((function(t){return t.split(":")})))||[];return{cx:mn(50,"%"),cy:mn(50,"%"),steps:r.map((function(t){var e=(0,l.Z)(t,2),n=e[0],r=e[1];return{offset:mn(100*Number(n),"%"),color:r}}))}}return null}(t);if(a){if(!(0,x.Z)(a))return[new on(an.RadialGradient,a)];t=a}}else if("p"===e)return function(t){var e=Tn.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}(t)}));function Rn(t){return t&&!!t.image}function Zn(t){return t&&!(0,b.Z)(t.r)&&!(0,b.Z)(t.g)&&!(0,b.Z)(t.b)}var On=Ue((function(t){if(Rn(t))return(0,r.Z)({repetition:"repeat"},t);if((0,b.Z)(t)&&(t=""),"transparent"===t)return gn;if("currentColor"===t)t="black";else if("none"===t)return vn;var e=Nn(t);if(e)return e;var n=Re(t),i=[0,0,0,0];return null!==n&&(i[0]=n.r||0,i[1]=n.g||0,i[2]=n.b||0,i[3]=n.opacity),yn.apply(void 0,i)}));function Ln(t,e){if(Zn(t)&&Zn(e))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var e=t.slice();if(e[3])for(var n=0;n<3;n++)e[n]=Math.round((0,k.Z)(e[n],0,255));return e[3]=(0,k.Z)(e[3],0,1),"rgba(".concat(e.join(","),")")}]}function _n(t,e){if((0,b.Z)(e))return mn(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return mn(Number(e),"px");if("deg".search(t)>=0)return mn(Number(e),"deg")}var n=[];e=e.replace(t,(function(t){return n.push(t),"U".concat(t)}));var r="U(".concat(t.source,")");return n.map((function(t){return mn(Number(e.replace(new RegExp("U".concat(t),"g"),"").replace(new RegExp(r,"g"),"*0")),t)}))[0]}var In=function(t){return _n(new RegExp("px","g"),t)},Dn=Ue(In);Ue((function(t){return _n(new RegExp("%","g"),t)}));var Fn=function(t){return(0,y.Z)(t)||isFinite(Number(t))?mn(Number(t)||0,"px"):_n(new RegExp("px|%|em|rem","g"),t)},Bn=Ue(Fn),Gn=function(t){return _n(new RegExp("deg|rad|grad|turn","g"),t)},zn=Ue(Gn);function Vn(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a="",o=t.value||0,s=e.value||0,u=un(t.unit),l=t.convertTo(u),c=e.convertTo(u);return l&&c?(o=l.value,s=c.value,a=en(t.unit)):(ln.isLength(t.unit)||ln.isLength(e.unit))&&(o=Hn(t,i,n),s=Hn(e,i,n),a="px"),[o,s,function(t){return r&&(t=Math.max(t,0)),t+a}]}function jn(t){var e=0;return t.unit===Ye.kDegrees?e=t.value:t.unit===Ye.kRadians?e=Yt(Number(t.value)):t.unit===Ye.kTurns?e=360*Number(t.value):t.value&&(e=t.value),e}function Wn(t,e){var n;return Array.isArray(t)?n=t.map((function(t){return Number(t)})):(0,x.Z)(t)?n=t.split(" ").map((function(t){return Number(t)})):(0,y.Z)(t)&&(n=[t]),2===e?1===n.length?[n[0],n[0]]:[n[0],n[1]]:4===e?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:"even"===e&&n.length%2==1?[].concat((0,o.Z)(n),(0,o.Z)(n)):n}function Hn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.unit===Ye.kPixels)return Number(t.value);if(t.unit===Ye.kPercentage&&n){var i=n.nodeName===Et.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var Un=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function Yn(t){return t.toString()}var qn=function(t){return"number"==typeof t?mn(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?mn(Number(t)):mn(0)},Xn=Ue(qn);function $n(t,e){return[t,e,Yn]}function Kn(t,e){return function(n,r){return[n,r,function(n){return Yn((0,k.Z)(n,t,e))}]}}function Jn(t,e){if(t.length===e.length)return[t,e,function(t){return t}]}function Qn(t){var e;return 0===t.parsedStyle.d.totalLength&&(t.parsedStyle.d.totalLength=q(t.parsedStyle.d.absolutePath,void 0,(0,w.pi)((0,w.pi)({},e),{bbox:!1,length:!0})).length),t.parsedStyle.d.totalLength}function tr(t,e){return t[0]===e[0]&&t[1]===e[1]}function er(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||0===Math.sin(u)||(0,K.Z)(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(u/2-l)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0}}function nr(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}Ue((function(t){return(0,x.Z)(t)?t.split(" ").map(Xn):t.map(Xn)}));var rr=function(t,e){var n=t.x*e.x+t.y*e.y,r=Math.sqrt((Math.pow(t.x,2)+Math.pow(t.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2)));return(t.x*e.y-t.y*e.x<0?-1:1)*Math.acos(n/r)},ir=function(t,e,n,r,i,a,o,s){e=Math.abs(e),n=Math.abs(n);var u=Ht(r=J(r,360));if(t.x===o.x&&t.y===o.y)return{x:t.x,y:t.y,ellipticalArcAngle:0};if(0===e||0===n)return{x:0,y:0,ellipticalArcAngle:0};var l=(t.x-o.x)/2,c=(t.y-o.y)/2,h={x:Math.cos(u)*l+Math.sin(u)*c,y:-Math.sin(u)*l+Math.cos(u)*c},f=Math.pow(h.x,2)/Math.pow(e,2)+Math.pow(h.y,2)/Math.pow(n,2);f>1&&(e*=Math.sqrt(f),n*=Math.sqrt(f));var d=(Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(h.y,2)-Math.pow(n,2)*Math.pow(h.x,2))/(Math.pow(e,2)*Math.pow(h.y,2)+Math.pow(n,2)*Math.pow(h.x,2));d=d<0?0:d;var p=(i!==a?1:-1)*Math.sqrt(d),v=p*(e*h.y/n),g=p*(-n*h.x/e),y={x:Math.cos(u)*v-Math.sin(u)*g+(t.x+o.x)/2,y:Math.sin(u)*v+Math.cos(u)*g+(t.y+o.y)/2},m={x:(h.x-v)/e,y:(h.y-g)/n},b=rr({x:1,y:0},m),x=rr(m,{x:(-h.x-v)/e,y:(-h.y-g)/n});!a&&x>0?x-=2*Math.PI:a&&x<0&&(x+=2*Math.PI);var k=b+(x%=2*Math.PI)*s,w=e*Math.cos(k),E=n*Math.sin(k);return{x:Math.cos(u)*w-Math.sin(u)*E+y.x,y:Math.sin(u)*w+Math.cos(u)*E+y.y,ellipticalArcStartAngle:b,ellipticalArcEndAngle:b+x,ellipticalArcAngle:k,ellipticalArcCenter:y,resultantRx:e,resultantRy:n}};function ar(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.arcParams,i=r.rx,a=void 0===i?0:i,o=r.ry,s=void 0===o?0:o,u=r.xRotation,l=r.arcFlag,c=r.sweepFlag,h=ir({x:t.prePoint[0],y:t.prePoint[1]},a,s,u,!!l,!!c,{x:t.currentPoint[0],y:t.currentPoint[1]},e),f=ir({x:t.prePoint[0],y:t.prePoint[1]},a,s,u,!!l,!!c,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),d=f.x-h.x,p=f.y-h.y,v=Math.sqrt(d*d+p*p);return{x:-d/v,y:-p/v}}function or(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function sr(t,e){return or(t)*or(e)?(t[0]*e[0]+t[1]*e[1])/(or(t)*or(e)):1}function ur(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(sr(t,e))}function lr(t,e){var n=e[1],r=e[2],i=J(Ht(e[3]),2*Math.PI),a=e[4],o=e[5],s=t[0],u=t[1],l=e[6],c=e[7],h=Math.cos(i)*(s-l)/2+Math.sin(i)*(u-c)/2,f=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(u-c)/2,d=h*h/(n*n)+f*f/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var p=n*n*(f*f)+r*r*(h*h),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*f/r:0,y=n?v*-r*h/n:0,m=(s+l)/2+Math.cos(i)*g-Math.sin(i)*y,b=(u+c)/2+Math.sin(i)*g+Math.cos(i)*y,x=[(h-g)/n,(f-y)/r],k=[(-1*h-g)/n,(-1*f-y)/r],w=ur([1,0],x),E=ur(x,k);return sr(x,k)<=-1&&(E=Math.PI),sr(x,k)>=1&&(E=0),0===o&&E>0&&(E-=2*Math.PI),1===o&&E<0&&(E+=2*Math.PI),{cx:m,cy:b,rx:tr(t,[l,c])?0:n,ry:tr(t,[l,c])?0:r,startAngle:w,endAngle:w+E,xRotation:i,arcFlag:a,sweepFlag:o}}function cr(t,e,n,r){var i=(-1+Math.sqrt(2))/3*4,a=t*i,o=e*i,s=n-t,u=n+t,l=r-e,c=r+e;return[["M",s,r],["C",s,r-o,n-a,l,n,l],["C",n+a,l,u,r-o,u,r],["C",u,r+o,n+a,c,n,c],["C",n-a,c,s,r+o,s,r],["Z"]]}function hr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getLocalTransform(),n=[];switch(t.nodeName){case Et.LINE:var r=t.parsedStyle,i=r.x1,a=void 0===i?0:i,s=r.y1,u=void 0===s?0:s,c=r.x2,f=void 0===c?0:c,d=r.y2;n=function(t,e,n,r){return[["M",t,e],["L",n,r]]}(a,u,f,void 0===d?0:d);break;case Et.CIRCLE:var p=t.parsedStyle,v=p.r,g=void 0===v?0:v,y=p.cx,m=void 0===y?0:y,b=p.cy;n=cr(g,g,m,void 0===b?0:b);break;case Et.ELLIPSE:var x=t.parsedStyle,w=x.rx,E=void 0===w?0:w,M=x.ry,T=void 0===M?0:M,S=x.cx,C=void 0===S?0:S,A=x.cy;n=cr(E,T,C,void 0===A?0:A);break;case Et.POLYLINE:case Et.POLYGON:n=function(t,e){var n=t.map((function(t,e){return[0===e?"M":"L",t[0],t[1]]}));return e&&n.push(["Z"]),n}(t.parsedStyle.points.points,t.nodeName===Et.POLYGON);break;case Et.RECT:var P=t.parsedStyle,N=P.width,R=void 0===N?0:N,Z=P.height,O=void 0===Z?0:Z,L=P.x,_=void 0===L?0:L,I=P.y,D=void 0===I?0:I,F=P.radius,B=F&&F.some((function(t){return 0!==t}));n=function(t,e,n,r,i){if(i){var a=(0,l.Z)(i,4),o=a[0],s=a[1],u=a[2],c=a[3],h=t>0?1:-1,f=e>0?1:-1,d=h+f!==0?1:0;return[["M",h*o+n,r],["L",t-h*s+n,r],s?["A",s,s,0,0,d,t+n,f*s+r]:null,["L",t+n,e-f*u+r],u?["A",u,u,0,0,d,t+n-h*u,e+r]:null,["L",n+h*c,e+r],c?["A",c,c,0,0,d,n,e+r-f*c]:null,["L",n,f*o+r],o?["A",o,o,0,0,d,h*o+n,r]:null,["Z"]].filter((function(t){return t}))}return[["M",n,r],["L",n+t,r],["L",n+t,r+e],["L",n,r+e],["Z"]]}(R,O,_,D,B&&F.map((function(t){return(0,k.Z)(t,0,Math.min(Math.abs(R)/2,Math.abs(O)/2))})));break;case Et.PATH:var G=t.parsedStyle.d.absolutePath;n=(0,o.Z)(G)}if(n.length)return function(t,e,n){return t.reduce((function(t,e){var r="";if("M"===e[0]||"L"===e[0]){var i=h.al(e[1],e[2],0);n&&h.fF(i,i,n),r="".concat(e[0]).concat(i[0],",").concat(i[1])}else if("Z"===e[0])r=e[0];else if("C"===e[0]){var a=h.al(e[1],e[2],0),o=h.al(e[3],e[4],0),s=h.al(e[5],e[6],0);n&&(h.fF(a,a,n),h.fF(o,o,n),h.fF(s,s,n)),r="".concat(e[0]).concat(a[0],",").concat(a[1],",").concat(o[0],",").concat(o[1],",").concat(s[0],",").concat(s[1])}else if("A"===e[0]){var u=h.al(e[6],e[7],0);n&&h.fF(u,u,n),r="".concat(e[0]).concat(e[1],",").concat(e[2],",").concat(e[3],",").concat(e[4],",").concat(e[5],",").concat(u[0],",").concat(u[1])}else if("Q"===e[0]){var l=h.al(e[1],e[2],0),c=h.al(e[3],e[4],0);n&&(h.fF(l,l,n),h.fF(c,c,n)),r="".concat(e[0]).concat(e[1],",").concat(e[2],",").concat(e[3],",").concat(e[4],"}")}return t+r}),"")}(n,0,e)}var fr=function(t){if(""===t||Array.isArray(t)&&0===t.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=F(t)}catch(n){e=F(""),console.error("[g]: Invalid SVG Path definition: ".concat(t))}!function(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e];if("M"===r[0]&&n){var i=n[0],a=[r[1],r[2]],o=void 0;"L"===i||"M"===i?o=[n[1],n[2]]:"C"!==i&&"A"!==i&&"Q"!==i||(o=[n[n.length-2],n[n.length-1]]),o&&tr(a,o)&&(t.splice(e,1),e--)}}}(e);var n=function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e}(e),r=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var a=t[i],o=a[0];"M"===o?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):"Z"===o?r.length&&(e.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}(e),i=r.polygons,a=r.polylines,o=function(t){for(var e=[],n=null,r=null,i=null,a=0,o=t.length,s=0;s<o;s++){var u=t[s];r=t[s+1];var l=u[0],c={command:l,prePoint:n,params:u,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[u[1],u[2]],a=s;break;case"A":var h=lr(n,u);c.arcParams=h}if("Z"===l)n=i,r=t[a+1];else{var f=u.length;n=[u[f-2],u[f-1]]}r&&"Z"===r[0]&&(r=t[a],e[a]&&(e[a].prePoint=n)),c.currentPoint=n,e[a]&&tr(n,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=d;var p=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===l){var v=[u[1],u[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]]}else if("T"===l){var g=e[s-1],y=nr(g.currentPoint,p);"Q"===g.command?(c.command="Q",c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[n[0]-y[0],n[1]-y[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===l){var m=[u[1],u[2]],b=[u[3],u[4]];c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-b[0],n[1]-b[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[m[0]-b[0],m[1]-b[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[b[0]-m[0],b[1]-m[1]])}else if("S"===l){var x=e[s-1],k=nr(x.currentPoint,p),w=[u[1],u[2]];"C"===x.command?(c.command="C",c.startTangent=[p[0]-k[0],p[1]-k[1]],c.endTangent=[n[0]-w[0],n[1]-w[1]]):(c.command="SQ",c.startTangent=[p[0]-w[0],p[1]-w[1]],c.endTangent=[n[0]-w[0],n[1]-w[1]])}else if("A"===l){var E=ar(c,0),M=E.x,T=E.y,S=ar(c,1,!1),C=S.x,A=S.y;c.startTangent=[M,T],c.endTangent=[C,A]}e.push(c)}return e}(e),s=function(t,e){for(var n=[],r=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,u=o.params,l=o.prePoint,c=void 0;switch(o.command){case"Q":c=(0,gt.x4)(l[0],l[1],u[1],u[2],u[3],u[4]);break;case"C":c=(0,gt.l5)(l[0],l[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var h=o.arcParams;c=(0,gt.vp)(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:n.push(s[0]),r.push(s[1])}c&&(o.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&("L"===o.command||"M"===o.command)&&o.prePoint&&o.nextPoint&&i.push(o)}n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),r=r.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var f=(0,X.Z)(n),d=(0,X.Z)(r),p=(0,$.Z)(n),v=(0,$.Z)(r);if(0===i.length)return{x:f,y:d,width:p-f,height:v-d};for(var g=0;g<i.length;g++){var y=i[g],m=y.currentPoint;m[0]===f?f-=er(y,e).xExtra:m[0]===p&&(p+=er(y,e).xExtra),m[1]===d?d-=er(y,e).yExtra:m[1]===v&&(v+=er(y,e).yExtra)}return{x:f,y:d,width:p-f,height:v-d}}(o,0),u=s.x,l=s.y,c=s.width,h=s.height;return{absolutePath:e,hasArc:n,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(u)?u:0,y:Number.isFinite(l)?l:0,width:Number.isFinite(c)?c:0,height:Number.isFinite(h)?h:0}}},dr=Ue(fr);function pr(t){return(0,x.Z)(t)?dr(t):fr(t)}function vr(t,e,n){var r=t.curve,i=e.curve;r&&0!==r.length||(r=rt(t.absolutePath,!1),t.curve=r),i&&0!==i.length||(i=rt(e.absolutePath,!1),e.curve=i);var a=[r,i];r.length!==i.length&&(a=at(r,i));var o,s,u,l,c,h,f,d,p=ot(a[0])!==ot(a[1])?(o=a[0],s=o.slice(1).map((function(t,e,n){return e?n[e-1].slice(-2).concat(t.slice(1)):o[0].slice(1).concat(t.slice(1))})).map((function(t){return t.map((function(e,n){return t[t.length-n-2*(1-n%2)]}))})).reverse(),[["M"].concat(s[0].slice(0,2))].concat(s.map((function(t){return["C"].concat(t.slice(2))})))):a[0].map((function(t){return Array.isArray(t)?[].concat(t):t}));return[p,(u=a[1],l=p,c=u.length-1,h=[],f=0,d=function(t){var e=t.length,n=e-1;return t.map((function(r,i){return t.map((function(r,a){var o,s=i+a;return 0===a||t[s]&&"M"===t[s][0]?(o=t[s],["M"].concat(o.slice(-2))):(s>=e&&(s-=n),t[s])}))}))}(u),d.forEach((function(t,e){u.slice(1).forEach((function(t,n){f+=(0,m.y)(u[(e+n)%c].slice(-2),l[n%c].slice(-2))})),h[e]=f,f=0})),d[h.indexOf(Math.min.apply(null,h))]),function(t){return t}]}function gr(t,e){return[t.points,e.points,function(t){return t}]}var yr=null,mr=/\s*(\w+)\(([^)]*)\)/g;function br(t){return function(e){var n=0;return t.map((function(t){return t===yr?e[n++]:t}))}}function xr(t){return t}var kr={matrix:["NNNNNN",[yr,yr,0,0,yr,yr,0,0,0,0,1,0,yr,yr,0,1],xr],matrix3d:["NNNNNNNNNNNNNNNN",xr],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",br([yr,yr,new ln(1)]),xr],scaleX:["N",br([yr,new ln(1),new ln(1)]),br([yr,new ln(1)])],scaleY:["N",br([new ln(1),yr,new ln(1)]),br([new ln(1),yr])],scaleZ:["N",br([new ln(1),new ln(1),yr])],scale3d:["NNN",xr],skew:["Aa",null,xr],skewX:["A",null,br([yr,hn])],skewY:["A",null,br([hn,yr])],translate:["Tt",br([yr,yr,cn]),xr],translateX:["T",br([yr,cn,cn]),br([yr,cn])],translateY:["T",br([cn,yr,cn]),br([cn,yr])],translateZ:["L",br([cn,cn,yr])],translate3d:["TTL",xr]};function wr(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t[r],a=i[0],o=i.slice(1);if("translate"===a||"skew"===a?1===o.length&&o.push(0):"scale"===a&&1===o.length&&o.push(o[0]),!kr[a])return[];var s=o.map((function(t){return mn(t)}));e.push({t:a,d:s})}return e}function Er(t){if(Array.isArray(t))return wr(t);if("none"===(t=(t||"none").trim()))return[];var e,n=[],r=0;for(mr.lastIndex=0;e=mr.exec(t);){if(e.index!==r)return[];r=e.index+e[0].length;var i=e[1],a=kr[i];if(!a)return[];var o=e[2].split(","),s=a[0];if(s.length<o.length)return[];for(var u=[],l=0;l<s.length;l++){var c=o[l],h=s[l],f=void 0;if(void 0===(f=c?{A:function(t){return"0"===t.trim()?hn:zn(t)},N:Xn,T:Bn,L:Dn}[h.toUpperCase()](c):{a:hn,n:u[0],t:cn}[h]))return[];u.push(f)}if(n.push({t:i,d:u}),mr.lastIndex===t.length)return n}return[]}function Mr(t){if(Array.isArray(t))return wr(t);if("none"===(t=(t||"none").trim()))return[];var e,n=[],r=0;for(mr.lastIndex=0;e=mr.exec(t);){if(e.index!==r)return[];r=e.index+e[0].length;var i=e[1],a=kr[i];if(!a)return[];var o=e[2].split(","),s=a[0];if(s.length<o.length)return[];for(var u=[],l=0;l<s.length;l++){var c=o[l],h=s[l],f=void 0;if(void 0===(f=c?{A:function(t){return"0"===t.trim()?hn:Gn(t)},N:qn,T:Fn,L:In}[h.toUpperCase()](c):{a:hn,n:u[0],t:cn}[h]))return[];u.push(f)}if(n.push({t:i,d:u}),mr.lastIndex===t.length)return n}return[]}function Tr(t){var e,n,r,i;switch(t.t){case"rotateX":return i=Ht(jn(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=Ht(jn(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=Ht(jn(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=Ht(jn(t.d[3]));var a=e*e+n*n+r*r;if(0===a)e=1,n=0,r=0;else if(1!==a){var o=Math.sqrt(a);e/=o,n/=o,r/=o}var s=Math.sin(i/2),u=s*Math.cos(i/2),l=s*s;return[1-2*(n*n+r*r)*l,2*(e*n*l+r*u),2*(e*r*l-n*u),0,2*(e*n*l-r*u),1-2*(e*e+r*r)*l,2*(n*r*l+e*u),0,2*(e*r*l+n*u),2*(n*r*l-e*u),1-2*(e*e+n*n)*l,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var c=Ht(jn(t.d[0])),h=Ht(jn(t.d[1]));return[1,Math.tan(h),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=Ht(jn(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=Ht(jn(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Hn(t.d[0],0,null)||0,n=Hn(t.d[1],0,null)||0,0,1];case"translateX":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Hn(t.d[0],0,null)||0,0,0,1];case"translateY":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=Hn(t.d[0],0,null)||0,0,1];case"translateZ":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=Hn(t.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Hn(t.d[0],0,null)||0,n=Hn(t.d[1],0,null)||0,r=Hn(t.d[2],0,null)||0,1];case"perspective":var f=Hn(t.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,f?-1/f:0,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map((function(t){return t.value}))}}function Sr(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function Cr(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return function(t,e,n,r,i,a){if(!function(t,e){var n=e[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}(Kt,t))return!1;if(d.copy(Jt,Kt),Jt[3]=0,Jt[7]=0,Jt[11]=0,Jt[15]=1,Math.abs(d.determinant(Jt))<1e-8)return!1;var o,s,u=Kt[3],l=Kt[7],c=Kt[11],p=Kt[12],v=Kt[13],g=Kt[14],y=Kt[15];if(0!==u||0!==l||0!==c){if(Qt[0]=u,Qt[1]=l,Qt[2]=c,Qt[3]=y,!d.invert(Jt,Jt))return!1;d.transpose(Jt,Jt),f.fF(i,Qt,Jt)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=p,e[1]=v,e[2]=g,s=Kt,(o=te)[0][0]=s[0],o[0][1]=s[1],o[0][2]=s[2],o[1][0]=s[4],o[1][1]=s[5],o[1][2]=s[6],o[2][0]=s[8],o[2][1]=s[9],o[2][2]=s[10],n[0]=h.kE(te[0]),h.Fv(te[0],te[0]),r[0]=h.AK(te[0],te[1]),ne(te[1],te[1],te[0],1,-r[0]),n[1]=h.kE(te[1]),h.Fv(te[1],te[1]),r[0]/=n[1],r[1]=h.AK(te[0],te[2]),ne(te[2],te[2],te[0],1,-r[1]),r[2]=h.AK(te[1],te[2]),ne(te[2],te[2],te[1],1,-r[2]),n[2]=h.kE(te[2]),h.Fv(te[2],te[2]),r[1]/=n[2],r[2]/=n[2],h.kC(ee,te[1],te[2]),h.AK(te[0],ee)<0)for(var m=0;m<3;m++)n[m]*=-1,te[m][0]*=-1,te[m][1]*=-1,te[m][2]*=-1;a[0]=.5*Math.sqrt(Math.max(1+te[0][0]-te[1][1]-te[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-te[0][0]+te[1][1]-te[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-te[0][0]-te[1][1]+te[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+te[0][0]+te[1][1]+te[2][2],0)),te[2][1]>te[1][2]&&(a[0]=-a[0]),te[0][2]>te[2][0]&&(a[1]=-a[1]),te[1][0]>te[0][1]&&(a[2]=-a[2])}(function(t){return 0===t.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(Tr).reduce(Sr)}(t),e,n,r,i,a),[[e,n,r,a,i]]}var Ar=function(){function t(t,e){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var a=0;a<4;a++)n[r][i]+=e[r][a]*t[a][i];return n}return function(e,n,r,i,a){for(var o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],s=0;s<4;s++)o[s][3]=a[s];for(var u=0;u<3;u++)for(var l=0;l<3;l++)o[3][u]+=e[l]*o[l][u];var c=i[0],h=i[1],f=i[2],d=i[3],p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];p[0][0]=1-2*(h*h+f*f),p[0][1]=2*(c*h-f*d),p[0][2]=2*(c*f+h*d),p[1][0]=2*(c*h+f*d),p[1][1]=1-2*(c*c+f*f),p[1][2]=2*(h*f-c*d),p[2][0]=2*(c*f-h*d),p[2][1]=2*(h*f+c*d),p[2][2]=1-2*(c*c+h*h),o=t(o,p);var v,g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(g[2][1]=r[2],o=t(o,g)),r[1]&&(g[2][1]=0,g[2][0]=r[0],o=t(o,g)),r[0]&&(g[2][0]=0,g[1][0]=r[0],o=t(o,g));for(var y=0;y<3;y++)for(var m=0;m<3;m++)o[y][m]*=n[y];return 0===(v=o)[0][2]&&0===v[0][3]&&0===v[1][2]&&0===v[1][3]&&0===v[2][0]&&0===v[2][1]&&1===v[2][2]&&0===v[2][3]&&0===v[3][2]&&1===v[3][3]?[o[0][0],o[0][1],o[1][0],o[1][1],o[3][0],o[3][1]]:o[0].concat(o[1],o[2],o[3])}}();function Pr(t){return t.toFixed(6).replace(".000000","")}function Nr(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=Cr(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=Cr(e)),null===n[0]||null===r[0]?[[!1],[!0],function(n){return n?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(t){var e=function(t,e,n){var r=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}(t,e);r=(0,k.Z)(r,-1,1);var i=[];if(1===r)i=t;else for(var a=Math.acos(r),o=1*Math.sin(n*a)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*a)-r*o)+e[s]*o);return i}(n[0][3],r[0][3],t[5]);return Ar(t[0],t[1],t[2],e,t[4]).map(Pr).join(",")}])}function Rr(t){return t.replace(/[XY]/,"")}function Zr(t){return t.replace(/(X|Y|Z|3d)?$/,"3d")}function Or(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(){var n=t[a],r=n.t,i=n.d,o="scale"===r.substring(0,5)?1:0;e.push({t:r,d:i.map((function(t){return"number"==typeof t?mn(o):mn(o,t.unit)}))})},a=0;a<t.length;a++)i()}var o,s,u=[],l=[],c=[];if(t.length!==e.length){var h=Nr(t,e);u=[h[0]],l=[h[1]],c=[["matrix",[h[2]]]]}else for(var f=0;f<t.length;f++){var d=t[f].t,p=e[f].t,v=t[f].d,g=e[f].d,y=kr[d],m=kr[p],b=void 0;if(s=p,"perspective"===(o=d)&&"perspective"===s||!("matrix"!==o&&"matrix3d"!==o||"matrix"!==s&&"matrix3d"!==s)){var x=Nr([t[f]],[e[f]]);u.push(x[0]),l.push(x[1]),c.push(["matrix",[x[2]]])}else{if(d===p)b=d;else if(y[2]&&m[2]&&Rr(d)===Rr(p))b=Rr(d),v=y[2](v),g=m[2](g);else{if(!y[1]||!m[1]||Zr(d)!==Zr(p)){var k=Nr(t,e);u=[k[0]],l=[k[1]],c=[["matrix",[k[2]]]];break}b=Zr(d),v=y[1](v),g=m[1](g)}for(var w=[],E=[],M=[],T=0;T<v.length;T++){var S=Vn(v[T],g[T],n,!1,T);w[T]=S[0],E[T]=S[1],M.push(S[2])}u.push(w),l.push(E),c.push([b,M])}}if(r){var C=u;u=l,l=C}return[u,l,function(t){return t.map((function(t,e){var n=t.map((function(t,n){return c[e][1][n](t)})).join(",");return"matrix"===c[e][0]&&16===n.split(",").length&&(c[e][0]="matrix3d"),"matrix3d"===c[e][0]&&6===n.split(",").length&&(c[e][0]="matrix"),"".concat(c[e][0],"(").concat(n,")")})).join(" ")}]}var Lr=Ue((function(t){if((0,x.Z)(t)){if("text-anchor"===t)return[mn(0,"px"),mn(0,"px")];var e=t.split(" ");return 1===e.length&&("top"===e[0]||"bottom"===e[0]?(e[1]=e[0],e[0]="center"):e[1]="center"),2!==e.length?null:[Bn(_r(e[0])),Bn(_r(e[1]))]}return[mn(t[0]||0,"px"),mn(t[1]||0,"px")]}));function _r(t){return"center"===t?"50%":"left"===t||"top"===t?"0%":"right"===t||"bottom"===t?"100%":t}var Ir=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:fe.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:fe.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:fe.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:fe.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:fe.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:fe.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:fe.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:fe.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:fe.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:fe.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:fe.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:fe.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:fe.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:fe.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:fe.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:fe.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:fe.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:fe.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:fe.FILTER},{n:"clipPath",syntax:fe.DEFINED_PATH},{n:"textPath",syntax:fe.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:fe.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:fe.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:fe.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:fe.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:fe.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:fe.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:fe.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:fe.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:fe.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:fe.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:fe.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:fe.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:fe.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:fe.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:fe.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:fe.COORDINATE},{n:"y1",int:!0,l:!0,syntax:fe.COORDINATE},{n:"z1",int:!0,l:!0,syntax:fe.COORDINATE},{n:"x2",int:!0,l:!0,syntax:fe.COORDINATE},{n:"y2",int:!0,l:!0,syntax:fe.COORDINATE},{n:"z2",int:!0,l:!0,syntax:fe.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:fe.PATH,p:50},{n:"points",int:!0,l:!0,syntax:fe.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:fe.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:fe.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:fe.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:fe.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:fe.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:fe.NUMBER,d:function(t){return t===Et.PATH||t===Et.POLYGON||t===Et.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:fe.MARKER},{n:"markerEnd",syntax:fe.MARKER},{n:"markerMid",syntax:fe.MARKER},{n:"markerStartOffset",syntax:fe.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:fe.LENGTH,l:!0,int:!0,d:"0"}],Dr=new Set(Ir.filter((function(t){return!!t.l})).map((function(t){return t.n}))),Fr={},Br=function(){return(0,a.Z)((function t(e){var n=this;(0,i.Z)(this,t),this.runtime=e,Ir.forEach((function(t){n.registerMetadata(t)}))}),[{key:"registerMetadata",value:function(t){[t.n].concat((0,o.Z)(t.a||[])).forEach((function(e){Fr[e]=t}))}},{key:"getPropertySyntax",value:function(t){return this.runtime.CSSPropertySyntaxFactory[t]}},{key:"processProperties",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(t.attributes,e);var i=t.parsedStyle.clipPath,a=t.parsedStyle.offsetPath;!function(t,e){var n=Gr(t);for(var r in e)n.has(r)&&(t.parsedStyle[r]=e[r])}(t,e);var o=!!n.forceUpdateGeometry;if(!o)for(var s in e)if(Dr.has(s)){o=!0;break}var u,c=Gr(t);c.has("fill")&&e.fill&&(t.parsedStyle.fill=On(e.fill)),c.has("stroke")&&e.stroke&&(t.parsedStyle.stroke=On(e.stroke)),c.has("shadowColor")&&e.shadowColor&&(t.parsedStyle.shadowColor=On(e.shadowColor)),c.has("filter")&&e.filter&&(t.parsedStyle.filter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("none"===(t=t.toLowerCase().trim()))return[];for(var e,n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];if(i=e.index+e[0].length,Un.indexOf(e[1])>-1&&r.push({name:e[1],params:e[2].split(" ").map((function(t){return _n(/deg|rad|grad|turn|px|%/g,t)||On(t)}))}),n.lastIndex===t.length)return r}return[]}(e.filter)),c.has("radius")&&!(0,b.Z)(e.radius)&&(t.parsedStyle.radius=Wn(e.radius,4)),c.has("lineDash")&&!(0,b.Z)(e.lineDash)&&(t.parsedStyle.lineDash=Wn(e.lineDash,"even")),c.has("points")&&e.points&&(t.parsedStyle.points=(u=e.points,{points:(0,x.Z)(u)?u.split(" ").map((function(t){var e=t.split(","),n=(0,l.Z)(e,2),r=n[0],i=n[1];return[Number(r),Number(i)]})):u,totalLength:0,segments:[]})),c.has("d")&&""===e.d&&(t.parsedStyle.d=(0,r.Z)({},he)),c.has("d")&&e.d&&(t.parsedStyle.d=pr(e.d)),c.has("textTransform")&&e.textTransform&&this.runtime.CSSPropertySyntaxFactory[fe.TEXT_TRANSFORM].calculator(null,null,{value:e.textTransform},t,null),c.has("clipPath")&&!(0,st.Z)(e.clipPath)&&this.runtime.CSSPropertySyntaxFactory[fe.DEFINED_PATH].calculator("clipPath",i,e.clipPath,t,this.runtime),c.has("offsetPath")&&e.offsetPath&&this.runtime.CSSPropertySyntaxFactory[fe.DEFINED_PATH].calculator("offsetPath",a,e.offsetPath,t,this.runtime),c.has("transform")&&e.transform&&(t.parsedStyle.transform=Er(e.transform)),c.has("transformOrigin")&&e.transformOrigin&&(t.parsedStyle.transformOrigin=Lr(e.transformOrigin)),c.has("markerStart")&&e.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[fe.MARKER].calculator(null,e.markerStart,e.markerStart,null,null)),c.has("markerEnd")&&e.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[fe.MARKER].calculator(null,e.markerEnd,e.markerEnd,null,null)),c.has("markerMid")&&e.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[fe.MARKER].calculator("",e.markerMid,e.markerMid,null,null)),c.has("zIndex")&&!(0,b.Z)(e.zIndex)&&this.runtime.CSSPropertySyntaxFactory[fe.Z_INDEX].postProcessor(t),c.has("offsetDistance")&&!(0,b.Z)(e.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[fe.OFFSET_DISTANCE].postProcessor(t),c.has("transform")&&e.transform&&this.runtime.CSSPropertySyntaxFactory[fe.TRANSFORM].postProcessor(t),c.has("transformOrigin")&&e.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[fe.TRANSFORM_ORIGIN].postProcessor(t),o&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t))}},{key:"updateGeometry",value:function(t){var e=t.nodeName,n=this.runtime.geometryUpdaterFactory[e];if(n){var r=t.geometry;r.contentBounds||(r.contentBounds=new Ot),r.renderBounds||(r.renderBounds=new Ot);var i=t.parsedStyle,a=n.update(i,t),o=a.cx,s=void 0===o?0:o,u=a.cy,l=void 0===u?0:u,c=a.cz,f=void 0===c?0:c,d=a.hwidth,p=void 0===d?0:d,v=a.hheight,g=void 0===v?0:v,y=a.hdepth,m=void 0===y?0:y,b=[Math.abs(p),Math.abs(g),m],x=i.stroke,k=i.lineWidth,w=void 0===k?1:k,E=i.increasedLineWidthForHitTesting,M=void 0===E?0:E,T=i.shadowType,S=void 0===T?"outer":T,C=i.shadowColor,A=i.filter,P=void 0===A?[]:A,N=i.transformOrigin,R=[s,l,f];r.contentBounds.update(R,b);var Z=e===Et.POLYLINE||e===Et.POLYGON||e===Et.PATH?Math.SQRT2:.5;if(x&&!x.isNone){var O=((w||0)+(M||0))*Z;b[0]+=O,b[1]+=O}if(r.renderBounds.update(R,b),C&&S&&"inner"!==S){var L=r.renderBounds,_=L.min,I=L.max,D=i.shadowBlur||0,F=i.shadowOffsetX||0,B=i.shadowOffsetY||0,G=_[0]-D+F,z=I[0]+D+F,V=_[1]-D+B,j=I[1]+D+B;_[0]=Math.min(_[0],G),I[0]=Math.max(I[0],z),_[1]=Math.min(_[1],V),I[1]=Math.max(I[1],j),r.renderBounds.setMinMax(_,I)}P.forEach((function(t){var e=t.name,n=t.params;if("blur"===e){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,h.IH(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]))}else if("drop-shadow"===e){var a=n[0].value,o=n[1].value,s=n[2].value,u=r.renderBounds,l=u.min,c=u.max,f=l[0]-s+a,d=c[0]+s+a,p=l[1]-s+o,v=c[1]+s+o;l[0]=Math.min(l[0],f),c[0]=Math.max(c[0],d),l[1]=Math.min(l[1],p),c[1]=Math.max(c[1],v),r.renderBounds.setMinMax(l,c)}})),t.geometry.dirty=!1;var W=g<0,H=(p<0?-1:1)*(N?Hn(N[0],0,t,!0):0),U=(W?-1:1)*(N?Hn(N[1],1,t,!0):0);(H||U)&&t.setOrigin(H,U)}}},{key:"updateSizeAttenuation",value:function(t,e){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/e,t.nodeName===Et.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/e)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===Et.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))}}])}();function Gr(t){return t.constructor.PARSED_STYLE_LIST}var zr=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.mixer=$n}),[{key:"calculator",value:function(t,e,n,r){return jn(n)}}])}(),Vr=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"calculator",value:function(t,e,n,r,i){return n instanceof sn&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(t,e,n,r),"clipPath"===t&&r.forEach((function(t){0===t.childNodes.length&&i.sceneGraphService.dirtifyToRoot(t)})),n}}])}(),jr=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.parser=On,this.mixer=Ln}),[{key:"calculator",value:function(t,e,n,r){return n instanceof sn?"none"===n.value?vn:gn:n}}])}(),Wr=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"calculator",value:function(t,e,n){return n instanceof sn?[]:n}}])}();function Hr(t){var e=t.parsedStyle.fontSize;return(0,b.Z)(e)?null:e}var Ur=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.mixer=$n}),[{key:"calculator",value:function(t,e,n,r,i){if((0,y.Z)(n))return n;if(!ln.isRelativeUnit(n.unit))return n.value;if(n.unit===Ye.kPercentage)return 0;if(n.unit===Ye.kEms){if(r.parentNode){var a=Hr(r.parentNode);if(a)return a*=n.value}return 0}if(n.unit===Ye.kRems){var o;if(null!=r&&null!==(o=r.ownerDocument)&&void 0!==o&&o.documentElement){var s=Hr(r.ownerDocument.documentElement);if(s)return s*=n.value}return 0}}}])}(),Yr=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.mixer=Jn}),[{key:"calculator",value:function(t,e,n){return n.map((function(t){return t.value}))}}])}(),qr=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.mixer=Jn}),[{key:"calculator",value:function(t,e,n){return n.map((function(t){return t.value}))}}])}(),Xr=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"calculator",value:function(t,e,n,r){var i;n instanceof sn&&(n=null);var a=null===(i=n)||void 0===i?void 0:i.cloneNode(!0);return a&&(a.style.isMarker=!0),a}}])}(),$r=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.mixer=$n}),[{key:"calculator",value:function(t,e,n){return n.value}}])}(),Kr=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.mixer=Kn(0,1)}),[{key:"calculator",value:function(t,e,n){return n.value}},{key:"postProcessor",value:function(t){var e=t.parsedStyle,n=e.offsetPath,r=e.offsetDistance;if(n){var i=n.nodeName;if(i===Et.LINE||i===Et.PATH||i===Et.POLYLINE){var a=n.getPoint(r);a&&t.setLocalPosition(a.x,a.y)}}}}])}(),Jr=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.mixer=Kn(0,1)}),[{key:"calculator",value:function(t,e,n){return n.value}}])}(),Qr=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.parser=pr,this.mixer=vr}),[{key:"calculator",value:function(t,e,n){return n instanceof sn&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Ft(0,0,0,0)}:n}}])}(),ti=(0,a.Z)((function t(){(0,i.Z)(this,t),this.mixer=gr})),ei=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=(0,s.Z)(this,e,[].concat(r))).mixer=Kn(0,1/0),t}return(0,u.Z)(e,t),(0,a.Z)(e)}(Ur),ni=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"calculator",value:function(t,e,n,r){return n instanceof sn?"unset"===n.value?"":n.value:"".concat(n)}},{key:"postProcessor",value:function(t){t.nodeValue="".concat(t.parsedStyle.text)||""}}])}(),ri=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"calculator",value:function(t,e,n,r){var i=r.getAttribute("text");if(i){var a=i;"capitalize"===n.value?a=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?a=i.toLowerCase():"uppercase"===n.value&&(a=i.toUpperCase()),r.parsedStyle.text=a}return n.value}}])}(),ii=new WeakMap;var ai="undefined"!=typeof window&&void 0!==window.document;function oi(t){return!!t.getAttribute}function si(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(t)-a.indexOf(e)}}return n-r}function ui(t){var e=t;do{var n;if(null===(n=e.parsedStyle)||void 0===n?void 0:n.clipPath)return e;e=e.parentElement}while(null!==e);return null}var li="px";function ci(t,e,n){ai&&t.style&&(t.style.width=e+li,t.style.height=n+li)}function hi(t,e){if(ai)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}var fi={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},di="object"==typeof performance&&performance.now?performance:Date;function pi(t){return t.nodeName===Et.FRAGMENT||t.getRootNode().nodeName===Et.FRAGMENT}function vi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,a=!!e&&!e.isNone,o=!!n&&!n.isNone;return"visiblepainted"===t||"painted"===t||"auto"===t?(r=a,i=o):"visiblefill"===t||"fill"===t?r=!0:"visiblestroke"===t||"stroke"===t?i=!0:"visible"!==t&&"all"!==t||(r=!0,i=!0),[r,i]}var gi=1,yi="object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:{},mi=Date.now(),bi={},xi=Date.now(),ki=function(t){if("function"!=typeof t)throw new TypeError("".concat(t," is not a function"));var e=Date.now(),n=e-xi,r=n>16?0:16-n,i=gi++;return bi[i]=t,Object.keys(bi).length>1||setTimeout((function(){xi=e;var t=bi;bi={},Object.keys(t).forEach((function(e){return t[e](yi.performance&&"function"==typeof yi.performance.now?yi.performance.now():Date.now()-mi)}))}),r),i},wi=function(t){delete bi[t]},Ei=function(t){return"string"!=typeof t?ki:""===t?yi.requestAnimationFrame:yi["".concat(t,"RequestAnimationFrame")]},Mi=function(t,e){for(var n=0;void 0!==t[n];){if(e(t[n]))return t[n];n+=1}}(["","webkit","moz","ms","o"],(function(t){return!!Ei(t)})),Ti=Ei(Mi),Si=function(t){return"string"!=typeof t?wi:""===t?yi.cancelAnimationFrame:yi["".concat(t,"CancelAnimationFrame")]||yi["".concat(t,"CancelRequestAnimationFrame")]}(Mi);yi.requestAnimationFrame=Ti,yi.cancelAnimationFrame=Si;var Ci=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.callbacks=[]}),[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(t,e){this.callbacks.push(e)}},{key:"promise",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Promise.all(this.callbacks.map((function(t){return t.apply(void 0,e)})))}}])}(),Ai=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.callbacks=[]}),[{key:"tapPromise",value:function(t,e){this.callbacks.push(e)}},{key:"promise",value:(t=(0,mt.Z)((0,yt.Z)().mark((function t(){var e,n,r,i,a=arguments;return(0,yt.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callbacks.length){t.next=14;break}return t.next=3,(e=this.callbacks)[0].apply(e,a);case 3:n=t.sent,r=0;case 5:if(!(r<this.callbacks.length-1)){t.next=13;break}return i=this.callbacks[r],t.next=9,i(n);case 9:n=t.sent;case 10:r++,t.next=5;break;case 13:return t.abrupt("return",n);case 14:return t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t}(),Pi=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.callbacks=[]}),[{key:"tap",value:function(t,e){this.callbacks.push(e)}},{key:"call",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=arguments;this.callbacks.forEach((function(t){t.apply(void 0,r)}))}}])}(),Ni=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.callbacks=[]}),[{key:"tap",value:function(t,e){this.callbacks.push(e)}},{key:"call",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this.callbacks.length){for(var r=arguments,i=this.callbacks[0].apply(void 0,r),a=0;a<this.callbacks.length-1;a++){i=(0,this.callbacks[a])(i)}return i}return null}}])}(),Ri=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Zi=/([\"\'])[^\'\"]+\1/;function Oi(t,e,n){return d.identity(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var Li=d.create(),_i=d.create(),Ii={scale:function(t){d.fromScaling(Li,[t[0].value,t[1].value,1])},scaleX:function(t){d.fromScaling(Li,[t[0].value,1,1])},scaleY:function(t){d.fromScaling(Li,[1,t[0].value,1])},scaleZ:function(t){d.fromScaling(Li,[1,1,t[0].value])},scale3d:function(t){d.fromScaling(Li,[t[0].value,t[1].value,t[2].value])},translate:function(t){d.fromTranslation(Li,[t[0].value,t[1].value,0])},translateX:function(t){d.fromTranslation(Li,[t[0].value,0,0])},translateY:function(t){d.fromTranslation(Li,[0,t[0].value,0])},translateZ:function(t){d.fromTranslation(Li,[0,0,t[0].value])},translate3d:function(t){d.fromTranslation(Li,[t[0].value,t[1].value,t[2].value])},rotate:function(t){d.fromZRotation(Li,Ht(jn(t[0])))},rotateX:function(t){d.fromXRotation(Li,Ht(jn(t[0])))},rotateY:function(t){d.fromYRotation(Li,Ht(jn(t[0])))},rotateZ:function(t){d.fromZRotation(Li,Ht(jn(t[0])))},rotate3d:function(t){d.fromRotation(Li,Ht(jn(t[3])),[t[0].value,t[1].value,t[2].value])},skew:function(t){Oi(Li,Ht(t[0].value),Ht(t[1].value))},skewX:function(t){Oi(Li,Ht(t[0].value),0)},skewY:function(t){Oi(Li,0,Ht(t[0].value))},matrix:function(t){d.set(Li,t[0].value,t[1].value,0,0,t[2].value,t[3].value,0,0,0,0,1,0,t[4].value,t[5].value,0,1)},matrix3d:function(t){d.set.apply(d,[Li].concat((0,o.Z)(t.map((function(t){return t.value})))))}},Di=h.al(1,1,1),Fi=h.Ue(),Bi={translate:function(t,e){Wa.sceneGraphService.setLocalScale(t,Di,!1),Wa.sceneGraphService.setLocalEulerAngles(t,Fi,void 0,void 0,!1),Wa.sceneGraphService.setLocalPosition(t,[e[0].value,e[1].value,0],!1),Wa.sceneGraphService.dirtifyLocal(t,t.transformable)}};function Gi(t,e){if(t.length){if(1===t.length&&Bi[t[0].t])return void Bi[t[0].t](e,t[0].d);for(var n=d.identity(_i),r=0;r<t.length;r++){var i=t[r],a=i.t,o=i.d,s=Ii[a];s&&(s(o),d.mul(n,n,Li))}e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var zi=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.parser=Mr,this.mixer=Or}),[{key:"calculator",value:function(t,e,n,r){return n instanceof sn?[]:n}},{key:"postProcessor",value:function(t){Gi(t.parsedStyle.transform,t)}}])}(),Vi=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"postProcessor",value:function(t){var e=t.parsedStyle.transformOrigin;e[0].unit===Ye.kPixels&&e[1].unit===Ye.kPixels?t.setOrigin(e[0].value,e[1].value):t.getGeometryBounds()}}])}(),ji=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"calculator",value:function(t,e,n,r){return n.value}},{key:"postProcessor",value:function(t){if(t.parentNode){var e=t.parentNode,n=e.renderable,r=e.sortable;n&&(n.dirty=!0),r&&(r.dirty=!0,r.dirtyReason=ce.Z_INDEX_CHANGED)}}}])}(),Wi=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"update",value:function(t,e){var n=t.cx,r=void 0===n?0:n,i=t.cy,a=void 0===i?0:i,o=t.r,s=void 0===o?0:o;return{cx:r,cy:a,hwidth:s,hheight:s}}}])}(),Hi=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"update",value:function(t,e){var n=t.cx,r=void 0===n?0:n,i=t.cy,a=void 0===i?0:i,o=t.rx,s=void 0===o?0:o,u=t.ry;return{cx:r,cy:a,hwidth:s,hheight:void 0===u?0:u}}}])}(),Ui=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"update",value:function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2,a=Math.min(e,r),o=Math.max(e,r),s=Math.min(n,i),u=(o-a)/2,l=(Math.max(n,i)-s)/2;return{cx:a+u,cy:s+l,hwidth:u,hheight:l}}}])}(),Yi=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"update",value:function(t){var e=t.d.rect,n=e.x,r=e.y,i=e.width/2,a=e.height/2;return{cx:n+i,cy:r+a,hwidth:i,hheight:a}}}])}(),qi=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"update",value:function(t){if(t.points&&(0,ut.Z)(t.points.points)){var e=t.points.points,n=Math.min.apply(Math,(0,o.Z)(e.map((function(t){return t[0]})))),r=Math.max.apply(Math,(0,o.Z)(e.map((function(t){return t[0]})))),i=Math.min.apply(Math,(0,o.Z)(e.map((function(t){return t[1]})))),a=(r-n)/2,s=(Math.max.apply(Math,(0,o.Z)(e.map((function(t){return t[1]}))))-i)/2;return{cx:n+a,cy:i+s,hwidth:a,hheight:s}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),Xi=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"update",value:function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.src,s=t.width,u=void 0===s?0:s,l=t.height,c=u,h=void 0===l?0:l;return o&&!(0,x.Z)(o)&&(c||(c=o.width,t.width=c),h||(h=o.height,t.height=h)),{cx:r+c/2,cy:a+h/2,hwidth:c/2,hheight:h/2}}}])}(),$i=function(){return(0,a.Z)((function t(e){(0,i.Z)(this,t),this.globalRuntime=e}),[{key:"isReadyToMeasure",value:function(t,e){return t.text}},{key:"update",value:function(t,e){var n,r=t.text,i=t.textAlign,a=void 0===i?"start":i,o=t.lineWidth,s=void 0===o?1:o,u=t.textBaseline,l=void 0===u?"alphabetic":u,c=t.dx,h=void 0===c?0:c,f=t.dy,d=void 0===f?0:f,p=t.x,v=void 0===p?0:p,g=t.y,y=void 0===g?0:g;if(!this.isReadyToMeasure(t,e))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var m=((null==e||null===(n=e.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n?void 0:n.getConfig())||{}).offscreenCanvas,b=this.globalRuntime.textService.measureText(r,t,m);t.metrics=b;var x=b.width/2,k=b.height/2,w=v+x;"center"===a||"middle"===a?w+=s/2-x:"right"!==a&&"end"!==a||(w+=s-2*x);var E=y-k;return"middle"===l?E+=k:"top"===l||"hanging"===l?E+=2*k:"alphabetic"===l||"bottom"!==l&&"ideographic"!==l||(E+=0),h&&(w+=h),d&&(E+=d),{cx:w,cy:E,hwidth:x,hheight:k}}}])}(),Ki=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"update",value:function(t,e){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),Ji=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"update",value:function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.width,s=void 0===o?0:o,u=t.height,l=void 0===u?0:u;return{cx:r+s/2,cy:a+l/2,hwidth:s/2,hheight:l/2}}}])}();var Qi=function(){return(0,a.Z)((function t(e){(0,i.Z)(this,t),this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Dt,this.page=new Dt,this.canvas=new Dt,this.viewport=new Dt,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}),[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return!this.manager||this.path&&this.path[0]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(Bt)}}])}(),ta=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=(0,s.Z)(this,e,[].concat(r))).client=new Dt,t.movement=new Dt,t.offset=new Dt,t.global=new Dt,t.screen=new Dt,t}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}},{key:"initMouseEvent",value:function(){throw new Error(Bt)}}])}(Qi),ea=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=(0,s.Z)(this,e,[].concat(r))).width=0,t.height=0,t.isPrimary=!1,t}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(ta),na=function(t){function e(){return(0,i.Z)(this,e),(0,s.Z)(this,e,arguments)}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(ta),ra=function(t){function e(t,n){var r;return(0,i.Z)(this,e),(r=(0,s.Z)(this,e,[null])).type=t,r.detail=n,Object.assign(r,n),r}return(0,u.Z)(e,t),(0,a.Z)(e)}(Qi),ia=new WeakMap,aa=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.emitter=new c}),[{key:"on",value:function(t,e,n){return this.addEventListener(t,e,n),this}},{key:"addEventListener",value:function(t,e,n){var r=!1,i=!1;if((0,lt.Z)(n))r=n;else if(n){var a=n.capture;r=void 0!==a&&a;var o=n.once;i=void 0!==o&&o}r&&(t+="capture"),e=(0,ct.Z)(e)?e:e.handleEvent;var s=(0,ct.Z)(e)?void 0:e;return i?this.emitter.once(t,e,s):this.emitter.on(t,e,s),this}},{key:"off",value:function(t,e,n){return t?this.removeEventListener(t,e,n):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var t;null===(t=this.emitter)||void 0===t||t.removeAllListeners()}},{key:"removeEventListener",value:function(t,e,n){var r;if(!this.emitter)return this;((0,lt.Z)(n)?n:null==n?void 0:n.capture)&&(t+="capture"),e=(0,ct.Z)(e)?e:null===(r=e)||void 0===r?void 0:r.handleEvent;var i=(0,ct.Z)(e)?void 0:e;return this.emitter.off(t,e,i),this}},{key:"emit",value:function(t,e){this.dispatchEvent(new ra(t,e))}},{key:"dispatchEvent",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=ia.get(this);r||(r=this.document?this:this.defaultView?this.defaultView:null===(e=this.ownerDocument)||void 0===e?void 0:e.defaultView)&&ia.set(this,r);if(r){if(t.manager=r.getEventService(),!t.manager)return!1;t.defaultPrevented=!1,t.path?t.path.length=0:t.page=[],n||(t.target=this),t.manager.dispatchEvent(t,t.type,n)}else this.emitter.emit(t.type,t);return!t.defaultPrevented}}])}(),oa=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=(0,s.Z)(this,e,[].concat(r))).shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.parentNode=null,t}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"textContent",get:function(){var t="";this.nodeName===Et.TEXT&&(t+=this.style.text);var e,n=(0,bt.Z)(this.childNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.nodeName===Et.TEXT?t+=r.nodeValue:t+=r.textContent}}catch(t){n.e(t)}finally{n.f()}return t},set:function(t){var e=this;this.childNodes.slice().forEach((function(t){e.removeChild(t)})),this.nodeName===Et.TEXT&&(this.style.text="".concat(t))}},{key:"getRootNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(t){throw new Error(Bt)}},{key:"lookupNamespaceURI",value:function(t){throw new Error(Bt)}},{key:"lookupPrefix",value:function(t){throw new Error(Bt)}},{key:"normalize",value:function(){throw new Error(Bt)}},{key:"isEqualNode",value:function(t){return this===t}},{key:"isSameNode",value:function(t){return this.isEqualNode(t)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(t){if(t===this)return 0;for(var n=t,r=this,i=[n],a=[r];null!==(o=n.parentNode)&&void 0!==o?o:r.parentNode;){var o;n=n.parentNode?(i.push(n.parentNode),n.parentNode):n,r=r.parentNode?(a.push(r.parentNode),r.parentNode):r}if(n!==r)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var s=i.length>a.length?i:a,u=s===i?a:i;if(s[s.length-u.length]===u[0])return s===i?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var l=s.length-u.length,c=u.length-1;c>=0;c--){var h=u[c],f=s[l+c];if(f!==h){var d=h.parentNode.childNodes;return d.indexOf(h)<d.indexOf(f)?u===i?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:s===i?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(t){return this.contains(t)}},{key:"contains",value:function(t){for(var e=t;e&&this!==e;)e=e.parentNode;return!!e}},{key:"getAncestor",value:function(t){for(var e=this;t>0&&e;)e=e.parentNode,t--;return e}},{key:"forEach",value:function(t){for(var e=[this];e.length>0;){var n=e.pop();if(!1===t(n))break;for(var r=n.childNodes.length-1;r>=0;r--)e.push(n.childNodes[r])}}}],[{key:"isNode",value:function(t){return!!t.childNodes}}])}(aa);oa.DOCUMENT_POSITION_DISCONNECTED=1,oa.DOCUMENT_POSITION_PRECEDING=2,oa.DOCUMENT_POSITION_FOLLOWING=4,oa.DOCUMENT_POSITION_CONTAINS=8,oa.DOCUMENT_POSITION_CONTAINED_BY=16,oa.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var sa=function(){return(0,a.Z)((function t(e,n){var r=this;(0,i.Z)(this,t),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=d.create(),this.tmpVec3=h.Ue(),this.onPointerDown=function(t){var e=r.createPointerEvent(t);if(r.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)r.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){var n=2===e.button;r.dispatchEvent(e,n?"rightdown":"mousedown")}r.trackingData(t.pointerId).pressTargetsByButton[t.button]=e.composedPath(),r.freeEvent(e)},this.onPointerUp=function(t){var e=di.now(),n=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)r.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;r.dispatchEvent(n,i?"rightup":"mouseup")}var a=r.trackingData(t.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[t.button]),s=o;if(o&&!n.composedPath().includes(o)){for(var u=o;u&&!n.composedPath().includes(u);){if(n.currentTarget=u,r.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)r.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var l=2===n.button;r.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}oa.isNode(u)&&(u=u.parentNode)}delete a.pressTargetsByButton[t.button],s=u}if(s){var c,h=r.clonePointerEvent(n,"click");h.target=s,h.path=[],a.clicksByButton[t.button]||(a.clicksByButton[t.button]={clickCount:0,target:h.target,timeStamp:e});var f=r.context.renderingContext.root.ownerDocument.defaultView,d=a.clicksByButton[t.button];d.target===h.target&&e-d.timeStamp<f.getConfig().dblClickSpeed?++d.clickCount:d.clickCount=1,d.target=h.target,d.timeStamp=e,h.detail=d.clickCount,null!==(c=n.detail)&&void 0!==c&&c.preventClick||(r.context.config.useNativeClickEvent||"mouse"!==h.pointerType&&"touch"!==h.pointerType||r.dispatchEvent(h,"click"),r.dispatchEvent(h,"pointertap")),r.freeEvent(h)}r.freeEvent(n)},this.onPointerMove=function(t){var e=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n="mouse"===e.pointerType||"pen"===e.pointerType,i=r.trackingData(t.pointerId),a=r.findMountedTarget(i.overTargets);if(i.overTargets&&a!==e.target){var o="mousemove"===t.type?"mouseout":"pointerout",s=r.createPointerEvent(t,o,a||void 0);if(r.dispatchEvent(s,"pointerout"),n&&r.dispatchEvent(s,"mouseout"),!e.composedPath().includes(a)){var u=r.createPointerEvent(t,"pointerleave",a||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&!e.composedPath().includes(u.target);)u.currentTarget=u.target,r.notifyTarget(u),n&&r.notifyTarget(u,"mouseleave"),oa.isNode(u.target)&&(u.target=u.target.parentNode);r.freeEvent(u)}r.freeEvent(s)}if(a!==e.target){var l="mousemove"===t.type?"mouseover":"pointerover",c=r.clonePointerEvent(e,l);r.dispatchEvent(c,"pointerover"),n&&r.dispatchEvent(c,"mouseover");for(var h=a&&oa.isNode(a)&&a.parentNode;h&&h!==(oa.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&h!==e.target;)h=h.parentNode;if(!h||h===(oa.isNode(r.rootTarget)&&r.rootTarget.parentNode)){var f=r.clonePointerEvent(e,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==a&&f.target!==(oa.isNode(r.rootTarget)&&r.rootTarget.parentNode);)f.currentTarget=f.target,r.notifyTarget(f),n&&r.notifyTarget(f,"mouseenter"),oa.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(c)}r.dispatchEvent(e,"pointermove"),"touch"===e.pointerType&&r.dispatchEvent(e,"touchmove"),n&&(r.dispatchEvent(e,"mousemove"),r.cursor=r.getCursor(e.target)),i.overTargets=e.composedPath(),r.freeEvent(e)},this.onPointerOut=function(t){var e=r.trackingData(t.pointerId);if(e.overTargets){var n="mouse"===t.pointerType||"pen"===t.pointerType,i=r.findMountedTarget(e.overTargets),a=r.createPointerEvent(t,"pointerout",i||void 0);r.dispatchEvent(a),n&&r.dispatchEvent(a,"mouseout");var o=r.createPointerEvent(t,"pointerleave",i||void 0);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(oa.isNode(r.rootTarget)&&r.rootTarget.parentNode);)o.currentTarget=o.target,r.notifyTarget(o),n&&r.notifyTarget(o,"mouseleave"),oa.isNode(o.target)&&(o.target=o.target.parentNode);e.overTargets=null,r.freeEvent(a),r.freeEvent(o)}r.cursor=null},this.onPointerOver=function(t){var e=r.trackingData(t.pointerId),n=r.createPointerEvent(t),i="mouse"===n.pointerType||"pen"===n.pointerType;r.dispatchEvent(n,"pointerover"),i&&r.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(r.cursor=r.getCursor(n.target));var a=r.clonePointerEvent(n,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(oa.isNode(r.rootTarget)&&r.rootTarget.parentNode);)a.currentTarget=a.target,r.notifyTarget(a),i&&r.notifyTarget(a,"mouseenter"),oa.isNode(a.target)&&(a.target=a.target.parentNode);e.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(a)},this.onPointerUpOutside=function(t){var e=r.trackingData(t.pointerId),n=r.findMountedTarget(e.pressTargetsByButton[t.button]),i=r.createPointerEvent(t);if(n){for(var a=n;a;)i.currentTarget=a,r.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||"mouse"!==i.pointerType&&"pen"!==i.pointerType||r.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),oa.isNode(a)&&(a=a.parentNode);delete e.pressTargetsByButton[t.button]}r.freeEvent(i)},this.onWheel=function(t){var e=r.createWheelEvent(t);r.dispatchEvent(e),r.freeEvent(e)},this.onClick=function(t){if(r.context.config.useNativeClickEvent){var e=r.createPointerEvent(t);r.dispatchEvent(e),r.freeEvent(e)}},this.onPointerCancel=function(t){var e=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(e),r.freeEvent(e)},this.globalRuntime=e,this.context=n}),[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var t=this.context.contextService.getBoundingClientRect(),e=1,n=1,r=this.context.contextService.getDomElement();if(r&&t){var i=r.offsetWidth,a=r.offsetHeight;i&&a&&(e=t.width/i,n=t.height/a)}return{scaleX:e,scaleY:n,bbox:t}}},{key:"client2Viewport",value:function(t){var e=this.getScale(),n=e.scaleX,r=e.scaleY,i=e.bbox;return new Dt((t.x-((null==i?void 0:i.left)||0))/n,(t.y-((null==i?void 0:i.top)||0))/r)}},{key:"viewport2Client",value:function(t){var e=this.getScale(),n=e.scaleX,r=e.scaleY,i=e.bbox;return new Dt((t.x+((null==i?void 0:i.left)||0))*n,(t.y+((null==i?void 0:i.top)||0))*r)}},{key:"viewport2Canvas",value:function(t){var e=t.x,n=t.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,a=i.width,o=i.height,s=r.getPerspectiveInverse(),u=r.getWorldTransform(),l=d.multiply(this.tmpMatrix,u,s),c=h.t8(this.tmpVec3,e/a*2-1,2*(1-n/o)-1,0);return h.fF(c,c,l),new Dt(c[0],c[1])}},{key:"canvas2Viewport",value:function(t){var e=this.rootTarget.defaultView.getCamera(),n=e.getPerspective(),r=e.getViewTransform(),i=d.multiply(this.tmpMatrix,n,r),a=h.t8(this.tmpVec3,t.x,t.y,0);h.fF(this.tmpVec3,this.tmpVec3,i);var o=this.context.config,s=o.width,u=o.height;return new Dt((a[0]+1)/2*s,(1-(a[1]+1)/2)*u)}},{key:"setPickHandler",value:function(t){this.pickHandler=t}},{key:"addEventMapping",value:function(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((function(t,e){return t.priority-e.priority}))}},{key:"mapEvent",value:function(t){if(this.rootTarget){var e=this.mappingTable[t.type];if(e)for(var n=0,r=e.length;n<r;n++)e[n].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}}},{key:"dispatchEvent",value:function(t,e,n){if(n){t.eventPhase=t.AT_TARGET;var r=this.rootTarget.defaultView||null;t.currentTarget=r,this.notifyListeners(t,e)}else t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e)}},{key:"propagate",value:function(t,e){if(t.target){var n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){var i=n.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var a=i+1;a<n.length;a++)if(t.currentTarget=n[a],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(t){var e=[t],n=this.rootTarget.defaultView||null;if(n&&n===t)return e.unshift(n.document),e;for(var r=0;r<2048&&t!==this.rootTarget;r++)oa.isNode(t)&&t.parentNode&&(e.push(t.parentNode),t=t.parentNode);return n&&e.push(n),e}},{key:"hitTest",value:function(t){var e=t.viewportX,n=t.viewportY,r=this.context.config,i=r.width,a=r.height,o=r.disableHitTesting;return e<0||n<0||e>i||n>a?null:!o&&this.pickHandler(t)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(t,e){var n,r=null==e?void 0:e.target;if(null!==(n=r)&&void 0!==n&&n.shadowRoot&&(r=e.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return!(null==e||!e.composedPath)&&e.composedPath().indexOf(t)>-1}},{key:"getExistedHTML",value:function(t){if(t.nativeEvent.composedPath)for(var e=0,n=t.nativeEvent.composedPath();e<n.length;e++){var r=n[e],i=this.nativeHTMLMap.get(r);if(i)return i}return null}},{key:"pickTarget",value:function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})}},{key:"createPointerEvent",value:function(t,e,n,r){var i=this.allocateEvent(ea);this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t;var a=this.getExistedHTML(i),o=this.context.contextService.getDomElement();return i.target=null!=n?n:a||this.isNativeEventFromCanvas(o,i.nativeEvent)&&this.pickTarget(i)||r,"string"==typeof e&&(i.type=e),i}},{key:"createWheelEvent",value:function(t){var e=this.allocateEvent(na);this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t;var n=this.getExistedHTML(e),r=this.context.contextService.getDomElement();return e.target=n||this.isNativeEventFromCanvas(r,e.nativeEvent)&&this.pickTarget(e),e}},{key:"trackingData",value:function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}},{key:"cloneWheelEvent",value:function(t){var e=this.allocateEvent(na);return e.nativeEvent=t.nativeEvent,e.originalEvent=t.originalEvent,this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.target=t.target,e.path=t.composedPath().slice(),e.type=t.type,e}},{key:"clonePointerEvent",value:function(t,e){var n=this.allocateEvent(ea);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=null!=e?e:n.type,n}},{key:"copyPointerData",value:function(t,e){e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist}},{key:"copyMouseData",value:function(t,e){e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.client.copyFrom(t.client),e.movement.copyFrom(t.movement),e.canvas.copyFrom(t.canvas),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global),e.offset.copyFrom(t.offset)}},{key:"copyWheelData",value:function(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}},{key:"copyData",value:function(t,e){e.isTrusted=t.isTrusted,e.timeStamp=di.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.page.copyFrom(t.page),e.viewport.copyFrom(t.viewport)}},{key:"allocateEvent",value:function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=[],e.target=null,e}},{key:"freeEvent",value:function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}},{key:"notifyTarget",value:function(t,e){e=null!=e?e:t.type;var n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(e,"capture"):e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}},{key:"notifyListeners",value:function(t,e){var n=t.currentTarget.emitter,r=n._events[e];if(r)if("fn"in r)r.once&&n.removeListener(e,r.fn,void 0,!0),r.fn.call(t.currentTarget||r.context,t);else for(var i=0;i<r.length&&!t.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(e,r[i].fn,void 0,!0),r[i].fn.call(t.currentTarget||r[i].context,t)}},{key:"findMountedTarget",value:function(t){if(!t)return null;for(var e=t[t.length-1],n=t.length-2;n>=0;n--){var r=t[n];if(!(r===this.rootTarget||oa.isNode(r)&&r.parentNode===e))break;e=t[n]}return e}},{key:"getCursor",value:function(t){for(var e=t;e;){var n=oi(e)&&e.getAttribute("cursor");if(n)return n;e=oa.isNode(e)&&e.parentNode}}}])}(),ua=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"getOrCreateCanvas",value:function(t,e){if(this.canvas)return this.canvas;if(t||Wa.offscreenCanvas)this.canvas=t||Wa.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,r.Z)({willReadFrequently:!0},e));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,r.Z)({willReadFrequently:!0},e)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,r.Z)({willReadFrequently:!0},e))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(t,e){return this.context||this.getOrCreateCanvas(t,e),this.context}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch(t){}try{return document.createElement("canvas")}catch(t){}return null}}])}(),la=function(t){return t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE",t}({}),ca=function(){return(0,a.Z)((function t(e,n){(0,i.Z)(this,t),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new Pi,initAsync:new Ci,dirtycheck:new Ni,cull:new Ni,beginFrame:new Pi,beforeRender:new Pi,render:new Pi,afterRender:new Pi,endFrame:new Pi,destroy:new Pi,pick:new Ai,pickSync:new Ni,pointerDown:new Pi,pointerUp:new Pi,pointerMove:new Pi,pointerOut:new Pi,pointerOver:new Pi,pointerWheel:new Pi,pointerCancel:new Pi,click:new Pi},this.globalRuntime=e,this.context=n}),[{key:"init",value:function(t){var e=this,n=(0,r.Z)((0,r.Z)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach((function(t){t.apply(n,e.globalRuntime)})),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,t()):this.hooks.initAsync.promise().then((function(){e.inited=!0,t()})).catch((function(t){}))}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(la.CAMERA_CHANGED)}},{key:"render",value:function(t,e,n){var r=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=1===i.renderReasons.size&&i.renderReasons.has(la.CAMERA_CHANGED),o=!t.disableRenderHooks||!(t.disableRenderHooks&&a);o&&this.renderDisplayObject(i.root,t,i),this.hooks.beginFrame.call(e),o&&i.renderListCurrentFrame.forEach((function(t){r.hooks.beforeRender.call(t),r.hooks.render.call(t),r.hooks.afterRender.call(t)})),this.hooks.endFrame.call(e),i.renderListCurrentFrame=[],i.renderReasons.clear(),n()}}},{key:"renderDisplayObject",value:function(t,e,n){var r=this,i=e.renderer.getConfig(),a=i.enableDirtyCheck,o=i.enableCulling;function s(t){var e=t.renderable,i=t.sortable,s=a?e.dirty||n.dirtyRectangleRenderingDisabled?t:null:t;if(s){var u=o?r.hooks.cull.call(s,r.context.camera):s;u&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(u))}e.dirty=!1,i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(t,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0)}for(var u=[t];u.length>0;){var l,c=u.pop();s(c);for(var h=(null===(l=c.sortable)||void 0===l||null===(l=l.sorted)||void 0===l?void 0:l.length)>0?c.sortable.sorted:c.childNodes,f=h.length-1;f>=0;f--)u.push(h[f])}}},{key:"sort",value:function(t,e){var n,r;(null==e||null===(n=e.sorted)||void 0===n?void 0:n.length)>0&&e.dirtyReason!==ce.Z_INDEX_CHANGED?e.dirtyChildren.forEach((function(n){var r=e.sorted.indexOf(n);if(r>-1&&e.sorted.splice(r,1),t.childNodes.indexOf(n)>-1)if(0===e.sorted.length)e.sorted.push(n);else{var i=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;si(t[i],e)<0?n=i+1:r=i}return n}(e.sorted,n);e.sorted.splice(i,0,n)}})):e.sorted=t.childNodes.slice().sort(si),(null===(r=e.sorted)||void 0===r?void 0:r.length)>0&&0===t.childNodes.filter((function(t){return t.parsedStyle.zIndex})).length&&(e.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(la.DISPLAY_OBJECT_CHANGED)}}])}(),ha=/\[\s*(.*)=(.*)\s*\]/,fa=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"selectOne",value:function(t,e){var n=this;if(t.startsWith("."))return e.find((function(e){return((null==e?void 0:e.classList)||[]).indexOf(n.getIdOrClassname(t))>-1}));if(t.startsWith("#"))return e.find((function(e){return e.id===n.getIdOrClassname(t)}));if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,a=r.value;return i?e.find((function(t){return e!==t&&("name"===i?t.name===a:n.attributeToString(t,i)===a)})):null}return e.find((function(n){return e!==n&&n.nodeName===t}))}},{key:"selectAll",value:function(t,e){var n=this;if(t.startsWith("."))return e.findAll((function(r){return e!==r&&((null==r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(t))>-1}));if(t.startsWith("#"))return e.findAll((function(r){return e!==r&&r.id===n.getIdOrClassname(t)}));if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,a=r.value;return i?e.findAll((function(t){return e!==t&&("name"===i?t.name===a:n.attributeToString(t,i)===a)})):[]}return e.findAll((function(n){return e!==n&&n.nodeName===t}))}},{key:"is",value:function(t,e){if(t.startsWith("."))return e.className===this.getIdOrClassname(t);if(t.startsWith("#"))return e.id===this.getIdOrClassname(t);if(t.startsWith("[")){var n=this.getAttribute(t),r=n.name,i=n.value;return"name"===r?e.name===i:this.attributeToString(e,r)===i}return e.nodeName===t}},{key:"getIdOrClassname",value:function(t){return t.substring(1)}},{key:"getAttribute",value:function(t){var e=t.match(ha),n="",r="";return e&&e.length>2&&(n=e[1].replace(/"/g,""),r=e[2].replace(/"/g,"")),{name:n,value:r}}},{key:"attributeToString",value:function(t,e){if(!t.getAttribute)return"";var n=t.getAttribute(e);return(0,b.Z)(n)?"":n.toString?n.toString():""}}])}(),da=function(t){return t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.MOUNTED="DOMNodeInsertedIntoDocument",t.REMOVED="removed",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.REPARENT="reparent",t.DESTROY="destroy",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled",t}({}),pa=function(t){function e(t,n,r,a,o,u,l,c){var h;return(0,i.Z)(this,e),(h=(0,s.Z)(this,e,[null])).relatedNode=n,h.prevValue=r,h.newValue=a,h.attrName=o,h.attrChange=u,h.prevParsedValue=l,h.newParsedValue=c,h.type=t,h}return(0,u.Z)(e,t),(0,a.Z)(e)}(Qi);function va(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}pa.ADDITION=2,pa.MODIFICATION=1,pa.REMOVAL=3;var ga,ya,ma,ba=new pa(da.REPARENT,null,"","","",0,"",""),xa=g.Ue(),ka=h.Ue(),wa=h.al(1,1,1),Ea=d.create(),Ma=g.Ue(),Ta=h.Ue(),Sa=d.create(),Ca=v.Ue(),Aa=h.Ue(),Pa=v.Ue(),Na=h.Ue(),Ra=h.Ue(),Za=h.Ue(),Oa=d.create(),La=v.Ue(),_a=v.Ue(),Ia=v.Ue(),Da={affectChildren:!0},Fa=function(){return(0,a.Z)((function t(e){(0,i.Z)(this,t),this.pendingEvents=new Map,this.boundsChangedEvent=new ra(da.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}),[{key:"matches",value:function(t,e){return this.runtime.sceneGraphSelector.is(t,e)}},{key:"querySelector",value:function(t,e){return this.runtime.sceneGraphSelector.selectOne(t,e)}},{key:"querySelectorAll",value:function(t,e){return this.runtime.sceneGraphSelector.selectAll(t,e)}},{key:"attach",value:function(t,e,n){var r,i=!1;t.parentNode&&(i=t.parentNode!==e,this.detach(t));var a=t.nodeName===Et.FRAGMENT,o=pi(e);t.parentNode=e;var s=a?t.childNodes:[t];(0,y.Z)(n)?s.forEach((function(t){e.childNodes.splice(n,0,t),t.parentNode=e})):s.forEach((function(t){e.childNodes.push(t),t.parentNode=e}));var u=e.sortable;if((null!=u&&null!==(r=u.sorted)&&void 0!==r&&r.length||u.dirty||t.parsedStyle.zIndex)&&(-1===u.dirtyChildren.indexOf(t)&&u.dirtyChildren.push(t),u.dirty=!0,u.dirtyReason=ce.ADDED),!o){if(a)this.dirtifyFragment(t);else{var l=t.transformable;l&&this.dirtifyWorld(t,l)}i&&t.dispatchEvent(ba)}}},{key:"detach",value:function(t){var e,n;if(t.parentNode){var r=t.transformable,i=t.parentNode.sortable;(null!=i&&null!==(e=i.sorted)&&void 0!==e&&e.length||null!==(n=t.style)&&void 0!==n&&n.zIndex)&&(-1===i.dirtyChildren.indexOf(t)&&i.dirtyChildren.push(t),i.dirty=!0,i.dirtyReason=ce.REMOVED);var a=t.parentNode.childNodes.indexOf(t);a>-1&&t.parentNode.childNodes.splice(a,1),r&&this.dirtifyWorld(t,r),t.parentNode=null}}},{key:"getOrigin",value:function(t){return t.getGeometryBounds(),t.transformable.origin}},{key:"setOrigin",value:function(t,e){"number"==typeof e&&(e=[e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0]);var n=t.transformable;if(e[0]!==n.origin[0]||e[1]!==n.origin[1]||e[2]!==n.origin[2]){var r=n.origin;r[0]=e[0],r[1]=e[1],r[2]=e[2]||0,this.dirtifyLocal(t,n)}}},{key:"rotate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof e&&(e=h.al(e,n,r));var i=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){var a=Ca;v.Su(a,e[0],e[1],e[2]);var o=this.getRotation(t),s=this.getRotation(t.parentNode);v.JG(Ia,s),v.U_(Ia,Ia),v.Jp(a,Ia,a),v.Jp(i.localRotation,a,o),v.Fv(i.localRotation,i.localRotation),this.dirtifyLocal(t,i)}else this.rotateLocal(t,e)}},{key:"rotateLocal",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof e&&(e=h.al(e,n,r));var i=t.transformable;v.Su(_a,e[0],e[1],e[2]),v.dC(i.localRotation,i.localRotation,_a),this.dirtifyLocal(t,i)}},{key:"setEulerAngles",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof e&&(e=h.al(e,n,r));var i=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){v.Su(i.localRotation,e[0],e[1],e[2]);var a=this.getRotation(t.parentNode);v.JG(La,v.U_(Ca,a)),v.dC(i.localRotation,i.localRotation,La),this.dirtifyLocal(t,i)}else this.setLocalEulerAngles(t,e)}},{key:"setLocalEulerAngles",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];"number"==typeof e&&(e=h.al(e,n,r));var a=t.transformable;v.Su(a.localRotation,e[0],e[1],e[2]),i&&this.dirtifyLocal(t,a)}},{key:"translateLocal",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof e&&(e=h.al(e,n,r));var i=t.transformable;h.fS(e,ka)||(h.VC(e,e,i.localRotation),h.IH(i.localPosition,i.localPosition,e),this.dirtifyLocal(t,i))}},{key:"setPosition",value:function(t,e){var n,r=t.transformable;if(Za[0]=e[0],Za[1]=e[1],Za[2]=null!==(n=e[2])&&void 0!==n?n:0,!h.fS(this.getPosition(t),Za)){if(h.JG(r.position,Za),null!==t.parentNode&&t.parentNode.transformable){var i=t.parentNode.transformable;d.copy(Oa,i.worldTransform),d.invert(Oa,Oa),h.fF(r.localPosition,Za,Oa)}else h.JG(r.localPosition,Za);this.dirtifyLocal(t,r)}}},{key:"setLocalPosition",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.transformable;Ra[0]=e[0],Ra[1]=e[1],Ra[2]=null!==(n=e[2])&&void 0!==n?n:0,h.fS(i.localPosition,Ra)||(h.JG(i.localPosition,Ra),r&&this.dirtifyLocal(t,i))}},{key:"scaleLocal",value:function(t,e){var n,r=t.transformable;h.Jp(r.localScale,r.localScale,h.t8(Ta,e[0],e[1],null!==(n=e[2])&&void 0!==n?n:1)),this.dirtifyLocal(t,r)}},{key:"setLocalScale",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.transformable;h.t8(Ta,e[0],e[1],null!==(n=e[2])&&void 0!==n?n:i.localScale[2]),h.fS(Ta,i.localScale)||(h.JG(i.localScale,Ta),r&&this.dirtifyLocal(t,i))}},{key:"translate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof e&&(e=h.t8(Ta,e,n,r)),h.fS(e,ka)||(h.IH(Ta,this.getPosition(t),e),this.setPosition(t,Ta))}},{key:"setRotation",value:function(t,e,n,r,i){var a=t.transformable;if("number"==typeof e&&(e=v.al(e,n,r,i)),null!==t.parentNode&&t.parentNode.transformable){var o=this.getRotation(t.parentNode);v.JG(Ca,o),v.U_(Ca,Ca),v.Jp(a.localRotation,Ca,e),v.Fv(a.localRotation,a.localRotation),this.dirtifyLocal(t,a)}else this.setLocalRotation(t,e)}},{key:"setLocalRotation",value:function(t,e,n,r,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];"number"==typeof e&&(e=v.t8(Ca,e,n,r,i));var o=t.transformable;v.JG(o.localRotation,e),a&&this.dirtifyLocal(t,o)}},{key:"setLocalSkew",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];"number"==typeof e&&(e=g.t8(Ma,e,n));var i=t.transformable;g.JG(i.localSkew,e),r&&this.dirtifyLocal(t,i)}},{key:"dirtifyLocal",value:function(t,e){pi(t)||e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtifyWorld(t,e))}},{key:"dirtifyWorld",value:function(t,e){e.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,e),this.dirtifyToRoot(t,!0)}},{key:"dirtifyFragment",value:function(t){var e=t.transformable;e&&(e.frozen=!1,e.dirtyFlag=!0,e.localDirtyFlag=!0);var n=t.renderable;n&&(n.renderBoundsDirty=!0,n.boundsDirty=!0,n.dirty=!0);for(var r=t.childNodes.length,i=0;i<r;i++)this.dirtifyFragment(t.childNodes[i]);t.nodeName===Et.FRAGMENT&&this.pendingEvents.set(t,!1)}},{key:"triggerPendingEvents",value:function(){var t=this,e=new Set,n=function(n,r){n.isConnected&&!e.has(n)&&n.nodeName!==Et.FRAGMENT&&(t.boundsChangedEvent.detail=r,t.boundsChangedEvent.target=n,n.isMutationObserved?n.dispatchEvent(t.boundsChangedEvent):n.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),e.add(n))};this.pendingEvents.forEach((function(t,e){e.nodeName!==Et.FRAGMENT&&(Da.affectChildren=t,t?e.forEach((function(t){n(t,Da)})):n(e,Da))})),e.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"dirtifyToRoot",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t;for(n.renderable&&(n.renderable.dirty=!0);n;)va(n),n=n.parentNode;e&&t.forEach((function(t){va(t)})),this.informDependentDisplayObjects(t),this.pendingEvents.set(t,e)}},{key:"updateDisplayObjectDependency",value:function(t,e,n,r){if(e&&e!==n){var i=this.displayObjectDependencyMap.get(e);if(i&&i[t]){var a=i[t].indexOf(r);i[t].splice(a,1)}}if(n){var o=this.displayObjectDependencyMap.get(n);o||(this.displayObjectDependencyMap.set(n,{}),o=this.displayObjectDependencyMap.get(n)),o[t]||(o[t]=[]),o[t].push(r)}}},{key:"informDependentDisplayObjects",value:function(t){var e=this,n=this.displayObjectDependencyMap.get(t);n&&Object.keys(n).forEach((function(t){n[t].forEach((function(n){e.dirtifyToRoot(n,!0),n.dispatchEvent(new pa(da.ATTR_MODIFIED,n,e,e,t,pa.MODIFICATION,e,e)),n.isCustomElement&&n.isConnected&&n.attributeChangedCallback&&n.attributeChangedCallback(t,e,e)}))}))}},{key:"getPosition",value:function(t){var e=t.transformable;return d.getTranslation(e.position,this.getWorldTransform(t,e))}},{key:"getRotation",value:function(t){var e=t.transformable;return d.getRotation(e.rotation,this.getWorldTransform(t,e))}},{key:"getScale",value:function(t){var e=t.transformable;return d.getScaling(e.scaling,this.getWorldTransform(t,e))}},{key:"getWorldTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.transformable;return e.localDirtyFlag||e.dirtyFlag?(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,e),e.worldTransform):e.worldTransform}},{key:"getLocalPosition",value:function(t){return t.transformable.localPosition}},{key:"getLocalRotation",value:function(t){return t.transformable.localRotation}},{key:"getLocalScale",value:function(t){return t.transformable.localScale}},{key:"getLocalSkew",value:function(t){return t.transformable.localSkew}},{key:"calcLocalTransform",value:function(t){if(0!==t.localSkew[0]||0!==t.localSkew[1]){d.fromRotationTranslationScaleOrigin(t.localTransform,t.localRotation,t.localPosition,h.al(1,1,1),t.origin),0===t.localSkew[0]&&0===t.localSkew[1]||(d.identity(Sa),Sa[4]=Math.tan(t.localSkew[0]),Sa[1]=Math.tan(t.localSkew[1]),d.multiply(t.localTransform,t.localTransform,Sa));var e=d.fromRotationTranslationScaleOrigin(Sa,v.t8(Ca,0,0,0,1),h.t8(Ta,1,1,1),t.localScale,t.origin);d.multiply(t.localTransform,t.localTransform,e)}else{var n=t.localTransform,r=t.localPosition,i=t.localRotation,a=t.localScale,o=t.origin,s=0!==r[0]||0!==r[1]||0!==r[2],u=1!==i[3]||0!==i[0]||0!==i[1]||0!==i[2],l=1!==a[0]||1!==a[1]||1!==a[2],c=0!==o[0]||0!==o[1]||0!==o[2];u||l||c?d.fromRotationTranslationScaleOrigin(n,i,r,a,o):s?d.fromTranslation(n,r):d.identity(n)}}},{key:"getLocalTransform",value:function(t){var e=t.transformable;return e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.localTransform}},{key:"setLocalTransform",value:function(t,e){var n=d.getTranslation(Aa,e),r=d.getRotation(Pa,e),i=d.getScaling(Na,e);this.setLocalScale(t,i,!1),this.setLocalPosition(t,n,!1),this.setLocalRotation(t,r,void 0,void 0,void 0,!1),this.dirtifyLocal(t,t.transformable)}},{key:"resetLocalTransform",value:function(t){this.setLocalScale(t,wa,!1),this.setLocalPosition(t,ka,!1),this.setLocalEulerAngles(t,ka,void 0,void 0,!1),this.setLocalSkew(t,xa,void 0,!1),this.dirtifyLocal(t,t.transformable)}},{key:"getTransformedGeometryBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(t,e);if(!Ot.isEmpty(r)){var i=n||new Ot;return i.setFromTransformedAABB(r,this.getWorldTransform(t)),i}return null}},{key:"getGeometryBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.geometry;return n.dirty&&Wa.styleValueRegistry.updateGeometry(t),(e?n.renderBounds:n.contentBounds||null)||new Ot}},{key:"getBounds",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.renderable;if(!r.boundsDirty&&!n&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&n&&r.renderBounds)return r.renderBounds;var i=n?r.renderBounds:r.bounds,a=this.getTransformedGeometryBounds(t,n,i);if(t.childNodes.forEach((function(t){var r=e.getBounds(t,n);r&&(a?a.add(r):(a=i||new Ot).update(r.center,r.halfExtents))})),a||(a=new Ot),n){var o=ui(t);if(o){var s=o.parsedStyle.clipPath.getBounds(n);a?s&&(a=s.intersection(a)):a.update(s.center,s.halfExtents)}}return n?(r.renderBounds=a,r.renderBoundsDirty=!1):(r.bounds=a,r.boundsDirty=!1),a}},{key:"getLocalBounds",value:function(t){if(t.parentNode){var e=Ea;t.parentNode.transformable&&(e=d.invert(Sa,this.getWorldTransform(t.parentNode)));var n=this.getBounds(t);if(!Ot.isEmpty(n)){var r=new Ot;return r.setFromTransformedAABB(n,e),r}}return this.getBounds(t)}},{key:"getBoundingClientRect",value:function(t){var e,n,r=this.getGeometryBounds(t);Ot.isEmpty(r)||(n=new Ot).setFromTransformedAABB(r,this.getWorldTransform(t));var i=null===(e=t.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e?void 0:e.getContextService().getBoundingClientRect();if(n){var a=n.getMin(),o=(0,l.Z)(a,2),s=o[0],u=o[1],c=n.getMax(),h=(0,l.Z)(c,2),f=h[0],d=h[1];return new Ft(s+((null==i?void 0:i.left)||0),u+((null==i?void 0:i.top)||0),f-s,d-u)}return new Ft((null==i?void 0:i.left)||0,(null==i?void 0:i.top)||0,0,0)}},{key:"dirtifyWorldInternal",value:function(t,e){var n=this;if(!e.dirtyFlag){e.dirtyFlag=!0,e.frozen=!1,t.childNodes.forEach((function(t){var e=t.transformable;e.dirtyFlag||n.dirtifyWorldInternal(t,e)}));var r=t.renderable;r&&(r.renderBoundsDirty=!0,r.boundsDirty=!0,r.dirty=!0)}}},{key:"syncHierarchy",value:function(t){var e=t.transformable;if(!e.frozen){e.frozen=!0,(e.localDirtyFlag||e.dirtyFlag)&&this.sync(t,e);for(var n=t.childNodes,r=0;r<n.length;r++)this.syncHierarchy(n[r])}}},{key:"sync",value:function(t,e){if(e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.dirtyFlag){var n=t.parentNode,r=n&&n.transformable;null!==n&&r?d.multiply(e.worldTransform,r.worldTransform,e.localTransform):d.copy(e.worldTransform,e.localTransform),e.dirtyFlag=!1}}},{key:"unfreezeParentToRoot",value:function(t){for(var e=t.parentNode;e;){var n=e.transformable;n&&(n.frozen=!1),e=e.parentNode}}}])}(),Ba={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},Ga=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,za=new RegExp("".concat(/[!%),.:;?\]}'""]/.source,"|").concat(/[!),.:;?\]}'""]/.source,"|").concat(/[)\]'"?!:;,.]/.source,"|").concat(/[!%),.:;?\]}'"]/.source)),Va=new RegExp("".concat(/[$('"]/.source,"|").concat(/[([{'"]/.source,"|").concat(/[(['"...]/.source,"|").concat(/[$([{'"#]/.source)),ja=function(){return(0,a.Z)((function t(e){var n=this;(0,i.Z)(this,t),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(t,e){return!n.isBreakingSpace(e)&&!(!t||!Va.exec(e)&&!za.exec(t))},this.trimByKinsokuShorui=function(t){var e=(0,o.Z)(t),n=e[e.length-2];if(!n)return t;var r=n[n.length-1];return e[e.length-2]=n.slice(0,-1),e[e.length-1]=r+e[e.length-1],e},this.runtime=e}),[{key:"measureFont",value:function(t,e){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(e),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(e,{willReadFrequently:!0});i.font=t;var a=Ba.MetricsString+Ba.BaselineSymbol,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(Ba.BaselineSymbol).width),u=Ba.HeightMultiplier*s;s=s*Ba.BaselineMultiplier|0,r.width=o,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,o,u),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var l=i.getImageData(0,0,o||1,u||1).data,c=l.length,h=4*o,f=0,d=0,p=!1;for(f=0;f<s;++f){for(var v=0;v<h;v+=4)if(255!==l[d+v]){p=!0;break}if(p)break;d+=h}for(n.ascent=s-f,d=c-h,p=!1,f=u;f>s;--f){for(var g=0;g<h;g+=4)if(255!==l[d+g]){p=!0;break}if(p)break;d-=h}return n.descent=f-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[t]=n,n}},{key:"measureText",value:function(t,e,n){var r=e.fontSize,i=void 0===r?16:r,a=e.wordWrap,o=void 0!==a&&a,s=e.lineHeight,u=e.lineWidth,l=void 0===u?1:u,c=e.textBaseline,h=void 0===c?"alphabetic":c,f=e.textAlign,d=void 0===f?"start":f,p=e.letterSpacing,v=void 0===p?0:p,g=e.textPath;e.textPathSide,e.textPathStartOffset;var m=e.leading,b=void 0===m?0:m,x=function(t){for(var e=t.fontSize,n=void 0===e?16:e,r=t.fontFamily,i=void 0===r?"sans-serif":r,a=t.fontStyle,o=void 0===a?"normal":a,s=t.fontVariant,u=void 0===s?"normal":s,l=t.fontWeight,c=void 0===l?"normal":l,h=(0,y.Z)(n)&&"".concat(n,"px")||"16px",f=i.split(","),d=f.length-1;d>=0;d--){var p=f[d].trim();!Zi.test(p)&&Ri.indexOf(p)<0&&(p='"'.concat(p,'"')),f[d]=p}return"".concat(o," ").concat(u," ").concat(c," ").concat(h," ").concat(f.join(","))}(e),k=this.measureFont(x,n);0===k.fontSize&&(k.fontSize=i,k.ascent=i);var w=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);w.font=x,e.isOverflowing=!1;var E=(o?this.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),M=new Array(E.length),T=0;if(!g){for(var S=0;S<E.length;S++){var C=w.measureText(E[S]).width+(E[S].length-1)*v;M[S]=C,T=Math.max(T,C)}var A=T+l,P=s||k.fontSize+l,N=Math.max(P,k.fontSize+l)+(E.length-1)*(P+b),R=0;return"middle"===h?R=-N/2:"bottom"===h||"alphabetic"===h||"ideographic"===h?R=-N:"top"!==h&&"hanging"!==h||(R=0),{font:x,width:A,height:N,lines:E,lineWidths:M,lineHeight:P+=b,maxLineWidth:T,fontProperties:k,lineMetrics:M.map((function(t,e){var n=0;return"center"===d||"middle"===d?n-=t/2:"right"!==d&&"end"!==d||(n-=t),new Ft(n-l/2,R+e*P,t+l,P)}))}}g.getTotalLength();for(var Z=0;Z<E.length;Z++)w.measureText(E[Z]).width,E[Z].length}},{key:"wordWrap",value:function(t,e,n){var r=this,i=this,a=e.wordWrapWidth,o=void 0===a?0:a,s=e.letterSpacing,u=void 0===s?0:s,l=e.maxLines,c=void 0===l?1/0:l,h=e.textOverflow,f=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),d=o+u,p="";"ellipsis"===h?p="...":h&&"clip"!==h&&(p=h);var v=Array.from(t),g=[],y=0,m=0,b=0,x={},k=function(t){return r.getFromCache(t,u,x,f)},w=k(p);function E(t,e,n,r){for(;k(t)<r&&e<v.length-1&&!i.isNewline(v[e+1]);)t+=v[e+=1];for(;k(t)>r&&e>n;)e-=1,t=t.slice(0,-1);return{lineTxt:t,txtLastCharIndex:e}}function M(t,e){if(!(w<=0||w>d))if(g[t]){var n=E(g[t],e,b+1,d-w);g[t]=n.lineTxt+p}else g[t]=p}for(var T=0;T<v.length;T++){var S=v[T],C=v[T-1],A=v[T+1],P=k(S);if(this.isNewline(S)){if(y+1>=c){e.isOverflowing=!0,T<v.length-1&&M(y,T-1);break}b=T-1,m=0,g[y+=1]=""}else{if(m>0&&m+P>d){var N=E(g[y],T-1,b+1,d);if(N.txtLastCharIndex!==T-1){if(g[y]=N.lineTxt,N.txtLastCharIndex===v.length-1)break;T=N.txtLastCharIndex+1,S=v[T],C=v[T-1],A=v[T+1],P=k(S)}if(y+1>=c){e.isOverflowing=!0,M(y,T-1);break}if(b=T-1,m=0,g[y+=1]="",this.isBreakingSpace(S))continue;this.canBreakInLastChar(S)||(g=this.trimToBreakable(g),m=this.sumTextWidthByCache(g[y]||"",k)),this.shouldBreakByKinsokuShorui(S,A)&&(g=this.trimByKinsokuShorui(g),m+=k(C||""))}m+=P,g[y]=(g[y]||"")+S}}return g.join("\n")}},{key:"isBreakingSpace",value:function(t){return"string"==typeof t&&Ba.BreakingSpaces.indexOf(t.charCodeAt(0))>=0}},{key:"isNewline",value:function(t){return"string"==typeof t&&Ba.Newlines.indexOf(t.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(t){var e=(0,o.Z)(t),n=e[e.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return e;var i=n.slice(r,r+1),a=r+1,s=r+(this.isBreakingSpace(i)?0:1);return e[e.length-1]+=n.slice(a,n.length),e[e.length-2]=n.slice(0,s),e}},{key:"canBreakInLastChar",value:function(t){return!t||!Ga.test(t)}},{key:"sumTextWidthByCache",value:function(t,e){return t.split("").reduce((function(t,n){return t+e(n)}),0)}},{key:"findBreakableIndex",value:function(t){for(var e=t.length-1;e>=0;e--)if(!Ga.test(t[e]))return e;return-1}},{key:"getFromCache",value:function(t,e,n,r){var i=n[t];if("number"!=typeof i){var a=t.length*e;i=r.measureText(t).width+a,n[t]=i}return i}}])}(),Wa={},Ha=(ya=new Xi,ma=new qi,ga={},(0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)(ga,Et.FRAGMENT,null),Et.CIRCLE,new Wi),Et.ELLIPSE,new Hi),Et.RECT,ya),Et.IMAGE,ya),Et.GROUP,new Ki),Et.LINE,new Ui),Et.TEXT,new $i(Wa)),Et.POLYLINE,ma),Et.POLYGON,ma),(0,ft.Z)((0,ft.Z)((0,ft.Z)(ga,Et.PATH,new Yi),Et.HTML,new Ji),Et.MESH,null)),Ua=function(t){var e=new jr,n=new Ur;return t={},(0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)(t,fe.PERCENTAGE,null),fe.NUMBER,new $r),fe.ANGLE,new zr),fe.DEFINED_PATH,new Vr),fe.PAINT,e),fe.COLOR,e),fe.FILTER,new Wr),fe.LENGTH,n),fe.LENGTH_PERCENTAGE,n),fe.LENGTH_PERCENTAGE_12,new Yr),(0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)((0,ft.Z)(t,fe.LENGTH_PERCENTAGE_14,new qr),fe.COORDINATE,new Ur),fe.OFFSET_DISTANCE,new Kr),fe.OPACITY_VALUE,new Jr),fe.PATH,new Qr),fe.LIST_OF_POINTS,new ti),fe.SHADOW_BLUR,new ei),fe.TEXT,new ni),fe.TEXT_TRANSFORM,new ri),fe.TRANSFORM,new zi),(0,ft.Z)((0,ft.Z)((0,ft.Z)(t,fe.TRANSFORM_ORIGIN,new Vi),fe.Z_INDEX,new ji),fe.MARKER,new Xr)}();Wa.CameraContribution=ue,Wa.AnimationTimeline=null,Wa.EasingFunction=null,Wa.offscreenCanvasCreator=new ua,Wa.sceneGraphSelector=new fa,Wa.sceneGraphService=new Fa(Wa),Wa.textService=new ja(Wa),Wa.geometryUpdaterFactory=Ha,Wa.CSSPropertySyntaxFactory=Ua,Wa.styleValueRegistry=new Br(Wa),Wa.layoutRegistry=null,Wa.globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},Wa.enableStyleSyntax=!0,Wa.enableSizeAttenuation=!1;var Ya=0;var qa=new pa(da.INSERTED,null,"","","",0,"",""),Xa=new pa(da.REMOVED,null,"","","",0,"",""),$a=new ra(da.DESTROY),Ka=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=(0,s.Z)(this,e,[].concat(r))).entity=Ya++,t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},t.cullable={strategy:le.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},t.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},t.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},t.rBushNode={aabb:void 0},t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.destroyed=!1,t.style={},t.computedStyle={},t.parsedStyle={},t.attributes={},t}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)}},{key:"classList",get:function(){return this.className.split(" ").filter((function(t){return""!==t}))}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t-1]||null}return null}},{key:"cloneNode",value:function(t){throw new Error(Bt)}},{key:"appendChild",value:function(t,e){var n;if(t.destroyed)throw new Error("Cannot append a destroyed element.");return Wa.sceneGraphService.attach(t,this,e),null!==(n=this.ownerDocument)&&void 0!==n&&n.defaultView&&(pi(this)||t.nodeName!==Et.FRAGMENT?this.ownerDocument.defaultView.mountChildren(t):this.ownerDocument.defaultView.mountFragment(t)),this.isMutationObserved&&(qa.relatedNode=this,t.dispatchEvent(qa)),t}},{key:"insertBefore",value:function(t,e){if(e){t.parentElement&&t.parentElement.removeChild(t);var n=this.childNodes.indexOf(e);-1===n?this.appendChild(t):this.appendChild(t,n)}else this.appendChild(t);return t}},{key:"replaceChild",value:function(t,e){var n=this.childNodes.indexOf(e);return this.removeChild(e),this.appendChild(t,n),e}},{key:"removeChild",value:function(t){var e;return Xa.relatedNode=this,t.dispatchEvent(Xa),null!==(e=t.ownerDocument)&&void 0!==e&&e.defaultView&&t.ownerDocument.defaultView.unmountChildren(t),Wa.sceneGraphService.detach(t),t}},{key:"removeChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];this.removeChild(e)}}},{key:"destroyChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];e.childNodes.length>0&&e.destroyChildren(),e.destroy()}}},{key:"matches",value:function(t){return Wa.sceneGraphService.matches(t,this)}},{key:"getElementById",value:function(t){return Wa.sceneGraphService.querySelector("#".concat(t),this)}},{key:"getElementsByName",value:function(t){return Wa.sceneGraphService.querySelectorAll('[name="'.concat(t,'"]'),this)}},{key:"getElementsByClassName",value:function(t){return Wa.sceneGraphService.querySelectorAll(".".concat(t),this)}},{key:"getElementsByTagName",value:function(t){return Wa.sceneGraphService.querySelectorAll(t,this)}},{key:"querySelector",value:function(t){return Wa.sceneGraphService.querySelector(t,this)}},{key:"querySelectorAll",value:function(t){return Wa.sceneGraphService.querySelectorAll(t,this)}},{key:"closest",value:function(t){var e=this;do{if(Wa.sceneGraphService.matches(t,e))return e;e=e.parentElement}while(null!==e);return null}},{key:"find",value:function(t){var e=this,n=null;return this.forEach((function(r){return r===e||!t(r)||(n=r,!1)})),n}},{key:"findAll",value:function(t){var e=this,n=[];return this.forEach((function(r){r!==e&&t(r)&&n.push(r)})),n}},{key:"after",value:function(){var t=this;if(this.parentNode){for(var e=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(n,r){var i;return null===(i=t.parentNode)||void 0===i?void 0:i.appendChild(n,e+r+1)}))}}},{key:"before",value:function(){if(this.parentNode){for(var t,e=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r[0],s=r.slice(1);this.parentNode.appendChild(a,e),(t=a).after.apply(t,(0,o.Z)(s))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){return t.appendChild(e)}))}},{key:"prepend",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e,n){return t.appendChild(e,n)}))}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){this.destroyChildren(),this.dispatchEvent($a),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return Wa.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return Wa.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return Wa.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return Wa.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return Wa.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(t){if("symbol"!=typeof t){var e=this.attributes[t];return e}}},{key:"hasAttribute",value:function(t){return this.getAttributeNames().includes(t)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(t){this.setAttribute(t,null),delete this.attributes[t]}},{key:"setAttribute",value:function(t,e,n,r){this.attributes[t]=e}},{key:"getAttributeNS",value:function(t,e){throw new Error(Bt)}},{key:"getAttributeNode",value:function(t){throw new Error(Bt)}},{key:"getAttributeNodeNS",value:function(t,e){throw new Error(Bt)}},{key:"hasAttributeNS",value:function(t,e){throw new Error(Bt)}},{key:"removeAttributeNS",value:function(t,e){throw new Error(Bt)}},{key:"removeAttributeNode",value:function(t){throw new Error(Bt)}},{key:"setAttributeNS",value:function(t,e,n){throw new Error(Bt)}},{key:"setAttributeNode",value:function(t){throw new Error(Bt)}},{key:"setAttributeNodeNS",value:function(t){throw new Error(Bt)}},{key:"toggleAttribute",value:function(t,e){throw new Error(Bt)}}])}(oa);function Ja(t){return!(null==t||!t.nodeName)}var Qa=Wa.globalThis.Proxy?Wa.globalThis.Proxy:function(){},to=new pa(da.ATTR_MODIFIED,null,null,null,null,pa.MODIFICATION,null,null),eo=h.Ue(),no=v.Ue(),ro=function(t){function e(t){var n;return(0,i.Z)(this,e),(n=(0,s.Z)(this,e)).isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=t,n.id=t.id||"",n.name=t.name||"",(t.className||t.class)&&(n.className=t.className||t.class),n.nodeName=t.type||Et.GROUP,t.initialParsedStyle&&Object.assign(n.parsedStyle,t.initialParsedStyle),n.initAttributes(t.style),Wa.enableStyleSyntax&&(n.style=new Qa({setProperty:function(t,e){n.setAttribute(t,e)},getPropertyValue:function(t){return n.getAttribute(t)},removeProperty:function(t){n.removeAttribute(t)},item:function(){return""}},{get:function(t,e){return void 0!==t[e]?t[e]:n.getAttribute(e)},set:function(t,e,r){return n.setAttribute(e,r),!0}})),n}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"destroy",value:function(){vt(e,"destroy",this,3)([]),this.getAnimations().forEach((function(t){t.cancel()}))}},{key:"cloneNode",value:function(t,e){var n=(0,r.Z)({},this.attributes);for(var i in n){var a=n[i];Ja(a)&&"clipPath"!==i&&"offsetPath"!==i&&"textPath"!==i&&(n[i]=a.cloneNode(t)),e&&(n[i]=e(i,a))}var o=new this.constructor((0,r.Z)((0,r.Z)({},this.config),{},{style:n}));return o.setLocalTransform(this.getLocalTransform()),t&&this.children.forEach((function(e){if(!e.style.isMarker){var n=e.cloneNode(t);o.appendChild(n)}})),o}},{key:"initAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Wa.styleValueRegistry.processProperties(this,t,{forceUpdateGeometry:!0}),this.renderable.dirty=!0}},{key:"setAttribute",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];(0,st.Z)(n)||(r||n!==this.attributes[t])&&(this.internalSetAttribute(t,n,{memoize:i}),vt(e,"setAttribute",this,3)([t,n]))}},{key:"internalSetAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.renderable,i=this.attributes[t],a=this.parsedStyle[t];Wa.styleValueRegistry.processProperties(this,(0,ft.Z)({},t,e),n),r.dirty=!0;var o,s=this.parsedStyle[t];(this.isConnected&&(to.relatedNode=this,to.prevValue=i,to.newValue=e,to.attrName=t,to.prevParsedValue=a,to.newParsedValue=s,this.isMutationObserved?this.dispatchEvent(to):(to.target=this,this.ownerDocument.defaultView.dispatchEvent(to,!0))),this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(o=this.attributeChangedCallback)||void 0===o||o.call(this,t,i,e,a,s))}},{key:"getBBox",value:function(){var t=this.getBounds(),e=t.getMin(),n=(0,l.Z)(e,2),r=n[0],i=n[1],a=t.getMax(),o=(0,l.Z)(a,2),s=o[0],u=o[1];return new Ft(r,i,s-r,u-i)}},{key:"setOrigin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Wa.sceneGraphService.setOrigin(this,jt(t,e,n,!1)),this}},{key:"getOrigin",value:function(){return Wa.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Wa.sceneGraphService.setPosition(this,jt(t,e,n,!1)),this}},{key:"setLocalPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Wa.sceneGraphService.setLocalPosition(this,jt(t,e,n,!1)),this}},{key:"translate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Wa.sceneGraphService.translate(this,jt(t,e,n,!1)),this}},{key:"translateLocal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Wa.sceneGraphService.translateLocal(this,jt(t,e,n,!1)),this}},{key:"getPosition",value:function(){return Wa.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return Wa.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(t,e,n){return this.scaleLocal(t,e,n)}},{key:"scaleLocal",value:function(t,e,n){return"number"==typeof t&&(t=jt(t,e=e||t,n=n||t,!1)),Wa.sceneGraphService.scaleLocal(this,t),this}},{key:"setLocalScale",value:function(t,e,n){return"number"==typeof t&&(t=jt(t,e=e||t,n=n||t,!1)),Wa.sceneGraphService.setLocalScale(this,t),this}},{key:"getLocalScale",value:function(){return Wa.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return Wa.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var t=Xt(eo,Wa.sceneGraphService.getWorldTransform(this));return Yt((0,l.Z)(t,3)[2])}},{key:"getLocalEulerAngles",value:function(){var t=Xt(eo,Wa.sceneGraphService.getLocalRotation(this));return Yt((0,l.Z)(t,3)[2])}},{key:"setEulerAngles",value:function(t){return Wa.sceneGraphService.setEulerAngles(this,0,0,t),this}},{key:"setLocalEulerAngles",value:function(t){return Wa.sceneGraphService.setLocalEulerAngles(this,0,0,t),this}},{key:"rotateLocal",value:function(t,e,n){return(0,b.Z)(e)&&(0,b.Z)(n)?Wa.sceneGraphService.rotateLocal(this,0,0,t):Wa.sceneGraphService.rotateLocal(this,t,e,n),this}},{key:"rotate",value:function(t,e,n){return(0,b.Z)(e)&&(0,b.Z)(n)?Wa.sceneGraphService.rotate(this,0,0,t):Wa.sceneGraphService.rotate(this,t,e,n),this}},{key:"setRotation",value:function(t,e,n,r){return Wa.sceneGraphService.setRotation(this,t,e,n,r),this}},{key:"setLocalRotation",value:function(t,e,n,r){return Wa.sceneGraphService.setLocalRotation(this,t,e,n,r),this}},{key:"setLocalSkew",value:function(t,e){return Wa.sceneGraphService.setLocalSkew(this,t,e),this}},{key:"getRotation",value:function(){return Wa.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return Wa.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return Wa.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return Wa.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return Wa.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(t){return Wa.sceneGraphService.setLocalTransform(this,t),this}},{key:"resetLocalTransform",value:function(){Wa.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(t,e){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,t,e):null}},{key:"isVisible",value:function(){var t;return"hidden"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.visibility)}},{key:"interactive",get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"}},{key:"isInteractive",value:function(){var t;return"none"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.pointerEvents)}},{key:"isCulled",value:function(){return!(!this.cullable||!this.cullable.enable||this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,o.Z)(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,o.Z)(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i?(0,ht.Z)(i)?(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),this):2===n.length?(this.setAttribute(i,a),this):this.attributes[i]:this.attributes}},{key:"getMatrix",value:function(t){var e=t||this.getWorldTransform(),n=d.getTranslation(eo,e),r=(0,l.Z)(n,2),i=r[0],a=r[1],o=d.getScaling(eo,e),s=(0,l.Z)(o,2),u=s[0],c=s[1],h=d.getRotation(no,e),f=Xt(eo,h),v=(0,l.Z)(f,3),g=v[0],y=v[2];return function(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t);return p.al(r*a,i*o,0,-r*o,i*a,0,e,n,1)}(g||y,i,a,u,c)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(t){var e=$t(t),n=(0,l.Z)(e,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setEulerAngles(s).setPosition(r,i).setLocalScale(a,o)}},{key:"setLocalMatrix",value:function(t){var e=$t(t),n=(0,l.Z)(e,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setLocalEulerAngles(s).setLocalPosition(r,i).setLocalScale(a,o)}},{key:"show",value:function(){this.forEach((function(t){t.style.visibility="visible"}))}},{key:"hide",value:function(){this.forEach((function(t){t.style.visibility="hidden"}))}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(t){return this.children[t]||null}},{key:"add",value:function(t,e){return this.appendChild(t,e)}},{key:"set",value:function(t,e){this.config[t]=e}},{key:"get",value:function(t){return this.config[t]}},{key:"moveTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(t,e,n),this}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(t,e,n),this}},{key:"setZIndex",value:function(t){return this.style.zIndex=t,this}}])}(Ka);ro.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var io=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,e),(0,s.Z)(this,e,[(0,r.Z)({type:Et.CIRCLE},t)])}return(0,u.Z)(e,t),(0,a.Z)(e)}(ro);io.PARSED_STYLE_LIST=new Set([].concat((0,o.Z)(ro.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var ao=["style"],oo=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.style,o=(0,xt.Z)(n,ao);return(0,i.Z)(this,e),(t=(0,s.Z)(this,e,[(0,r.Z)({style:a},o)])).isCustomElement=!0,t}return(0,u.Z)(e,t),(0,a.Z)(e)}(ro);oo.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var so=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,e),(0,s.Z)(this,e,[(0,r.Z)({type:Et.ELLIPSE},t)])}return(0,u.Z)(e,t),(0,a.Z)(e)}(ro);so.PARSED_STYLE_LIST=new Set([].concat((0,o.Z)(ro.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"])),(function(t){function e(){return(0,i.Z)(this,e),(0,s.Z)(this,e,[{type:Et.FRAGMENT}])}return(0,u.Z)(e,t),(0,a.Z)(e)}(ro)).PARSED_STYLE_LIST=new Set(["class","className"]);var uo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,e),(0,s.Z)(this,e,[(0,r.Z)({type:Et.GROUP},t)])}return(0,u.Z)(e,t),(0,a.Z)(e)}(ro);uo.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var lo=["style"],co=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.style,o=(0,xt.Z)(n,lo);return(0,i.Z)(this,e),(t=(0,s.Z)(this,e,[(0,r.Z)({type:Et.HTML,style:a},o)])).cullable.enable=!1,t}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var t=d.invert(d.create(),this.parentNode.getWorldTransform()),e=this.getBounds();if(!Ot.isEmpty(e)){var n=new Ot;return n.setFromTransformedAABB(e,t),n}}return this.getBounds()}}])}(ro);co.PARSED_STYLE_LIST=new Set([].concat((0,o.Z)(ro.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var ho=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,e),(0,s.Z)(this,e,[(0,r.Z)({type:Et.IMAGE},t)])}return(0,u.Z)(e,t),(0,a.Z)(e)}(ro);ho.PARSED_STYLE_LIST=new Set([].concat((0,o.Z)(ro.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var fo=["style"],po=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.style,o=(0,xt.Z)(n,fo);(0,i.Z)(this,e),(t=(0,s.Z)(this,e,[(0,r.Z)({type:Et.LINE,style:(0,r.Z)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},a)},o)])).markerStartAngle=0,t.markerEndAngle=0;var u=t.parsedStyle,l=u.markerStart,c=u.markerEnd;return l&&Ja(l)&&(t.markerStartAngle=l.getLocalEulerAngles(),t.appendChild(l)),c&&Ja(c)&&(t.markerEndAngle=c.getLocalEulerAngles(),t.appendChild(c)),t.transformMarker(!0),t.transformMarker(!1),t}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"x1"===t||"y1"===t||"x2"===t||"y2"===t||"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Ja(r)&&(this.markerStartAngle=0,r.remove()),i&&Ja(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t&&(r&&Ja(r)&&(this.markerEndAngle=0,r.remove()),i&&Ja(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)))}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=e.x1,s=e.x2,u=e.y1,l=e.y2,c=t?n:r;if(c&&Ja(c)){var h,f,d,p,v,g,y;t?(p=o,v=u,f=s-o,d=l-u,g=i||0,y=this.markerStartAngle):(p=s,v=l,f=o-s,d=u-l,g=a||0,y=this.markerEndAngle),h=Math.atan2(d,f),c.setLocalEulerAngles(180*h/Math.PI+y),c.setLocalPosition(p+Math.cos(h)*g,v+Math.sin(h)*g)}}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle,r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=(0,gt.U4)(r,i,a,o,t),u=s.x,l=s.y,c=h.fF(h.Ue(),h.al(u,l,0),e?this.getWorldTransform():this.getLocalTransform());return new Dt(c[0],c[1])}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(t/this.getTotalLength(),e)}},{key:"getTotalLength",value:function(){var t=this.parsedStyle,e=t.x1,n=t.y1,r=t.x2,i=t.y2;return(0,gt.Xk)(e,n,r,i)}}])}(ro);po.PARSED_STYLE_LIST=new Set([].concat((0,o.Z)(ro.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var vo=["style"],go=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.style,o=(0,xt.Z)(n,vo);(0,i.Z)(this,e),(t=(0,s.Z)(this,e,[(0,r.Z)({type:Et.PATH,style:a,initialParsedStyle:{miterLimit:4,d:(0,r.Z)({},he)}},o)])).markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var u=t.parsedStyle,l=u.markerStart,c=u.markerEnd,h=u.markerMid;return l&&Ja(l)&&(t.markerStartAngle=l.getLocalEulerAngles(),t.appendChild(l)),h&&Ja(h)&&t.placeMarkerMid(h),c&&Ja(c)&&(t.markerEndAngle=c.getLocalEulerAngles(),t.appendChild(c)),t.transformMarker(!0),t.transformMarker(!1),t}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"d"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Ja(r)&&(this.markerStartAngle=0,r.remove()),i&&Ja(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&Ja(r)&&(this.markerEndAngle=0,r.remove()),i&&Ja(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=t?n:r;if(o&&Ja(o)){var s,u,c,h,f,d,p;if(t){var v=this.getStartTangent(),g=(0,l.Z)(v,2),y=g[0],m=g[1];h=m[0],f=m[1],u=y[0]-m[0],c=y[1]-m[1],d=i||0,p=this.markerStartAngle}else{var b=this.getEndTangent(),x=(0,l.Z)(b,2),k=x[0],w=x[1];h=w[0],f=w[1],u=k[0]-w[0],c=k[1]-w[1],d=a||0,p=this.markerEndAngle}s=Math.atan2(c,u),o.setLocalEulerAngles(180*s/Math.PI+p),o.setLocalPosition(h+Math.cos(s)*d,f+Math.sin(s)*d)}}},{key:"placeMarkerMid",value:function(t){var e=this.parsedStyle.d.segments;if(this.markerMidList.forEach((function(t){t.remove()})),t&&Ja(t))for(var n=1;n<e.length-1;n++){var r=(0,l.Z)(e[n].currentPoint,2),i=r[0],a=r[1],o=1===n?t:t.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(i,a)}}},{key:"getTotalLength",value:function(){return Qn(this)}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(t,e,n){return q(t,e,(0,w.pi)((0,w.pi)({},n),{bbox:!1,length:!0})).point}(this.parsedStyle.d.absolutePath,t),r=n.x,i=n.y,a=h.fF(h.Ue(),h.al(r,i,0),e?this.getWorldTransform():this.getLocalTransform());return new Dt(a[0],a[1])}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(t*Qn(this),e)}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.d.segments,e=[];if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.d.segments,e=t.length,n=[];if(e>1){var r=t[e-2].currentPoint,i=t[e-1].currentPoint,a=t[e-1].endTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([r[0],r[1]]),n.push([i[0],i[1]]))}return n}}])}(ro);go.PARSED_STYLE_LIST=new Set([].concat((0,o.Z)(ro.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var yo=["style"],mo=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.style,o=(0,xt.Z)(n,yo);(0,i.Z)(this,e),(t=(0,s.Z)(this,e,[(0,r.Z)({type:Et.POLYGON,style:a,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},o)])).markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var u=t.parsedStyle,l=u.markerStart,c=u.markerEnd,h=u.markerMid;return l&&Ja(l)&&(t.markerStartAngle=l.getLocalEulerAngles(),t.appendChild(l)),h&&Ja(h)&&t.placeMarkerMid(h),c&&Ja(c)&&(t.markerEndAngle=c.getLocalEulerAngles(),t.appendChild(c)),t.transformMarker(!0),t.transformMarker(!1),t}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"points"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Ja(r)&&(this.markerStartAngle=0,r.remove()),i&&Ja(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&Ja(r)&&(this.markerEndAngle=0,r.remove()),i&&Ja(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=(e.points||{}).points,s=t?n:r;if(s&&Ja(s)&&o){var u,l,c,h,f,d,p;if(h=o[0][0],f=o[0][1],t)l=o[1][0]-o[0][0],c=o[1][1]-o[0][1],d=i||0,p=this.markerStartAngle;else{var v=o.length;this.parsedStyle.isClosed?(l=o[v-1][0]-o[0][0],c=o[v-1][1]-o[0][1]):(h=o[v-1][0],f=o[v-1][1],l=o[v-2][0]-o[v-1][0],c=o[v-2][1]-o[v-1][1]),d=a||0,p=this.markerEndAngle}u=Math.atan2(c,l),s.setLocalEulerAngles(180*u/Math.PI+p),s.setLocalPosition(h+Math.cos(u)*d,f+Math.sin(u)*d)}}},{key:"placeMarkerMid",value:function(t){var e=(this.parsedStyle.points||{}).points;if(this.markerMidList.forEach((function(t){t.remove()})),this.markerMidList=[],t&&Ja(t)&&e)for(var n=1;n<(this.parsedStyle.isClosed?e.length:e.length-1);n++){var r=e[n][0],i=e[n][1],a=1===n?t:t.cloneNode(!0);this.markerMidList.push(a),this.appendChild(a),a.setLocalPosition(r,i)}}}])}(ro);mo.PARSED_STYLE_LIST=new Set([].concat((0,o.Z)(ro.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var bo=["style"],xo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.style,a=(0,xt.Z)(t,bo);return(0,i.Z)(this,e),(0,s.Z)(this,e,[(0,r.Z)({type:Et.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},a)])}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"getTotalLength",value:function(){return 0===(t=this).parsedStyle.points.totalLength&&(t.parsedStyle.points.totalLength=(0,gt.hE)(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength;var t}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(t/this.getTotalLength(),e)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var r,i,a=[],o=0,s=this.getTotalLength();n.forEach((function(t,e){n[e+1]&&((r=[0,0])[0]=o/s,i=(0,gt.Xk)(t[0],t[1],n[e+1][0],n[e+1][1]),o+=i,r[1]=o/s,a.push(r))})),this.parsedStyle.points.segments=a}var u=0,l=0;this.parsedStyle.points.segments.forEach((function(e,n){t>=e[0]&&t<=e[1]&&(u=(t-e[0])/(e[1]-e[0]),l=n)}));var c=(0,gt.U4)(n[l][0],n[l][1],n[l+1][0],n[l+1][1],u),f=c.x,d=c.y,p=h.fF(h.Ue(),h.al(f,d,0),e?this.getWorldTransform():this.getLocalTransform());return new Dt(p[0],p[1])}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.points.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.points.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n}}])}(mo);xo.PARSED_STYLE_LIST=new Set([].concat((0,o.Z)(mo.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var ko=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,e),(0,s.Z)(this,e,[(0,r.Z)({type:Et.RECT},t)])}return(0,u.Z)(e,t),(0,a.Z)(e)}(ro);ko.PARSED_STYLE_LIST=new Set([].concat((0,o.Z)(ro.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var wo=["style"],Eo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.style,a=(0,xt.Z)(t,wo);return(0,i.Z)(this,e),(0,s.Z)(this,e,[(0,r.Z)({type:Et.TEXT,style:(0,r.Z)({fill:"black"},n)},a)])}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"getComputedTextLength",value:function(){var t;return this.getGeometryBounds(),(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var t;return this.getGeometryBounds(),(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(ro);Eo.PARSED_STYLE_LIST=new Set([].concat((0,o.Z)(ro.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var Mo=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.registry={},this.define(Et.CIRCLE,io),this.define(Et.ELLIPSE,so),this.define(Et.RECT,ko),this.define(Et.IMAGE,ho),this.define(Et.LINE,po),this.define(Et.GROUP,uo),this.define(Et.PATH,go),this.define(Et.POLYGON,mo),this.define(Et.POLYLINE,xo),this.define(Et.TEXT,Eo),this.define(Et.HTML,co)}),[{key:"define",value:function(t,e){this.registry[t]=e}},{key:"get",value:function(t){return this.registry[t]}}])}(),To={number:function(t){return new ln(t)},percent:function(t){return new ln(t,"%")},px:function(t){return new ln(t,"px")},em:function(t){return new ln(t,"em")},rem:function(t){return new ln(t,"rem")},deg:function(t){return new ln(t,"deg")},grad:function(t){return new ln(t,"grad")},rad:function(t){return new ln(t,"rad")},turn:function(t){return new ln(t,"turn")},s:function(t){return new ln(t,"s")},ms:function(t){return new ln(t,"ms")},registerProperty:function(t){var e=t.name,n=t.inherits,r=t.interpolable,i=t.initialValue,a=t.syntax;Wa.styleValueRegistry.registerMetadata({n:e,inh:n,int:r,d:i,syntax:a})},registerLayout:function(t,e){Wa.layoutRegistry.registerLayout(t,e)}},So=function(t){function e(){var t;(0,i.Z)(this,e),(t=(0,s.Z)(this,e)).defaultView=null,t.ownerDocument=null,t.nodeName="document";try{t.timeline=new Wa.AnimationTimeline(t)}catch(t){}var n={};return Ir.forEach((function(t){var e=t.n,r=t.inh,i=t.d;r&&i&&(n[e]=(0,ct.Z)(i)?i(Et.GROUP):i)})),t.documentElement=new uo({id:"g-root",style:n}),t.documentElement.ownerDocument=t,t.documentElement.parentNode=t,t.childNodes=[t.documentElement],t}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(t,e){if("svg"===t)return this.documentElement;var n=this.defaultView.customElements.get(t);n||(console.warn("Unsupported tagName: ",t),n="tspan"===t?Eo:uo);var r=new n(e);return r.ownerDocument=this,r}},{key:"createElementNS",value:function(t,e,n){return this.createElement(e,n)}},{key:"cloneNode",value:function(t){throw new Error(Bt)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(t){}}},{key:"elementsFromBBox",value:function(t,e,n,r){var i=this.defaultView.context.rBushRoot.search({minX:t,minY:e,maxX:n,maxY:r}),a=[];return i.forEach((function(t){var e=t.displayObject,n=e.parsedStyle.pointerEvents,r=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(void 0===n?"auto":n);(!r||r&&e.isVisible())&&!e.isCulled()&&e.isInteractive()&&a.push(e)})),a.sort((function(t,e){return e.sortable.renderOrder-t.sortable.renderOrder})),a}},{key:"elementFromPointSync",value:function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return null;var u=this.defaultView.viewport2Client({x:r,y:i}),l=u.x,c=u.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:l,clientY:c},picked:[]}).picked;return h&&h[0]||this.documentElement}},{key:"elementFromPoint",value:(r=(0,mt.Z)((0,yt.Z)().mark((function t(e,n){var r,i,a,o,s,u,l,c,h,f,d;return(0,yt.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.defaultView.canvas2Viewport({x:e,y:n}),i=r.x,a=r.y,o=this.defaultView.getConfig(),s=o.width,u=o.height,!(i<0||a<0||i>s||a>u)){t.next=4;break}return t.abrupt("return",null);case 4:return l=this.defaultView.viewport2Client({x:i,y:a}),c=l.x,h=l.y,t.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:e,y:n,viewportX:i,viewportY:a,clientX:c,clientY:h},picked:[]});case 7:return f=t.sent,d=f.picked,t.abrupt("return",d&&d[0]||this.documentElement);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"elementsFromPointSync",value:function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return[];var u=this.defaultView.viewport2Client({x:r,y:i}),l=u.x,c=u.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:l,clientY:c},picked:[]}).picked;return h[h.length-1]!==this.documentElement&&h.push(this.documentElement),h}},{key:"elementsFromPoint",value:(n=(0,mt.Z)((0,yt.Z)().mark((function t(e,n){var r,i,a,o,s,u,l,c,h,f,d;return(0,yt.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.defaultView.canvas2Viewport({x:e,y:n}),i=r.x,a=r.y,o=this.defaultView.getConfig(),s=o.width,u=o.height,!(i<0||a<0||i>s||a>u)){t.next=4;break}return t.abrupt("return",[]);case 4:return l=this.defaultView.viewport2Client({x:i,y:a}),c=l.x,h=l.y,t.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:e,y:n,viewportX:i,viewportY:a,clientX:c,clientY:h},picked:[]});case 7:return f=t.sent,(d=f.picked)[d.length-1]!==this.documentElement&&d.push(this.documentElement),t.abrupt("return",d);case 11:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"appendChild",value:function(t,e){throw new Error(Gt)}},{key:"insertBefore",value:function(t,e){throw new Error(Gt)}},{key:"removeChild",value:function(t,e){throw new Error(Gt)}},{key:"replaceChild",value:function(t,e,n){throw new Error(Gt)}},{key:"append",value:function(){throw new Error(Gt)}},{key:"prepend",value:function(){throw new Error(Gt)}},{key:"getElementById",value:function(t){return this.documentElement.getElementById(t)}},{key:"getElementsByName",value:function(t){return this.documentElement.getElementsByName(t)}},{key:"getElementsByTagName",value:function(t){return this.documentElement.getElementsByTagName(t)}},{key:"getElementsByClassName",value:function(t){return this.documentElement.getElementsByClassName(t)}},{key:"querySelector",value:function(t){return this.documentElement.querySelector(t)}},{key:"querySelectorAll",value:function(t){return this.documentElement.querySelectorAll(t)}},{key:"find",value:function(t){return this.documentElement.find(t)}},{key:"findAll",value:function(t){return this.documentElement.findAll(t)}}]);var n,r}(oa),Co=function(){function t(e){(0,i.Z)(this,t),this.strategies=e}return(0,a.Z)(t,[{key:"apply",value:function(e){var n=e.camera,r=e.renderingService,i=e.renderingContext,a=this.strategies;r.hooks.cull.tap(t.tag,(function(t){if(t){var e=t.cullable;return 0===a.length?e.visible=i.unculledEntities.indexOf(t.entity)>-1:e.visible=a.every((function(e){return e.isVisible(n,t)})),!t.isCulled()&&t.isVisible()?t:(t.dispatchEvent(new ra(da.CULLED)),null)}return t})),r.hooks.afterRender.tap(t.tag,(function(t){t.cullable.visibilityPlaneMask=-1}))}}])}();Co.tag="Culling";var Ao=function(){function t(){var e=this;(0,i.Z)(this,t),this.autoPreventDefault=!1,this.rootPointerEvent=new ea(null),this.rootWheelEvent=new na(null),this.onPointerMove=function(t){var n,r=null===(n=e.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView;if(!r.supportsTouchEvents||"touch"!==t.pointerType){var i,a=e.normalizeToPointerEvent(t,r),o=(0,bt.Z)(a);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=e.bootstrapEvent(e.rootPointerEvent,s,r,t);e.context.eventService.mapEvent(u)}}catch(t){o.e(t)}finally{o.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(t){var n,r,i=null===(n=e.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView,a=e.normalizeToPointerEvent(t,i),o=(0,bt.Z)(a);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=e.bootstrapEvent(e.rootPointerEvent,s,i,t);e.context.eventService.mapEvent(u)}}catch(t){o.e(t)}finally{o.f()}e.setCursor(e.context.eventService.cursor)}}return(0,a.Z)(t,[{key:"apply",value:function(e){var n=this;this.context=e;var r=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler((function(t){return n.context.renderingService.hooks.pickSync.call({position:t,picked:[],topmost:!0}).picked[0]||null})),r.hooks.pointerWheel.tap(t.tag,(function(t){var e=n.normalizeWheelEvent(t);n.context.eventService.mapEvent(e)})),r.hooks.pointerDown.tap(t.tag,(function(t){if(!i.supportsTouchEvents||"touch"!==t.pointerType){var e=n.normalizeToPointerEvent(t,i);if(n.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();var r,a=(0,bt.Z)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,t);n.context.eventService.mapEvent(s)}}catch(t){a.e(t)}finally{a.f()}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerUp.tap(t.tag,(function(t){if(!i.supportsTouchEvents||"touch"!==t.pointerType){var e,r=n.context.contextService.getDomElement(),a=n.context.eventService.isNativeEventFromCanvas(r,t)?"":"outside",o=n.normalizeToPointerEvent(t,i),s=(0,bt.Z)(o);try{for(s.s();!(e=s.n()).done;){var u=e.value,l=n.bootstrapEvent(n.rootPointerEvent,u,i,t);l.type+=a,n.context.eventService.mapEvent(l)}}catch(t){s.e(t)}finally{s.f()}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerMove.tap(t.tag,this.onPointerMove),r.hooks.pointerOver.tap(t.tag,this.onPointerMove),r.hooks.pointerOut.tap(t.tag,this.onPointerMove),r.hooks.click.tap(t.tag,this.onClick),r.hooks.pointerCancel.tap(t.tag,(function(t){var e,r=n.normalizeToPointerEvent(t,i),a=(0,bt.Z)(r);try{for(a.s();!(e=a.n()).done;){var o=e.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,t);n.context.eventService.mapEvent(s)}}catch(t){a.e(t)}finally{a.f()}n.setCursor(n.context.eventService.cursor)}))}},{key:"bootstrapEvent",value:function(t,e,n,r){t.view=n,t.originalEvent=null,t.nativeEvent=r,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var i=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),a=i.x,o=i.y;t.viewport.x=a,t.viewport.y=o;var s=this.context.eventService.viewport2Canvas(t.viewport),u=s.x,l=s.y;return t.canvas.x=u,t.canvas.y=l,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=r.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=fi[t.type]||t.type),t}},{key:"normalizeWheelEvent",value:function(t){var e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;var n=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),r=n.x,i=n.y;e.viewport.x=r,e.viewport.y=i;var a=this.context.eventService.viewport2Canvas(e.viewport),o=a.x,s=a.y;return e.canvas.x=o,e.canvas.y=s,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=t,e.type=t.type,e}},{key:"transferMouseData",value:function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=di.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null}},{key:"setCursor",value:function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(t,e){var n=[];if(e.isTouchEvent(t))for(var r=0;r<t.changedTouches.length;r++){var i=t.changedTouches[r];(0,st.Z)(i.button)&&(i.button=0),(0,st.Z)(i.buttons)&&(i.buttons=1),(0,st.Z)(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),(0,st.Z)(i.width)&&(i.width=i.radiusX||1),(0,st.Z)(i.height)&&(i.height=i.radiusY||1),(0,st.Z)(i.tiltX)&&(i.tiltX=0),(0,st.Z)(i.tiltY)&&(i.tiltY=0),(0,st.Z)(i.pointerType)&&(i.pointerType="touch"),(0,st.Z)(i.pointerId)&&(i.pointerId=i.identifier||0),(0,st.Z)(i.pressure)&&(i.pressure=i.force||.5),(0,st.Z)(i.twist)&&(i.twist=0),(0,st.Z)(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i)}else if(e.isMouseEvent(t)){var a=t;(0,st.Z)(a.isPrimary)&&(a.isPrimary=!0),(0,st.Z)(a.width)&&(a.width=1),(0,st.Z)(a.height)&&(a.height=1),(0,st.Z)(a.tiltX)&&(a.tiltX=0),(0,st.Z)(a.tiltY)&&(a.tiltY=0),(0,st.Z)(a.pointerType)&&(a.pointerType="mouse"),(0,st.Z)(a.pointerId)&&(a.pointerId=1),(0,st.Z)(a.pressure)&&(a.pressure=.5),(0,st.Z)(a.twist)&&(a.twist=0),(0,st.Z)(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(t);return n}}])}();Ao.tag="Event";var Po=[Et.CIRCLE,Et.ELLIPSE,Et.IMAGE,Et.RECT,Et.LINE,Et.POLYLINE,Et.POLYGON,Et.TEXT,Et.PATH,Et.HTML],No=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t)}),[{key:"isVisible",value:function(t,e){var n,r=e.cullable;if(!r.enable)return!0;var i=e.getRenderBounds();if(Ot.isEmpty(i))return!1;var a=t.getFrustum(),o=null===(n=e.parentNode)||void 0===n||null===(n=n.cullable)||void 0===n?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(e,i,o||_t.INDETERMINATE,a.planes),r.visible=r.visibilityPlaneMask!==_t.OUTSIDE,r.visible}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n,r){if(n===_t.OUTSIDE||n===_t.INSIDE)return n;for(var i=_t.INSIDE,a=Po.indexOf(t.nodeName)>-1,o=0,s=r.length;o<s;++o){var u=1<<o;if(n&u&&(!a||4!==o&&5!==o)){var l=r[o],c=l.normal,f=l.distance;if(h.AK(c,e.getPositiveFarPoint(r[o]))+f<0)return _t.OUTSIDE;h.AK(c,e.getNegativeFarPoint(r[o]))+f<0&&(i|=u)}}return i}}])}(),Ro=function(){function t(){(0,i.Z)(this,t),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return(0,a.Z)(t,[{key:"apply",value:function(e){var n,r=this,i=e.renderingService,a=e.renderingContext,o=e.rBushRoot,s=a.root.ownerDocument.defaultView;this.rBush=o;var u=function(t){t.target.renderable.dirty=!0,i.dirtify()},l=function(t){r.syncTasks.set(t.target,t.detail.affectChildren),i.dirtify()},c=function(t){var e=t.target;Wa.enableSizeAttenuation&&Wa.styleValueRegistry.updateSizeAttenuation(e,s.getCamera().getZoom())},h=function(t){var e=t.target,n=e.rBushNode;n.aabb&&r.rBush.remove(n.aabb),r.syncTasks.delete(e),Wa.sceneGraphService.dirtifyToRoot(e),i.dirtify()};i.hooks.init.tap(t.tag,(function(){s.addEventListener(da.MOUNTED,c),s.addEventListener(da.UNMOUNTED,h),s.addEventListener(da.ATTR_MODIFIED,u),s.addEventListener(da.BOUNDS_CHANGED,l)})),i.hooks.destroy.tap(t.tag,(function(){s.removeEventListener(da.MOUNTED,c),s.removeEventListener(da.UNMOUNTED,h),s.removeEventListener(da.ATTR_MODIFIED,u),s.removeEventListener(da.BOUNDS_CHANGED,l),r.syncTasks.clear()}));var f=null!==(n=Wa.globalThis.requestIdleCallback)&&void 0!==n?n:Ti.bind(Wa.globalThis);i.hooks.endFrame.tap(t.tag,(function(){r.isFirstTimeRendering?(r.isFirstTimeRendering=!1,r.syncing=!0,f((function(){r.syncRTree(!0),r.isFirstTimeRenderingFinished=!0}))):r.syncRTree()}))}},{key:"syncNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.isConnected){var n=t.rBushNode;n.aabb&&this.rBush.remove(n.aabb);var r=t.getRenderBounds();if(r){var i=t.renderable;e&&(i.dirtyRenderBounds||(i.dirtyRenderBounds=new Ot),i.dirtyRenderBounds.update(r.center,r.halfExtents));var a=r.getMin(),o=(0,l.Z)(a,2),s=o[0],u=o[1],c=r.getMax(),h=(0,l.Z)(c,2),f=h[0],d=h[1];n.aabb||(n.aabb={}),n.aabb.displayObject=t,n.aabb.minX=s,n.aabb.minY=u,n.aabb.maxX=f,n.aabb.maxY=d}return n.aabb&&!(isNaN(n.aabb.maxX)||isNaN(n.aabb.maxX)||isNaN(n.aabb.minX)||isNaN(n.aabb.minY))?n.aabb:void 0}}},{key:"syncRTree",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||!this.syncing&&0!==this.syncTasks.size){this.syncing=!0;var n=[],r=new Set,i=function(i){if(!r.has(i)&&i.renderable){var a=t.syncNode(i,e);a&&(n.push(a),r.add(i))}};this.syncTasks.forEach((function(t,e){t&&e.forEach(i);for(var n=e;n;)i(n),n=n.parentElement})),this.rBush.load(n),n.length=0,this.syncing=!1}}}])}();Ro.tag="Prepare";var Zo=function(t){return t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged",t}({}),Oo=new ra(da.MOUNTED),Lo=new ra(da.UNMOUNTED),_o=new ra(Zo.BEFORE_RENDER),Io=new ra(Zo.RERENDER),Do=new ra(Zo.AFTER_RENDER),Fo=function(t){function e(t){var n;(0,i.Z)(this,e),(n=(0,s.Z)(this,e)).Element=ro,n.inited=!1,n.context={};var a=t.container,o=t.canvas,u=t.renderer,l=t.width,c=t.height,h=t.background,f=t.cursor,d=t.supportsMutipleCanvasesInOneContainer,p=t.cleanUpOnDestroy,v=void 0===p||p,g=t.offscreenCanvas,y=t.devicePixelRatio,m=t.requestAnimationFrame,b=t.cancelAnimationFrame,x=t.createImage,k=t.supportsTouchEvents,w=t.supportsPointerEvents,E=t.isTouchEvent,M=t.isMouseEvent,T=t.dblClickSpeed,S=l,C=c,A=y||ai&&window.devicePixelRatio||1;return A=A>=1?Math.ceil(A):1,o&&(S=l||function(t){var e=hi(t,"width");return"auto"===e?t.offsetWidth:parseFloat(e)}(o)||o.width/A,C=c||function(t){var e=hi(t,"height");return"auto"===e?t.offsetHeight:parseFloat(e)}(o)||o.height/A),n.customElements=new Mo,n.devicePixelRatio=A,n.requestAnimationFrame=null!=m?m:Ti.bind(Wa.globalThis),n.cancelAnimationFrame=null!=b?b:Si.bind(Wa.globalThis),n.supportsTouchEvents=null!=k?k:"ontouchstart"in Wa.globalThis,n.supportsPointerEvents=null!=w?w:!!Wa.globalThis.PointerEvent,n.isTouchEvent=null!=E?E:function(t){return n.supportsTouchEvents&&t instanceof Wa.globalThis.TouchEvent},n.isMouseEvent=null!=M?M:function(t){return!Wa.globalThis.MouseEvent||t instanceof Wa.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(t instanceof Wa.globalThis.PointerEvent))},g&&(Wa.offscreenCanvas=g),n.document=new So,n.document.defaultView=n,d||function(t,e,n){if(t){var r="string"==typeof t?document.getElementById(t):t;ii.has(r)&&ii.get(r).destroy(n),ii.set(r,e)}}(a,n,v),n.initRenderingContext((0,r.Z)((0,r.Z)({},t),{},{width:S,height:C,background:null!=h?h:"transparent",cursor:null!=f?f:"default",cleanUpOnDestroy:v,devicePixelRatio:A,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:null!=T?T:200,createImage:null!=x?x:function(){return new window.Image}})),n.initDefaultCamera(S,C,u.clipSpaceNearZ),n.initRenderer(u,!0),n}return(0,u.Z)(e,t),(0,a.Z)(e,[{key:"initRenderingContext",value:function(t){this.context.config=t,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(t,e,n){var r=this,i=new Wa.CameraContribution;i.clipSpaceNearZ=n,i.setType(re.EXPLORING,ie.DEFAULT).setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0).setOrthographic(t/-2,t/2,e/2,e/-2,.1,1e3),i.canvas=this,i.eventEmitter.on(oe,(function(){r.context.renderingContext.renderReasons.add(la.CAMERA_CHANGED),Wa.enableSizeAttenuation&&r.getConfig().renderer.getConfig().enableSizeAttenuation&&r.updateSizeAttenuation()})),this.context.camera=i}},{key:"updateSizeAttenuation",value:function(){var t=this.getCamera().getZoom();this.document.documentElement.forEach((function(e){Wa.styleValueRegistry.updateSizeAttenuation(e,t)}))}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var t=this;return this.readyPromise||(this.readyPromise=new Promise((function(e){t.resolveReadyPromise=function(){e(t)}})),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;Ue.clearCache(),e||this.dispatchEvent(new ra(Zo.BEFORE_DESTROY)),this.frameId&&this.cancelAnimationFrame(this.frameId);var n=this.getRoot();t&&(this.unmountChildren(n),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),e||this.dispatchEvent(new ra(Zo.AFTER_DESTROY));var r=function(t){t.currentTarget=null,t.manager=null,t.target=null,t.relatedNode=null};r(Oo),r(Lo),r(_o),r(Io),r(Do),r(to),r(qa),r(Xa),r($a)}},{key:"changeSize",value:function(t,e){this.resize(t,e)}},{key:"resize",value:function(t,e){var n=this.context.config;n.width=t,n.height=e,this.getContextService().resize(t,e);var r=this.context.camera,i=r.getProjectionMode();r.setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0),i===ae.ORTHOGRAPHIC?r.setOrthographic(t/-2,t/2,e/2,e/-2,r.getNear(),r.getFar()):r.setAspect(t/e),this.dispatchEvent(new ra(Zo.RESIZE,{width:t,height:e}))}},{key:"appendChild",value:function(t,e){return this.document.documentElement.appendChild(t,e)}},{key:"insertBefore",value:function(t,e){return this.document.documentElement.insertBefore(t,e)}},{key:"removeChild",value:function(t){return this.document.documentElement.removeChild(t)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(t){var e=this;t&&(_o.detail=t,Do.detail=t),this.dispatchEvent(_o),this.getRenderingService().render(this.getConfig(),t,(function(){e.dispatchEvent(Io)})),this.dispatchEvent(Do)}},{key:"run",value:function(){var t=this,e=function(n,r){t.render(r),t.frameId=t.requestAnimationFrame(e)};e()}},{key:"initRenderer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new wt,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new Ao,new Ro,new Co([new No])),this.loadRendererContainerModule(t),this.context.contextService=new this.context.ContextService((0,r.Z)((0,r.Z)({},Wa),this.context)),this.context.renderingService=new ca(Wa,this.context),this.context.eventService=new sa(Wa,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(t,n,!0)):this.context.contextService.initAsync().then((function(){e.initRenderingService(t,n)})).catch((function(t){console.error(t)}))}},{key:"initRenderingService",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context.renderingService.init((function(){e.inited=!0,n?r?e.requestAnimationFrame((function(){e.dispatchEvent(new ra(Zo.READY))})):e.dispatchEvent(new ra(Zo.READY)):e.dispatchEvent(new ra(Zo.RENDERER_CHANGED)),e.readyPromise&&e.resolveReadyPromise(),n||e.getRoot().forEach((function(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0,e.dirty=!0)})),e.mountChildren(e.getRoot()),t.getConfig().enableAutoRendering&&e.run()}))}},{key:"loadRendererContainerModule",value:function(t){var e=this;t.getPlugins().forEach((function(t){t.context=e.context,t.init(Wa)}))}},{key:"setRenderer",value:function(t){var e=this.getConfig();if(e.renderer!==t){var n=e.renderer;e.renderer=t,this.destroy(!1,!0),(0,o.Z)((null==n?void 0:n.getPlugins())||[]).reverse().forEach((function(t){t.destroy(Wa)})),this.initRenderer(t)}}},{key:"setCursor",value:function(t){this.getConfig().cursor=t,this.getContextService().applyCursorStyle(t)}},{key:"unmountChildren",value:function(t){var e=this;t.childNodes.forEach((function(t){e.unmountChildren(t)})),this.inited&&(t.isMutationObserved?t.dispatchEvent(Lo):(Lo.target=t,this.dispatchEvent(Lo,!0)),t!==this.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1),t.isCustomElement&&t.disconnectedCallback&&t.disconnectedCallback()}},{key:"mountChildren",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pi(t);this.inited?t.isConnected||(t.ownerDocument=this.document,t.isConnected=!0,n||(t.isMutationObserved?t.dispatchEvent(Oo):(Oo.target=t,this.dispatchEvent(Oo,!0)))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName),t.childNodes.forEach((function(t){e.mountChildren(t,n)})),t.isCustomElement&&t.connectedCallback&&t.connectedCallback()}},{key:"mountFragment",value:function(t){this.mountChildren(t,!1)}},{key:"client2Viewport",value:function(t){return this.getEventService().client2Viewport(t)}},{key:"viewport2Client",value:function(t){return this.getEventService().viewport2Client(t)}},{key:"viewport2Canvas",value:function(t){return this.getEventService().viewport2Canvas(t)}},{key:"canvas2Viewport",value:function(t){return this.getEventService().canvas2Viewport(t)}},{key:"getPointByClient",value:function(t,e){return this.client2Viewport({x:t,y:e})}},{key:"getClientByPoint",value:function(t,e){return this.viewport2Client({x:t,y:e})}}])}(aa)},11702:function(t,e,n){"use strict";n.d(e,{TE:function(){return o},U4:function(){return p},Xk:function(){return d},Y1:function(){return T},_x:function(){return v},hE:function(){return k},l5:function(){return m},ph:function(){return b},vp:function(){return c},x4:function(){return M}});var r=n(97582),i=n(80450),a=n(31437);function o(t,e,n,r){var i=t-n,a=e-r;return Math.sqrt(i*i+a*a)}function s(t,e){var n=Math.min.apply(Math,(0,r.ev)([],(0,r.CR)(t),!1)),i=Math.min.apply(Math,(0,r.ev)([],(0,r.CR)(e),!1));return{x:n,y:i,width:Math.max.apply(Math,(0,r.ev)([],(0,r.CR)(t),!1))-n,height:Math.max.apply(Math,(0,r.ev)([],(0,r.CR)(e),!1))-i}}function u(t,e,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+t}function l(t,e,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+e}function c(t,e,n,r,i,a,o){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),c=1/0,h=-1/0,f=[a,o],d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var p=s+d;a<o?a<p&&p<o&&f.push(p):o<p&&p<a&&f.push(p)}for(d=0;d<f.length;d++){var v=u(t,0,n,r,i,f[d]);v<c&&(c=v),v>h&&(h=v)}var g=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),y=1/0,m=-1/0,b=[a,o];for(d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var x=g+d;a<o?a<x&&x<o&&b.push(x):o<x&&x<a&&b.push(x)}for(d=0;d<b.length;d++){var k=l(0,e,n,r,i,b[d]);k<y&&(y=k),k>m&&(m=k)}return{x:c,y:y,width:h-c,height:m-y}}var h=1e-4;function f(t,e,n,i,a,s){var u=-1,l=1/0,c=[n,i],f=20;s&&s>200&&(f=s/10);for(var d=1/f,p=d/10,v=0;v<=f;v++){var g=v*d,y=[a.apply(void 0,(0,r.ev)([],(0,r.CR)(t.concat([g])),!1)),a.apply(void 0,(0,r.ev)([],(0,r.CR)(e.concat([g])),!1))];(k=o(c[0],c[1],y[0],y[1]))<l&&(u=g,l=k)}if(0===u)return{x:t[0],y:e[0]};if(1===u){var m=t.length;return{x:t[m-1],y:e[m-1]}}l=1/0;for(v=0;v<32&&!(p<h);v++){var b=u-p,x=u+p,k=(y=[a.apply(void 0,(0,r.ev)([],(0,r.CR)(t.concat([b])),!1)),a.apply(void 0,(0,r.ev)([],(0,r.CR)(e.concat([b])),!1))],o(c[0],c[1],y[0],y[1]));if(b>=0&&k<l)u=b,l=k;else{var w=[a.apply(void 0,(0,r.ev)([],(0,r.CR)(t.concat([x])),!1)),a.apply(void 0,(0,r.ev)([],(0,r.CR)(e.concat([x])),!1))],E=o(c[0],c[1],w[0],w[1]);x<=1&&E<l?(u=x,l=E):p*=.5}}return{x:a.apply(void 0,(0,r.ev)([],(0,r.CR)(t.concat([u])),!1)),y:a.apply(void 0,(0,r.ev)([],(0,r.CR)(e.concat([u])),!1))}}function d(t,e,n,r){return o(t,e,n,r)}function p(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}}function v(t,e,n,r,i,o){var s=[n-t,r-e];if(a.I6(s,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var u=[-s[1],s[0]];a.Fv(u,u);var l=[i-t,o-e];return Math.abs(a.AK(l,u))}function g(t,e,n,r,i){var a=1-i;return a*a*a*t+3*e*i*a*a+3*n*i*i*a+r*i*i*i}function y(t,e,n,r){var a,o,s,u=-3*t+9*e-9*n+3*r,l=6*t-12*e+6*n,c=3*e-3*t,h=[];if((0,i.Z)(u,0))(0,i.Z)(l,0)||(a=-c/l)>=0&&a<=1&&h.push(a);else{var f=l*l-4*u*c;(0,i.Z)(f,0)?h.push(-l/(2*u)):f>0&&(o=(-l-(s=Math.sqrt(f)))/(2*u),(a=(-l+s)/(2*u))>=0&&a<=1&&h.push(a),o>=0&&o<=1&&h.push(o))}return h}function m(t,e,n,r,i,a,o,u){for(var l=[t,o],c=[e,u],h=y(t,n,i,o),f=y(e,r,a,u),d=0;d<h.length;d++)l.push(g(t,n,i,o,h[d]));for(d=0;d<f.length;d++)c.push(g(e,r,a,u,f[d]));return s(l,c)}function b(t,e,n,r,i,a,s,u,l,c,h){var d=function(t,e,n,r,i,a,o,s,u,l,c){return f([t,n,i,o],[e,r,a,s],u,l,g,c)}(t,e,n,r,i,a,s,u,l,c,h);return o(d.x,d.y,l,c)}function x(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=o(r[0],r[1],i[0],i[1])}return e}function k(t){return x(t)}function w(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function E(t,e,n){var r=t+n-2*e;if((0,i.Z)(r,0))return[.5];var a=(t-e)/r;return a<=1&&a>=0?[a]:[]}function M(t,e,n,r,i,a){var o=E(t,n,i)[0],u=E(e,r,a)[0],l=[t,i],c=[e,a];return void 0!==o&&l.push(w(t,n,i,o)),void 0!==u&&c.push(w(e,r,a,u)),s(l,c)}function T(t,e,n,r,i,a,s,u){var l=function(t,e,n,r,i,a,o,s){return f([t,n,i],[e,r,a],o,s,w)}(t,e,n,r,i,a,s,u);return o(l.x,l.y,s,u)}},98875:function(t,e,n){"use strict";n.d(e,{S:function(){return d}});var r=n(1413),i=n(15671),a=n(43144),o=n(53640),s=n(60136),u=n(40254),l=n(74165),c=n(15861),h=n(44078),f=function(){function t(e){(0,i.Z)(this,t),this.dragndropPluginOptions=e}return(0,a.Z)(t,[{key:"apply",value:function(e){var n=this,r=e.renderingService,i=e.renderingContext.root.ownerDocument,a=i.defaultView,o=function(t){var e=t.target,r=e===i,o=r&&n.dragndropPluginOptions.isDocumentDraggable?i:e.closest&&e.closest("[draggable=true]");if(o){var s=!1,u=t.timeStamp,f=[t.clientX,t.clientY],d=null,p=[t.clientX,t.clientY],v=function(){var t=(0,c.Z)((0,l.Z)().mark((function t(a){var c,v,g,y,m,b;return(0,l.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=8;break}if(c=a.timeStamp-u,v=(0,h.y)([a.clientX,a.clientY],f),!(c<=n.dragndropPluginOptions.dragstartTimeThreshold||v<=n.dragndropPluginOptions.dragstartDistanceThreshold)){t.next=5;break}return t.abrupt("return");case 5:a.type="dragstart",o.dispatchEvent(a),s=!0;case 8:if(a.type="drag",a.dx=a.clientX-p[0],a.dy=a.clientY-p[1],o.dispatchEvent(a),p=[a.clientX,a.clientY],r){t.next=21;break}return g="pointer"===n.dragndropPluginOptions.overlap?[a.canvasX,a.canvasY]:e.getBounds().center,t.next=17,i.elementsFromPoint(g[0],g[1]);case 17:y=t.sent,m=y[y.indexOf(e)+1],b=(null==m?void 0:m.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?i:null),d!==b&&(d&&(a.type="dragleave",a.target=d,d.dispatchEvent(a)),b&&(a.type="dragenter",a.target=b,b.dispatchEvent(a)),(d=b)&&(a.type="dragover",a.target=d,d.dispatchEvent(a)));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();a.addEventListener("pointermove",v);var g=function(t){if(s){t.detail={preventClick:!0};var e=t.clone();d&&(e.type="drop",e.target=d,d.dispatchEvent(e)),e.type="dragend",o.dispatchEvent(e),s=!1}a.removeEventListener("pointermove",v)};e.addEventListener("pointerup",g,{once:!0}),e.addEventListener("pointerupoutside",g,{once:!0})}};r.hooks.init.tap(t.tag,(function(){a.addEventListener("pointerdown",o)})),r.hooks.destroy.tap(t.tag,(function(){a.removeEventListener("pointerdown",o)}))}}])}();f.tag="Dragndrop";var d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,e),(t=(0,o.Z)(this,e)).name="dragndrop",t.options=n,t}return(0,s.Z)(e,t),(0,a.Z)(e,[{key:"init",value:function(){this.addRenderingPlugin(new f((0,r.Z)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(t){Object.assign(this.plugins[0].dragndropPluginOptions,t)}}])}(u.F6)},1242:function(t,e,n){"use strict";n.d(e,{mN:function(){return r.mN},ux:function(){return r.ux},Xz:function(){return r.Xz},$6:function(){return r.$6},Cd:function(){return r.Cd},b_:function(){return r.b_},Aw:function(){return r.Aw},s$:function(){return r.s$},BB:function(){return r.BB},Dk:function(){return r.Dk},Pj:function(){return r.Pj},nR:function(){return r.nR},ZA:function(){return r.ZA},k9:function(){return r.k9},Ee:function(){return r.Ee},x1:function(){return r.x1},y$:function(){return r.y$},mg:function(){return r.mg},aH:function(){return r.aH},h0:function(){return r.h0},UL:function(){return r.UL},bn:function(){return r.bn},xv:function(){return r.xv},YR:function(){return r.YR},lu:function(){return r.lu},BV:function(){return r.BV},GZ:function(){return r.GZ}});var r=n(40254),i=n(15671),a=n(43144),o=n(53640),s=n(60136),u=n(76714),l=n(25897),c=n(32945),h=n(85975),f=n(77160),d=function(t){function e(){var t;(0,i.Z)(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=(0,o.Z)(this,e,[].concat(r))).landmarks=[],t}return(0,s.Z)(e,t),(0,a.Z)(e,[{key:"rotate",value:function(t,e,n){if(this.relElevation=(0,r._O)(e),this.relAzimuth=(0,r._O)(t),this.relRoll=(0,r._O)(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===r.iM.EXPLORING){var i=c.yY(c.Ue(),[1,0,0],(0,r.Vl)((this.rotateWorld?1:-1)*this.relElevation)),a=c.yY(c.Ue(),[0,1,0],(0,r.Vl)((this.rotateWorld?1:-1)*this.relAzimuth)),o=c.yY(c.Ue(),[0,0,1],(0,r.Vl)(this.relRoll)),s=c.Jp(c.Ue(),a,i);s=c.Jp(c.Ue(),s,o);var u=h.fromQuat(h.create(),s);h.translate(this.matrix,this.matrix,[0,0,-this.distance]),h.multiply(this.matrix,this.matrix,u),h.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===r.iM.ORBITING||this.type===r.iM.EXPLORING?this._getPosition():this.type===r.iM.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=(0,r.O4)(t,e,0),i=f.d9(this.position);return f.IH(i,i,f.bA(f.Ue(),this.right,n[0])),f.IH(i,i,f.bA(f.Ue(),this.up,n[1])),this._setPosition(i),this.triggerUpdate(),this}},{key:"dolly",value:function(t){var e=this.forward,n=f.d9(this.position),i=this.dollyingStep,a=this.distance+t*this.dollyingStep;return i=Math.max(Math.min(a,this.maxDistance),this.minDistance)-this.distance,n[0]+=i*e[0],n[1]+=i*e[1],n[2]+=i*e[2],this._setPosition(n),this.type===r.iM.ORBITING||this.type===r.iM.EXPLORING?this._getDistance():this.type===r.iM.TRACKING&&f.IH(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(t){var e,n,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.position,u=void 0===s?this.position:s,l=o.focalPoint,c=void 0===l?this.focalPoint:l,d=o.roll,p=o.zoom,v=new r.GZ.CameraContribution;v.setType(this.type,void 0),v.setPosition(u[0],null!==(e=u[1])&&void 0!==e?e:this.position[1],null!==(n=u[2])&&void 0!==n?n:this.position[2]),v.setFocalPoint(c[0],null!==(i=c[1])&&void 0!==i?i:this.focalPoint[1],null!==(a=c[2])&&void 0!==a?a:this.focalPoint[2]),v.setRoll(null!=d?d:this.roll),v.setZoom(null!=p?p:this.zoom);var g={name:t,matrix:h.clone(v.getWorldTransform()),right:f.d9(v.right),up:f.d9(v.up),forward:f.d9(v.forward),position:f.d9(v.getPosition()),focalPoint:f.d9(v.getFocalPoint()),distanceVector:f.d9(v.getDistanceVector()),distance:v.getDistance(),dollyingStep:v.getDollyingStep(),azimuth:v.getAzimuth(),elevation:v.getElevation(),roll:v.getRoll(),relAzimuth:v.relAzimuth,relElevation:v.relElevation,relRoll:v.relRoll,zoom:v.getZoom()};return this.landmarks.push(g),g}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,u.Z)(t)?this.landmarks.find((function(e){return e.name===t})):t;if(i){var a=(0,l.Z)(n)?{duration:n}:n,o=a.easing,s=void 0===o?"linear":o,c=a.duration,h=void 0===c?100:c,d=a.easingFunction,p=void 0===d?void 0:d,v=a.onfinish,g=void 0===v?void 0:v,y=a.onframe,m=void 0===y?void 0:y;this.cancelLandmarkAnimation();var b,x=i.position,k=i.focalPoint,w=i.zoom,E=i.roll,M=p||r.GZ.EasingFunction(s),T=function(){e.setFocalPoint(k),e.setPosition(x),e.setRoll(E),e.setZoom(w),e.computeMatrix(),e.triggerUpdate(),null==g||g()};if(0===h)return T();var S=function(t){void 0===b&&(b=t);var n=t-b;if(n>=h)T();else{var r,i,a=M(n/h),o=f.Ue(),s=f.Ue();if(f.t7(o,e.focalPoint,k,a),f.t7(s,e.position,x,a),i=e.roll*(1-a)+E*a,r=e.zoom*(1-a)+w*a,e.setFocalPoint(o),e.setPosition(s),e.setRoll(i),e.setZoom(r),f.TK(o,k)+f.TK(s,x)<=.01&&void 0===w&&void 0===E)return T();e.computeMatrix(),e.triggerUpdate(),n<h&&(null==m||m(a),e.landmarkAnimationID=e.canvas.requestAnimationFrame(S))}};this.canvas.requestAnimationFrame(S)}}}])}(r.V1);r.GZ.CameraContribution=d;new WeakMap;var p=n(74902),v=n(97685),g=n(81957),y=n(95147),m=function(t){function e(t,n,r,a){var s;return(0,i.Z)(this,e),(s=(0,o.Z)(this,e,[t])).currentTime=r,s.timelineTime=a,s.target=n,s.type="finish",s.bubbles=!1,s.currentTarget=n,s.defaultPrevented=!1,s.eventPhase=s.AT_TARGET,s.timeStamp=Date.now(),s.currentTime=r,s.timelineTime=a,s}return(0,s.Z)(e,t),(0,a.Z)(e)}(r.xA),b=0,x=function(){return(0,a.Z)((function t(e,n){var r;(0,i.Z)(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(b++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(r=this.effect)||void 0===r?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}),[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var t=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise((function(e,n){t.resolveReadyPromise=function(){e(t)},t.rejectReadyPromise=function(){n(new Error)}})),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var t=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise((function(e,n){t.resolveFinishedPromise=function(){e(t)},t.rejectFinishedPromise=function(){n(new Error)}})),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){if(t=Number(t),!isNaN(t)){var e;if(this.timeline.restart(),!this._paused&&null!==this._startTime)this._startTime=Number(null===(e=this.timeline)||void 0===e?void 0:e.currentTime)-t/this.playbackRate;this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(t){if(null!==t){if(this.updatePromises(),t=Number(t),isNaN(t))return;if(this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var e=this.currentTime;this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==e&&(this.currentTime=e),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag}},{key:"updatePromises",value:function(){var t=this.oldPlayState,e=this.pending?"pending":this.playState;return this.readyPromise&&e!==t&&("idle"===e?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===t?this.resolveReadyPromise():"pending"===e&&(this.readyPromise=void 0)),this.finishedPromise&&e!==t&&("idle"===e?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===e?this.resolveFinishedPromise():"finished"===t&&(this.finishedPromise=void 0)),this.oldPlayState=e,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var t=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var e=new m(null,this,this.currentTime,null);setTimeout((function(){t.oncancel(e)}))}}},{key:"reverse",value:function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()}},{key:"updatePlaybackRate",value:function(t){this.playbackRate=t}},{key:"targetAnimations",value:function(){var t;return(null===(t=this.effect)||void 0===t?void 0:t.target).getAnimations()}},{key:"markTarget",value:function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)}},{key:"unmarkTarget",value:function(){var t=this.targetAnimations(),e=t.indexOf(this);-1!==e&&t.splice(e,1)}},{key:"tick",value:function(t,e){this._idle||this._paused||(null===this._startTime?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(t))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else{if(!(this._totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}}},{key:"persist",value:function(){throw new Error(r.jf)}},{key:"addEventListener",value:function(t,e,n){throw new Error(r.jf)}},{key:"removeEventListener",value:function(t,e,n){throw new Error(r.jf)}},{key:"dispatchEvent",value:function(t){throw new Error(r.jf)}},{key:"commitStyles",value:function(){throw new Error(r.jf)}},{key:"ensureAlive",value:function(){var t,e;this.playbackRate<0&&0===this.currentTime?this._inEffect=!(null===(t=this.effect)||void 0===t||!t.update(-1)):this._inEffect=!(null===(e=this.effect)||void 0===e||!e.update(this.currentTime));this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(t,e){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(t){var e=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var n=new m(null,this,this.currentTime,t);setTimeout((function(){e.onfinish&&e.onfinish(n)}))}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var r=new m(null,this,this.currentTime,t);this.onframe(r)}this._finishedFlag=!1}}}])}(),k=.1,w="function"==typeof Float32Array,E=function(t,e){return 1-3*e+3*t},M=function(t,e){return 3*e-6*t},T=function(t){return 3*t},S=function(t,e,n){return((E(e,n)*t+M(e,n))*t+T(e))*t},C=function(t,e,n){return 3*E(e,n)*t*t+2*M(e,n)*t+T(e)},A=function(t,e,n,r){if(!(t>=0&&t<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return function(t){return t};for(var i=w?new Float32Array(11):new Array(11),a=0;a<11;++a)i[a]=S(a*k,t,n);var o=function(e){for(var r=0,a=1;10!==a&&i[a]<=e;++a)r+=k;--a;var o=r+(e-i[a])/(i[a+1]-i[a])*k,s=C(o,t,n);return s>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var a=C(e,n,r);if(0===a)return e;e-=(S(e,n,r)-t)/a}return e}(e,o,t,n):0===s?o:function(t,e,n,r,i){var a,o,s=0;do{(a=S(o=e+(n-e)/2,r,i)-t)>0?n=o:e=o}while(Math.abs(a)>1e-7&&++s<10);return o}(e,r,r+k,t,n)};return function(t){return 0===t||1===t?t:S(o(t),e,r)}},P=function(t){return Math.pow(t,2)},N=function(t){return Math.pow(t,3)},R=function(t){return Math.pow(t,4)},Z=function(t){return Math.pow(t,5)},O=function(t){return Math.pow(t,6)},L=function(t){return 1-Math.cos(t*Math.PI/2)},_=function(t){return 1-Math.sqrt(1-t*t)},I=function(t){return t*t*(3*t-2)},D=function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)},F=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,v.Z)(e,2),r=n[0],i=void 0===r?1:r,a=n[1],o=void 0===a?.5:a,s=(0,g.Z)(Number(i),1,10),u=(0,g.Z)(Number(o),.1,2);return 0===t||1===t?t:-s*Math.pow(2,10*(t-1))*Math.sin((t-1-u/(2*Math.PI)*Math.asin(1/s))*(2*Math.PI)/u)},B=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=(0,v.Z)(e,4),i=r[0],a=void 0===i?1:i,o=r[1],s=void 0===o?100:o,u=r[2],l=void 0===u?10:u,c=r[3],h=void 0===c?0:c;a=(0,g.Z)(a,.1,1e3),s=(0,g.Z)(s,.1,1e3),l=(0,g.Z)(l,.1,1e3),h=(0,g.Z)(h,.1,1e3);var f=Math.sqrt(s/a),d=l/(2*Math.sqrt(s*a)),p=d<1?f*Math.sqrt(1-d*d):0,y=d<1?(d*f-h)/p:-h+f,m=n?n*t/1e3:t;return m=d<1?Math.exp(-m*d*f)*(1*Math.cos(p*m)+y*Math.sin(p*m)):(1+y*m)*Math.exp(-m*f),0===t||1===t?t:1-m},G=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,v.Z)(e,2),r=n[0],i=void 0===r?10:r;return("start"===n[1]?Math.ceil:Math.floor)((0,g.Z)(t,0,1)*i)/i},z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,v.Z)(e,4),r=n[0],i=n[1],a=n[2],o=n[3];return A(r,i,a,o)(t)},V=A(.42,0,1,1),j=function(t){return function(e){return 1-t(1-e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arguments.length>2?arguments[2]:void 0)}},W=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e<.5?t(2*e,n,r)/2:1-t(-2*e+2,n,r)/2}},H=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e<.5?(1-t(1-2*e,n,r))/2:(t(2*e-1,n,r)+1)/2}},U={steps:G,"step-start":function(t){return G(t,[1,"start"])},"step-end":function(t){return G(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":z,ease:function(t){return z(t,[.25,.1,.25,1])},in:V,out:j(V),"in-out":W(V),"out-in":H(V),"in-quad":P,"out-quad":j(P),"in-out-quad":W(P),"out-in-quad":H(P),"in-cubic":N,"out-cubic":j(N),"in-out-cubic":W(N),"out-in-cubic":H(N),"in-quart":R,"out-quart":j(R),"in-out-quart":W(R),"out-in-quart":H(R),"in-quint":Z,"out-quint":j(Z),"in-out-quint":W(Z),"out-in-quint":H(Z),"in-expo":O,"out-expo":j(O),"in-out-expo":W(O),"out-in-expo":H(O),"in-sine":L,"out-sine":j(L),"in-out-sine":W(L),"out-in-sine":H(L),"in-circ":_,"out-circ":j(_),"in-out-circ":W(_),"out-in-circ":H(_),"in-back":I,"out-back":j(I),"in-out-back":W(I),"out-in-back":H(I),"in-bounce":D,"out-bounce":j(D),"in-out-bounce":W(D),"out-in-bounce":H(D),"in-elastic":F,"out-elastic":j(F),"in-out-elastic":W(F),"out-in-elastic":H(F),spring:B,"spring-in":B,"spring-out":j(B),"spring-in-out":W(B),"spring-out-in":H(B)},Y=function(t){return t};function q(t,e){return function(n){if(n>=1)return 1;var r=1/t;return(n+=e*r)-n%r}}var X="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",$=new RegExp("cubic-bezier\\(".concat(X,",").concat(X,",").concat(X,",").concat(X,"\\)")),K=/steps\(\s*(\d+)\s*\)/,J=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function Q(t){var e=$.exec(t);if(e)return A.apply(void 0,(0,p.Z)(e.slice(1).map(Number)));var n=K.exec(t);if(n)return q(Number(n[1]),0);var r=J.exec(t);return r?q(Number(r[1]),{start:1,middle:.5,end:0}[r[2]]):U[function(t){return(e=t,"-"===(e=e.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())}))).charAt(0)?e.substring(1):e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim();var e}(t)]||U.linear}function tt(t){return Math.abs(function(t){var e;if(0===t.duration||0===t.iterations)return 0;return("auto"===t.duration?0:Number(t.duration))*(null!==(e=t.iterations)&&void 0!==e?e:1)}(t)/(t.playbackRate||1))}function et(t,e,n){var r=function(t,e,n){if(null===e)return 0;var r=n.endTime;return e<Math.min(n.delay,r)?1:e>=Math.min(n.delay+t+n.endDelay,r)?2:3}(t,e,n),i=function(t,e,n,r,i){switch(r){case 1:return"backwards"===e||"both"===e?0:null;case 3:return n-i;case 2:return"forwards"===e||"both"===e?t:null;case 0:return null}}(t,n.fill,e,r,n.delay);if(null===i)return null;var a="auto"===n.duration?0:n.duration,o=function(t,e,n,r,i){var a=i;return 0===t?1!==e&&(a+=n):a+=r/t,a}(a,r,n.iterations,i,n.iterationStart),s=function(t,e,n,r,i,a){var o=t===1/0?e%1:t%1;return 0!==o||2!==n||0===r||0===i&&0!==a||(o=1),o}(o,n.iterationStart,r,n.iterations,i,a),u=function(t,e,n,r){return 2===t&&e===1/0?1/0:1===n?Math.floor(r)-1:Math.floor(r)}(r,n.iterations,s,o),l=function(t,e,n){var r=t;if("normal"!==t&&"reverse"!==t){var i=e;"alternate-reverse"===t&&(i+=1),r="normal",i!==1/0&&i%2!=0&&(r="reverse")}return"normal"===r?n:1-n}(n.direction,u,s);return n.currentIteration=u,n.progress=l,n.easingFunction(l)}function nt(t,e,n){var r=function(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r])if(rt(i)){var a={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:Q(t[r].easing)||e.easingFunction,value:t[r][i]};n[i]=n[i]||[],n[i].push(a)}return n}(t,e),i=function(t,e){var n=[];for(var r in t)for(var i=t[r],a=0;a<i.length-1;a++){var o=a,s=a+1,u=i[o].computedOffset,l=i[s].computedOffset,c=u,h=l;0===a&&(c=-1/0,0===l&&(s=o)),a===i.length-2&&(h=1/0,1===u&&(o=s)),n.push({applyFrom:c,applyTo:h,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:r,interpolation:at(r,i[o].value,i[s].value,e)})}return n.sort((function(t,e){return t.startOffset-e.startOffset})),n}(r,n);return function(t,e){if(null!==e)i.filter((function(t){return e>=t.applyFrom&&e<t.applyTo})).forEach((function(n){var r=e-n.startOffset,i=n.endOffset-n.startOffset,a=0===i?0:r/i;t.setAttribute(n.property,n.interpolation(a),!1,!1)}));else for(var n in r)rt(n)&&t.setAttribute(n,null)}}function rt(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}var it=function(t,e,n){return function(r){var i=ot(t,e,r);return(0,l.Z)(i)?i:n(i)}};function at(t,e,n,i){var a=r.N1[t];if(a&&a.syntax&&a.int){var o=r.GZ.styleValueRegistry.getPropertySyntax(a.syntax);if(o){var s=o.parser,u=s?s(e,i):e,l=s?s(n,i):n,c=o.mixer(u,l,i);if(c){var h=it.apply(void 0,(0,p.Z)(c));return function(t){return 0===t?e:1===t?n:h(t)}}}}return it(!1,!0,(function(t){return t?n:e}))}function ot(t,e,n){if("number"==typeof t&&"number"==typeof e)return t*(1-n)+e*n;if("boolean"==typeof t&&"boolean"==typeof e||"string"==typeof t&&"string"==typeof e)return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,i=e.length,a=Math.max(r,i),o=[],s=0;s<a;s++)o.push(ot(t[s<r?s:r-1],e[s<i?s:i-1],n));return o}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(e))}var st=function(){return(0,a.Z)((function t(){(0,i.Z)(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=Y,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}),[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=Q(t),this._easing=t}}])}();function ut(t,e){if(null===t)return[];Array.isArray(t)||(t=function(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!e[a]){var o={};"offset"in t&&(o.offset=Number(t.offset)),"easing"in t&&(o.easing=t.easing),"composite"in t&&(o.composite=t.composite),e[a]=o}void 0!==r[a]&&null!==r[a]&&(e[a][n]=r[a])}}return e.sort((function(t,e){return(t.computedOffset||0)-(e.computedOffset||0)})),e}(t));for(var n=t.map((function(t){var n={};for(var r in null!=e&&e.composite&&(n.composite="auto"),t){var i=t[r];if("offset"===r){if(null!==i){if(i=Number(i),!isFinite(i))throw new Error("Keyframe offsets must be numbers.");if(i<0||i>1)throw new Error("Keyframe offsets must be between 0 and 1.");n.computedOffset=i}}else if("composite"===r&&-1===["replace","add","accumulate","auto"].indexOf(i))throw new Error("".concat(i," compositing is not supported"));n[r]=i}return void 0===n.offset&&(n.offset=null),void 0===n.easing&&(n.easing=(null==e?void 0:e.easing)||"linear"),void 0===n.composite&&(n.composite="auto"),n})),r=!0,i=-1/0,a=0;a<n.length;a++){var o=n[a].offset;if((0,y.Z)(o))r=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}return n=n.filter((function(t){return Number(t.offset)>=0&&Number(t.offset)<=1})),r||function(){var t,e,r=n.length;n[r-1].computedOffset=Number(null!==(t=n[r-1].offset)&&void 0!==t?t:1),r>1&&(n[0].computedOffset=Number(null!==(e=n[0].offset)&&void 0!==e?e:0));for(var i=0,a=Number(n[0].computedOffset),o=1;o<r;o++){var s=n[o].computedOffset;if(!(0,y.Z)(s)&&!(0,y.Z)(a)){for(var u=1;u<o-i;u++)n[i+u].computedOffset=a+(Number(s)-a)*u/(o-i);i=o,a=Number(s)}}}(),n}var lt="backwards|forwards|both|none".split("|"),ct="reverse|alternate|alternate-reverse".split("|");function ht(t,e){return function(t,e){var n=new st;return e&&(n.fill="both",n.duration="auto"),"number"!=typeof t||isNaN(t)?void 0!==t&&Object.keys(t).forEach((function(e){if(void 0!==t[e]&&null!==t[e]&&"auto"!==t[e]){if(("number"==typeof n[e]||"duration"===e)&&("number"!=typeof t[e]||isNaN(t[e])))return;if("fill"===e&&-1===lt.indexOf(t[e]))return;if("direction"===e&&-1===ct.indexOf(t[e]))return;n[e]=t[e]}})):n.duration=t,n}(t=function(t){"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t});return t}(null!=t?t:{duration:"auto"}),e)}var ft=function(){return(0,a.Z)((function t(e,n,a){var o=this;(0,i.Z)(this,t),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=ht(a,!1),this.timing.effect=this,this.timing.activeDuration=tt(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=ut(n,this.timing),this.interpolations=nt(this.normalizedKeyframes,this.timing,this.target);var s=r.GZ.globalThis.Proxy;this.computedTiming=s?new s(this.timing,{get:function(t,e){return"duration"===e?"auto"===t.duration?0:t.duration:"fill"===e?"auto"===t.fill?"none":t.fill:"localTime"===e?o.animation&&o.animation.currentTime||null:"currentIteration"===e?o.animation&&"running"===o.animation.playState?t.currentIteration||0:null:"progress"===e?o.animation&&"running"===o.animation.playState?t.progress||0:null:t[e]},set:function(){return!0}}):this.timing}),[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(t){return null!==t&&(this.timeFraction=et(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(t){this.normalizedKeyframes=ut(t)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(t){var e=this;Object.keys(t||{}).forEach((function(n){e.timing[n]=t[n]}))}}])}();function dt(t,e){return Number(t.id)-Number(e.id)}var pt=function(){return(0,a.Z)((function t(e){var n=this;(0,i.Z)(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(t){n.currentTime=t,n.discardAnimations(),0===n.animations.length?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(t){var e=n.rafCallbacks;n.rafCallbacks=[],t<Number(n.currentTime)&&(t=Number(n.currentTime)),n.animations.sort(dt),n.animations=n.tick(t,!0,n.animations)[0],e.forEach((function(e){e[1](t)})),n.applyPendingEffects()},this.document=e}),[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(t,e,n){var r=new ft(t,e,n),i=new x(r,this);return this.animations.push(i),this.restartWebAnimationsNextTick(),i.updatePromises(),i.play(),i.updatePromises(),i}},{key:"applyDirtiedAnimation",value:function(t){var e=this;if(!this.inTick){t.markTarget();var n=t.targetAnimations();n.sort(dt),this.tick(Number(this.currentTime),!1,n.slice())[1].forEach((function(t){var n=e.animations.indexOf(t);-1!==n&&e.animations.splice(n,1)})),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame((function(){})),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach((function(t){null==t||t.applyInterpolations()})),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter((function(t){return t.updatePromises()}))}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter((function(t){return"finished"!==t.playState&&"idle"!==t.playState}))}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(t){var e=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([e,t]),e}},{key:"requestAnimationFrame",value:function(t){var e=this;return this.rAF((function(n){e.updateAnimationsPromises(),t(n),e.updateAnimationsPromises()}))}},{key:"tick",value:function(t,e,n){var r,i,a=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var o=[],s=[],u=[],l=[];return n.forEach((function(n){n.tick(t,e),n._inEffect?(s.push(n.effect),n.markTarget()):(o.push(n.effect),n.unmarkTarget()),n._needsTick&&(a.ticking=!0);var r=n._inEffect||n._needsTick;n._inTimeline=r,r?u.push(n):l.push(n)})),(r=this.pendingEffects).push.apply(r,o),(i=this.pendingEffects).push.apply(i,s),this.ticking&&this.requestAnimationFrame((function(){})),this.inTick=!1,[u,l]}}])}();r.GZ.EasingFunction=Q,r.GZ.AnimationTimeline=pt},88944:function(t,e,n){"use strict";function r({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):n}function i(t){return"object"==typeof t?t.valueOf():t}n.d(e,{t:function(){return l}});class a extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=i,null!==t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(r({map:this.map,initKey:this.initKey},t))}has(t){return super.has(r({map:this.map,initKey:this.initKey},t))}set(t,e){return super.set(function({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}({map:this.map,initKey:this.initKey},t),e)}delete(t){return super.delete(function({map:t,initKey:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}({map:this.map,initKey:this.initKey},t))}}var o=n(8064);function s(t){return Math.round(1e12*t)/1e12}function u(t){const{domain:e,range:n,paddingOuter:r,paddingInner:i,flex:o,round:u,align:l}=t,c=e.length,h=function(t,e){const n=e-t.length;return n>0?[...t,...new Array(n).fill(1)]:n<0?t.slice(0,e):t}(o,c),[f,d]=n,p=d-f,v=p/(2/c*r+1-1/c*i),g=v*i/c,y=v-c*g,m=function(t){const e=Math.min(...t);return t.map((t=>t/e))}(h),b=y/m.reduce(((t,e)=>t+e)),x=new a(e.map(((t,e)=>{const n=m[e]*b;return[t,u?Math.floor(n):n]}))),k=new a(e.map(((t,e)=>{const n=m[e]*b+g;return[t,u?Math.floor(n):n]}))),w=Array.from(k.values()).reduce(((t,e)=>t+e)),E=f+(p-(w-w/c*i))*l;let M=u?Math.round(E):E;const T=new Array(c);for(let t=0;t<c;t+=1){T[t]=s(M);const n=e[t];M+=k.get(n)}return{valueBandWidth:x,valueStep:k,adjustedRange:T}}class l extends o.r{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:o.z,flex:[]}}constructor(t){super(t)}clone(){return new l(this.options)}getStep(t){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:e}=this.options;return t>0?t:e}getPaddingOuter(){const{padding:t,paddingOuter:e}=this.options;return t>0?t:e}rescale(){super.rescale();const{align:t,domain:e,range:n,round:r,flex:i}=this.options,{adjustedRange:a,valueBandWidth:o,valueStep:s}=function(t){var e;const{domain:n}=t,r=n.length;if(0===r)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(e=t.flex)||void 0===e?void 0:e.length)return u(t);const{range:i,paddingOuter:a,paddingInner:o,round:s,align:l}=t;let c,h,f=i[0];const d=i[1]-f,p=2*a,v=r-o;c=d/Math.max(1,p+v),s&&(c=Math.floor(c)),f+=(d-c*(r-o))*l,h=c*(1-o),s&&(f=Math.round(f),h=Math.round(h));const g=new Array(r).fill(0).map(((t,e)=>f+e*c));return{valueStep:c,valueBandWidth:h,adjustedRange:g}}({align:t,range:n,round:r,flex:i,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=s,this.valueBandWidth=o,this.adjustedRange=a}}},74271:function(t,e,n){"use strict";n.d(e,{X:function(){return i}});var r=n(83787);class i{constructor(t){this.options=(0,r.Z)({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=(0,r.Z)({},this.options,t),this.rescale(t)}rescale(t){}}},63025:function(t,e,n){"use strict";n.d(e,{V:function(){return p}});var r=n(67128),i=n(74271),a=n(34199),o=n(99871),s=n(33338),u=n(25338),l=n(13393),c=n(82569);const h=(t,e,n)=>{const[r,i]=t,[s,u]=e;let l,c;return r<i?(l=(0,a.I)(r,i),c=n(s,u)):(l=(0,a.I)(i,r),c=n(u,s)),(0,o.q)(c,l)},f=(t,e,n)=>{const r=Math.min(t.length,e.length)-1,i=new Array(r),u=new Array(r),l=t[0]>t[r],c=l?[...t].reverse():t,h=l?[...e].reverse():e;for(let t=0;t<r;t+=1)i[t]=(0,a.I)(c[t],c[t+1]),u[t]=n(h[t],h[t+1]);return e=>{const n=(0,s.b)(t,e,1,r)-1,a=i[n],l=u[n];return(0,o.q)(l,a)(e)}},d=(t,e,n,r)=>(Math.min(t.length,e.length)>2?f:h)(t,e,r?u.lk:n);class p extends i.X{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:u.fv,tickCount:5}}map(t){return(0,l.J)(t)?this.output(t):this.options.unknown}invert(t){return(0,l.J)(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,e,n,...r]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,e,n,...r)}getTicks(){const{tickMethod:t}=this.options,[e,n,r,...i]=this.getTickMethodOptions();return t(e,n,r,...i)}getTickMethodOptions(){const{domain:t,tickCount:e}=this.options;return[t[0],t[t.length-1],e]}chooseNice(){return c.n}rescale(){this.nice();const[t,e]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,e,this.chooseClamp(e))}chooseClamp(t){const{clamp:e,range:n}=this.options,i=this.options.domain.map(t),a=Math.min(i.length,n.length);return e?function(t,e){const n=e<t?e:t,r=t>e?t:e;return t=>Math.min(Math.max(n,t),r)}(i[0],i[a-1]):r.Z}composeOutput(t,e){const{domain:n,range:r,round:i,interpolate:a}=this.options,s=d(n.map(t),r,a,i);this.output=(0,o.q)(s,e,t)}composeInput(t,e,n){const{domain:r,range:i}=this.options,a=d(i,r.map(t),u.fv);this.input=(0,o.q)(e,n,a)}}},36380:function(t,e,n){"use strict";n.d(e,{b:function(){return s}});var r=n(67128),i=n(63025),a=n(25338),o=n(7847);class s extends i.V{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:a.wp,tickMethod:o.Z,tickCount:5}}chooseTransforms(){return[r.Z,r.Z]}clone(){return new s(this.options)}}},8064:function(t,e,n){"use strict";n.d(e,{r:function(){return u},z:function(){return i}});var r=n(74271);const i=Symbol("defaultUnknown");function a(t,e,n){for(let r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function o(t){const{value:e,from:n,to:r,mapper:a,notFoundReturn:o}=t;let s=a.get(e);if(void 0===s){if(o!==i)return o;s=n.push(e)-1,a.set(e,s)}return r[s%r.length]}function s(t){return t instanceof Date?t=>`${t}`:"object"==typeof t?t=>JSON.stringify(t):t=>t}class u extends r.X{getDefaultOptions(){return{domain:[],range:[],unknown:i}}constructor(t){super(t)}map(t){return 0===this.domainIndexMap.size&&a(this.domainIndexMap,this.getDomain(),this.domainKey),o({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return 0===this.rangeIndexMap.size&&a(this.rangeIndexMap,this.getRange(),this.rangeKey),o({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[e]=this.options.domain,[n]=this.options.range;if(this.domainKey=s(e),this.rangeKey=s(n),!this.rangeIndexMap)return this.rangeIndexMap=new Map,void(this.domainIndexMap=new Map);t&&!t.range||this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new u(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:e}=this.options;return this.sortedDomain=e?[...t].sort(e):t,this.sortedDomain}}},7847:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(72478);const i=(t,e,n)=>{let i,a,o=t,s=e;if(o===s&&n>0)return[o];let u=(0,r.G)(o,s,n);if(0===u||!Number.isFinite(u))return[];if(u>0){o=Math.ceil(o/u),s=Math.floor(s/u),a=new Array(i=Math.ceil(s-o+1));for(let t=0;t<i;t+=1)a[t]=(o+t)*u}else{u=-u,o=Math.ceil(o*u),s=Math.floor(s*u),a=new Array(i=Math.ceil(s-o+1));for(let t=0;t<i;t+=1)a[t]=(o+t)/u}return a}},33338:function(t,e,n){"use strict";function r(t,e,n,r,i){let a=n||0,o=r||t.length;const s=i||(t=>t);for(;a<o;){const n=Math.floor((a+o)/2);s(t[n])>e?o=n:a=n+1}return a}n.d(e,{b:function(){return r}})},99871:function(t,e,n){"use strict";function r(t,...e){return e.reduce(((t,e)=>n=>t(e(n))),t)}n.d(e,{q:function(){return r}})},82569:function(t,e,n){"use strict";n.d(e,{n:function(){return i}});var r=n(72478);const i=(t,e,n=5)=>{const i=[t,e];let a,o=0,s=i.length-1,u=i[o],l=i[s];return l<u&&([u,l]=[l,u],[o,s]=[s,o]),a=(0,r.G)(u,l,n),a>0?(u=Math.floor(u/a)*a,l=Math.ceil(l/a)*a,a=(0,r.G)(u,l,n)):a<0&&(u=Math.ceil(u*a)/a,l=Math.floor(l*a)/a,a=(0,r.G)(u,l,n)),a>0?(i[o]=Math.floor(u/a)*a,i[s]=Math.ceil(l/a)*a):a<0&&(i[o]=Math.ceil(u*a)/a,i[s]=Math.floor(l*a)/a),i}},25338:function(t,e,n){"use strict";n.d(e,{fv:function(){return s},lk:function(){return l},wp:function(){return u}});var r=n(19818),i=n.n(r);function a(t,e,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function o(t){const e=i().get(t);if(!e)return null;const{model:n,value:r}=e;return"rgb"===n?r:"hsl"===n?function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100,i=t[3];if(0===n)return[255*r,255*r,255*r,i];const o=r<.5?r*(1+n):r+n-r*n,s=2*r-o;return[255*a(s,o,e+1/3),255*a(s,o,e),255*a(s,o,e-1/3),i]}(r):null}const s=(t,e)=>n=>t*(1-n)+e*n,u=(t,e)=>"number"==typeof t&&"number"==typeof e?s(t,e):"string"==typeof t&&"string"==typeof e?((t,e)=>{const n=o(t),r=o(e);return null===n||null===r?n?()=>t:()=>e:t=>{const e=new Array(4);for(let i=0;i<4;i+=1){const a=n[i],o=r[i];e[i]=a*(1-t)+o*t}const[i,a,o,s]=e;return`rgba(${Math.round(i)}, ${Math.round(a)}, ${Math.round(o)}, ${s})`}})(t,e):()=>t,l=(t,e)=>{const n=s(t,e);return t=>Math.round(n(t))}},13393:function(t,e,n){"use strict";n.d(e,{J:function(){return i}});var r=n(71154);function i(t){return!((0,r.Z)(t)||(e=t,null===e)||Number.isNaN(t));var e}},34199:function(t,e,n){"use strict";function r(t,e){return e-t?n=>(n-t)/(e-t):t=>.5}n.d(e,{I:function(){return r}})},72478:function(t,e,n){"use strict";n.d(e,{G:function(){return o},l:function(){return s}});const r=Math.sqrt(50),i=Math.sqrt(10),a=Math.sqrt(2);function o(t,e,n){const o=(e-t)/Math.max(0,n),s=Math.floor(Math.log(o)/Math.LN10),u=o/10**s;return s>=0?(u>=r?10:u>=i?5:u>=a?2:1)*10**s:-(10**-s)/(u>=r?10:u>=i?5:u>=a?2:1)}function s(t,e,n){const o=Math.abs(e-t)/Math.max(0,n);let s=10**Math.floor(Math.log(o)/Math.LN10);const u=o/s;return u>=r?s*=10:u>=i?s*=5:u>=a&&(s*=2),e<t?-s:s}},88204:function(t,e,n){"use strict";function r(t){var e=document.createElement("div");e.innerHTML=t;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}n.d(e,{L:function(){return r}})},81957:function(t,e){"use strict";e.Z=function(t,e,n){return t<e?e:t>n?n:t}},83207:function(t,e,n){"use strict";var r=n(5199),i=function(t){if("object"!=typeof t||null===t)return t;var e;if((0,r.Z)(t)){e=[];for(var n=0,a=t.length;n<a;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=i(t[n]):e[n]=t[n]}else for(var o in e={},t)"object"==typeof t[o]&&null!=t[o]?e[o]=i(t[o]):e[o]=t[o];return e};e.Z=i},68040:function(t,e){"use strict";e.Z=function(t,e,n){var r;return function(){var i=this,a=arguments,o=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(i,a)}),e),o&&t.apply(i,a)}}},83787:function(t,e,n){"use strict";var r=n(5199),i=n(83845);function a(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(null==t)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function o(t,e,n,s){for(var u in n=n||0,s=s||5,e)if(a(e,u)){var l=e[u];null!==l&&(0,i.Z)(l)?((0,i.Z)(t[u])||(t[u]={}),n<s?o(t[u],l,n+1,s):t[u]=e[u]):(0,r.Z)(l)?(t[u]=[],t[u]=t[u].concat(l)):void 0!==l&&(t[u]=l)}}e.Z=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)o(t,e[r]);return t}},15255:function(t,e,n){"use strict";var r=n(5199),i=n(4637);e.Z=function(t,e){if(t)if((0,r.Z)(t))for(var n=0,a=t.length;n<a&&!1!==e(t[n],n);n++);else if((0,i.Z)(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break}},47666:function(t,e,n){"use strict";var r=n(82844);e.Z=function(t,e){if(!(0,r.Z)(t))return t;for(var n=[],i=0;i<t.length;i++){var a=t[i];e(a,i)&&n.push(a)}return n}},53032:function(t,e,n){"use strict";var r=n(76714);e.Z=function(t,e,n){for(var i=0,a=(0,r.Z)(e)?e.split("."):e;t&&i<a.length;)t=t[a[i++]];return void 0===t||i<a.length?n:t}},67128:function(t,e){"use strict";e.Z=function(t){return t}},82844:function(t,e){"use strict";e.Z=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)}},5199:function(t,e,n){"use strict";function r(t){return Array.isArray(t)}n.d(e,{Z:function(){return r}})},90134:function(t,e,n){"use strict";var r=n(95456);e.Z=function(t){return(0,r.Z)(t,"Boolean")}},30335:function(t,e,n){"use strict";var r=n(6241),i=n(82844),a=n(76714),o=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if((0,a.Z)(t)||(0,a.Z)(e))return!1;if((0,i.Z)(t)||(0,i.Z)(e)){if(t.length!==e.length)return!1;for(var n=!0,s=0;s<t.length&&(n=o(t[s],e[s]));s++);return n}if((0,r.Z)(t)||(0,r.Z)(e)){var u=Object.keys(t),l=Object.keys(e);if(u.length!==l.length)return!1;for(n=!0,s=0;s<u.length&&(n=o(t[u[s]],e[u[s]]));s++);return n}return!1};e.Z=o},45607:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,{Z:function(){return r}})},95147:function(t,e,n){"use strict";function r(t){return null==t}n.d(e,{Z:function(){return r}})},80450:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=1e-5;function i(t,e,n){return void 0===n&&(n=r),t===e||Math.abs(t-e)<n}},25897:function(t,e,n){"use strict";function r(t){return"number"==typeof t}n.d(e,{Z:function(){return r}})},6241:function(t,e){"use strict";e.Z=function(t){return"object"==typeof t&&null!==t}},4637:function(t,e){"use strict";e.Z=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}},83845:function(t,e,n){"use strict";var r=n(6241),i=n(95456);e.Z=function(t){if(!(0,r.Z)(t)||!(0,i.Z)(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},76714:function(t,e,n){"use strict";function r(t){return"string"==typeof t}n.d(e,{Z:function(){return r}})},95456:function(t,e){"use strict";var n={}.toString;e.Z=function(t,e){return n.call(t)==="[object "+e+"]"}},71154:function(t,e){"use strict";e.Z=function(t){return void 0===t}},73576:function(t,e,n){"use strict";var r=n(92123);e.Z=function(t){var e=(0,r.Z)(t);return e.charAt(0).toLowerCase()+e.substring(1)}},13882:function(t,e,n){"use strict";function r(t){if(!Array.isArray(t))return-1/0;var e=t.length;if(!e)return-1/0;for(var n=t[0],r=1;r<e;r++)n=Math.max(n,t[r]);return n}n.d(e,{Z:function(){return r}})},92426:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=new Map;function i(t,e,n){void 0===n&&(n=128);return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0];r.has(t)||r.set(t,function(t){var e,n,r,i=t||1;function a(t,a){++e>i&&(r=n,o(1),++e),n[t]=a}function o(t){e=0,n=Object.create(null),t||(r=Object.create(null))}return o(),{clear:o,has:function(t){return void 0!==n[t]||void 0!==r[t]},get:function(t){var e=n[t];return void 0!==e?e:void 0!==(e=r[t])?(a(t,e),e):void 0},set:function(t,e){void 0!==n[t]?n[t]=e:a(t,e)}}}(n));var s=r.get(t);if(s.has(o))return s.get(o);var u=t.apply(this,i);return s.set(o,u),u}}},71523:function(t,e,n){"use strict";var r=n(5199);e.Z=function(t){if((0,r.Z)(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])}},35278:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(15255),i=n(5199),a=n(83845),o=function(t,e,n){if(!(0,i.Z)(t)&&!(0,a.Z)(t))return t;var o=n;return(0,r.Z)(t,(function(t,n){o=e(o,t,n)})),o},s=function(t,e){return o(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})}},23413:function(t,e,n){"use strict";var r=n(15255),i=n(83845),a=Object.prototype.hasOwnProperty;e.Z=function(t,e){if(null===t||!(0,i.Z)(t))return{};var n={};return(0,r.Z)(e,(function(e){a.call(t,e)&&(n[e]=t[e])})),n}},17829:function(t,e,n){"use strict";var r=n(4637),i=n(76714),a=n(25897);e.Z=function(t,e,n){var o=t,s=(0,i.Z)(e)?e.split("."):e;return s.forEach((function(t,e){e<s.length-1?((0,r.Z)(o[t])||(o[t]=(0,a.Z)(s[e+1])?[]:{}),o=o[t]):o[t]=n})),t}},99711:function(t,e){"use strict";e.Z=function(t,e,n){var r,i,a,o,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,o=t.apply(i,a),r||(i=a=null)},l=function(){var l=Date.now();s||!1!==n.leading||(s=l);var c=e-(l-s);return i=this,a=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=l,o=t.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(u,c)),o};return l.cancel=function(){clearTimeout(r),s=0,r=i=a=null},l}},92123:function(t,e,n){"use strict";var r=n(95147);e.Z=function(t){return(0,r.Z)(t)?"":t.toString()}},77716:function(t,e,n){"use strict";var r=n(92123);e.Z=function(t){var e=(0,r.Z)(t);return e.charAt(0).toUpperCase()+e.substring(1)}},74873:function(t,e,n){"use strict";function r(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function i(t,e,n,a,o,s,u,l,c,h){var f,d,p,v,g,y=t,m=e,b=n,x=a,k=l,w=c,E=120*Math.PI/180,M=Math.PI/180*(+o||0),T=[];if(h)d=h[0],p=h[1],v=h[2],g=h[3];else{y=(f=r(y,m,-M)).x,m=f.y;var S=(y-(k=(f=r(k,w,-M)).x))/2,C=(m-(w=f.y))/2,A=S*S/(b*b)+C*C/(x*x);A>1&&(b*=A=Math.sqrt(A),x*=A);var P=b*b,N=x*x,R=(s===u?-1:1)*Math.sqrt(Math.abs((P*N-P*C*C-N*S*S)/(P*C*C+N*S*S)));v=R*b*C/x+(y+k)/2,g=R*-x*S/b+(m+w)/2,d=Math.asin(((m-g)/x*Math.pow(10,9)|0)/Math.pow(10,9)),p=Math.asin(((w-g)/x*Math.pow(10,9)|0)/Math.pow(10,9)),d=y<v?Math.PI-d:d,p=k<v?Math.PI-p:p,d<0&&(d=2*Math.PI+d),p<0&&(p=2*Math.PI+p),u&&d>p&&(d-=2*Math.PI),!u&&p>d&&(p-=2*Math.PI)}var Z=p-d;if(Math.abs(Z)>E){var O=p,L=k,_=w;p=d+E*(u&&p>d?1:-1),T=i(k=v+b*Math.cos(p),w=g+x*Math.sin(p),b,x,o,0,u,L,_,[p,O,v,g])}Z=p-d;var I=Math.cos(d),D=Math.sin(d),F=Math.cos(p),B=Math.sin(p),G=Math.tan(Z/4),z=4/3*b*G,V=4/3*x*G,j=[y,m],W=[y+z*D,m-V*I],H=[k+z*B,w-V*F],U=[k,w];if(W[0]=2*j[0]-W[0],W[1]=2*j[1]-W[1],h)return W.concat(H,U,T);for(var Y=[],q=0,X=(T=W.concat(H,U,T)).length;q<X;q+=1)Y[q]=q%2?r(T[q-1],T[q],M).y:r(T[q],T[q+1],M).x;return Y}n.d(e,{W:function(){return i}})},44078:function(t,e,n){"use strict";function r(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}n.d(e,{y:function(){return r}})},8874:function(t){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(t,e,n){var r=n(8874),i=n(86851),a=Object.hasOwnProperty,o=Object.create(null);for(var s in r)a.call(r,s)&&(o[r[s]]=s);var u=t.exports={to:{},get:{}};function l(t,e,n){return Math.min(Math.max(e,t),n)}function c(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}u.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=u.get.hsl(t),n="hsl";break;case"hwb":e=u.get.hwb(t),n="hwb";break;default:e=u.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},u.get.rgb=function(t){if(!t)return null;var e,n,i,o=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=e[2],e=e[1],n=0;n<3;n++){var s=2*n;o[n]=parseInt(e.slice(s,s+2),16)}i&&(o[3]=parseInt(i,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(i=(e=e[1])[3],n=0;n<3;n++)o[n]=parseInt(e[n]+e[n],16);i&&(o[3]=parseInt(i+i,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(e[n+1],0);e[4]&&(e[5]?o[3]=.01*parseFloat(e[4]):o[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:a.call(r,e[1])?((o=r[e[1]])[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?o[3]=.01*parseFloat(e[4]):o[3]=parseFloat(e[4]))}for(n=0;n<3;n++)o[n]=l(o[n],0,255);return o[3]=l(o[3],0,1),o},u.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},u.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},u.to.hex=function(){var t=i(arguments);return"#"+c(t[0])+c(t[1])+c(t[2])+(t[3]<1?c(Math.round(255*t[3])):"")},u.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},u.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},u.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},u.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},u.to.keyword=function(t){return o[t.slice(0,3)]}},26729:function(t){"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,r,a,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||t,o),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,a,o){var s=n?n+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,a),!0;case 6:return c.fn.call(c.context,e,r,i,a,o),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,r);break;case 4:c[l].fn.call(c[l].context,e,r,i);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var a=n?n+t:t;if(!this._events[a])return this;if(!e)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[a]=1===l.length?l[0]:l:o(this,a)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s},49685:function(t,e,n){"use strict";n.d(e,{Ib:function(){return r},WT:function(){return i}});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},35600:function(t,e,n){"use strict";n.d(e,{Ue:function(){return i},al:function(){return o},xO:function(){return a}});var r=n(49685);function i(){var t=new r.WT(9);return r.WT!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function o(t,e,n,i,a,o,s,u,l){var c=new r.WT(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=a,c[5]=o,c[6]=s,c[7]=u,c[8]=l,c}},85975:function(t,e,n){"use strict";n.r(e),n.d(e,{add:function(){return Y},adjoint:function(){return f},clone:function(){return a},copy:function(){return o},create:function(){return i},determinant:function(){return d},equals:function(){return J},exactEquals:function(){return K},frob:function(){return U},fromQuat:function(){return L},fromQuat2:function(){return A},fromRotation:function(){return E},fromRotationTranslation:function(){return C},fromRotationTranslationScale:function(){return Z},fromRotationTranslationScaleOrigin:function(){return O},fromScaling:function(){return w},fromTranslation:function(){return k},fromValues:function(){return s},fromXRotation:function(){return M},fromYRotation:function(){return T},fromZRotation:function(){return S},frustum:function(){return _},getRotation:function(){return R},getScaling:function(){return N},getTranslation:function(){return P},identity:function(){return l},invert:function(){return h},lookAt:function(){return j},mul:function(){return Q},multiply:function(){return p},multiplyScalar:function(){return X},multiplyScalarAndAdd:function(){return $},ortho:function(){return z},orthoNO:function(){return G},orthoZO:function(){return V},perspective:function(){return D},perspectiveFromFieldOfView:function(){return B},perspectiveNO:function(){return I},perspectiveZO:function(){return F},rotate:function(){return y},rotateX:function(){return m},rotateY:function(){return b},rotateZ:function(){return x},scale:function(){return g},set:function(){return u},str:function(){return H},sub:function(){return tt},subtract:function(){return q},targetTo:function(){return W},translate:function(){return v},transpose:function(){return c}});var r=n(49685);function i(){var t=new r.WT(16);return r.WT!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function a(t){var e=new r.WT(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function s(t,e,n,i,a,o,s,u,l,c,h,f,d,p,v,g){var y=new r.WT(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=i,y[4]=a,y[5]=o,y[6]=s,y[7]=u,y[8]=l,y[9]=c,y[10]=h,y[11]=f,y[12]=d,y[13]=p,y[14]=v,y[15]=g,y}function u(t,e,n,r,i,a,o,s,u,l,c,h,f,d,p,v,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=h,t[11]=f,t[12]=d,t[13]=p,t[14]=v,t[15]=g,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function c(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function h(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],g=e[14],y=e[15],m=n*s-r*o,b=n*u-i*o,x=n*l-a*o,k=r*u-i*s,w=r*l-a*s,E=i*l-a*u,M=c*v-h*p,T=c*g-f*p,S=c*y-d*p,C=h*g-f*v,A=h*y-d*v,P=f*y-d*g,N=m*P-b*A+x*C+k*S-w*T+E*M;return N?(N=1/N,t[0]=(s*P-u*A+l*C)*N,t[1]=(i*A-r*P-a*C)*N,t[2]=(v*E-g*w+y*k)*N,t[3]=(f*w-h*E-d*k)*N,t[4]=(u*S-o*P-l*T)*N,t[5]=(n*P-i*S+a*T)*N,t[6]=(g*x-p*E-y*b)*N,t[7]=(c*E-f*x+d*b)*N,t[8]=(o*A-s*S+l*M)*N,t[9]=(r*S-n*A-a*M)*N,t[10]=(p*w-v*x+y*m)*N,t[11]=(h*x-c*w-d*m)*N,t[12]=(s*T-o*C-u*M)*N,t[13]=(n*C-r*T+i*M)*N,t[14]=(v*b-p*k-g*m)*N,t[15]=(c*k-h*b+f*m)*N,t):null}function f(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],g=e[14],y=e[15];return t[0]=s*(f*y-d*g)-h*(u*y-l*g)+v*(u*d-l*f),t[1]=-(r*(f*y-d*g)-h*(i*y-a*g)+v*(i*d-a*f)),t[2]=r*(u*y-l*g)-s*(i*y-a*g)+v*(i*l-a*u),t[3]=-(r*(u*d-l*f)-s*(i*d-a*f)+h*(i*l-a*u)),t[4]=-(o*(f*y-d*g)-c*(u*y-l*g)+p*(u*d-l*f)),t[5]=n*(f*y-d*g)-c*(i*y-a*g)+p*(i*d-a*f),t[6]=-(n*(u*y-l*g)-o*(i*y-a*g)+p*(i*l-a*u)),t[7]=n*(u*d-l*f)-o*(i*d-a*f)+c*(i*l-a*u),t[8]=o*(h*y-d*v)-c*(s*y-l*v)+p*(s*d-l*h),t[9]=-(n*(h*y-d*v)-c*(r*y-a*v)+p*(r*d-a*h)),t[10]=n*(s*y-l*v)-o*(r*y-a*v)+p*(r*l-a*s),t[11]=-(n*(s*d-l*h)-o*(r*d-a*h)+c*(r*l-a*s)),t[12]=-(o*(h*g-f*v)-c*(s*g-u*v)+p*(s*f-u*h)),t[13]=n*(h*g-f*v)-c*(r*g-i*v)+p*(r*f-i*h),t[14]=-(n*(s*g-u*v)-o*(r*g-i*v)+p*(r*u-i*s)),t[15]=n*(s*f-u*h)-o*(r*f-i*h)+c*(r*u-i*s),t}function d(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11],d=t[12],p=t[13],v=t[14],g=t[15];return(e*o-n*a)*(h*g-f*v)-(e*s-r*a)*(c*g-f*p)+(e*u-i*a)*(c*v-h*p)+(n*s-r*o)*(l*g-f*d)-(n*u-i*o)*(l*v-h*d)+(r*u-i*s)*(l*p-c*d)}function p(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],v=e[12],g=e[13],y=e[14],m=e[15],b=n[0],x=n[1],k=n[2],w=n[3];return t[0]=b*r+x*s+k*h+w*v,t[1]=b*i+x*u+k*f+w*g,t[2]=b*a+x*l+k*d+w*y,t[3]=b*o+x*c+k*p+w*m,b=n[4],x=n[5],k=n[6],w=n[7],t[4]=b*r+x*s+k*h+w*v,t[5]=b*i+x*u+k*f+w*g,t[6]=b*a+x*l+k*d+w*y,t[7]=b*o+x*c+k*p+w*m,b=n[8],x=n[9],k=n[10],w=n[11],t[8]=b*r+x*s+k*h+w*v,t[9]=b*i+x*u+k*f+w*g,t[10]=b*a+x*l+k*d+w*y,t[11]=b*o+x*c+k*p+w*m,b=n[12],x=n[13],k=n[14],w=n[15],t[12]=b*r+x*s+k*h+w*v,t[13]=b*i+x*u+k*f+w*g,t[14]=b*a+x*l+k*d+w*y,t[15]=b*o+x*c+k*p+w*m,t}function v(t,e,n){var r,i,a,o,s,u,l,c,h,f,d,p,v=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*y+e[12],t[13]=e[1]*v+e[5]*g+e[9]*y+e[13],t[14]=e[2]*v+e[6]*g+e[10]*y+e[14],t[15]=e[3]*v+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*v+s*g+h*y+e[12],t[13]=i*v+u*g+f*y+e[13],t[14]=a*v+l*g+d*y+e[14],t[15]=o*v+c*g+p*y+e[15]),t}function g(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function y(t,e,n,i){var a,o,s,u,l,c,h,f,d,p,v,g,y,m,b,x,k,w,E,M,T,S,C,A,P=i[0],N=i[1],R=i[2],Z=Math.hypot(P,N,R);return Z<r.Ib?null:(P*=Z=1/Z,N*=Z,R*=Z,a=Math.sin(n),s=1-(o=Math.cos(n)),u=e[0],l=e[1],c=e[2],h=e[3],f=e[4],d=e[5],p=e[6],v=e[7],g=e[8],y=e[9],m=e[10],b=e[11],x=P*P*s+o,k=N*P*s+R*a,w=R*P*s-N*a,E=P*N*s-R*a,M=N*N*s+o,T=R*N*s+P*a,S=P*R*s+N*a,C=N*R*s-P*a,A=R*R*s+o,t[0]=u*x+f*k+g*w,t[1]=l*x+d*k+y*w,t[2]=c*x+p*k+m*w,t[3]=h*x+v*k+b*w,t[4]=u*E+f*M+g*T,t[5]=l*E+d*M+y*T,t[6]=c*E+p*M+m*T,t[7]=h*E+v*M+b*T,t[8]=u*S+f*C+g*A,t[9]=l*S+d*C+y*A,t[10]=c*S+p*C+m*A,t[11]=h*S+v*C+b*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function m(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+l*r,t[5]=o*i+c*r,t[6]=s*i+h*r,t[7]=u*i+f*r,t[8]=l*i-a*r,t[9]=c*i-o*r,t[10]=h*i-s*r,t[11]=f*i-u*r,t}function b(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-l*r,t[1]=o*i-c*r,t[2]=s*i-h*r,t[3]=u*i-f*r,t[8]=a*r+l*i,t[9]=o*r+c*i,t[10]=s*r+h*i,t[11]=u*r+f*i,t}function x(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+l*r,t[1]=o*i+c*r,t[2]=s*i+h*r,t[3]=u*i+f*r,t[4]=l*i-a*r,t[5]=c*i-o*r,t[6]=h*i-s*r,t[7]=f*i-u*r,t}function k(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e,n){var i,a,o,s=n[0],u=n[1],l=n[2],c=Math.hypot(s,u,l);return c<r.Ib?null:(s*=c=1/c,u*=c,l*=c,i=Math.sin(e),o=1-(a=Math.cos(e)),t[0]=s*s*o+a,t[1]=u*s*o+l*i,t[2]=l*s*o-u*i,t[3]=0,t[4]=s*u*o-l*i,t[5]=u*u*o+a,t[6]=l*u*o+s*i,t[7]=0,t[8]=s*l*o+u*i,t[9]=u*l*o-s*i,t[10]=l*l*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function M(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,u=i+i,l=a+a,c=r*s,h=r*u,f=r*l,d=i*u,p=i*l,v=a*l,g=o*s,y=o*u,m=o*l;return t[0]=1-(d+v),t[1]=h+m,t[2]=f-y,t[3]=0,t[4]=h-m,t[5]=1-(c+v),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(c+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function A(t,e){var n=new r.WT(3),i=-e[0],a=-e[1],o=-e[2],s=e[3],u=e[4],l=e[5],c=e[6],h=e[7],f=i*i+a*a+o*o+s*s;return f>0?(n[0]=2*(u*s+h*i+l*o-c*a)/f,n[1]=2*(l*s+h*a+c*i-u*o)/f,n[2]=2*(c*s+h*o+u*a-l*i)/f):(n[0]=2*(u*s+h*i+l*o-c*a),n[1]=2*(l*s+h*a+c*i-u*o),n[2]=2*(c*s+h*o+u*a-l*i)),C(t,e,n),t}function P(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function N(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(u,l,c),t}function R(t,e){var n=new r.WT(3);N(n,e);var i=1/n[0],a=1/n[1],o=1/n[2],s=e[0]*i,u=e[1]*a,l=e[2]*o,c=e[4]*i,h=e[5]*a,f=e[6]*o,d=e[8]*i,p=e[9]*a,v=e[10]*o,g=s+h+v,y=0;return g>0?(y=2*Math.sqrt(g+1),t[3]=.25*y,t[0]=(f-p)/y,t[1]=(d-l)/y,t[2]=(u-c)/y):s>h&&s>v?(y=2*Math.sqrt(1+s-h-v),t[3]=(f-p)/y,t[0]=.25*y,t[1]=(u+c)/y,t[2]=(d+l)/y):h>v?(y=2*Math.sqrt(1+h-s-v),t[3]=(d-l)/y,t[0]=(u+c)/y,t[1]=.25*y,t[2]=(f+p)/y):(y=2*Math.sqrt(1+v-s-h),t[3]=(u-c)/y,t[0]=(d+l)/y,t[1]=(f+p)/y,t[2]=.25*y),t}function Z(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],u=i+i,l=a+a,c=o+o,h=i*u,f=i*l,d=i*c,p=a*l,v=a*c,g=o*c,y=s*u,m=s*l,b=s*c,x=r[0],k=r[1],w=r[2];return t[0]=(1-(p+g))*x,t[1]=(f+b)*x,t[2]=(d-m)*x,t[3]=0,t[4]=(f-b)*k,t[5]=(1-(h+g))*k,t[6]=(v+y)*k,t[7]=0,t[8]=(d+m)*w,t[9]=(v-y)*w,t[10]=(1-(h+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function O(t,e,n,r,i){var a=e[0],o=e[1],s=e[2],u=e[3],l=a+a,c=o+o,h=s+s,f=a*l,d=a*c,p=a*h,v=o*c,g=o*h,y=s*h,m=u*l,b=u*c,x=u*h,k=r[0],w=r[1],E=r[2],M=i[0],T=i[1],S=i[2],C=(1-(v+y))*k,A=(d+x)*k,P=(p-b)*k,N=(d-x)*w,R=(1-(f+y))*w,Z=(g+m)*w,O=(p+b)*E,L=(g-m)*E,_=(1-(f+v))*E;return t[0]=C,t[1]=A,t[2]=P,t[3]=0,t[4]=N,t[5]=R,t[6]=Z,t[7]=0,t[8]=O,t[9]=L,t[10]=_,t[11]=0,t[12]=n[0]+M-(C*M+N*T+O*S),t[13]=n[1]+T-(A*M+R*T+L*S),t[14]=n[2]+S-(P*M+Z*T+_*S),t[15]=1,t}function L(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,h=r*s,f=i*o,d=i*s,p=i*u,v=a*o,g=a*s,y=a*u;return t[0]=1-h-p,t[1]=c+y,t[2]=f-g,t[3]=0,t[4]=c-y,t[5]=1-l-p,t[6]=d+v,t[7]=0,t[8]=f+g,t[9]=d-v,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,e,n,r,i,a,o){var s=1/(n-e),u=1/(i-r),l=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(o+a)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*l,t[15]=0,t}function I(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t}var D=I;function F(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=i*a,t[14]=i*r*a):(t[10]=-1,t[14]=-r),t}function B(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(i-a)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function G(t,e,n,r,i,a,o){var s=1/(e-n),u=1/(r-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(o+a)*l,t[15]=1,t}var z=G;function V(t,e,n,r,i,a,o){var s=1/(e-n),u=1/(r-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=a*l,t[15]=1,t}function j(t,e,n,i){var a,o,s,u,c,h,f,d,p,v,g=e[0],y=e[1],m=e[2],b=i[0],x=i[1],k=i[2],w=n[0],E=n[1],M=n[2];return Math.abs(g-w)<r.Ib&&Math.abs(y-E)<r.Ib&&Math.abs(m-M)<r.Ib?l(t):(f=g-w,d=y-E,p=m-M,a=x*(p*=v=1/Math.hypot(f,d,p))-k*(d*=v),o=k*(f*=v)-b*p,s=b*d-x*f,(v=Math.hypot(a,o,s))?(a*=v=1/v,o*=v,s*=v):(a=0,o=0,s=0),u=d*s-p*o,c=p*a-f*s,h=f*o-d*a,(v=Math.hypot(u,c,h))?(u*=v=1/v,c*=v,h*=v):(u=0,c=0,h=0),t[0]=a,t[1]=u,t[2]=f,t[3]=0,t[4]=o,t[5]=c,t[6]=d,t[7]=0,t[8]=s,t[9]=h,t[10]=p,t[11]=0,t[12]=-(a*g+o*y+s*m),t[13]=-(u*g+c*y+h*m),t[14]=-(f*g+d*y+p*m),t[15]=1,t)}function W(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=r[0],u=r[1],l=r[2],c=i-n[0],h=a-n[1],f=o-n[2],d=c*c+h*h+f*f;d>0&&(c*=d=1/Math.sqrt(d),h*=d,f*=d);var p=u*f-l*h,v=l*c-s*f,g=s*h-u*c;return(d=p*p+v*v+g*g)>0&&(p*=d=1/Math.sqrt(d),v*=d,g*=d),t[0]=p,t[1]=v,t[2]=g,t[3]=0,t[4]=h*g-f*v,t[5]=f*p-c*g,t[6]=c*v-h*p,t[7]=0,t[8]=c,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function H(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function U(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Y(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function q(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function X(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function $(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function K(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function J(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],v=t[12],g=t[13],y=t[14],m=t[15],b=e[0],x=e[1],k=e[2],w=e[3],E=e[4],M=e[5],T=e[6],S=e[7],C=e[8],A=e[9],P=e[10],N=e[11],R=e[12],Z=e[13],O=e[14],L=e[15];return Math.abs(n-b)<=r.Ib*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-x)<=r.Ib*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-k)<=r.Ib*Math.max(1,Math.abs(a),Math.abs(k))&&Math.abs(o-w)<=r.Ib*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-E)<=r.Ib*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-M)<=r.Ib*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-T)<=r.Ib*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-S)<=r.Ib*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-C)<=r.Ib*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(f-A)<=r.Ib*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(d-P)<=r.Ib*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-N)<=r.Ib*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(v-R)<=r.Ib*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(g-Z)<=r.Ib*Math.max(1,Math.abs(g),Math.abs(Z))&&Math.abs(y-O)<=r.Ib*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(m-L)<=r.Ib*Math.max(1,Math.abs(m),Math.abs(L))}var Q=p,tt=q},32945:function(t,e,n){"use strict";n.d(e,{Fv:function(){return E},JG:function(){return x},Jp:function(){return l},Su:function(){return f},U_:function(){return h},Ue:function(){return s},al:function(){return b},dC:function(){return w},t8:function(){return k},yY:function(){return u}});var r=n(49685),i=n(35600),a=n(77160),o=n(98333);function s(){var t=new r.WT(4);return r.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function u(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function l(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*c+o*s+i*l-a*u,t[1]=i*c+o*u+a*s-r*l,t[2]=a*c+o*l+r*u-i*s,t[3]=o*c-r*s-i*u-a*l,t}function c(t,e,n,i){var a,o,s,u,l,c=e[0],h=e[1],f=e[2],d=e[3],p=n[0],v=n[1],g=n[2],y=n[3];return(o=c*p+h*v+f*g+d*y)<0&&(o=-o,p=-p,v=-v,g=-g,y=-y),1-o>r.Ib?(a=Math.acos(o),s=Math.sin(a),u=Math.sin((1-i)*a)/s,l=Math.sin(i*a)/s):(u=1-i,l=i),t[0]=u*c+l*p,t[1]=u*h+l*v,t[2]=u*f+l*g,t[3]=u*d+l*y,t}function h(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=a*s,t}function f(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(n),u=Math.cos(n),l=Math.sin(r),c=Math.cos(r);return t[0]=a*u*c-o*s*l,t[1]=o*s*c+a*u*l,t[2]=o*u*l-a*s*c,t[3]=o*u*c+a*s*l,t}o.d9;var d,p,v,g,y,m,b=o.al,x=o.JG,k=o.t8,w=(o.IH,l),E=(o.bA,o.AK,o.t7,o.kE,o.we,o.Fv);o.I6,o.fS,d=a.Ue(),p=a.al(1,0,0),v=a.al(0,1,0),g=s(),y=s(),m=i.Ue()},31437:function(t,e,n){"use strict";n.d(e,{AK:function(){return u},Fv:function(){return s},I6:function(){return l},JG:function(){return a},Ue:function(){return i},t8:function(){return o}});var r=n(49685);function i(){var t=new r.WT(2);return r.WT!=Float32Array&&(t[0]=0,t[1]=0),t}function a(t,e){return t[0]=e[0],t[1]=e[1],t}function o(t,e,n){return t[0]=e,t[1]=n,t}function s(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function u(t,e){return t[0]*e[0]+t[1]*e[1]}function l(t,e){return t[0]===e[0]&&t[1]===e[1]}var c;c=i()},77160:function(t,e,n){"use strict";n.d(e,{$X:function(){return h},AK:function(){return y},Fp:function(){return p},Fv:function(){return g},IH:function(){return c},JG:function(){return u},Jp:function(){return f},TK:function(){return S},Ue:function(){return i},VC:function(){return w},VV:function(){return d},Zh:function(){return C},al:function(){return s},bA:function(){return v},d9:function(){return a},fF:function(){return x},fS:function(){return E},kC:function(){return m},kE:function(){return o},kK:function(){return k},lu:function(){return T},t7:function(){return b},t8:function(){return l}});var r=n(49685);function i(){var t=new r.WT(3);return r.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function a(t){var e=new r.WT(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function o(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function s(t,e,n){var i=new r.WT(3);return i[0]=t,i[1]=e,i[2]=n,i}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function l(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function h(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function d(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function p(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function v(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function g(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function y(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function m(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=i*u-a*s,t[1]=a*o-r*u,t[2]=r*s-i*o,t}function b(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t}function x(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}function k(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function w(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],u=e[1],l=e[2],c=i*l-a*u,h=a*s-r*l,f=r*u-i*s,d=i*f-a*h,p=a*c-r*f,v=r*h-i*c,g=2*o;return c*=g,h*=g,f*=g,d*=2,p*=2,v*=2,t[0]=s+c+d,t[1]=u+h+p,t[2]=l+f+v,t}function E(t,e){var n=t[0],i=t[1],a=t[2],o=e[0],s=e[1],u=e[2];return Math.abs(n-o)<=r.Ib*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=r.Ib*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-u)<=r.Ib*Math.max(1,Math.abs(a),Math.abs(u))}var M,T=h,S=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)},C=o;M=i()},98333:function(t,e,n){"use strict";n.d(e,{AK:function(){return p},Fv:function(){return d},I6:function(){return y},IH:function(){return l},JG:function(){return s},Ue:function(){return i},al:function(){return o},bA:function(){return c},d9:function(){return a},fF:function(){return g},fS:function(){return m},kE:function(){return h},t7:function(){return v},t8:function(){return u},we:function(){return f}});var r=n(49685);function i(){var t=new r.WT(4);return r.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function a(t){var e=new r.WT(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(t,e,n,i){var a=new r.WT(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function c(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function h(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function f(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function d(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function v(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t[3]=s+r*(n[3]-s),t}function g(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}function y(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function m(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=e[0],u=e[1],l=e[2],c=e[3];return Math.abs(n-s)<=r.Ib*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.Ib*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-l)<=r.Ib*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-c)<=r.Ib*Math.max(1,Math.abs(o),Math.abs(c))}var b;b=i()},62689:function(t){var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},86851:function(t,e,n){"use strict";var r=n(89594),i=Array.prototype.concat,a=Array.prototype.slice,o=t.exports=function(t){for(var e=[],n=0,o=t.length;n<o;n++){var s=t[n];r(s)?e=i.call(e,a.call(s)):e.push(s)}return e};o.wrap=function(t){return function(){return t(o(arguments))}}},89594:function(t){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},53640:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(61120),i=n(78814),a=n(82963);function o(t,e,n){return e=(0,r.Z)(e),(0,a.Z)(t,(0,i.Z)()?Reflect.construct(e,n||[],(0,r.Z)(t).constructor):e.apply(t,n))}},37762:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(40181);function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(0,r.Z)(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},99346:function(t,e,n){"use strict";n.d(e,{B:function(){return s},S:function(){return l}});var r=n(67294),i=n(24139),a=n(27037),o=n(30202);function s(t,e){return l({filters:{...t,status:"pending"}},(0,o.NL)(e)).length}function u(t,e){return t.findAll(e.filters).map((t=>e.select?e.select(t):t.state))}function l(t={},e){const n=(0,o.NL)(e).getMutationCache(),s=r.useRef(t),l=r.useRef(null);return l.current||(l.current=u(n,t)),r.useEffect((()=>{s.current=t})),r.useSyncExternalStore(r.useCallback((t=>n.subscribe((()=>{const e=(0,i.Q$)(l.current,u(n,s.current));l.current!==e&&(l.current=e,a.Vr.schedule(t))}))),[n]),(()=>l.current),(()=>l.current))}},17049:function(t,e){"use strict";var n={value:function(){}};function r(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new i(r)}function i(t){this._=t}function a(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function o(t,e,r){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=n,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=r&&t.push({name:e,value:r}),t}i.prototype=r.prototype={constructor:i,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),u=-1,l=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++u<l;)if(n=(t=s[u]).type)i[n]=o(i[n],t.name,e);else if(null==e)for(n in i)i[n]=o(i[n],t.name,null);return this}for(;++u<l;)if((n=(t=s[u]).type)&&(n=a(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new i(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}},e.Z=r},68505:function(t,e,n){"use strict";function r(t,e){var n,r=1;function i(){var i,a,o=n.length,s=0,u=0;for(i=0;i<o;++i)s+=(a=n[i]).x,u+=a.y;for(s=(s/o-t)*r,u=(u/o-e)*r,i=0;i<o;++i)(a=n[i]).x-=s,a.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}n.d(e,{Z:function(){return r}})},13548:function(t,e,n){"use strict";function r(t){return function(){return t}}n.d(e,{Z:function(){return r}})},79778:function(t,e,n){"use strict";function r(t){return 1e-6*(t()-.5)}n.d(e,{Z:function(){return r}})},56561:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(13548),i=n(79778);function a(t){return t.index}function o(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function s(t){var e,n,s,u,l,c,h=a,f=function(t){return 1/Math.min(u[t.source.index],u[t.target.index])},d=(0,r.Z)(30),p=1;function v(r){for(var a=0,o=t.length;a<p;++a)for(var s,u,h,f,d,v,g,y=0;y<o;++y)u=(s=t[y]).source,f=(h=s.target).x+h.vx-u.x-u.vx||(0,i.Z)(c),d=h.y+h.vy-u.y-u.vy||(0,i.Z)(c),f*=v=((v=Math.sqrt(f*f+d*d))-n[y])/v*r*e[y],d*=v,h.vx-=f*(g=l[y]),h.vy-=d*g,u.vx+=f*(g=1-g),u.vy+=d*g}function g(){if(s){var r,i,a=s.length,c=t.length,f=new Map(s.map(((t,e)=>[h(t,e,s),t])));for(r=0,u=new Array(a);r<c;++r)(i=t[r]).index=r,"object"!=typeof i.source&&(i.source=o(f,i.source)),"object"!=typeof i.target&&(i.target=o(f,i.target)),u[i.source.index]=(u[i.source.index]||0)+1,u[i.target.index]=(u[i.target.index]||0)+1;for(r=0,l=new Array(c);r<c;++r)i=t[r],l[r]=u[i.source.index]/(u[i.source.index]+u[i.target.index]);e=new Array(c),y(),n=new Array(c),m()}}function y(){if(s)for(var n=0,r=t.length;n<r;++n)e[n]=+f(t[n],n,t)}function m(){if(s)for(var e=0,r=t.length;e<r;++e)n[e]=+d(t[e],e,t)}return null==t&&(t=[]),v.initialize=function(t,e){s=t,c=e,g()},v.links=function(e){return arguments.length?(t=e,g(),v):t},v.id=function(t){return arguments.length?(h=t,v):h},v.iterations=function(t){return arguments.length?(p=+t,v):p},v.strength=function(t){return arguments.length?(f="function"==typeof t?t:(0,r.Z)(+t),y(),v):f},v.distance=function(t){return arguments.length?(d="function"==typeof t?t:(0,r.Z)(+t),m(),v):d},v}},65475:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(81269),i=n(13548),a=n(79778),o=n(48917);function s(){var t,e,n,s,u,l=(0,i.Z)(-30),c=1,h=1/0,f=.81;function d(n){var i,a=t.length,u=(0,r.Z)(t,o.x,o.y).visitAfter(v);for(s=n,i=0;i<a;++i)e=t[i],u.visit(g)}function p(){if(t){var e,n,r=t.length;for(u=new Array(r),e=0;e<r;++e)n=t[e],u[n.index]=+l(n,e,t)}}function v(t){var e,n,r,i,a,o=0,s=0;if(t.length){for(r=i=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(o+=e.value,s+=n,r+=n*e.x,i+=n*e.y);t.x=r/s,t.y=i/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{o+=u[e.data.index]}while(e=e.next)}t.value=o}function g(t,r,i,o){if(!t.value)return!0;var l=t.x-e.x,d=t.y-e.y,p=o-r,v=l*l+d*d;if(p*p/f<v)return v<h&&(0===l&&(v+=(l=(0,a.Z)(n))*l),0===d&&(v+=(d=(0,a.Z)(n))*d),v<c&&(v=Math.sqrt(c*v)),e.vx+=l*t.value*s/v,e.vy+=d*t.value*s/v),!0;if(!(t.length||v>=h)){(t.data!==e||t.next)&&(0===l&&(v+=(l=(0,a.Z)(n))*l),0===d&&(v+=(d=(0,a.Z)(n))*d),v<c&&(v=Math.sqrt(c*v)));do{t.data!==e&&(p=u[t.data.index]*s/v,e.vx+=l*p,e.vy+=d*p)}while(t=t.next)}}return d.initialize=function(e,r){t=e,n=r,p()},d.strength=function(t){return arguments.length?(l="function"==typeof t?t:(0,i.Z)(+t),p(),d):l},d.distanceMin=function(t){return arguments.length?(c=t*t,d):Math.sqrt(c)},d.distanceMax=function(t){return arguments.length?(h=t*t,d):Math.sqrt(h)},d.theta=function(t){return arguments.length?(f=t*t,d):Math.sqrt(f)},d}},48917:function(t,e,n){"use strict";n.d(e,{Z:function(){return f},x:function(){return u},y:function(){return l}});var r=n(17049),i=n(91739);const a=1664525,o=1013904223,s=4294967296;function u(t){return t.x}function l(t){return t.y}var c=10,h=Math.PI*(3-Math.sqrt(5));function f(t){var e,n=1,u=.001,l=1-Math.pow(u,1/300),f=0,d=.6,p=new Map,v=(0,i.HT)(m),g=(0,r.Z)("tick","end"),y=function(){let t=1;return()=>(t=(a*t+o)%s)/s}();function m(){b(),g.call("tick",e),n<u&&(v.stop(),g.call("end",e))}function b(r){var i,a,o=t.length;void 0===r&&(r=1);for(var s=0;s<r;++s)for(n+=(f-n)*l,p.forEach((function(t){t(n)})),i=0;i<o;++i)null==(a=t[i]).fx?a.x+=a.vx*=d:(a.x=a.fx,a.vx=0),null==a.fy?a.y+=a.vy*=d:(a.y=a.fy,a.vy=0);return e}function x(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=c*Math.sqrt(.5+n),a=n*h;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function k(e){return e.initialize&&e.initialize(t,y),e}return null==t&&(t=[]),x(),e={tick:b,restart:function(){return v.restart(m),e},stop:function(){return v.stop(),e},nodes:function(n){return arguments.length?(t=n,x(),p.forEach(k),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(u=+t,e):u},alphaDecay:function(t){return arguments.length?(l=+t,e):+l},alphaTarget:function(t){return arguments.length?(f=+t,e):f},velocityDecay:function(t){return arguments.length?(d=1-t,e):1-d},randomSource:function(t){return arguments.length?(y=t,p.forEach(k),e):y},force:function(t,n){return arguments.length>1?(null==n?p.delete(t):p.set(t,k(n)),e):p.get(t)},find:function(e,n,r){var i,a,o,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(o=(i=e-(s=t[l]).x)*i+(a=n-s.y)*a)<r&&(u=s,r=o);return u},on:function(t,n){return arguments.length>1?(g.on(t,n),e):g.on(t)}}}},70341:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(13548);function i(t){var e,n,i,a=(0,r.Z)(.1);function o(t){for(var r,a=0,o=e.length;a<o;++a)(r=e[a]).vx+=(i[a]-r.x)*n[a]*t}function s(){if(e){var r,o=e.length;for(n=new Array(o),i=new Array(o),r=0;r<o;++r)n[r]=isNaN(i[r]=+t(e[r],r,e))?0:+a(e[r],r,e)}}return"function"!=typeof t&&(t=(0,r.Z)(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(a="function"==typeof t?t:(0,r.Z)(+t),s(),o):a},o.x=function(e){return arguments.length?(t="function"==typeof e?e:(0,r.Z)(+e),s(),o):t},o}},12688:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(13548);function i(t){var e,n,i,a=(0,r.Z)(.1);function o(t){for(var r,a=0,o=e.length;a<o;++a)(r=e[a]).vy+=(i[a]-r.y)*n[a]*t}function s(){if(e){var r,o=e.length;for(n=new Array(o),i=new Array(o),r=0;r<o;++r)n[r]=isNaN(i[r]=+t(e[r],r,e))?0:+a(e[r],r,e)}}return"function"!=typeof t&&(t=(0,r.Z)(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(a="function"==typeof t?t:(0,r.Z)(+t),s(),o):a},o.y=function(e){return arguments.length?(t="function"==typeof e?e:(0,r.Z)(+e),s(),o):t},o}},81269:function(t,e,n){"use strict";function r(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,u,l,c,h,f,d=t._root,p={data:r},v=t._x0,g=t._y0,y=t._x1,m=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((l=e>=(a=(v+y)/2))?v=a:y=a,(c=n>=(o=(g+m)/2))?g=o:m=o,i=d,!(d=d[h=c<<1|l]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(l=e>=(a=(v+y)/2))?v=a:y=a,(c=n>=(o=(g+m)/2))?g=o:m=o}while((h=c<<1|l)==(f=(u>=o)<<1|s>=a));return i[f]=d,i[h]=p,t}function i(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function a(t){return t[0]}function o(t){return t[1]}function s(t,e,n){var r=new u(null==e?a:e,null==n?o:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function u(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function l(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}n.d(e,{Z:function(){return s}});var c=s.prototype=u.prototype;c.copy=function(){var t,e,n=new u(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=l(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=l(e));return n},c.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return r(this.cover(e,n),e,n,t)},c.addAll=function(t){var e,n,i,a,o=t.length,s=new Array(o),u=new Array(o),l=1/0,c=1/0,h=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(s[n]=i,u[n]=a,i<l&&(l=i),i>h&&(h=i),a<c&&(c=a),a>f&&(f=a));if(l>h||c>f)return this;for(this.cover(l,c).cover(h,f),n=0;n<o;++n)r(this,s[n],u[n],t[n]);return this},c.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,u=i-n||1,l=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=l,l=o,u*=2,s){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},c.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},c.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},c.find=function(t,e,n){var r,a,o,s,u,l,c,h=this._x0,f=this._y0,d=this._x1,p=this._y1,v=[],g=this._root;for(g&&v.push(new i(g,h,f,d,p)),null==n?n=1/0:(h=t-n,f=e-n,d=t+n,p=e+n,n*=n);l=v.pop();)if(!(!(g=l.node)||(a=l.x0)>d||(o=l.y0)>p||(s=l.x1)<h||(u=l.y1)<f))if(g.length){var y=(a+s)/2,m=(o+u)/2;v.push(new i(g[3],y,m,s,u),new i(g[2],a,m,y,u),new i(g[1],y,o,s,m),new i(g[0],a,o,y,m)),(c=(e>=m)<<1|t>=y)&&(l=v[v.length-1],v[v.length-1]=v[v.length-1-c],v[v.length-1-c]=l)}else{var b=t-+this._x.call(null,g.data),x=e-+this._y.call(null,g.data),k=b*b+x*x;if(k<n){var w=Math.sqrt(n=k);h=t-w,f=e-w,d=t+w,p=e+w,r=g.data}}return r},c.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,u,l,c,h,f,d=this._root,p=this._x0,v=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((l=a>=(s=(p+g)/2))?p=s:g=s,(c=o>=(u=(v+y)/2))?v=u:y=u,e=d,!(d=d[h=c<<1|l]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},c.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},c.root=function(){return this._root},c.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},c.visit=function(t){var e,n,r,a,o,s,u=[],l=this._root;for(l&&u.push(new i(l,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(l=e.node,r=e.x0,a=e.y0,o=e.x1,s=e.y1)&&l.length){var c=(r+o)/2,h=(a+s)/2;(n=l[3])&&u.push(new i(n,c,h,o,s)),(n=l[2])&&u.push(new i(n,r,h,c,s)),(n=l[1])&&u.push(new i(n,c,a,o,h)),(n=l[0])&&u.push(new i(n,r,a,c,h))}return this},c.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new i(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var a=e.node;if(a.length){var o,s=e.x0,u=e.y0,l=e.x1,c=e.y1,h=(s+l)/2,f=(u+c)/2;(o=a[0])&&n.push(new i(o,s,u,h,f)),(o=a[1])&&n.push(new i(o,h,u,l,f)),(o=a[2])&&n.push(new i(o,s,f,h,c)),(o=a[3])&&n.push(new i(o,h,f,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},c.x=function(t){return arguments.length?(this._x=t,this):this._x},c.y=function(t){return arguments.length?(this._y=t,this):this._y}},91739:function(t,e,n){"use strict";n.d(e,{B7:function(){return v},HT:function(){return g},zO:function(){return d}});var r,i,a=0,o=0,s=0,u=0,l=0,c=0,h="object"==typeof performance&&performance.now?performance:Date,f="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function d(){return l||(f(p),l=h.now()+c)}function p(){l=0}function v(){this._call=this._time=this._next=null}function g(t,e,n){var r=new v;return r.restart(t,e,n),r}function y(){l=(u=h.now())+c,a=o=0;try{!function(){d(),++a;for(var t,e=r;e;)(t=l-e._time)>=0&&e._call.call(void 0,t),e=e._next;--a}()}finally{a=0,function(){var t,e,n=r,a=1/0;for(;n;)n._call?(a>n._time&&(a=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:r=e);i=t,b(a)}(),l=0}}function m(){var t=h.now(),e=t-u;e>1e3&&(c-=e,u=t)}function b(t){a||(o&&(o=clearTimeout(o)),t-l>24?(t<1/0&&(o=setTimeout(y,t-h.now()-c)),s&&(s=clearInterval(s))):(s||(u=h.now(),s=setInterval(m,1e3)),a=1,f(y)))}v.prototype=g.prototype={constructor:v,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?d():+n)+(null==e?0:+e),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=n,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}}}}]);
//# sourceMappingURL=4392.20da18d1.async.js.map